webpackJsonp([15],{1071:function(t,e){},1072:function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 508.52 508.52" enable-background="new 0 0 508.52 508.52"><path d="M254.26 0c-140.415 0-254.26 113.845-254.26 254.26s113.845 254.26 254.26 254.26 254.26-113.845 254.26-254.26-113.845-254.26-254.26-254.26zm0 412.664c-17.544 0-31.782-14.239-31.782-31.782 0-17.576 14.239-31.782 31.782-31.782s31.782 14.207 31.782 31.782c0 17.543-14.238 31.782-31.782 31.782zm31.782-126.622c0 17.544-14.239 31.782-31.782 31.782s-31.782-14.239-31.782-31.782v-158.912c0-17.544 14.239-31.782 31.782-31.782s31.782 14.239 31.782 31.782v158.912z"/></svg>'},1073:function(t,e,n){(function(t,r,o){var i;(function(s){function u(t){return t&&t.Object===Object?t:null}function c(t){var e,n=t.length,r=Array(n);for(e=0;e<n;e++)r[e]=t[e];return r}function a(t){return function(){try{return t.apply(this,arguments)}catch(t){return Eo.e=t,Eo}}}function l(t){throw t}function h(t,e){var n,r,o;if(at&&e.stack&&"object"==typeof t&&null!==t&&t.stack&&-1===t.stack.indexOf(ft)){for(n=[],r=e;r;r=r.source)r.stack&&n.unshift(r.stack);n.unshift(t.stack),o=n.join("\n"+ft+"\n"),t.stack=p(o)}}function p(t){var e,n,r,o=t.split("\n"),i=[];for(e=0,n=o.length;e<n;e++)r=o[e],f(r)||d(r)||!r||i.push(r);return i.join("\n")}function f(t){var e,n,r=v(t);return!!r&&(e=r[0],n=r[1],e===pt&&n>=ht&&n<=ro)}function d(t){return-1!==t.indexOf("(module.js:")||-1!==t.indexOf("(node.js:")}function b(){var t,e,n;if(at)try{throw Error()}catch(r){if(t=r.stack.split("\n"),e=t[0].indexOf("@")>0?t[1]:t[2],!(n=v(e)))return;return pt=n[0],n[1]}}function v(t){var e,n,r=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(t);return r?[r[1],+r[2]]:(e=/at ([^ ]+):(\d+):(?:\d+)$/.exec(t))?[e[1],+e[2]]:(n=/.*@(.+):(\d+)$/.exec(t),n?[n[1],+n[2]]:s)}function _(t,e,n,r,o,i){var u,c,a,l,h,p,f,d,b=te(t),v=b.length;if(v!==te(e).length&&!r)return!1;for(u=v;u--;)if(c=b[u],!(r?c in e:Gt.call(e,c)))return!1;for(a=r;++u<v;){if(c=b[u],l=t[c],h=e[c],!(p===s?n(l,h,r,o,i):p))return!1;a||(a="constructor"===c)}return!(!a&&(f=t.constructor,d=e.constructor,f!==d&&"constructor"in t&&"constructor"in e&&!("function"==typeof f&&f instanceof f&&"function"==typeof d&&d instanceof d)))}function y(t,e,n){switch(n){case Dt:case kt:return+t==+e;case jt:return t.name===e.name&&t.message===e.message;case Tt:return t!==+t?e!==+e:t===+e;case qt:case Rt:return t===e+""}return!1}function m(t){return!!t&&"object"==typeof t}function w(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=Xt}function g(t){return m(t)&&w(t.length)&&!!Qt[Zt.call(t)]}function C(t,e){for(var n=-1,r=t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function E(t,e,n,r,o,i){var u,c,a,l=-1,h=t.length,p=e.length;if(h!==p&&!(r&&p>h))return!1;for(;++l<h;){if(u=t[l],c=e[l],a!==s){if(a)continue;return!1}if(r){if(!C(e,function(t){return u===t||n(u,t,r,o,i)}))return!1}else if(u!==c&&!n(u,c,r,o,i))return!1}return!0}function x(t,e,n,r,o,i){var s,u,c,a,l,h,p,f=re(t),d=re(e),b=$t,v=$t;if(f||(b=Zt.call(t),b===St?b=At:b!==At&&(f=g(t))),d||(v=Zt.call(e))===St&&(v=At),s=b===At&&!ne(t),
u=v===At&&!ne(e),c=b===v,c&&!f&&!s)return y(t,e,b);if(!r&&(a=s&&Gt.call(t,"__wrapped__"),l=u&&Gt.call(e,"__wrapped__"),a||l))return n(a?t.value():t,l?e.value():e,r,o,i);if(!c)return!1;for(o||(o=[]),i||(i=[]),h=o.length;h--;)if(o[h]===t)return i[h]===e;return o.push(t),i.push(e),p=(f?E:_)(t,e,n,r,o,i),o.pop(),i.pop(),p}function O(t,e,n,r,o){return t===e||(null==t||null==e||!ee(t)&&!m(e)?t!==t&&e!==e:x(t,e,O,n,r,o))}function S(t,e){var n,r=Array(t);for(n=0;n<t;n++)r[n]=e();return r}function $(t,e){this.id=t,this.value=e}function D(t){this._s=t,this.isDisposed=!1}function k(t){this._s=t}function j(t){this._s=t,this._l=t.length,this._i=0}function P(t){this._a=t}function N(t){this._a=t,this._l=L(t),this._i=0}function T(t){return"number"==typeof t&&po.isFinite(t)}function A(t){var e,n=t[wt];if(!n&&"string"==typeof t)return e=new k(t),e[wt]();if(!n&&t.length!==s)return e=new P(t),e[wt]();if(!n)throw new TypeError("Object is not iterable");return t[wt]()}function q(t){var e=+t;return 0===e?e:isNaN(e)?e:e<0?-1:1}function L(t){var e=+t.length;return isNaN(e)?0:0!==e&&T(e)?(e=q(e)*Math.floor(Math.abs(e)),e<=0?0:e>fn?fn:e):e}function R(t,e){return Ce(t)||(t=Se),new bn(e,t)}function I(t,e){this.observer=t,this.parent=e}function F(){return!1}function M(){var t,e=arguments.length,n=Array(e);for(t=0;t<e;t++)n[t]=arguments[t];return n}function F(){return!1}function M(){var t,e=arguments.length,n=Array(e);for(t=0;t<e;t++)n[t]=arguments[t];return n}function F(){return!1}function W(){return[]}function F(){return!1}function W(){return[]}function M(){var t,e=arguments.length,n=Array(e);for(t=0;t<e;t++)n[t]=arguments[t];return n}function z(t){return function(e){return t.subscribe(e)}}function U(t){return{"@@iterator":function(){return{next:function(){return{done:!1,value:t}}}}}}function U(t){return{"@@iterator":function(){return{next:function(){return{done:!1,value:t}}}}}}function V(t,e){return function(n){var r,o,i=n;for(r=0;r<e;r++){if(o=i[t[r]],s===o)return s;i=o}return i}}function B(t,e,n,r){var o=new Xr;return r.push(H(o,e,n)),t.apply(e,r),o.asObservable()}function H(t,e,n){return function(){var r,o=arguments.length,i=Array(o);for(r=0;r<o;r++)i[r]=arguments[r];if(Co(n)){if((i=xo(n).apply(e,i))===Eo)return t.onError(i.e);t.onNext(i)}else i.length<=1?t.onNext(i[0]):t.onNext(i);t.onCompleted()}}function K(t,e,n,r){var o=new Xr;return r.push(Y(o,e,n)),t.apply(e,r),o.asObservable()}function Y(t,e,n){return function(){var r,o,i,s=arguments[0];if(s)return t.onError(s);for(r=arguments.length,o=[],i=1;i<r;i++)o[i-1]=arguments[i];if(Co(n)){if((o=xo(n).apply(e,o))===Eo)return t.onError(o.e);t.onNext(o)}else o.length<=1?t.onNext(o[0]):t.onNext(o);t.onCompleted()}}function Q(t){return po.StaticNodeList?t instanceof po.StaticNodeList||t instanceof po.NodeList:"[object NodeList]"===Object.prototype.toString.call(t)}function J(t,e,n){this._e=t,this._n=e,this._fn=n,this._e.addEventListener(this._n,this._fn,!1),this.isDisposed=!1}function G(t,e,n){var r,o,i=new ue,s=Object.prototype.toString.call(t);if(Q(t)||"[object HTMLCollection]"===s)for(r=0,
o=t.length;r<o;r++)i.add(G(t.item(r),e,n));else t&&i.add(new J(t,e,n));return i}function Z(t,e){return new Ar(t,e)}function X(t,e,n){return new Qr(function(r){var o=t,i=ge(e);return n.scheduleRecursiveFuture(0,o,function(t,e){if(i>0){var s=n.now();o=new Date(o.getTime()+i),o.getTime()<=s&&(o=new Date(s+i))}r.onNext(t),e(t+1,new Date(o))})})}function tt(t,e,n){return t===e?new Qr(function(t){return n.schedulePeriodic(0,e,function(e){return t.onNext(e),e+1})}):cn(function(){return X(new Date(n.now()+t),e,n)})}function et(t,e,n){return new Qr(function(r){var o,i=!1,s=new ve,u=null,c=[],a=!1;return o=t.materialize().timestamp(n).subscribe(function(t){var o,l;"E"===t.value.kind?(c=[],c.push(t),u=t.value.error,l=!a):(c.push({value:t.value,timestamp:t.timestamp+e}),l=!i,i=!0),l&&(null!==u?r.onError(u):(o=new be,s.setDisposable(o),o.setDisposable(n.scheduleRecursiveFuture(null,e,function(t,e){var o,s,l,h;if(null===u){a=!0;do{l=null,c.length>0&&c[0].timestamp-n.now()<=0&&(l=c.shift().value),null!==l&&l.accept(r)}while(null!==l);h=!1,s=0,c.length>0?(h=!0,s=Math.max(0,c[0].timestamp-n.now())):i=!1,o=u,a=!1,null!==o?r.onError(o):h&&e(null,s)}}))))}),new _e(o,s)},t)}function nt(t,e,n){return cn(function(){return et(t,e-n.now(),n)})}function rt(t,e,n){var r,o;return Co(e)?o=e:(r=e,o=n),new Qr(function(e){function n(){c.setDisposable(t.subscribe(function(t){var n,r=xo(o)(t);if(r===Eo)return e.onError(r.e);n=new be,s.add(n),n.setDisposable(r.subscribe(function(){e.onNext(t),s.remove(n),i()},function(t){e.onError(t)},function(){e.onNext(t),s.remove(n),i()}))},function(t){e.onError(t)},function(){u=!0,c.dispose(),i()}))}function i(){u&&0===s.length&&e.onCompleted()}var s=new ue,u=!1,c=new ve;return r?c.setDisposable(r.subscribe(n,function(t){e.onError(t)},n)):n(),new _e(c,s)},t)}function ot(t,e){return new Qr(function(n){var r,o=!1,i=new ve,s=0,u=t.subscribe(function(t){var u,c,a=xo(e)(t);if(a===Eo)return n.onError(a.e);go(a)&&(a=jr(a)),o=!0,r=t,s++,u=s,c=new be,i.setDisposable(c),c.setDisposable(a.subscribe(function(){o&&s===u&&n.onNext(r),o=!1,c.dispose()},function(t){n.onError(t)},function(){o&&s===u&&n.onNext(r),o=!1,c.dispose()}))},function(t){i.dispose(),n.onError(t),o=!1,s++},function(){i.dispose(),o&&n.onNext(r),n.onCompleted(),o=!1,s++});return new _e(u,i)},t)}function it(t,e,n,r){return Co(e)&&(r=n,n=e,e=mn()),Ye.isObservable(r)||(r=On(new Ur)),new Qr(function(o){function i(t){function e(){return c=n===u}var n=u,i=new be;l.setDisposable(i),i.setDisposable(t.subscribe(function(){e()&&a.setDisposable(r.subscribe(o)),i.dispose()},function(t){e()&&o.onError(t)},function(){e()&&a.setDisposable(r.subscribe(o))}))}function s(){var t=!c;return t&&u++,t}var u,c,a=new ve,l=new ve,h=new be;return a.setDisposable(h),u=0,c=!1,i(e),h.setDisposable(t.subscribe(function(t){if(s()){o.onNext(t);var e=xo(n)(t);if(e===Eo)return o.onError(e.e);i(go(e)?jr(e):e)}},function(t){s()&&o.onError(t)},function(){s()&&o.onCompleted()})),new _e(a,l)},t)}function st(t,e,n,r){return Ce(n)&&(r=n,n=On(new Ur)),n instanceof Error&&(n=On(n)),Ce(r)||(r=Te),
Ye.isObservable(n)||(n=On(new Ur)),new Qr(function(o){function i(){var t=s;l.setDisposable(r.scheduleFuture(null,e,function(){(a=s===t)&&(go(n)&&(n=jr(n)),c.setDisposable(n.subscribe(o)))}))}var s=0,u=new be,c=new ve,a=!1,l=new ve;return c.setDisposable(u),i(),u.setDisposable(t.subscribe(function(t){a||(s++,o.onNext(t),i())},function(t){a||(s++,o.onError(t))},function(){a||(s++,o.onCompleted())})),new _e(c,l)},t)}function ut(t,e,n){return new Qr(function(r){function o(t,e){if(a[e]=t,s[e]=!0,u||(u=s.every(vo))){if(i)return r.onError(i);var o=xo(n).apply(null,a);if(o===Eo)return r.onError(o.e);r.onNext(o)}c&&a[1]&&r.onCompleted()}var i,s=[!1,!1],u=!1,c=!1,a=Array(2);return new _e(t.subscribe(function(t){o(t,0)},function(t){a[1]?r.onError(t):i=t},function(){c=!0,a[1]&&r.onCompleted()}),e.subscribe(function(t){o(t,1)},function(t){r.onError(t)},function(){c=!0,o(!0,1)}))},t)}function ct(t){return{"@@transducer/init":function(){return t},"@@transducer/step":function(t,e){return t.onNext(e)},"@@transducer/result":function(t){return t.onCompleted()}}}var at,lt,ht,pt,ft,dt,bt,vt,_t,yt,mt,wt,gt,Ct,Et,xt,Ot,St,$t,Dt,kt,jt,Pt,Nt,Tt,At,qt,Lt,Rt,It,Ft,Mt,Wt,zt,Ut,Vt,Bt,Ht,Kt,Yt,Qt,Jt,Gt,Zt,Xt,te,ee,ne,re,oe,ie,se,ue,ce,ae,le,he,pe,fe,de,be,ve,_e,ye,me,we,ge,Ce,Ee,xe,Oe,Se,$e,De,ke,je,Pe,Ne,Te,Ae,qe,Le,Re,Ie,Fe,Me,We,ze,Ue,Ve,Be,He,Ke,Ye,Qe,Je,Ge,Ze,Xe,tn,en,nn,rn,on,sn,un,cn,an,ln,hn,pn,fn,dn,bn,vn,_n,yn,mn,wn,gn,Cn,En,xn,On,Sn,$n,Dn,kn,jn,Pn,Nn,Tn,An,qn,Ln,Rn,In,Fn,Mn,Wn,zn,Un,Vn,Bn,Hn,Kn,Yn,Qn,Jn,Gn,Zn,Xn,tr,er,nr,rr,or,ir,sr,ur,cr,ar,lr,hr,pr,fr,dr,br,vr,_r,yr,mr,wr,gr,Cr,Er,xr,Or,Sr,$r,Dr,kr,jr,Pr,Nr,Tr,Ar,qr,Lr,Rr,Ir,Fr,Mr,Wr,zr,Ur,Vr,Br,Hr,Kr,Yr,Qr,Jr,Gr,Zr,Xr,to,eo,no,ro,oo={function:!0,object:!0},io=oo[typeof e]&&e&&!e.nodeType?e:null,so=oo[typeof t]&&t&&!t.nodeType?t:null,uo=u(io&&so&&"object"==typeof r&&r),co=u(oo[typeof self]&&self),ao=u(oo[typeof window]&&window),lo=so&&so.exports===io?io:null,ho=u(oo[typeof this]&&this),po=uo||ao!==(ho&&ho.window)&&ao||co||ho||Function("return this")(),fo={internals:{},config:{Promise:po.Promise},helpers:{}},bo=fo.helpers.noop=function(){},vo=fo.helpers.identity=function(t){return t},_o=fo.helpers.defaultNow=Date.now,yo=fo.helpers.defaultComparer=function(t,e){return oe(t,e)},mo=fo.helpers.defaultSubComparer=function(t,e){return t>e?1:t<e?-1:0},wo=(fo.helpers.defaultKeySerializer=function(t){return""+t},fo.helpers.defaultError=function(t){throw t}),go=fo.helpers.isPromise=function(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then},Co=fo.helpers.isFunction=function(){var t=function(t){return"function"==typeof t||!1};return t(/x/)&&(t=function(t){return"function"==typeof t&&"[object Function]"==toString.call(t)}),t}(),Eo={e:{}},xo=fo.internals.tryCatch=function(t){if(!Co(t))throw new TypeError("fn must be a function");return a(t)};fo.config.longStackSupport=!1,at=!1,lt=xo(function(){throw Error()})(),at=!!lt.e&&!!lt.e.stack,ht=b(),ft="From previous event:",dt=fo.EmptyError=function(){this.message="Sequence contains no elements.",Error.call(this)},
dt.prototype=Object.create(Error.prototype),dt.prototype.name="EmptyError",bt=fo.ObjectDisposedError=function(){this.message="Object has been disposed",Error.call(this)},bt.prototype=Object.create(Error.prototype),bt.prototype.name="ObjectDisposedError",vt=fo.ArgumentOutOfRangeError=function(){this.message="Argument out of range",Error.call(this)},vt.prototype=Object.create(Error.prototype),vt.prototype.name="ArgumentOutOfRangeError",_t=fo.NotSupportedError=function(t){this.message=t||"This operation is not supported",Error.call(this)},_t.prototype=Object.create(Error.prototype),_t.prototype.name="NotSupportedError",yt=fo.NotImplementedError=function(t){this.message=t||"This operation is not implemented",Error.call(this)},yt.prototype=Object.create(Error.prototype),yt.prototype.name="NotImplementedError",mt=fo.helpers.notImplemented=function(){throw new yt},fo.helpers.notSupported=function(){throw new _t},wt="function"==typeof Symbol&&Symbol.iterator||"_es6shim_iterator_",po.Set&&"function"==typeof(new po.Set)["@@iterator"]&&(wt="@@iterator"),gt=fo.doneEnumerator={done:!0,value:s},Ct=fo.helpers.isIterable=function(t){return t&&t[wt]!==s},Et=fo.helpers.isArrayLike=function(t){return t&&t.length!==s},fo.helpers.iterator=wt,xt=fo.internals.bindCallback=function(t,e,n){if(s===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,o){return t.call(e,n,r,o)}}return function(){return t.apply(e,arguments)}},Ot=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],Ot.length,St="[object Arguments]",$t="[object Array]",Dt="[object Boolean]",kt="[object Date]",jt="[object Error]",Pt="[object Function]",Nt="[object Map]",Tt="[object Number]",At="[object Object]",qt="[object RegExp]",Lt="[object Set]",Rt="[object String]",It="[object WeakMap]",Ft="[object ArrayBuffer]",Mt="[object Float32Array]",Wt="[object Float64Array]",zt="[object Int8Array]",Ut="[object Int16Array]",Vt="[object Int32Array]",Bt="[object Uint8Array]",Ht="[object Uint8ClampedArray]",Kt="[object Uint16Array]",Yt="[object Uint32Array]",Qt={},Qt[Mt]=Qt[Wt]=Qt[zt]=Qt[Ut]=Qt[Vt]=Qt[Bt]=Qt[Ht]=Qt[Kt]=Qt[Yt]=!0,Qt[St]=Qt[$t]=Qt[Ft]=Qt[Dt]=Qt[kt]=Qt[jt]=Qt[Pt]=Qt[Nt]=Qt[Tt]=Qt[At]=Qt[qt]=Qt[Lt]=Qt[Rt]=Qt[It]=!1,Jt=Object.prototype,Gt=Jt.hasOwnProperty,Zt=Jt.toString,Xt=Math.pow(2,53)-1,te=Object.keys||function(){var t=Object.prototype.hasOwnProperty,e=!{toString:null}.propertyIsEnumerable("toString"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],r=n.length;return function(o){if("object"!=typeof o&&("function"!=typeof o||null===o))throw new TypeError("Object.keys called on non-object");var i,s,u=[];for(i in o)t.call(o,i)&&u.push(i);if(e)for(s=0;s<r;s++)t.call(o,n[s])&&u.push(n[s]);return u}}(),ee=fo.internals.isObject=function(t){var e=typeof t;return!!t&&("object"===e||"function"===e)},ne=function(){try{Object({toString:0
}+"")}catch(t){return function(){return!1}}return function(t){return"function"!=typeof t.toString&&"string"==typeof(t+"")}}(),re=Array.isArray||function(t){return m(t)&&w(t.length)&&Zt.call(t)===$t},oe=fo.internals.isEqual=function(t,e){return O(t,e)},{}.hasOwnProperty,Array.prototype.slice,ie=fo.internals.inherits=function(t,e){function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n},se=fo.internals.addProperties=function(t){var e,n,r,o,i,s,u;for(e=[],n=1,r=arguments.length;n<r;n++)e.push(arguments[n]);for(o=0,i=e.length;o<i;o++){s=e[o];for(u in s)t[u]=s[u]}},fo.internals.addRef=function(t,e){return new Qr(function(n){return new _e(e.getDisposable(),t.subscribe(n))})},ue=fo.CompositeDisposable=function(){var t,e,n=[];if(Array.isArray(arguments[0]))n=arguments[0];else for(e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];this.disposables=n,this.isDisposed=!1,this.length=n.length},ce=ue.prototype,ce.add=function(t){this.isDisposed?t.dispose():(this.disposables.push(t),this.length++)},ce.remove=function(t){var e,n=!1;return this.isDisposed||-1!==(e=this.disposables.indexOf(t))&&(n=!0,this.disposables.splice(e,1),this.length--,t.dispose()),n},ce.dispose=function(){var t,e,n;if(!this.isDisposed){for(this.isDisposed=!0,t=this.disposables.length,e=Array(t),n=0;n<t;n++)e[n]=this.disposables[n];for(this.disposables=[],this.length=0,n=0;n<t;n++)e[n].dispose()}},ae=fo.Disposable=function(t){this.isDisposed=!1,this.action=t||bo},ae.prototype.dispose=function(){this.isDisposed||(this.action(),this.isDisposed=!0)},le=ae.create=function(t){return new ae(t)},he=ae.empty={dispose:bo},pe=ae.isDisposable=function(t){return t&&Co(t.dispose)},fe=ae.checkDisposed=function(t){if(t.isDisposed)throw new bt},de=ae._fixup=function(t){return pe(t)?t:he},be=fo.SingleAssignmentDisposable=function(){this.isDisposed=!1,this.current=null},be.prototype.getDisposable=function(){return this.current},be.prototype.setDisposable=function(t){if(this.current)throw Error("Disposable has already been assigned");var e=this.isDisposed;!e&&(this.current=t),e&&t&&t.dispose()},be.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var t=this.current;this.current=null,t&&t.dispose()}},ve=fo.SerialDisposable=function(){this.isDisposed=!1,this.current=null},ve.prototype.getDisposable=function(){return this.current},ve.prototype.setDisposable=function(t){var e,n=this.isDisposed;n||(e=this.current,this.current=t),e&&e.dispose(),n&&t&&t.dispose()},ve.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var t=this.current;this.current=null}t&&t.dispose()},_e=fo.BinaryDisposable=function(t,e){this._first=t,this._second=e,this.isDisposed=!1},_e.prototype.dispose=function(){var t,e;this.isDisposed||(this.isDisposed=!0,t=this._first,this._first=null,t&&t.dispose(),e=this._second,this._second=null,e&&e.dispose())},ye=fo.NAryDisposable=function(t){this._disposables=t,this.isDisposed=!1},ye.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0
;for(var t=0,e=this._disposables.length;t<e;t++)this._disposables[t].dispose();this._disposables.length=0}},fo.RefCountDisposable=function(){function t(t){this.disposable=t,this.disposable.count++,this.isInnerDisposed=!1}function e(t){this.underlyingDisposable=t,this.isDisposed=!1,this.isPrimaryDisposed=!1,this.count=0}return t.prototype.dispose=function(){this.disposable.isDisposed||this.isInnerDisposed||(this.isInnerDisposed=!0,0===--this.disposable.count&&this.disposable.isPrimaryDisposed&&(this.disposable.isDisposed=!0,this.disposable.underlyingDisposable.dispose()))},e.prototype.dispose=function(){this.isDisposed||this.isPrimaryDisposed||(this.isPrimaryDisposed=!0,0===this.count&&(this.isDisposed=!0,this.underlyingDisposable.dispose()))},e.prototype.getDisposable=function(){return this.isDisposed?he:new t(this)},e}(),me=fo.internals.ScheduledItem=function(t,e,n,r,o){this.scheduler=t,this.state=e,this.action=n,this.dueTime=r,this.comparer=o||mo,this.disposable=new be},me.prototype.invoke=function(){this.disposable.setDisposable(this.invokeCore())},me.prototype.compareTo=function(t){return this.comparer(this.dueTime,t.dueTime)},me.prototype.isCancelled=function(){return this.disposable.isDisposed},me.prototype.invokeCore=function(){return de(this.action(this.scheduler,this.state))},we=fo.Scheduler=function(){function t(){}t.isScheduler=function(e){return e instanceof t};var e=t.prototype;return e.schedule=function(t,e){throw new yt},e.scheduleFuture=function(e,n,r){var o=n;return o instanceof Date&&(o-=this.now()),o=t.normalize(o),0===o?this.schedule(e,r):this._scheduleFuture(e,o,r)},e._scheduleFuture=function(t,e,n){throw new yt},t.now=_o,t.prototype.now=_o,t.normalize=function(t){return t<0&&(t=0),t},t}(),ge=we.normalize,Ce=we.isScheduler,function(t){function e(t,e){function n(e){function r(t,e){return s?i.remove(c):u=!0,o(e,n),he}var s=!1,u=!1,c=t.schedule(e,r);u||(i.add(c),s=!0)}var r=e[0],o=e[1],i=new ue;return o(r,n),i}function n(t,e){function n(e,r){function s(t,e){return u?i.remove(a):c=!0,o(e,n),he}var u=!1,c=!1,a=t.scheduleFuture(e,r,s);c||(i.add(a),u=!0)}var r=e[0],o=e[1],i=new ue;return o(r,n),i}t.scheduleRecursive=function(t,n){return this.schedule([t,n],e)},t.scheduleRecursiveFuture=function(t,e,r){return this.scheduleFuture([t,r],e,n)}}(we.prototype),function(t){t.schedulePeriodic=function(t,e,n){if(s===po.setInterval)throw new _t;e=ge(e);var r=t,o=po.setInterval(function(){r=n(r)},e);return le(function(){po.clearInterval(o)})}}(we.prototype),Ee=function(t){function e(){t.call(this)}return ie(e,t),e.prototype.schedule=function(t,e){return de(e(this,t))},e}(we),xe=we.immediate=new Ee,Oe=function(t){function e(){for(;r.length>0;){var t=r.dequeue();!t.isCancelled()&&t.invoke()}}function n(){t.call(this)}var r;return ie(n,t),n.prototype.schedule=function(t,n){var o,i=new me(this,t,n,this.now());return r?r.enqueue(i):(r=new Ae(4),r.enqueue(i),o=xo(e)(),r=null,o===Eo&&l(o.e)),i.disposable},n.prototype.scheduleRequired=function(){return!r},n}(we),Se=we.currentThread=new Oe,
fo.internals.SchedulePeriodicRecursive=function(){function t(t){return function(e,n){n(0,t._period);var r=xo(t._action)(t._state);r===Eo&&(t._cancel.dispose(),l(r.e)),t._state=r}}function e(t,e,n,r){this._scheduler=t,this._state=e,this._period=n,this._action=r}return e.prototype.start=function(){var e=new be;return this._cancel=e,e.setDisposable(this._scheduler.scheduleRecursiveFuture(0,this._period,t(this))),e},e}(),ke=function(){var t,e=bo;if(po.setTimeout)t=po.setTimeout,e=po.clearTimeout;else{if(!po.WScript)throw new _t;t=function(t,e){po.WScript.Sleep(e),t()}}return{setTimeout:t,clearTimeout:e}}(),je=ke.setTimeout,Pe=ke.clearTimeout,function(){function t(e){var n,r;p?je(function(){t(e)},0):(n=h[e])&&(p=!0,r=xo(n)(),De(e),p=!1,r===Eo&&l(r.e))}function e(){if(!po.postMessage||po.importScripts)return!1;var t=!1,e=po.onmessage;return po.onmessage=function(){t=!0},po.postMessage("","*"),po.onmessage=e,t}var n,r,i,u,c,a=1,h={},p=!1;De=function(t){delete h[t]},n=RegExp("^"+(toString+"").replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),r="function"==typeof(r=uo&&lo&&uo.setImmediate)&&!n.test(r)&&r,Co(r)?$e=function(e){var n=a++;return h[n]=e,r(function(){t(n)}),n}:s!==o&&"[object process]"==={}.toString.call(o)?$e=function(e){var n=a++;return h[n]=e,o.nextTick(function(){t(n)}),n}:e()?(i="ms.rx.schedule"+Math.random(),u=function(e){"string"==typeof e.data&&e.data.substring(0,i.length)===i&&t(e.data.substring(i.length))},po.addEventListener("message",u,!1),$e=function(t){var e=a++;return h[e]=t,po.postMessage(i+e,"*"),e}):po.MessageChannel?(c=new po.MessageChannel,c.port1.onmessage=function(e){t(e.data)},$e=function(t){var e=a++;return h[e]=t,c.port2.postMessage(e),e}):$e="document"in po&&"onreadystatechange"in po.document.createElement("script")?function(e){var n=po.document.createElement("script"),r=a++;return h[r]=e,n.onreadystatechange=function(){t(r),n.onreadystatechange=null,n.parentNode.removeChild(n),n=null},po.document.documentElement.appendChild(n),r}:function(e){var n=a++;return h[n]=e,je(function(){t(n)},0),n}}(),Ne=function(t){function e(){t.call(this)}function n(t,e,n,r){return function(){t.setDisposable(ae._fixup(e(n,r)))}}function r(t){this._id=t,this.isDisposed=!1}function o(t){this._id=t,this.isDisposed=!1}return ie(e,t),r.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,De(this._id))},o.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,Pe(this._id))},e.prototype.schedule=function(t,e){var o=new be,i=$e(n(o,e,this,t));return new _e(o,new r(i))},e.prototype._scheduleFuture=function(t,e,r){if(0===e)return this.schedule(t,r);var i=new be,s=je(n(i,r,this,t),e);return new _e(i,new o(s))},e}(we),Te=we.default=we.async=new Ne,$.prototype.compareTo=function(t){var e=this.value.compareTo(t.value);return 0===e&&(e=this.id-t.id),e},Ae=fo.internals.PriorityQueue=function(t){this.items=Array(t),this.length=0},qe=Ae.prototype,qe.isHigherPriority=function(t,e){return this.items[t].compareTo(this.items[e])<0},qe.percolate=function(t){var e,n
;t>=this.length||t<0||(e=t-1>>1)<0||e===t||this.isHigherPriority(t,e)&&(n=this.items[t],this.items[t]=this.items[e],this.items[e]=n,this.percolate(e))},qe.heapify=function(t){var e,n,r,o;+t||(t=0),t>=this.length||t<0||(e=2*t+1,n=2*t+2,r=t,e<this.length&&this.isHigherPriority(e,r)&&(r=e),n<this.length&&this.isHigherPriority(n,r)&&(r=n),r!==t&&(o=this.items[t],this.items[t]=this.items[r],this.items[r]=o,this.heapify(r)))},qe.peek=function(){return this.items[0].value},qe.removeAt=function(t){this.items[t]=this.items[--this.length],this.items[this.length]=s,this.heapify()},qe.dequeue=function(){var t=this.peek();return this.removeAt(0),t},qe.enqueue=function(t){var e=this.length++;this.items[e]=new $(Ae.count++,t),this.percolate(e)},qe.remove=function(t){for(var e=0;e<this.length;e++)if(this.items[e].value===t)return this.removeAt(e),!0;return!1},Ae.count=0,Le=fo.Notification=function(){function t(){}return t.prototype._accept=function(t,e,n){throw new yt},t.prototype._acceptObserver=function(t,e,n){throw new yt},t.prototype.accept=function(t,e,n){return t&&"object"==typeof t?this._acceptObserver(t):this._accept(t,e,n)},t.prototype.toObservable=function(t){var e=this;return Ce(t)||(t=xe),new Qr(function(n){return t.schedule(e,function(t,e){e._acceptObserver(n),"N"===e.kind&&n.onCompleted()})})},t}(),Re=function(t){function e(t){this.value=t,this.kind="N"}return ie(e,t),e.prototype._accept=function(t){return t(this.value)},e.prototype._acceptObserver=function(t){return t.onNext(this.value)},e.prototype.toString=function(){return"OnNext("+this.value+")"},e}(Le),Ie=function(t){function e(t){this.error=t,this.kind="E"}return ie(e,t),e.prototype._accept=function(t,e){return e(this.error)},e.prototype._acceptObserver=function(t){return t.onError(this.error)},e.prototype.toString=function(){return"OnError("+this.error+")"},e}(Le),Fe=function(t){function e(){this.kind="C"}return ie(e,t),e.prototype._accept=function(t,e,n){return n()},e.prototype._acceptObserver=function(t){return t.onCompleted()},e.prototype.toString=function(){return"OnCompleted()"},e}(Le),Me=Le.createOnNext=function(t){return new Re(t)},We=Le.createOnError=function(t){return new Ie(t)},ze=Le.createOnCompleted=function(){return new Fe},Ue=fo.Observer=function(){},Ve=Ue.create=function(t,e,n){return t||(t=bo),e||(e=wo),n||(n=bo),new He(t,e,n)},Be=fo.internals.AbstractObserver=function(t){function e(){this.isStopped=!1}return ie(e,t),e.prototype.next=mt,e.prototype.error=mt,e.prototype.completed=mt,e.prototype.onNext=function(t){!this.isStopped&&this.next(t)},e.prototype.onError=function(t){this.isStopped||(this.isStopped=!0,this.error(t))},e.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.completed())},e.prototype.dispose=function(){this.isStopped=!0},e.prototype.fail=function(t){return!this.isStopped&&(this.isStopped=!0,this.error(t),!0)},e}(Ue),He=fo.AnonymousObserver=function(t){function e(e,n,r){t.call(this),this._onNext=e,this._onError=n,this._onCompleted=r}return ie(e,t),e.prototype.next=function(t){this._onNext(t)},
e.prototype.error=function(t){this._onError(t)},e.prototype.completed=function(){this._onCompleted()},e}(Be),Ye=fo.Observable=function(){function t(t,e){return function(n){var r=n.onError;return n.onError=function(e){h(e,t),r.call(n,e)},e.call(t,n)}}function e(){var e,n;fo.config.longStackSupport&&at&&(e=this._subscribe,n=xo(l)(Error()).e,this.stack=n.stack.substring(n.stack.indexOf("\n")+1),this._subscribe=t(this,e))}return Ke=e.prototype,e.isObservable=function(t){return t&&Co(t.subscribe)},Ke.subscribe=Ke.forEach=function(t,e,n){return this._subscribe("object"==typeof t?t:Ve(t,e,n))},Ke.subscribeOnNext=function(t,e){return this._subscribe(Ve(s!==e?function(n){t.call(e,n)}:t))},Ke.subscribeOnError=function(t,e){return this._subscribe(Ve(null,s!==e?function(n){t.call(e,n)}:t))},Ke.subscribeOnCompleted=function(t,e){return this._subscribe(Ve(null,null,s!==e?function(){t.call(e)}:t))},e}(),Qe=fo.internals.ScheduledObserver=function(t){function e(e,n){t.call(this),this.scheduler=e,this.observer=n,this.isAcquired=!1,this.hasFaulted=!1,this.queue=[],this.disposable=new ve}function n(t,e){return function(){t.onNext(e)}}function r(t,e){return function(){t.onError(e)}}function o(t){return function(){t.onCompleted()}}function i(t,e){var n,r;return t.queue.length>0?(n=t.queue.shift(),(r=xo(n)())===Eo?(t.queue=[],t.hasFaulted=!0,l(r.e)):void e(t)):void(t.isAcquired=!1)}return ie(e,t),e.prototype.next=function(t){this.queue.push(n(this.observer,t))},e.prototype.error=function(t){this.queue.push(r(this.observer,t))},e.prototype.completed=function(){this.queue.push(o(this.observer))},e.prototype.ensureActive=function(){var t=!1;!this.hasFaulted&&this.queue.length>0&&(t=!this.isAcquired,this.isAcquired=!0),t&&this.disposable.setDisposable(this.scheduler.scheduleRecursive(this,i))},e.prototype.dispose=function(){t.prototype.dispose.call(this),this.disposable.dispose()},e}(Be),Je=fo.ObservableBase=function(t){function e(t){return t&&Co(t.dispose)?t:Co(t)?le(t):he}function n(t,n){var r=n[0],o=n[1],i=xo(o.subscribeCore).call(o,r);i!==Eo||r.fail(Eo.e)||l(Eo.e),r.setDisposable(e(i))}function r(){t.call(this)}return ie(r,t),r.prototype._subscribe=function(t){var e=new Jr(t),r=[e,this];return Se.scheduleRequired()?Se.schedule(r,n):n(null,r),e},r.prototype.subscribeCore=mt,r}(Ye),Ge=fo.FlatMapObservable=function(t){function e(e,n,r,o){this.resultSelector=Co(r)?r:null,this.selector=xt(Co(n)?n:function(){return n},o,3),this.source=e,t.call(this)}function n(t,e,n,r){this.i=0,this.selector=e,this.resultSelector=n,this.source=r,this.o=t,Be.call(this)}return ie(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t,this.selector,this.resultSelector,this))},ie(n,Be),n.prototype._wrapResult=function(t,e,n){return this.resultSelector?t.map(function(t,r){return this.resultSelector(e,t,n,r)},this):t},n.prototype.next=function(t){var e=this.i++,n=xo(this.selector)(t,e,this.source);if(n===Eo)return this.o.onError(n.e);go(n)&&(n=jr(n)),(Et(n)||Ct(n))&&(n=Ye.from(n)),this.o.onNext(this._wrapResult(n,t,e))},
n.prototype.error=function(t){this.o.onError(t)},n.prototype.completed=function(){this.o.onCompleted()},e}(Je),Ze=fo.internals.Enumerable=function(){},D.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._s.isDisposed=!0)},Xe=function(t){function e(e){this.sources=e,t.call(this)}function n(t,e){var n,o,i;if(!t.isDisposed){if((n=xo(t.e.next).call(t.e))===Eo)return t.o.onError(n.e);if(n.done)return t.o.onCompleted();o=n.value,go(o)&&(o=jr(o)),i=new be,t.subscription.setDisposable(i),i.setDisposable(o.subscribe(new r(t,e)))}}function r(t,e){this._state=t,this._recurse=e,Be.call(this)}return ie(e,t),e.prototype.subscribeCore=function(t){var e=new ve,r={isDisposed:!1,o:t,subscription:e,e:this.sources[wt]()},o=Se.scheduleRecursive(r,n);return new ye([e,o,new D(r)])},ie(r,Be),r.prototype.next=function(t){this._state.o.onNext(t)},r.prototype.error=function(t){this._state.o.onError(t)},r.prototype.completed=function(){this._recurse(this._state)},e}(Je),Ze.prototype.concat=function(){return new Xe(this)},tn=function(t){function e(e){this.sources=e,t.call(this)}function n(t,e){var n,o,i;if(!t.isDisposed){if((n=xo(t.e.next).call(t.e))===Eo)return t.o.onError(n.e);if(n.done)return null!==t.lastError?t.o.onError(t.lastError):t.o.onCompleted();o=n.value,go(o)&&(o=jr(o)),i=new be,t.subscription.setDisposable(i),i.setDisposable(o.subscribe(new r(t,e)))}}function r(t,e){this._state=t,this._recurse=e,Be.call(this)}return ie(e,t),e.prototype.subscribeCore=function(t){var e=new ve,r={isDisposed:!1,e:this.sources[wt](),subscription:e,lastError:null,o:t},o=Se.scheduleRecursive(r,n);return new ye([e,o,new D(r)])},ie(r,Be),r.prototype.next=function(t){this._state.o.onNext(t)},r.prototype.error=function(t){this._state.lastError=t,this._recurse(this._state)},r.prototype.completed=function(){this._state.o.onCompleted()},e}(Je),Ze.prototype.catchError=function(){return new tn(this)},en=function(t){function e(t,e){this.v=t,this.c=null==e?-1:e}function n(t){this.v=t.v,this.l=t.c}return ie(e,t),e.prototype[wt]=function(){return new n(this)},n.prototype.next=function(){return 0===this.l?gt:(this.l>0&&this.l--,{done:!1,value:this.v})},e}(Ze),nn=Ze.repeat=function(t,e){return new en(t,e)},rn=function(t){function e(t,e,n){this.s=t,this.fn=e?xt(e,n,3):null}function n(t){this.i=-1,this.s=t.s,this.l=this.s.length,this.fn=t.fn}return ie(e,t),e.prototype[wt]=function(){return new n(this)},n.prototype.next=function(){return++this.i<this.l?{done:!1,value:this.fn?this.fn(this.s[this.i],this.i,this.s):this.s[this.i]}:gt},e}(Ze),on=Ze.of=function(t,e,n){return new rn(t,e,n)},sn=function(t){function e(e){this.source=e,t.call(this)}function n(t){this.o=t,this.a=[],Be.call(this)}return ie(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t))},ie(n,Be),n.prototype.next=function(t){this.a.push(t)},n.prototype.error=function(t){this.o.onError(t)},n.prototype.completed=function(){this.o.onNext(this.a),this.o.onCompleted()},e}(Je),Ke.toArray=function(){return new sn(this)},Ye.create=function(t,e){return new Qr(t,e)},
un=function(t){function e(e){this._f=e,t.call(this)}return ie(e,t),e.prototype.subscribeCore=function(t){var e=xo(this._f)();return e===Eo?On(e.e).subscribe(t):(go(e)&&(e=jr(e)),e.subscribe(t))},e}(Je),cn=Ye.defer=function(t){return new un(t)},an=function(t){function e(e){this.scheduler=e,t.call(this)}function n(t,e){this.observer=t,this.scheduler=e}function r(t,e){return e.onCompleted(),he}return ie(e,t),e.prototype.subscribeCore=function(t){return new n(t,this.scheduler).run()},n.prototype.run=function(){var t=this.observer;return this.scheduler===xe?r(null,t):this.scheduler.schedule(t,r)},e}(Je),ln=new an(xe),hn=Ye.empty=function(t){return Ce(t)||(t=xe),t===xe?ln:new an(t)},pn=function(t){function e(e,n,r){this._iterable=e,this._fn=n,this._scheduler=r,t.call(this)}function n(t,e,n){return function(r,o){var i,s=xo(e.next).call(e);return s===Eo?t.onError(s.e):s.done?t.onCompleted():(i=s.value,Co(n)&&(i=xo(n)(i,r))===Eo?t.onError(i.e):(t.onNext(i),void o(r+1)))}}return ie(e,t),e.prototype.subscribeCore=function(t){var e=Object(this._iterable),r=A(e);return this._scheduler.scheduleRecursive(0,n(t,r,this._fn))},e}(Je),fn=Math.pow(2,53)-1,k.prototype[wt]=function(){return new j(this._s)},j.prototype[wt]=function(){return this},j.prototype.next=function(){return this._i<this._l?{done:!1,value:this._s.charAt(this._i++)}:gt},P.prototype[wt]=function(){return new N(this._a)},N.prototype[wt]=function(){return this},N.prototype.next=function(){return this._i<this._l?{done:!1,value:this._a[this._i++]}:gt},dn=Ye.from=function(t,e,n,r){if(null==t)throw Error("iterable cannot be null.");if(e&&!Co(e))throw Error("mapFn when provided must be a function");if(e)var o=xt(e,n,2);return Ce(r)||(r=Se),new pn(t,o,r)},bn=function(t){function e(e,n){this._args=e,this._scheduler=n,t.call(this)}function n(t,e){var n=e.length;return function(r,o){r<n?(t.onNext(e[r]),o(r+1)):t.onCompleted()}}return ie(e,t),e.prototype.subscribeCore=function(t){return this._scheduler.scheduleRecursive(0,n(t,this._args))},e}(Je),vn=Ye.fromArray=function(t,e){return Ce(e)||(e=Se),new bn(t,e)},_n=function(t){function e(){t.call(this)}return ie(e,t),e.prototype.subscribeCore=function(t){return he},e}(Je),yn=new _n,mn=Ye.never=function(){return yn},Ye.of=function(){var t,e=arguments.length,n=Array(e);for(t=0;t<e;t++)n[t]=arguments[t];return new bn(n,Se)},Ye.ofWithScheduler=function(t){var e,n=arguments.length,r=Array(n-1);for(e=1;e<n;e++)r[e-1]=arguments[e];return new bn(r,t)},wn=function(t){function e(e,n){this._o=e,this._keys=Object.keys(e),this._scheduler=n,t.call(this)}function n(t,e,n){return function(r,o){if(r<n.length){var i=n[r];t.onNext([i,e[i]]),o(r+1)}else t.onCompleted()}}return ie(e,t),e.prototype.subscribeCore=function(t){return this._scheduler.scheduleRecursive(0,n(t,this._o,this._keys))},e}(Je),Ye.pairs=function(t,e){return e||(e=Se),new wn(t,e)},gn=function(t){function e(e,n,r){this.start=e,this.rangeCount=n,this.scheduler=r,t.call(this)}function n(t,e,n){return function(r,o){r<e?(n.onNext(t+r),o(r+1)):n.onCompleted()}}return ie(e,t),
e.prototype.subscribeCore=function(t){return this.scheduler.scheduleRecursive(0,n(this.start,this.rangeCount,t))},e}(Je),Ye.range=function(t,e,n){return Ce(n)||(n=Se),new gn(t,e,n)},Cn=function(t){function e(e,n,r){this.value=e,this.repeatCount=null==n?-1:n,this.scheduler=r,t.call(this)}return ie(e,t),e.prototype.subscribeCore=function(t){return new I(t,this).run()},e}(Je),I.prototype.run=function(){function t(t,r){if((-1===t||t>0)&&(e.onNext(n),t>0&&t--),0===t)return e.onCompleted();r(t)}var e=this.observer,n=this.parent.value;return this.parent.scheduler.scheduleRecursive(this.parent.repeatCount,t)},Ye.repeat=function(t,e,n){return Ce(n)||(n=Se),new Cn(t,e,n)},En=function(t){function e(e,n){this._value=e,this._scheduler=n,t.call(this)}function n(t,e){var n=e[0],r=e[1];return r.onNext(n),r.onCompleted(),he}return ie(e,t),e.prototype.subscribeCore=function(t){var e=[this._value,t];return this._scheduler===xe?n(null,e):this._scheduler.schedule(e,n)},e}(Je),Ye.return=Ye.just=function(t,e){return Ce(e)||(e=xe),new En(t,e)},xn=function(t){function e(e,n){this._error=e,this._scheduler=n,t.call(this)}function n(t,e){var n=e[0];return e[1].onError(n),he}return ie(e,t),e.prototype.subscribeCore=function(t){var e=[this._error,t];return this._scheduler===xe?n(null,e):this._scheduler.schedule(e,n)},e}(Je),On=Ye.throw=function(t,e){return Ce(e)||(e=xe),new xn(t,e)},Sn=function(t){function e(e,n){this.source=e,this._fn=n,t.call(this)}return ie(e,t),e.prototype.subscribeCore=function(t){var e=new be,n=new ve;return n.setDisposable(e),e.setDisposable(this.source.subscribe(new $n(t,n,this._fn))),n},e}(Je),$n=function(t){function e(e,n,r){this._o=e,this._s=n,this._fn=r,t.call(this)}return ie(e,t),e.prototype.next=function(t){this._o.onNext(t)},e.prototype.completed=function(){return this._o.onCompleted()},e.prototype.error=function(t){var e,n=xo(this._fn)(t);if(n===Eo)return this._o.onError(n.e);go(n)&&(n=jr(n)),e=new be,this._s.setDisposable(e),e.setDisposable(n.subscribe(this._o))},e}(Be),Ke.catch=function(t){return Co(t)?new Sn(this,t):Dn([this,t])},Dn=Ye.catch=function(){var t,e,n;if(Array.isArray(arguments[0]))t=arguments[0];else for(e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return on(t).catchError()},Ke.combineLatest=function(){var t,e=arguments.length,n=Array(e);for(t=0;t<e;t++)n[t]=arguments[t];return Array.isArray(n[0])?n[0].unshift(this):n.unshift(this),Pn.apply(this,n)},kn=function(t){function e(e,n){this._params=e,this._cb=n,t.call(this)}return ie(e,t),e.prototype.subscribeCore=function(t){var e,n,r,o=this._params.length,i=Array(o),s={hasValue:S(o,F),hasValueAll:!1,isDone:S(o,F),values:Array(o)};for(e=0;e<o;e++)n=this._params[e],r=new be,i[e]=r,go(n)&&(n=jr(n)),r.setDisposable(n.subscribe(new jn(t,e,this._cb,s)));return new ye(i)},e}(Je),jn=function(t){function e(e,n,r,o){this._o=e,this._i=n,this._cb=r,this._state=o,t.call(this)}function n(t){return function(e,n){return n!==t}}return ie(e,t),e.prototype.next=function(t){if(this._state.values[this._i]=t,this._state.hasValue[this._i]=!0,
this._state.hasValueAll||(this._state.hasValueAll=this._state.hasValue.every(vo))){var e=xo(this._cb).apply(null,this._state.values);if(e===Eo)return this._o.onError(e.e);this._o.onNext(e)}else this._state.isDone.filter(n(this._i)).every(vo)&&this._o.onCompleted()},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._state.isDone[this._i]=!0,this._state.isDone.every(vo)&&this._o.onCompleted()},e}(Be),Pn=Ye.combineLatest=function(){var t,e,n=arguments.length,r=Array(n);for(t=0;t<n;t++)r[t]=arguments[t];return e=Co(r[n-1])?r.pop():M,Array.isArray(r[0])&&(r=r[0]),new kn(r,e)},Ke.concat=function(){for(var t=[],e=0,n=arguments.length;e<n;e++)t.push(arguments[e]);return t.unshift(this),An.apply(null,t)},Nn=function(t){function e(e,n){this._s=e,this._fn=n,t.call(this)}return ie(e,t),e.prototype.next=function(t){this._s.o.onNext(t)},e.prototype.error=function(t){this._s.o.onError(t)},e.prototype.completed=function(){this._s.i++,this._fn(this._s)},e}(Be),Tn=function(t){function e(e){this._sources=e,t.call(this)}function n(t,e){var n,r;if(!t.disposable.isDisposed){if(t.i===t.sources.length)return t.o.onCompleted();n=t.sources[t.i],go(n)&&(n=jr(n)),r=new be,t.subscription.setDisposable(r),r.setDisposable(n.subscribe(new Nn(t,e)))}}return ie(e,t),e.prototype.subscribeCore=function(t){var e=new ve,r=le(bo),o={o:t,i:0,subscription:e,disposable:r,sources:this._sources},i=xe.scheduleRecursive(o,n);return new ye([e,r,i])},e}(Je),An=Ye.concat=function(){var t,e,n;if(Array.isArray(arguments[0]))t=arguments[0];else for(t=Array(arguments.length),e=0,n=arguments.length;e<n;e++)t[e]=arguments[e];return new Tn(t)},Ke.concatAll=function(){return this.merge(1)},qn=function(t){function e(e,n){this.source=e,this.maxConcurrent=n,t.call(this)}return ie(e,t),e.prototype.subscribeCore=function(t){var e=new ue;return e.add(this.source.subscribe(new Ln(t,this.maxConcurrent,e))),e},e}(Je),Ln=function(t){function e(e,n,r){this.o=e,this.max=n,this.g=r,this.done=!1,this.q=[],this.activeCount=0,t.call(this)}function n(e,n){this.parent=e,this.sad=n,t.call(this)}return ie(e,t),e.prototype.handleSubscribe=function(t){var e=new be;this.g.add(e),go(t)&&(t=jr(t)),e.setDisposable(t.subscribe(new n(this,e)))},e.prototype.next=function(t){this.activeCount<this.max?(this.activeCount++,this.handleSubscribe(t)):this.q.push(t)},e.prototype.error=function(t){this.o.onError(t)},e.prototype.completed=function(){this.done=!0,0===this.activeCount&&this.o.onCompleted()},ie(n,t),n.prototype.next=function(t){this.parent.o.onNext(t)},n.prototype.error=function(t){this.parent.o.onError(t)},n.prototype.completed=function(){this.parent.g.remove(this.sad),this.parent.q.length>0?this.parent.handleSubscribe(this.parent.q.shift()):(this.parent.activeCount--,this.parent.done&&0===this.parent.activeCount&&this.parent.o.onCompleted())},e}(Be),Ke.merge=function(t){return"number"!=typeof t?Rn(this,t):new qn(this,t)},Rn=Ye.merge=function(){var t,e,n=[],r=arguments.length;if(arguments[0])if(Ce(arguments[0]))for(t=arguments[0],
e=1;e<r;e++)n.push(arguments[e]);else for(t=xe,e=0;e<r;e++)n.push(arguments[e]);else for(t=xe,e=1;e<r;e++)n.push(arguments[e]);return Array.isArray(n[0])&&(n=n[0]),R(t,n).mergeAll()},In=fo.CompositeError=function(t){this.innerErrors=t,this.message="This contains multiple errors. Check the innerErrors",Error.call(this)},In.prototype=Object.create(Error.prototype),In.prototype.name="CompositeError",Fn=function(t){function e(e){this.source=e,t.call(this)}return ie(e,t),e.prototype.subscribeCore=function(t){var e=new ue,n=new be,r={isStopped:!1,errors:[],o:t};return e.add(n),n.setDisposable(this.source.subscribe(new Mn(e,r))),e},e}(Je),Mn=function(t){function e(e,n){this._group=e,this._state=n,t.call(this)}function n(t,e){0===e.length?t.onCompleted():1===e.length?t.onError(e[0]):t.onError(new In(e))}function r(e,n,r){this._inner=e,this._group=n,this._state=r,t.call(this)}return ie(e,t),e.prototype.next=function(t){var e=new be;this._group.add(e),go(t)&&(t=jr(t)),e.setDisposable(t.subscribe(new r(e,this._group,this._state)))},e.prototype.error=function(t){this._state.errors.push(t),this._state.isStopped=!0,1===this._group.length&&n(this._state.o,this._state.errors)},e.prototype.completed=function(){this._state.isStopped=!0,1===this._group.length&&n(this._state.o,this._state.errors)},ie(r,t),r.prototype.next=function(t){this._state.o.onNext(t)},r.prototype.error=function(t){this._state.errors.push(t),this._group.remove(this._inner),this._state.isStopped&&1===this._group.length&&n(this._state.o,this._state.errors)},r.prototype.completed=function(){this._group.remove(this._inner),this._state.isStopped&&1===this._group.length&&n(this._state.o,this._state.errors)},e}(Be),Ye.mergeDelayError=function(){var t,e,n,r;if(Array.isArray(arguments[0]))t=arguments[0];else for(e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return r=R(null,t),new Fn(r)},Wn=function(t){function e(e){this.source=e,t.call(this)}return ie(e,t),e.prototype.subscribeCore=function(t){var e=new ue,n=new be;return e.add(n),n.setDisposable(this.source.subscribe(new zn(t,e))),e},e}(Je),zn=function(t){function e(e,n){this.o=e,this.g=n,this.done=!1,t.call(this)}function n(e,n){this.parent=e,this.sad=n,t.call(this)}return ie(e,t),e.prototype.next=function(t){var e=new be;this.g.add(e),go(t)&&(t=jr(t)),e.setDisposable(t.subscribe(new n(this,e)))},e.prototype.error=function(t){this.o.onError(t)},e.prototype.completed=function(){this.done=!0,1===this.g.length&&this.o.onCompleted()},ie(n,t),n.prototype.next=function(t){this.parent.o.onNext(t)},n.prototype.error=function(t){this.parent.o.onError(t)},n.prototype.completed=function(){this.parent.g.remove(this.sad),this.parent.done&&1===this.parent.g.length&&this.parent.o.onCompleted()},e}(Be),Ke.mergeAll=function(){return new Wn(this)},Un=function(t){function e(e,n){this._s=e,this._o=go(n)?jr(n):n,this._open=!1,t.call(this)}return ie(e,t),e.prototype.subscribeCore=function(t){var e,n=new be;return n.setDisposable(this._s.subscribe(new Vn(t,this))),go(this._o)&&(this._o=jr(this._o)),e=new be,
e.setDisposable(this._o.subscribe(new Bn(t,this,e))),new _e(n,e)},e}(Je),Vn=function(t){function e(e,n){this._o=e,this._p=n,t.call(this)}return ie(e,t),e.prototype.next=function(t){this._p._open&&this._o.onNext(t)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.onCompleted=function(){this._p._open&&this._o.onCompleted()},e}(Be),Bn=function(t){function e(e,n,r){this._o=e,this._p=n,this._r=r,t.call(this)}return ie(e,t),e.prototype.next=function(){this._p._open=!0,this._r.dispose()},e.prototype.error=function(t){this._o.onError(t)},e.prototype.onCompleted=function(){this._r.dispose()},e}(Be),Ke.skipUntil=function(t){return new Un(this,t)},Hn=function(t){function e(e){this.source=e,t.call(this)}function n(t,e){this.o=t,this.inner=e,this.stopped=!1,this.latest=0,this.hasLatest=!1,Be.call(this)}function r(t,e){this.parent=t,this.id=e,Be.call(this)}return ie(e,t),e.prototype.subscribeCore=function(t){var e=new ve,r=this.source.subscribe(new n(t,e));return new _e(r,e)},ie(n,Be),n.prototype.next=function(t){var e=new be,n=++this.latest;this.hasLatest=!0,this.inner.setDisposable(e),go(t)&&(t=jr(t)),e.setDisposable(t.subscribe(new r(this,n)))},n.prototype.error=function(t){this.o.onError(t)},n.prototype.completed=function(){this.stopped=!0,!this.hasLatest&&this.o.onCompleted()},ie(r,Be),r.prototype.next=function(t){this.parent.latest===this.id&&this.parent.o.onNext(t)},r.prototype.error=function(t){this.parent.latest===this.id&&this.parent.o.onError(t)},r.prototype.completed=function(){this.parent.latest===this.id&&(this.parent.hasLatest=!1,this.parent.stopped&&this.parent.o.onCompleted())},e}(Je),Ke.switch=Ke.switchLatest=function(){return new Hn(this)},Kn=function(t){function e(e,n){this.source=e,this.other=go(n)?jr(n):n,t.call(this)}return ie(e,t),e.prototype.subscribeCore=function(t){return new _e(this.source.subscribe(t),this.other.subscribe(new Yn(t)))},e}(Je),Yn=function(t){function e(e){this._o=e,t.call(this)}return ie(e,t),e.prototype.next=function(){this._o.onCompleted()},e.prototype.error=function(t){this._o.onError(t)},e.prototype.onCompleted=bo,e}(Be),Ke.takeUntil=function(t){return new Kn(this,t)},Qn=function(t){function e(e,n,r){this._s=e,this._ss=n,this._cb=r,t.call(this)}return ie(e,t),e.prototype.subscribeCore=function(t){var e,n,r,o,i=this._ss.length,s={hasValue:S(i,F),hasValueAll:!1,values:Array(i)},u=this._ss.length,c=Array(u+1);for(e=0;e<u;e++)n=this._ss[e],r=new be,go(n)&&(n=jr(n)),r.setDisposable(n.subscribe(new Jn(t,e,s))),c[e]=r;return o=new be,o.setDisposable(this._s.subscribe(new Gn(t,this._cb,s))),c[u]=o,new ye(c)},e}(Je),Jn=function(t){function e(e,n,r){this._o=e,this._i=n,this._state=r,t.call(this)}return ie(e,t),e.prototype.next=function(t){this._state.values[this._i]=t,this._state.hasValue[this._i]=!0,this._state.hasValueAll=this._state.hasValue.every(vo)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=bo,e}(Be),Gn=function(t){function e(e,n,r){this._o=e,this._cb=n,this._state=r,t.call(this)}return ie(e,t),e.prototype.next=function(t){
var e,n=[t].concat(this._state.values);if(this._state.hasValueAll){if((e=xo(this._cb).apply(null,n))===Eo)return this._o.onError(e.e);this._o.onNext(e)}},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(Be),Ke.withLatestFrom=function(){var t,e,n,r;if(0===arguments.length)throw Error("invalid arguments");for(t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return r=Co(e[t-1])?e.pop():M,Array.isArray(e[0])&&(e=e[0]),new Qn(this,e,r)},Zn=function(t){function e(e,n){this._s=e,this._cb=n,t.call(this)}return ie(e,t),e.prototype.subscribeCore=function(t){var e,n,r,o=this._s.length,i=Array(o),s=S(o,F),u=S(o,W);for(e=0;e<o;e++)n=this._s[e],r=new be,i[e]=r,go(n)&&(n=jr(n)),r.setDisposable(n.subscribe(new Xn(t,e,this,u,s)));return new ye(i)},e}(Je),Xn=function(t){function e(e,n,r,o,i){this._o=e,this._i=n,this._p=r,this._q=o,this._d=i,t.call(this)}function n(t){return t.length>0}function r(t){return t.shift()}function o(t){return function(e,n){return n!==t}}return ie(e,t),e.prototype.next=function(t){var e,i;if(this._q[this._i].push(t),this._q.every(n)){if(e=this._q.map(r),(i=xo(this._p._cb).apply(null,e))===Eo)return this._o.onError(i.e);this._o.onNext(i)}else this._d.filter(o(this._i)).every(vo)&&this._o.onCompleted()},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._d[this._i]=!0,this._d.every(vo)&&this._o.onCompleted()},e}(Be),Ke.zip=function(){var t,e,n,r,o;if(0===arguments.length)throw Error("invalid arguments");for(t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return r=Co(e[t-1])?e.pop():M,Array.isArray(e[0])&&(e=e[0]),o=this,e.unshift(o),new Zn(e,r)},Ye.zip=function(){var t,e,n=arguments.length,r=Array(n);for(t=0;t<n;t++)r[t]=arguments[t];return Array.isArray(r[0])&&(r=Co(r[1])?r[0].concat(r[1]):r[0]),e=r.shift(),e.zip.apply(e,r)},tr=function(t){function e(e,n){this.sources=e,this._cb=n,t.call(this)}return ie(e,t),e.prototype.subscribeCore=function(t){var e,n=this.sources,r=n.length,o=Array(r),i={q:S(r,W),done:S(r,F),cb:this._cb,o:t};for(e=0;e<r;e++)!function(t){var e=n[t],r=new be;(Et(e)||Ct(e))&&(e=dn(e)),o[t]=r,r.setDisposable(e.subscribe(new er(i,t)))}(e);return new ye(o)},e}(Je),er=function(t){function e(e,n){this._s=e,this._i=n,t.call(this)}function n(t){return t.length>0}function r(t){return t.shift()}function o(t){return function(e,n){return n!==t}}return ie(e,t),e.prototype.next=function(t){if(this._s.q[this._i].push(t),this._s.q.every(n)){var e=this._s.q.map(r),i=xo(this._s.cb).apply(null,e);if(i===Eo)return this._s.o.onError(i.e);this._s.o.onNext(i)}else this._s.done.filter(o(this._i)).every(vo)&&this._s.o.onCompleted()},e.prototype.error=function(t){this._s.o.onError(t)},e.prototype.completed=function(){this._s.done[this._i]=!0,this._s.done.every(vo)&&this._s.o.onCompleted()},e}(Be),Ke.zipIterable=function(){var t,e,n,r,o;if(0===arguments.length)throw Error("invalid arguments");for(t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return r=Co(e[t-1])?e.pop():M,o=this,
e.unshift(o),new tr(e,r)},Ke.asObservable=function(){return new Qr(z(this),this)},nr=function(t){function e(e){this.source=e,t.call(this)}return ie(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new rr(t))},e}(Je),rr=function(t){function e(e){this._o=e,t.call(this)}return ie(e,t),e.prototype.next=function(t){t.accept(this._o)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(Be),Ke.dematerialize=function(){return new nr(this)},or=function(t){function e(e,n,r){this.source=e,this.keyFn=n,this.comparer=r,t.call(this)}return ie(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new ir(t,this.keyFn,this.comparer))},e}(Je),ir=function(t){function e(e,n,r){this.o=e,this.keyFn=n,this.comparer=r,this.hasCurrentKey=!1,this.currentKey=null,t.call(this)}return ie(e,t),e.prototype.next=function(t){var e,n=t;return Co(this.keyFn)&&(n=xo(this.keyFn)(t))===Eo?this.o.onError(n.e):this.hasCurrentKey&&(e=xo(this.comparer)(this.currentKey,n))===Eo?this.o.onError(e.e):void(this.hasCurrentKey&&e||(this.hasCurrentKey=!0,this.currentKey=n,this.o.onNext(t)))},e.prototype.error=function(t){this.o.onError(t)},e.prototype.completed=function(){this.o.onCompleted()},e}(Be),Ke.distinctUntilChanged=function(t,e){return e||(e=yo),new or(this,t,e)},sr=function(t){function e(e,n,r,o){this.source=e,this._oN=n,this._oE=r,this._oC=o,t.call(this)}function n(t,e){this.o=t,this.t=!e._oN||Co(e._oN)?Ve(e._oN||bo,e._oE||bo,e._oC||bo):e._oN,this.isStopped=!1,Be.call(this)}return ie(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t,this))},ie(n,Be),n.prototype.next=function(t){var e=xo(this.t.onNext).call(this.t,t);e===Eo&&this.o.onError(e.e),this.o.onNext(t)},n.prototype.error=function(t){var e=xo(this.t.onError).call(this.t,t);if(e===Eo)return this.o.onError(e.e);this.o.onError(t)},n.prototype.completed=function(){var t=xo(this.t.onCompleted).call(this.t);if(t===Eo)return this.o.onError(t.e);this.o.onCompleted()},e}(Je),Ke.do=Ke.tap=Ke.doAction=function(t,e,n){return new sr(this,t,e,n)},Ke.doOnNext=Ke.tapOnNext=function(t,e){return this.tap(s!==e?function(n){t.call(e,n)}:t)},Ke.doOnError=Ke.tapOnError=function(t,e){return this.tap(bo,s!==e?function(n){t.call(e,n)}:t)},Ke.doOnCompleted=Ke.tapOnCompleted=function(t,e){return this.tap(bo,null,s!==e?function(){t.call(e)}:t)},ur=function(t){function e(e,n,r){this.source=e,this._fn=xt(n,r,0),t.call(this)}function n(t,e){this.isDisposed=!1,this._s=t,this._fn=e}return ie(e,t),e.prototype.subscribeCore=function(t){var e=xo(this.source.subscribe).call(this.source,t);return e===Eo&&(this._fn(),l(e.e)),new n(e,this._fn)},n.prototype.dispose=function(){if(!this.isDisposed){var t=xo(this._s.dispose).call(this._s);this._fn(),t===Eo&&l(t.e)}},e}(Je),Ke.finally=function(t,e){return new ur(this,t,e)},cr=function(t){function e(e){this.source=e,t.call(this)}function n(t){this.o=t,this.isStopped=!1}return ie(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t))},
n.prototype.onNext=bo,n.prototype.onError=function(t){this.isStopped||(this.isStopped=!0,this.o.onError(t))},n.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.o.onCompleted())},n.prototype.dispose=function(){this.isStopped=!0},n.prototype.fail=function(t){return!this.isStopped&&(this.isStopped=!0,this.observer.onError(t),!0)},e}(Je),Ke.ignoreElements=function(){return new cr(this)},ar=function(t){function e(e,n){this.source=e,t.call(this)}return ie(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new lr(t))},e}(Je),lr=function(t){function e(e){this._o=e,t.call(this)}return ie(e,t),e.prototype.next=function(t){this._o.onNext(Me(t))},e.prototype.error=function(t){this._o.onNext(We(t)),this._o.onCompleted()},e.prototype.completed=function(){this._o.onNext(ze()),this._o.onCompleted()},e}(Be),Ke.materialize=function(){return new ar(this)},Ke.repeat=function(t){return nn(this,t).concat()},Ke.retry=function(t){return nn(this,t).catchError()},hr=function(t){function e(t){return{isDisposed:!1,dispose:function(){this.isDisposed||(this.isDisposed=!0,t.isDisposed=!0)}}}function n(e,n){this.source=e,this._notifier=n,t.call(this)}return ie(n,t),n.prototype.subscribeCore=function(t){var n,r=new Zr,o=new Zr,i=this._notifier(r),s=i.subscribe(o),u=this.source["@@iterator"](),c={isDisposed:!1},a=new ve,l=Se.scheduleRecursive(null,function(e,i){var s,l,h,p;if(!c.isDisposed){if(s=u.next(),s.done)return void(n?t.onError(n):t.onCompleted());l=s.value,go(l)&&(l=jr(l)),h=new be,p=new be,a.setDisposable(new _e(p,h)),h.setDisposable(l.subscribe(function(e){t.onNext(e)},function(e){p.setDisposable(o.subscribe(i,function(e){t.onError(e)},function(){t.onCompleted()})),r.onNext(e),h.dispose()},function(){t.onCompleted()}))}});return new ye([s,a,l,e(c)])},n}(Je),Ke.retryWhen=function(t){return new hr(U(this),t)},pr=function(t){function e(t){return{isDisposed:!1,dispose:function(){this.isDisposed||(this.isDisposed=!0,t.isDisposed=!0)}}}function n(e,n){this.source=e,this._notifier=n,t.call(this)}return ie(n,t),n.prototype.subscribeCore=function(t){var n,r=new Zr,o=new Zr,i=this._notifier(r),s=i.subscribe(o),u=this.source["@@iterator"](),c={isDisposed:!1},a=new ve,l=Se.scheduleRecursive(null,function(e,i){var s,l,h,p;if(!c.isDisposed){if(s=u.next(),s.done)return void(n?t.onError(n):t.onCompleted());l=s.value,go(l)&&(l=jr(l)),h=new be,p=new be,a.setDisposable(new _e(p,h)),h.setDisposable(l.subscribe(function(e){t.onNext(e)},function(e){t.onError(e)},function(){p.setDisposable(o.subscribe(i,function(e){t.onError(e)},function(){t.onCompleted()})),r.onNext(null),h.dispose()}))}});return new ye([s,a,l,e(c)])},n}(Je),Ke.repeatWhen=function(t){return new pr(U(this),t)},fr=function(t){function e(e,n,r,o){this.source=e,this.accumulator=n,this.hasSeed=r,this.seed=o,t.call(this)}return ie(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new dr(t,this))},e}(Je),dr=function(t){function e(e,n){this._o=e,this._p=n,this._fn=n.accumulator,this._hs=n.hasSeed,this._s=n.seed,this._ha=!1,this._a=null,
this._hv=!1,this._i=0,t.call(this)}return ie(e,t),e.prototype.next=function(t){if(!this._hv&&(this._hv=!0),this._ha?this._a=xo(this._fn)(this._a,t,this._i,this._p):(this._a=this._hs?xo(this._fn)(this._s,t,this._i,this._p):t,this._ha=!0),this._a===Eo)return this._o.onError(this._a.e);this._o.onNext(this._a),this._i++},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){!this._hv&&this._hs&&this._o.onNext(this._s),this._o.onCompleted()},e}(Be),Ke.scan=function(){var t,e=!1,n=arguments[0];return 2===arguments.length&&(e=!0,t=arguments[1]),new fr(this,n,e,t)},br=function(t){function e(e,n){this.source=e,this._c=n,t.call(this)}return ie(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new vr(t,this._c))},e}(Je),vr=function(t){function e(e,n){this._o=e,this._c=n,this._q=[],t.call(this)}return ie(e,t),e.prototype.next=function(t){this._q.push(t),this._q.length>this._c&&this._o.onNext(this._q.shift())},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(Be),Ke.skipLast=function(t){if(t<0)throw new vt;return new br(this,t)},Ke.startWith=function(){var t,e,n,r,o=0;for(arguments.length&&Ce(arguments[0])?(t=arguments[0],o=1):t=xe,e=[],n=o,r=arguments.length;n<r;n++)e.push(arguments[n]);return on([vn(e,t),this]).concat()},_r=function(t){function e(e,n){this._o=e,this._c=n,this._q=[],t.call(this)}return ie(e,t),e.prototype.next=function(t){this._q.push(t),this._q.length>this._c&&this._q.shift()},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){for(;this._q.length>0;)this._o.onNext(this._q.shift());this._o.onCompleted()},e}(Be),Ke.takeLast=function(t){if(t<0)throw new vt;var e=this;return new Qr(function(n){return e.subscribe(new _r(n,t))},e)},Ke.flatMapConcat=Ke.concatMap=function(t,e,n){return new Ge(this,t,e,n).merge(1)},yr=function(t){function e(e,n,r){this.source=e,this.selector=xt(n,r,3),t.call(this)}function n(t,e){return function(n,r,o){return t.call(this,e.selector(n,r,o),r,o)}}function r(t,e,n){this.o=t,this.selector=e,this.source=n,this.i=0,Be.call(this)}return ie(e,t),e.prototype.internalMap=function(t,r){return new e(this.source,n(t,this),r)},e.prototype.subscribeCore=function(t){return this.source.subscribe(new r(t,this.selector,this))},ie(r,Be),r.prototype.next=function(t){var e=xo(this.selector)(t,this.i++,this.source);if(e===Eo)return this.o.onError(e.e);this.o.onNext(e)},r.prototype.error=function(t){this.o.onError(t)},r.prototype.completed=function(){this.o.onCompleted()},e}(Je),Ke.map=Ke.select=function(t,e){var n="function"==typeof t?t:function(){return t};return this instanceof yr?this.internalMap(n,e):new yr(this,n,e)},Ke.pluck=function(){var t,e=arguments.length,n=Array(e);if(0===e)throw Error("List of properties cannot be empty.");for(t=0;t<e;t++)n[t]=arguments[t];return this.map(V(n,e))},Ke.flatMap=Ke.selectMany=function(t,e,n){return new Ge(this,t,e,n).mergeAll()},fo.Observable.prototype.flatMapLatest=function(t,e,n){return new Ge(this,t,e,n).switchLatest()},
mr=function(t){function e(e,n){this.source=e,this._count=n,t.call(this)}function n(t,e){this._o=t,this._r=e,Be.call(this)}return ie(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t,this._count))},ie(n,Be),n.prototype.next=function(t){this._r<=0?this._o.onNext(t):this._r--},n.prototype.error=function(t){this._o.onError(t)},n.prototype.completed=function(){this._o.onCompleted()},e}(Je),Ke.skip=function(t){if(t<0)throw new vt;return new mr(this,t)},wr=function(t){function e(e,n){this.source=e,this._fn=n,t.call(this)}return ie(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new gr(t,this))},e}(Je),gr=function(t){function e(e,n){this._o=e,this._p=n,this._i=0,this._r=!1,t.call(this)}return ie(e,t),e.prototype.next=function(t){if(!this._r){var e=xo(this._p._fn)(t,this._i++,this._p);if(e===Eo)return this._o.onError(e.e);this._r=!e}this._r&&this._o.onNext(t)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(Be),Ke.skipWhile=function(t,e){var n=xt(t,e,3);return new wr(this,n)},Cr=function(t){function e(e,n){this.source=e,this._count=n,t.call(this)}function n(t,e){this._o=t,this._c=e,this._r=e,Be.call(this)}return ie(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t,this._count))},ie(n,Be),n.prototype.next=function(t){this._r-- >0&&(this._o.onNext(t),this._r<=0&&this._o.onCompleted())},n.prototype.error=function(t){this._o.onError(t)},n.prototype.completed=function(){this._o.onCompleted()},e}(Je),Ke.take=function(t,e){if(t<0)throw new vt;return 0===t?hn(e):new Cr(this,t)},Er=function(t){function e(e,n){this.source=e,this._fn=n,t.call(this)}return ie(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new xr(t,this))},e}(Je),xr=function(t){function e(e,n){this._o=e,this._p=n,this._i=0,this._r=!0,t.call(this)}return ie(e,t),e.prototype.next=function(t){if(this._r&&(this._r=xo(this._p._fn)(t,this._i++,this._p),this._r===Eo))return this._o.onError(this._r.e);this._r?this._o.onNext(t):this._o.onCompleted()},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(Be),Ke.takeWhile=function(t,e){var n=xt(t,e,3);return new Er(this,n)},Or=function(t){function e(e,n,r){this.source=e,this.predicate=xt(n,r,3),t.call(this)}function n(t,e){return function(n,r,o){return e.predicate(n,r,o)&&t.call(this,n,r,o)}}function r(t,e,n){this.o=t,this.predicate=e,this.source=n,this.i=0,Be.call(this)}return ie(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new r(t,this.predicate,this))},e.prototype.internalFilter=function(t,r){return new e(this.source,n(t,this),r)},ie(r,Be),r.prototype.next=function(t){var e=xo(this.predicate)(t,this.i++,this.source);if(e===Eo)return this.o.onError(e.e);e&&this.o.onNext(t)},r.prototype.error=function(t){this.o.onError(t)},r.prototype.completed=function(){this.o.onCompleted()},e}(Je),Ke.filter=Ke.where=function(t,e){return this instanceof Or?this.internalFilter(t,e):new Or(this,t,e)},
Ye.fromCallback=function(t,e,n){return function(){var r,o,i;for(s===e&&(e=this),r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];return B(t,e,n,o)}},Ye.fromNodeCallback=function(t,e,n){return function(){var r,o,i;for(s===e&&(e=this),r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];return K(t,e,n,o)}},J.prototype.dispose=function(){this.isDisposed||(this._e.removeEventListener(this._n,this._fn,!1),this.isDisposed=!0)},fo.config.useNativeEvents=!1,Sr=function(t){function e(e,n,r){this._el=e,this._n=n,this._fn=r,t.call(this)}function n(t,e){return function(){var n=arguments[0];if(Co(e)&&(n=xo(e).apply(null,arguments))===Eo)return t.onError(n.e);t.onNext(n)}}return ie(e,t),e.prototype.subscribeCore=function(t){return G(this._el,this._n,n(t,this._fn))},e}(Je),Ye.fromEvent=function(t,e,n){return t.addListener?Dr(function(n){t.addListener(e,n)},function(n){t.removeListener(e,n)},n):fo.config.useNativeEvents||"function"!=typeof t.on||"function"!=typeof t.off?new Sr(t,e,n).publish().refCount():Dr(function(n){t.on(e,n)},function(n){t.off(e,n)},n)},$r=function(t){function e(e,n,r){this._add=e,this._del=n,this._fn=r,t.call(this)}function n(t,e){return function(){var n=arguments[0];if(Co(e)&&(n=xo(e).apply(null,arguments))===Eo)return t.onError(n.e);t.onNext(n)}}function r(t,e,n){this._del=t,this._fn=e,this._ret=n,this.isDisposed=!1}return ie(e,t),e.prototype.subscribeCore=function(t){var e=n(t,this._fn),o=this._add(e);return new r(this._del,e,o)},r.prototype.dispose=function(){this.isDisposed||(Co(this._del)&&this._del(this._fn,this._ret),this.isDisposed=!0)},e}(Je),Dr=Ye.fromEventPattern=function(t,e,n){return new $r(t,e,n).publish().refCount()},kr=function(t){function e(e,n){this._p=e,this._s=n,t.call(this)}function n(t,e){var n=e[0],r=e[1];n.onNext(r),n.onCompleted()}function r(t,e){var n=e[0],r=e[1];n.onError(r)}return ie(e,t),e.prototype.subscribeCore=function(t){var e=new be,o=this;return this._p.then(function(r){e.setDisposable(o._s.schedule([t,r],n))},function(n){e.setDisposable(o._s.schedule([t,n],r))}),e},e}(Je),jr=Ye.fromPromise=function(t,e){return e||(e=Te),new kr(t,e)},Ke.toPromise=function(t){if(t||(t=fo.config.Promise),!t)throw new _t("Promise type not provided nor in Rx.config.Promise");var e=this;return new t(function(t,n){var r;e.subscribe(function(t){r=t},n,function(){t(r)})})},Ye.startAsync=function(t){var e=xo(t)();return e===Eo?On(e.e):jr(e)},Pr=function(t){function e(e,n,r){this.source=e,this._fn1=n,this._fn2=r,t.call(this)}return ie(e,t),e.prototype.subscribeCore=function(t){var e=this.source.multicast(this._fn1());return new _e(this._fn2(e).subscribe(t),e.connect())},e}(Je),Ke.multicast=function(t,e){return Co(t)?new Pr(this,t,e):new Tr(this,t)},Ke.publish=function(t){return t&&Co(t)?this.multicast(function(){return new Zr},t):this.multicast(new Zr)},Ke.share=function(){return this.publish().refCount()},Ke.publishLast=function(t){return t&&Co(t)?this.multicast(function(){return new Xr},t):this.multicast(new Xr)},Ke.publishValue=function(t,e){
return 2===arguments.length?this.multicast(function(){return new eo(e)},t):this.multicast(new eo(t))},Ke.shareValue=function(t){return this.publishValue(t).refCount()},Ke.replay=function(t,e,n,r){return t&&Co(t)?this.multicast(function(){return new no(e,n,r)},t):this.multicast(new no(e,n,r))},Ke.shareReplay=function(t,e,n){return this.replay(null,t,e,n).refCount()},Nr=function(t){function e(e){this.source=e,this._count=0,this._connectableSubscription=null,t.call(this)}function n(t,e){this._p=t,this._s=e,this.isDisposed=!1}return ie(e,t),e.prototype.subscribeCore=function(t){var e=this.source.subscribe(t);return 1==++this._count&&(this._connectableSubscription=this.source.connect()),new n(this,e)},n.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._s.dispose(),0==--this._p._count&&this._p._connectableSubscription.dispose())},e}(Je),Tr=fo.ConnectableObservable=function(t){function e(e,n){this.source=e,this._connection=null,this._source=e.asObservable(),this._subject=n,t.call(this)}function n(t,e){this._p=t,this._s=e}return ie(e,t),n.prototype.dispose=function(){this._s&&(this._s.dispose(),this._s=null,this._p._connection=null)},e.prototype.connect=function(){if(!this._connection){var t=this._source.subscribe(this._subject);this._connection=new n(this,t)}return this._connection},e.prototype._subscribe=function(t){return this._subject.subscribe(t)},e.prototype.refCount=function(){return new Nr(this)},e}(Ye),Ar=function(t){function e(e,n){this._dt=e,this._s=n,t.call(this)}function n(t,e){e.onNext(0),e.onCompleted()}return ie(e,t),e.prototype.subscribeCore=function(t){return this._s.scheduleFuture(t,this._dt,n)},e}(Je),qr=Ye.interval=function(t,e){return tt(t,t,Ce(e)?e:Te)},Ye.timer=function(t,e,n){var r;return Ce(n)||(n=Te),null!=e&&"number"==typeof e?r=e:Ce(e)&&(n=e),(t instanceof Date||"number"==typeof t)&&r===s?Z(t,n):t instanceof Date&&r!==s?X(t,e,n):tt(t,r,n)},Ke.delay=function(){var t,e,n=arguments[0];if("number"==typeof n||n instanceof Date)return t=n,e=arguments[1],Ce(e)||(e=Te),t instanceof Date?nt(this,t,e):et(this,t,e);if(Ye.isObservable(n)||Co(n))return rt(this,n,arguments[1]);throw Error("Invalid arguments")},Lr=function(t){function e(e,n,r){Ce(r)||(r=Te),this.source=e,this._dt=n,this._s=r,t.call(this)}return ie(e,t),e.prototype.subscribeCore=function(t){var e=new ve;return new _e(this.source.subscribe(new Rr(t,this._dt,this._s,e)),e)},e}(Je),Rr=function(t){function e(e,n,r,o){this._o=e,this._d=n,this._scheduler=r,this._c=o,this._v=null,this._hv=!1,this._id=0,t.call(this)}return ie(e,t),e.prototype.next=function(t){this._hv=!0,this._v=t;var e=++this._id,n=new be;this._c.setDisposable(n),n.setDisposable(this._scheduler.scheduleFuture(this,this._d,function(n,r){r._hv&&r._id===e&&r._o.onNext(t),r._hv=!1}))},e.prototype.error=function(t){this._c.dispose(),this._o.onError(t),this._hv=!1,this._id++},e.prototype.completed=function(){this._c.dispose(),this._hv&&this._o.onNext(this._v),this._o.onCompleted(),this._hv=!1,this._id++},e}(Be),Ke.debounce=function(){
if(Co(arguments[0]))return ot(this,arguments[0]);if("number"==typeof arguments[0])return new Lr(this,arguments[0],arguments[1]);throw Error("Invalid arguments")},Ir=function(t){function e(e,n){this.source=e,this._s=n,t.call(this)}return ie(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Fr(t,this._s))},e}(Je),Fr=function(t){function e(e,n){this._o=e,this._s=n,t.call(this)}return ie(e,t),e.prototype.next=function(t){this._o.onNext({value:t,timestamp:this._s.now()})},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(Be),Ke.timestamp=function(t){return Ce(t)||(t=Te),new Ir(this,t)},Mr=function(t){function e(e,n){this.source=e,this._sampler=n,t.call(this)}return ie(e,t),e.prototype.subscribeCore=function(t){var e={o:t,atEnd:!1,value:null,hasValue:!1,sourceSubscription:new be};return e.sourceSubscription.setDisposable(this.source.subscribe(new zr(e))),new _e(e.sourceSubscription,this._sampler.subscribe(new Wr(e)))},e}(Je),Wr=function(t){function e(e){this._s=e,t.call(this)}return ie(e,t),e.prototype._handleMessage=function(){this._s.hasValue&&(this._s.hasValue=!1,this._s.o.onNext(this._s.value)),this._s.atEnd&&this._s.o.onCompleted()},e.prototype.next=function(){this._handleMessage()},e.prototype.error=function(t){this._s.onError(t)},e.prototype.completed=function(){this._handleMessage()},e}(Be),zr=function(t){function e(e){this._s=e,t.call(this)}return ie(e,t),e.prototype.next=function(t){this._s.hasValue=!0,this._s.value=t},e.prototype.error=function(t){this._s.o.onError(t)},e.prototype.completed=function(){this._s.atEnd=!0,this._s.sourceSubscription.dispose()},e}(Be),Ke.sample=function(t,e){return Ce(e)||(e=Te),"number"==typeof t?new Mr(this,qr(t,e)):new Mr(this,t)},Ur=fo.TimeoutError=function(t){this.message=t||"Timeout has occurred",this.name="TimeoutError",Error.call(this)},Ur.prototype=Object.create(Error.prototype),Ke.timeout=function(){var t=arguments[0];if(t instanceof Date||"number"==typeof t)return st(this,t,arguments[1],arguments[2]);if(Ye.isObservable(t)||Co(t))return it(this,t,arguments[1],arguments[2]);throw Error("Invalid arguments")},Ke.throttle=function(t,e){var n,r;if(Ce(e)||(e=Te),(n=+t||0)<=0)throw new RangeError("windowDuration cannot be less or equal zero.");return r=this,new Qr(function(t){var o=0;return r.subscribe(function(r){var i=e.now();(0===o||i-o>=n)&&(o=i,t.onNext(r))},function(e){t.onError(e)},function(){t.onCompleted()})},r)},Vr=function(t){function e(e,n){this.source=e,this.controller=new Zr,n&&n.subscribe?this.pauser=this.controller.merge(n):this.pauser=this.controller,t.call(this)}return ie(e,t),e.prototype._subscribe=function(t){var e=this.source.publish(),n=e.subscribe(t),r=he,o=this.pauser.distinctUntilChanged().subscribe(function(t){t?r=e.connect():(r.dispose(),r=he)});return new ye([n,r,o])},e.prototype.pause=function(){this.controller.onNext(!1)},e.prototype.resume=function(){this.controller.onNext(!0)},e}(Ye),Ke.pausable=function(t){return new Vr(this,t)},Br=function(t){function e(e,n){
this.source=e,this.controller=new Zr,n&&n.subscribe?this.pauser=this.controller.merge(n):this.pauser=this.controller,t.call(this)}return ie(e,t),e.prototype._subscribe=function(t){function e(){for(;r.length>0;)t.onNext(r.shift())}var n,r=[];return ut(this.source,this.pauser.startWith(!1).distinctUntilChanged(),function(t,e){return{data:t,shouldFire:e}}).subscribe(function(o){n!==s&&o.shouldFire!==n?(n=o.shouldFire,o.shouldFire&&e()):(n=o.shouldFire,o.shouldFire?t.onNext(o.data):r.push(o.data))},function(n){e(),t.onError(n)},function(){e(),t.onCompleted()})},e.prototype.pause=function(){this.controller.onNext(!1)},e.prototype.resume=function(){this.controller.onNext(!0)},e}(Ye),Ke.pausableBuffered=function(t){return new Br(this,t)},Hr=function(t){function e(e,n,r){t.call(this),this.subject=new Kr(n,r),this.source=e.multicast(this.subject).refCount()}return ie(e,t),e.prototype._subscribe=function(t){return this.source.subscribe(t)},e.prototype.request=function(t){return this.subject.request(null==t?-1:t)},e}(Ye),Kr=function(t){function e(e,n){null==e&&(e=!0),t.call(this),this.subject=new Zr,this.enableQueue=e,this.queue=e?[]:null,this.requestedCount=0,this.requestedDisposable=null,this.error=null,this.hasFailed=!1,this.hasCompleted=!1,this.scheduler=n||Se}return ie(e,t),se(e.prototype,Ue,{_subscribe:function(t){return this.subject.subscribe(t)},onCompleted:function(){this.hasCompleted=!0,this.enableQueue&&0!==this.queue.length?this.queue.push(Le.createOnCompleted()):(this.subject.onCompleted(),this.disposeCurrentRequest())},onError:function(t){this.hasFailed=!0,this.error=t,this.enableQueue&&0!==this.queue.length?this.queue.push(Le.createOnError(t)):(this.subject.onError(t),this.disposeCurrentRequest())},onNext:function(t){this.requestedCount<=0?this.enableQueue&&this.queue.push(Le.createOnNext(t)):(0==this.requestedCount--&&this.disposeCurrentRequest(),this.subject.onNext(t))},_processRequest:function(t){if(this.enableQueue)for(;this.queue.length>0&&(t>0||"N"!==this.queue[0].kind);){var e=this.queue.shift();e.accept(this.subject),"N"===e.kind?t--:(this.disposeCurrentRequest(),this.queue=[])}return t},request:function(t){this.disposeCurrentRequest();var e=this;return this.requestedDisposable=this.scheduler.schedule(t,function(t,n){var r=e._processRequest(n);if(!e.hasCompleted&&!e.hasFailed&&r>0)return e.requestedCount=r,le(function(){e.requestedCount=0})}),this.requestedDisposable},disposeCurrentRequest:function(){this.requestedDisposable&&(this.requestedDisposable.dispose(),this.requestedDisposable=null)}}),e}(Ye),Ke.controlled=function(t,e){return t&&Ce(t)&&(e=t,t=!0),null==t&&(t=!0),new Hr(this,t,e)},Ke.pipe=function(t){function e(){n.resume()}var n=this.pausableBuffered();return t.addListener("drain",e),n.subscribe(function(e){!t.write(e+"")&&n.pause()},function(e){t.emit("error",e)},function(){!t._isStdio&&t.end(),t.removeListener("drain",e)}),n.resume(),t},Yr=function(t){function e(e,n){this._o=e,this._xform=n,t.call(this)}return ie(e,t),e.prototype.next=function(t){
var e=xo(this._xform["@@transducer/step"]).call(this._xform,this._o,t);e===Eo&&this._o.onError(e.e)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._xform["@@transducer/result"](this._o)},e}(Be),Ke.transduce=function(t){var e=this;return new Qr(function(n){var r=t(ct(n));return e.subscribe(new Yr(n,r))},e)},Qr=fo.AnonymousObservable=function(t){function e(t){return t&&Co(t.dispose)?t:Co(t)?le(t):he}function n(t,n){var r=n[0],o=n[1],i=xo(o.__subscribe).call(o,r);i!==Eo||r.fail(Eo.e)||l(Eo.e),r.setDisposable(e(i))}function r(e,n){this.source=n,this.__subscribe=e,t.call(this)}return ie(r,t),r.prototype._subscribe=function(t){var e=new Jr(t),r=[e,this];return Se.scheduleRequired()?Se.schedule(r,n):n(null,r),e},r}(Ye),Jr=function(t){function e(e){t.call(this),this.observer=e,this.m=new be}ie(e,t);var n=e.prototype;return n.next=function(t){var e=xo(this.observer.onNext).call(this.observer,t);e===Eo&&(this.dispose(),l(e.e))},n.error=function(t){var e=xo(this.observer.onError).call(this.observer,t);this.dispose(),e===Eo&&l(e.e)},n.completed=function(){var t=xo(this.observer.onCompleted).call(this.observer);this.dispose(),t===Eo&&l(t.e)},n.setDisposable=function(t){this.m.setDisposable(t)},n.getDisposable=function(){return this.m.getDisposable()},n.dispose=function(){t.prototype.dispose.call(this),this.m.dispose()},e}(Be),Gr=function(t,e){this._s=t,this._o=e},Gr.prototype.dispose=function(){if(!this._s.isDisposed&&null!==this._o){var t=this._s.observers.indexOf(this._o);this._s.observers.splice(t,1),this._o=null}},Zr=fo.Subject=function(t){function e(){t.call(this),this.isDisposed=!1,this.isStopped=!1,this.observers=[],this.hasError=!1}return ie(e,t),se(e.prototype,Ue.prototype,{_subscribe:function(t){return fe(this),this.isStopped?this.hasError?(t.onError(this.error),he):(t.onCompleted(),he):(this.observers.push(t),new Gr(this,t))},hasObservers:function(){return fe(this),this.observers.length>0},onCompleted:function(){if(fe(this),!this.isStopped){this.isStopped=!0;for(var t=0,e=c(this.observers),n=e.length;t<n;t++)e[t].onCompleted();this.observers.length=0}},onError:function(t){if(fe(this),!this.isStopped){this.isStopped=!0,this.error=t,this.hasError=!0;for(var e=0,n=c(this.observers),r=n.length;e<r;e++)n[e].onError(t);this.observers.length=0}},onNext:function(t){if(fe(this),!this.isStopped)for(var e=0,n=c(this.observers),r=n.length;e<r;e++)n[e].onNext(t)},dispose:function(){this.isDisposed=!0,this.observers=null}}),e.create=function(t,e){return new to(t,e)},e}(Ye),Xr=fo.AsyncSubject=function(t){function e(){t.call(this),this.isDisposed=!1,this.isStopped=!1,this.hasValue=!1,this.observers=[],this.hasError=!1}return ie(e,t),se(e.prototype,Ue.prototype,{_subscribe:function(t){return fe(this),this.isStopped?(this.hasError?t.onError(this.error):this.hasValue?(t.onNext(this.value),t.onCompleted()):t.onCompleted(),he):(this.observers.push(t),new Gr(this,t))},hasObservers:function(){return fe(this),this.observers.length>0},onCompleted:function(){var t,e,n,r;if(fe(this),!this.isStopped){
if(this.isStopped=!0,n=c(this.observers),e=n.length,this.hasValue)for(t=0;t<e;t++)r=n[t],r.onNext(this.value),r.onCompleted();else for(t=0;t<e;t++)n[t].onCompleted();this.observers.length=0}},onError:function(t){if(fe(this),!this.isStopped){this.isStopped=!0,this.hasError=!0,this.error=t;for(var e=0,n=c(this.observers),r=n.length;e<r;e++)n[e].onError(t);this.observers.length=0}},onNext:function(t){fe(this),this.isStopped||(this.value=t,this.hasValue=!0)},dispose:function(){this.isDisposed=!0,this.observers=null,this.error=null,this.value=null}}),e}(Ye),to=fo.AnonymousSubject=function(t){function e(e,n){this.observer=e,this.observable=n,t.call(this)}return ie(e,t),se(e.prototype,Ue.prototype,{_subscribe:function(t){return this.observable.subscribe(t)},onCompleted:function(){this.observer.onCompleted()},onError:function(t){this.observer.onError(t)},onNext:function(t){this.observer.onNext(t)}}),e}(Ye),eo=fo.BehaviorSubject=function(t){function e(e){t.call(this),this.value=e,this.observers=[],this.isDisposed=!1,this.isStopped=!1,this.hasError=!1}return ie(e,t),se(e.prototype,Ue.prototype,{_subscribe:function(t){return fe(this),this.isStopped?(this.hasError?t.onError(this.error):t.onCompleted(),he):(this.observers.push(t),t.onNext(this.value),new Gr(this,t))},getValue:function(){return fe(this),this.hasError&&l(this.error),this.value},hasObservers:function(){return fe(this),this.observers.length>0},onCompleted:function(){if(fe(this),!this.isStopped){this.isStopped=!0;for(var t=0,e=c(this.observers),n=e.length;t<n;t++)e[t].onCompleted();this.observers.length=0}},onError:function(t){if(fe(this),!this.isStopped){this.isStopped=!0,this.hasError=!0,this.error=t;for(var e=0,n=c(this.observers),r=n.length;e<r;e++)n[e].onError(t);this.observers.length=0}},onNext:function(t){if(fe(this),!this.isStopped){this.value=t;for(var e=0,n=c(this.observers),r=n.length;e<r;e++)n[e].onNext(t)}},dispose:function(){this.isDisposed=!0,this.observers=null,this.value=null,this.error=null}}),e}(Ye),no=fo.ReplaySubject=function(t){function e(t,e){return le(function(){e.dispose(),!t.isDisposed&&t.observers.splice(t.observers.indexOf(e),1)})}function n(e,n,o){this.bufferSize=null==e?r:e,this.windowSize=null==n?r:n,this.scheduler=o||Se,this.q=[],this.observers=[],this.isStopped=!1,this.isDisposed=!1,this.hasError=!1,this.error=null,t.call(this)}var r=Math.pow(2,53)-1;return ie(n,t),se(n.prototype,Ue.prototype,{_subscribe:function(t){var n,r,o,i;for(fe(this),n=new Qe(this.scheduler,t),r=e(this,n),this._trim(this.scheduler.now()),this.observers.push(n),o=0,i=this.q.length;o<i;o++)n.onNext(this.q[o].value);return this.hasError?n.onError(this.error):this.isStopped&&n.onCompleted(),n.ensureActive(),r},hasObservers:function(){return fe(this),this.observers.length>0},_trim:function(t){for(;this.q.length>this.bufferSize;)this.q.shift();for(;this.q.length>0&&t-this.q[0].interval>this.windowSize;)this.q.shift()},onNext:function(t){var e,n,r,o,i;if(fe(this),!this.isStopped)for(e=this.scheduler.now(),this.q.push({interval:e,value:t}),this._trim(e),n=0,
r=c(this.observers),o=r.length;n<o;n++)i=r[n],i.onNext(t),i.ensureActive()},onError:function(t){var e,n,r,o,i;if(fe(this),!this.isStopped){for(this.isStopped=!0,this.error=t,this.hasError=!0,e=this.scheduler.now(),this._trim(e),n=0,r=c(this.observers),o=r.length;n<o;n++)i=r[n],i.onError(t),i.ensureActive();this.observers.length=0}},onCompleted:function(){var t,e,n,r,o;if(fe(this),!this.isStopped){for(this.isStopped=!0,t=this.scheduler.now(),this._trim(t),e=0,n=c(this.observers),r=n.length;e<r;e++)o=n[e],o.onCompleted(),o.ensureActive();this.observers.length=0}},dispose:function(){this.isDisposed=!0,this.observers=null}}),n}(Ye),fo.Pauser=function(t){function e(){t.call(this)}return ie(e,t),e.prototype.pause=function(){this.onNext(!1)},e.prototype.resume=function(){this.onNext(!0)},e}(Zr),po.Rx=fo,(i=function(){return fo}.call(e,n,e,t))!==s&&(t.exports=i),ro=b()}).call(this)}).call(e,n(50)(t),n(98),n(1140))},1074:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,n,r){function o(){var t=$(this),o=t.val(),i=e(o);"function"==typeof n&&n(o),o!==i&&(t.val(i),r&&t.trigger("change"))}function i(t){if(t.ctrlKey)return!1;if(t.metaKey)return!1;if(!t.charCode)return!1;var e=t.keyCode||t.which;return 9!==e&&(13!==e&&(16!==e&&(17!==e&&(18!==e&&(19!==e&&(20!==e&&(27!==e&&!(33<=e&&e<=40))))))))}if(!(t instanceof $))return void console.warn("'$inputs' should be instance of jQuery");"function"!=typeof e&&(e=function(t){return t}),t.each(function(t,e){var n=$(e);n.on("keypress",function(t){if(i(t)){var e=function(){o.call(this),$(this).off("keyup",e)}.bind(this);$(this).on("keyup",e)}}),n.change(o)})},t.exports=e.default},1136:function(t,e,n){"use strict";function r(t){var e=document.createElement("div");return e.innerHTML=t,e.children[0]}var o;Object.defineProperty(e,"__esModule",{value:!0}),e.combine=e.ticket=e.controlGroup=e.control=e.timePicker=e.datePicker=e.comboBox=e.textLabel=e.textInput=e.numberInput=e.buttonsGroup=e.checkbox=e.errorLabel=void 0,e.createHTML=r,n(1137),n(1138),n(1071),n(1139),o=n(954),e.errorLabel=function(t){var e=t.element,r=void 0===e?"":e,o=t.containerClass,i=void 0===o?"":o;return'\n<div class="tv-control-error tv-control-error--fix_size tv-control-error--size_small '+(Modernizr.touch?"":"tv-control-error--for-number-input")+" "+i+'">\n\t'+r+'\n\t<span class="tv-control-error__icon">'+$("<div>").append($(n(1072)).attr("focusable","false")).html()+'</span>\n\t<span class="tv-control-error__messages"></span>\n</div>'},e.checkbox=function(t){var e=t.labelText,r=t.checkboxClass,o=t.checked;return'\n<label>\n\t<span class="tv-control-checkbox">\n\t\t<input class="tv-control-checkbox__input '+r+'" type="checkbox" '+(void 0!==o&&o?"checked":"")+'>\n\t\t<span class="tv-control-checkbox__box">'+n(224)+'</span>\n\t\t<span class="tv-control-checkbox__ripple js-ripple"></span>\n\t</span>\n\n\t<span class="tv-control-checkbox__label">'+e+"</span>\n</label>"},e.buttonsGroup=function(t){var e=t.containerClass,n=void 0===e?"":e,r=t.options
;return'<div class="tv-buttons-group '+n+'">\n\t'+(void 0===r?[]:r).map(function(t){var e=t.optionText;return'<div class="tv-buttons-group__option '+t.optionClass+'"><span class="tv-buttons-group__option--content apply-overflow-tooltip">'+e+"</span></div>"}).join("")+"\n</div>"},e.numberInput=function(t){var e=t.containerClass,n=void 0===e?"":e,r=t.inputClass,i=void 0===r?"":r,s=t.upClass,u=void 0===s?"":s,c=t.downClass,a=void 0===c?"":c;return'\n<div class="tv-control-number-input tv-control-number-input--size_small '+(Modernizr.touch?"tv-control-number-input--mobile":"")+" "+n+'">\n\t<input type="text" class="tv-control-number-input__input tv-control-number-input__input--size_small '+i+'"/>\n\t<div class="tv-control-number-input__controls">\n\t\t<div tabindex="-2" class="tv-control-number-input__wrapper '+u+'">\n\t\t\t<div class="tv-control-number-input__up">'+o+'</div>\n\t\t</div>\n\t\t<div class="tv-control-number-input__splinter"></div>\n\t\t<div tabindex="-2" class="tv-control-number-input__wrapper '+a+'">\n\t\t\t<div class="tv-control-number-input__down">'+o+"</div>\n\t\t</div>\n\t</div>\n</div>"},e.textInput=function(t){var e=t.id,n=t.type,r=void 0===n?"text":n,o=t.containerClass,i=void 0===o?"":o,s=t.inputClass,u=void 0===s?"":s,c=t.placeHolder,a=void 0===c?"":c,l=t.value;return'\n<div class="'+i+'">\n\t<input id="'+e+'" type="'+r+'" class="tv-control-input '+u+'" placeholder="'+a+'" value="'+(void 0===l?"":l).replace(/"/g,"&quote;")+'">\n</div>'},e.textLabel=function(t){var e=t.outputClass,n=void 0===e?"":e,r=t.outputText;return'\n<div class="tv-text-label js-text-label">\n\t<div class="tv-text-label__label">=</div>\n\t<div class="tv-text-label__value '+n+'">'+(void 0===r?"":r)+"</div>\n</div>"},e.comboBox=function(t){var e=t.outputClass;return'\n<select class="'+(void 0===e?"":e)+' tv-control-select tv-control-select--size_small"></select>\n'},e.datePicker=function(t){var e=t.outputClass;return'\n<div class="'+(void 0===e?"":e)+'">\n\t<input type="text" placeholder="yyyy-mm-dd" class="tv-control-input tv-control-input--size_small">\n</div>\n'},e.timePicker=function(t){var e=t.outputClass;return'\n<div class="'+(void 0===e?"":e)+'">\n\t<input type="text" placeholder="hh:mm" name="expired-time" class="tv-control-input tv-control-input--size_small">\n</div>\n'},e.control=function(t){var e=t.containerClass;return'\n<div class="tv-ticket__field '+(void 0===e?"":e)+'">\n\t<div class="tv-ticket__label">'+t.label+'</div>\n\t<div class="tv-ticket__inputs">\n\t\t<div class="tv-ticket__input js-first-control">\n\t\t\t'+t.selector+'\n\t\t</div>\n\n\t\t<div class="tv-ticket__input js-second-control">\n\t\t\t'+t.input+'\n\t\t</div>\n\n\t\t<div class="tv-ticket__input js-third-control">\n\t\t\t'+t.output+"\n\t\t</div>\n\t</div>\n</div>"},e.controlGroup=function(t){var e=t.containerClass,n=void 0===e?"":e,r=t.containerWrapperClass,o=void 0===r?"":r,i=t.label,s=void 0===i?"":i,u=t.controls
;return'\n<div class="tv-ticket__field '+n+'">\n\t<div class="tv-ticket__label js-control-group-label">'+s+'</div>\n\t<div class="'+o+'">'+(void 0===u?[]:u).join("")+"</div>\n</div>"},e.ticket=function(t){var e=t.body,n=void 0===e?"":e,r=t.riskRewardClass,o=void 0===r?"":r,i=t.riskClass,s=void 0===i?"":i,u=t.totalClass,c=void 0===u?"":u,a=t.lotSizeClass,l=void 0===a?"":a,h=t.doneText,p=void 0===h?"":h,f=t.doneClass,d=void 0===f?"":f,b=t.profitClass;return'\n<div class="tv-ticket">\n\t'+n+'\n\t<div class="tv-ticket__submit">\n\t\t<div class="tv-ticket__risk">\n\t\t\t<div class="'+l+' js-hidden"></div>\n\t\t\t<div class="'+c+'"></div>\n\t\t\t<div class="'+s+'"></div>\n\t\t\t<div class="'+o+'"></div>\n\t\t\t<div class="'+(void 0===b?"":b)+'"></div>\n\t\t</div>\n\t\t<span class="tv-button tv-button--primary '+d+'">'+p+"</span>\n\t</div>\n</div>"},e.combine=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.join("")}},1137:function(t,e){},1138:function(t,e){},1139:function(t,e){},1140:function(t,e){function n(){throw Error("setTimeout has not been defined")}function r(){throw Error("clearTimeout has not been defined")}function o(t){if(l===setTimeout)return setTimeout(t,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(t,0);try{return l(t,0)}catch(e){try{return l.call(null,t,0)}catch(e){return l.call(this,t,0)}}}function i(t){if(h===clearTimeout)return clearTimeout(t);if((h===r||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(t);try{return h(t)}catch(e){try{return h.call(null,t)}catch(e){return h.call(this,t)}}}function s(){f&&d&&(f=!1,d.length?p=d.concat(p):b=-1,p.length&&u())}function u(){var t,e;if(!f){for(t=o(s),f=!0,e=p.length;e;){for(d=p,p=[];++b<e;)d&&d[b].run();b=-1,e=p.length}d=null,f=!1,i(t)}}function c(t,e){this.fun=t,this.array=e}function a(){}var l,h,p,f,d,b,v=t.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:n}catch(t){l=n}try{h="function"==typeof clearTimeout?clearTimeout:r}catch(t){h=r}}(),p=[],f=!1,b=-1,v.nextTick=function(t){var e,n=Array(arguments.length-1);if(arguments.length>1)for(e=1;e<arguments.length;e++)n[e-1]=arguments[e];p.push(new c(t,n)),1!==p.length||f||o(u)},c.prototype.run=function(){this.fun.apply(null,this.array)},v.title="browser",v.browser=!0,v.env={},v.argv=[],v.version="",v.versions={},v.on=a,v.addListener=a,v.once=a,v.off=a,v.removeListener=a,v.removeAllListeners=a,v.emit=a,v.prependListener=a,v.prependOnceListener=a,v.listeners=function(t){return[]},v.binding=function(t){throw Error("process.binding is not supported")},v.cwd=function(){return"/"},v.chdir=function(t){throw Error("process.chdir is not supported")},v.umask=function(){return 0}},1141:function(t,e,n){"use strict";function r(t){var e,n;if(t&&t.__esModule)return t;if(e={},null!=t)for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function o(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){
if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function c(t){return Array.isArray(t)?t:Array.from(t)}function a(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function l(t){var e,n,r,o,i,s,u,c,a,l,h,p,f,d,b,v,_,m,w,g,C,E,x,O,S,D,j,P=t.input,N=t.state$,T=t.error$,q=void 0===T?L.Observable.of({hasError:!1}):T,R=t.onOff$,F=void 0===R?L.Observable.of(!0):R,M=t.upClass,W=void 0===M?".js-input-up":M,z=t.downClass,U=void 0===z?".js-input-down":z,V=t.inputClass,B=void 0===V?".js-input":V,H=t.parseError,K=void 0===H?$.t("can not parse value"):H,Y=t.leftMessageAlign,Q=t.formatOnInput,J=void 0!==Q&&Q,Z=1e-10,X=function(t,e){return t.flatMapLatest(function(){return L.Observable.interval(50).delay(250).startWith(1).takeUntil(L.Observable.fromEvent(document,"mouseup"))}).map(function(){return e})},tt=P.querySelector(W),et=P.querySelector(U),nt=P.querySelector(B),rt=new I.ControlError(P,{addFocusEvents:!1,addErrorOnElement:!1,leftMessageAlign:Y});try{nt.setSelectionRange(nt.value.length,nt.value.length)}catch(t){}return e=L.Observable.fromEvent(tt,"mousedown").pausable(F).publish(),n=L.Observable.fromEvent(et,"mousedown").pausable(F).publish(),r=X(e,1),o=X(n,-1),i=L.Observable.merge(L.Observable.fromEvent(nt,"focus",function(t){return!0}),L.Observable.fromEvent(tt,"focus",function(t){return!0}),L.Observable.fromEvent(et,"focus",function(t){return!0})),s=L.Observable.merge(L.Observable.fromEvent(nt,"blur",function(t){return!1}),L.Observable.fromEvent(tt,"blur",function(t){return!1}),L.Observable.fromEvent(et,"blur",function(t){return!1})),u=i.merge(s).debounce(10).distinctUntilChanged(),c=L.Observable.fromEvent(nt,"input",function(t){return t.target.value}),a=c.withLatestFrom(N,function(t,e){var n=e.formatter.parse(t);return n.res?{hasError:!1,input:n.price}:{hasError:!0,input:t,text:n.error||K}}).publish(),l=a.map(function(t){return t.input}).publish(),h=function(t,e){return function(n){var r=n;return void 0!==t&&(r=Math.max(r,t)),void 0!==e&&(r=Math.min(r,e)),r}},p=N.map(function(t){return t.value}),f=L.Observable.merge(p,l).withLatestFrom(N,function(t,e){return["string"==typeof t?0:t,e.step,h(e.min,e.max)]}),d=function(t){var e=A(t,3),n=e[0],i=e[1],s=e[2];return o.merge(r).scan(function(t,e){var n=e*i,r=Math.pow(10,-Math.floor(Math.log10(i))),o=t*r%(i*r)/r;return s(o>Z?t+n+(1===e?0:1)*i-o:t+n)},n)},b=f.flatMap(d),v=b.merge(p).distinctUntilChanged().publish(),_=L.Observable.merge(v,a.filter(function(t){return!t.hasError}).map(function(t){return t.input})).distinctUntilChanged().publish(),m=(J?_:v).withLatestFrom(N,function(t,e){return e.formatter.format(t)}),
w=a.merge(_.map(function(t){return{hasError:!1}})).distinctUntilChanged(function(t){return t.text}),g=y(w,F,{hasError:!1}),C=g.value$,E=g.disposable,x=y(q,F,{hasError:!1}),O=x.value$,S=x.disposable,D=C.publish(),j=k([D,O],G),{value$:_,error$:D,subscribe:function(){var t=u.subscribe(function(t){t?(P.classList.add("i-active"),P.parentNode.classList.add("i-focus")):(P.classList.remove("i-active"),P.parentNode.classList.remove("i-focus"))}),e=m.subscribe(function(t){var e=nt.value,n=e.slice(0,nt.selectionStart).length+t.length-e.length;nt.value=t,nt.setSelectionRange(n,n)}),n=F.subscribe(function(t){t?(nt.removeAttribute("disabled"),P.classList.remove("i-disabled")):(nt.setAttribute("disabled","disabled"),P.classList.add("i-disabled"))}),r=j.subscribe(function(t){t.hasError?(P.classList.add("i-error"),rt.add({id:1,message:t.text}).render()):(P.classList.remove("i-error"),rt.clear().render())});return new L.CompositeDisposable(t,e,n,r)},connect:function(){return new L.CompositeDisposable(D.connect(),_.connect(),v.connect(),l.connect(),a.connect(),e.connect(),n.connect(),S,E)}}}function h(t,e,n){return(t<=0||e<=0)&&!n?{text:$.t("Value should be more than 0"),hasError:!0}:{text:"",hasError:!1}}function p(t){var e,n,r,o,i,s,u,p,f,d,b,v,_,y,m,w,g,C,E,x,O,S,j,P=t.container,N=t.price$,q=t.custom$,R=t.initState$,I=t.pipsToPrice,F=t.priceToPips,M=t.pipsProps,W=t.priceProps,z=t.orderType$,U=t.onOff$,V=void 0===U?L.Observable.of(!0):U,B=t.anyPriceValid$,H=void 0===B?L.Observable.of(!1):B,K=t.switchClass,Y=void 0===K?".js-order-switch":K,Q=t.inputClass,Z=void 0===Q?".js-order-input":Q,X=t.outputClass,tt=void 0===X?".js-order-output":X,et=t.observableArrForErrorChecker,nt=void 0===et?[]:et,rt=t.errorChecker,ot=void 0===rt?h:rt,it={FIRST:1,SECOND:2},st=P.querySelector(Y),ut=P.querySelector(Z),ct=P.querySelector(tt),at=st.querySelector("div"),lt=st.querySelectorAll("div")[1],ht=new L.Subject,pt=R.delay(1).concat(ht).distinctUntilChanged(function(t){return t.type}).publish(),ft=it.FIRST;return R.subscribe(function(t){ft=t.type}),e=L.Observable.fromEvent(at,"click",function(){return J.PRICE}).pausable(V),n=L.Observable.fromEvent(lt,"click",function(){return J.PIPS}).pausable(V),r=e.merge(n).distinctUntilChanged().startWith(ft),o=pt.map(function(t){return t.type}).publish(),i=new L.Subject,s=l({input:ut,state$:pt,error$:i,onOff$:V}),u=s.value$,p=s.error$,f=s.connect,d=s.subscribe,b=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return e},v=q?[o,u,N,q]:[o,u,N],_=L.Observable.combineLatest.apply(L.Observable,a(v.concat(b))).publish(),y=L.Observable.combineLatest(o,u,b).publish(),m=function(t,e,n){return t.filter(function(t){return A(t,1)[0]===e}).map(function(t){var e=c(t),r=e.slice(1);return n.apply(void 0,a(r))})},w=m(_,J.PIPS,I).map(function(t){return D(W.formatter,t)}).merge(m(_,J.PRICE,F).map(function(t){return D(M.formatter,t)})).publish(),g=$.t("Pips"),C=w.withLatestFrom(o,function(t,e){var n=e===J.PRICE?g:"";return(e===J.PRICE?M.formatter:W.formatter).format(t)+" "+n}),
E=r.withLatestFrom(w,function(t,e){return T({},t===J.PRICE?W:M,{type:t,value:e})}).publish(),x=m(_,J.PIPS,I).merge(m(y,J.PRICE,function(t){return t})).publish(),O=m(_,J.PRICE,F).merge(m(y,J.PIPS,function(t){return t})).publish(),S=L.Observable.combineLatest.apply(L.Observable,[x,O].concat(a(nt),[H,N,z||L.Observable.of(null),L.Observable.of(W.step),ot])).distinctUntilChanged(function(t){return t.text}),j=k([i,p],G),{price$:x,pips$:O,error$:j,mode$:r,subscribe:function(){var t=pt.subscribe(function(t){t.type===J.PRICE?(at.classList.add("i-active"),lt.classList.remove("i-active")):(at.classList.remove("i-active"),lt.classList.add("i-active"))}),e=C.subscribe(function(t){ct.textContent=t}),n=V.subscribe(function(t){t?(st.classList.remove("i-disabled"),ct.parentNode.classList.remove("i-disabled")):(st.classList.add("i-disabled"),ct.parentNode.classList.add("i-disabled"))}),r=d();return new L.CompositeDisposable(e,t,r,n)},connect:function(){return new L.CompositeDisposable(S.subscribe(i),w.connect(),O.connect(),x.connect(),y.connect(),_.connect(),o.connect(),f(),pt.connect(),E.subscribe(ht),E.connect())}}}function f(t,e){var n=$(t);return L.Observable.fromEventPattern(function(t){return n.on("change",t)},function(t){return n.off("change",t)},function(){return n.val()}).startWith(e).publish()}function d(){return 60*-(new Date).getTimezoneOffset()*1e3}function b(t,e){var n,r,o=$(t);return(0,W.default)(o,{triggerChange:!0}),(0,B.lazyJqueryUI)(o).datepicker({monthNames:Y.MONTH_ARRAY,dateFormat:"yy-mm-dd",minDate:new Date,showOtherMonths:!0}),e=e||Date.now()+864e5,n=new Date(e+d()).toJSON(),r=n.substr(0,10),o.val(r),L.Observable.fromEventPattern(function(t){return o.on("change input",t)},function(t){return o.off("change input",t)},function(){return o.val()}).startWith(r)}function v(t,e,n){var r,o,i=$(t);return(0,U.default)(i,{triggerChange:!0}),i.clockpicker({autoclose:!0,donetext:"OK",placement:"top",afterShow:function(){var t=+e.css("z-index")+1;isFinite(t)&&i.data("clockpicker").popover.css("z-index",t)}}),n=n||Date.now(),r=new Date(n+d()).toJSON(),o=r.substr(11,5),i.val(o),L.Observable.fromEventPattern(function(t){return i.on("change input",t)},function(t){return i.off("change input",t)},function(){return i.val()}).startWith(o)}function _(t,e,n,r,o,i,s,u,c,a){function l(t,e,n){e.classList.toggle("i-disabled",!n),$(t).prop("disabled",!n)}var h,p,_,y,m,w,g,C,E,x,O,S=t.querySelector("select.js-duration-type"),D=t.querySelector(".js-duration-date"),k=t.querySelector(".js-duration-time"),j=D.querySelector("input"),P=k.querySelector("input");return!o||(0,V.isArray)(o)&&0===o.length?($(t).addClass("js-hidden"),h=L.Observable.of({}).publish(),{duration$:h,durationDateError$:h,durationTimeError$:h,subscribe:function(){return h.subscribe(function(){})},connect:function(){return h.connect()}}):($(t).removeClass("js-hidden"),p=f(S,n||o[0].value),_=b(j,r),y=v(P,$(e),r),m=new I.ControlError(j,{addFocusEvents:!1,addErrorOnElement:!1}),w=new I.ControlError(P,{addFocusEvents:!1,addErrorOnElement:!1}),g={text:"",hasError:!1},
C=L.Observable.combineLatest(p,_,i,function(t,e,n){var r,i,s,u;return!o.filter(function(e){return e.value===t})[0].hasDatePicker||!c&&n===F.ORDERTYPE.MARKET?g:e?(r=$.t("Incorrect date format. Should be yyyy-mm-dd."),e.match(/^\d{4}-[01]\d-[0-3]\d$/)?(i=e+"T00:00:00Z",s=new Date(i),s.valueOf()?(u=864e5*parseInt(Date.now()/864e5),s<u?{text:$.t("Expiration date is in the past."),hasError:!0}:g):{text:r,hasError:!0}):{text:r,hasError:!0}):{text:$.t("Enter valid date"),hasError:!0}}).startWith(g).distinctUntilChanged(function(t){return t.text}).publish(),E=L.Observable.combineLatest(p,_,C,y,i,function(t,e,n,r,i){var s,u,a;return!o.filter(function(e){return e.value===t})[0].hasTimePicker||!c&&i===F.ORDERTYPE.MARKET?g:r?(s=$.t("Incorrect time format. Should be hh:mm."),r.match(/^([01]?[0-9]|2[0-3]):[0-5][0-9]$/)?n.hasError?g:(u=e+"T"+r+":00Z",a=new Date(u),a.valueOf()?(a-=d(),a<Date.now()?{text:$.t("Expiration time is in the past."),hasError:!0}:g):{text:s,hasError:!0}):{text:s,hasError:!0}):{text:$.t("Enter valid time"),hasError:!0}}).startWith(g).distinctUntilChanged(function(t){return t.text}).publish(),x=L.Observable.combineLatest(p,_,y,i,function(t,e,n,r){return r!==F.ORDERTYPE.MARKET||c?{type:t,dateStr:e,timeStr:n}:{}}).distinctUntilChanged().publish(),O=L.Observable.combineLatest(p,i,function(t,e){var n=o.filter(function(e){return e.value===t})[0],r=(c||e!==F.ORDERTYPE.MARKET)&&!u||u&&a;return{duration:r,datePicker:n.hasDatePicker&&r,timePicker:n.hasTimePicker&&r}}),{duration$:x,durationDateError$:C,durationTimeError$:E,subscribe:function(){var t=C.subscribe(function(t){m.clear().render(),t.hasError&&m.add({id:1,message:t.text}).render()}),e=E.subscribe(function(t){w.clear().render(),t.hasError&&w.add({id:1,message:t.text}).render()}),n=O.subscribe(function(t){l(j,D,t.datePicker),l(P,k,t.timePicker),t.duration?s.tvControlSelect("enable"):setTimeout(function(){s.tvControlSelect("disable")},0)});return new L.CompositeDisposable(t,e,n)},connect:function(){return new L.CompositeDisposable(x.connect(),E.connect(),C.connect(),p.connect())}})}function y(t,e,n){var r=t.replay(null,1),o=r.connect();return{value$:e.flatMapLatest(function(t){return t?r:L.Observable.of(n)}),disposable:o}}function m(t){var e,n=t.container,r=t.startState;return n.checked=!!r,e=L.Observable.merge(L.Observable.of(!!r).delay(1),L.Observable.create(function(t){var e=function(e){return setTimeout(function(){return t.onNext(e.target.checked)})};return n.addEventListener("change",e),function(){return n.removeEventListener("checked",e)}})).distinctUntilChanged().publish(),{value$:e,connect:function(){return e.connect()}}}function w(t,e){var n=t.price$,r=t.pips$,o=t.error$,i=t.mode$,s=e.value$,u=y(n,s),c=u.value$,a=u.disposable,l=y(r,s),h=l.value$,p=l.disposable,f=y(o,s,{text:"",hasError:!1}),d=f.value$,b=f.disposable;return{price$:c,pips$:h,error$:d,mode$:i,connect:function(){return new L.CompositeDisposable(e.connect(),t.connect())},subscribe:function(){return new L.CompositeDisposable(t.subscribe(),b,p,a)}}}function g(t){
var e=t.buttonLoader,n=t.result$,r=t.fire$,o=void 0===r?L.Observable.empty():r,i=t.enable$,s=void 0===i?L.Observable.of(!0):i,u=t.handler,c=e.contentNojQuery(),a=new L.Subject,l=a.merge(s),h=L.Observable.merge(L.Observable.fromEvent(c,"click",function(){return"fire"}),o).pausable(l),p=h.withLatestFrom(n,function(t,e){return e}),f=p.flatMapLatest(function(t){var e,n=u(t);return Z(n)?(e=function(t,e){return a.onNext(!0),T({},t,{details:e})},a.onNext(!1),n.then().then(e.bind(null,{status:"ok"}),e.bind(null,{status:"error"}))):L.Observable.of({status:"ok",details:n})}).publish();return{result$:f,subscribe:function(){var t=s.subscribe(function(t){t?e.enable():e.disable()}),n=a.subscribe(function(t){t?e.stop():e.start()});return new L.CompositeDisposable(t,n)},connect:function(){return new L.CompositeDisposable(f.connect())}}}function C(t){var e=t.container,n=t.qty$,r=t.pips$,o=t.equity$,i=t.pipValue,s=t.currencySign,u=void 0===s?"$":s,c=t.text,a=void 0===c?$.t("Risk"):c,l=L.Observable.combineLatest(n,r,o,function(t,e,n){var r,o;return n?(r=e?e*t*i:void 0,o=r?100*r/n:void 0,{rm:r,rp:o}):null}).distinctUntilChanged();return{subscribe:function(){return l.subscribe(function(t){var n,r,o,i;if(!t)return void(e.textContent="");n=t.rm,r=t.rp,void 0===n||void 0===r?e.textContent="":(n="("+u+(0,q.splitThousands)(n.toFixed(2),",")+")",r=r.toFixed(2)+"%",o=a+" "+r+" "+n,K.IS_RTL&&(i=K.forceLTRStr(n+" "+r),o=a+" "+i),e.textContent=o)})}}}function E(t){var e=t.container,n=t.slPips$,r=t.tpPips$,o=L.Observable.combineLatest(n,r,function(t,e){return e/t}).distinctUntilChanged();return{subscribe:function(){return o.subscribe(function(t){Number.isFinite(t)?(t=t.toFixed(2),K.IS_RTL&&(t=K.startWithLTR(t)),e.textContent=$.t("Risk/reward ratio:")+" "+t):e.textContent=""})}}}function x(t){var e=t.container,n=t.currency,r=t.price$,o=t.qty$,i=t.precision,s=L.Observable.combineLatest(r,o,function(t,e){return t*e}).distinctUntilChanged();return{subscribe:function(){return s.subscribe(function(t){Number.isFinite(t)?e.textContent=$.t("Total:")+" "+t.toFixed(i)+" "+n:e.textContent=""})}}}function O(t){return Math.abs(Math.floor(Math.log10(t)))}function S(t,e,n,r){if(t&&r<t)return{res:!1,error:tt.min};if(e&&r>e)return{res:!1,error:tt.max};if(n<1e-4)return{res:!0};var o=Q(r/n);return n&&o!==Math.floor(o)?{res:!1,error:tt.step}:{res:!0}}function D(t,e){var n=t.parse(t.format(e));return n.res?n.price:(n=Number.parseFloat(e),Number.isNaN(n)?void 0:n)}function k(t,e){return L.Observable.combineLatest.apply(L.Observable,a(t.concat(e))).distinctUntilChanged().publish().refCount()}var j,P,N,T,A,q,L,R,I,F,M,W,z,U,V,B,H,K,Y,Q,J,G,Z,X,tt;Object.defineProperty(e,"__esModule",{value:!0}),e.QtyFormatter=e.NumericFormatter=e.mergeErrors=e.INPUT_TYPE=void 0,j=function(){function t(t,e){var n,r;for(n=0;n<e.length;n++)r=e[n],r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),P=function t(e,n,r){var o,i,s;return null===e&&(e=Function.prototype),
void 0===(o=Object.getOwnPropertyDescriptor(e,n))?(i=Object.getPrototypeOf(e),null===i?void 0:t(i,n,r)):"value"in o?o.value:void 0!==(s=o.get)?s.call(r):void 0},N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},T=Object.assign||function(t){var e,n,r;for(e=1;e<arguments.length;e++){n=arguments[e];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},A=function(){function t(t,e){var n,r,o=[],i=!0,s=!1,u=void 0;try{for(n=t[Symbol.iterator]();!(i=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);i=!0);}catch(t){s=!0,u=t}finally{try{!i&&n.return&&n.return()}finally{if(s)throw u}}return o}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),e.createCustomNumberInput=l,e.createPriceController=p,e.localOffset=d,e.createDurationController=_,e.makeObservableOffable=y,e.createCheckBox=m,e.combineControllerAndCheckbox=w,e.createDoneButton=g,e.createRiskHelper=C,e.createRiskRewardHelper=E,e.createTotalHelper=x,e.checkQty=S,e.parseWithFormatter=D,e.combineErrors=k,q=n(150),L=n(1073),R=n(13),I=n(1142),F=n(118),M=n(1144),W=o(M),z=n(1145),U=o(z),V=n(12),B=n(219),H=n(36),K=r(H),Y=n(1146),Q=n(79).fixComputationError,J=e.INPUT_TYPE={PRICE:1,PIPS:2},G=e.mergeErrors=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.reduce(function(t,e){return{hasError:t.hasError||e.hasError,text:t.text||e.text}},{})},Z=function(t){return"object"===(void 0===t?"undefined":N(t))&&"function"==typeof t.then},X=e.NumericFormatter=function(t){function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.t("Only numbers allowed.");return i(this,e),n=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,Math.pow(10,t))),n._errorLabel=r,n}return u(e,t),j(e,[{key:"parse",value:function(t){var n=P(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"parse",this).call(this,t);return n.res?n:T({},n,{error:this._errorLabel})}}]),e}(R.PriceFormatter),tt={min:$.t("Specified amount is less that the instrument minimum."),max:$.t("Specified amount is more than the instrument maximum."),step:$.t("Specified amount is not a multiple of the instrument minimum.")},e.QtyFormatter=function(t){function e(t){var n,r,o=t.min,u=void 0===o?null:o,c=t.max,a=void 0===c?null:c,l=t.step,h=void 0===l?1:l;return i(this,e),n=h>=1?0:O(h),r=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,$.t("Amount format is invalid."))),r._values={min:u,max:a,step:h},r}return u(e,t),j(e,[{key:"parse",value:function(t){var n,r=P(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"parse",this).call(this,t.replace(/\s/g,""));return r.res&&(n=S(this._values.min,this._values.max,this._values.step,r.price),!1===n.res)?n:r}},{key:"format",value:function(t){return(0,
q.splitThousands)(P(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"format",this).call(this,t)," ")}}]),e}(X)},1142:function(t,e,n){"use strict";function r(t){var e,n;if(t&&t.__esModule)return t;if(e={},null!=t)for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i,s,u,c,a;Object.defineProperty(e,"__esModule",{value:!0}),e.ControlError=void 0,i=function(){function t(t,e){var n,r;for(n=0;n<e.length;n++)r=e[n],r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),n(1143),s=n(225),u=n(77),c=r(u),a=e.ControlError=function(){function t(e){function r(t,e){return t.some(function(t){return e.test(t)})}var i,s,u,c,a,l=this,h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},p=h.addFocusEvents,f=void 0===p||p,d=h.addErrorOnElement,b=void 0===d||d,v=h.leftMessageAlign,_=void 0!==v&&v,y=h.maxWidth,m=void 0===y?void 0:y;o(this,t),i=$(e),s=i.hasClass("tv-control-checkbox__input"),u=i.hasClass("tv-control-radio__input"),c=i.hasClass("tv-control-number-input"),a=r(i.attr("class").split(/\s+/),/^.+--size_small$/),this.options={smallMode:a,addErrorOnElement:b,maxWidth:m},s&&(i=i.closest(".tv-control-checkbox")),u&&(i=i.closest(".tv-control-radio-group")),this.errors={},this.$control=i,i.data("tv-control-material")?this.$toWrap=i.data("tv-control-material").$el:i.data("tv-control-error-wrap")?this.$toWrap=i.data("tv-control-error-wrap"):this.$toWrap=i,this.$toWrap.parent().hasClass("tv-control-error")||this.$toWrap.wrap('<div class="tv-control-error '+(c?"tv-control-error--for-number-input":"")+'"></div>'),this.$el=this.$toWrap.parent(),s&&this.$el.addClass("tv-control-error--msg_left"),a&&this.$el.addClass("tv-control-error--size_small"),s||(this.$icon=this.$el.find(".tv-control-error__icon"),this.$icon.length||(this.$icon=$('<span class="tv-control-error__icon">'+$("<div>").append($(n(1072)).attr("focusable","false")).html()+"</span>").appendTo(this.$el)),i.data("tv-control-material")&&this.$icon.addClass("tv-control-error__icon--material-input")),this.$widthControlWrapper=this.$el.find(".tv-control-error__width-control-wrapper"),this.$widthControlWrapper.length||(this.$widthControlWrapper=$('<div class="tv-control-error__width-control-wrapper">').appendTo(this.$el)),this.$widthControlWrapper.css("width",this.options.maxWidth),_&&this.$widthControlWrapper.addClass("tv-control-error__width-control-wrapper--from-left"),this.$messages=this.$el.find(".tv-control-error__messages"),this.$messages.length||(this.$messages=$('<span class="tv-control-error__messages"></span>').appendTo(this.$widthControlWrapper)),i.on("focus",function(){l.$el.addClass("i-focus"),i.removeClass("i-error"),f&&i.on("keyup.tv-control-error",function(t){9!==t.keyCode&&16!==t.keyCode&&(l.clear().render(),l.$el.removeClass("i-focus"),i.off("keyup.tv-control-error"))})}),i.on("blur",function(){
l.$el.removeClass("i-focus"),l.hasErrors()&&i.addClass("i-error")})}return i(t,[{key:"add",value:function(t){var e=t.id,n=t.message;return this.errors[e]=n,this}},{key:"remove",value:function(t){var e=t.id;return delete this.errors[e],this}},{key:"clear",value:function(){return this.errors={},this}},{key:"hasErrors",value:function(){return!!Object.keys(this.errors).length}},{key:"render",value:function(){var t,e,n=this;if(this.emptyTimeout&&clearTimeout(this.emptyTimeout),t=Object.keys(this.errors),t.length)for(this.$messages.empty(),this.$el.addClass("i-error"),this.options.addErrorOnElement&&this.$control.addClass("i-error"),e=0;e<t.length;e++)this.errors[t[e]]&&$('<span class="tv-control-error__message">'+this.errors[t[e]]+"</span>").appendTo(this.$messages);else this.$el.removeClass("i-error"),this.$control.removeClass("i-error"),this.emptyTimeout=setTimeout(function(){n.$messages.empty()},c.dur);return this}}]),t}(),$.fn.tvControlError=(0,s.createTvBlockWithInstance)("tv-control-error",function(t,e){return new a(t,e)})},1143:function(t,e){},1144:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var o,i;Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){function n(t){return 4!==t.length&&7!==t.length||(t+="-"),t=t.substr(0,10)}var e=e||{};(0,i.default)(t,n,e.inputOnTypingCallback,e.triggerChange)},o=n(1074),i=r(o),t.exports=e.default},1145:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var o,i;Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){function n(t){return 2===t.length&&(t+=":"),t=t.substr(0,5)}var e=e||{};(0,i.default)(t,n,e.inputOnTypingCallback,e.triggerChange)},o=n(1074),i=r(o),t.exports=e.default},1146:function(t,e,n){"use strict";var r;Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"MONTH_ARRAY",function(){return r}),n(9),r=[window.t("January"),window.t("February"),window.t("March"),window.t("April"),window.t("May"),window.t("June"),window.t("July"),window.t("August"),window.t("September"),window.t("October"),window.t("November"),window.t("December")]},409:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){var n,r={};for(n in t)e.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n]);return r}function i(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){function r(o,i){var s,u;try{s=e[o](i),u=s.value}catch(t){return void n(t)}if(!s.done)return Promise.resolve(u).then(function(t){r("next",t)},function(t){r("throw",t)});t(u)}return r("next")})}}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,
enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a,l,h,p,f,d,b,v,_,y,m,w,g,C,E,x,O,S;Object.defineProperty(e,"__esModule",{value:!0}),e.PositionTicket=void 0,a=n(232),l=r(a),h=Object.assign||function(t){var e,n,r;for(e=1;e<arguments.length;e++){n=arguments[e];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},p=function(){function t(t,e){var n,r,o=[],i=!0,s=!1,u=void 0;try{for(n=t[Symbol.iterator]();!(i=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);i=!0);}catch(t){s=!0,u=t}finally{try{!i&&n.return&&n.return()}finally{if(s)throw u}}return o}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),f=function(){function t(t,e){var n,r;for(n=0;n<e.length;n++)r=e[n],r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),d=function t(e,n,r){var o,i,s;return null===e&&(e=Function.prototype),void 0===(o=Object.getOwnPropertyDescriptor(e,n))?(i=Object.getPrototypeOf(e),null===i?void 0:t(i,n,r)):"value"in o?o.value:void 0!==(s=o.get)?s.call(r):void 0},b=n(80),v=n(955),_=n(381),y=n(118),m=n(1136),w=n(1073),g=n(1141),C=void 0,E=function(){return(0,m.textLabel)({outputClass:"js-position-output"})},x=function(){return(0,m.errorLabel)({element:(0,m.numberInput)({containerClass:"js-position-input",inputClass:"js-input",upClass:"js-input-up",downClass:"js-input-down"}),containerClass:""})},O=function(){return(0,m.buttonsGroup)({containerClass:"tv-buttons-group--primary_ghost tv-buttons-group--size-small js-position-switch",options:[{optionText:$.t("Price"),optionClass:""},{optionText:$.t("Pips"),optionClass:""}]})},S=(0,m.ticket)({body:(0,m.combine)((0,m.control)({containerClass:"js-position-sl",label:(0,m.checkbox)({labelText:$.t("Stop Loss"),checkboxClass:"js-sl-checker"}),selector:O(),input:x(),output:E()}),(0,m.control)({containerClass:"js-position-tp",label:(0,m.checkbox)({labelText:$.t("Take Profit"),checkboxClass:"js-tp-checker"}),selector:O(),input:x(),output:E()})),riskRewardClass:"risk-revard-js",riskClass:"risk-js",profitClass:"profit-js",doneText:$.t("Modify"),doneClass:"js-done"}),e.PositionTicket=function(t){function e(){return s(this,e),u(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return c(e,t),f(e,[{key:"open",value:function(){function t(t,e,r,o){return n.apply(this,arguments)}var n=i(l.default.mark(function t(n,r,i,s){var u,c,a,f,v,m,C,E,x,O,S,D,k,j,P,N,T,A,q,L,R,I,F,M,W,z,U,V,B,H,K,Y,Q,J,G,Z,X,tt,et,nt,rt,ot,it,st,ut,ct,at,lt,ht,pt,ft,dt,bt,vt,_t,yt,mt,wt,gt,Ct,Et,xt,Ot,St,$t,Dt=this;return l.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.opened){t.next=4;break}return this.focus(),this.toTop(),t.abrupt("return",Promise.reject());case 4:return u=(0,b.tradingService)(),c=u.realtimeProvider(),a=u.activeBroker(),
f=w.Observable.fromEventPattern(function(t){return a.positionUpdate.subscribe(null,t)},function(t){return a.positionUpdate.unsubscribe(null,t)}).filter(function(t){return t.id===n.id}).map(function(t){return!!t.qty}),t.next=10,Promise.all([a.symbolInfo(n.symbol),a.accountInfo(),u.formatter(n.symbol)]);case 10:return v=t.sent,m=p(v,3),C=m[0],E=m[1],x=m[2],this.setTitle("<strong>"+n.symbol+",</strong> "+(n.side===y.SIDE.SELL?$.t("Short"):$.t("Long"))),O=w.Observable.fromEventPattern(function(t){return c.subscribeRealtime(n.symbol,t)},function(t){return c.unsubscribeRealtime(n.symbol,t)},function(t,e){return e}).publish(),S=w.Observable.fromEventPattern(function(t){return a.subscribeEquity(t)},function(t){return a.unsubscribeEquity(t)},function(t,e){return e}).publish(),D=w.Observable.fromEventPattern(function(t){return u.onConnectionStatusChange.subscribe(null,t)},function(t){return u.onConnectionStatusChange.unsubscribe(null,t)},function(t){return t.status||t}),k=this.el,j=w.Observable.of(n.side||y.SIDE.SELL),P=w.Observable.combineLatest(j,O,function(t,e){return t===y.SIDE.SELL?+e.bid||+e.trade:+e.ask||+e.trade}).publish(),N=w.Observable.combineLatest(j,O,function(t,e){return t!==y.SIDE.SELL?+e.bid||+e.trade:+e.ask||+e.trade}).publish(),T=k.querySelector(".js-done"),A=new _.ButtonLoader(T),q=C.pipSize,L={step:1,formatter:new g.NumericFormatter(C.pipSize!==C.minTick?1:0)},R={step:C.minTick,min:C.minTick,formatter:x},I=function(t,e,n){return n*(t-e)/q},F=function(t,e,n){return n*t*q+e},M=w.Observable.of(n.avgPrice),W=function(t){return y.SIDE.BUY===t?1:-1},z=k.querySelector(".js-sl-checker"),U=k.querySelector(".js-tp-checker"),V=(0,g.createCheckBox)({container:z,startState:!!r.stopLoss}),B=(0,g.createCheckBox)({container:U,startState:!!r.takeProfit}),H=k.querySelector(".js-position-sl"),K=k.querySelector(".js-position-tp"),Y=k.querySelector(".js-position-sl .js-input"),Q=k.querySelector(".js-position-tp .js-input"),this.firstFocusControl=null,i===y.TICKETFOCUS.TAKEPROFIT?this.firstFocusControl=r.takeProfit&&Q:i===y.TICKETFOCUS.STOPLOSS&&(this.firstFocusControl=r.stopLoss&&Y),J=r.stopLoss?h({},R,{type:g.INPUT_TYPE.PRICE,value:(0,g.parseWithFormatter)(R.formatter,r.stopLoss)}):h({},L,{type:g.INPUT_TYPE.PIPS,value:25}),G=r.takeProfit?h({},R,{type:g.INPUT_TYPE.PRICE,value:(0,g.parseWithFormatter)(R.formatter,r.takeProfit)}):h({},L,{type:g.INPUT_TYPE.PIPS,value:75}),Z={pipsProps:L,priceProps:R,priceToPips:I,pipsToPrice:F,switchClass:".js-position-switch",inputClass:".js-position-input",outputClass:".js-position-output",observableArrForErrorChecker:[N,j]},X=function(t,e,n){return function(r,o,i,s){var u=(n?1:-1)*W(s);return Math.sign(r-i)===u?{hasError:!0,text:s===y.SIDE.SELL?e:t}:{hasError:!1}}},tt=n.side===y.SIDE.SELL?$.t("ask"):$.t("bid"),et=(0,g.createPriceController)(h({},Z,{errorChecker:X($.t("Stop loss must be below current __value__.",{value:tt}),$.t("Stop loss must be above current __value__.",{value:tt}),!0),container:H,price$:M,custom$:j.map(function(t){return-1*W(t)}),initState$:w.Observable.of(J),onOff$:V.value$
})),nt=(0,g.createPriceController)(h({},Z,{errorChecker:X($.t("Take profit must be above current __value__.",{value:tt}),$.t("Take profit must be below current __value__.",{value:tt}),!1),container:K,price$:M,custom$:j.map(function(t){return W(t)}),initState$:w.Observable.of(G),onOff$:B.value$})),rt=(0,g.combineControllerAndCheckbox)(et,V),ot=rt.price$,it=rt.pips$,st=rt.error$,ut=rt.mode$,ct=o(rt,["price$","pips$","error$","mode$"]),at=(0,g.combineControllerAndCheckbox)(nt,B),lt=at.price$,ht=at.pips$,pt=at.error$,ft=at.mode$,dt=o(at,["price$","pips$","error$","mode$"]),bt=(0,g.combineErrors)([st,pt],function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.every(function(t){return!t.hasError})}),vt=w.Observable.combineLatest(ot,lt,V.value$,ut,B.value$,ft,function(t,e,n,r,o,i){return{stopLoss:t,takeProfit:e,slCheckbox:n,slMode:r,tpCheckbox:o,tpMode:i}}),_t=(0,g.createDoneButton)({buttonLoader:A,result$:vt,fire$:w.Observable.fromEvent(document,"keyup",function(t){return t.keyCode}).filter(function(t){return 13===t&&Dt.isFocused()}),enable$:bt,handler:function(t){var e=t.stopLoss,n=t.takeProfit,r=t.slCheckbox,o=t.slMode,i=t.tpCheckbox,c=t.tpMode,a=["Price","Pips"],l=[" Disabled"," Active"],h={SL:{active:l[+r],mode:a[o-1]},TP:{active:l[+i],mode:a[c-1]}};return Object.keys(h).forEach(function(t){u.trackEvent("Position Ticket",t+h[t].active,h[t].mode)}),s({stopLoss:e,takeProfit:n})}}),yt=_t.result$,mt=o(_t,["result$"]),wt=w.Observable.of(n.qty),gt=k.querySelector(".risk-revard-js"),Ct=k.querySelector(".risk-js"),Et=k.querySelector(".profit-js"),xt=(0,g.createRiskHelper)({container:Ct,qty$:wt,pips$:it,equity$:S,pipValue:C.pipValue,currencySign:E.currencySign}),Ot=(0,g.createRiskHelper)({container:Et,qty$:wt,pips$:ht,equity$:S,pipValue:C.pipValue,currencySign:E.currencySign,text:$.t("Reward")}),St=(0,g.createRiskRewardHelper)({container:gt,slPips$:it,tpPips$:ht}),$t=[j.subscribe(function(t){var e=t===y.SIDE.SELL;T.classList.toggle("tv-button--danger",e),T.classList.toggle("tv-button--primary",!e)}),D.subscribe(function(t){t!==y.CONNECTSTATUSES.CONNECTED&&Dt.close()}),yt.subscribe(function(t){if("error"===t.status)return t.details&&u.showErrorNotification($.t("Brackets cannot be modified"),t.details+"");Dt._resolve(!0),Dt.close()}),f.subscribe(function(t){t||Dt.close()}),St.subscribe(),xt.subscribe(),Ot.subscribe(),dt.subscribe(),ct.subscribe(),mt.subscribe(),mt.connect(),ct.connect(),dt.connect(),P.connect(),N.connect(),O.connect(),S.connect()],this.once("beforeClose",function(){Dt._reject(),$t.forEach(function(t){return t.dispose()})}),d(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"open",this).call(this),t.abrupt("return",new Promise(function(t,e){Dt._resolve=t,Dt._reject=e}));case 65:case"end":return t.stop()}},t,this)}));return t}()}],[{key:"get",value:function(){return C||(C=new e({title:"ticket",width:450,destroyOnClose:!1,closeOnOutsideClick:!1,content:S,contentWrapTemplate:"<div>"})),C}}]),e}(v.TVPopup)},954:function(t,e){
t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 8" width="16" height="8"><path d="M0 1.475l7.396 6.04.596.485.593-.49L16 1.39 14.807 0 7.393 6.122 8.58 6.12 1.186.08z"/></svg>'},955:function(t,e,n){"use strict";var r;Object.defineProperty(e,"__esModule",{value:!0}),r=n(956),n.n(r),n.o(r,"TVPopup")&&n.d(e,"TVPopup",function(){return r.TVPopup})},956:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t){var e,n;if(t&&t.__esModule)return t;if(e={},null!=t)for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var c,a,l,h,p,f,d,b,v,_,y,m,w;Object.defineProperty(e,"__esModule",{value:!0}),e.TVPopup=void 0,c=Object.assign||function(t){var e,n,r;for(e=1;e<arguments.length;e++){n=arguments[e];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},a=function(){function t(t,e){var n,r;for(n=0;n<e.length;n++)r=e[n],r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=n(77),h=o(l),p=n(220),f=r(p),d=n(221),b=n(147),v=n(219),_=$("body"),y=$(window),m={closeOnClickAtOtherDialogs:!0,draggable:!0,scrollWrap:'<div class="tv-dialog__scroll-wrap">',scrollWrapInner:'<div class="tv-dialog__scroll-wrap-inner">',withScroll:!0},w="js-dialog__scroll-wrap",e.TVPopup=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i(this,e),t=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,c({},m,n))),t.$scrollWrap=t.$content.hasClass(w)?t.$content:t.$content.find("."+w),t.$scrollWrap.length?t.$scrollWrapInner=t.$scrollWrap.children().first():(t.$scrollWrap=t.$content.wrap($(t.options.scrollWrap)).parent(),t.$scrollWrapInner=t.$content.wrap($(t.options.scrollWrapInner)).parent()),t.$actions&&t.$scrollWrap.addClass("i-with-actions"),t.options.withScroll&&(t.scroll=new b.SidebarCustomScroll(t.$scrollWrap,t.$scrollWrapInner),t.scroll.scrolled.subscribe(null,function(){return t.trigger("scroll")})),t.$scrollWrap.css("overflow",""),t.$el.addClass("tv-dialog--popup i-closed i-hidden"),t.options.width&&t.$el.css({width:"calc(100% - 20px)","max-width":t.options.width}),t.$el.on("mousedown touchstart",t.toTop.bind(t)),t.options.closeOnOutsideClick&&(t.on("beforeOpen",function(){setTimeout(function(){t.opened&&$(document).on("click.tv-popup-"+t.id,function(e){var n=$(e.target).closest(".js-dialog")
;(t.options.closeOnClickAtOtherDialogs||0===n.length)&&t.isEventOut(e)&&t.close()})},0)}),t.on("beforeClose",function(){return $(document).off("click.tv-popup-"+t.id)})),t.on("change:zIndex",function(){t.$el.css("z-index",t.zIndex)}),t.on("destroy",function(){var e=function(){t.$el.remove()};t.opened?(t.close(),setTimeout(e,h.dur/2)):e()}),t}return u(e,t),a(e,[{key:"open",value:function(){var t=this;return this.opened?this:(this.opened=!0,this.trigger("beforeOpen",[this]),this.$el.appendTo(this.options.$wrap).removeClass("i-hidden").css(function(){var e,n,r,o,i;return t.calcHeight(),e=y.height(),n=y.width(),r=t.$el.height(),o=t.$el.width(),i=t.options.position,i||(i={top:e/2-r/2,left:n/2-o/2}),i.top>e-r&&(i.top=e-r),i.left>n-o&&(i.left=n-o),i}()),this.focus(),this.toTop(),this._doOpenAnimation().then(function(){t.opened&&(t.$el.removeClass("i-closed"),t.options.draggable&&((0,v.lazyJqueryUI)(t.$el).draggable({handle:".js-dialog__drag",cancel:"input, textarea, button, select, option, .js-dialog__no-drag, .js-dialog__close",containment:"window",cursor:"-webkit-grabbing"}),t.$el.find(".js-dialog__drag").addClass("tv-dialog__grab")),t.trigger("afterOpen",[t]))}),y.on("resize.tv-popup-"+this.id,function(){t.calcHeight(),t.fixPos()}),this)}},{key:"close",value:function(){var t=this;if(this.opened)return this.trigger("beforeClose",[this]),this.$el.addClass("i-closed"),this.opened=!1,this._doCloseAnimation().then(function(){t.opened||((0,v.lazyJqueryUI)(t.$el).draggable("instance").then(function(t){t&&t.destroy()}),t.$el.addClass("i-hidden").detach(),_.css("cursor","auto"),t.trigger("afterClose",[t]),t.options.destroyOnClose&&t.destroy())}),y.off("resize.tv-popup-"+this.id),this}},{key:"hide",value:function(){this.$el.addClass("i-hidden")}},{key:"show",value:function(){this.$el.removeClass("i-hidden")}},{key:"fixPos",value:function(){var t=this.$el[0].getBoundingClientRect(),e={};t.bottom>f.default.height-10&&(e.top=f.default.height-10-t.height,e.top<10&&(e.top=10)),t.right>f.default.width-10&&(e.left=f.default.width-10-t.width,e.left<10&&(e.left=10)),(e.top||e.left)&&this.$el.css(e)}},{key:"calcHeight",value:function(){var t,e,n=this.$el[0].getBoundingClientRect(),r=this.$scrollWrapInner[0].getBoundingClientRect(),o=this.$scrollWrap[0].getBoundingClientRect(),i=this.options.height&&this.options.height<f.default.height-20?this.options.height:f.default.height-20;this.$scrollWrap.css({height:""}).removeClass("i-scrollable"),t=this.$el[0].getBoundingClientRect(),(this.options.height||t.height>i)&&(i-=n.height-o.height,i<60&&(i=60),this.$scrollWrap.css({height:i})),this.options.withScroll&&this.scroll.resize(),e=i<r.height,e||this.$scrollWrapInner.css("top",0),this.$scrollWrap.toggleClass("i-scrollable",e),this.$actions&&this.$actions.toggleClass("tv-dialog__section--actions_with-border",e)}},{key:"updateScroll",value:function(){this.scroll&&(this.scroll.updateScroll(),this.scroll.updateScrollBar())}},{key:"scrollToStart",value:function(){this.scroll&&this.scroll.scrollToStart()}},{key:"_doOpenAnimation",value:function(){
return Promise.resolve()}},{key:"_doCloseAnimation",value:function(){return Promise.resolve()}}]),e}(d.TVDialogAbstract)}});