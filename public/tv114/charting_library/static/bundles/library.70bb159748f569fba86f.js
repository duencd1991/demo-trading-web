webpackJsonp([38],[function(t,e,i){"use strict";function n(t,e){function i(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}function o(t,e){var i,n,o={};for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(o[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(n=0,i=Object.getOwnPropertySymbols(t);n<i.length;n++)e.indexOf(i[n])<0&&(o[i[n]]=t[i[n]]);return o}function r(t,e,i,n){return new(i||(i=Promise))(function(o,r){function s(t){try{l(n.next(t))}catch(t){r(t)}}function a(t){try{l(n.throw(t))}catch(t){r(t)}}function l(t){t.done?o(t.value):new i(function(e){e(t.value)}).then(s,a)}l((n=n.apply(t,e||[])).next())})}function s(t,e){function i(t){return function(e){return n([t,e])}}function n(i){if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,r&&(s=r[2&i[0]?"return":i[0]?"throw":"next"])&&!(s=s.call(r,i[1])).done)return s;switch(r=0,s&&(i=[0,s.value]),i[0]){case 0:case 1:s=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(s=l.trys,!(s=s.length>0&&s[s.length-1])&&(6===i[0]||2===i[0])){l=0;continue}if(3===i[0]&&(!s||i[1]>s[0]&&i[1]<s[3])){l.label=i[1];break}if(6===i[0]&&l.label<s[1]){l.label=s[1],s=i;break}if(s&&l.label<s[2]){l.label=s[2],l.ops.push(i);break}s[2]&&l.ops.pop(),l.trys.pop();continue}i=e.call(t,l)}catch(t){i=[6,t],r=0}finally{o=s=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}var o,r,s,a,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a}var a,l;e.c=n,i.d(e,"a",function(){return l}),e.e=o,e.b=r,e.d=s,a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},l=Object.assign||function(t){var e,i,n,o;for(i=1,n=arguments.length;i<n;i++){e=arguments[i];for(o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t}},function(t,e,i){"use strict";(function(t){function n(t,e){a.call(this),this._linetool=t,this._pointindex=e,this._model=t._model,this._text="",this._coordinate=0,this._background="#5592C9",this._activeBackground="#0F6DBF",this._borderColor="#2E84A6",this._color="white",this._visible=!1,this._invalidated=!0,this._renderer=new l}function o(t,e){var i,r,s;if(c.call(this),this._model=t,this._properties=e,this._pointAdded=new v,this._pointChanged=new v,this._onRestoringFactoryDefaults=new v,this._onTemplateApplying=new v,this._onTemplateApplied=new v,e.visible&&e.frozen||this._properties.merge(defaults("linetool")),i=defaults("linetoolvisibilities"),e.intervalsVisibilities)for(r in i.intervalsVisibilities)this._properties.intervalsVisibilities[r]||this._properties.intervalsVisibilities.addProperty(r,i.intervalsVisibilities[r]);else this._properties.merge(i);if(this._paneViews=[],this._points=[],this._fixedPoints=[],this._timePoint=[],
this._currentPointsetId=null,this._properties.symbol||this._properties.merge({symbol:t.mainSeries().symbol()}),this._properties.interval||this._properties.merge({interval:t.mainSeries().interval()}),this._properties.addExclusion&&(this._properties.addExclusion("symbol"),this._properties.addExclusion("symbolInfo"),this._properties.addExclusion("points"),this._properties.addExclusion("interval"),this._properties.addExclusion("visible"),this._properties.addExclusion("lastUpdateTime")),this.calcIsActualSymbol(),this._properties.intervalsVisibilities.listeners().subscribe(this,o.prototype.calcIsActualSymbol),this._properties.listeners().subscribe(this,this.propertiesChanged),this._createPointsProperties(),"_tooltipFieldsHash"in this&&!this.hasOwnProperty("_tooltipFieldsHash")&&(this._tooltipFieldsHash=$.extend(!0,{},this._tooltipFieldsHash)),this.m_priceAxisViews=[],this.m_timeAxisViews=[],this.pointsCount()>0)for(s=0;s<this.pointsCount();s++)this.m_priceAxisViews.push(this.createPriceAxisView(s)),this.m_timeAxisViews.push(new n(this,s));this._properties.visible.listeners().subscribe(this,function(t){t.value()||this._model.selectedSource()!==this||this._model.setSelectedSource(null)}),this.customization=this.customization||{forcePriceAxisLabel:!1,disableSelection:!1,disableErasing:!1,disableSave:!1,showInObjectsTree:!0},this._properties.lastUpdateTime||this._properties.addProperty("lastUpdateTime",0),this._syncStateExclusions=[]}var r=i(7).Point,s=i(202).LineToolPriceAxisView,a=i(203).TimeAxisView,l=i(204).TimeAxisViewRenderer,c=i(34).DataSource,h=i(38),u=i(23),d=u.Interval,p=u.ResolutionKind,_=i(69).getServerInterval,f=i(205).AbbreviatedDateTimeFormatter,m=i(655),g=i(17),y=i(5).getLogger("Chart.LineDataSource"),v=i(8),b=i(2).propertyPages;inherit(n,a),n.prototype.setActive=function(t){this._active=t},n.prototype.update=function(){this._invalidated=!0},n.prototype.updateImpl=function(){var t,e,i;this._visible=!1,this._model.timeScale().isEmpty()||(t=this._linetool.axisPoints(),t.length<=this._pointindex||this._linetool===this._model.selectedSource()&&(this._text="",e=t[this._pointindex].index,this._coordinate=this._model.timeScale().indexToCoordinate(e),i=this._model.timeScale().indexToUserTime(e),i&&(this._text=new f(this._model.mainSeries().isDWM()).format(i)),this._visible=!0,this._invalidated=!1))},n.prototype.renderer=function(){this._invalidated&&(this.updateImpl(),this._invalidated=!1);var t={text:this._text,coordinate:this._coordinate,color:this._color,background:this._active?this._activeBackground:this._background,borderColor:this._borderColor,visible:this._visible};return this._renderer.setData(t),this._renderer},inherit(o,c),o.prototype.pointAdded=function(){return this._pointAdded},o.prototype.pointChanged=function(){return this._pointChanged},o.PointPriceProperty=function(e,i){t.call(this),this._lineSource=e,this._pointIndex=i,e.pointAdded().subscribe(this,function(t){this._pointIndex===t&&this._listeners.fire(this)}),e.pointChanged().subscribe(this,function(t){this._pointIndex===t&&this._listeners.fire(this)
})},inherit(o.PointPriceProperty,t),o.prototype.enableCurrentIntervalVisibility=function(){var t,e,i,n,o,r,s,a=d.parse(this._model.mainSeries().interval());a.isSeconds()&&(a.multiplier()<60?(this.properties().intervalsVisibilities.seconds.setValue(!0),t=Math.min(this.properties().intervalsVisibilities.secondsFrom.value(),a.multiplier()),this.properties().intervalsVisibilities.secondsFrom.setValue(t),e=Math.max(this.properties().intervalsVisibilities.secondsTo.value(),a.multiplier()),this.properties().intervalsVisibilities.secondsTo.setValue(e)):a=new d(p.Minutes,a.multiplier()/60)),a.isMinutes()&&(a.multiplier()<60?(this.properties().intervalsVisibilities.minutes.setValue(!0),t=Math.min(this.properties().intervalsVisibilities.minutesFrom.value(),a.multiplier()),this.properties().intervalsVisibilities.minutesFrom.setValue(t),e=Math.max(this.properties().intervalsVisibilities.minutesTo.value(),a.multiplier()),this.properties().intervalsVisibilities.minutesTo.setValue(e)):(i=Math.floor(a.multiplier()/60),this.properties().intervalsVisibilities.hours.setValue(!0),n=Math.min(this.properties().intervalsVisibilities.hoursFrom.value(),i),this.properties().intervalsVisibilities.hoursFrom.setValue(n),o=Math.max(this.properties().intervalsVisibilities.hoursTo.value(),i),this.properties().intervalsVisibilities.hoursTo.setValue(o))),a.isDays()&&(this.properties().intervalsVisibilities.days.setValue(!0),r=Math.min(this.properties().intervalsVisibilities.daysFrom.value(),a.multiplier()),this.properties().intervalsVisibilities.daysFrom.setValue(r),s=Math.max(this.properties().intervalsVisibilities.daysTo.value(),a.multiplier()),this.properties().intervalsVisibilities.daysTo.setValue(s)),a.isWeeks()&&this.properties().intervalsVisibilities.weeks.setValue(!0),a.isMonths()&&this.properties().intervalsVisibilities.months.setValue(!0)},o.prototype.getType=function(){return TradingView.className(this.constructor)},o.prototype.getConstructor=function(){return this._constructor||null},o.prototype.isActualSymbol=function(){return this._isActualSymbol},o.prototype.isActualInterval=function(){return this._isActualInterval},o.prototype.isSavedInChart=function(t){return!this.customization.disableSave},o.prototype.setSavingInChartEnabled=function(t){this.customization.disableSave=!t},o.prototype.showInObjectTree=function(){return this.customization.showInObjectsTree},o.prototype.setShowInObjectsTreeEnabled=function(t){this.customization.showInObjectsTree=t},o.prototype.isSelectionEnabled=function(){return!this.customization.disableSelection},o.prototype.setSelectionEnabled=function(t){this.customization.disableSelection=!t},o.prototype.visibilityKeyByInterval=function(t){var e,i=d.parse(t);return o.IntervalsVisibilities.forEach(function(t){t.kind===i.kind()&&t.from<=i.multiplier()&&t.to>=i.multiplier()&&(e=t.key)}),e},o.prototype.calcIsActualSymbol=function(){var t,e=this._properties.symbol,i=this._model.mainSeries(),n=e.value();this._isActualSymbol=i.symbolSameAsCurrent(n),this._isActualSymbol&&(t=i.symbol(),
n!==t&&(y.logWarn('Possible drawing "migrating" detected from "'+n+'" to "'+t+'"'),y.logWarn("Series symbolInfo: "+JSON.stringify(i.symbolInfo())),y.logWarn(Error().stack)),e.setValue(t)),this.calcIsActualInterval()},o.prototype.calcIsActualInterval=function(){var t,e,i,n,o,r=this._properties,s=this._model.mainSeries(),a=d.parse(s.interval()),l=r.intervalsVisibilities;this._isActualInterval=!1,a.isSeconds()&&a.multiplier()<60&&(t=l.seconds.value(),e=l.secondsFrom.value(),i=l.secondsTo.value(),this._isActualInterval=t&&a.multiplier()>=e&&a.multiplier()<=i),a.isSeconds()&&a.multiplier()>=60&&(n=Math.floor(a.multiplier()/60),t=l.minutes.value(),e=l.minutesFrom.value(),i=l.minutesTo.value(),this._isActualInterval=t&&n>=e&&n<=i),a.isMinutes()&&a.multiplier()<60&&(t=l.minutes.value(),e=l.minutesFrom.value(),i=l.minutesTo.value(),this._isActualInterval=t&&a.multiplier()>=e&&a.multiplier()<=i),a.isMinutes()&&a.multiplier()>=60&&(o=Math.floor(a.multiplier()/60),t=l.hours.value(),e=l.hoursFrom.value(),i=l.hoursTo.value(),this._isActualInterval=t&&o>=e&&o<=i),a.isHours()&&(t=l.hours.value(),e=l.hoursFrom.value(),i=l.hoursTo.value(),this._isActualInterval=t&&a.multiplier()>=e&&a.multiplier()<=i),a.isDays()&&(t=l.days.value(),e=l.daysFrom.value(),i=l.daysTo.value(),this._isActualInterval=t&&a.multiplier()>=e&&a.multiplier()<=i),a.isWeeks()&&(this._isActualInterval=l.weeks.value()),a.isMonths()&&(this._isActualInterval=l.months.value()),a.isRange()&&(this._isActualInterval=l.ranges.value()),this._isActualInterval||this._model.selectedSource()!==this||this._model.setSelectedSource(null)},o.PointPriceProperty.prototype.value=function(){var t=this._lineSource.points()[this._pointIndex].price,e=this._lineSource.ownerSource().formatter(),i=e.parse(e.format(t));return i.price?i.price:i.value},o.PointPriceProperty.prototype.setValue=function(t){var e=this._lineSource.points()[this._pointIndex];e.price=parseFloat(t),this._lineSource.setPoint(this._pointIndex,e),this._lineSource._model.updateSource(this._lineSource),this._listeners.fire(this),this._lineSource.endChanging(!0),this._lineSource._syncMultichartState(),this._lineSource._properties.lastUpdateTime.setValue((new Date).valueOf())},o.PointIndexProperty=function(e,i){t.call(this),this._lineSource=e,this._pointIndex=i},inherit(o.PointIndexProperty,t),o.PointIndexProperty.prototype.value=function(){return this._lineSource.points()[this._pointIndex].index},o.PointIndexProperty.prototype.setValue=function(t){var e=this._lineSource.points()[this._pointIndex];e.index=t,this._lineSource.setPoint(this._pointIndex,e),this._lineSource._model.updateSource(this._lineSource),this._listeners.fire(this),this._lineSource.endChanging(!0),this._lineSource._syncMultichartState(),this._lineSource._properties.lastUpdateTime.setValue((new Date).valueOf())},o.prototype._syncMultichartState=function(){var t={points:this._timePoint,interval:this._model.mainSeries().interval()};this.linkKey&&!this.properties().singleChartOnly&&h.finishChangingLineTool({model:this._model,linkKey:this.linkKey,
symbol:this._model.mainSeries().symbol(),finalState:t})},o.prototype._createPointProperty=function(t){var e,i=this._properties.points;i.addProperty(t),e=i[t],e.addChild("price",new o.PointPriceProperty(this,t)),e.addChild("bar",new o.PointIndexProperty(this,t))},o.prototype._createPointsProperties=function(){this._properties.addProperty("points");for(var t=0;t<this.pointsCount();t++)this._createPointProperty(t)},o.prototype.priceScale=function(){return this._ownerSource?this._ownerSource.m_priceScale:null},o.prototype.symbol=function(){return this._properties.symbol.value()},o.prototype.properties=function(){return this._properties},o.prototype.isSavedInStudyTemplates=function(){return!1},o.prototype.state=function(t){var e=TradingView.className(this.constructor),i={type:e,id:this.id(),state:this.properties().state(),points:this._timePoint,zorder:this.zorder(),linkKey:this.linkKey};return i.state._isActualInterval=this.isActualInterval(),delete i.state.points,t&&(i.indexes=this._points),this.ownerSource()&&(i.ownerSource=this.ownerSource().id()),this.isFixed()&&(i.positionPercents=this._positionPercents||this.calcPositionPercents()),"version"in this&&1!==this.version&&(i.version=this.version),this.hasAlert.value()&&(i.alertId=this._alertId),i},o.prototype.template=function(){var t=this.properties().state();return delete t.points,delete t.symbol,delete t.symbolInfo,t},o.prototype.applyTemplate=function(t){delete t.symbolInfo,this._onTemplateApplying.fire(t);var e=this.properties();e.merge(t),e.saveDefaults(),this.propertiesChanged(),this.calcIsActualSymbol(),this.updateAllViews(),this.model().invalidate(new g(g.LIGHT_UPDATE)),this._onTemplateApplied.fire()},o.prototype.restoreFactoryDefaults=function(){this.properties().restoreFactoryDefaults(),this._onRestoringFactoryDefaults.fire(),this.model().updateSource(this)},o.prototype.clearData=function(){this._points=[]},o.prototype.currentPointsetId=function(){return"pointset_"+this._currentPointsetId},o.prototype.stop=function(){this.clearServerPoints(),this.hasAlert.value()&&TradingView.alertsDispatcher&&TradingView.alertsDispatcher.deleteAlert(this._alertId)},o.prototype.isStarted=function(){return null!==this._currentPointsetId},o.prototype.restart=function(){this.isFixed()||(this._currentPointsetId=null,this.createServerPoints())},o.prototype.tryCreateServerPoints=function(){this.isFixed()||null===this._currentPointsetId&&this.createServerPoints()},o.prototype.normalizePoint=function(t){var e=this._model.timeScale().normalizeBarIndex(t.index);return e.price=t.price,e},o.prototype.normalizePoints=function(){var t,e;for(this._timePoint=[],t=0;t<this._points.length;t++){if(e=this._model.timeScale().normalizeBarIndex(this._points[t].index),!e.time_t){this._timePoint=[];break}e.price=this._points[t].price,this._timePoint.push(e)}},o.prototype.denormalizeTimePoints=function(){var t,e,i=[];for(t=0;t<this._timePoint.length;t++){if(void 0===(e=this._model.timeScale().denormalizeTimePoint(this._timePoint[t]))){i=[];break}i.push({index:e,price:this._timePoint[t].price})}
i.length>0&&(this._points=i)},o.prototype.restorePoints=function(t,e,i){this._timePoint=t,this._points=e,i||this.denormalizeTimePoints()},o.prototype.restoreExternalPoints=function(t){if(this.properties().interval.setValue(t.interval),this._timePoint=t.points,this.denormalizeTimePoints(),!this.isActualSymbol())return void this.clearServerPoints();this.createServerPoints()},o.prototype.restorePositionPercents=function(t){this._positionPercents=t},o.prototype.updateAllViewsAndRedraw=function(){this.updateAllViews(),this._model.updateSource(this)},o.prototype.propertiesChanged=function(){if(this.calcIsActualInterval(),this.updateAllViewsAndRedraw(),this.linkKey){var t=this.properties().state(this._syncStateExclusions);delete t.interval,h.changeLineStyle({linkKey:this.linkKey,state:t,model:this._model})}},o.prototype.points=function(){var t,e,i=[];for(t=0;t<this._points.length;t++)e=this._points[t],i.push({index:e.index,price:e.price,time:e.time});return this._lastPoint&&i.push({index:this._lastPoint.index,price:this._lastPoint.price,time:this._lastPoint.time}),this._currentMovingPoint&&this._startMovingPoint&&this.correctPoints(i),i},o.prototype.axisPoints=function(){return this.points()},o.prototype.fixedPoints=function(){var t,e,i,n,o=[];if(this._positionPercents&&!this.priceScale().isEmpty())for(t=0;t<this._positionPercents.length;t++)e=this._positionPercents[t],i=this._model.timeScale().width()*e.x,n=this.priceScale().height()*e.y,o.push(new r(i,n));else for(t=0;t<this._fixedPoints.length;t++)o.push(this._fixedPoints[t].clone());return this._lastPoint&&o.push(this._lastPoint.clone()),this._currentMovingPoint&&this._startMovingPoint&&this.correctFixedPoints(o),o},o.prototype._preparePoint=function(t,e){var i=t;return e&&e.shift&&this.points().length>=2&&this._properties.snapTo45Degrees&&this._snapPoint45Degree(i,this.points()[this.points().length-2]),i},o.prototype.addPoint=function(t,e,i){var n=this._preparePoint(t,e);return this._addPointIntenal(n,e,i)},o.prototype._addPointIntenal=function(t,e,i){this._points.push(t);var n=this._points.length===this.pointsCount();return n?(this._lastPoint=null,i||(this.normalizePoints(),this.createServerPoints())):this._lastPoint=t,this._pointAdded.fire(this._points.length-1),n},o.prototype.addFixedPoint=function(t){this._fixedPoints.push(t);var e=this._fixedPoints.length===this.pointsCount();return e&&this.calcPositionPercents(),e},o.prototype.calcPositionPercents=function(){var t,e,i,n;if(!this.priceScale()||this.priceScale().isEmpty())return[];for(this._positionPercents=[],t=0;t<this._fixedPoints.length;t++)e=this._fixedPoints[0],i=e.x/this._model.timeScale().width(),n=e.y/this.priceScale().height(),this._positionPercents.push({x:i,y:n});return this._positionPercents},o.prototype.calcMiddlePoint=function(t,e){return new r((t.x+e.x)/2,(t.y+e.y)/2)},o.prototype.getPointByPosition=function(t,e,i,n){return[e,i,n][t]},o.prototype.restoreFixedPoints=function(){this._fixedPoints=this.fixedPoints()},o.prototype.onData=function(t){
t.params.customId===this.currentPointsetId()&&this._onPointsetUpdated(t.params.plots)},o.prototype._onPointsetUpdated=function(t){var e,i,n,o,r,s;if(0!==t.length){for(e=0;e<t.length;e++)i=t[e],n=this._timePoint[i.index],o=i.value[0],r=new Date(1e3*i.value[1]),s={index:o,time:r,price:n.price},this._points.length<=i.index?(this._points.push(s),this._pointAdded.fire(this._points.length-1)):(this._points[i.index]=s,this._pointChanged.fire(i.index));this.checkAlert&&this.checkAlert(),this.updateAllViewsAndRedraw()}},o.prototype.startChanging=function(t,e){t<this.m_priceAxisViews.length&&this.m_priceAxisViews[t].setActive(!0),t<this.m_timeAxisViews.length&&this.m_timeAxisViews[t].setActive(!0),this._properties.lastUpdateTime.setValue((new Date).valueOf())},o.prototype.setPoint=function(t,e,i){if(i&&i.shift&&this._properties.snapTo45Degrees){var n=0===t?1:t-1;this._snapPoint45Degree(e,this.points()[n])}this._points[t]=e,this._pointChanged.fire(t),this.normalizePoints()},o.prototype.startMoving=function(t){this.isFixed()&&this.restoreFixedPoints(),this._startMovingPoint=t,this._properties.lastUpdateTime.setValue((new Date).valueOf())},o.prototype.move=function(t){this._currentMovingPoint=t,this.updateAllViews()},o.prototype.correctPoints=function(t){var e,i,n=this._currentMovingPoint.index-this._startMovingPoint.index,o=this._currentMovingPoint.price-this._startMovingPoint.price;if(0===n&&0===o)return!1;for(e=0;e<t.length;e++)i=t[e],i.index+=n,i.price+=o,t[e]=i;return!0},o.prototype.correctFixedPoints=function(t){var e,i=this._currentMovingPoint.subtract(this._startMovingPoint);for(e=0;e<t.length;e++)t[e]=t[e].add(i)},o.prototype.endMoving=function(t){var e,i,n;if(this._properties.interval.setValue(this._model.mainSeries().interval()),e=!1,i=!1,this._currentMovingPoint&&this._startMovingPoint){if(e=this._currentMovingPoint.index!==this._startMovingPoint.index,i=this._currentMovingPoint.price!==this._startMovingPoint.price,this.isFixed())this.correctFixedPoints(this._fixedPoints);else if(this.correctPoints(this._points))for(n=0;n<this._points.length;n++)this._pointChanged.fire(n);this._startMovingPoint=null,this._currentMovingPoint=null}if(this.isFixed())return this.calcPositionPercents(),void this.updateAllViews();this.normalizePoints(),this.updateAllViews(),e&&!t&&this.createServerPoints(),(i||e)&&this.synchronizeAlert(!this._alertUndoMode)},o.prototype.endChanging=function(t,e){var i;for(this._properties.interval.setValue(this._model.mainSeries().interval()),e||(this.normalizePoints(),this.createServerPoints()),i=0;i<this.m_priceAxisViews.length;i++)this.m_priceAxisViews[i].setActive(!1);for(i=0;i<this.m_timeAxisViews.length;i++)this.m_timeAxisViews[i].setActive(!1);this.synchronizeAlert(!t)},o.prototype.paneViews=function(t){var e,i;if(this.isSourceHidden())return null;for(e=[],i=this._paneViews.length-1;i>=0;--i)e.push(this._paneViews[i]);return e},o.prototype._setPaneViews=function(t){this._paneViews=t,this._model.invalidate(new g(g.LIGHT_UPDATE))},o.prototype.dataWindowView=function(){return null},
o.prototype.statusView=function(){return null},o.prototype.isSourceHidden=function(){return!this._properties.visible.value()||h.hideAllDrawings().value()&&this.canBeHidden()||!this._isActualInterval||!this._isActualSymbol},o.prototype.priceAxisViews=function(t,e){var i,n,o;return this.isSourceHidden()?null:-1!==t.dataSources().indexOf(this)&&e===this.priceScale()?this._model.lineBeingEdited()===this?(i=this._model.linePointBeingEdited(),i<this.m_priceAxisViews.length?(n=this.m_priceAxisViews.slice(),o=n[i],n.splice(i,1),n.push(o),n):this.m_priceAxisViews):this.m_priceAxisViews:null},o.prototype.timeAxisViews=function(){var t,e,i;return this.isSourceHidden()?null:this._model.lineBeingEdited()===this?(t=this._model.linePointBeingEdited(),t<this.m_timeAxisViews.length?(e=this.m_timeAxisViews.slice(),i=e[t],e.splice(t,1),e.push(i),e):this.m_timeAxisViews):this.m_timeAxisViews},o.prototype.updateAllViews=function(){var t,e,i;if(!this._isActualSymbol)return null;if(!this._properties.visible.value())return null;if(null!==(t=this.paneViews()))for(e=t,i=0;i<e.length;i++)e[i].update();for(e=this.m_priceAxisViews,i=0;i<e.length;i++)e[i].update();for(e=this.m_timeAxisViews,i=0;i<e.length;i++)e[i].update()},o.prototype.setLastPoint=function(t,e){this._lastPoint=this._preparePoint(t,e),this.updateAllViews()},o.prototype.setLastFixedPoint=function(t){this._lastFixedPoint=t,this.updateAllViews()},o.prototype.title=function(){return"Line Tool"},o.prototype.name=function(){return"Line Tool"},o._pointSetId=1,o.prototype.start=function(){this.createServerPoints()},o.prototype.createServerPoints=function(){var t,e,i,n,r,s;if(!this._recursiveGuard&&this._isActualSymbol&&this._model.chartApi().connected()&&(this.clearServerPoints(),!this._model.timeScale().isEmpty()&&(0===this._timePoint.length&&this.normalizePoints(),0!==this._timePoint.length))){for(this._currentPointsetId=++o._pointSetId,t=this._model.mainSeries().symbolId(),e=[],i=0;i<this._timePoint.length;i++)n=this._timePoint[i],e.push([n.time_t,n.offset]);r=_(this.properties().interval.value()),s=this,this._model.chartApi().createPointset(this.currentPointsetId(),"turnaround",t,r,e,function(t){s.onData(t)})}},o.prototype.clearServerPoints=function(){null!==this._currentPointsetId&&(this._model.chartApi().removePointset(this.currentPointsetId()),this._currentPointsetId=null)},o.prototype.isBeingEdited=function(){return this===this._model.lineBeingEdited()||this===this._model.sourceBeingMoved},o.prototype.isFixed=function(){return this.properties().locked&&this.properties().locked.value()},o.prototype.isLocked=o.prototype.isFrozen=function(){return this.properties().frozen&&this.properties().frozen.value()},o.prototype._tooltipFieldsHash={},o.prototype._tooltipFieldsOrder=["time","price","index","time0","price0","time1","price1","time2","price2","time3","price3","time4","price4","distance","term","pointsPerBar"],o.prototype._tooltipFieldsOrdered=null,o.prototype._formatTooltip=function(){
return null===this._tooltipFieldsOrdered&&(this._tooltipFieldsOrdered=new m(this._tooltipFieldsHash,m.byOrder(this._tooltipFieldsOrder))),this._tooltipFieldsOrdered.array.filter(function(t){return null!==t.value&&""!==t.value}).map(function(t){return"<span>"+t.title+":</span> "+t.value}).join("<br />")},o.prototype.pointToScreenPoint=function(t){var e,i,n,o,s,a=this._model.timeScale(),l=this.priceScale(),c=this.ownerSource().firstValue();return!l||l.isEmpty()||a.isEmpty()||null==c?[new r(0,0),new r(0,0)]:(e=a.indexToCoordinate(t.index,!0),i=t.price,n=l.priceToCoordinate(i,c,!0),o=new r(e,n),e=a.indexToCoordinate(t.index,!1),n=l.priceToCoordinate(i,c,!1),s=new r(e,n),[o,s])},o.prototype.screenPointToPoint=function(t){var e,i=this._model.timeScale(),n=this.priceScale(),o=i.coordinateToIndex(t.x),r=this.ownerSource().firstValue();if(null!==r&&isFinite(r))return e=n.coordinateToPrice(t.y,r),{price:e,index:o}},o.prototype.tags=function(){return[this._constructor]},o.prototype._snapPoint45Degree=function(t,e,i){var n,o,r,s,a,l,c,h,u,d=this._model.timeScale(),p=d.indexToCoordinate(e.index),_=d.indexToCoordinate(t.index)-p,f=this.m_priceScale,m=e.price,g=t.price,y=this.ownerSource().firstValue(),v=f.priceToCoordinate(m,y),b=f.priceToCoordinate(g,y)-v,S=Math.round(Math.atan2(_,b)/Math.PI*4);2===Math.abs(S)?i||(t.price=m):0===Math.abs(S)||4===Math.abs(S)?i||(t.index=e.index):0===Math.abs(S)||4===Math.abs(S)?i||(t.index=e.index):(n=Math.sqrt(_*_+b*b),o=_<0?-1:1,r=b<0?-1:1,s=Math.max(Math.abs(b),Math.abs(_)),a=s*Math.sqrt(2),l=a/n,s/=l,c=Math.round(d.coordinateToIndex(p+s*o)),h=Math.abs(d.indexToCoordinate(c)-p),u=f.coordinateToPrice(v+h*r,y),t.index=c,t.price=u)},o.prototype.createPriceAxisView=function(t){return new s(this,{pointIndex:t})},o.prototype.version=1,o.prototype.alertId=function(){return this._alertId},o.prototype.setAlert=function(t,e){},o.prototype.flushAlert=function(){delete this._alertId,delete this._alert,this.hasAlert.setValue(!1),window.saver&&window.saver.saveChartSilently(null,!1)},o.prototype._processAlertHanders=function(t){var e,i,n,o=this;("unsubscribe"!==(t="subscribe"===t?"subscribe":"unsubscribe")||o._alertCallbacks)&&(i="subscribe"===t?"on":"off",e=o.properties(),n=o._alertCallbacks||{flush:o.flushAlert.bind(o),hovered:function(t,e){e?o._model.setHoveredSource(o):o._model.hoveredSource()===o&&o._model.setHoveredSource(null)},selected:function(t,e){e&&o._model.setSelectedSource(o)},synchronizeSilently:function(t){o.synchronizeAlert(!1)}},o._alertCallbacks||(o._alertCallbacks=n),o.getAlert().done(function(r){r&&(r[i]("destroy",n.flush),r[i]("change:hovered",n.hovered),r[i]("change:selected",n.selected),e.extendLeft&&e.extendLeft[t](o,n.synchronizeSilently),e.extendRight&&e.extendRight[t](o,n.synchronizeSilently))}))},o.prototype.editAlert=function(){},o.prototype.getAlert=function(t){var e,i=this;return t=t||{},e=$.Deferred(),TradingView.alertsDispatcher?TradingView.alertsDispatcher.requestAlert(i._alertId,{success:e.resolve.bind(e),error:e.reject.bind(e),fromCache:t.fromCache
}):y.logError("[Alerts] Can't get alert without alerts dispatcher"),e.promise()},o.prototype.synchronizeAlert=function(t){var e=this;e.hasAlert.value()&&setTimeout(function(){function i(){e._alertUndoMode=!0,s.undoToCheckpoint(e._undoCheckpointAlert),setTimeout(function(){e._alertUndoMode=!1,e.localAndServerAlersMismatch=!1},0)}function n(t){var i=t.get("description")!==t.defaultDescription(),n=t.get("extra"),o=n.alertSeries(),r=e._model.mainSeries().stateForAlert();"MainSeries"===o.type&&r.actualSymbol===o.actualSymbol&&(n.mainSeries(r),n.alertSeries(r)),t.set("resolution",e.stateForAlert().interval),n.drawing(e),i||t.setDefaultDescription(),e.localAndServerAlersMismatch=!0}function o(t){TradingView.alertsDispatcher.restartAlert(t,{success:function(){e.localAndServerAlersMismatch=!1},error:i,complete:function(){delete e._undoCheckpointAlert}})}var r,s=e._getUndoHistory();e._undoCheckpointAlert||e._alertUndoMode||(r=s.undoStack().pop(),e._undoCheckpointAlert=s.createUndoCheckpoint(),r&&s.undoStack().push(r)),e.getAlert().done(function(e){n(e),t&&o(e)}).fail(i)},0)},o.prototype._getUndoHistory=function(){return this._model._undoModel.undoHistory},o.prototype.stateForAlert=function(){var t,e;if(this.canHasAlert())return t=this.state(),t.id=this.idForAlert(),t.uniqueId=this.idForAlert(),t.title=this.title(),t.interval=this._model.mainSeries().interval(),e=this._getAlertPlots(),e&&(t.plots=e),t},o.prototype._getAlertPlots=function(){return null},o.prototype._linePointsToAlertPlot=function(t,e,i,n){if(2!==t.length)return y.logError("[Drawing Alert] Wrong points"),null;var o=this._model.timeScale();return!o||o.isEmpty()?null:{type:"LinePlot",title:e||this.title(),timestamp:o.indexToTimePoint(0),offset1:t[0].index,offset2:t[1].index,price1:t[0].price,price2:t[1].price,extendBackward:i||!1,extendForward:n||!1}},o.prototype.getAlertIsActive=function(t){this.getAlert({fromCache:!0}).done(function(e){t(!!e&&e.get("active"))}).fail(function(){t(!1)})},o.prototype.geometry=function(){var t=this,e=function(e){var i=e.x/t._model.timeScale().width(),n=e.y/t.priceScale().height();return new r(i,n)};return this.points().map(function(i){var n=t.pointToScreenPoint(i)[0];return e(n)})},o.prototype.onlyYMoving=function(){return!1},o.prototype.model=function(){return this._model},o.prototype.isForcedDrawPriceAxisLabel=function(){return this.customization.forcePriceAxisLabel},o.prototype.getInputsPropertyPage=function(){return b.LineToolInputsPropertyPage},o.prototype.getVisibilitiesPropertyPage=function(){return b.LineToolVisibilitiesPropertyPage},o.prototype.getSourceIcon=function(){return{type:"loadSvg",svgId:"linetool."+this.getType()}},o.prototype.destroy=function(){this.stop()},e.LineToolPriceAxisView=s,e.LineDataSource=o}).call(e,i(16))},function(t,e,i){"use strict";function n(t,e){i.e(7).then(function(e){o.ChartStylesPropertyPage=i(830),o.LineToolABCDPatternStylesPropertyPage=i(831),o.LineToolArcStylesPropertyPage=i(832),o.LineToolArrowMarkStylesPropertyPage=i(833),o.LineToolBalloonStylesPropertyPage=i(834),
o.LineToolBarsPatternStylesPropertyPage=i(835).LineToolBarsPatternStylesPropertyPage,o.LineToolBezierStylesPropertyPage=i(836),o.LineToolBrushStylesPropertyPage=i(837),o.LineToolCalloutStylesPropertyPage=i(838),o.LineToolCircleLinesStylesPropertyPage=i(839),o.LineToolDateAndPriceRangeStylesPropertyPage=i(840),o.LineToolDateRangeStylesPropertyPage=i(841),o.LineToolDisjointAngleStylesPropertyPage=i(842),o.LineToolElliottStylesPropertyPage=i(843),o.LineToolEllipseStylesPropertyPage=i(844),o.LineToolFibChannelStylesPropertyPage=i(845),o.LineToolFibCirclesStylesPropertyPage=i(846),o.LineToolFibRetracementStylesPropertyPage=i(814),o.LineToolFibSpeedResistanceArcsStylesPropertyPage=i(847),o.LineToolFibSpeedResistanceFanStylesPropertyPage=i(848),o.LineToolFibSpiralStylesPropertyPage=i(849),o.LineToolFibTimeZoneStylesPropertyPage=i(850),o.LineToolFibWedgeStylesPropertyPage=i(851),o.LineToolFlatBottomStylesPropertyPage=i(852),o.LineToolGannComplexStylesPropertyPage=i(853).LineToolGannComplexStylesPropertyPage,o.LineToolGannFixedStylesPropertyPage=i(854).LineToolGannFixedStylesPropertyPage,o.LineToolGannFanStylesPropertyPage=i(855),o.LineToolGannSquareStylesPropertyPage=i(856),o.LineToolGhostFeedInputsPropertyPage=i(413).LineToolGhostFeedInputsPropertyPage,o.LineToolGhostFeedStylesPropertyPage=i(413).LineToolGhostFeedStylesPropertyPage,o.LineToolHorzLineInputsPropertyPage=i(414).LineToolHorzLineInputsPropertyPage,o.LineToolHorzLineStylesPropertyPage=i(414).LineToolHorzLineStylesPropertyPage,o.LineToolIconStylesPropertyPage=i(857),o.LineToolInputsPropertyPage=i(811),o.LineToolLineTool5PointsPatternStylesPropertyPage=i(858),o.LineToolNotePropertyPage=i(859),o.LineToolParallelChannelStylesPropertyPage=i(860),o.LineToolPitchfanStylesPropertyPage=i(861),o.LineToolPitchforkStylesPropertyPage=i(862),o.LineToolPolylineStylesPropertyPage=i(863),o.LineToolPredictionStylesPropertyPage=i(864),o.LineToolPriceLabelStylesPropertyPage=i(865),o.LineToolProjectionStylesPropertyPage=i(866),o.LineToolRectangleStylesPropertyPage=i(867),o.LineToolRiskRewardInputsPropertyPage=i(415).LineToolRiskRewardInputsPropertyPage,o.LineToolRiskRewardStylesPropertyPage=i(415).LineToolRiskRewardStylesPropertyPage,o.LineToolTextStylesPropertyPage=i(868),o.LineToolTimeCyclesPropertyPage=i(869),o.LineToolTrendAngleInputsPropertyPage=i(416).LineToolTrendAngleInputsPropertyPage,o.LineToolTrendAngleStylesPropertyPage=i(416).LineToolTrendAngleStylesPropertyPage,o.LineToolTrendBasedFibExtensionStylesPropertyPage=i(870),o.LineToolTrendBasedFibTimeStylesPropertyPage=i(871),o.LineToolTrendLineStylesPropertyPage=i(417),o.LineToolInfoLineStylesPropertyPage=i(417),o.LineToolTrianglePatternStylesPropertyPage=i(872),o.LineToolTriangleStylesPropertyPage=i(873),o.LineToolVertLineInputsPropertyPage=i(418).LineToolVertLineInputsPropertyPage,o.LineToolVertLineStylesPropertyPage=i(418).LineToolVertLineStylesPropertyPage,o.LineToolCrossLineInputsPropertyPage=i(419).LineToolCrossLineInputsPropertyPage,o.LineToolCrossLineStylesPropertyPage=i(419).LineToolCrossLineStylesPropertyPage,
o.LineToolVisibilitiesPropertyPage=i(874),o.StudyCompareInputsPropertyPage=i(875),o.StudyDisplayPropertyPage=i(376).StudyDisplayPropertyPage,o.StudyInputsPropertyPage=i(812).StudyInputsPropertyPage,o.StudyLineDataSourcePropertyPage=i(876),o.StudyOverlayStylesPropertyPage=i(877),o.StudyPivotPointsStandardStylesPropertyPage=i(878),o.StudyStylesPropertyPage=i(376).StudyStylesPropertyPage,s.logNormal("Property pages loaded"),t()}.bind(null,i)).catch(e)}var o,r,s=i(5).getLogger("Chart.DataSourcePropertyPages"),a=i(161).retries;e.propertyPages={},o=e.propertyPages,r=null,e.loadPropertyPages=function(){return null!==r?r:(s.logNormal("Start loading property pages"),r=a(function(){return new Promise(n)},2))}},function(t,e,i){"use strict";function n(t,e,i,n){var o=t?s.defaults:s.factoryDefaults,r=e.startsWith("study_")?TradingView.clone(o("study")):e.startsWith("linetool")?TradingView.clone(o("linetoolvisibilities")):{},a=TradingView.clone(o(e,n));return e.startsWith("study_")&&a.inputs&&delete a.inputs.symbol,"linetoolicon"===e&&t&&(a.icon=s.defaults(e).icon),i.forEach(function(t){delete a[t]}),TradingView.merge(r,a),r}function o(t,e,i,r){void 0===r&&(r=!0),this._defaultName=t;var s;i?s=e:(s=n(r,t,[],null),e&&TradingView.merge(s,e)),a.call(this,s),this._defaultName=t,this._useUserPreferences=r,this.listeners().subscribe(this,o.prototype.onPropertyChanged),this._exclusions=[]}function r(t){o._saveDefaults=t}var s=i(159),a=i(16);inherit(o,a),o._saveDefaults=!1,o.prototype.addExclusion=function(t){this._exclusions.indexOf(t)<0&&this._exclusions.push(t)},o.prototype.restoreFactoryDefaults=function(){var t=n(!1,this._defaultName,this._exclusions,null);this.mergeAndFire(t),this._defaultName.startsWith("study_")||this.saveDefaults(),this.listeners().fire(this)},o.prototype.onPropertyChanged=function(){o._saveDefaults&&!this._defaultName.startsWith("study_")&&this.saveDefaults()},o.prototype.saveDefaults=function(){this._useUserPreferences&&s.saveDefaults(this._defaultName,this.state(this._exclusions))},o.prototype.restoreDefaults=function(t){var e=n(this._useUserPreferences,this._defaultName,this._exclusions,t);this.merge(e),this.listeners().fire(this)},o.prototype.clone=function(t){return new o(this._defaultName,this.state(),t&&t.replaceByState,this._useUserPreferences)},e.DefaultProperty=o,e.saveDefaultProperties=r},function(t,e,i){var n=i(534),o={},r={},s={},a={init:function(){var t,e,i,l;Object.keys(n).forEach(function(i){t=n[i],e=t.subsets,Array.isArray(e)?e.forEach(function(t){o[t]=1}):e&&Object.keys(e).forEach(function(t){o[t]=1}),o[i]=1}),i=Object.keys(o),i.forEach(function(t){i.forEach(function(i){if(void 0!==(l=n[i])){if(!(e=l.subsets))return;r.hasOwnProperty(t)||(r[t]=[]),Array.isArray(e)&&~e.indexOf(t)?r[t].push(i):t in e&&r[t].push(i)}})}),"undefined"!=typeof __initialDisabledFeaturesets&&__initialDisabledFeaturesets&&__initialDisabledFeaturesets.forEach(function(t){a.disable(t)}),"undefined"!=typeof __initialEnabledFeaturesets&&__initialEnabledFeaturesets&&__initialEnabledFeaturesets.forEach(function(t){a.enable(t)}),
"undefined"!=typeof window&&(window.Featuresets=a),this.meta={_uniqueSetsNames:o,_setsReverseDependencies:r,_setsStates:s}},enabled:function(t){var e=function(t){var i,n,o=r.hasOwnProperty(t)?r[t]:[];if(!1===s[t])return!1;for(i=s[t],n=0;n<o.length;++n)i|=e(o[n]);return i};return!!e(t)},enable:function(t){s[t]=!0},disable:function(t){s[t]=!1},setEnabled:function(t,e){s[t]=!!e},_uniqueSets:function(){return Object.keys(o)}};a.init(),t.exports=a},function(t,e,i){"use strict";function n(){return x}function o(){return k}function r(t){t=Math.max(m.ERROR,Math.min(m.DEBUG,t)),x=t,d()}function s(t,e){var i,n=0,o=0;for(i=t.length-1;i>=1&&(n+=8*(1+encodeURIComponent(t[i]).length),!(i-1>0&&(o=8*(1+encodeURIComponent(t[i-1]).length),n+o>e)));i--);return t.slice(i)}function a(t,e,i,n,o){var r={id:g,message:e+"",subSystemId:n,timestamp:+t};g+=1,i.push(r),void 0!==o&&i.length>o&&i.splice(0,1)}function l(t){var e,i=S.reduce(function(t,e){return t.concat(e)},[]);return i.sort(function(t,e){return t.id-e.id}),"number"==typeof t&&(i=i.slice(-t)),e=i.map(function(t){return new Date(t.timestamp).toISOString()+":"+t.subSystemId+":"+t.message.replace(/"/g,"'")}),s(e,y)}function c(t,e,i,n){var r,s;if((e!==P||n.id!==T)&&(r=new Date,t<=m.NORMAL&&a(r,e,i,n.id,n.maxCount),t<=x&&(!n.highRate||o())&&(!w||n.id.match(w)))){switch(s=r.toISOString()+":"+n.id+":"+e,t){case m.DEBUG:console.debug(s);break;case m.INFO:case m.NORMAL:n.color?console.log("%c"+s,"color: "+n.color):console.log(s);break;case m.WARNING:console.warn(s);break;case m.ERROR:console.error(s)}P=e,T=n.id,C&&clearTimeout(C),C=setTimeout(function(){P=null,T=null,C=NaN},1e3)}}function h(t,e){function i(t){return function(e){return c(t,e,n,o)}}var n,o;return void 0===e&&(e={}),n=[],S.push(n),o=Object.assign(e,{id:t}),{logDebug:i(m.DEBUG),logError:i(m.ERROR),logInfo:i(m.INFO),logNormal:i(m.NORMAL),logWarn:i(m.WARNING)}}function u(){k=!!f&&"true"===localStorage.getItem(b);var t=parseInt(f?localStorage.getItem(v)||"":"");Number.isNaN(t)&&(t=m.WARNING),r(t),L.logNormal("Init with settings - level: "+x+", high-rate: "+k)}function d(){try{f&&(localStorage.setItem(b,k+""),localStorage.setItem(v,x+""))}catch(t){L.logWarn("Cannot save logger state (level: "+x+", high-rate: "+k+") to localStorage: "+t.message)}}function p(){_.performance&&_.performance.now?L.logNormal("Sync logger and perf times, now is "+_.performance.now()):L.logWarn("Perf time is not available")}var _,f,m,g,y,v,b,S,w,P,T,C,x,k,L,I,A;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"LOGLEVEL",function(){return m}),e.getLogLevel=n,e.isHighRateEnabled=o,e.setLogLevel=r,e.getLogHistory=l,e.getLogger=h,i.d(e,"loggingOn",function(){return I}),i.d(e,"loggingOff",function(){return A}),_="undefined"!=typeof window?window:{},f=!1;try{localStorage.getItem(""),f=!0}catch(t){}!function(t){t[t.ERROR=1]="ERROR",t[t.WARNING=2]="WARNING",t[t.INFO=3]="INFO",t[t.NORMAL=4]="NORMAL",t[t.DEBUG=5]="DEBUG"}(m||(m={})),g=0,y=75497472,v="tv.logger.loglevel",b="tv.logger.logHighRate",S=[],w=null,P=null,T=null,C=NaN,x=m.WARNING,k=!1,L=h("logger"),
I=_.lon=function(t,e){r(m.DEBUG),L.logNormal("Debug logging enabled"),k=!!t,w=e||null,d()},A=_.loff=function(){r(m.INFO),L.logInfo("Debug logging disabled")},u(),p()},function(t,e,i){"use strict";function n(t,e){if(!t)throw Error("Assertion failed"+(e?": "+e:""))}function o(t){if(void 0===t)throw Error("Value is undefined");return t}function r(t){if(null===t)throw Error("Value is null");return t}function s(t){return r(o(t))}Object.defineProperty(e,"__esModule",{value:!0}),e.assert=n,e.ensureDefined=o,e.ensureNotNull=r,e.ensure=s},function(t,e,i){"use strict";function n(t,e){return new h(t,e)}function o(t,e){return t.x===e.x&&t.y===e.y}function r(t,e,i){if(0===t&&0===e)throw Error("A and B can not be both equal to zero.");return{A:t,B:e,C:i}}function s(t,e){var i,n,s;if(o(t,e))throw Error("Points should be distinct");return i=t.y-e.y,n=e.x-t.x,s=t.x*e.y-e.x*t.y,r(i,n,s)}function a(t,e){if(o(t,e))throw Error("Points of a segment should be distinct");return[t,e]}function l(t,e){return{edge:t,isPositive:e}}function c(t,e){return l(t,t.A*e.x+t.B*e.y+t.C>0)}Object.defineProperty(e,"__esModule",{value:!0});var h=function(){function t(t,e){this.x=t,this.y=e}return t.prototype.add=function(e){return new t(this.x+e.x,this.y+e.y)},t.prototype.addScaled=function(e,i){return new t(this.x+i*e.x,this.y+i*e.y)},t.prototype.subtract=function(e){return new t(this.x-e.x,this.y-e.y)},t.prototype.dotProduct=function(t){return this.x*t.x+this.y*t.y},t.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},t.prototype.scaled=function(e){return new t(this.x*e,this.y*e)},t.prototype.normalized=function(){return this.scaled(1/this.length())},t.prototype.transposed=function(){return new t(-this.y,this.x)},t.prototype.clone=function(){return new t(this.x,this.y)},t}();e.Point=h,e.point=n,e.equalPoints=o,e.line=r,e.lineThroughPoints=s,e.lineSegment=a,e.halfplane=l,e.halfplaneThroughPoint=c},function(t,e,i){"use strict";(function(t){function e(){this._listeners=[]}i(5).getLogger("Common.Delegate");e.prototype.subscribe=function(t,e,i){var n={object:t,member:e,singleshot:!!i};this._listeners.push(n)},e.prototype.unsubscribe=function(t,e){var i,n;for(i=0;i<this._listeners.length;++i)if(n=this._listeners[i],n.object===t&&n.member.prototype===e.prototype){this._listeners.splice(i,1);break}},e.prototype.unsubscribeAll=function(t){var e,i;for(e=this._listeners.length-1;e>=0;--e)i=this._listeners[e],i.object===t&&this._listeners.splice(e,1)},e.prototype.destroy=function(){delete this._listeners},e.prototype.fire=function(){var t,e,i=this._listeners.slice();for(t=0;t<i.length;++t)e=i[t],e.member.apply(e.object||null,arguments);for(t=this._listeners.length-1;t>=0;t--)this._listeners[t].singleshot&&this._listeners.splice(t,1)},"undefined"!=typeof window&&(window.Delegate=e),void 0!==t&&t&&t.exports&&(t.exports=e)}).call(e,i(50)(t))},,function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"HitTestResult",function(){return n});var n=function(){function t(t,e,i){this._result=t,this._data=e,this._eraseMarker=i}
return t.prototype.result=function(){return this._result},t.prototype.data=function(){return this._data},t.prototype.eraseMarker=function(){return this._eraseMarker},t.MOVEPOINT_BACKGROUND=1,t.REGULAR=2,t.MOVEPOINT=3,t.CHANGEPOINT=4,t.CUSTOM=5,t.CUSTOM_MOVE=6,t}()},,,function(t,e,i){"use strict";function n(t,e){if(!Object(o.isNumber)(t))return"n/a";if(!Object(o.isInteger)(e))throw new TypeError("invalid length");if(e<0||e>16)throw new TypeError("invalid length");return 0===e?""+t:("0000000000000000"+t).slice(-e)}var o,r,s,a,l,c,h;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"customFormatters",function(){return a}),i.d(e,"formatterOptions",function(){return l}),e.numberToStringWithLeadingZero=n,i.d(e,"PriceFormatter",function(){return h}),i(9),o=i(12),i.n(o),r=i(5),s=Object(r.getLogger)("Chart.PriceFormatter"),a={dateFormatter:null,timeFormatter:null},l={decimalSign:".",decimalSignFractional:"'"},c={custom:$.t("Price format is invalid."),fraction:$.t("Fraction part is invalid."),secondFraction:$.t("Second fraction part is invalid.")},h=function(){function t(t,e,i,n){if(this.type="price",e||(e=1),Object(o.isNumber)(t)&&Object(o.isInteger)(t)||(t=100),t<0)throw new TypeError("invalid base");if(this._priceScale=t,this._minMove=e,this._minMove2=n,i&&void 0!==n&&n>0&&2!==n&&4!==n&&8!==n)return void s.logDebug("invalid minmove2");this._fractional=i,this.calculateDecimal()}return t.prototype.isFractional=function(){return!!this._fractional},t.prototype.state=function(){return{fractional:this._fractional,fractionalLength:this._fractionalLength,minMove:this._minMove,minMove2:this._minMove2,priceScale:this._priceScale}},t.prototype.calculateDecimal=function(){if(this._fractionalLength=0,this._priceScale>0&&this._minMove>0){var t=this._priceScale;for(this._fractional&&this._minMove2&&(t/=this._minMove2);t>1;)t/=10,this._fractionalLength++}},t.prototype.format=function(t,e,i,n){void 0===n&&(n=!0);var o="";return t<0?(o=!0===e?"−":!1===n?"":"-",t=-t):t&&!0===e&&(o="+"),this._fractional?o+this._formatAsFractional(t,i):o+this._formatAsDecimal(t,i)},t.prototype.parse=function(t){return this._fractional?this._minMove2?this._parseAsDoubleFractional(t):this._parseAsSingleFractional(t):this._parseAsDecimal(t)},t.prototype.hasForexAdditionalPrecision=function(){return!this._fractional&&10===this._minMove2},t.serialize=function(t){return t.state()},t.deserialize=function(e){return new t(e.priceScale,e.minMove,e.fractional,e.minMove2)},t.prototype._formatAsDecimal=function(t,e){var i,o,r,s,a;return e=e||0,i=this._fractional?Math.pow(10,this._fractionalLength||0):Math.pow(10,e)*this._priceScale/this._minMove,o=Math.floor(t),r=+(Math.round(t*i)-o*i).toFixed(this._fractionalLength),r>=i&&(r-=i,o+=1),s="",1!==i&&(a=void 0!==this._fractionalLength?this._fractionalLength:NaN,s=l.decimalSign+n(+r.toFixed(this._fractionalLength)*this._minMove,a+e),s=this._removeEndingZeros(s,e)),""+o+s},t.prototype._formatAsFractional=function(t,e){
var i,o,r,s,a,c,h,u,d,p=this._priceScale/this._minMove,_=Math.floor(t),f=e?Math.floor(t*p)-_*p:Math.round(t*p)-_*p;if(f===p&&(f=0,_+=1),i="",e&&(o=(t-_-f/p)*p,o=Math.round(o*Math.pow(10,e)),i=n(o,e),i=this._removeEndingZeros(i,e)),!this._fractionalLength)throw Error("_fractionalLength is not calculated");return r="",this._minMove2?(s=["0","5"],a=["0","2","5","7"],c=["0","1","2","3","4","5","6","7"],h=f%this._minMove2,f=(f-h)/this._minMove2,u=n(f,this._fractionalLength),d=2===this._minMove2?s[h]:8===this._minMove2?c[h]:a[h],r=u+l.decimalSignFractional+d):r=n(f*this._minMove,this._fractionalLength),""+_+l.decimalSignFractional+r+i},t.prototype._removeEndingZeros=function(t,e){for(var i=0;i<e&&"0"===t[t.length-1];i++)t=t.substr(0,t.length-1);return t},t.prototype._parseAsDecimal=function(t){var e,i,n=RegExp(/^(\-?)[0-9]+$/),o=n.exec(t);return o?(e=parseFloat(t),{price:e,res:!0,suggest:this.format(e)}):(i=RegExp("^(-?)[0-9]+\\"+l.decimalSign+"[0-9]*$"),o=i.exec(t),o?(e=parseFloat(t.replace(l.decimalSign,".")),{price:e,res:!0,suggest:this.format(e)}):{error:c.custom,res:!1})},t.prototype._patchFractPart=function(t,e){var i={0:0,5:1},n={0:0,2:1,5:2,7:3};return 2===e?void 0===i[t]?-1:i[t]:4===e?void 0===n[t]?-1:n[t]:t},t.prototype._parseAsSingleFractional=function(t){var e,i,n,o,r,s,a=RegExp(/^(\-?)[0-9]+$/),h=a.exec(t);return h?(e=parseFloat(t),{price:e,res:!0,suggest:this.format(e)}):(i=RegExp("^(-?)([0-9]+)\\"+l.decimalSignFractional+"([0-9]+)$"),h=i.exec(t),h?(n=!!h[1],o=parseInt(h[2]),r=this._priceScale,(s=this._patchFractPart(parseInt(h[3]),r))>=r||s<0?{error:c.fraction,res:!1}:(e=o+s/r,n&&(e=-e),{price:e,res:!0,suggest:this.format(e)})):{error:c.custom,res:!1})},t.prototype._parseAsDoubleFractional=function(t){var e,i,n,o,r,s,a,h,u,d=RegExp(/^(\-?)[0-9]+$/),p=d.exec(t);return p?(e=parseFloat(t),{price:e,res:!0,suggest:this.format(e)}):(i=RegExp("^(-?)([0-9]+)\\"+l.decimalSignFractional+"([0-9]+)\\"+l.decimalSignFractional+"([0-9]+)$"),p=i.exec(t),p?(n=!!p[1],o=parseInt(p[2]),r=void 0!==this._minMove2?this._minMove2:NaN,s=this._priceScale/r,a=this._minMove2,h=this._patchFractPart(parseInt(p[3]),s),u=this._patchFractPart(parseInt(p[4]),a),h>=s||h<0?{error:c.fraction,res:!1}:void 0!==a&&u>=a||u<0?{error:c.secondFraction,res:!1}:(e=void 0!==a?o+h/s+u/(s*a):NaN,n&&(e=-e),{price:e,res:!0,suggest:this.format(e)})):{error:c.custom,res:!1})},t}()},,function(t,e,i){"use strict";(function(t){function e(){}function i(t){if(!(this instanceof i))return new i(t);arguments.length>0&&(this._value=t),this._listeners=[]}i.prototype.value=function(){return this._owner?this._owner._value:this._value},i.prototype.setValue=function(t,e){var i,n,o,r=this._owner?this._owner:this;if("function"==typeof r.hook&&(t=r.hook(t)),r.writeLock)return r._value;if(!e&&r._value===t&&r.hasOwnProperty("_value"))return t;for(r._value=t,i=r._listeners.slice(),n=0,o=0;o<i.length;o++)i[o].once&&(r._listeners.splice(o-n,1),n++),i[o].cb(t);return t},i.prototype.deleteValue=function(){var t,e,i,n=this._owner?this._owner:this;if(n.hasOwnProperty("_value")){
if(n.writeLock)return n._value;for(delete n._value,t=n._listeners.slice(),e=0,i=0;i<t.length;i++)t[i].once&&(n._listeners.splice(i-e,1),e++),t[i].cb()}},i.prototype.subscribe=function(t,e){var i,n,o;if("function"!=typeof t)throw new TypeError("callback must be a function");i=!!e&&!!e.once,n=!!e&&!!e.callWithLast,o=this._owner?this._owner:this,n&&o.hasOwnProperty("_value")&&(t(o._value),i)||o._listeners.push({cb:t,owner:this,once:!!e&&!!e.once})},i.prototype.unsubscribe=function(t){var e,i,n=this._owner?this._owner:this;for(void 0===t&&(t=null),e=n._listeners,i=e.length;i--;)e[i].owner!==this&&n!==this||e[i].cb!==t&&null!==t||e.splice(i,1)},i.prototype.listeners=function(){return(this._owner?this._owner:this)._listeners},i.prototype.readonly=function(){if(this._readonlyInstance)return this._readonlyInstance;var t=this._readonlyInstance=new e;return t.subscribe=this.subscribe.bind(this),t.unsubscribe=this.unsubscribe.bind(this),t.value=this.value.bind(this),t.when=this.when.bind(this),t.spawn=function(){return this.spawn().readonly()}.bind(this),this.destroy&&(t.destroy=this.destroy.bind(this)),t},i.prototype.spawn=function(){var t=new i;return delete t._listeners,t._owner=this._owner||this,t.destroy=function(){this.unsubscribe(),delete this._owner},t},i.prototype.when=function(t){var e,i=this;if(this.value())return void t();e=function(n){n&&(i.unsubscribe(e),t())},i.subscribe(e)},i.prototype.opposite=function(){var t,e;return this._opposite||(t=this,e=new i(!this.value()),this.subscribe(function(t){e.setValue(!t)}),e.subscribe(function(e){t.setValue(!e)}),this._opposite=e),this._opposite},"undefined"!=typeof window&&(window.WatchedValue=i),void 0!==t&&t&&t.exports&&(t.exports=i)}).call(e,i(50)(t))},function(t,e,i){"use strict";(function(e){function i(t){if(this._listeners=new e,this._childs=[],this._muteChildChanges=!1,void 0!==t&&null!==t)if(this.isPrimitiveType(t))this._value=t;else for(var i in t)this.addProperty(i,t[i])}i.prototype.merge=function(t,e){var i,n,o,r,s=null;if(e&&(s=[],i=s.length),null==t)return s;if(this.isPrimitiveType(t))return e&&this._value!==t&&s.push(this),this._value=t,s;if(Array.isArray(t))for(n=0;n<t.length;n++)this[n]?(o=this[n].merge(t[n],e),e&&(s=s.concat(o))):(this.addProperty(n,t[n]),e&&s.push(this[n]));else for(r in t)this[r]?(o=this[r].merge(t[r],e),e&&(s=s.concat(o))):(this.addProperty(r,t[r]),e&&s.push(this[r]));return e&&s.length>i&&s.push(this),s},i.prototype.mergeAndFire=function(t){var e=this.merge(t,!0);this._muteChildChanges=!0,e.forEach(function(t){t._muteChildChanges=!0}),e.forEach(function(t){t._muteChildChanges=!1,t.listeners().fire(t)}),this._muteChildChanges=!1,e.length>0&&this.listeners().fire(this)},i.prototype.state=function(t){var e,i,n,o,r,s=this._value;for(void 0===s&&(s={}),e=0;e<this._childs.length;e++)if(i=this._childs[e],!t||-1===t.indexOf(i))if(t){for(n=[],o=0;o<t.length;o++)r=t[o],r.startsWith(i+".")&&n.push(r.substr(i.length+1));s[i]=this[i].state(n)}else s[i]=this[i].state();return s},i.prototype.clone=function(t){return new i(this.state())},
i.prototype.isPrimitiveType=function(t){return!!isNumber(t)||(!!new TradingView.TypeValidator(String).check(t)||TradingView.isBoolean(t))},i.prototype.value=function(){return this._value},i.prototype.listeners=function(){return this._listeners},i.prototype.childCount=function(){return this._childs.length},i.prototype.childNames=function(){return this._childs},i.prototype.child=function(t){return this[t]},i.prototype.setValue=function(t,e){(this._value!==t||e)&&(this._value=t,this._listeners.fire(this))},i.prototype.setValueSilently=function(t){this._value=t},i.prototype.addProperty=function(t,e){var n=new i(e);this[t]=n,this._childs.push(t),n.listeners().subscribe(this,i.prototype.childChanged)},i.prototype.removeProperty=function(t){this[t].listeners().unsubscribe(this,i.prototype.childChanged),delete this[t],this._childs=this._childs.filter(function(e){return e!==t})},i.prototype.hasChild=function(t){return this._childs.indexOf(t)>=0},i.prototype.addChild=function(t,e){this[t]=e,-1===$.inArray(t,this._childs)&&this._childs.push(t),e.listeners().subscribe(this,i.prototype.childChanged)},i.prototype.childChanged=function(t,e){this._muteChildChanges||this.listeners().fire(this)},i.prototype.subscribe=function(t,e){this.listeners().subscribe(t,e,!1)},i.prototype.unsubscribe=function(t,e){this.listeners().unsubscribe(t,e)},i.prototype.unsubscribeAll=function(t){this.listeners().unsubscribeAll(t)},t.exports=i}).call(e,i(8))},function(t,e,i){"use strict";function n(t){this._invalidationLevel=t||n.UPDATE_CURSOR_ONLY,this._invalidatedPanes={}}n.UPDATE_CURSOR_ONLY=1,n.LIGHT_UPDATE=2,n.FULL_UPDATE=3,n.prototype.invalidatePane=function(t,e){this._invalidatedPanes[t]?this._invalidatedPanes[t]=Math.max(this._invalidatedPanes[t],e):this._invalidatedPanes[t]=e},n.prototype.invalidateAll=function(t){this._invalidationLevel=Math.max(this._invalidationLevel,t)},n.prototype.fullInvalidation=function(){return this._invalidationLevel},n.prototype.invalidateForPane=function(t){return this._invalidatedPanes[t]?Math.max(this._invalidatedPanes[t],this._invalidationLevel):this._invalidationLevel},n.prototype.merge=function(t){this.force=this.force||t.force,this._invalidationLevel=Math.max(this._invalidationLevel,t._invalidationLevel);for(var e in t._invalidatedPanes)this._invalidatedPanes[e]?this._invalidatedPanes[e]=Math.max(this._invalidatedPanes[e],t._invalidatedPanes[e]):this._invalidatedPanes[e]=t._invalidatedPanes[e]},n.prototype.exclude=function(t){this._invalidationLevel<=t&&(this._invalidationLevel=0);for(var e in this._invalidatedPanes)this._invalidatedPanes[e]<=t&&(this._invalidatedPanes[e]=0)},t.exports=n},function(t,e,i){"use strict";(function(e){function n(t,e,i,n){this._map=$.extend({},this._map,n),e&&(e=this.unpackLevels(e)),r.call(this,t,e,i),this.updateCollectibleProperty()}var o=i(12).isSameType,r=i(3).DefaultProperty,s=i(657);inherit(n,r),n.prototype.state=function(t,i){t=t||[],t.push("__collectibleLines");var n=e.prototype.state.call(this,t);return i?n:this.packLevels(n)},n.prototype.clone=function(){var t=this.state()
;return this.__collectibleLines&&(t.__collectibleLines=this.__collectibleLines.state()),new n(this._defaultName,t)},n.prototype.merge=function(t,i){var n=e.prototype.merge.call(this,this.unpackLevels(t),i);return this.updateCollectibleProperty(),n},n.prototype._map={prefixes:[""],range:[0,0],names:["coeff","color","visible","linestyle","linewidth"],typecheck:{pack:Object,unpack:Array}},n.prototype._packLvlTpl=function(){return[]},n.prototype._unpackLvlTpl=function(){return{}},n.prototype._packLvlFill=function(t,e,i,n){return n.push(i[e]),n},n.prototype._unpackLvlFill=function(t,e,i,n){return n[e]=i[t],n},n.prototype._iterateLevels=function(t,e){var i,n,r,s,a;for(i in this._map.prefixes)for(n=(this._map.prefixes[i]||"")+"level",r=this._map.range[0];r<=this._map.range[1];r++)if(t[n+r]&&o(t[n+r],e.typecheck())){s=e.tpl();for(a in this._map.names)s=e.fill(a,this._map.names[a],t[n+r],s);t[n+r]=s}return t},n.prototype.packLevels=function(t){return this._iterateLevels(t,{tpl:this._packLvlTpl,fill:this._packLvlFill,typecheck:this._map.typecheck.pack})},n.prototype.unpackLevels=function(t){return this._iterateLevels(t,{tpl:this._unpackLvlTpl,fill:this._unpackLvlFill,typecheck:this._map.typecheck.unpack})},n.prototype.saveDefaults=function(){TradingView.saveDefaults(this._defaultName,this.state(this._exclusions,!0))},n.prototype.updateCollectibleProperty=function(){var t,e;this.__collectibleLines&&(t=this,e=[],this.__collectibleLines._childs.forEach(function(i){var n,o=t.__collectibleLines[i].value(),r=o.split("."),s=t[r[0]];for(n=1;n<r.length&&s;++n)s=s[r[n]];s&&e.push({property:s.color,defaultValue:s.color.value()})}),this.collectibleColors?this.collectibleColors.reloadProperties(e):this.collectibleColors=new s(e))},t.exports=n}).call(e,i(16))},,function(t,e,i){"use strict";function n(t,e){var i,n;return null===t?e:null===e?t:(i=Math.min(t.min,e.min),n=Math.max(t.max,e.max),{min:i,max:n})}function o(t,e){for(var i=r(t,e),n=Array(i),o=0,s=0,a=t.length,l=e.length,c=0;o<a&&s<l;)t[o].index<e[s].index?(n[c]=t[o],o++):t[o].index>e[s].index?(n[c]=e[s],s++):(n[c]=e[s],o++,s++),c++;for(;o<a;)n[c]=t[o],o++,c++;for(;s<l;)n[c]=e[s],s++,c++;return n}function r(t,e){for(var i=t.length,n=e.length,o=i+n,r=0,s=0;r<i&&s<n;)t[r].index<e[s].index?r++:t[r].index>e[s].index?s++:(r++,s++,o--);return o}var s,a,l,c,h,u,d,p;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"PlotRowSearchMode",function(){return h}),i.d(e,"REMOVE_INDEX_MAGIC_NUMBER",function(){return d}),i.d(e,"PlotList",function(){return p}),e.mergeMinMax=n,e.mergePlotRows=o,s=i(6),i.n(s),a=i(85),l=i(5),c=Object(l.getLogger)("Chart.PlotList"),function(t){t[t.NearestLeft=-1]="NearestLeft",t[t.Exact=0]="Exact",t[t.NearestRight=1]="NearestRight"}(h||(h={})),u=30,d=-2e6,p=function(){function t(t){void 0===t&&(t=[]),this._items=[],this._plotNames=[],this._start=0,this._end=0,this._shareRead=!1,this._minMaxCache={},this._rowSearchCache={},this._plotNames=t}return t.prototype.clear=function(){this._items=[],this._start=0,this._end=0,this._shareRead=!1,this._minMaxCache={},
this._rowSearchCache={}},t.prototype.plotNames=function(){return this._plotNames},t.prototype.first=function(){return this.size()>0?this._items[this._start]:null},t.prototype.last=function(){return this.size()>0?this._items[this._end-1]:null},t.prototype.firstIndex=function(){return this.size()>0?this._indexAt(this._start):null},t.prototype.lastIndex=function(){return this.size()>0?this._indexAt(this._end-1):null},t.prototype.size=function(){return this._end-this._start},t.prototype.isEmpty=function(){return 0===this.size()},t.prototype.contains=function(t){return null!==this._search(t)},t.prototype.valueAt=function(t){var e=this.search(t);return null!==e?e.value:null},t.prototype.add=function(t,e){var i,n;return this._shareRead?(c.logDebug("add: readonly collection modification attempt"),!1):(i={index:t,value:e},n=this._search(t),this._rowSearchCache={},null===n?(this._items.splice(this._lowerbound(t),0,i),this._start=0,this._end=this._items.length,!0):(this._items[n]=i,!1))},t.prototype.search=function(t,e){var i,n;return void 0===e&&(e=h.Exact),this._rowSearchCache[t]&&this._rowSearchCache[t][e]?this._rowSearchCache[t][e]:null===(i=this._search(t,e))?null:(n={index:this._indexAt(i),value:this._valueAt(i)},this._rowSearchCache[t]=this._rowSearchCache[t]||{},this._rowSearchCache[t][e]=n,n)},t.prototype.fold=function(t,e){var i,n,o,r=e;for(i=this._start;i<this._end;++i)n=this._indexAt(i),o=this._valueAt(i),r=t(n,o,r);return r},t.prototype.findFirst=function(t,e){var i,n,o,r=void 0!==e&&Math.min(this._start+e,this._end)||this._end;for(i=this._start;i<r;++i)if(n=this._indexAt(i),o=this._valueAt(i),t(n,o))return{index:n,value:o};return null},t.prototype.findLast=function(t,e){var i,n,o,r=void 0!==e&&Math.max(this._end-e,this._start)||this._start;for(i=this._end-1;i>=r;--i)if(n=this._indexAt(i),o=this._valueAt(i),t(n,o))return{index:n,value:o};return null},t.prototype.each=function(t){var e,i,n;for(e=this._start;e<this._end&&(i=this._indexAt(e),n=this._valueAt(e),!t(i,n));++e);},t.prototype.reduce=function(t,e){var i,n,o,r=e;for(i=this._start;i<this._end;++i)n=this._indexAt(i),o=this._valueAt(i),r=t(r,n,o);return r},t.prototype.range=function(e,i){var n=new t;return n._items=this._items,n._start=this._lowerbound(e),n._end=this._upperbound(i),n._shareRead=!0,n},t.prototype.minMaxOnRange2=function(t,e,i){var o,r,a,l,c,h,d,p,_,f,m,g,y,v,b,S,w,P,T;if(this.isEmpty())return null;for(o=null,r=Object(s.ensureNotNull)(this.firstIndex()),a=Object(s.ensureNotNull)(this.lastIndex()),l=0,c=i;l<c.length;l++){for(h=c[l],d=t-h.offset,p=e-h.offset,d=Math.max(d,r),p=Math.min(p,a),_=Math.ceil(d/u)*u,f=Math.max(_,Math.floor(p/u)*u),m=this._lowerbound(d),g=this._upperbound(Math.min(p,_,e)),y=this._plotMinMax(m,g,h),o=n(o,y),this._minMaxCache[h.index]||(this._minMaxCache[h.index]={}),v=this._minMaxCache[h.index],b=Math.max(_+1,d);b<f;b+=u)S=Math.floor(b/u),w=v[S],void 0===w&&(P=S*u,T=(S+1)*u-1,w=this.minMaxOnRange(P,T,[h]),v[S]=w),o=n(o,w);m=this._lowerbound(f),g=this._upperbound(p),y=this._plotMinMax(m,g,h),o=n(o,y),
void 0!==h.baseValue&&null!==o&&(o.min=o.min?Math.min(h.baseValue,o.min):o.min,o.max=o.min?Math.max(h.baseValue,o.max):o.max)}return o},t.prototype.minMaxOnRange=function(t,e,i){var o,r,s,a,l,c,h=null;for(o=0,r=i;o<r.length;o++)s=r[o],a=this._lowerbound(t-s.offset),l=Math.min(this._lowerbound(e-s.offset)+1,this._items.length),this._items[this._end-1]&&this._items[l-1].index>e-s.offset&&(l=a),c=this._plotMinMax(a,l,s),h=n(h,c),void 0!==s.baseValue&&null!==h&&(h.min=h.min?Math.min(s.baseValue,h.min):h.min,h.max=h.max?Math.max(s.baseValue,h.max):h.max);return h},t.prototype.merge=function(t){return this._shareRead?(c.logDebug("merge: readonly collection modification attempt"),null):0===t.length?null:this.isEmpty()||t[t.length-1].index<this._items[0].index?this._prepend(t):t[0].index>this._items[this._items.length-1].index?this._append(t):1===t.length&&t[0].index===this._items[this._items.length-1].index?(this._updateLast(t[0]),t[0]):this._merge(t)},t.prototype.addTail=function(t,e){var i,n,o,r;for(void 0===e&&(e=!1),i=0,e&&this._end-this._start>0&&(i=1,this._items[this._end-this._start-1].value=t[0].value),n=i;n<t.length;++n){if(o=t[n],null===(r=this.lastIndex())){c.logError("Can't add tail to the empty plotlist");break}this.add(r+1,o.value)}this._rowSearchCache={}},t.prototype.move=function(t){var e,i,n,o,r,s,a;if(this._shareRead)return void c.logDebug("move: readonly collection modification attempt");if(0!==t.length){for(e=this._items.slice(),i=0,n=t;i<n.length;i++)o=n[i],null!==(r=this._bsearch(o.old))&&void 0!==e[r]&&(o.new===d?e[r]=void 0:(e[r]={index:o.new,value:e[r].value},null!==(s=this._bsearch(o.new))&&void 0!==(a=e[s])&&a.index===o.new&&(e[s]=void 0)));this._items=e.filter(function(t){return void 0!==t}).sort(function(t,e){return t.index-e.index}),this._rowSearchCache={},this._minMaxCache={},this._start=0,this._end=this._items.length}},t.prototype.remove=function(t){var e,i;return this._shareRead?(c.logDebug("remove: readonly collection modification attempt"),null):null===(e=this._search(t,h.NearestRight))?null:(i=this._items.splice(e),this._end=this._items.length,this._minMaxCache={},this._rowSearchCache={},i.length>0?i[0]:null)},t.prototype.state=function(){return{columns:this._plotNames,start:this._start,end:this._end,data:this._items,shareread:this._shareRead}},t.prototype.restoreState=function(t){if(!t)return void this.clear();this._plotNames=t.columns,this._start=t.start,this._end=t.end,this._shareRead=t.shareread,this._items=t.data,this._minMaxCache={},this._rowSearchCache={}},t.prototype._indexAt=function(t){return this._items[t].index},t.prototype._valueAt=function(t){return this._items[t].value},t.prototype._length=function(){return this._items.length},t.prototype._search=function(t,e){var i,n=this._bsearch(t);return null===n&&e?e<0?(i=this._lowerbound(t),i>this._start&&(i-=1),i!==this._end&&this._indexAt(i)<t?i:null):(i=this._upperbound(t),i!==this._end&&t<this._indexAt(i)?i:null):n},t.prototype._bsearch=function(t){var e=this._lowerbound(t);return e===this._end||t<this._items[e].index?null:e},
t.prototype._lowerbound=function(t){return Object(a.lowerbound)(this._items,t,function(t,e){return t.index<e},this._start,this._end)},t.prototype._upperbound=function(t){return Object(a.upperbound)(this._items,t,function(t,e){return e.index>t},this._start,this._end)},t.prototype._plotMinMax=function(t,e,i){var n,o,r,s=null;for(n=t;n<e;n++)o=this._items[n].value,void 0===(r=o[i.index])||null===r||Number.isNaN(r)||(null===s?s={min:r,max:r}:(r<s.min&&(s.min=r),r>s.max&&(s.max=r)));return s},t.prototype._invalidateCacheForRow=function(t){var e,i=Math.floor(t.index/u);for(e=0;e<this._plotNames.length;e++)this._minMaxCache[e]&&delete this._minMaxCache[e][i]},t.prototype._prepend=function(t){return Object(s.assert)(!this._shareRead,"collection should not be readonly"),Object(s.assert)(0!==t.length,"plotRows should not be empty"),this._rowSearchCache={},this._minMaxCache={},this._items=t.concat(this._items),this._start=0,this._end=this._items.length,t[0]},t.prototype._append=function(t){return Object(s.assert)(!this._shareRead,"collection should not be readonly"),Object(s.assert)(0!==t.length,"plotRows should not be empty"),this._rowSearchCache={},this._minMaxCache={},this._items=this._items.concat(t),this._start=0,this._end=this._items.length,t[0]},t.prototype._updateLast=function(t){Object(s.assert)(!this.isEmpty(),"plot list should not be empty");var e=this._items[this._end-1];Object(s.assert)(e.index===t.index,"last row index should match new row index"),this._invalidateCacheForRow(t),this._rowSearchCache[t.index]={},this._items[this._end-1]=t},t.prototype._merge=function(t){return Object(s.assert)(0!==t.length,"plot rows should not be empty"),this._rowSearchCache={},this._minMaxCache={},this._items=o(this._items,t),this._start=0,this._end=this._items.length,t[0]},t}()},function(t,e,i){"use strict";(function(e){var n=i(786).StudyError,o=i(85),r=i(12).inherit,s=1e-10,a=function(){function t(t,e,i,n,o){var r,s=o,a=0;if(isNaN(t.get(e-1)))return{index:NaN,value:NaN};for(r=0;r<e;++r)n(t.get(r),s)&&(a=r,s=t.get(r));return{index:a,value:s}}function a(t,e){return 100*t/e}function l(t,e,i,n,o){var r,s,a;this._areaRight=t,this._areaLeft=e,this._pivotType=i,this._series=n,this._currentIndex=o.new_var(0),this._currentValue=o.new_var(NaN),this._pivotIndex=o.new_var(-1),this._index=C.n(o),this._isNewBar=o.symbol.isNewBar,r=this._currentIndex.get(1),s=this._currentValue.get(1),a=this._pivotIndex.get(1),this._index>1&&(this._currentIndex.set(r),this._currentValue.set(s),this._pivotIndex.set(a))}function c(t,e,i){var n,o,r,s,a;this._deviation=t,n=i.new_var(C.high(i)),o=i.new_var(C.low(i)),n.get(2*e+1),o.get(2*e+1),this._pivotHigh=new l(e,e,l.HIGH,n,i),this._pivotLow=new l(e,e,l.LOW,o,i),this._lastVal=i.new_var(NaN),this._lastIndex=i.new_var(-1),this._lastType=i.new_var(),this._index=C.n(i),this._isNewBar=i.symbol.isNewBar,this._isBarClosed=i.symbol.isBarClosed,r=this._lastIndex.get(1),s=this._lastVal.get(1),a=this._lastType.get(1),this._index>1&&this.addPivot(r,s,a),this.processPivot(this._pivotHigh),this.processPivot(this._pivotLow)}
function h(t){this.symbol=t,this.vars=[],this.vars_index=0,this.ctx=[],this.ctx_index=0}function u(t){this.mindepth=0,this.original=NaN,this.modified=!1,this.symbol=t}function d(t){u.call(this,t),this.hist=new Float64Array(2e3),this.hist_pos=-1}function p(t,e){this.timezone=t||"America/New_York",this.session=e||"0000-0000"}function _(t,e,i,n,o,r){this.periodBase=i,this.tickerid=t,this.period=e,this.index=-1,this.time=NaN,this.open=NaN,this.high=NaN,this.low=NaN,this.close=NaN,this.volume=NaN,this.updatetime=NaN,this.isNewBar=!1,this.isBarClosed=!1,this.session=new T.Session,this.other_sessions={},this.script=n,this.ticker=_.parseTicker(t);var s=_.parsePeriod(e);this.resolution=s.resolution,this.interval=s.interval,this.bb_cache={},this.minTick=o,this.periodForInitialRange=r}function f(t,e,i,n,o,r,s,a,l,c){this.body=r,this.symbols=[],this.runner=o,this.inputCallback=a,this.out=s,this.nonseriesOut=c,this.ctx=new h(this.add_sym(t,e,i,l,n)),this.init()}function m(t){this.symbols=[],this.barsets=[],this.subscription=[],this.host=t,this.isRecalculated=!1,this.start()}function g(t){m.feed=t}function y(t){this.runner=new m(t)}function v(t,e){this.info=t,this.bars=e||[],this.isBarClosed=!0}function b(t,e){this.period=t,this.generateEmptyBars=!!e}function S(){}var w="undefined"!=typeof window?window:e,P=w.PineJsCalendar?w.PineJsCalendar:i(33),T=i(48),C={};return C.max_series_default_size=10001,C.n=function(t){return t.symbol.index+1},C.nz=function(t,e){return e=e||0,isFinite(t)?t:e},C.na=function(t){return 0===arguments.length?NaN:isNaN(t)?1:0},C.isZero=function(t){return Math.abs(t)<=1e-10},C.toBool=function(t){return isFinite(t)&&!C.isZero(t)},C.eq=function(t,e){return C.isZero(t-e)},C.neq=function(t,e){return!C.eq(t,e)},C.ge=function(t,e){return C.isZero(t-e)||t>e},C.gt=function(t,e){return!C.isZero(t-e)&&t>e},C.lt=function(t,e){return!C.isZero(t-e)&&t<e},C.le=function(t,e){return C.isZero(t-e)||t<e},C.and=function(t,e){return isNaN(t)||isNaN(e)?NaN:C.isZero(t)||C.isZero(e)?0:1},C.or=function(t,e){return isNaN(t)||isNaN(e)?NaN:C.isZero(t)&&C.isZero(e)?0:1},C.not=function(t){return isNaN(t)?NaN:C.isZero(t)?1:0},C.greaterOrEqual=function(t,e){return e-t<s},C.lessOrEqual=function(t,e){return t-e<s},C.equal=function(t,e){return Math.abs(t-e)<s},C.greater=function(t,e){return t-e>s},C.less=function(t,e){return e-t>s},C.max=Math.max,C.min=Math.min,C.pow=Math.pow,C.abs=Math.abs,C.log=Math.log,C.log10=function(t){return Math.log(t)/Math.LN10},C.sqrt=Math.sqrt,C.sign=function(t){return isNaN(t)?NaN:C.isZero(t)?0:t>0?1:-1},C.exp=Math.exp,C.sin=Math.sin,C.cos=Math.cos,C.tan=Math.tan,C.asin=Math.asin,C.acos=Math.acos,C.atan=Math.atan,C.floor=Math.floor,C.ceil=Math.ceil,C.round=Math.round,C.avg=function(t,e,i,n,o,r){var s,a;if(2===arguments.length)return(t+e)/2;for(s=0,a=0;a<arguments.length;a++)s+=arguments[a];return s/arguments.length},C.open=function(t){return t.symbol.open},C.high=function(t){return t.symbol.high},C.low=function(t){return t.symbol.low},C.close=function(t){return t.symbol.close},C.hl2=function(t){
return(t.symbol.high+t.symbol.low)/2},C.hlc3=function(t){return(t.symbol.high+t.symbol.low+t.symbol.close)/3},C.ohlc4=function(t){return(t.symbol.open+t.symbol.high+t.symbol.low+t.symbol.close)/4},C.volume=function(t){return t.symbol.volume},C.updatetime=function(t){return t.symbol.updatetime},C.time=function(t,e,i){return t.symbol.bartime(e,i)},C.period=function(t){return t.symbol.period},C.tickerid=function(t){return t.symbol.tickerid},C.ticker=function(t){return t.symbol.ticker},C.interval=function(t){return t.symbol.interval},C.isdwm=function(t){return t.symbol.isdwm()},C.isintraday=function(t){return!t.symbol.isdwm()},C.isdaily=function(t){return"D"===t.symbol.resolution},C.isweekly=function(t){return"W"===t.symbol.resolution},C.ismonthly=function(t){return"M"===t.symbol.resolution},C.year=function(t){return C.timepart(t.symbol,P.YEAR,arguments[1])},C.month=function(t){return C.timepart(t.symbol,P.MONTH,arguments[1])},C.weekofyear=function(t){return C.timepart(t.symbol,P.WEEK_OF_YEAR,arguments[1])},C.dayofmonth=function(t){return C.timepart(t.symbol,P.DAY_OF_MONTH,arguments[1])},C.dayofweek=function(t){return C.timepart(t.symbol,P.DAY_OF_WEEK,arguments[1])},C.hour=function(t){return C.timepart(t.symbol,P.HOUR_OF_DAY,arguments[1])},C.minute=function(t){return C.timepart(t.symbol,P.MINUTE,arguments[1])},C.second=function(t){return C.timepart(t.symbol,P.SECOND,arguments[1])},C.add_days_considering_dst=function(t,e,i){return P.add_days_considering_dst(P.get_timezone(t),e,i)},C.selectSessionBreaks=function(t,e){var i,n,o,r,s,a;if(C.isdwm(t)||void 0===t.symbol.session.timezone)return[];if(i=_.newBarBuilder(t.symbol.period,t.symbol.session),n=[],o=e.length,i.moveTo(e[o-1]),1===o&&i.sessionStart===e[0])n.push(e[0]);else{for(r=o-2;r>=0;--r)(s=e[r])>=i.sessionStart||(i.moveTo(s),a=e[r+1],n.push(a));n.reverse()}return n},C.iff=function(t,e,i){return C.not(t)?i:e},C.rising=function(t,e){for(var i=1;i<e+1;++i)if(t.get(i)>t.get(0))return 0;return 1},C.falling=function(t,e){for(var i=1;i<e+1;++i)if(t.get(i)<t.get(0))return 0;return 1},C.timepart=function(t,e,i){var n=P.utc_to_cal(t.timezone,i||t.bartime());return P.get_part(n,e)},C.rsi=function(t,e){return C.isZero(e)?100:C.isZero(t)?0:100-100/(1+t/e)},C.sum=function(t,e,i){var n=i.new_var(),o=C.nz(t.get())+C.nz(n.get(1))-C.nz(t.get(e));return n.set(o),o},C.sma=function(t,e,i){var n=C.sum(t,e,i);return C.na(t.get(e-1))?NaN:n/e},C.rma=function(t,e,i){var n=C.sum(t,e,i),o=e-1,r=t.get(o),s=i.new_var(),a=s.get(1),l=t.get(),c=C.na(r)?NaN:C.na(a)?n/e:(l+a*o)/e;return s.set(c),c},C.fixnan=function(t,e){var i=e.new_var();return isNaN(t)?i.get(1):(i.set(t),t)},C.tr=function(t,e){var i,n,o;return 1===arguments.length&&(e=t,t=void 0),i=void 0!==t&&!!t,n=e.new_var(C.close(e)),o=n.get(1),i&&isNaN(o)&&(o=C.close(e)),C.max(C.max(C.high(e)-C.low(e),C.abs(C.high(e)-o)),C.abs(C.low(e)-o))},C.atr=function(t,e){var i=e.new_var(C.tr(e));return C.sma(i,t,e)},C.ema=function(t,e,i){var n=C.sum(t,e,i),o=i.new_var(),r=t.get(0),s=t.get(e-1),a=o.get(1),l=C.na(s)?NaN:C.na(a)?n/e:2*(r-a)/(e+1)+a
;return o.set(l),l},C.wma=function(t,e,i){var n,o,r=0;for(e=Math.round(e),n=e;n>=0;n--)o=e-n,r+=o*t.get(n);return 2*r/(e*(e+1))},C.vwma=function(t,e,i){var n=i.new_var(C.volume(i)),o=i.new_var(t.get(0)*C.volume(i));return C.sma(o,e,i)/C.sma(n,e,i)},C.swma=function(t,e){return(t.get(0)+2*t.get(1)+2*t.get(2)+t.get(3))/6},C.lowestbars=function(e,i,n){return-t(e,i,n,function(t,e){return C.lt(t,e)},Number.MAX_VALUE).index},C.lowest=function(e,i,n){return t(e,i,n,function(t,e){return C.lt(t,e)},Number.MAX_VALUE).value},C.highestbars=function(e,i,n){return-t(e,i,n,function(t,e){return C.gt(t,e)},Number.MIN_VALUE).index},C.highest=function(e,i,n){return t(e,i,n,function(t,e){return C.gt(t,e)},Number.MIN_VALUE).value},C.cum=function(t,e){var i=e.new_var(),n=C.nz(i.get(1))+t;return i.set(n),n},C.accdist=function(t){var e=C.high(t),i=C.low(t),n=C.close(t),o=C.volume(t);return C.cum(n===e&&n===i||e===i?0:o*(2*n-i-e)/(e-i),t)},C.correlation=function(t,e,i,n){var o=C.sma(t,i,n),r=C.sma(e,i,n),s=n.new_var(t.get()*e.get());return(C.sma(s,i,n)-o*r)/Math.sqrt(C.variance2(t,o,i)*C.variance2(e,r,i))},C.stoch=function(t,e,i,n,o){var r=C.highest(e,n),s=C.lowest(i,n);return C.fixnan(a(t.get()-s,r-s),o)},C.tsi=function(t,e,i,n){var o=n.new_var(C.change(t)),r=n.new_var(C.abs(C.change(t))),s=n.new_var(C.ema(o,i,n)),a=n.new_var(C.ema(r,i,n));return C.ema(s,e,n)/C.ema(a,e,n)},C.cross=function(t,e,i){function n(t){return t<0?-1:0===t?0:1}if(isNaN(t)||isNaN(e))return!1;var o=i.new_var(n(t-e));return!isNaN(o.get(1))&&o.get(1)!==o.get()},C.linreg=function(t,e,i){var n,o,r,s,a,l,c=0,h=0,u=0,d=0;for(n=0;n<e;++n)o=t.get(n),r=e-1-n,s=r+1,c+=s,h+=o,u+=s*s,d+=o*s;return a=(e*d-c*h)/(e*u-c*c),l=h/e,l-a*c/e+a+a*(e-1-i)},C.sar=function(t,e,i,n){function o(e,i){var n=m.get();return g.set(e),m.set(i),y.set(1e3*t),v.set(n),n}var r,s,a=C.high(n),l=C.low(n),c=C.close(n),h=n.new_var(a),u=n.new_var(l),d=n.new_var(c),p=d.get(1),_=u.get(1),f=h.get(1),m=n.new_var(),g=n.new_var(),y=n.new_var(),v=n.new_var(),b=v.get(1);if(isNaN(p))return NaN;if(r=1e-7,isNaN(b)&&(C.ge(c,p)?(g.set(1),m.set(Math.max(a,f)),b=Math.min(l,_)):(g.set(-1),b=Math.max(a,f),m.set(Math.min(l,_))),y.set(1e3*t)),1===g.get()){if(C.gt(a,m.get())&&(m.set(a),y.set(Math.min(y.get()+1e3*e,1e3*i))),C.le(l,b))return o(-1,l)}else if(C.lt(l,m.get())&&(m.set(l),y.set(Math.min(y.get()+1e3*e,1e3*i))),C.ge(a,b))return o(1,a);return s=b+y.get()*(m.get()-b)/1e3,1===g.get()?C.ge(s,l)&&(s=l-r):C.le(s,a)&&(s=a+r),v.set(s),s},C.alma=function(t,e,i,n){var o,r,s,a=Math.floor(i*(e-1)),l=e/n*(e/n),c=[],h=0;for(o=0;o<e;++o)r=Math.exp(-1*Math.pow(o-a,2)/(2*l)),h+=r,c.push(r);for(o=0;o<e;++o)c[o]/=h;for(s=0,o=0;o<e;++o)s+=c[o]*t.get(e-o-1);return s},C.wvap=function(t,e){return t.get()-t.get(1)},C.change=function(t){return t.get()-t.get(1)},C.roc=function(t,e){var i=t.get(e);return 100*(t.get()-i)/i},C.dev=function(t,e,i){var n=C.sma(t,e,i);return C.dev2(t,e,n)},C.dev2=function(t,e,i){var n,o,r,s=0;for(n=0;n<e;n++)o=t.get(n),r=C.abs(o-i),s+=r;return s/e},C.stdev=function(t,e,i){var n=C.variance(t,e,i);return C.sqrt(n)},
C.variance=function(t,e,i){var n=C.sma(t,e,i);return C.variance2(t,n,e)},C.variance2=function(t,e,i){var n,o,r,s=0;for(n=0;n<i;n++)o=t.get(n),r=C.abs(o-e),s+=r*r;return s/i},C.percentrank=function(t,e){var i,n,o,r;if(C.na(t.get(e-1)))return NaN;for(i=0,n=t.get(),o=1;o<e;o++)r=t.get(o),C.ge(n,r)&&i++;return 100*i/e},C.createNewSessionCheck=function(t){var e=_.newBarBuilder(t.symbol.period,t.symbol.session);return function(t){return e.indexOfBar(t)===T.POST_SESSION&&(e.moveTo(t),!0)}},C.error=function(t){throw new n(t)},l.LOW=0,l.HIGH=1,l.prototype.isPivotFound=function(){return-1!==this._pivotIndex.get()},l.prototype.pivotIndex=function(){return this._pivotIndex.get()},l.prototype.currentValue=function(){return this._currentValue.get()},l.prototype.pivotType=function(){return this._pivotType},l.prototype.reset=function(){this._currentValue.set(NaN),this._currentIndex.set(0),this._pivotIndex.set(-1)},l.prototype.isRightSideOk=function(t){return t-this._currentIndex.get()===this._areaRight},l.prototype.isViolate=function(t,e){if(t<1||isNaN(this._currentValue.get()))return!0;var i=this._series.get(this._index-t);return!!isNaN(i)||(i===this._currentValue.get()?e:this._pivotType===l.HIGH?i>this._currentValue.get():i<this._currentValue.get())},l.prototype.processPoint=function(t){this.isViolate(t,!1)&&(this._currentValue.set(this._series.get()),this._currentIndex.set(t))},l.prototype.isRestartNeeded=function(t){return t-this._currentIndex.get()>this._areaRight},l.prototype.update=function(){var t,e;if(this._isNewBar&&this.isPivotFound()&&this.reset(),this.processPoint(this._index),this.isRightSideOk(this._index)){if(-1===this._pivotIndex.get()){for(t=!0,e=0;e<this._areaLeft;++e)if(this.isViolate(this._currentIndex.get()-1-e,!0)){t=!1;break}t&&this._pivotIndex.set(this._currentIndex.get())}}else-1!==this._pivotIndex.get()&&this._pivotIndex.set(-1);if(this.isRestartNeeded(this._index))for(this.reset(),e=0;e<=this._areaRight;++e)this.processPoint(this._index-this._areaRight+e)},c.prototype.addPivot=function(t,e,i){this._lastIndex.set(t),this._lastVal.set(e),this._lastType.set(i)},c.prototype.updatePivot=function(t,e){this._lastIndex.set(t),this._lastVal.set(e)},c.prototype.lastPrice=function(){return this._lastVal.get()},c.prototype.lastIndex=function(){return this._lastIndex.get()},c.prototype.addPoint=function(t,e,i){var n;return isNaN(this._lastVal.get())?void this.addPivot(t,e,i):(n=this._lastVal.get(),this._lastType.get()===i?void((i===l.HIGH?e>n:e<n)&&this.updatePivot(t,e)):void(Math.abs(n-e)/e>this._deviation&&this.addPivot(t,e,i)))},c.prototype.processPivot=function(t){t.update(),this._isBarClosed&&t.isPivotFound()&&this.addPoint(t.pivotIndex(),t.currentValue(),t.pivotType())},C.zigzag=function(t,e,i){return new c(t,e,i).lastPrice()},C.zigzagbars=function(t,e,i){var n=new c(t,e,i);return-1===n.lastIndex()?NaN:n.lastIndex()-C.n(i)},h.prototype.new_sym=function(t,e,i,n){return this.symbol.script.add_sym(t,e,i,void 0,n)},h.prototype.select_sym=function(t){this.symbol=this.symbol.script.get_sym(t)},
h.prototype.new_var=function(t){var e,i=this.vars;return i.length<=this.vars_index&&i.push(new u(this.symbol)),e=i[this.vars_index++],arguments.length>0&&e.set(t),e},h.prototype.new_unlimited_var=function(t){var e,i=this.vars;return i.length<=this.vars_index&&i.push(new d(this.symbol)),e=i[this.vars_index++],arguments.length>0&&e.set(t),e},h.prototype.new_ctx=function(){return this.ctx.length<=this.ctx_index&&this.ctx.push(new h(this.symbol)),this.ctx[this.ctx_index++]},h.prototype.prepare=function(t){var e,i;for(this.ctx_index=0,this.vars_index=0,e=0;e<this.vars.length;e++)this.vars[e].prepare(t);for(i=0;i<this.ctx.length;i++)this.ctx[i].prepare(t)},h.prototype.maxAdditionalDepth=function(){var t,e,i=0;for(t=0;t<this.vars.length;t++)e=this.vars[t].mindepth,!isNaN(e)&&e>i&&(i=e);return i},h.prototype.stop=function(){this.symbol=null,this.vars=null},u.prototype.valueOf=function(){return this.get(0)},u.prototype.get=function(t){return isNaN(t)&&(t=0),t=t||0,this.hist?t>=this.hist.length?(console.error("not enough depth: "+this),NaN):this._get(t):(this.mindepth=C.max(this.mindepth,t),NaN)},u.prototype._get=function(t){var e=this.hist_pos-t;return e<0&&(e+=this.hist.length),this.hist[e]},u.prototype.set=function(t){this.hist&&(this.hist[this.hist_pos]=t,this.modified=!0)},u.prototype.prepare=function(t){t===this.symbol&&(t.isNewBar?(this.original=this.get(0),!this.modified&&this.hist||this.add_hist()):this.set(this.original),this.modified=!1)},u.prototype.add_hist=function(){var t,e,i;if(!this.hist){for(t=C.na(this.mindepth)?C.max_series_default_size:C.max(this.mindepth+1,1),t=Math.round(t),e=Array(t),i=0;i<t;i++)e[i]=NaN;this.hist=e,this.hist_pos=-1}this.hist_pos=Math.min(this.hist_pos+1,this.hist.length),this.hist_pos===this.hist.length&&(this.hist_pos=this.hist.length-1,this.hist.shift(),this.hist.push(NaN)),this.hist[this.hist_pos]=this.original},u.prototype.adopt=function(t,e,i){var n,o,r,s;return this.hist||(this.mindepth=NaN),n=e.get(),o=t.indexOf(n),0!==i&&(r=e.get(1),C.na(r)||(s=t.indexOf(r),o=o===s?-1:o)),o<0?NaN:this._get(o)},u.prototype.indexOf=function(t){var e,i,n,r;return this.hist?C.na(t)?-1:(e=this.hist.length,i=this.symbol.index+1,n=Math.min(e,i),r=o.upperbound_int(this.hist,t,0,n),0===r?-1:n-r):(this.mindepth=NaN,-1)},r(d,u),d.prototype.add_hist=function(){if(this.hist_pos=this.hist_pos+1,this.hist_pos===this.hist.length){var t=new Float64Array(2*this.hist.length);t.set(this.hist),this.hist=t}this.hist[this.hist_pos]=this.original},_.parseTicker=function(t){var e=t.indexOf(":");return-1===e?t:t.substr(e+1)},_.parsePeriod=function(t){var e,i,n,o,r,s,a,l;return t+="",e=t.slice(0),i=e.indexOf(",")>=0,i&&(o=e.split(","),n=_.parsePeriod(o[1]),e=o[0]),r=!1,s=!1,a=e[e.length-1],-1==="DWM".indexOf(a)&&("S"===a?s=!0:(r=!0,a="")),l=parseInt(r?e:e.length>1?e.slice(0,e.length-1):1),{resolution:a,interval:l,pureResolution:""+l+a,isIntraday:r,isSeconds:s,range:n}},_.newBarBuilder=function(t,e,i){var n=_.parsePeriod(t);return T.newBarBuilder(n.resolution,n.interval,e,i)},_.newSession=function(t,e){
var i=P.get_timezone(t);return(new T.Session).init(i,e)},_.prototype.set_symbolinfo=function(t){t||console.error("WARN: symbolinfo isn't defined for "+this.tickerid),this.info=t,this.timezone=P.get_timezone(t.timezone),this.session.init(this.timezone,t.session);for(var e in this.other_sessions)this.other_sessions.hasOwnProperty(e)&&this.other_sessions[e].init(this.timezone,e)},_.prototype.get_session=function(t){if(!t)return this.session;var e=this.other_sessions[t];return e||(e=new T.Session,this.other_sessions[t]=e),e},_.prototype.isdwm=function(){return""!==this.resolution&&"S"!==this.resolution},_.prototype.enable_dwm_aligning=function(t,e){this.dwm_aligner=_.newBarBuilder(this.period,t,e)},_.prototype.bartime=function(t,e){var i,n,o,r,s=this.time;return t&&(i=t,e&&(i+=e),n=this.bb_cache[i],n||(o=this.get_session(e),n=_.newBarBuilder(t,o),this.bb_cache[i]=n),s=n.alignTime(s)),!this.isdwm()||isNaN(s)?s:(r=P.utc_to_cal(this.timezone,s),this.session.spec.correctTradingDay(r,this.timezone),P.cal_to_utc(this.timezone,r))},_.prototype.lastbar=function(t){var e,i;isNaN(t.time)||(e=t.time,this.dwm_aligner&&(this.dwm_aligner.moveTo(e),e=this.dwm_aligner.startOfBar(0)),i=this.time!==e,i&&this.index>=0&&!this.isBarClosed&&(this.isNewBar=!1,this.isBarClosed=!0,this.script.calc(this)),this.time=e,this.open=t.open,this.high=t.high,this.low=t.low,this.close=t.close,this.volume=t.volume,this.updatetime=t.updatetime,this.isNewBar=i,this.isBarClosed=t.isBarClosed,this.isLastBar=t.isLastBar,this.isNewBar&&this.index++,this.script.calc(this))},f.prototype.calc=function(t){var e,i,n=this.ctx,o=this.body;n.prepare(t),e=o.main(n,this.inputCallback),i=this,this.out&&e&&(!isNaN(n.symbol.time)||e.nonseries)&&(e.nonseries?("projection"===e.type&&(e.projectionTime=n.symbol.time),this.nonseriesOut(n.symbol,e)):e.bars?e.bars.forEach(function(t){i.out(n.symbol,t)}):this.out(n.symbol,e))},f.prototype.init=function(){var t=this.ctx,e=this.body;e.init&&e.init(t,this.inputCallback),e.main(t,this.inputCallback)},f.prototype.add_sym=function(t,e,i,n,o){var r=this.runner.add_sym(t,e,i,this,n,o);return this.symbols.push(r),r.isdwm()&&this.symbols.length>1&&r.enable_dwm_aligning(this.symbols[0].session,r.session),r},f.prototype.maxAdditionalDepth=function(){return this.ctx.maxAdditionalDepth()},f.prototype.stop=function(){this.symbols=null,this.ctx.stop(),this.ctx=null},f.prototype.get_sym=function(t){return this.symbols[t]},m.prototype.add_sym=function(t,e,i,n,o,r){var s=new _(t,e,i,n,o,r);return this.symbols.push(s),s},m.prototype.get_sym=function(t){return this.symbols[t]},m.prototype.out=function(t,e){if(this.nonseriesUpdate){var i=$.extend({},this.nonseriesUpdate);e.splice(0,0,t.time),i.lastBar=e,this.host.nonseriesOut(t,i)}else this.host.out(t,e)},m.prototype.start=function(){function t(t,n){var r=m.feed.subscribe(t.tickerid,t.period,t.periodBase,t.periodForInitialRange,function(i){"series"==(i.nonseries?"nonseries":"series")?e.update(n,i):i.lastBar?(e.nonseriesUpdate=i,i.lastBar.isLastBar=!0,e.symbols[0].lastbar(i.lastBar),
e.nonseriesUpdate=null):s.nonseriesOut(t,i)},s.onErrorCallback,s.symbolInfo,s.sessionId,s.rangeExtension,o);i.push(r)}var e,i,n,o,r,s=this.host;for(this._script=new f(s.tickerid,s.period,s.periodBase||s.period,s.periodForInitialRange,this,s.body,this.out.bind(this),s.input,s.symbolInfo.minmov/s.symbolInfo.pricescale,s.nonseriesOut),e=this,i=[],n=this.symbols,o=(s.additionalBarsCount||0)+e._script.maxAdditionalDepth(),r=0;r<n.length;r++)t(n[r],r);this.subscription=i},m.prototype.stop=function(){var t,e=this.subscription;if(!e&&!this._script)return void console.warn("Recurring script engine stop happened.");for(t=0;t<e.length;t++)m.feed.unsubscribe(e[t]);this.subscription=null,this._script.stop(),this._script=null,this.symbols=null},m.prototype.update=function(t,e){var i,n;if(!e)return void console.error("Unexpected barset = null");i=this.symbols[t],this.isRecalculated?(n=e.bar(e.count()-1),n.isBarClosed=e.isLastBarClosed(),n.isLastBar=!0,i.lastbar(n)):this.barsets[t]||(this.barsets[t]=e,i.set_symbolinfo(e.symbolinfo()),this.recalc())},m.prototype.recalc=function(){var t,e,i,n,o,r,s,a=this.symbols;for(t=0;t<a.length;t++)if(!this.barsets[t])return;for(e=a.length-1;e>=0;e--)for(i=a[e],n=this.barsets[e],o=n.count(),r=0;r<o;r++)s=n.bar(r),s.isLastBar=r===o-1,s.isBarClosed=!s.isLastBar||n.isLastBarClosed(),i.lastbar(s);this.isRecalculated=!0,this.barsets[0]&&this.barsets[0].endOfData&&this.host.setNoMoreData(),this.host.recalc(this,{endOfData:this.barsets[0].endOfData,nextTime:this.barsets[0].nextTime})},m.feed={subscribe:function(t,e,i,n){console.error("must be initialized with setupFeed")},unsubscribe:function(t){console.error("must be initialized with setupFeed")}},y.prototype.stop=function(){this.runner.stop()},v.prototype.symbolinfo=function(){return this.info},v.prototype.isLastBarClosed=function(){return this.isBarClosed},v.prototype.setLastBarClosed=function(t){this.isBarClosed=t},v.prototype.bar=function(t){return this.bars[t]},v.prototype.count=function(){return this.bars.length},v.prototype.add=function(t,e){var i=t,n=this.bars,o=n.length,r=i.time,s=0===o?NaN:n[o-1].time;0===o||s<r?n.push(i):s===r?n[o-1]=i:console.error("time order violation, prev: "+new Date(s).toUTCString()+", cur: "+new Date(r).toUTCString()),this.isBarClosed=!!e},b.prototype.init=function(t){this.bb=_.newBarBuilder(this.period,t.symbol.session),this.bbEmptyBars=this.generateEmptyBars?_.newBarBuilder(this.period,t.symbol.session):void 0},b.prototype.extrapolate=function(t,e){return isNaN(t)||isNaN(e)?void 0:T.extrapolateBarsFrontToTime(this.bbEmptyBars,t,e)},b.prototype.main=function(t){
var e=t.symbol.time,i=this.bb.alignTime(e),n=t.new_var(i),o=C.na(i),r=n.get(1),s=C.na(r)?1:C.neq(i,r),a=t.new_var(),l=t.new_var(),c=t.new_var(),h=t.new_var(),u=a.get(1),d=l.get(1),p=c.get(1),_=h.get(1),f=o?NaN:s?C.open(t):u,m=o?NaN:s?C.high(t):C.max(C.high(t),d),g=o?NaN:s?C.low(t):C.min(C.low(t),p),y=o?NaN:C.close(t),v=o?NaN:s?C.volume(t):C.volume(t)+_,b=o?NaN:e,S=t.symbol.isBarClosed&&this.bb.isLastBar(0,e),w=this.generateEmptyBars&&s?this.extrapolate(r,i):void 0,P=t.new_var(C.close(t)),T=P.get(1),x=w instanceof Array?T:NaN;return a.set(f),l.set(m),c.set(g),h.set(v),[i,f,m,g,y,v,b,S,w,x]},S.prototype.main=function(t){return[C.open(t),C.high(t),C.low(t),C.close(t),C.volume(t),C.updatetime(t)]},{Std:C,Series:u,Symbol:_,SymbolInfo:p,StudyEngine:y,BarSet:v,OHLCV:S,BarBuilder:b,setupFeed:g}}();t.exports=a}).call(e,i(98))},function(t,e,i){"use strict";function n(){return s.replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})}function o(){return r(12)}function r(t){var e,i,n="";for(e=0;e<t;++e)i=Math.round(Math.random()*(a.length-1)),n+=a[i];return n}var s,a;Object.defineProperty(e,"__esModule",{value:!0}),e.guid=n,e.randomHash=o,e.randomHashN=r,s="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx",a="0123456789abcdefghijklmopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"},function(t,e,i){"use strict";function n(t){return 0===t.length?1:parseInt(t,10)}var o,r,s,a,l,c;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"ResolutionKind",function(){return s}),i.d(e,"Interval",function(){return c}),o=/^(\d*)([SHDWMR])$/,r=/^(\d+)$/,function(t){t.Seconds="seconds",t.Minutes="minutes",t.Hours="hours",t.Days="days",t.Weeks="weeks",t.Months="months",t.Range="range",t.Invalid="invalid"}(s||(s={})),a={},a[s.Seconds]=1e3,a[s.Minutes]=60*a[s.Seconds],a[s.Hours]=60*a[s.Minutes],a[s.Days]=24*a[s.Hours],a[s.Weeks]=7*a[s.Days],l={S:s.Seconds,H:s.Hours,D:s.Days,W:s.Weeks,M:s.Months,R:s.Range},c=function(){function t(e,i){if(this._kind=s.Invalid,void 0===i&&e!==s.Invalid)return t.parse(e);this._kind=this._validateResolutionKind(e),this._multiplier=this._kind!==s.Invalid?i:void 0,0===this._multiplier&&(this._kind=s.Invalid,this._multiplier=void 0)}return t.prototype.kind=function(){return this._kind},t.prototype.multiplier=function(){return this._multiplier},t.prototype.isValid=function(){return this.kind()!==s.Invalid},t.prototype.isDWM=function(){return this.isValid()&&!this.isRange()&&!this.isIntraday()},t.prototype.isIntraday=function(){var t=-1!==[s.Seconds,s.Minutes,s.Hours].indexOf(this.kind());return this.isValid()&&!this.isRange()&&t},t.prototype.isSeconds=function(){return this.kind()===s.Seconds},t.prototype.isMinutes=function(){return this.kind()===s.Minutes},t.prototype.isHours=function(){return this.kind()===s.Hours},t.prototype.isDays=function(){return this.kind()===s.Days},t.prototype.isWeeks=function(){return this.kind()===s.Weeks},t.prototype.isMonths=function(){return this.kind()===s.Months},t.prototype.isRange=function(){return this.kind()===s.Range},t.prototype.isTimeBased=function(){
return!this.isRange()},t.prototype.letter=function(){return this.isValid()&&this.kind()!==s.Minutes?this.kind()[0].toUpperCase():""},t.prototype.value=function(){return this.isValid()?this.kind()===s.Minutes?this.multiplier()+"":this.multiplier()+this.letter():""},t.prototype.isEqualTo=function(e){if(!(e instanceof t))throw Error("Argument is not an Interval");return!(!this.isValid()||!e.isValid())&&(this.kind()===e.kind()&&this.multiplier()===e.multiplier())},t.prototype.inMilliseconds=function(t){var e,i;return void 0===t&&(t=Date.now()),!this.isValid()||this.isRange()?NaN:this.isMonths()?(e=new Date(t),e.setUTCMonth(e.getUTCMonth()+(this.multiplier()||1)),+e-t):(i=this.multiplier(),void 0===i?NaN:a[this.kind()]*i)},t.isEqual=function(e,i){return t.parse(e).isEqualTo(t.parse(i))},t.parse=function(e){e=(e+"").toUpperCase().split(",")[0];var i=o.exec(e);return null!==i?new t(l[i[2]],n(i[1])):(i=r.exec(e),null!==i?new t(s.Minutes,n(i[1])):new t(s.Invalid))},t.kind=function(e){return t.parse(e).kind()},t.isValid=function(e){return t.parse(e).isValid()},t.isDWM=function(e){return t.parse(e).isDWM()},t.isIntraday=function(e){return t.parse(e).isIntraday()},t.isSeconds=function(e){return t.parse(e).isSeconds()},t.isMinutes=function(e){return t.parse(e).isMinutes()},t.isHours=function(e){return t.parse(e).isHours()},t.isDays=function(e){return t.parse(e).isDays()},t.isWeeks=function(e){return t.parse(e).isWeeks()},t.isMonths=function(e){return t.parse(e).isMonths()},t.isRange=function(e){return t.parse(e).isRange()},t.isTimeBased=function(e){return t.parse(e).isTimeBased()},t.normalize=function(e){var i=new t(e);return i.isValid()?i.value():null},t.prototype._validateResolutionKind=function(t){return t!==s.Seconds&&t!==s.Minutes&&t!==s.Hours&&t!==s.Days&&t!==s.Weeks&&t!==s.Months&&t!==s.Range&&t!==s.Invalid?s.Invalid:t},t}()},,,function(t,e,i){"use strict";(function(t,e){var n,o,r,s,a,l;i(81),n=i(378).regExpEscape,o=i(99).TVXWindowEvents,r=i(187).TVLocalStorage,s=i(8),a=["s.tradingview.com","betacdn.tradingview.com"],l=window.TVSettings=function(){function e(t){return M+"."+t}function i(t,e){var i;return i=O[t],window.is_authenticated&&!W||null!=i||(i=O[t]),null==i?e:i}function c(t,e){var n=i(t,void 0);if(null==n)return e;try{return JSON.parse(n)}catch(i){return f(t),e}}function h(t,e){var n=i(t);return null==n?e:!(!n||"false"===n||0==+n)}function u(t,e,n){var o,r=i(t,void 0,n);if(null==r)return e;if(o=parseFloat(r),!isFinite(o))throw new TypeError('"'+r+'" is not float (key: "'+t+'")');return o}function d(t,e,n){var o,r=i(t,void 0,n);if(null==r)return e;if(o=parseInt(r,10),!isFinite(o))throw new TypeError('"'+r+'" is not int (key: "'+t+'")');return o}function p(t,e,i){i=i||{};var n=""+e;return O[t]!==n&&(O[t]=n,g(t)),i.forceFlush&&!R&&(R=setTimeout(function(){R=void 0,y()},E)),l}function _(t,e,i){return p(t,JSON.stringify(e),i),l}function f(t,e){return e=e||{},null!=O[t]&&(delete O[t],g(t)),e.forceFlush&&y(),l}function m(){V=void 0,D.length&&y()}function g(t){
if(j)null==O[t]?j.removeValue(e(t)):j.setValue(e(t),O[t]);else if(!window.is_authenticated||W)try{null==O[t]?r.removeItem(e(t)):r.setItem(e(t),O[t])}catch(t){}else D.push(t),V||(V=setTimeout(m,A));o.emit("settings",JSON.stringify({key:t,value:O[t]}))}function y(e){var i,n,o,r,s;if(!t.enabled("widget")&&window.is_authenticated&&!W&&0!==D.length){for(i=D,D=[],n={},o=i.length;o--;)r=i[o],s=O[r],void 0===s&&(s=null),n[r]=s;$.ajax({url:"/savesettings/",type:"POST",data:{delta:JSON.stringify(n)},async:!e})}}function v(){return Object.keys(O)}function b(t,e){var i,o=v(e),r=[];for(t=RegExp("^"+n(t).replace(/\\\*\\\*/gi,".+").replace(/\\\*/gi,"[^.]+")+"$","gi"),i=o.length-1;i>=0;i--)t.test(o[i])&&r.push(o[i]),t.lastIndex=0;return r}function S(t){for(var e=0;e<B.length;++e)if(B[e].exec(t))return!0;return!1}function w(){var e,i,n,o,s;for(O={},e=M+".",i=!t.enabled("save_chart_properties_to_local_storage"),n=r.length;n--;)(o=r.key(n))&&o.substring(0,e.length)===e&&(s=o.substring(e.length),i&&!S(s)||(O[s]=r.getItem(o)))}function P(t){var e,i,n,o,s;for(O={},e=0===Object.keys(t).length,i=M+".",n=r.length;n--;)(o=r.key(n))&&o.substring(0,i.length)===i&&(e&&(s=o.substring(i.length),p(s,r.getItem(o))),r.removeItem(o));Object.keys(t).forEach(function(e){O[e]=t[e]+""})}function T(){var t,e,i,n;if(TradingView.onWidget()&&a.includes(window.location.host))for(t="tradingview.",e=r.length;e--;)i=r.key(e),0===i.indexOf(t)&&(n=i.replace(t,M+"."),r.setItem(n,r.getItem(i)),r.removeItem(i))}function C(t){j?P(j.initialSettings||{}):window.is_authenticated&&!W?P(t||{}):(T(),w()),F.fire()}function x(t){j=t}var k,L,I,A,E,M,O,D,V,R,B,F,N=!1,W=t.enabled("cqg_terminal"),j=null;try{N=!TradingView.onWidget()&&parent&&parent!==window&&!!parent.IS_DEMO_PAGE}catch(t){}return N?(k={"widgetbar.layout-settings":{widgets:{},settings:{minimized:!0}},notShowMainWizard:!0},L=function(t,e,i){var n=k[t];return null==n?e:n},I=function(){},{loaded:!1,loadedModel:!1,getValue:L,getJSON:L,getBool:L,getFloat:L,getInt:L,setValue:I,setJSON:I,remove:I,keys:function(){return Object.keys(k)},keysMask:function(){return[]},sync:I,onSync:{subscribe:function(){}}}):(A=12e4,E=10,"local"===window.environment&&(A=5e3),M=TradingView.onWidget()?"tradingview-widget":"tradingview",O={},D=[],B=[/^widgetbar\.widget\.watchlist.+/,/.+quicks$/,/^widgetbar\.layout-settings$/,/^ChartSideToolbarWidget\.visible$/,/^onwidget\.watchlist$/,/^domepanel.visible$/,/^chart\.favoriteDrawings$/,/^chart\.favoriteDrawingsPosition$/,/^loadChartDialog.favorites$/,/^ChartFavoriteDrawingToolbarWidget\.visible/,/^trading\.chart\.proterty$/,/^trading_floating_toolbar\.position$/],o.on("settings",function(t){var e=JSON.parse(t);null==e.value?delete O[e.key]:O[e.key]=e.value}),F=new s,document.addEventListener("visibilitychange",function(){"hidden"!==document.visibiltyState&&!0!==document.hidden||y()}),window.addEventListener("unload",function(){y(!0)}),{loaded:!1,loadedModel:!1,getValue:i,getJSON:c,getBool:h,getFloat:u,getInt:d,setValue:p,setJSON:_,remove:f,keys:v,keysMask:b,sync:C,onSync:F,setSettingsAdapter:x})
}(),void 0!==e&&e&&e.exports&&(e.exports=l)}).call(e,i(4),i(50)(t))},function(t,e,i){"use strict";function n(t,e,i,n,o,r){var s,a,h,u;return Object(l.equalPoints)(t,e)?null:(s=new l.Point(0,0),a=new l.Point(i,n),o?r?(h=Object(c.intersectLineAndRectangle)(Object(l.lineThroughPoints)(t,e),s,a),Array.isArray(h)?h:null):(u=Object(c.intersectRayAndRectangle)(e,t,s,a),null===u||Object(l.equalPoints)(e,u)?null:Object(l.lineSegment)(e,u)):r?(u=Object(c.intersectRayAndRectangle)(t,e,s,a),null===u||Object(l.equalPoints)(t,u)?null:Object(l.lineSegment)(t,u)):(h=Object(c.intersectLineSegmentAndRectangle)(Object(l.lineSegment)(t,e),s,a),Array.isArray(h)?h:null))}function o(t){return.3*t}function r(t){return 2+.5*t}function s(t){return null!==t&&void 0!==t&&!Object(h.isNaN)(t)}function a(t,e){void 0!==e&&Object(u.setLineStyle)(t,e)}var l,c,h,u;Object.defineProperty(e,"__esModule",{value:!0}),e.extendAndClipLineSegment=n,e.optimalBarWidth=o,e.selectionTolerance=r,e.coordinateIsValid=s,e.setValidLineStyle=a,l=i(7),i.n(l),c=i(153),i.n(c),h=i(12),i.n(h),u=i(49),i.n(u)},function(t,e,i){"use strict";function n(t,e,i){var n,o,s;for(e=e||t||i||"",n="",o=0;o<c.length;o++)if((s=e.match(c[o]))&&3===s.length){e=s[1],n=s[2];break}Object(r.emit)(e.toLowerCase().replace(" ","_"),{category:t,label:i,value:n})}function o(t,e,i){var o,r,a;if(s.enabled("charting_library_base"))return void n(t,e,i);o=(t?t+":":"")+e,i&&(o+=" "+i),l.logNormal(o),s.enabled("widget")||(r=window._gaq,window._UNIT_TESTS||void 0===r||(a=["_trackEvent",t,e],void 0!==i&&a.push(i),r.push(a)))}var r,s,a,l,c;Object.defineProperty(e,"__esModule",{value:!0}),e.trackEvent=o,r=i(42),s=i(4),i.n(s),a=i(5),l=Object(a.getLogger)("Common.TrackEvent"),c=[/Study_(Drawing)_(.*)/,/(Study)_(.*)@tv-basicstudies/,/(Study)_(.*)/,/(Chart Style) (.*)/],window.TradingView=window.TradingView||{},window.TradingView.trackEvent=o},,function(t,e,i){"use strict";(function(t){function n(e){e||(e={}),this.checkable=e.checkable||!1,this.checked=e.checked||null,this.enabled=void 0===e.enabled||e.enabled,this.visible=e.visible||!0,this.active=!0,this.font=e.font||"Arial",this.icon=e.icon||null,this.iconText=e.iconText||null,this.iconVisibleInMenu=e.iconVisibleMenu||!0,this.deleteButton=e.deleteButton||null,this.shortcut=null,this.setShortCut(e.shortcut,e.doNotBindShortcut),this.statusTip=e.statusTip||null,this.text=e.text||null,this.toolTip=e.toolTip||null,this.htmlclass=e.htmlclass||null,this.statName=e.statName||null,this._callbackContext=e.callbackContext||this,this._callbacks=new t,this.subActions=e.subActions||[]}function o(){n.call(this),this.font=null,this.subActions=null,this.htmlclass="action-separator"}function r(t){n.call(this),this.deferred=t}var s=i(122);n.prototype.callbacks=function(){return this._callbacks},n.prototype.callbackContext=function(){return this._callbackContext},n.prototype.setCallbackContext=function(t){this._callbackContext=t},n.prototype.hasSubActions=function(){return this.subActions&&this.subActions.length},n.prototype.setChecked=function(t){this.checked=t},
n.prototype._toggleChecked=function(){this.checked=!this.checked},n.prototype.setVisible=function(t){this.visible=t},n.prototype.setEnabled=function(t){this.enabled=t},n.prototype.disable=function(){this.setEnabled(!1)},n.prototype.enable=function(){this.setEnabled(!0)},n.prototype.setActive=function(t){this.active!==t&&(this.active=t,this.shortcut&&!this.doNotBindShortcut&&(t?this._bindShortCut():this._unbindShortCut()))},n.prototype.setShortCut=function(t,e){t&&(this.shortcut=t,!0!==e&&this._bindShortCut())},n.prototype._bindShortCut=function(){s.bind(this.shortcut,function(t){if(t.preventDefault(),this.enabled)return this.executeCallback(),!1}.bind(this))},n.prototype._unbindShortCut=function(){s.unbind(this.shortcut)},n.prototype.setIconVisible=function(t){this.iconVisibleInMenu=t},n.prototype.executeCallback=function(t){this._lastEvent=t,this._toggleChecked(),this._callbacks.fire(this)},inherit(o,n),inherit(r,n),e.Action=n,e.ActionSeparator=o,e.ActionPlaceholder=r}).call(e,i(8))},,function(t,e,i){"use strict";(function(t,e){function n(t){TradingView.merge(this,{palettes:{},inputs:[],plots:[],graphics:{},defaults:{}}),TradingView.merge(this,t);var e=t.fullId||t.id;TradingView.merge(this,n.parseIdString(e)),this.name=this.id}var o=i(6).assert,r=i(5).getLogger("Chart.Study.MetaInfo"),s=i(189).applyOverridesToStudyDefaults,a=i(190).Version,l=null;n.VERSION_STUDY_ARG_SOURCE=41,n.METAINFO_FORMAT_VERSION_SOS_V2=42,n.VERSION_PINE_PROTECT_TV_4164=43,n.CURRENT_METAINFO_FORMAT_VERSION=45,n.CHILD_STUDY_ALLOWED_PLOT_TYPES=["line"],n.CHILD_STUDY_EXCLUDE_IDS=["CorrelationCoefficient@tv-basicstudies"],n.CHILD_STUDY_PARENT_EXCLUDE_IDS=[],n.FilledArea={},n.FilledArea.TYPE_PLOTS="plot_plot",n.FilledArea.TYPE_HLINES="hline_hline",n.versionOf=function(t){var e="_metainfoVersion"in t&&isNumber(t._metainfoVersion)?t._metainfoVersion:0;return e<0&&r.logError("Metainfo format version cannot be negative: "+e),e>n.CURRENT_METAINFO_FORMAT_VERSION&&r.logWarn("Client doesn't support this version of metainfo format: "+e),e},n.parseIdString=function(t){var e,i,n,o,r={};if(-1===t.indexOf("@"))r.shortId=t,r.packageId="tv-basicstudies",r.id=t+"@"+r.packageId,r.version=1;else if(e=t.split("@"),r.shortId=e[0],i=e[1].split("-"),3===i.length)r.packageId=i.slice(0,2).join("-"),r.id=r.shortId+"@"+r.packageId,r.version=i[2];else if(1===i.length&&"decisionbar"===i[0])r.packageId="les-"+i[0],r.id=r.shortId+"@"+r.packageId,r.version=1;else{if(1!==i.length)throw Error("unexpected study id:"+t);r.packageId="tv-"+i[0],r.id=r.shortId+"@"+r.packageId,r.version=1}return r.fullId=r.id+"-"+r.version,"tv-scripting"===r.packageId?(n=r.shortId,0===n.indexOf("Script$")||0===n.indexOf("StrategyScript$")?(o=n.indexOf("_"),r.productId=o>=0?n.substring(0,o):r.packageId):r.productId=r.packageId):r.productId=r.packageId,r},n.getPackageName=function(t){return(/^[^@]+@([^-]+-[^-]+)/.exec(t||"")||[0,"tv-basicstudies"])[1]},n.cutFullId=function(t){return t.replace(/(@[^-]+-[^-]+).*$/,"$1")},n.cutDollarHash=function(t){var e,i,n=t.indexOf("$"),o=t.indexOf("@")
;return-1===n?t:(e=t.substr(0,n),i=o>=0?t.substr(o):"",e+i)},n.cutScriptIdPart=function(t){var e=t.indexOf("$"),i=t.indexOf("@");return e<0&&i>=0?"":t.substring(Math.max(e+1,0),i>=0?i:t.length)},n.hasUserIdSuffix=function(t){return/^USER;[\d\w]+;\d+$/.test(t)},n.isStandardPine=function(t){return/^(Strategy)?Script\$STD;.*@tv-scripting$/.test(t)},n.getSourceIdByInputs=function(t,e){var i,o,r;if(!Array.isArray(t)||!e)return null;for(i=0;i<t.length;++i)if(o=t[i],n.isSourceInput(o)&&"string"==typeof e[o.id])return r=e[o.id],~r.indexOf("$")&&(r=r.split("$")[0]),r;return null},n.getSourceInputIds=function(t){var e,i,o=[],r=t.inputs;for(e=0;e<r.length;++e)i=r[e],n.isSourceInput(i)&&o.push(i.id);return o},n.setChildStudyMetaInfoPropertiesSourceId=function(e,i,o){var r,s,a,l;for(r=0;r<e.inputs.length;++r)s=e.inputs[r],n.isSourceInput(s)&&o instanceof t&&o.inputs&&o.inputs[s.id]&&(a=o.inputs[s.id].value(),a.indexOf("$")>0&&(l=a.replace(/^[^\$]+/,i),o.inputs[s.id].setValue(l)))},n.patchChildStudyMetaInfoState=function(t){function e(t){if("object"==typeof t)for(var i in t)"string"==typeof t[i]&&/^[^\$]+\$\d+$/.test(t[i])?t[i]=t[i].replace(/^[^\$]+/,"{pid}"):e(t[i])}t.state&&e(t.state.inputs),t.state.isChildStudy=!0},n.prototype.parseValue=function(t,e){return"bool"===t?TradingView.parseBool(e):e},n.prototype.defaultInputs=function(){var t,e=[];for(t=0;t<this.inputs.length;t++)e.push(this.inputs[t].defval);return e},n.prototype.state=function(t){var e,i={};for(e in this)this.hasOwnProperty(e)&&(i[e]=this[e],!0!==t&&"id"===e&&(i[e]+="-"+this.version));return i},n.prototype.symbolInputId=function(){var t=this.inputs.filter(function(t){return"symbol"===t.type});return t.length>0?t[0].id:null},n.findStudyMetaInfoByDescription=function(t,e){if(t){for(var i=0;i<t.length;++i)if(t[i].description.toLowerCase()===e.toLowerCase())return t[i];throw Error("unexpected study id:"+e)}throw Error("There is no studies metainfo")},n._findStudyMetaInfo=function(t,e){for(var i=0;i<t.length;i+=1)if(t[i].id===e)return[i,t[i]];return[]},n.findStudyMetaInfo=function(t,e){if(!t)throw new ReferenceError("There is no studies metainfo");var i=n._findStudyMetaInfo(t,e)[1];if(!i)throw new ReferenceError("unexpected study id:"+e);return i},n.isParentSourceId=function(t){return"string"==typeof t&&/^[^\$]+\$\d+$/.test(t)},n.isSourceInput=function(t){return t.id&&(("source"===t.id||"src"===t.id)&&("text"===t.type||"source"===t.type)||"source"===t.type)},n.getChildSourceInputTitles=function(t,e,i){var o,r,s,a,l={};if(e.plots&&e.plots.length&&t.options&&t.options.length)for(o=0;o<t.options.length;++o)r=t.options[o],s=r&&+r.split("$")[1],(a=isFinite(s)&&e.plots[s])&&~n.CHILD_STUDY_ALLOWED_PLOT_TYPES.indexOf(a.type)&&(l[r]=e.styles&&e.styles[a.id]&&e.styles[a.id].title||a.id,i&&(l[r]=i+": "+l[r]));return l},n.removeStudyMetaInfo=function(t,e,i){var o=function(i){return void 0!==(i=void 0!==i?i:n._findStudyMetaInfo(t,e.id)[0])&&(t.splice(i,1),defaults.remove(n.getStudyPropertyRootName(e)),!0)};if(t)return o(i);throw Error("There are no studies metainfo")},
n.getStudyPropertyRootName=function(t){var e="study_"+t.id;return t.pine&&t.pine.version&&(e+="_"+t.pine.version.replace(".","_")),e},n.addOrReplaceStudyMetaInfo=function(t,e){var i,o,s,l,c=new n(e),h=n._findStudyMetaInfo(t,c.id),u=h[0],d=h[1];if(d){if(i=d.pine&&d.pine.version&&a.parse(d.pine.version),null!=(o=c.pine&&c.pine.version&&a.parse(c.pine.version))&&null!=i&&!o.isGreaterOrEqual(i))return c;n.removeStudyMetaInfo(t,c,u)}else n.removeStudyMetaInfo(t,c,u)&&r.logDebug("Study with id="+c.id+" already exists in the model!");return t.push(c),c.defaults&&(s=TradingView.clone(c.defaults),s.precision="default",l=n.getStudyPropertyRootName(c),defaults.create(l,s)),c},n.overrideDefaults=function(t){null!==l&&0!==t.length&&s(l,t,function(t){return TradingView.defaultProperties["study_"+t]||null})},n.setDefaultsOverrides=function(t){l=t},n.createMetaInfoStub=function(t,e){var i,n,r;return o(TradingView.isExistent(t.scriptIdPart),"scriptIdPart is missing, study: "+JSON.stringify(t)),i=t.extra&&"strategy"===t.extra.kind||!0===t.isTVScriptStrategy,n=TVScript.createScriptStudyId(t.scriptIdPart,e,i),r={isTVScriptStubToCompile:!0,id:n,scriptIdPart:t.scriptIdPart,description:t.scriptName,TVScriptSourceCode:t.scriptSource,is_hidden_study:t.extra&&t.extra.is_hidden_study,extra:t.extra,version:e},r.pine={},r.pine.version=TradingView.isExistent(t.version)?t.version:-1,r.pine.access=TVScript.Access.MAP_ID_TO_NAME[t.access],r.pine.userHaveAccess=t.userHaveAccess,!0===i&&(r.isTVScriptStrategy=!0),r},n.isScriptStrategy=function(t){if(t.extra&&t.extra.kind)return t.extra.kind===TVScript.Kinds.STRATEGY;if(!0===t.isTVScriptStrategy)return!0;var e=t.TVScriptSourceCode||t.scriptSource;return!!e&&TVScript.isStrategy(e)},n.replaceWithFullStudyMetaInfoAsync=function(t,e){var i=$.Deferred();return e.isTVScriptStubToCompile||i.resolve(e),i.promise()},n.getOrderedInputIds=function(t){var e,i,n=[],o=t.inputs;for(e=0;e<o.length;++e)i=o[e],n.push(i.id);return n},n.canBeChild=function(t){var e,i,o;if(t&&"string"==typeof t)return!0;if(!t||t.extra&&!n.isAllowedSourceInputsCount(t.extra.sourceInputsCount)||!0===t.canNotBeChild||!1===t.canBeChild||~n.CHILD_STUDY_EXCLUDE_IDS.indexOf(t.id)||t.isTVScriptStrategy||t.TVScriptSourceCode&&TVScript.isStrategy(t.TVScriptSourceCode))return!1;if(t.isTVScriptStubToCompile)return!0;for(e=t.inputs,i=0,o=0;o<e.length;++o)n.isSourceInput(e[o])&&++i;return n.isAllowedSourceInputsCount(i)},n.isAllowedSourceInputsCount=function(t){return 1===t},n.canHaveChildren=function(t){if(t){if(t.isTVScriptStrategy||t.TVScriptSourceCode&&TVScript.isStrategy(t.TVScriptSourceCode))return!1;if(t.id&&!~n.CHILD_STUDY_PARENT_EXCLUDE_IDS.indexOf(t.id)&&Array.isArray(t.plots))for(var e=0;e<t.plots.length;++e)if(~n.CHILD_STUDY_ALLOWED_PLOT_TYPES.indexOf(t.plots[e].type))return!0}return!1},TradingView.StudyMetaInfo=n,void 0!==e&&e&&e.exports&&(e.exports=n)}).call(e,i(16),i(50)(t))},function(t,e,i){"use strict";function n(t){var e,i,n,o,r,s;if(this._name=t,e=u[t],e||(e={time:[],offset:[]},this._invalid=!0),e.time.length!==e.offset.length&&(e={
time:[],offset:[]},this._invalid=!0),!e.time_utc){for(i=e.time,n=e.offset,o=i.length,r=Array(o),s=0;s<o;s++)i[s]*=1e3,n[s]*=1e3,r[s]=i[s]-n[s];e.time_utc=r}this.tz=e}function o(t,e){var i,n,o,s=t.length;if(0===s)return-1;if(isNaN(e))throw Error("Key is NaN");for(i=0,n=s-1,o=r((i+n)/2);;){if(t[o]>e){if((n=o-1)<i)return o}else if(i=o+1,n<i)return o<s-1?o+1:-1;o=r((i+n)/2)}}var r,s,a,l,c,h,u=i(594).tzData;n.prototype.offset_utc=function(t){return n._offset(this.tz.time_utc,this.tz.offset,t)},n.prototype.offset_loc=function(t){return n._offset(this.tz.time,this.tz.offset,t)},n.prototype.is_valid=function(){return!this._invalid},n._offset=function(t,e,i){var n=o(t,i);return-1===n?0:e[n]},r=function(t){return 0|t},s=function(t){return 60*t*1e3},a=function(t){return 1e3*t},l=function(t,e){return r((r(t/1e3)-r(e/1e3))/60)},c=function(t,e){return r(r(t/1e3)-r(e/1e3))},h={SUNDAY:1,MONDAY:2,TUESDAY:3,WEDNESDAY:4,THURSDAY:5,FRIDAY:6,SATURDAY:7,JANUARY:0,DECEMBER:11,YEAR:1,MONTH:2,WEEK_OF_YEAR:3,DAY_OF_MONTH:5,DAY_OF_YEAR:6,DAY_OF_WEEK:7,HOUR_OF_DAY:11,MINUTE:12,SECOND:13,minutesPerDay:1440,secondsPerDay:s(1440),get_minutes_from_hhmm:function(t){return-1!==t.indexOf(":")&&(t=t.split(":").join("")),t%100+60*r(t/100)},get_year:function(t){return t.getUTCFullYear()},get_month:function(t){return t.getUTCMonth()},get_hours:function(t){return t.getUTCHours()},get_minutes:function(t){return t.getUTCMinutes()},get_seconds:function(t){return t.getUTCSeconds()},get_day_of_month:function(t){return t.getUTCDate()},get_day_of_week:function(t){return t.getUTCDay()+1},get_day_of_year:function(t){var e=Date.UTC(t.getUTCFullYear(),0,1,0,0,0,0);return r((t.getTime()-e)/h.secondsPerDay)+1},get_week_of_year:function(t){var e=Date.UTC(t.getUTCFullYear(),0,1,0,0,0,0),i=h.clone(t);return h.set_hms(i,0,0,0,0),i.setUTCDate(i.getUTCDate()+4-(i.getUTCDay()||7)),r(((i.getTime()-e)/h.secondsPerDay+1)/7)},get_minutes_from_midnight:function(t){return 60*h.get_hours(t)+h.get_minutes(t)},set_hms:function(t,e,i,n,o){t.setUTCHours(e),t.setUTCMinutes(i),t.setUTCSeconds(n),t.setUTCMilliseconds(o)},add_days_considering_dst:function(t,e,i){var n,o=t.offset_utc(e),r=this.clone(e);return this.add_date(r,i),n=t.offset_utc(r),r.setTime(r.getTime()+o-n),r},add_date:function(t,e){t.setTime(t.getTime()+e*h.secondsPerDay)},clone:function(t){return new Date(t.getTime())},get_days_per_year:function(t){var e=t.getUTCFullYear();return this.days_per_year(e)},days_per_year:function(t){return t%4!=0||t%100==0&&t%400!=0?365:366},get_part:function(t,e){switch(e){case h.YEAR:return h.get_year(t);case h.MONTH:return h.get_month(t);case h.DAY_OF_MONTH:return h.get_day_of_month(t);case h.WEEK_OF_YEAR:return h.get_week_of_year(t);case h.DAY_OF_WEEK:return h.get_day_of_week(t);case h.HOUR_OF_DAY:return h.get_hours(t);case h.MINUTE:return h.get_minutes(t);case h.DAY_OF_YEAR:return h.get_day_of_year(t);case h.SECOND:return h.get_seconds(t);default:return t.getTime()}},time_minutes:s,time_seconds:a,time_minutes_diff:l,time_seconds_diff:c,utc_to_cal:function(t,e){var i=t.offset_utc(e)
;return new Date(e+i)},get_cal:function(t,e,i,n){var o=new Date(Date.UTC(e,i,n)),r=t.offset_utc(+o);return new Date(o.valueOf()-r)},get_cal_utc:function(t,e,i){return new Date(Date.UTC(t,e,i))},cal_to_utc:function(t,e){var i=e.getTime();return i-t.offset_loc(i)},get_timezone:function(t){return new n(t)},shift_day:function(t,e){var i=t-1;return i+=e,i>6?i%=7:i<0&&(i=(7+i%7)%7),i+1}},t.exports=h},function(t,e,i){"use strict";(function(t){function n(){this._zorder=0,this.m_priceScale=null,this._id=s.randomHashN(6),this._ownerSource=null,this._userEditEnabled=!0,this.hasAlert=new t(!1)}function o(t){n.call(this),this._isOverlay=null,this._model=t}var r=i(3).DefaultProperty,s=i(22);n.prototype.createPropertiesObject=function(t,e,i){return new r(t,e,i)},n.prototype.id=function(){return this._id},n.prototype.preferNoScale=function(){return!1},n.prototype.idForAlert=function(){return this._id},n.prototype.setId=function(t){this._id=t},n.prototype.zorder=function(){return this._zorder},n.prototype.setZorder=function(t){"number"==typeof t&&this._zorder!==t&&(this._zorder=t)},n.prototype.title=function(){throw Error("Implement this fun in a subclass")},n.prototype.priceScale=function(){return this.m_priceScale},n.prototype.setPriceScale=function(t){this.m_priceScale=t},n.prototype.ownerSource=function(){return this._ownerSource},n.prototype.setOwnerSource=function(t){this._ownerSource=t,t&&this.setPriceScale(t.priceScale())},n.prototype.isSavedInChart=function(t){return!0},n.prototype.isSavedInStudyTemplates=function(){return!0},n.prototype.isRemovedByStudyTemplates=function(){return!0},n.prototype.hasContextMenu=function(){return!0},n.prototype.showInObjectTree=function(){return!0},n.prototype.setUserEditEnabled=function(t){this._userEditEnabled=t},n.prototype.userEditEnabled=function(){return this._userEditEnabled},n.prototype.canBeHidden=function(){return this.userEditEnabled()},n.prototype.isUserDeletable=function(){return this.userEditEnabled()},n.prototype.canHasAlert=function(){return!1},n.prototype.properties=function(){throw Error("Implement this fun in a subclass")},n.prototype.statusView=function(){return null},n.prototype.dataWindowView=function(){return null},n.prototype.legendView=function(){return null},n.prototype.priceAxisViews=function(t,e){return null},n.prototype.updateAllViews=function(){},n.prototype.paneViews=function(t){return null},n.prototype.isChildStudy=function(){return!1},n.prototype.hasChildren=function(){return!1},n.prototype.canHaveChildren=function(){return!1},n.prototype.onClickOutside=function(){},n.prototype.getInputsPropertyPage=function(){return null},n.prototype.getStylesPropertyPage=function(){return null},n.prototype.getDisplayPropertyPage=function(){return null},n.prototype.getVisibilitiesPropertyPage=function(){return null},n.prototype.getStrategyPropertyPage=function(){return null},n.prototype.getSourceIcon=function(){return null},n.prototype.doesMovingAffectsUndo=function(){return!0},inherit(o,n),o.prototype.isNoScale=function(){return!!this._isOverlay},o.prototype.base=function(){
return 0},o.prototype.formatter=function(){return null},o.prototype.model=function(){return this._model},o.prototype.priceRange=function(t,e){return null},o.prototype.isDraggable=function(){return!this._metaInfo||!this._metaInfo.linkedToSeries},o.prototype.priceLineColor=function(t){return t},e.DataSource=n,e.PriceDataSource=o}).call(e,i(15))},function(t,e,i){"use strict";function n(t,e,i){var n,o,r,l,c;if(e=e||0,!s(t))return i?Object(a.rgbaToString)(Object(a.rgba)(Object(a.parseRgb)(t),Object(a.normalizeAlphaComponent)(1-e/100))):t;if(e<0&&e>100)throw Error("invalid transparency");return n=Object(a.parseRgb)(t),o=n[0],r=n[1],l=n[2],c=Object(a.normalizeAlphaComponent)(1-e/100),Object(a.rgbaToString)([o,r,l,c])}function o(t){return s(t)?t:Object(a.rgbaToString)(Object(a.rgba)(Object(a.parseRgb)(t),Object(a.normalizeAlphaComponent)(1)))}function r(t){var e=Object(a.parseRgb)(t).map(function(t){return t/=255,t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)});return+(.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3)}function s(t){return 0===t.indexOf("#")}var a;Object.defineProperty(e,"__esModule",{value:!0}),e.generateColor=n,e.resetTransparency=o,e.getLuminance=r,e.isHexColor=s,a=i(29),i.n(a)},function(t,e,i){"use strict";function n(t){return""!==t&&h&&void 0!==t&&null!==t?u+t:t}function o(t){return""!==t&&h&&void 0!==t&&null!==t?d+t+_:t}function r(t){return""!==t&&h&&void 0!==t&&null!==t?p+t+_:t}function s(t){return Object(c.getNormalizedScrollLeft)(t,"rtl")}function a(t,e){var i=Object(c.detectScrollType)();if("indeterminate"===i)return 0;switch(i){case"negative":e=t.clientWidth-t.scrollWidth+e;break;case"reverse":e=t.scrollWidth-t.clientWidth-e}return e}function l(t){var e=f.exec(t);return e?m.test(e[0])?"rtl":"ltr":""}var c,h,u,d,p,_,f,m;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"IS_RTL",function(){return h}),e.startWithLTR=n,e.forceLTRStr=o,e.forceRTLStr=r,e.getLTRScrollLeft=s,e.getLTRScrollLeftOffset=a,e.detectAutoDirection=l,c=i(542),i.n(c),h="rtl"===document.dir,u="‎",d="‪",p="‫",_="‬",f=/[^\u0000-\u0040\u005B-\u0060\u007B-\u00BF\u00D7\u00F7\u02B9-\u02FF\u2000-\u200E\u2010-\u2029\u202C\u202F-\u2BFF]/,m=/[\u0590-\u07FF\u200F\u202B\u202E\uFB1D-\uFDFD\uFE70-\uFEFC]/},function(t,e,i){"use strict";function n(t,e,i){var n=e.subtract(t),o=i.subtract(t),r=o.dotProduct(n)/n.dotProduct(n);return{coeff:r,distance:t.addScaled(n,r).subtract(i).length()}}function o(t,e,i){var o,r,s=n(t,e,i);return 0<=s.coeff&&s.coeff<=1?s:(o=t.subtract(i).length(),r=e.subtract(i).length(),o<r?{coeff:0,distance:o}:{coeff:1,distance:r})}Object.defineProperty(e,"__esModule",{value:!0}),e.distanceToLine=n,e.distanceToSegment=o},function(t,e,i){"use strict";(function(e,n,o){function r(t){return"cursor"===t||"arrow"===t||"dot"===t}function s(t){!t&&u&&u.stayInDrawingMode.value()||this.tool.setValue(this.cursorTool.value())}function a(t,e){return function(e){t.inFire||(t.inFire=!0,t.fire(e),t.inFire=!1)}}function l(){K||(g.setValue(TVSettings.getValue("chart.cursorPreference","cursor")),g.subscribe(function(t){r(t)&&y.setValue(t)},{
callWithLast:!0}),y.subscribe(function(t){t&&TVSettings.setValue("chart.cursorPreference",t)}),u=new c("drawings"),d=new o,p=new o,_=new o,f=new o,d.setValue(!1),p.setValue(!1),_.setValue(!1),f.setValue(!1),g.subscribe(function(){h.emit("onSelectedLineToolChanged")}),K=!0)}var c=i(3).DefaultProperty,h=i(42),u=null,d=null,p=null,_=null,f=null,m=new e,g=new e,y=new e,v=new n,b=new n,S=new n,w=new n,P=new n,T=new n,C=new n,x=new n,k=new n,L=new n,I=new n,A=new n,E=new n,M=new n,O=new n,D=a(v),V=a(b),R=a(S),B=a(w),F=a(P),N=a(T),W=a(C),j=a(x),H=a(k),U=a(L),z=a(I),$=a(A),q=a(E),Y=a(M),G=a(O),K=!1;t.exports={tool:g,cursorTool:y,toolIsCursor:r,resetToCursor:s,init:l,createdLineTool:v,continuedLineTool:b,cancelledLineTool:S,createLineTool:D,continueLineTool:V,cancelLineTool:R,startedMovingLineTool:w,movedLineTool:P,finishedMovingLineTool:T,startMovingLineTool:B,moveLineTool:F,finishMovingLineTool:N,startedChangingLineTool:C,changedLineTool:x,finishedChangingLineTool:k,startChangingLineTool:W,changeLineTool:j,finishChangingLineTool:H,removedLineTool:L,removeLineTool:U,restoredLineTool:M,restoreLineTool:Y,restoredLineToolState:O,restoreLineToolState:G,finishedLineTool:I,finishLineTool:z,changedLineStyle:A,changeLineStyle:$,copiedLineTool:E,copyLineTool:q,properties:function(){return u},hideAllDrawings:function(){return d},hideMarksOnBars:function(){return _},lockDrawings:function(){return p},drawOnAllCharts:function(){return u.drawOnAllCharts},lockTimeAxis:function(){return f},lockTimeAxisTime:m}}).call(e,i(15),i(8),i(16))},function(t,e,i){"use strict";(function(e,n,o,r){function s(t,e,i,n){this._study=t,this.m_series=e,this.m_model=i,this._plotName=n,this._visible=!1,this._points=[new it(0,0)],this._invalidated=!0,this._lineRenderer=new T}function a(){return{visible:!0,color:"#0496FF",linestyle:CanvasEx.LINESTYLE_SOLID,linewidth:2,plottype:ft.Line,histogramBase:0,transparency:50,trackPrice:!1,joinPoints:!1}}function l(t,e,i,n,o){return c(t,e,i,n,pt.getStudyPropertyRootName(t),o)}function c(t,e,i,n,o,r){var s,a,l,c,h,u=d(t,e,i,n);for(r instanceof g&&(s=pt.getSourceInputIds(t),s.length>0&&(a=s[0],u.inputs[a]="{pid}$0")),l=new ot(o,u,!0),l.addExclusion("visible"),l.addExclusion("precision"),l.addExclusion("minTick"),c=0;c<t.inputs.length;++c)h=t.inputs[c],h.isHidden&&(l.addExclusion("inputs."+c),l.addExclusion("inputs."+h.id));return l}function h(t,e,i,n,o,r){return u(t,e,i,n,o,pt.getStudyPropertyRootName(t),r)}function u(t,e,i,n,o,r,s){var a,l,c,h=p(t,e,i,n,o),u=new ot(r,h,!0);for(u.addExclusion("visible"),u.addExclusion("precision"),u.addExclusion("minTick"),a=e||t,l=0;l<a.inputs.length;++l)c=a.inputs[l],c.isHidden&&(u.addExclusion("inputs."+l),u.addExclusion("inputs."+c.id));return u}function d(t,n,o,r){var s,a,l,c,h,u,d,p,g=i(201);if(pt.versionOf(t)<1)throw Error("This function cannot work with metainfo of the old format version. Required format version >= 1");return s=TradingView.clone(defaults("study")),_(s,t),a=pt.getStudyPropertyRootName(t),l=TradingView.clone(defaults(a,r)),
t.isTVScript&&t.TVScriptSourceCode!==l.TVScriptSourceCode&&(l=TradingView.clone(TradingView.factoryDefaults(a,r))),TradingView.merge(s,l),n&&(b(!(n instanceof e),"propsState should not be an instance of Property"),TradingView.merge(s,n)),c=TradingView.clone(t),h={},g.mergeInputsObjPart(h,c.defaults.inputs),g.mergeInputsObjPart(h,s.inputs),s.inputs=h,delete c.inputs,delete c.defaults.inputs,u={},TradingView.merge(u,c.defaults),TradingView.merge(u,TradingView.factoryDefaults("study_"+c.id)),TradingView.merge(u,s),TradingView.merge(u,c),delete u.defaults,s=u,d=null!==o?o.model().getStudyShiftColorStartOffset():void 0,p=f(o,t),TradingView.merge(s,m(s,p,d)),n&&TradingView.merge(s.styles,n.styles),s}function p(t,e,n,o,r){var s,a,l,c,h,u,d=i(201);return t.version&&n.version&&t.version!==n.version&&gt.logWarn("Serialized metaInfo version "+t.version+" is not equal to the saved state version "+n.version),s=TradingView.clone(defaults("study")),TradingView.merge(s,TradingView.factoryDefaults("study_"+t.id)),_(s,t),TradingView.merge(s,n),s=r.updateStudyState(s,t,e),a=TradingView.clone(e||t),a&&pt.versionOf(a)>=1&&(l={},d.mergeInputsObjPart(l,a.defaults.inputs),d.mergeInputsObjPart(l,s.inputs),s.inputs=l,delete a.inputs,delete a.defaults.inputs,c={},TradingView.merge(c,a.defaults),TradingView.merge(c,TradingView.factoryDefaults("study_"+a.id)),TradingView.merge(c,s),delete a.defaults,TradingView.merge(c,a),s=c),h=null!==o?o.model().getStudyShiftColorStartOffset():void 0,u=f(o,a),TradingView.merge(s,m(s,u,h)),s}function _(t,e){var i,n,o,r;if(e.plots)for(i=0;i<e.plots.length;i++)n=e.plots[i],o=n.id,_t.isColorerPlot(n)||(r=a(),_t.isBarColorerPlot(n)&&(r.transparency=0),r.plottype=n.type,r.title=o,t.styles&&o in t.styles&&TradingView.merge(r,t.styles[o]),t.styles[o]=r)}function f(t,e){var i,n,o,r,s=0;if(t)for(i=0;i<t.dataSources().length;i++)n=t.dataSources()[i],n.metaInfo&&n.metaInfo()&&(o=n.metaInfo().id===e.id,r=(n.metaInfo().pine&&n.metaInfo().pine.version)===(e.pine&&e.pine.version),o&&r&&s++);return s}function m(t,e,i){var n,o;if(!e)return t;for(n in t.styles)(o=t.styles[n].color)&&(t.styles[n].color=nt(o,e,i));return t}function g(t,e,r,s){var a,l,c,h,u,d,p,_,f,m,y=i(139);for(this._titleCache={},this._resolvedSymbols={},this._priceAxisViewsBase=[],this._paneViews=[],this._hlinesPriceAsisViews=[],this._horizlinesPriceAsisViews=[],j.call(this,t),this._model=t,this._chartApi=t._chartApi,this._series=r instanceof TradingView.Series?r:this._model.mainSeries(),r instanceof g&&(this._source=r,this._isChildStudy=!0,this._source.setChild(this)),this._numericFormatter=new at,this._metaInfo=s,this._properties=e,this._properties.listeners().subscribe(this,this.changeStyles),this._properties.visible.listeners().subscribe(this,this.visibleChanged),this._properties.visible.listeners().subscribe(this,this.processHibernate),a=0;a<this._metaInfo.plots.length;a++)l=this._metaInfo.plots[a].id,null!=(c=this.properties().styles[l])&&null!=c.visible&&c.visible.listeners().subscribe(this,this.processHibernate)
;for(h in this._metaInfo.graphics)for(u in this._metaInfo.graphics[h])d=this._properties.graphics[h][u],d.visible&&d.visible.listeners().subscribe(this,this.processHibernate);if(this._showStudyArgumentsProperty=this.model().properties().paneProperties.legendProperties.showStudyArguments,this._turnaroundCounter=0,this._turnaround="st"+this._turnaroundCounter,this._status="",this._plotFields=[],p=this.metaInfo().plots)for(a=0,_=p.length;a<_;a++)u=p[a].id,this._plotFields.push(u);this._invalidateLastNonEmptyPlotRowCache(),this.m_data=new ct(this._plotFields),this._graphics=new J,this._plotOffsets={},this._plotOffsetsMetaInfoOverride={},this._studyModified=!1,this._tagsChanged=new n,this.createViews(),f=this,this._handler=function(t){f.onData(t)},this._handler.isTVScriptStrategy=this._metaInfo.isTVScriptStrategy,this._createFormatter(),f=this,this._properties.precision.listeners().subscribe(null,function(){f._createFormatter(),f._model.invalidate(new tt(tt.FULL_UPDATE))}),this._showStudyArgumentsProperty.listeners().subscribe(this,this.invalidateTitleCache),this._properties.description.listeners().subscribe(this,this.invalidateTitleCache),this._properties.inputs.listeners().subscribe(this,this.invalidateTitleCache),this._properties.shortDescription&&this._properties.shortDescription.listeners().subscribe(this,this.invalidateTitleCache),o.enabled("update_study_formatter_on_symbol_resolve")&&t.mainSeries().onSymbolResolved().subscribe(this,g.prototype._createFormatter),f=this,m={},this._simplePlotsCount=s.plots.filter(function(t,e){if(f.isLinePlot(e))return!0;if(f.isOHLCSeriesPlot(e)){var i=f.metaInfo().plots[e].target;return!m[i]&&(m[i]=i,!0)}return!1}).length,this._properties.showInDataWindow.listeners().subscribe(t,y.prototype.fullUpdate),this.hasBarColorer()&&this._properties.visible.listeners().subscribe(t.mainSeries(),TradingView.Series.prototype.invalidateBarStylesCache),this.onStart=new n,this._childStudyByRebind=new n,this._symbolsResolved=new n}function y(t,e){return t&&t[e]&&t[e].hasOwnProperty("showLast")?t[e].showLast.value():null}
var v=i(6),b=v.assert,S=v.ensureNotNull,w=i(322).unpackNonSeriesData,P=i(197).StudyBarColorer,T=i(124).HorizontalLineRenderer,C=i(631),x=C.BandPaneView,k=C.BandBackgroundPaneView,L=C.HlineFillPaneView,I=i(632).StudyPriceAxisView,A=i(633),E=A.StudyPaneView,M=A.StudyBackgroundPaneView,O=A.StudyPlotShapesPaneView,D=A.StudyPlotCharsPaneView,V=A.StudyPlotArrowsPaneView,R=A.StudyPlotBarsPaneView,B=A.StudyPlotCandlesPaneView,F=i(650),N=F.PlotFillPaneView,W=F.AreaBackgroundPaneView,j=i(34).PriceDataSource,H=i(112),U=i(136).StudyDataWindowView,z=i(651).StudyLegendView,q=i(138),Y=i(652),G=Y.emptyStudyGraphics,K=Y.loadStudyGraphics,X=Y.saveStudyGraphics,J=Y.LiveStudyGraphics,Z=Y.createGraphicsPaneViews,Q=Y.createGraphicsPriceAxisViews,tt=i(17),et=i(329).ChartApiInterface,it=i(7).Point,nt=i(29).shiftColor,ot=i(3).DefaultProperty,rt=i(13).PriceFormatter,st=i(246).VolumeFormatter,at=i(68).NumericFormatter,lt=i(20),ct=lt.PlotList,ht=lt.PlotRowSearchMode,ut=lt.mergeMinMax,dt=i(251).MarkLocation,pt=i(32),_t=i(96),ft=_t.PlotType,mt=i(2).propertyPages,gt=i(5).getLogger("Chart.Study");s.prototype.update=function(){this._invalidated=!0},s.prototype.updateImpl=function(){this._visible=!1;var t=this._study.lastValueData(this._plotName,!0);t.noData||(this._visible=!0,this._points=[new it(0,t.coordinate)],this._color=t.color)},s.prototype.renderer=function(){this._invalidated&&(this.updateImpl(),this._invalidated=!1);var t={};return t.width=this.m_model.timeScale().width(),t.height=this._study.priceScale().height(),t.points=this._points,t.color=this._color,t.linewidth=this._study.properties().styles[this._plotName].linewidth.value(),t.linestyle=CanvasEx.LINESTYLE_DOTTED,t.visible=this._visible,this._lineRenderer.setData(t),this._lineRenderer},inherit(g,j),TradingView.Study=g,g.prototype.lastValueData=function(t,e,i){var n,o,r,s,a,l,c,h,u,d,p,_,f,m,g,y,v,b,S,w,P,T,C={noData:!0};if(this._model.timeScale().isEmpty()||null==this.priceScale()||this.priceScale().isEmpty()||this.data().isEmpty())return C;if(null===(n=this._model.timeScale().visibleBars()))return C;if(!this.properties().visible.value())return C;if(o=this.properties().styles,r=this.properties().ohlcPlots,o&&o[t]&&(s=o[t]),r&&r[t]&&(s=r[t]),!s||!s.visible.value())return C;if(a=this.offset(t),null==(l=this.nearestIndex(n.lastBar()-a,ht.NearestLeft))||void 0===l)return C;for(h=this.metaInfo().plots,c=0;c<h.length&&!(h[c].id===t||this.isOHLCClosePlot(c)&&h[c].target===t);c++);if(u=this._lastNonEmptyPlotRow(c),d=null!==u&&n.contains(u.index),p=null!==u?u.value:null,!(_=e||d?p:this.data().valueAt(l))||!isNumber(_[c+1]))return C;for(f={noData:!1},m=null,g=null,v=0;v<h.length;v++)h[v].target===t&&(this.isSelfColorerPlot(v)||this.isOHLCColorerPlot(v))&&(m=v,g=this.metaInfo().palettes[h[v].palette],y=this.properties().palettes[h[v].palette]);return b=_[c+1],i&&(f.price=b),(S=this.firstValue(!0))?(f.text=this.priceScale().formatPrice(b,S),w=s.color.value(),m&&_.length>m+1?(P=_[m+1],void 0!==P&&null!==P?(T=g.valToIndex?g.valToIndex[P]:P,f.color=y.colors[T].color.value()):f.color=w):f.color=w,
f.floatCoordinate=this.priceScale().priceToCoordinate(b,S,!0),f.coordinate=Math.round(f.floatCoordinate),f.item=_,f):C},g.prototype.isFailed=function(){return this._failed},g.prototype.series=function(){return this._series},g.prototype.model=function(){return this._model},g.prototype._invalidateLastNonEmptyPlotRowCache=function(){this._lastNonEmptyPlotRowCache={}},g.prototype.clearData=function(){this._invalidateLastNonEmptyPlotRowCache(),this.m_data.clear(),this._graphics.clear&&this._graphics.clear(),this._plotOffsets={}},g.prototype.onTagsChanged=function(){return this._tagsChanged},g.prototype.properties=function(){return this._properties},g.prototype.state=function(t){var e,i,n,o,r=TradingView.className(this.constructor),s={type:r,id:this.id(),state:this.properties().state(),zorder:this.zorder()};for(this.metaInfo()instanceof pt?s.metaInfo=TradingView.clone(this.metaInfo().state()):(s.metaInfo=TradingView.clone(this.metaInfo()),s.metaInfo.id=pt.parseIdString(s.metaInfo.id+(s.metaInfo.version?"-"+s.metaInfo.version:"")).fullId),t&&(s.data=this.data().state(),s.data.symbols=this._resolvedSymbols,s.data.graphics=X(this.graphics()),s.data.plotOffsets=this._plotOffsets),this.ownerSource()&&(s.ownerSource=this.ownerSource().id()),e=0;e<this._metaInfo.inputs.length;e++)"bar_time"===this._metaInfo.inputs[e].type&&(i=this._metaInfo.inputs[e].id,(n=s.state.inputs[i])<0&&(o=this._rightOffsetToUnixTime(-n),s.state.inputs[i]=o&&o>=0?o:0));return this._isChildStudy&&pt.patchChildStudyMetaInfoState(s),s},g.prototype._plotsForAlert=function(){var t=this,e=this._metaInfo,i=[_t.isLinePlot,_t.isShapesPlot,_t.isCharsPlot,_t.isArrowsPlot,_t.isOhlcPlot];return e.plots.map(function(t,e){return t.pinePlotIndex=e,t}).filter(function(t){return i.some(function(e){return e(t)})}).map(function(i){var n={id:i.id,type:i.type,pinePlotIndex:i.pinePlotIndex,offset:t.offset(i.id)};return e.styles&&void 0!==e.styles[i.id]&&(n.title=e.styles[i.id].title||""),i.target&&e.ohlcPlots&&e.ohlcPlots[i.target]&&(n.ohlcTitle=e.ohlcPlots[i.target].title),n})},g.prototype.isSavedInStudyTemplates=function(){for(var t=0;t<this._metaInfo.inputs.length;t++)if("bar_time"===this._metaInfo.inputs[t].type)return!1;return!0},g.prototype.restoreData=function(t){this._invalidateLastNonEmptyPlotRowCache(),this.m_data.restoreState(t),this._resolvedSymbols=t.symbols,this._graphics=t.graphics?K(t.graphics):G(),this._postProcessGraphics(),this._plotOffsets=t.plotOffsets},g.prototype.restart=function(){this._restarting=!0,this.clearData(),o.enabled("stop_study_on_restart")&&this.stop(),setTimeout(this.start.bind(this),0)},g.prototype.stop=function(t){if(!0===t&&this._children)for(var e=0;e<this._children.length;++e)this._children[e].stop(!0);this._chartApi&&this._chartApi.connected()&&this._studyId&&this._chartApi.removeStudy(this._studyId,this._handler,this._isChildStudy),o.enabled("update_study_formatter_on_symbol_resolve")&&this._model.mainSeries().onSymbolResolved().unsubscribe(this,g.prototype._createFormatter),this._studyId=null,this.clearData(),
this._unsubscribeExtendedHours(),this.recalculate()},g.prototype.symbolsResolved=function(){return this._symbolsResolved},g.prototype.resolvedSymbolInfoBySymbol=function(t){return this._resolvedSymbols&&t?this._resolvedSymbols[t]||null:null},g.prototype._resolveSymbol=function(t){var e=function(i,n){this._chartApi.resolveSymbol(this._makeNextSymbolId(),i,function(i){switch(i.method){case"symbol_resolved":this._resolvedSymbols[t]=i.params[1],this.invalidateTitleCache(!0),n.resolve(t);break;case"symbol_error":if("permission denied"===i.params[1]&&i.params[2])switch(i.params[2]){case TradingView.Series.PD_REASON_EXTENDED_HOURS:break;case TradingView.Series.PD_REASON_SYMBOL:if(i.params[3])return void e(i.params[3],n);break;default:return void e(i.params[2],n)}n.reject(t)}}.bind(this))}.bind(this),i=$.Deferred();return e(t,i),i.promise()},g.prototype._allSymbolsAreResolved=function(){var t,e,i,n,o=$.Deferred(),r=[];for(t=0;t<this._metaInfo.inputs.length;t++)"symbol"===this._metaInfo.inputs[t].type&&(e=this._metaInfo.inputs[t].id,i=this._properties.inputs[e].value(),this._resolvedSymbols[i]||(n=this._resolveSymbol(i),r.push(n)));return r.length>0?$.when.apply($,r).done(function(){0!==this._studyId&&this.stop(!0),this.start(!0),o.resolve("All symbols are resolved now"),this._symbolsResolved.fire()}.bind(this)).fail(function(t){this._status=window.t("Invalid Symbol"),this.stop(!0),this._model.updateSource(this),o.reject("Invalid symbol, "+t)}.bind(this)):o.resolve("There are no symbols to resolve"),o.promise()},g.prototype._allInputsAreValid=function(){var t,e,i;for(t=0;t<this._metaInfo.inputs.length;t++)if("bar_time"===this._metaInfo.inputs[t].type&&(e=this._metaInfo.inputs[t].id,void 0===(i=this._properties.inputs[e].value())||null==i))return!1;return!0},g.prototype.sourceId=function(){return this._studyId},g.prototype.source=function(){return this._source||this._series},g.prototype.ownerSource=function(){return this._isChildStudy?this._source:j.prototype.ownerSource.call(this)},g.prototype.getAllOwnerSources=function(){for(var t=[],e=this.ownerSource();null!=e;)t.push(e),e=e.ownerSource();return t},g.prototype.isChildStudy=function(){return!!this._isChildStudy},g.prototype.setChild=function(t){t instanceof g&&t.source()===this&&(this._children||(this._children=[]),-1===this._children.indexOf(t)&&this._children.push(t))},g.prototype.unsetChild=function(t){if(t instanceof g&&t.source()===this&&this._children){var e=this._children.indexOf(t);~e&&this._children.splice(e,1)}},g.prototype.hasChildren=function(){return!(!this._children||!this._children.length)},g.prototype.getAllChildren=function(){var t,e,i,n;if(!Array.isArray(this._children))return[];for(t=this._children.slice(),e=0;e<t.length;++e)for(i=t[e].getAllChildren(),n=0;n<i.length;++n)~t.indexOf(i[n])||t.push(i[n]);return t},g.prototype._debugId=function(){var t=[];return this._studyId&&t.push(this._studyId),t.push(this._metaInfo.fullId),t.push(this._metaInfo.description),JSON.stringify({study:t})},g.prototype.isStarted=function(){return!!this._studyId},
g.prototype.isRestarting=function(){return!!this._restarting},g.prototype.isVisible=function(){var t,e,i;if(!this.properties().visible.value())return!1;if(this._metaInfo.plots.length>0)return!0;for(t in this._metaInfo.graphics)for(e in this._metaInfo.graphics[t])if(i=this.properties().graphics[t][e],!i.visible||i.visible.value())return!0;return!!this._metaInfo.isTVScriptStrategy},g.prototype.start=function(t,e){var i,n=this._model.mainSeries();if(!n.isStarted())return void n.onCompleted().subscribe(this,function(){this.start(t,e)},!0);this._isChildStudy&&this._source.isHibernated()&&this._source.start(),i=!this._isChildStudy&&!this.hasChildren()&&!this.isVisible(),!this._chartApi||!this._chartApi.connected()||i&&!0!==e||this._allSymbolsAreResolved().done(function(i){this._startAfterSymbolsResolved(t,e)}.bind(this)).fail(function(t){gt.logError("ERROR: "+this._debugId()+" start failed, "+t),delete this._restarting}.bind(this))},g.prototype._getStudyIdWithLatestVersion=function(){var t=pt.cutDollarHash(this._metaInfo.id),e=t;return t.indexOf("@tv-scripting")>=0?e+="-101!":e+="-"+this._metaInfo.version,e},g.prototype._startAfterSymbolsResolved=function(t,e){var i,n;if(!this.isStarted()||this._restarting){if(this._isChildStudy){if(!this._source.isStarted()||this._source.isRestarting())return void this._source.onStart.subscribe(this,this._startAfterSymbolsResolved,!0);pt.setChildStudyMetaInfoPropertiesSourceId(this._metaInfo,this._source.sourceId(),this._properties)}if(this._studyId=g.makeNextStudyId(),delete this._restarting,this._allInputsAreValid()&&(this._inputs=this.inputs(),i=this._getStudyIdWithLatestVersion(),this._incrementTurnaround(),this._chartApi.createStudy(this._studyId,this._turnaround,this._isChildStudy?this._source.sourceId():this._series._seriesId,i,this._inputs,this._handler,this._isChildStudy),this._studyName=i,this._subscribeExtendedHours(),this.onStart.fire(this._studyId),!0===t&&this._children))for(n=0;n<this._children.length;++n)this._children[n].start(!0,e)}},g._nextSymbolId=0,g.prototype._makeNextSymbolId=function(){return"ss_"+ ++g._nextSymbolId},g._nextStudyId=0,g.makeNextStudyId=function(){return"st"+ ++g._nextStudyId},g.prototype._rightOffsetToUnixTime=function(t){var e;return this._series.bars().size()>=t&&(e=S(this._series.bars().lastIndex())-t,S(this._series.bars().valueAt(e))[TradingView.TIME_PLOT]),null},g.prototype.getSymbolString=function(t){return this._series&&this._series.extendedHours.value()?"="+JSON.stringify({symbol:t,session:"extended"}):t},g.prototype.inputsForGUI=function(){return this.inputs({symbolsForDisplay:!0,skipHiddenInputs:!0,skipFakeInputs:!1,fakeInputsForDisplay:!0,asObject:!1})},g.prototype.inputsForAlert=function(){var t=this.offset(),e=this.inputs();return t&&e.push(t),e},g.prototype.inputs=function(t){var e={symbolsForDisplay:!1,symbolsForChartApi:!0,skipHiddenInputs:!1,skipFakeInputs:!1,asObject:!0};return TradingView.merge(e,t),this._buildInputs(e)},g.prototype._buildInputs=function(t){var e,i;b(!!t,"options not set"),e={};try{e=this._prepareInputs(t)
}catch(t){gt.logWarn("Failed to prepare study inputs: "+t)}return t.asObject?(i={},Object.keys(e).forEach(function(t){null!=e[t]&&(i[t]=e[t])}),i):(i=[],Object.keys(e).forEach(function(t){null!=e[t]&&i.push(e[t])}),i)},g.prototype._prepareInputs=function(t){var e,i,n,r;for(b(!!t,"options not set"),e={},i=0;i<this._metaInfo.inputs.length;i++)n=this._metaInfo.inputs[i],n.isFake&&t.skipFakeInputs||n.isHidden&&t.skipHiddenInputs||"bool"===n.type&&t.skipHiddenInputs&&o.enabled("dont_show_boolean_study_arguments")||(r=this._prepareInput(n,t),e[n.id]=TradingView.clone(r));return e},g.prototype._prepareInput=function(t,e){var i=this._prepareInputValue(t,e);return!t.isFake||e.fakeInputsForDisplay?i:e.onlyAtomValues?i:{v:i,f:!0,t:t.type}},g.prototype._prepareInputValue=function(t,e){var i,n,o,r,s=t.id;return"symbol"===t.type?(i=this._properties.inputs[s].value(),e&&e.symbolsForDisplay?this._resolvedSymbols&&this._resolvedSymbols[i]&&(i=this._resolvedSymbols[i].exchange?this._resolvedSymbols[i].name+", "+this._resolvedSymbols[i].exchange:this._resolvedSymbols[i].name):(this._resolvedSymbols&&this._resolvedSymbols[i]&&(n=this._resolvedSymbols[i],i=n.ticker||n.full_name),e&&e.symbolsForChartApi&&(i=this.getSymbolString(i))),i):"bar_time"===t.type?(o=this._properties.inputs[s].value(),o<0&&(r=this._rightOffsetToUnixTime(-o),o=r&&r>=0?r:o),o):this._metaInfo.isTVScript||this._metaInfo.pine?"text"===s?this._metaInfo.defaults.inputs.text:"pineId"===s?this._metaInfo.scriptIdPart:"pineVersion"===s?this._metaInfo.pine?this._metaInfo.pine.version:"-1":this._properties.inputs[s].value():this._properties.inputs[s].value()},g.prototype._rebindToSource=function(t,e){var i,n,o,r,s,a,l,c,h,u,d;if(this._isChildStudy){if(this._source.unsetChild(this),delete this._nonPriceParent,n=null,t===this._model.mainSeries()){for(o=this._model.studiesMetaData(),s=0;s<o.length;++s)if(this._metaInfo.id===o[s].id){r=o[s];break}if(!r)return void gt.logError("Can not find "+this._metaInfo.id+" meta info");delete this._source,delete this._isChildStudy,delete this._ownerSource,this._metaInfo=r.state(!0),i=this._series._seriesId,n=et.REBIND_STUDY_CHILD_TO_STANDALONE}else{if(!(t instanceof g))return gt.logError("Unable to rebind study to source of this type"),!1;this._ownerSource=t,this._source=t,i=this._source.sourceId(),this._source.setChild(this),this._source.isHibernated()&&this._source.start()}this._incrementTurnaround(),this._chartApi.rebindStudy(this._studyId,this._turnaround,i,this._studyName,e,this._handler,n)}else{if(!(t instanceof g))return gt.logError("Unable to rebind study to source of this type"),!1;if(a=t.isHibernated(),a&&t.start(),l=!1,this._canCreateStudyWithRebindType(et.REBIND_STUDY_STANDALONE_TO_CHILD)&&(this._incrementTurnaround(),l=this._chartApi.rebindStudy(this._studyId,this._turnaround,t.sourceId(),this._studyName,e,this._handler,et.REBIND_STUDY_STANDALONE_TO_CHILD)),!l)return a&&t.stop(),!1;this._metaInfo=TradingView.clone(this._metaInfo),this._isChildStudy=!0,this._ownerSource=t,this._source=t,this._source.setChild(this),
this._childStudyByRebind.fire()}return c=this.m_priceScale,h=t.priceScale(),c!==h&&(u=this._model.paneForSource(this),d=this._model.paneForSource(t),u===d&&(~c.dataSources().indexOf(this)&&c.removeDataSource(this),h.addDataSource(this),this.setPriceScale(h))),!0},g.prototype.childStudyByRebind=function(){return this._childStudyByRebind},g.prototype._changeInputsImpl=function(t,e){var i,n,o,r,s=this.source(),a=this._properties.inputs&&this._properties.inputs.state(),l=pt.getSourceIdByInputs(this._metaInfo.inputs,a),c=!0;if(l)if("high"===l||"open"===l||"low"===l||"close"===l||"hl2"===l||"ohl3"===l||"ohlc4"===l)s=this._model.mainSeries();else for(i=this._model.dataSources(),n=0;n<i.length;++n)if(i[n]instanceof g&&i[n].sourceId()===l){s=i[n];break}if(s!==this.source()){if(!this._rebindToSource(s,t)&&a){for(o=null,r=null,n=0;n<e.length;++n)if(e[n]!==t[n]&&0===t[n].indexOf(l)){o=this._properties.inputs[a[n].id],r=e[n],c=!1;break}o&&o.setValue(r)}}else this._incrementTurnaround(),this._chartApi.modifyStudy(this._studyId,this._turnaround,t,this._handler);c&&(this._studyModified=c)},g.prototype._incrementTurnaround=function(){this._turnaround="st"+ ++this._turnaroundCounter},g.prototype._tryChangeInputs=function(){var t=TradingView.clone(this._inputs);this.isStarted()&&this._chartApi.connected()?this._allInputsAreValid()?this._allSymbolsAreResolved().done(function(){var e=this.inputs();JSON.stringify(e)!==JSON.stringify(this._inputs)&&(this._changeInputsImpl(e,t),this._inputs=e)}.bind(this)).fail(function(t){gt.logError("ERROR: "+this._debugId()+" _tryChangeInputs: cannot modify study, "+t)}.bind(this)):this.stop():(this.stop(!0),this.start(!0)),this._tagsChanged.fire()},g.prototype.testInputValue=function(t,e){var i,n;return!pt.canBeChild(this._metaInfo)||!pt.isSourceInput(t)||(!(i=this._properties.inputs&&this._properties.inputs[t.id])||(n=g.getInputRebindType(t,i.value(),e),!!this._canCreateStudyWithRebindType(n)))},g.prototype._canCreateStudyWithRebindType=function(t){return t!==et.REBIND_STUDY_STANDALONE_TO_CHILD||this._chartApi.isCanCreateStudy(!0)},g.prototype.changeStyles=function(){var t=null!=this._metaInfo.inputs.filter(function(t){return"symbol"===t.type})[0];!this.isStarted()&&!t||this._restarting||(this._inputs?this._tryChangeInputs():this._chartApi&&this._chartApi.connected()&&this.restart(),this.hasBarColorer()&&this._model.mainSeries().invalidateBarStylesCache(),t&&this.invalidateBarStylesCache(),this.createViews(),this.recalculate(!0),this.updateAllViews())},g.prototype._isModifiedStudyInputs=function(t){if(void 0===this._oldStudyInputs)return this._oldStudyInputs=t,!0;var e=Object.keys(this._oldStudyInputs);return b(e.length===Object.keys(t).length,"keys quantity should be equal"),e.forEach(function(e){b(t.hasOwnProperty(e),"key '"+e+"' should existing in studyInputs"),this._oldStudyInputs[e]!==t[e]&&(this._oldStudyInputs=t)},this),this._oldStudyInputs===t},g.prototype.visibleChanged=function(){this._series instanceof TradingView.Series&&this._series.invalidateBarColorerCache()},
g.prototype.invalidateBarStylesCache=function(){this.m_data.each(function(t,e){e[TradingView.STYLE_PLOT]=null})},g.prototype.processHibernate=function(){this.isHibernateAllowed()&&(!this._studyId&&this.isVisible()&&this.start(),this._studyId&&!this.isVisible()&&this.stop())},g.prototype.isHibernated=function(){return!this.isVisible()&&!this._studyId},g.prototype.isHibernateAllowed=function(){return!this._isChildStudy&&!this.hasChildren()},g.prototype.lastPriceLabelFixedCoordinate=function(t){return this._priceAxisViewsCache[t]._fixedCoordinate},g.prototype.priceLabelText=function(t){var e,i,n,o;return 1===this._simplePlotsCount?this._metaInfo.shortDescription:(e=this._metaInfo.styles,i=this._metaInfo.ohlcPlots,e&&e[t]&&(n=e[t]),i&&i[t]&&(n=i[t]),o=n.title,this._metaInfo.is_price_study?this._metaInfo.shortDescription+":"+o:o)},g.prototype.createPlotLabels=function(t){for(var e=0;e<t.length;e++)this._paneViews.push(new H(this._model,this,t[e],"priceLabelText","showStudyPlotLabels"))},g.prototype.createViews=function(){var t,e,i,n,o,r,a,l,c;if(this._priceAxisViewsBase=[],this._paneViews=[],t={},this._priceAxisViewsCache={},e=[],this.metaInfo().plots)for(i=0;i<this.metaInfo().plots.length;i++)if(!(this.isSelfColorerPlot(i)||this.isTextColorerPlot(i)||this.isBarColorerPlot(i)||this.isOHLCColorerPlot(i)))if(n=this.metaInfo().plots[i].id,this.isBgColorerPlot(i))this._paneViews.push(new M(this,this._series,this._model,n));else if(this.isPlotShapesPlot(i))this._paneViews.push(new O(this,this._series,this._model,n));else if(this.isPlotCharsPlot(i))this._paneViews.push(new D(this,this._series,this._model,n));else if(this.isPlotArrowsPlot(i))this._paneViews.push(new V(this,this._series,this._model,n));else if(this.isOHLCSeriesPlot(i)){if(o=this.metaInfo().plots[i].target,t[o])continue;t[o]=o,this.isOHLCBarsPlot(i)?this._paneViews.push(new R(this,this._series,this._model,o)):this.isOHLCCandlesPlot(i)&&this._paneViews.push(new B(this,this._series,this._model,o)),r=new I(this,{plotIndex:o}),this._priceAxisViewsCache[o]=r,this._priceAxisViewsBase.push(r),e.push(o)}else r=new I(this,{plotIndex:n}),this._priceAxisViewsCache[n]=r,this._priceAxisViewsBase.push(r),this._paneViews.push(new E(this,this._series,this._model,n)),this.properties().styles[n].trackPrice.value()&&this._paneViews.push(new s(this,this._series,this._model,n)),e.push(n);if(this._properties.bands)for(i=0;i<this._properties.bands.childCount();i++)this._properties.bands[i].visible.value()&&this._paneViews.push(new x(this._properties.bands[i],this));if(this._properties.bandsBackground&&this._paneViews.push(new k(this)),a=this._paneViews,Z(this).then(function(t){for(var e=0;e<t.length;e++)a.push(t[e])}),this._properties.areaBackground&&this._paneViews.push(new W(this)),this._properties.filledAreas&&this._metaInfo.filledAreas)for(i=0;i<this._metaInfo.filledAreas.length;++i)l=this._metaInfo.filledAreas[i],c=this._properties.filledAreasStyle[l.id],
l.type===pt.FilledArea.TYPE_PLOTS||l.palette?this._paneViews.push(new N(this,l,c)):l.type===pt.FilledArea.TYPE_HLINES?this._paneViews.push(new L(this,l,c)):gt.logWarn("Unsupported filledArea type: "+l.type);this.createPlotLabels(e),this._dataWindowView||(this._dataWindowView=new U(this,this._model)),this._legendView||(this._legendView=new z(this,this._model)),this._statusView||(this._statusView=new q(this,this._model.properties())),this._priceAxisViews=[].concat(this._priceAxisViewsBase,this._hlinesPriceAsisViews,this._horizlinesPriceAsisViews)},g.prototype.recalculate=function(t){var e=this._model.paneForSource(this);this._model.recalculatePane(e,t),this._model.updateSource(this)},g.prototype.data=function(){return this.m_data},g.prototype.metaInfo=function(){return this._metaInfo},g.prototype.status=function(){return this._status},g.prototype.title=function(t,e,i){var n,o;return i=void 0===i?!this._showStudyArgumentsProperty.value():i,n=JSON.stringify([t,e,i]),this._titleCache[n]?this._titleCache[n]:(o=this._title(t,e,i),this._titleCache[n]=o,o)},g.prototype._title=function(t,e,i){var n,o,r,s,a,l,c,h,u,d,p,_,f;if(n=t?this._metaInfo.shortDescription||this._properties.shortDescription&&this._properties.shortDescription.value()||"Study":this._metaInfo.description||this._properties.description&&this._properties.description.value()||"Study",e=e||{},n=window.t(n),!i&&(o=this.inputsForGUI()||[],o.length>0)){if(r={},this._isChildStudy)for(s=0;s<this._metaInfo.inputs.length;++s)if(a=this._metaInfo.inputs[s],pt.isSourceInput(a)){l=a.id,c=this._properties.inputs[l].value(),c.indexOf("$")>=0&&this._source&&(h=this._source.metaInfo(),u=this._source.title(t,null,!0),1===h.plots.length?r[c]=u:(d=c.split("$")[1],p=h.plots[d].id,_=h.styles&&h.styles[p]&&h.styles[p].title||p,r[c]=u+": "+_));break}f=this,o=o.map(function(t){var i=isNumber(t)?f._numericFormatter.format(t):r&&r[t]||t;return e[i]&&(i=e[i]),i}),n+=" ("+o.join(", ")+")"}return n},g.prototype.invalidateTitleCache=function(t){if(this._titleCache={},!0===t&&this._children)for(var e=0;e<this._children.length;++e)this._children[e].invalidateTitleCache(t)},g.prototype.graphics=function(){return this._graphics},g.prototype.turnaround=function(t){return!0===t?this.source().turnaround(!0)+"_"+this._turnaround:this._turnaround},g.prototype._checkTurnaround=function(t){return t===this._turnaround||t===this._model.mainSeries().turnaround()||t===this.turnaround(!0)},g.prototype.onData=function(t){var e,i,n,o,r,s=this;switch(t.method){case"study_loading":this._status=window.t("loading..."),this._failed=!1,this._statusView.update(),this._model.updateSource(this),s._loadingStartTime=(new Date).getTime();break;case"study_error":delete this._loadingStartTime,this._failed=!0,this.clearData(),this._status="","string"==typeof t.params[2]&&(e=t.params[2],i=e.split(":",2)[0],i.length>0&&(this._status=$.t(i))),this._statusView.update(),this._model.updateSource(this);break;case"study_completed":if(!this._checkTurnaround(t.params[1]))return;n="chartSession:"+s._chartApi._sessionid,
o=(new Date).getTime()-this._loadingStartTime,gt.logDebug(n+", Study "+this._metaInfo.description+" loading took "+o+" ms"),delete this._loadingStartTime,this._status="",this._statusView.update(),r=this._model.paneForSource(this),this._model.recalculatePane(r),this._updateSources(),this._model.invalidate(new tt(tt.FULL_UPDATE));break;case"study_deleted":break;case"data_update":if(t.params.customId!==this.sourceId()||!this._checkTurnaround(t.params.turnaround))return;b(!!t.params.nonseries,"data.params.nonseries is missing"),this._onDataUpdate(t.params.plots,t.params.nonseries)}},g.prototype._onDataUpdate=function(t,e){this._studyModified&&(this.clearData(),this._studyModified=!1),w(e.d).then(function(i){"nochange"!==e.indexes&&this._processPlotOffsets(i),this.transformData(t),this._mergeData(t),null!==i&&(i.indexes_replace?(b("nochange"!==e.indexes),this._graphics.replaceIndexesTo(e.indexes)):("nochange"!==e.indexes&&this._graphics.replaceIndexesTo(e.indexes),void 0!==i.graphicsCmds&&this._graphics.processCommands(i.graphicsCmds,this._metaInfo.graphics))),this._onDataUpdated(t,i,e.indexes)}.bind(this))},g.prototype._onDataUpdated=function(t,e,i){this.hasBarColorer()&&t.length>0&&this._model.mainSeries().invalidateBarStylesCache(t[0].index),null!==e&&this._postProcessGraphics();var n=this._model.paneForSource(this);this._model.recalculatePane(n),this._updateSources()},g.prototype.transformData=function(t){},g.prototype.moveData=function(t){this._invalidateLastNonEmptyPlotRowCache(),this.m_data.move(t)},g.prototype.replaceData=function(t,e,i){this._invalidateLastNonEmptyPlotRowCache(),this.m_data.remove(t+1),this.m_data.addTail(i,e)},g.prototype._updateSources=function(){this._model.updateSource(this),this.hasBarColorer()&&this._model.updateSource(this._model.mainSeries())},g.processPlotOffsets=function(t,e){e&&e.indexes_replace||(t._plotOffsets=e&&e.offsets||{})},g.prototype._processPlotOffsets=function(t){g.processPlotOffsets(this,t)},g.prototype._mergeData=function(t){this._invalidateLastNonEmptyPlotRowCache(),this.m_data.merge(t)},g.prototype._postProcessGraphics=function(){this._priceAxisViews=[].concat(this._priceAxisViewsBase,Q(this))},g.prototype._getNonPriceParent=function(){var t,e;if(this._nonPriceParent)return this._nonPriceParent;for(t=this.source();t instanceof g;){if(e=t.metaInfo(),!e.is_price_study||"Compare@tv-basicstudies"===e.id)return this._nonPriceParent=t,t;t=t.source()}},g.prototype.firstValue=function(t){var e,i,n,o,r,s;return!this._isChildStudy&&"Compare@tv-basicstudies"===this._metaInfo.id||!this._metaInfo.is_price_study?null===(e=this._model.timeScale().visibleBars())?null:(i=e.firstBar(),n=e.lastBar(),0===this.data().size()?null:(r=this,this.data().range(i,n).each(function(e,i){var n,s,a;for(n=1;n<i.length;++n)if(void 0!==i[n-1]&&null!==i[n-1]&&!r.isSelfColorerPlot(n-1)&&(s=r._metaInfo.plots[n-1].id,a=r.properties().styles[s],a.visible&&a.visible.value()&&!(t&&Math.abs(i[n])<1e-10||void 0===i[n]||null===i[n]||o)))return o=i[n],!0}),this._nonPriceFirstValue=o,
o)):this._isChildStudy&&(s=this._getNonPriceParent())&&this.priceScale()===s.priceScale()?void 0!==s._nonPriceFirstValue?s._nonPriceFirstValue:s.firstValue():this._series.firstValue()},g.offset=function(t,e){var i=0;return t._plotOffsets&&void 0!==t._plotOffsets[e]&&(i+=t._plotOffsets[e]),void 0!==t._plotOffsetsMetaInfoOverride[e]?i+=t._plotOffsetsMetaInfoOverride[e]:t.properties().offsets&&void 0!==t.properties().offsets[e]&&(i+=t.properties().offsets[e].val.value()),t.properties().offset&&(i+=t.properties().offset.val.value()),i},g.prototype.offset=function(t){return g.offset(this,t)},g.prototype.priceRange=function(t,e){var i,n,o,s,a,l,c,h,u,d,p,_,f,m,g,y,v,b,S;if(!TradingView.isInteger(t))return void gt.logDebug("priceRange: incorrect startBar");if(!TradingView.isInteger(e))return void gt.logDebug("priceRange: incorrect endBar");if(0===this.m_data.size())return null;if(i=null,n=this,o=n._metaInfo,0===o.plots.length)return null;for(a=[],c=0;c<o.plots.length;++c)if(!(n.isSelfColorerPlot(c)||n.isTextColorerPlot(c)||n.isBarColorerPlot(c)||n.isBgColorerPlot(c)||n.isOHLCColorerPlot(c))&&(h=o.plots[c].id,n.isOHLCSeriesPlot(c)?(d=o.plots[c].target,u=n.properties().ohlcPlots[d]):u=n.properties().styles[h],u.visible.value()&&(l=null,u.location&&(l=u.location.value()),s||(p=[dt.Absolute,dt.Top,dt.Bottom].indexOf(l)<0,_=n.isPlotShapesPlot(c)||n.isPlotCharsPlot(c),s=_&&p||n.isPlotArrowsPlot(c)),n.isLinePlot(c)||(n.isPlotShapesPlot(c)||n.isPlotCharsPlot(c))&&u.location.value()===dt.Absolute||n.isOHLCSeriesPlot(c)))){if(f={index:c+1,offset:n.offset(h)},m=n.properties().styles[h].plottype.value(),!n.properties().skipHistogramBaseOnAutoScale&&[ft.Histogram,ft.Columns,ft.Area].indexOf(m)>=0){if(g=n.properties().styles[h].histogramBase.value(),!isNumber(g))continue;f.baseValue=g}a.push(f)}if(y=n.m_data.minMaxOnRange2(t,e,a),s&&(a=[{index:TradingView.LOW_PLOT,offset:0},{index:TradingView.HIGH_PLOT,offset:0}],v=n.series().data().bars().minMaxOnRange2(t,e,a),y=ut(y,v)),null!==y&&(i=new r(y.min,y.max)),o.bands)for(c=0;c<o.bands.length;c++)if(n.properties().bands[c].visible.value()){if(g=n.properties().bands[c].value.value(),!isNumber(g))continue;i?i.apply(g,g):i=new r(g,g)}return i&&i.minValue()===i.maxValue()&&(b=.005*i.minValue(),i=new r(i.minValue()-b,i.maxValue()+b)),S=this.priceScale(),S&&S.isLog()&&i?new r(n.priceScale().priceToLogical(i.minValue()),n.priceScale().priceToLogical(i.maxValue())):i},g.prototype.paneViews=function(t){return this.properties().visible.value()?this._paneViews:null},g.prototype.dataWindowView=function(){return this._dataWindowView},g.prototype.legendView=function(){return this._legendView},g.prototype.statusView=function(){return this._statusView},g.prototype.priceAxisViews=function(t,e){return this._model.paneForSource(this)===t&&e===this.priceScale()&&(this._showLastValueOnPriceScale()||this.properties().oldShowLastValue&&this.properties().oldShowLastValue.value())?this._priceAxisViews:null},g.prototype._showLastValueOnPriceScale=function(){
return this._model.properties().scalesProperties.showStudyLastValue.value()},g.prototype.isLinePlot=function(t){var e=this._metaInfo.plots[t];return _t.isLinePlot(e)},g.isSelfColorerPlot=function(t,e){var i=t._metaInfo.plots[e];return _t.isColorerPlot(i)},g.prototype.isSelfColorerPlot=function(t){return g.isSelfColorerPlot(this,t)},g.prototype.isTextColorerPlot=function(t){var e=this._metaInfo.plots[t];return _t.isTextColorerPlot(e)},g.prototype.isBarColorerPlot=function(t){var e=this._metaInfo.plots[t];return _t.isBarColorerPlot(e)},g.prototype.isBgColorerPlot=function(t){var e=this._metaInfo.plots[t];return _t.isBgColorerPlot(e)},g.prototype.isPlotShapesPlot=function(t){var e=this._metaInfo.plots[t];return _t.isShapesPlot(e)},g.prototype.isPlotCharsPlot=function(t){var e=this._metaInfo.plots[t];return _t.isCharsPlot(e)},g.prototype.isPlotArrowsPlot=function(t){var e=this._metaInfo.plots[t];return _t.isArrowsPlot(e)},g.prototype.isOHLCBarsPlot=function(t){var e=this._metaInfo.plots[t].target,i=this.metaInfo().defaults.ohlcPlots[e];return i&&this.isOHLCSeriesPlot(t)&&_t.isOhlcPlotStyleBars(i)},g.prototype.isOHLCCandlesPlot=function(t){var e=this._metaInfo.plots[t].target,i=this.metaInfo().defaults.ohlcPlots[e];return i&&this.isOHLCSeriesPlot(t)&&_t.isOhlcPlotStyleCandles(i)},g.prototype.isOHLCSeriesPlot=function(t){var e=this._metaInfo.plots[t];return _t.isOhlcPlot(e)},g.prototype.isOHLCOpenPlot=function(t){var e=this._metaInfo.plots[t];return _t.isOhlcOpenPlot(e)},g.prototype.isOHLCHighPlot=function(t){var e=this._metaInfo.plots[t];return _t.isOhlcHighPlot(e)},g.prototype.isOHLCLowPlot=function(t){var e=this._metaInfo.plots[t];return _t.isOhlcLowPlot(e)},g.prototype.isOHLCClosePlot=function(t){var e=this._metaInfo.plots[t];return _t.isOhlcClosePlot(e)},g.prototype.isOHLCColorerPlot=function(t){var e=this._metaInfo.plots[t];return _t.isOhlcColorerPlot(e)},g.prototype.isDataOffsetPlot=function(t){var e=this._metaInfo.plots[t];return _t.isDataOffsetPlot(e)},g.prototype.hasBarColorer=function(){for(var t=0;t<this._metaInfo.plots.length;++t)if(this.isBarColorerPlot(t))return!0;return!1},g.prototype.barColorer=function(){var t,e,i=null;for(t=0;t<this._metaInfo.plots.length;++t)this.isBarColorerPlot(t)&&(e=new P(this,t),null==i?i=e:i.pushBackBarColorer(e));if(null==i)throw Error("Cannot create BarColorer: study doesn't have a bar_colorer plot!");return i},g.prototype.base=function(){return"Volume"===this._metaInfo.id?1:0},g.prototype._createFormatter=function(){var t,e,i;"default"===this.properties().precision.value()?this.metaInfo().defaults&&(t=parseInt(this.metaInfo().defaults.precision)):t=parseInt(this.properties().precision.value()),isFinite(t)||(t=-1!==["Volume@tv-basicstudies","VbPVisible@tv-volumebyprice","VbPSessions@tv-volumebyprice"].indexOf(this._metaInfo.id)?0:1e4),e=this.series().symbolInfo(),0===t?(i=0,e&&e.volume_precision&&(i=e.volume_precision),this._formatter=new st(i)):this._formatter=new rt(Math.pow(10,t)),this.priceScale()&&this.priceScale().updateFormatter()},g.prototype.formatter=function(){
return this._formatter},g.prototype.nearestIndex=function(t,e){if(!TradingView.isInteger(t))return void gt.logDebug("nearestIndex: incorrect logicalPoint");var i=this._series.data().bars().search(t,e);return null!==i?i.index:void 0},g.prototype._lastNonEmptyPlotRow=function(t){var e,i;return TradingView.isInteger(t)?void 0!==this._lastNonEmptyPlotRowCache[t]?this._lastNonEmptyPlotRowCache[t]:(e=1e3,null===(i=this.data().findLast(function(e,i){return void 0!==i[t]},e))?null:(this._lastNonEmptyPlotRowCache[t]=i,this._lastNonEmptyPlotRowCache[t])):(gt.logDebug("_lastNonEmptyPlotRow: incorrect plotIndex"),null)},g.prototype.updateAllViews=function(){var t;for(t=0;t<this._paneViews.length;t++)this._paneViews[t].update();for(this._dataWindowView.update(),null!==this._legendView&&this._legendView.update(),this._statusView.update(),t=0;t<this._priceAxisViews.length;t++)this._priceAxisViews[t].update()},g.prototype.tags=function(){return!this._metaInfo||!this._metaInfo.description||this._metaInfo.isTVScriptStub||this._metaInfo.is_hidden_study||this._metaInfo.isTVScript&&"tv-scripting"===this._metaInfo.productId?[]:[this._metaInfo.description]},g.isPointsBasedStudy=function(t){switch(t){case"VbPFixed@tv-volumebyprice":case"mtp_tsanalysis@mtp-mtpredictor":case"mtp_riskreward@mtp-mtpredictor":case"mtp_decisionpoint@mtp-mtpredictor":case"mtp_ew_main@mtp-mtpredictor":case"mtp_ew_major@mtp-mtpredictor":case"mtp_ew_minor@mtp-mtpredictor":case"mtp_wpt_down1ora@mtp-mtpredictor":case"mtp_wpt_down2orb@mtp-mtpredictor":case"mtp_wpt_down3@mtp-mtpredictor":case"mtp_wpt_down4@mtp-mtpredictor":case"mtp_wpt_down5@mtp-mtpredictor":case"mtp_wpt_downc@mtp-mtpredictor":case"mtp_wpt_up1ora@mtp-mtpredictor":case"mtp_wpt_up2orb@mtp-mtpredictor":case"mtp_wpt_up3@mtp-mtpredictor":case"mtp_wpt_up4@mtp-mtpredictor":case"mtp_wpt_up5@mtp-mtpredictor":case"mtp_wpt_upc@mtp-mtpredictor":return!0;default:return!1}},g.lineToolNameForPointsBasedStudy=function(t){switch(t){case"VbPFixed@tv-volumebyprice":return"LineToolVbPFixed";case"RegressionTrend@tv-basicstudies":return"LineToolRegressionTrend";case"mtp_tsanalysis@mtp-mtpredictor":return"LineStudyMtpAnalysis";case"mtp_riskreward@mtp-mtpredictor":return"LineStudyMtpRiskReward";case"mtp_decisionpoint@mtp-mtpredictor":return"LineStudyMtpDecisionPoint";case"mtp_ew_main@mtp-mtpredictor":return"LineStudyMtpElliotWaveMain";case"mtp_ew_major@mtp-mtpredictor":return"LineStudyMtpElliotWaveMajor";case"mtp_ew_minor@mtp-mtpredictor":return"LineStudyMtpElliotWaveMinor";case"mtp_wpt_down1ora@mtp-mtpredictor":return"LineStudyMtpDownWave1OrA";case"mtp_wpt_down2orb@mtp-mtpredictor":return"LineStudyMtpDownWave2OrB";case"mtp_wpt_down3@mtp-mtpredictor":return"LineStudyMtpDownWave3";case"mtp_wpt_down4@mtp-mtpredictor":return"LineStudyMtpDownWave4";case"mtp_wpt_down5@mtp-mtpredictor":return"LineStudyMtpDownWave5";case"mtp_wpt_downc@mtp-mtpredictor":return"LineStudyMtpDownWaveC";case"mtp_wpt_up1ora@mtp-mtpredictor":return"LineStudyMtpUpWave1OrA";case"mtp_wpt_up2orb@mtp-mtpredictor":return"LineStudyMtpUpWave2OrB"
;case"mtp_wpt_up3@mtp-mtpredictor":return"LineStudyMtpUpWave3";case"mtp_wpt_up4@mtp-mtpredictor":return"LineStudyMtpUpWave4";case"mtp_wpt_up5@mtp-mtpredictor":return"LineStudyMtpUpWave5";case"mtp_wpt_upc@mtp-mtpredictor":return"LineStudyMtpUpWaveC";default:throw Error("There is no line tool name, associated with study id "+t)}},g.prototype.onExtendedHoursChanged=function(){this.restart()},g.prototype.hasSymbolInputs=function(){for(var t=this._metaInfo.inputs.length;t--;)if("symbol"===this._metaInfo.inputs[t].type)return!0;return!1},g.prototype._subscribeExtendedHours=function(){!this._isSubscribedToExtendedHours&&this.hasSymbolInputs()&&(this._series.extendedHours.listeners().subscribe(this,this.onExtendedHoursChanged),this._isSubscribedToExtendedHours=!0)},g.prototype._unsubscribeExtendedHours=function(){this._isSubscribedToExtendedHours&&(this._series.extendedHours.listeners().unsubscribe(this,this.onExtendedHoursChanged),delete this._isSubscribedToExtendedHours)},g.prototype.removeByRemoveAllStudies=function(){return!0},g.prototype.canHaveChildren=function(){return void 0===this._canHaveChildren&&(this._canHaveChildren=!!pt.canHaveChildren(this._metaInfo)),this._canHaveChildren},g.getInputRebindType=function(t,e,i){var n=pt.isSourceInput(t);return n&&!~e.indexOf("$")&&~i.indexOf("$")?et.REBIND_STUDY_STANDALONE_TO_CHILD:n&&~e.indexOf("$")&&!~i.indexOf("$")?et.REBIND_STUDY_CHILD_TO_STANDALONE:0},g.prototype.getPlotFields=function(){return this._plotFields},g.prototype.getMinFirstBarIndexForPlot=function(t){var e,i=y(this._properties.styles,t)||y(this._properties.ohlcPlots,t)||y(this._properties.filledAreasStyle,t);return null===i?-1/0:(e=this.data().lastIndex(),null===e?-1/0:e-i+1)},g.prototype.getInputsPropertyPage=function(){return mt.StudyInputsPropertyPage},g.prototype.getStylesPropertyPage=function(){return mt.StudyStylesPropertyPage},g.prototype.getDisplayPropertyPage=function(){return mt.StudyDisplayPropertyPage},g.prototype.isPine=function(){return void 0!==this._metaInfo.pine},g.prototype.isStandardPine=function(){return this.isPine()&&pt.isStandardPine(this._metaInfo.id)},g.prototype._getTelemetryObjectName=function(){return"study"},g.prototype._getTelemetryAdditionalData=function(){var t="";return this._metaInfo.pine&&this._metaInfo.pine.version&&this._metaInfo.shortId.indexOf("USER")>=0&&(t="_v"+this._metaInfo.pine.version),{symbol:this.series().actualSymbol(),resolution:this.series().interval(),study:this._metaInfo.shortId+t}},g.prototype._sendTelemetryReport=function(t,e,i){void 0===i&&(i=this._getTelemetryAdditionalData());var n=Object.assign(e,{additional:i});telemetry.sendChartReport(t,n)},g.prototype._sendTelemetryCounter=function(t,e){this._sendTelemetryReport(t,{count:1},e)},g.prototype._sendTelemetryTiming=function(t,e,i){this._sendTelemetryReport(t,{value:e},i)},g.prototype.destroy=function(){this._legendView&&this._legendView.destroy()},g.prototype.guiPlotName=function(t){var e=this.properties().styles;return e&&e[t]&&e[t].title?e[t].title.value():this.title()},t.exports={Study:g,
prepareStudyProperties:l,prepareStudyPropertiesForLoadChart:h,prepareStudyPropsStateForLoadChart:p}}).call(e,i(16),i(8),i(4),i(65).PriceRange)},,,function(t,e,i){"use strict";function n(t,e,i){u[t].unsubscribe(i,e)}function o(t,e,i){r(t,e,i)}function r(t,e,i,n){if(u.hasOwnProperty(t)||(u[t]=new h.a),p[t])return void e.call(i);u[t].subscribe(i,e,n)}function s(t){d.push(t)}function a(t){var e,i,n=[];for(e=1;e<arguments.length;e++)n[e-1]=arguments[e];i=[t].concat(n),d.forEach(function(t){t.apply(null,i)}),u.hasOwnProperty(t)&&u[t].fire.apply(u[t],n)}function l(t){p[t]&&console.warn("Something went wrong: emitOnce called multiple times with same event ("+t+")"),p[t]=!0,a.apply(null,arguments)}var c,h,u,d,p;Object.defineProperty(e,"__esModule",{value:!0}),e.unsubscribe=n,e.on=o,e.subscribe=r,e.subscribeToAll=s,e.emit=a,e.emitOnce=l,c=i(8),h=i.n(c),u={},d=[],p={}},function(t,e,i){"use strict";var n,o,r,s,a,l,c,h,u,d,p,_,f,m,g,y,v,b,S,w,P,T,C,x,k,L,I,A,E;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"STATUS_OFFLINE",function(){return n}),i.d(e,"STATUS_RESOLVING",function(){return o}),i.d(e,"STATUS_LOADING",function(){return r}),i.d(e,"STATUS_READY",function(){return s}),i.d(e,"STATUS_INVALID_SYMBOL",function(){return a}),i.d(e,"STATUS_SNAPSHOT",function(){return l}),i.d(e,"STATUS_EOD",function(){return c}),i.d(e,"STATUS_PULSE",function(){return h}),i.d(e,"STATUS_DELAYED",function(){return u}),i.d(e,"STATUS_DELAYED_STREAMING",function(){return d}),i.d(e,"STATUS_NO_BARS",function(){return p}),i.d(e,"STATUS_REPLAY",function(){return _}),i.d(e,"STYLE_BARS",function(){return f}),i.d(e,"STYLE_CANDLES",function(){return m}),i.d(e,"STYLE_LINE",function(){return g}),i.d(e,"STYLE_LINE_TYPE_MARKERS",function(){return y}),i.d(e,"STYLE_LINE_TYPE_STEP",function(){return v}),i.d(e,"STYLE_LINE_TYPE_SIMPLE",function(){return b}),i.d(e,"STYLE_AREA",function(){return S}),i.d(e,"STYLE_RENKO",function(){return w}),i.d(e,"STYLE_KAGI",function(){return P}),i.d(e,"STYLE_PNF",function(){return T}),i.d(e,"STYLE_PB",function(){return C}),i.d(e,"STYLE_HEIKEN_ASHI",function(){return x}),i.d(e,"STYLE_HOLLOW_CANDLES",function(){return k}),i.d(e,"STYLE_BASELINE",function(){return L}),i.d(e,"STYLE_RANGE",function(){return I}),i.d(e,"STYLE_SHORT_NAMES",function(){return A}),i.d(e,"SYMBOL_STRING_DATA",function(){return E}),n=0,o=1,r=2,s=3,a=4,l=5,c=6,h=7,u=8,d=9,p=10,_=11,f=0,m=1,g=2,y=0,v=1,b=2,S=3,w=4,P=5,T=6,C=7,x=8,k=9,L=10,I=11,A={},A[f]="bar",A[m]="candle",A[k]="hollowCandle",A[g]="line",A[S]="area",A[w]="renko",A[C]="pb",A[P]="kagi",A[T]="pnf",A[x]="ha",A[L]="baseline",A[I]="range",E={},E[w]={type:"BarSetRenko@tv-prostudies",basicStudyVersion:15},E[C]={type:"BarSetPriceBreak@tv-prostudies",basicStudyVersion:15},E[P]={type:"BarSetKagi@tv-prostudies",basicStudyVersion:15},E[T]={type:"BarSetPnF@tv-prostudies",basicStudyVersion:15},E[x]={type:"BarSetHeikenAshi@tv-basicstudies",basicStudyVersion:60},E[I]={type:"BarSetRange@tv-basicstudies",basicStudyVersion:72}},function(t,e,i){"use strict";function n(t){return void 0===t&&(t="full"),
c[t]||o(t,new l.a(t)),c[t]}function o(t,e){void 0===t&&(t="full"),c[t]=e}function r(t){return void 0===t&&(t="full"),c[t]}function s(){var t,e;for(t in c)c.hasOwnProperty(t)&&(e=c[t],void 0!==e&&e.destroy(),delete c[t])}var a,l,c;Object.defineProperty(e,"__esModule",{value:!0}),e.getQuoteSessionInstance=n,e.setQuoteSessionInstance=o,e.getQuoteSessionNoEnsure=r,e.destroyQuoteSessions=s,a=i(576),l=i.n(a),c={}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"UndoCommand",function(){return n});var n=function(){function t(t,e){void 0===e&&(e=!0),this._customFlags={},this._text=t,this._executeOnPush=e}return t.prototype.text=function(){return this._text},t.prototype.executeOnPush=function(){return this._executeOnPush},t.prototype.customFlag=function(t){return this._customFlags[t]},t.prototype.setCustomFlag=function(t,e){this._customFlags[t]=e},t}()},function(t,e,i){"use strict";function n(t){this.items=t.items,this.height=t.height||t.width,this.width=t.width||t.height,this._color=t.color,this._borderColor=t.borderColor,this._vertOffset=t.vertOffset||0,t.textCache&&(this._textCache=t.textCache,this._textColor=t.textColor,this._textVertOffset=this._vertOffset>0?this.height:-this.height,this._textImageWidth=this._textCache.textImageWidth,this._textImageHeight=this._textCache.textImageHeight)}var o=i(7).Point,r=i(10).HitTestResult;n.prototype.draw=function(t){this.drawShape(t),this.drawText(t)},n.prototype.drawShape=function(t){throw Error("Not implemented")},n.prototype.drawText=function(t){var e,i,n,o,r,s;if(this._textCache)for(e=0,i=this.items.length;e<i;e++)n=this.items[e],o=n.x,r=n.y+this._vertOffset+this._textVertOffset,s=n.style&&null!=n.style.textColor?n.style.textColor:this._textColor,this._textCache.paintTo(t,s,o,r,"center",this._vertOffset>0?"top":"bottom")},n.prototype.hitTest=function(t,e){var i,n,s,a,l,c,h,u,d,p,_,f,m,g=Math.max(this.height,this.width),y=this._vertOffset,v=this._textVertOffset;for(e=e||r.REGULAR,n=0;n<this.items.length;++n)if(s=this.items[n]){if(i=new o(s.x,s.y+y),i.subtract(t).length()<=g)return new r(e,{});if(this._textCache&&(a=this._textImageWidth/2,l=s.y+y+v,c=y>0?0:-this._textImageHeight,h=y>0?this._textImageHeight:0,u=t.x,d=t.y,p=s.x-a,_=l+c,f=s.x+a,m=l+h,u>p&&u<f&&d>_&&d<m))return new r(e,{})}return null},e.PaneRendererAbstractShape=TradingView.PaneRendererAbstractShape=n},function(t,e,i){"use strict";for(var n={LineToolFibRetracement:i(656).LineToolFibRetracement,LineToolFibChannel:i(658).LineToolFibChannel,LineToolFibSpeedResistanceArcs:i(659).LineToolFibSpeedResistanceArcs,LineToolProjection:i(660).LineToolProjection,LineToolTrendBasedFibExtension:i(661).LineToolTrendBasedFibExtension,LineToolElliott:i(91).LineToolElliott,LineToolFibCircles:i(662).LineToolFibCircles,LineToolTrading:i(206),LineToolVertLine:i(663).LineToolVertLine,LineToolCrossLine:i(664).LineToolCrossLine,LineToolBarsPattern:i(665).LineToolBarsPattern,LineToolTrendBasedFibTime:i(666).LineToolTrendBasedFibTime,LineToolFibTimeZone:i(667).LineToolFibTimeZone,
LineToolCircleLines:i(668).LineToolCircleLines,LineToolDateRange:i(669).LineToolDateRange,LineToolPriceRange:i(670).LineToolPriceRange,LineToolDateAndPriceRange:i(671).LineToolDateAndPriceRange,LineToolParallelChannel:i(672).LineToolParallelChannel,LineToolTrendAngle:i(673).LineToolTrendAngle,LineToolTrendLine:i(113).LineToolTrendLine,LineToolInfoLine:i(674).LineToolInfoLine,LineToolArrowMark:i(114).LineToolArrowMark,LineToolExecution:i(332).LineToolExecution,LineToolPitchfan:i(675).LineToolPitchfan,LineToolGannSquare:i(676).LineToolGannSquare,LineToolFibSpeedResistanceFan:i(677).LineToolFibSpeedResistanceFan,LineToolGannComplex:i(678).LineToolGannComplex,LineToolGannFixed:i(679).LineToolGannFixed,LineToolGannFan:i(680).LineToolGannFan,LineToolFibWedge:i(330).LineToolFibWedge,LineToolPitchfork:i(141).LineToolPitchfork,LineToolDisjointAngle:i(681).LineToolDisjointAngle,LineToolFlatBottom:i(682).LineToolFlatBottom,LineToolIcon:i(683).LineToolIcon,LineToolRotatedRectangle:i(684).LineToolRotatedRectangle,LineToolFibSpiral:i(685).LineToolFibSpiral,LineToolHeadAndShoulders:i(686).LineToolHeadAndShoulders,LineToolTriangle:i(687).LineToolTriangle,LineToolTrianglePattern:i(688).LineToolTrianglePattern,LineTool5PointsPattern:i(334).LineTool5PointsPattern,LineToolThreeDrivers:i(689).LineToolThreeDrivers,LineToolABCD:i(690).LineToolABCD,LineToolRiskReward:i(208).LineToolRiskReward,LineToolPolyline:i(692).LineToolPolyline,LineToolPrediction:i(693).LineToolPrediction,LineToolPriceLabel:i(694).LineToolPriceLabel,LineToolNote:i(335).LineToolNote,LineToolNoteAbsolute:i(335).LineToolNoteAbsolute,LineToolBrush:i(695).LineToolBrush,LineToolArc:i(696).LineToolArc,LineToolCallout:i(697).LineToolCallout,LineToolBalloon:i(698).LineToolBalloon,LineToolText:i(336).LineToolText,LineToolHorzLine:i(699).LineToolHorzLine,LineToolHorzRay:i(700).LineToolHorzRay,LineToolRectangle:i(701).LineToolRectangle,LineToolEllipse:i(702).LineToolEllipse,LineToolTimeCycles:i(703).LineToolTimeCycles,LineToolSineLine:i(704).LineToolSineLine,LineToolGhostFeed:i(705).LineToolGhostFeed,LineToolBezierQuadro:i(706).LineToolBezierQuadro,LineToolBezierCubic:i(707).LineToolBezierCubic,LineToolArrow:i(708).LineToolArrow,LineToolRay:i(709).LineToolRay,LineToolExtended:i(710).LineToolExtended,LineToolSchiffPitchfork:i(711).LineToolSchiffPitchfork,LineToolSchiffPitchfork2:i(712).LineToolSchiffPitchfork2,LineToolInsidePitchfork:i(713).LineToolInsidePitchfork,LineToolTextAbsolute:i(336).LineToolTextAbsolute,LineToolArrowMarkLeft:i(114).LineToolArrowMarkLeft,LineToolArrowMarkRight:i(114).LineToolArrowMarkRight,LineToolArrowMarkUp:i(114).LineToolArrowMarkUp,LineToolArrowMarkDown:i(114).LineToolArrowMarkDown,LineToolFlagMark:i(714).LineToolFlagMark,LineToolCypherPattern:i(715).LineToolCypherPattern,LineToolElliottImpulse:i(91).LineToolElliottImpulse,LineToolElliottTriangle:i(91).LineToolElliottTriangle,LineToolElliottTripleCombo:i(91).LineToolElliottTripleCombo,LineToolElliottCorrection:i(91).LineToolElliottCorrection,LineToolElliottDoubleCombo:i(91).LineToolElliottDoubleCombo,
LineToolRiskRewardLong:i(208).LineToolRiskRewardLong,LineToolRiskRewardShort:i(208).LineToolRiskRewardShort,LineToolPosition:i(716).LineToolPosition,LineToolOrder:i(718).LineToolOrder},o=Object.keys(n),r=o.length;r--;)TradingView[o[r]]=n[o[r]];t.exports=n},function(t,e,i){"use strict";(function(e){var n=i(426).ExchangeSession,o=function(){function t(t,e,i,n){return""===t?new h(60*e,i):"S"===t?new h(e,i):new u(i,n,e,o(t,i))}function o(t,e){switch(t){case"D":return new S(e);case"W":return new w(e);case"M":return new P(e)}return console.error("unknown dwm resolution: "+t),null}function r(t,e,i,n,o){var r,s,a,l,c,h,u,d=(new C).init("Etc/UTC",t),p=""!==e;return p?(s=i*M[e],r=M.D):(s=60*i*1e3,r=60*d.spec.findSessionEntry(0,0).length()*1e3),a=r/s,l=p?7:7-d.spec.weekEndsCount(),c=l*a,n<c?(h=n/a,o-h*M.D):(u=n/c,o-u*M.W)}function s(t,e,i,n){if("number"!=typeof i||"number"!=typeof e||isNaN(i)||isNaN(e))throw Error("Cannot extrapolate from "+e+" to "+i);return l(t,e,function(t,e){return e>i||n&&t.length>n})}function a(t,e,i){return l(t,e,function(t,e){return t.length>=i})}function l(t,e,i){var n,o,r,s,a,l=e;for(t.moveTo(l),n=[],o=0,r=0;!i(n,l);){if(o>5)throw console.trace(["0x10",new Date(e),"->",new Date(l)]),Error("Internal error 0x10 while extrapolating.");if((s=t.indexOfBar(l))===L)l=t.startOfBar(0);else if(s===I)l=t.startOfBar(I);else{if((a=t.startOfBar(s))!==e){if(r&&r===a)throw console.trace(["0x11",new Date(e),"->",new Date(a)]),Error("Internal error 0x11 while extrapolating.");r=a,o=0,n.push(a)}l=t.startOfBar(s+1)}t.moveTo(l),o++}return n}function c(t){if(isNaN(t))return NaN;var e=this.indexOfBar(t);return e===I&&(this.moveTo(t),e=this.indexOfBar(t)),e<0?NaN:this.startOfBar(e)}function h(t,e){this.period=t,this.session=e,this.sessionStart=Number.MIN_VALUE,this.sessionEnd=Number.MIN_VALUE}function u(t,e,i,n){this.period=i,this.sessionTgt=t,this.sessionSrc=e||t,this.builder=n,this.periodStart=-Number.MAX_VALUE,this.periodEnd=-Number.MAX_VALUE,this.periodLastBarStart=-Number.MAX_VALUE}function d(t,e,i){var n=E.clone(i);return e.alignToSessionStart(n,t),E.cal_to_utc(t,n)}function p(t,e){var i=E.get_day_of_week(e)-t.firstDayOfWeek();return i<0?i+7:i}function _(t,e){var i=e+t.firstDayOfWeek();return i>E.SATURDAY?i-E.SATURDAY:i}function f(t,e){var i=E.get_day_of_year(e)-1,n=p(t,e)-i%7;return 0===n?T(i/7):(n>=0&&(n-=7),T((n+i)/7))}function m(t,e,i){var n,o=0;for(n=e;n<i;++n)o+=t.isWeekEnd(_(t,n))?1:0;return o}function g(t,e){var i=new Date(Date.UTC(e,11,31,23,59)),n=E.days_per_year(e)-y(t,i);return t.isWeekEnd(E.get_day_of_week(i))&&n--,n}function y(t,e){var i,n,o=E.get_day_of_year(e)-1,r=p(t,e),s=r-o%7;return s<0&&(s+=7),i=0,o<7-s?i+=m(t,s,r):(n=0===s?0:m(t,s,7),i+=m(t,0,r)+n),i+f(t,e)*t.weekEndsCount()}function v(){}function b(t){this.sessionsSpec=t}function S(t){this.session=t}function w(t){this.session=t}function P(t){this.session=t}function T(t){return 0|t}function C(){}function x(t,e,i){var n,o,r,s,a=t.length;if(0===a)return-1;for(n=0,o=a-1,r=T((n+o)/2);;){if(0===(s=i(t[r],e))||s>0){if((o=r-1)<n)return r}else if(n=r+1,
o<n)return r<a-1?r+1:-1;r=T((n+o)/2)}}function k(t,e){var i=E.utc_to_cal(e.timezone,+t),n=E.get_day_of_week(i),o=E.get_minutes_from_midnight(i),r=e.spec.findSessionEntry(n,o);return r.isOvernight()&&o>r.start()+r.length()&&n===r.dayOfWeek()-1&&(n++,o-=1440),n===r.dayOfWeek()&&o>=r.start()&&o<r.start()+r.length()}var L=-1,I=-2,A="undefined"!=typeof window?window:e,E=A.PineJsCalendar?A.PineJsCalendar:i(33),M={S:1e3,D:864e5,W:6048e5,M:2592e6};return h.prototype.alignTime=c,h.prototype.alignTimeIfPossible=function(t){var e=this.alignTime(t);return isNaN(e)?t:e},h.prototype.indexOfBar=function(t){return t<this.sessionStart?L:t>=this.sessionEnd?I:T(E.time_seconds_diff(t,this.sessionStart)/this.period)},h.prototype.startOfBar=function(t){if(t===I)return this.sessionEnd;if(t<0)throw Error("Negative offset is not supported");return this.sessionStart+E.time_seconds(this.period*t)},h.prototype.isLastBar=function(t,e){return e>=this.sessionStart+E.time_seconds(this.period*(t+1)-1)},h.prototype.moveTo=function(t){var e=this.session.timezone,i=E.utc_to_cal(e,t),n=this.session.spec,o=n.alignToSessionStart(i,this.session.timezone);this.sessionStart=E.cal_to_utc(e,i),this.sessionEnd=this.sessionStart+E.time_minutes(o)},u.prototype.alignTime=c,u.prototype.alignTimeIfPossible=function(t){return this.tradingDayToSessionStart(t)},u.prototype.tradingDayToSessionStart=function(t){return this.moveTo(t),this.startOfBar(0)},u.prototype.indexOfBar=function(t){return t<this.periodStart?L:t>=this.periodEnd?I:0},u.prototype.startOfBar=function(t){if(t===I||t>0)return this.periodEnd;if(t===L)throw Error("PRE_SESSION is not supported");return this.periodStart},u.prototype.isLastBar=function(t,e){return e>=this.periodLastBarStart},u.prototype.moveTo=function(t){var e,i,n,o,r,s,a,l,c=E.utc_to_cal(this.sessionSrc.timezone,t);c=this.sessionSrc.spec.correctTradingDay(c,this.sessionSrc.timezone),e=this.sessionTgt.timezone,i=this.builder.indexOfPeriod(c,e),-1===i&&(i*=this.period),n=T(i/this.period)*this.period,o=E.get_year(c),r=this.sessionTgt.spec,s=this.builder.startOfPeriod(e,n,o),this.periodStart=d(e,r,s),a=n+this.period,l=this.builder.startOfPeriod(e,a,o),this.periodEnd=d(e,r,l),E.add_date(l,-1),this.moveToPrevWorkDay(r,l),this.periodLastBarStart=d(e,r,l),(this.periodLastBarStart<this.periodStart||this.periodLastBarStart===this.periodEnd)&&(this.periodLastBarStart=this.periodStart)},u.prototype.moveToPrevWorkDay=function(t,e){for(;t.isWeekEnd(E.get_day_of_week(e));)E.add_date(e,-1)},v.prototype.indexOfPeriod=function(t){return E.get_day_of_year(t)-1},v.prototype.startOfPeriod=function(t,e,i){var n=E.get_cal(t,i,E.JANUARY,1),o=E.add_days_considering_dst(t,n,e);return E.utc_to_cal(t,+o)},b.prototype.uber=new v,b.prototype.indexOfPeriod=function(t){return this.uber.indexOfPeriod(t)-y(this.sessionsSpec,t)},b.prototype.startOfPeriod=function(t,e,i){function n(t,e){this.weekEnds=m(t,e,7),this.calendarDays=7-e,this.businessDays=this.calendarDays-this.weekEnds}function o(t,e){var i,n=0
;for(i=t;i<7&&(s.sessionsSpec.isWeekEnd(_(s.sessionsSpec,i))||!(--e<0));++i)n++;return n}function r(t,e,i){var n,o,r,a,l,c,h=0,u=i%(7-s.sessionsSpec.weekEndsCount());for(n=0,o=u-(0===t?0:e.businessDays);n<7&&o>0;++n)r=s.sessionsSpec.isWeekEnd(_(s.sessionsSpec,n)),h+=r?1:0,o-=r?0:1;return a=e.weekEnds+h,l=T((i-e.businessDays)/(7-s.sessionsSpec.weekEndsCount())),c=a+s.sessionsSpec.weekEndsCount()*l,i+c}var s,a,l,c,h;return e>=g(this.sessionsSpec,i)&&(i++,e=0),s=this,a=new Date(Date.UTC(i,E.JANUARY,1)),l=p(this.sessionsSpec,a),c=new n(this.sessionsSpec,l),h=e<c.businessDays?o(l,e):r(l,c,e),this.uber.startOfPeriod(t,h,i)},S.prototype.indexOfPeriod=function(t){return this.builder().indexOfPeriod(t)},S.prototype.startOfPeriod=function(t,e,i){return this.builder().startOfPeriod(t,e,i)},S.prototype.builder=function(){return this._builder||(this._builder=this.session.spec.hasWeekEnds()?new b(this.session.spec):new v),this._builder},w.prototype.indexOfPeriod=function(t,e){var i=f(this.session.spec,t);return 0===i&&t<this.startOfPeriod(e,0,E.get_year(t))&&(i=-1),i},w.prototype.startOfPeriod=function(t,e,i){var n,o,r=new Date(Date.UTC(i,E.JANUARY,1)),s=p(this.session.spec,r),a=0===s?7*e:7*(e+1)-s,l=E.get_days_per_year(r);return a>l?this.startOfPeriod(t,0,i+T(a/l)):(n=E.get_cal(t,i,E.JANUARY,1),o=E.add_days_considering_dst(t,n,a),E.utc_to_cal(t,+o))},P.prototype.indexOfPeriod=function(t){return E.get_month(t)},P.prototype.startOfPeriod=function(t,e,i){var n,o,r,s;return e<0?(n=T((11-e)/12),i-=n,e+=12*n):e>E.DECEMBER&&(i++,e=E.JANUARY),o=E.get_cal_utc(i,e,1),r=p(this.session.spec,o),r>4&&(s=7-r,E.add_date(o,s)),o},C.prototype.init=function(t,e){return this.timezone="string"==typeof t?E.get_timezone(t):t,this.spec=new n(e),this},{PRE_SESSION:L,POST_SESSION:I,LASTBAR_SESSION:-3,newBarBuilder:t,Session:C,alignPeriodsBack:r,extrapolateBarsFrontByCount:a,extrapolateBarsFrontToTime:s,lower_bound:x,isTradingNow:k,numberOfFullWeeks:f,numberOfWeekEndsSinceYearStart:y,BusinessDaysBuilder:b,alignExchangeTimeToSessionStartAndReturnUTC:d}}();t.exports=o}).call(e,i(98))},function(t,e,i){"use strict";var n,o,r,s;i(295),n=i(55),o=n.greaterThan,r=n.lessThan,s=window.CanvasEx=i(83),TradingView.resizeCanvas=function(t,e,i){var n,o,r,s,a,l=t.prop("height"),c=t.prop("width");l&&c&&(l/=window.hidpiCanvasRatio||1,c/=window.hidpiCanvasRatio||1,l<1&&(l=1),c<1&&(c=1),n=$("<canvas>").prop("width",c).prop("height",l),o=n.get(0).getContext("2d"),r=Math.min(c,e),s=Math.min(l,i),r&&s&&o.drawImage(t.get(0),0,0,r,s,0,0,r,s),t.prop("height",i).prop("width",e),a=t.get(0).getContext("2d"),r&&s&&a.drawImage(n.get(0),0,0,r,s,0,0,r,s),n.remove())},s.computeDashPattern=function(t){return[[t.lineWidth,2*t.lineWidth],[5*t.lineWidth,6*t.lineWidth],[6*t.lineWidth,6*t.lineWidth],[t.lineWidth,4*t.lineWidth]][t.lineStyle-1]},s.drawLine=function(t,e,i,n,o){isFinite(e)&&isFinite(n)&&isFinite(i)&&isFinite(o)&&(t.lineStyle===s.LINESTYLE_DASHED||t.lineStyle===s.LINESTYLE_DOTTED||t.lineStyle===s.LINESTYLE_SPARSE_DOTTED?t.drawDashedLine(t,e,i,n,o):s.drawSolidLine(t,e,i,n,o))},
s.drawArrow=function(t,e,i,n,o){isFinite(e)&&isFinite(n)&&isFinite(i)&&isFinite(o)&&(t.beginPath(),t.moveTo(n,o),t.lineTo(e,i),t.moveTo(e+2,i+2),t.lineTo(e-2,i+2),t.moveTo(e-1,i+1),t.lineTo(e+1,i+1),t.stroke())},s.drawSolidLine=function(t,e,i,n,o){t.beginPath(),t.moveTo(e,i),t.lineTo(n,o),t.stroke()},s.setLineStyle=function(t,e){t.lineStyle=e;var i=[];e!==s.LINESTYLE_SOLID&&(i=s.computeDashPattern(t)),"function"==typeof t.setLineDash?t.setLineDash(i):void 0!==t.mozDash?t.mozDash=i:void 0!==t.webkitLineDash&&(t.webkitLineDash=i)},s.drawPoly=function(t,e,i){var n,o;for(t.beginPath(),t.moveTo(e[0].x,e[0].y),n=0;n<e.length;n++)o=e[n],t.lineTo(o.x,o.y);t.closePath(),t.stroke(),i&&t.fill()},s.drawRoundRect=function(t,e,i,n,o,r){t.beginPath(),t.moveTo(e+r,i),t.lineTo(e+n-r,i),t.arcTo(e+n,i,e+n,i+r,r),t.lineTo(e+n,i+o-r),t.arcTo(e+n,i+o,e+n-r,i+o,r),t.lineTo(e+r,i+o),t.arcTo(e,i+o,e,i+o-r,r),t.lineTo(e,i+r),t.arcTo(e,i,e+r,i,r)},s.drawDashedLineHorizontal=function(t,e,i,n){var o,r,a,l,c,h,u;for(t.save(),o=s.computeDashPattern(t),r=0,a=t.lineWidth,l=a/2,t.translate(-l,-l),c=!0,h=e+n;e<h;)u=o[r],c&&t.fillRect(e,i,u,a),c=!c,e+=u,r=r===o.length-1?0:r+1;t.restore()},s.drawDashedLineVertical=function(t,e,i,n){var o,r,a,l,c,h,u;for(t.save(),o=s.computeDashPattern(t),r=0,a=t.lineWidth,l=a/2,t.translate(-l,-l),c=!0,h=i+n;i<h;)u=o[r],c&&t.fillRect(e,i,a,u),c=!c,i+=u,r=r===o.length-1?0:r+1;t.restore()},s.lineStyles=[],"undefined"!=typeof CanvasRenderingContext2D&&(CanvasRenderingContext2D.prototype.setFont=function(t){if(this.font!==t)try{this.font=t}catch(t){}},CanvasRenderingContext2D.prototype.lineStyle=s.LINESTYLE_SOLID,s.originalSave=CanvasRenderingContext2D.prototype.save,s.originalRestore=CanvasRenderingContext2D.prototype.restore,CanvasRenderingContext2D.prototype.save=function(){s.lineStyles.push(this.lineStyle),s.originalSave.call(this)},CanvasRenderingContext2D.prototype.restore=function(){s.lineStyles.length>0&&(this.lineStyle=s.lineStyles.pop(),s.originalRestore.call(this))},CanvasRenderingContext2D.prototype.drawDashedLine=function(t,e,i,n,o){t.save();var r=s.computeDashPattern(t);if(t.beginPath(),"function"==typeof t.setLineDash)t.setLineDash(r);else if(void 0!==t.mozDash)t.mozDash=r;else{if(void 0===t.webkitLineDash)return t.dashedLineTo(e,i,n,o,r),t.stroke(),void t.restore();t.webkitLineDash=r}t.moveTo(e,i),t.lineTo(n,o),t.stroke(),t.restore()},CanvasRenderingContext2D.prototype.dashedLineTo=function(t,e,i,n,s){var a,l,c,h,u,d,p={thereYet:o,cap:Math.min},_={thereYet:o,cap:Math.min};for(e-n>0&&(_.thereYet=r,_.cap=Math.max),t-i>0&&(p.thereYet=r,p.cap=Math.max),this.moveTo(t,e),a=t,l=e,c=0,h=!0;!p.thereYet(a,i)||!_.thereYet(l,n);)u=Math.atan2(n-e,i-t),d=s[c],a=p.cap(i,a+Math.cos(u)*d),l=_.cap(n,l+Math.sin(u)*d),h?this.lineTo(a,l):this.moveTo(a,l),c=(c+1)%s.length,h=!h}),t.exports=s},,function(t,e,i){"use strict";function n(t){return-1!==v.indexOf(t)}function o(t){return-1!==b.indexOf(t)}function r(t){return t===g.STYLE_RANGE}function s(t){return-1!==S.indexOf(t)}function a(t){return o(t)||s(t)}function l(t){
a(t)&&t!==g.STYLE_RANGE&&m.setValue("chart.lastUsedStyle",t)}function c(){var t=m.getInt("chart.lastUsedStyle");return void 0===t?g.STYLE_CANDLES:t}function h(t){return t?g.STYLE_RANGE:g.STYLE_CANDLES}function u(t,e){var i=r(e),n=y.Interval.isRange(t);return!i&&n?h(!0):i&&!n?h(!1):e}function d(t,e){return e?g.SYMBOL_STRING_DATA[t].type+"-"+g.SYMBOL_STRING_DATA[t].basicStudyVersion:g.SYMBOL_STRING_DATA[t].type}function p(t){var e=t.priceAxisProperties,i=e.lockScale.value(),n=t.style.value()===g.STYLE_PNF;(n||i)&&(e.log.setValue(!1),e.percentage.setValue(!1)),e.logDisabled.setValue(!(!n&&!i)),e.percentageDisabled.setValue(!(!n&&!i))}function _(t){return-1!==w.indexOf(t)}function f(t){return P[t]}var m,g,y,v,b,S,w,P;Object.defineProperty(e,"__esModule",{value:!0}),e.isRequiringRestartSeriesStyles=n,e.isRangeBasedStyle=o,e.isRangeStyle=r,e.isTimeBasedStyle=s,e.isValidStyle=a,e.setLastUsedStyle=l,e.getLastUsedStyle=c,e.getDefaultStyle=h,e.getChartStyleByResolution=u,e.chartStyleStudyId=d,e.preparePriceAxisProperties=p,e.hasProjection=_,e.barFunction=f,m=i(26),i.n(m),g=i(43),y=i(23),v=[g.STYLE_RENKO,g.STYLE_KAGI,g.STYLE_PNF,g.STYLE_PB,g.STYLE_HEIKEN_ASHI],b=[g.STYLE_RENKO,g.STYLE_KAGI,g.STYLE_PNF,g.STYLE_PB,g.STYLE_HEIKEN_ASHI,g.STYLE_RANGE],S=[g.STYLE_BARS,g.STYLE_CANDLES,g.STYLE_HOLLOW_CANDLES,g.STYLE_LINE,g.STYLE_AREA,g.STYLE_BASELINE],w=[g.STYLE_RENKO,g.STYLE_PB,g.STYLE_KAGI,g.STYLE_PNF],P={open:function(t){return t[1]},high:function(t){return t[2]},low:function(t){return t[3]},close:function(t){return t[4]},hl2:function(t){return(t[2]+t[3])/2},hlc3:function(t){return(t[2]+t[3]+t[4])/3},ohlc4:function(t){return(t[1]+t[2]+t[3]+t[4])/4}}},,function(t,e,i){"use strict";var n,o;i.d(e,"a",function(){return o}),n=3e3,o=function(){function t(){var t=this;this._cache=null,this._tryLoad=function(e){t._startLoading().then(e,function(){return setTimeout(function(){return t._tryLoad(e)},n)})}}return t.prototype.load=function(){return this._cache||(this._cache=new Promise(this._tryLoad)),this._cache},t}()},function(t,e,i){"use strict";var n,o=i(29),r=i(0),s=i(35),a=i(36),l=function(){function t(t){this.setData(t)}return t.prototype.setData=function(t){this._data=r.a({},t)},t.prototype.draw=function(t,e){var i,n,o,r,l,c,h,u,d,p,_,f,m,g,y,v,b,S,w,P;this._data.visible&&(i=e.fontSize,t.font=e.font,n=e.tickLength,o=e.borderSize,r=e.paddingTop,l=e.paddingBottom,c=e.paddingInner,h=e.paddingOuter,u=Math.ceil(e.widthCache.measureText(t,this._data.text)),d=e.baselineOffset,p=e.fontSize+r+l,_=o+u+c+h+n,f=this._data.coordinate,this._data.fixedCoordinate&&(f=this._data.fixedCoordinate),m=f-Math.floor(i/2)-r-.5,g=m+p,y=e.isLeft?e.width-o-.5:.5,v=y,t.fillStyle=Object(s.resetTransparency)(this._data.background),t.lineWidth=1,this._data.text&&(e.isLeft?(v=y-_,b=y-n,S=v+h):(v=y+_,b=y+n,S=y+o+n+c),t.beginPath(),t.moveTo(y,m),t.lineTo(v,m),t.lineTo(v,g),t.lineTo(y,g),t.fill(),t.beginPath(),t.strokeStyle=this._data.color,t.moveTo(y,f),t.lineTo(b,f),t.stroke(),t.textAlign="left",t.fillStyle=this._data.color,
t.fillText(Object(a.startWithLTR)(this._data.text),S,g-l-d)),this._data.secondLine&&(w=Math.ceil(e.widthCache.measureText(t,this._data.secondLine)),P=w+c+h,t.fillStyle=Object(s.resetTransparency)(this._data.background),this._data.text&&(m+=p+1,g+=p+1),e.isLeft?(v=Math.min(v,e.width-n),y=v+P,S=v+h):(y=Math.max(v-P,o),v=y+P,S=y+c),t.beginPath(),t.moveTo(y,m),t.lineTo(v,m),t.lineTo(v,g),t.lineTo(y,g),t.fill(),t.textAlign="left",t.fillStyle=this._data.color,t.fillText(Object(a.startWithLTR)(this._data.secondLine),S,g-l-d)))},t.prototype.height=function(t,e){var i=t.fontSize+t.paddingTop+t.paddingBottom;return this._data.secondLine&&e?2*i+1:i},t}();i.d(e,"a",function(){return n}),n=function(){function t(){this._rendererData={text:"",coordinate:0,fixedCoordinate:0,color:"#FFF",background:"#000",visible:!1},this._renderer=new l(this._rendererData),this._invalidated=!0}return t.prototype.text=function(){return this._rendererData.text},t.prototype.background=function(){return this._rendererData.background},t.prototype.color=function(){return this.generateTextColor(this.background())},t.prototype.generateTextColor=function(t){return"black"===Object(o.rgbToBlackWhiteString)(Object(o.parseRgb)(t),160)?"white":"black"},t.prototype.coordinate=function(){return this._updateRendererDataIfNeeded(),this._rendererData.coordinate},t.prototype.floatCoordinate=function(){return this._updateRendererDataIfNeeded(),this._rendererData.floatCoordinate||this._rendererData.coordinate},t.prototype.update=function(){this._invalidated=!0},t.prototype.height=function(t,e){return void 0===e&&(e=!1),this._renderer.height(t,e)},t.prototype.getFixedCoordinate=function(){return this._rendererData.fixedCoordinate||0},t.prototype.setFixedCoordinate=function(t){this._rendererData.fixedCoordinate=t},t.prototype.isVisible=function(){return this._rendererData.visible},t.prototype.renderer=function(){return this._updateRendererDataIfNeeded(),this._renderer.setData(this._rendererData),this._renderer},t.prototype._updateRendererDataIfNeeded=function(){this._invalidated&&(this._updateRendererData(this._rendererData),this._invalidated=!1)},t}()},function(t,e,i){"use strict";function n(t,e){return t<=e}function o(t,e){return t>=e}function r(t,e,i){return Math.min(Math.max(t,e),i)}function s(t){return t<0?-1:t>0?1:0}function a(t){if(t<0)return f.logDebug("MathEx.isBaseDecimal: argument less zero"),!1;for(var e=t;e>1;e/=10)if(e%10!=0)return!1;return!0}function l(t,e,i){return e-t<=i}function c(t,e,i){return Math.abs(t-e)<i}function h(t){return t<=0?(f.logDebug("MathEx.log10: argument less or equal zero"),NaN):Math.log(t)/Math.log(10)}function u(t,e){return t<e?-1:t>e?1:0}function d(t,e){var i,n;if(void 0===e&&(e=u),t.length<1)throw Error("array is empty");for(i=t[0],n=0;n<t.length;++n)e(t[n],i)<0&&(i=t[n]);return i}function p(t,e){var i,n;if(void 0===e&&(e=u),t.length<1)throw Error("array is empty");for(i=t[0],n=0;n<t.length;++n)e(t[n],i)>0&&(i=t[n]);return i}var _,f;Object.defineProperty(e,"__esModule",{value:!0}),e.lessThan=n,e.greaterThan=o,e.clamp=r,e.sign=s,
e.isBaseDecimal=a,e.greaterOrEqual=l,e.equal=c,e.log10=h,e.defComparator=u,e.min=d,e.max=p,_=i(5),f=Object(_.getLogger)("Common.MathEx")},function(t,e,i){"use strict";var n,o,r,s,a,l;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"Linking",function(){return a}),i.d(e,"linking",function(){return l}),n=i(15),o=i.n(n),r=i(4),i.n(r),function(t){t[t.NotBound=0]="NotBound",t[t.BoundToWidget=1]="BoundToWidget",t[t.BoundToModel=2]="BoundToModel"}(s||(s={})),a=function(){function t(){this._watchedSymbol=new o.a,this._seriesShortSymbol=new o.a,this._proSymbol=new o.a,this._watchedInterval=new o.a,this._watchedIntraday=new o.a,this._watchedSupportedResolutions=new o.a,this._symbolNamesList=new o.a,this._chartWidgetBindingState=s.NotBound,this._activeChartWidget=null,this._watchedSymbolListenerBound=this._watchedSymbolListener.bind(this),this._watchedIntervalListenerBound=this._watchedIntervalListener.bind(this),this._onSymbolLinkBound=this._onSymbolLink.bind(this),this._searchCharts=null,this._selfEmit=!1,this._preventFeedBySymbol=!1}return Object.defineProperty(t.prototype,"symbol",{get:function(){return this._watchedSymbol},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"proSymbol",{get:function(){return this._proSymbol},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"symbolNamesList",{get:function(){return this._symbolNamesList},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"seriesShortSymbol",{get:function(){return this._seriesShortSymbol.readonly()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"interval",{get:function(){return this._watchedInterval},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"intraday",{get:function(){return this._watchedIntraday.readonly()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"supportedResolutions",{get:function(){return this._watchedSupportedResolutions.readonly()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"preventFeedBySymbol",{get:function(){return this._preventFeedBySymbol},enumerable:!0,configurable:!0}),t.prototype.bindToChartWidget=function(t){var e,i;if(this.unbindFromChartWidget(),this._activeChartWidget=t,e=t.model())return void this._onChartModelCreated(e);t.modelCreated().subscribe(this,this._onChartModelCreated),this._chartWidgetBindingState=s.BoundToWidget,i=t.properties().mainSeriesProperties,this._watchedSymbol.setValue(i.symbol.value()),this._watchedInterval.setValue(i.interval.value())},t.prototype.unbindFromChartWidget=function(){switch(this._chartWidgetBindingState){case s.BoundToWidget:if(!this._activeChartWidget)throw Error("ChartWidget is undefined");this._activeChartWidget.modelCreated().unsubscribe(this,this._onChartModelCreated);break;case s.BoundToModel:this._symbolProperty().unsubscribe(this,this._onSymbolPropertyChange),this._watchedSymbol.unsubscribe(this._watchedSymbolListenerBound),this._mainSeries().onSymbolResolved().unsubscribe(this,this._updateSeriesSymbolInfo),
this._mainSeries().onSymbolError().unsubscribe(this,this._updateSeriesSymbolInfo),this._intervalProperty().unsubscribe(this,this._onIntervalPropertyChange),this._watchedInterval.unsubscribe(this._watchedIntervalListenerBound),delete this._watchedSymbol.hook,delete this._watchedSymbol.writeLock}this._activeChartWidget=null,this._chartWidgetBindingState=s.NotBound},t.prototype.getChartWidget=function(){return this._activeChartWidget},t.prototype.bindToChartWidgetCollection=function(t){var e=this;this._chartWidgetCollection=t,this.unbindFromChartWidget(),t.activeChartWidget.subscribe(function(t){e.unbindFromChartWidget(),e.bindToChartWidget(t)},{callWithLast:!0})},t.prototype.bindToSearchCharts=function(t){this.unbindFromSearchCharts(),this._searchCharts=t,t.onSearchBySymbol.subscribe(this,this._onSearchBySymbol),this._watchedSymbol.subscribe(this._onSymbolLinkBound)},t.prototype.unbindFromSearchCharts=function(){this._searchCharts&&(this._searchCharts.onSearchBySymbol.unsubscribe(this,this._onSearchBySymbol),this._watchedSymbol.unsubscribe(this._onSymbolLinkBound),this._searchCharts=null)},t.prototype.setPreventFeedBySymbol=function(t){this._preventFeedBySymbol=t},t.prototype._onSearchBySymbol=function(t){if(!t.resolved_symbol)throw Error("no resolved_symbol");this._selfEmit=!0,this._watchedSymbol.setValue(t.resolved_symbol),this._selfEmit=!1},t.prototype._onSymbolLink=function(t){if(!this._selfEmit){if(!this._searchCharts)throw Error("No search charts defined");this._preventFeedBySymbol||this._searchCharts.feedBySymbol(t)}},t.prototype._mainSeries=function(){if(!this._activeChartWidget)throw Error("ChartWidget is undefined");return this._activeChartWidget.model().mainSeries()},t.prototype._properties=function(){return this._mainSeries().properties()},t.prototype._symbolProperty=function(){return this._properties().symbol},t.prototype._intervalProperty=function(){return this._properties().interval},t.prototype._watchedSymbolListener=function(t){(r.enabled("same_data_requery")||this._symbolProperty().value()!==t)&&this._chartWidgetCollection.setSymbol(t)},t.prototype._onSymbolPropertyChange=function(){this._watchedSymbol.setValue(this._symbolProperty().value())},t.prototype._onSymbolResolved=function(t){var e=this._mainSeries().symbolInfo();e&&this._applyValuesFromSymbolInfo(e)},t.prototype._applyValuesFromSymbolInfo=function(t){var e=t.pro_name||r.enabled("trading_terminal")&&(t.full_name||t.name)||"";this._proSymbol.setValue(e),t.aliases&&this._symbolNamesList.setValue(t.aliases)},t.prototype._updateSeriesSymbolInfo=function(){this._seriesShortSymbol.setValue(this._properties().shortName.value());var t=this._mainSeries().symbolInfo();t?(this._applyValuesFromSymbolInfo(t),t.hasOwnProperty("supported_resolutions")?this._watchedSupportedResolutions.setValue(t.supported_resolutions):this._watchedSupportedResolutions.setValue(void 0),this._watchedIntraday.setValue(!!t.has_intraday)):(this._watchedIntraday.deleteValue(),this._proSymbol.deleteValue())},t.prototype._watchedIntervalListener=function(t){
(r.enabled("same_data_requery")||this._intervalProperty().value()!==t)&&this._chartWidgetCollection.setResolution(t)},t.prototype._onIntervalPropertyChange=function(){this._watchedInterval.setValue(this._intervalProperty().value())},t.prototype._onChartModelCreated=function(t){var e,i,n;if(!this._activeChartWidget)throw Error("ChartWidget is undefined");this._chartWidgetBindingState=s.BoundToModel,this._activeChartWidget.modelCreated().unsubscribe(this,this._onChartModelCreated),e=this._symbolProperty(),e.subscribe(this,this._onSymbolPropertyChange),this._watchedSymbol.setValue(e.value()),this._watchedSymbol.subscribe(this._watchedSymbolListenerBound),i=this._mainSeries(),i.onSymbolResolved().subscribe(this,this._onSymbolResolved),this._watchedSymbol.hook=function(t){return i.symbolSameAsCurrent(t)&&(t=i.symbol()),t},i.onSymbolResolved().subscribe(this,this._updateSeriesSymbolInfo),i.onSymbolError().subscribe(this,this._updateSeriesSymbolInfo),i.onSymbolNotPermitted().subscribe(this,this._updateSeriesSymbolInfo),i.onSymbolGroupNotPermitted().subscribe(this,this._updateSeriesSymbolInfo),i.onExtendedHoursNotPermitted().subscribe(this,this._updateSeriesSymbolInfo),this._updateSeriesSymbolInfo(),n=this._intervalProperty(),n.subscribe(this,this._onIntervalPropertyChange),this._watchedInterval.setValue(n.value()),this._watchedInterval.subscribe(this._watchedIntervalListenerBound),this._activeChartWidget.readOnly()&&(this._watchedSymbol.writeLock=!0)},t}(),window.TradingView=window.TradingView||{},l=new a,window.TradingView.Linking=l},function(t,e,i){"use strict";function n(t,e){var i=e.edge;return i.A*t.x+i.B*t.y+i.C>0===e.isPositive}function o(t,e,i,n){var o=e.add(i).scaled(.5),r=o.add(n).scaled(.5),s=l.intersectLineSegments(e,i,r,t);return null===s&&(null===(s=l.intersectLineSegments(i,n,r,t))&&null===(s=l.intersectLineSegments(n,e,r,t)))}function r(t,e,i){return t.x>=e.x&&t.x<=i.x&&t.y>=e.y&&t.y<=i.y}function s(t,e){var i,n,o,r=e.length-1,s=!1,a=t.x,l=t.y;for(i=0;i<e.length;i++)n=e[i],o=e[r],(n.y<l&&o.y>=l||o.y<l&&n.y>=l)&&n.x+(l-n.y)/(o.y-n.y)*(o.x-n.x)<a&&(s=!s),r=i;return s}function a(t,e,i){return(t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y)<=i*i}Object.defineProperty(e,"__esModule",{value:!0});var l=i(153);e.pointInHalfplane=n,e.pointInTriangle=o,e.pointInRectangle=r,e.pointInPolygon=s,e.pointInCircle=a},function(t,e,i){"use strict";var n,o,r;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"PercentageFormatter",function(){return r}),n=i(0),o=i(13),r=function(t){function e(e){void 0===e&&(e=100);var i=t.call(this,e)||this;return i.type="percentage",i}return n.c(e,t),e.prototype.state=function(){var t=o.PriceFormatter.prototype.state.call(this);return t.percent=!0,t},e.prototype.format=function(e,i,n,o){return t.prototype.format.call(this,e,i,n,o)+"%"},e.serialize=function(t){return t.state()},e.deserialize=function(t){return new e(t.priceScale)},e}(o.PriceFormatter)},,,,,,,function(t,e,i){"use strict";var n,o,r,s;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"PriceRange",function(){return s}),n=i(12),
i.n(n),o=i(5),r=Object(o.getLogger)("Chart.PriceRange"),s=function(){function t(t,e){var i,n;null!==t&&"object"==typeof t?(i=t,this._minValue=i.m_minValue,this._maxValue=i.m_maxValue):(n=t,this._minValue=n,void 0!==e&&(this._maxValue=e))}return t.prototype.equals=function(t){return this._minValue===t._minValue&&this._maxValue===t._maxValue},t.prototype.clone=function(){return new t(this._minValue,this._maxValue)},t.prototype.minValue=function(){return this._minValue},t.prototype.setMinValue=function(t){this._minValue=t},t.prototype.maxValue=function(){return this._maxValue},t.prototype.setMaxValue=function(t){this._maxValue=t},t.prototype.length=function(){return this._maxValue-this._minValue},t.prototype.isEmpty=function(){return this._maxValue===this._minValue||this._maxValue!==this._maxValue||this._minValue!==this._minValue},t.prototype.serialize=function(){return{m_maxValue:this._maxValue,m_minValue:this._minValue}},t.prototype.state=function(){return{max:this._maxValue,min:this._minValue}},t.prototype.merge=function(e){return new t(Math.min(this.minValue(),e.minValue()),Math.max(this.maxValue(),e.maxValue()))},t.prototype.apply=function(t,e){this._minValue=Math.min(this._minValue,t),this._maxValue=Math.max(this._maxValue,e)},t.prototype.set=function(t,e){this._minValue=t,this._maxValue=e},t.prototype.scaleAroundCenter=function(t){var e,i,o,s;if(!Object(n.isNumber)(t))return void r.logDebug("PriceRange.scaleAroundCenter: invalid coeff");0!==(e=this._maxValue-this._minValue)&&(i=.5*(this._maxValue+this._minValue),o=this._maxValue-i,s=this._minValue-i,o*=t,s*=t,this._maxValue=i+o,this._minValue=i+s)},t.prototype.shift=function(t){if(!Object(n.isNumber)(t))return void r.logDebug("PriceRange.shift: invalid coeff");this._maxValue+=t,this._minValue+=t},t.prototype.containsStrictly=function(t){return t.minValue()>this._minValue&&t.maxValue()<this._maxValue},t}()},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"CompositeRenderer",function(){return n});var n=function(){function t(){this._renderers=[],this._globalAlpha=1}return t.prototype.setGlobalAlpha=function(t){this._globalAlpha=t},t.prototype.append=function(t){this._renderers.push(t)},t.prototype.insert=function(t,e){this._renderers.splice(e,0,t)},t.prototype.draw=function(t){for(var e=0;e<this._renderers.length;e++)t.save(),t.globalAlpha=this._globalAlpha,this._renderers[e].draw(t),t.restore()},t.prototype.drawBackground=function(t){var e,i;for(t.save(),t.globalAlpha=this._globalAlpha,e=0;e<this._renderers.length;e++)i=this._renderers[e],i.drawBackground&&i.drawBackground(t);t.restore()},t.prototype.hitTest=function(t){var e,i,n=null;for(e=this._renderers.length-1;e>=0;e--)null!==(i=this._renderers[e].hitTest(t))&&(null===n||i.result()>n.result())&&(n=i);return n},t}()},,function(t,e,i){"use strict";var n,o;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"NumericFormatter",function(){return o}),n=i(13),o=function(){function t(t){this._precision=t}return t.prototype.format=function(e){
return(void 0!==this._precision?e.toFixed(this._precision):t.formatNoE(e)).replace(".",n.formatterOptions.decimalSign)},t.prototype.parse=function(t){var e=t.replace(n.formatterOptions.decimalSign,"."),i=parseFloat(e);return this._precision&&(i=+i.toFixed(this._precision)),i},t.formatNoE=function(t){return t>=1e-15&&t<1?t.toFixed(15).replace(/\.?0+$/,""):t+""},t}()},function(t,e,i){"use strict";function n(t){return x.Interval.parse(t).value()}function o(t){var e,i,o,r;return!!x.Interval.isRange(t)||(t=n(t),e=I.linking.supportedResolutions.value(),i=!1,void 0!==e?(o=e.map(n),i=-1!==o.indexOf(t)):i=!0,r=I.linking.intraday.value(),r?i:x.Interval.isDWM(t)&&i)}function r(t){x.Interval.isValid(t)&&(x.Interval.isRange(t)?L.setValue("chart.lastUsedRangeResolution",t):L.setValue("chart.lastUsedTimeBasedResolution",t))}function s(t){var e,i=L.getValue("chart.lastUsedRangeResolution");return void 0!==i&&x.Interval.isRange(i)?i:(e=t.filter(function(t){return x.Interval.isRange(t)}),e.includes("100R")?"100R":e.length>0?e[0]:"100R")}function a(t){var e,i=L.getValue("chart.lastUsedTimeBasedResolution");return void 0!==i&&x.Interval.isTimeBased(i)?i:(e=t.filter(function(t){return x.Interval.isTimeBased(t)}),e.includes("1D")?"1D":e.length>0?e[0]:"1D")}function l(t){return t?"100R":"1D"}function c(t,e,i){var n=k.isRangeStyle(t),o=x.Interval.isRange(e);return!n&&o?a(i):n&&!o?s(i):e}function h(t){return x.Interval.isRange(t)?"1":t}function u(t){var e=x.Interval.parse(t),i=d(e.kind()),n=e.multiplier();return void 0!==n&&n<=i}function d(t){var e=D[t];return Number.isNaN(e)?1:e}function p(t){return d(x.Interval.kind(t))}function _(t){var e=f(L.getJSON(t,[]));return E()(e.filter(u).map(n))}function f(t){return Array.isArray(t)?t:Object.keys(t)}function m(){var t,e,i,o=[];for(t=0;t<arguments.length;t++)o[t]=arguments[t];return i=(e=[]).concat.apply(e,o),i=E()(i.filter(u).map(n)),g(i)}function g(t){return t.sort(v)}function y(t){var e=new x.Interval(t),i=e.multiplier()||1;return e.kind()===x.ResolutionKind.Minutes&&T(i)?[x.ResolutionKind.Hours,Math.floor(i/60)]:[e.kind(),i]}function v(t,e){var i=y(t),n=i[0],o=i[1],r=y(e),s=r[0],a=r[1];return n!==s?V[n]-V[s]:o-a}function b(){var t=[];return t}function S(t){var e=w(t);return""+e.multiplier+e.shortKind}function w(t){var e=x.Interval.parse(t),i=e.multiplier(),n=e.kind();if(!e.isValid()||void 0===i)throw new TypeError("Can't translate invalid interval");return e.kind()===x.ResolutionKind.Minutes&&T(i)&&(i=Math.floor(i/60),n=x.ResolutionKind.Hours),{multiplier:""+i,shortKind:P(n),hint:i+" "+P(n,i),mayOmitMultiplier:e.isDWM()&&1===i}}function P(t,e){if(e)switch(t){case x.ResolutionKind.Days:return window.t("day",{plural:"days",count:e});case x.ResolutionKind.Weeks:return window.t("week",{plural:"weeks",count:e});case x.ResolutionKind.Months:return window.t("month",{plural:"months",count:e});case x.ResolutionKind.Seconds:return window.t("second",{plural:"seconds",count:e});case x.ResolutionKind.Minutes:return window.t("minute",{plural:"minutes",count:e});case x.ResolutionKind.Hours:
return window.t("hour",{plural:"hours",count:e});case x.ResolutionKind.Range:return window.t("range",{plural:"ranges",count:e});default:return t}else switch(t){case x.ResolutionKind.Minutes:return window.t("m",{context:"interval_short"});case x.ResolutionKind.Hours:return window.t("h",{context:"interval_short"});case x.ResolutionKind.Days:return window.t("D",{context:"interval_short"});case x.ResolutionKind.Weeks:return window.t("W",{context:"interval_short"});case x.ResolutionKind.Months:return window.t("Mo",{context:"interval_short"});case x.ResolutionKind.Range:return window.t("R",{context:"interval_short"});default:return""}}function T(t){return t>=60&&!(t%60)}var C,x,k,L,I,A,E,M,O,D,V;Object.defineProperty(e,"__esModule",{value:!0}),e.normalizeIntervalString=n,e.isAvailable=o,e.setLastUsedResolution=r,e.getRangeResolution=s,e.getTimeBasedResolution=a,e.getDefaultResolution=l,e.getResolutionByChartStyle=c,e.getServerInterval=h,e.isResolutionMultiplierValid=u,e.getMaxResolutionValue=p,e.getResolutionsFromSettings=_,e.convertResolutionsFromSettings=f,e.mergeResolutions=m,e.sortResolutions=g,e.getCustomResolutions=b,e.getTranslatedResolution=S,e.getTranslatedResolutionModel=w,e.isHour=T,C=i(234),i.n(C),i(9),x=i(23),k=i(51),L=i(26),i.n(L),I=i(56),A=i(160),E=i.n(A),M={},M[x.ResolutionKind.Seconds]=60,M[x.ResolutionKind.Minutes]=1440,M[x.ResolutionKind.Hours]=24,M[x.ResolutionKind.Days]=365,M[x.ResolutionKind.Weeks]=52,M[x.ResolutionKind.Months]=12,M[x.ResolutionKind.Range]=1e3,M[x.ResolutionKind.Invalid]=NaN,D=M,O={},O[x.ResolutionKind.Seconds]=1,O[x.ResolutionKind.Minutes]=2,O[x.ResolutionKind.Hours]=3,O[x.ResolutionKind.Days]=4,O[x.ResolutionKind.Weeks]=5,O[x.ResolutionKind.Months]=6,O[x.ResolutionKind.Range]=7,O[x.ResolutionKind.Invalid]=8,V=O},function(t,e,i){"use strict";function n(t){return new Promise(function(e){i.e(1).then(function(n){var r=i(78).createDialog;e(r(o.a({},a,t)))}.bind(null,i)).catch(i.oe)})}var o,r,s,a;Object.defineProperty(e,"__esModule",{value:!0}),e.createConfirmDialog=n,o=i(0),i(9),r={key:13,name:"yes",text:window.t("Yes"),type:"success"},s={method:"close",name:"no",text:window.t("No"),type:"default"},a={actions:[r,s],actionsWrapTemplate:'<div class="tv-dialog__section tv-dialog__section--actions tv-dialog__section--no-border">',content:window.t("Are you sure?"),contentWrapTemplate:'<div class="tv-dialog__section tv-dialog__section--no-border"><div class="tv-text"><p></p></div></div>',destroyOnClose:!0,title:window.t("Confirmation"),width:400}},function(t,e,i){"use strict";(function(t,n,o,r){function s(){return{count:TradingView.DEFAULT_BAR_COUNT}}function a(e,o,r){var l,f=i(139);B.call(this,e),this._boxSizeChanged=new t,this._tagsChanged=new t,this._symbolIntervalChanged=new t,this._symbolResolved=new t,this._symbolError=new t,this._symbolNotPermitted=new t,this._symbolGroupNotPermitted=new t,this._intervalChanged=new t,this._extendedHoursChanged=new t,this._extendedHoursNotPermitted=new t,this.chartTypeNotPermitted=new t,this.intradaySpreadNotPermitted=new t,
this.intradayExchangeNotPermitted=new t,this.customIntervalNotPermitted=new t,this.chartWidgetInitialized=new t,this._startLoading=new t,this._dataLoaded=new t,this._tickmarksRangeChanged=new t,this._barReceived=new t,this._onStyleChanged=new t,this._onCompleted=new t,this._onStatusChanged=new t,this._onRestarted=new t,this._onSessionsStudyCreated=new t,this.requestingIntradayWhenNotSupported=new t,this.requestingResolutionWhenNotSupported=new t,this._priceScaleChanged=new t,this._onInReplayStateChanged=new t,this._requestOptions=r||s(),this.m_model=e,this._chartApi=e._chartApi,this.m_data=new N(["time","open","high","low","close","adt","style"]),this.setProperties(o),this._prevChartStyle=o.style.value(),this.createPaneView(),this._dataWindowView=new p(this,e),this._legendView=new _(this,e),this._statusView=new c(this,e.properties()),this._priceAxisViews=[new h(this,e),new d(this,{model:e}),new u(this,{model:e})],this._symbolInfo=null,this._status=a.STATUS_OFFLINE,this._syncModel=null,this._replaySubscriber=null,l=this,this._turnaroundCounter=1,this._turnaround="s"+this._turnaroundCounter,this._handler=function(t){l.onData(t)},this._haStyle={studyId:ot.chartStyleStudyId(a.STYLE_HEIKEN_ASHI,!0)},this._renkoStyle={studyId:ot.chartStyleStudyId(a.STYLE_RENKO,!0)},this._pbStyle={studyId:ot.chartStyleStudyId(a.STYLE_PB,!0)},this._kagiStyle={studyId:ot.chartStyleStudyId(a.STYLE_KAGI,!0)},this._pnfStyle={studyId:ot.chartStyleStudyId(a.STYLE_PNF,!0)},this._rangeStyle={studyId:ot.chartStyleStudyId(a.STYLE_RANGE,!0)},this._properties.addExclusion&&this._properties.addExclusion("visible"),this._base=100,this._formatter=new H(this._base),this._predictBars=0,this._futureBarsPaneView=null,this._properties.showInDataWindow.listeners().subscribe(e,f.prototype.fullUpdate),this.marketStatus=new n,this._seriesLoaded=!1,this.properties().minTick.listeners().subscribe(this,a.prototype._recreateFormatter),l=this,this.properties().minTick.listeners().subscribe(null,function(){l.m_model.invalidate(new W(W.FULL_UPDATE))}),this._prevClosePriceLineView=new dt(this),this._priceLineView=new ut(this),this._baseHorizontalLineView=new ht(this),this._gotoDateResultCleared=!1,this._gotoDateView=null,this.bindStyleChange(),this.bindJapChartsInputs(),this._createIsPrevClosePriceAvailableProperty(),this.createExtendedHoursProperty(),this.extendedHours.listeners().subscribe(this,function(){this._extendedHoursChanged.fire()}),this._extendedHoursNotPermitted.subscribe(this,function(){this._properties.extendedHours.setValue(!1)}),this._extendedHoursChanged.subscribe(this,function(){this._status!==a.STATUS_SNAPSHOT&&this.restart()}),this._symbolIntervalChanged.subscribe(this,this.checkInterval),this.properties().showCountdown.listeners().subscribe(this,a.prototype._onChangeShowCountdown),this._onChangeShowCountdown(this.properties().showCountdown),this._recreateFormatter(),this._isDWMCached=null,this.properties().lineStyle.priceSource.listeners().subscribe(this,this._updateBarFunction),
this.properties().areaStyle.priceSource.listeners().subscribe(this,this._updateBarFunction),this.properties().baselineStyle.priceSource.listeners().subscribe(this,this._updateBarFunction),this._updateBarFunction()}var l,c,h,u,d,p,_,f,m,g,y,v,b,S,w,P,T,C,x,k,L,I,A,E,M,O,D,V,R,B,F,N,W,j,H,U,z,q,Y,G,K,X,J,Z,Q,tt,et,it,nt,ot,rt,st,at,lt,ct,ht,ut,dt,pt,_t;TradingView.DEFAULT_BAR_COUNT=300,TradingView.TIME_PLOT=0,TradingView.OPEN_PLOT=1,TradingView.HIGH_PLOT=2,TradingView.LOW_PLOT=3,TradingView.CLOSE_PLOT=4,TradingView.ADT_PLOT=6,TradingView.STYLE_PLOT=7,l=i(6).ensureNotNull,c=i(726),h=i(728).PrevCloseSeriesPriceAxisView,u=i(729).ProjectionSeriesPriceAxisView,d=i(338).SeriesPriceAxisView,p=i(339).SeriesDataWindowView,_=i(730).SeriesLegendView,f=i(341),m=f.SeriesAreaPaneView,g=f.SeriesLinePaneView,y=f.SeriesHollowCandlesPaneView,v=f.SeriesCandlesPaneView,b=f.SeriesBarsPaneView,S=f.SeriesHeikenAshiPaneView,w=f.SeriesBaselinePaneView,P=i(342).SeriesWaterlinePaneView,T=i(4),C=i(2).propertyPages,x=i(732),k=x.SeriesRenkoPaneView,L=x.SeriesProjectionRenkoPaneView,I=x.SeriesPriceBreakPaneView,A=x.SeriesProjectionPriceBreakPaneView,E=x.SeriesKagiPaneView,M=x.SeriesProjectionKagiPaneView,O=x.SeriesPnFPaneView,D=x.SeriesProjectionPnFPaneView,V=i(253).BarsRange,R=i(197).SeriesBarColorer,B=i(34).PriceDataSource,F=i(112),N=i(229).SeriesData,W=i(17),j=i(163),H=i(13).PriceFormatter,U=i(20),z=U.PlotList,q=U.PlotRowSearchMode,Y=U.mergeMinMax,G=i(32),K=i(322).unpackNonSeriesData,X=i(344).SyncModel,J=i(28).trackEvent,Z=i(142).translatedIntervalString,Q=i(22),tt=i(5),et=tt.getLogger("Chart.Series"),it=tt.getLogger("Chart.Series.Updates",{highRate:!0}),nt=i(43),ot=i(51),rt=i(69),st=rt.getServerInterval,at=rt.getResolutionByChartStyle,lt=i(23).Interval,ct=i(44),ht=i(736).SeriesHorizontalBaseLinePaneView,ut=i(737).SeriesPriceLinePaneView,dt=i(738).SeriesPrevClosePriceLinePaneView,pt=ct.getQuoteSessionInstance,_t=!T.enabled("hide_series_legend_item"),inherit(a,B),a.prototype.styleStudyInfos=function(){return{haStyle:this._haStyle,renkoStyle:this._renkoStyle,pbStyle:this._pbStyle,kagiStyle:this._kagiStyle,pnfStyle:this._pnfStyle,rangeStyle:this._rangeStyle}},a.prototype.styleStudyInfo=function(t){return this.styleStudyInfos()[t]},a.prototype.priceLineColor=function(t){return this.properties().priceLineColor.value()||t},a.prototype.endOfData=function(){return this._endOfData},a.prototype.serverTimeOffset=function(){return this._chartApi.serverTimeOffset()},a.prototype._onChangeShowCountdown=function(t){var e=this;t.value()?this._countdownUpdateTimer=this.m_model.setInterval(function(){e.isDWM()||(e._priceAxisViews[0].update(),e.m_model.invalidate(new W(W.LIGHT_UPDATE)))},500):(this.m_model.clearInterval(this._countdownUpdateTimer),delete this._countdownUpdateTimer)},a.prototype.lastValueData=function(t,e,i){var n,o,r,s,a,l,c,h,u,d,p={noData:!0};if(this.m_model.timeScale().isEmpty()||this.priceScale().isEmpty()||this.data().isEmpty())return p;if(null===(n=this.m_model.timeScale().visibleBars()))return p;if(e){
if(null===(s=this.data().bars().last()))return p;o=s.value,r=s.index}else{if(null===(a=this.data().bars().search(n.lastBar(),q.NearestLeft)))return p;o=this.data().bars().valueAt(a.index),r=a.index}return l={noData:!1},c=void 0!==t?o[t]:this._barFunction(o),i&&(l.price=c),h=this.firstValue(),l.text=this.priceScale().formatPrice(c,h),u=this.barColorer(),d=u.barStyle(r,!1),l.color=d.barColor,l.floatCoordinate=this.priceScale().priceToCoordinate(c,h,!0),l.coordinate=Math.round(l.floatCoordinate),l.index=r,l},a.prototype.prevClose=function(){var t,e;return this.priceScale().isEmpty()||this.data().isEmpty()||!this.quoteData?null:null==(t=this.quoteData.prev_close_price)?null:(e=this.firstValue(),{coordinate:this.priceScale().priceToCoordinate(t,e),floatCoordinate:this.priceScale().priceToCoordinate(t,e,!0),text:this.priceScale().formatPrice(t,e)})},a.prototype._createIsPrevClosePriceAvailableProperty=function(){this._isPrevClosePriceAvailable=new o(!this.isDWM()),this._onRestarted.subscribe(this,function(){this._isPrevClosePriceAvailable.setValue(!this.isDWM())})},a.prototype.isPrevClosePriceAvailable=function(){return this._isPrevClosePriceAvailable},a.prototype._prepareChartApiParams=function(){return this._requestOptions.startDate?!this._requestOptions.startDate||this._requestOptions.endDate||this._requestOptions.count?this._requestOptions.startDate&&this._requestOptions.endDate?["from_to",this._requestOptions.startDate,this._requestOptions.endDate]:["from_to",this._requestOptions.startDate,this._requestOptions.count]:["from_to",this._requestOptions.startDate]:this._requestOptions.count||TradingView.DEFAULT_BAR_COUNT},a.prototype._nextSymbolId=1,a.prototype._nextSeriesId=1,Object.assign(a,nt),a.PERMISSION_DENIED="permission denied",a.PD_REASON_SYMBOL="symbol",a.PD_REASON_EXTENDED_HOURS="extended_hours",a.PD_REASON_GROUP_PERMISSION="group",a.STUDY_NOT_AUTH="study_not_auth",a.prototype.model=function(){return this.m_model},a.prototype.fixLastBar=function(t){},a.prototype.clearData=function(){this.data().clear()},a.prototype.data=function(){return this.m_data},a.prototype.symbolId=function(){return this._symbolId},a.prototype.seriesId=function(){return this._seriesId},a.prototype.isPulse=function(){return this._symbolInfo&&this._symbolInfo.resolutions.length>0},a.prototype.onTagsChanged=function(){return this._tagsChanged},a.prototype.onSymbolIntervalChanged=function(){return this._symbolIntervalChanged},a.prototype.onSymbolResolved=function(){return this._symbolResolved},a.prototype.onSymbolError=function(){return this._symbolError},a.prototype.onSymbolNotPermitted=function(){return this._symbolNotPermitted},a.prototype.onSymbolGroupNotPermitted=function(){return this._symbolGroupNotPermitted},a.prototype.onIntervalChanged=function(){return this._intervalChanged},a.prototype.onExtendedHoursNotPermitted=function(){return this._extendedHoursNotPermitted},a.prototype.onStartLoading=function(){return this._startLoading},a.prototype.onDataLoaded=function(){return this._dataLoaded},a.prototype.onStatusChanged=function(){
return this._onStatusChanged},a.prototype.onTickmarksRangeChanged=function(){return this._tickmarksRangeChanged},a.prototype.onBarReceived=function(){return this._barReceived},a.prototype.onStyleChanged=function(){return this._onStyleChanged},a.prototype.onCompleted=function(){return this._onCompleted},a.prototype.onRestarted=function(){return this._onRestarted},a.prototype.onBoxSizeChanged=function(){return this._boxSizeChanged},a.prototype.status=function(){return this._status},a.prototype.isDWM=function(){var t,e;return null!==this._isDWMCached?this._isDWMCached:(t=new lt(this._properties.interval.value()),t.isDWM()?this._isDWMCached=!0:(e=t.isSeconds()?t.multiplier():60*t.multiplier(),this._isDWMCached=!(e<216e3)),this._isDWMCached)},a.prototype.lastPriceLabelFixedCoordinate=function(){return this._priceAxisViews[0]._fixedCoordinate},a.prototype.createPaneView=function(){this._paneView=null,this._projectionBarsPaneView=null,this._waterlineView=null,this._symbolLabelView=new F(this.m_model,this,void 0,"firstShortName","showSymbolLabels");var t=this._properties.style.value();switch(t){case a.STYLE_BARS:this._paneView=new b(this,this.m_model);break;case a.STYLE_CANDLES:this._paneView=new v(this,this.m_model);break;case a.STYLE_LINE:this._paneView=new g(this,this.m_model);break;case a.STYLE_AREA:this._paneView=new m(this,this.m_model);break;case a.STYLE_RENKO:this._paneView=new k(this,this.m_model),this._projectionBarsPaneView=new L(this,this.m_model);break;case a.STYLE_PB:this._paneView=new I(this,this.m_model),this._projectionBarsPaneView=new A(this,this.m_model);break;case a.STYLE_KAGI:this._paneView=new E(this,this.m_model),this._projectionBarsPaneView=new M(this,this.m_model);break;case a.STYLE_PNF:this._paneView=new O(this,this.m_model),this._projectionBarsPaneView=new D(this,this.m_model);break;case a.STYLE_HEIKEN_ASHI:this._paneView=new S(this,this.m_model);break;case a.STYLE_HOLLOW_CANDLES:this._paneView=new y(this,this.m_model);break;case a.STYLE_BASELINE:this._paneView=new w(this,this.m_model),this._waterlineView=new P(this);break;default:throw Error("Unknown chart style assigned: "+t)}},a.prototype._clearStylePlot=function(t,e){var i,n;0!==t.size()&&(i=e||l(t.firstIndex()),n=l(t.lastIndex())+1,t.range(i,n).each(function(t,e){e[TradingView.STYLE_PLOT]=null}))},a.prototype.invalidateBarStylesCache=function(t){et.logDebug("Invalidate style cache starting from "+t),this._clearStylePlot(this.m_data.m_bars,t),this._clearStylePlot(this.m_data.m_nsBars)},a.prototype.invalidateBarColorerCache=function(){delete this._barColorerCache,this.invalidateBarStylesCache()},a.prototype.barColorer=function(){var t,e,i,n;if(this._barColorerCache)return this._barColorerCache;for(t=null,e=this.m_model.dataSources().length-1;e>=0;e--)i=this.m_model.dataSources()[e],i.metaInfo&&TradingView.isInherited(i.constructor,TradingView.Study)&&i.hasBarColorer()&&i.properties().visible.value()&&(n=i.barColorer(),null===t?t=n:t.pushBackBarColorer(n));return null===t?t=new R(this):t.pushBackBarColorer(new R(this)),this._barColorerCache=t,
this._barColorerCache},a.prototype.properties=function(){return this._properties},a.prototype._barsState=function(t){var e=t.state();return e.columns=e.columns.filter(function(t){return"style"!==t}),e.data.forEach(function(t){t.value.splice(7,1)}),e},a.prototype.state=function(t,e){var i=this===this.m_model.mainSeries()?"MainSeries":TradingView.className(this.constructor),n={type:i,id:this.id(),state:this.properties().state(e),zorder:this.zorder(),haStyle:this._haStyle,renkoStyle:this._renkoStyle,pbStyle:this._pbStyle,kagiStyle:this._kagiStyle,pnfStyle:this._pnfStyle,rangeStyle:this._rangeStyle};return this._symbolInfo&&this._symbolInfo.ticker&&(n.state.symbol=this._symbolInfo.ticker),t&&(n.bars=this._barsState(this.m_data.m_bars),n.nsBars=this._barsState(this.m_data.m_nsBars),n.symbolInfo=this._symbolInfo,n.rtPrice=this.data().lastProjectionPrice),n.boxSize=this.data().boxSize,n.reversalAmount=this.data().reversalAmount,n},a.prototype.restoreData=function(t,e,i,n,o,r){this._status=a.STATUS_SNAPSHOT,this.m_data.m_bars.restoreState(t),this.m_data.m_nsBars.restoreState(e),this.updateSymbolInfo(i),this.m_data.lastProjectionPrice=n,this.m_data.boxSize=o,o||(this.properties().style.value()===a.STYLE_PNF?this.m_data.boxSize=this.properties().pnfStyle.inputs.boxSize.value():this.properties().style.value()===a.STYLE_RENKO&&(this.m_data.boxSize=this.properties().renkoStyle.inputs.boxSize.value())),this.m_data.reversalAmount=r,r||this.properties().style.value()===a.STYLE_KAGI&&(this.m_data.reversalAmount=this.properties().kagiStyle.inputs.reversalAmount.value())},a.prototype.setProperties=function(t){t.timeframe||t.merge({timeframe:""}),t.shortName||t.merge({shortName:""}),this._properties=t,this._properties.symbol.listeners().subscribe(this,a.prototype.changeSymbol),this._properties.interval.listeners().subscribe(this,a.prototype.changeInterval),this._properties.timeframe.listeners().subscribe(this,a.prototype.changeTimeFrame),this._properties.listeners().subscribe(this,a.prototype.changeProperties)},a.prototype.changeSymbol=function(){this.setSymbolIntervalDelayed(),this.m_model.checkLineToolSelection()},a.prototype.changeInterval=function(){this.setSymbolIntervalDelayed()},a.prototype.changeTimeFrame=function(){J("GUI","Change timeframe")},a.prototype.title=function(){return this.properties().symbol.value()+", "+Z(this.properties().interval.value())},a.prototype.changeProperties=function(t){t!==this._properties.symbol&&t!==this._properties.interval&&t!==this._properties.timeframe&&(this._tagsChanged.fire(),this.createPaneView(),this.updateAllViews(),this.m_model.updateSource(this))},a.prototype._makeNextSymbolId=function(){return"symbol_"+this._nextSymbolId++},a.prototype._makeNextSeriesId=function(){return"s"+this._nextSeriesId++},a.prototype.onData=function(t){var e,i,n,o,r,s,c,h,u,d,p,_,f,m,g,y,v=this;switch(t.method){case"symbol_resolved":if(t.params[0]!==this._symbolId){et.logNormal("command for old symbol. Expected:"+this._symbolId+", actual"+t.params[0]);break}this.updateSymbolInfo(t.params[1]),
this.m_model.updateSource(this),this._symbolResolved.fire(this._symbolInfo),this.m_model.realignLineTools(),TradingView.onWidget()||J("Symbol",t.params[1].listed_exchange,t.params[1].name),e=this.symbolInfo().minmov/this.symbolInfo().pricescale,i=this.properties(),i.style.value()===a.STYLE_RENKO&&i.renkoStyle.inputs.boxSize.value()<e?i.renkoStyle.inputs.merge({boxSize:e}):i.style.value()===a.STYLE_PNF&&i.pnfStyle.inputs.boxSize.value()<e?i.pnfStyle.inputs.merge({boxSize:e}):i.style.value()===a.STYLE_KAGI&&i.kagiStyle.inputs.reversalAmount.value()<e&&i.kagiStyle.inputs.merge({reversalAmount:e});break;case"symbol_error":if(t.params[0]!==this._symbolId){et.logNormal("command for old symbol. Expected:"+this._symbolId+", actual"+t.params[0]);break}if(this._setStatus(a.STATUS_INVALID_SYMBOL),this._properties.shortName.setValue(this._properties.symbol.value()),this.m_model.clearAllStudies(),this.updateAllViews(),this.m_model.updateSource(this),(n=t.params[1])===a.PERMISSION_DENIED)switch(t.params[2]){case a.PD_REASON_EXTENDED_HOURS:this._extendedHoursNotPermitted.fire();break;case a.PD_REASON_SYMBOL:this._symbolNotPermitted.fire(t.params[3]);break;case a.PD_REASON_GROUP_PERMISSION:this._symbolGroupNotPermitted.fire(t.params[3]);break;default:this._symbolNotPermitted.fire(t.params[2])}else this.m_model.resetTimeScale(),this._symbolError.fire();this.m_model.realignLineTools();break;case"series_timeframe":if(t.params[1]!==this._turnaround)break;o=t.params[2],r=t.params[3],s=t.params[4],c=void 0!==s&&s?r:r+10,this.m_model.setTimeViewport(o,c);break;case"series_error":n=t.params[2],delete this._loadingStartTime,T.enabled("charting_library_debug_mode")&&et.logNormal("Error reason: "+n),this._setStatus(T.enabled("no_bars_status")&&this._symbolInfo?a.STATUS_NO_BARS:a.STATUS_INVALID_SYMBOL),"string"==typeof n&&(n.startsWith("study_not_auth:")?(h=n.split(":",2)[1].split("@",2)[0],h in{BarSetRenko:!0,BarSetPriceBreak:!0,BarSetKagi:!0,BarSetPnF:!0}?this.chartTypeNotPermitted.fire(h):"BarSetSpread"===h?this.intradaySpreadNotPermitted.fire():"BarSetRange"===h&&this.customIntervalNotPermitted.fire()):"resolution_not_entitled"===n?this.intradayExchangeNotPermitted.fire():"custom_resolution"===n&&this.customIntervalNotPermitted.fire()),this._seriesLoaded=!0;break;case"series_loading":if(t.params[1]!==this._turnaround)break;if(t.params[0]!==this._seriesId){et.logNormal("command for old series. Expected:"+this._seriesId+", actual"+t.params.customId);break}this._setStatus(a.STATUS_LOADING),v._loadingStartTime=(new Date).getTime();break;case"series_completed":if(t.params[2]!==this._turnaround)break;if(t.params[0]!==this._seriesId){et.logNormal("command for old series. Expected:"+this._seriesId+", actual"+t.params.customId);break}switch(u="chartSession:"+v._chartApi._sessionid,d=(new Date).getTime()-this._loadingStartTime,et.logDebug(u+", Series loading took "+d+" ms, eod:"+this._endOfData),delete this._loadingStartTime,p=t.params[1],"pulsed"===p&&(p="delayed"),p){case"streaming":this._setStatus(a.STATUS_READY);break;case"endofday":
this._setStatus(a.STATUS_EOD);break;case"delayed":this._setStatus(a.STATUS_DELAYED);break;case"pulsed":this._setStatus(a.STATUS_PULSE);break;case"replay":this._setStatus(a.STATUS_REPLAY)}p.match(/delayed_streaming/)&&this._setStatus(a.STATUS_DELAYED_STREAMING),_=this.m_model.paneForSource(this),_.recalculatePriceScale(this.priceScale()),this.m_model.invalidate(new W(W.FULL_UPDATE)),this.m_data.size()&&this._tickmarksRangeChanged.fire({start:l(this.data().first()).value[TradingView.TIME_PLOT],end:l(this.data().last()).value[TradingView.TIME_PLOT]}),this.model().recalcVisibleRangeStudy(this.model().dataSources(),!0),this.model().recalcStudyBasedLineTools(),!this.m_priceScale.isLockScale()||this.model().timeScale().isEmpty()||this._seriesLoaded||(this.model().timeScale()._correctOffset(),this.model().timeScale().correctBarSpacing(),this.model().resetPriceScale(_,this.priceScale())),this._seriesLoaded=!0,this._onCompleted.fire(this._endOfData),this.requestMoreData();break;case"series_deleted":break;case"data_update":if(t.params.customId!==this._seriesId){et.logNormal("command for old series. Expected:"+this._seriesId+", actual"+t.params.customId);break}if(t.params.turnaround!==this._turnaround){et.logNormal("command for old series turnaround. Expected:"+this._turnaround+", actual"+t.params.turnaround);break}if(this._setSymbolIntervalDelay){if(this._willSymbolIntervalChanged())return void et.logNormal("command comes during symbol/interval changing");et.logNormal("data_update comes when symbol interval delay present but symbol/interval should not be changed")}if(this.status()===a.STATUS_INVALID_SYMBOL)break;t.params.plots.length?(f=this.m_data.bars().size(),m=this.m_data.bars().firstIndex(),g=this.m_data.bars().merge(t.params.plots),(null===m||g.index<m)&&(this._endOfData=!1),y="Merge bars. earliestRow:"+g.index+"} ",y+="bars state:{firstBar:"+l(this.m_data.bars().firstIndex())+",lastBar:"+l(this.m_data.bars().lastIndex())+",size:"+this.m_data.bars().size()+"}",it.logDebug(y),f!==this.bars().size()&&(this._barReceived.fire(g),this.model().recalcVisibleRangeStudy(this.model().dataSources(),!0))):(this.m_data.clear(),this._startLoading.fire()),new Promise(function(e){var i=v.properties().style.value();t.params.nonseries&&ot.isRangeBasedStyle(i)?v.parseJapProjBars(t.params.nonseries).then(function(t){v.m_data.m_nsBars=t.nsBars,v.m_data.lastProjectionPrice=t.lastPrice;var i=v.m_data.boxSize!==t.boxSize;v.m_data.boxSize=t.boxSize,v.m_data.reversalAmount=t.reversalAmount,i&&v._boxSizeChanged.fire(v.m_data.boxSize),e()}):(t.params.nonseries||(v.m_data.m_nsBars.clear(),v.m_data.lastProjectionPrice=void 0),e(),e())}).then(function(){v._statusView.invalidate();var t=v.m_model.paneForSource(v);v.m_model.updateAllVolumeStudies(),v.m_model.recalculatePane(t),v.m_model.updateSource(v),v.m_model.updateLineTools(),v.m_model.updateCrossHair()})}this._dataLoaded.fire(t)},a.prototype.parseJapProjBars=function(t){var e,i,n,o=new z(["time","open","high","low","close","adt","style"]),r=this.model().timeScale(),s=this.properties().style.value()
;return new Promise(function(l){t.d&&""!==t.d?K(t.d).then(function(c){var h,u,d,p,_=c.data;for(e=_.price,i=_.boxSize,n=_.reversalAmount,h=_.bars,u=0;h&&u<h.length;u++)d=[],p=t.indexes[h[u].time],d.push(r.points().valueAt(p)),d.push(h[u].open),d.push(h[u].high),d.push(h[u].low),d.push(h[u].close),d.push(h[u].volume),s===a.STYLE_KAGI?d.push(h[u].additionalPrice):s===a.STYLE_PNF&&d.push(h[u].factor),o.add(p,d);l({nsBars:o,lastPrice:e,boxSize:i,reversalAmount:n})}):l({nsBars:o,lastPrice:e,boxSize:i,reversalAmount:n})})},a.prototype.disconnect=function(){this._seriesId&&this._chartApi.removeSeries(this._seriesId),this._symbolId=null,this._seriesId=null,this._predictBars=0,this._status=a.STATUS_OFFLINE},a.prototype.isStarted=function(){return!!this._symbolId},a.prototype.restart=function(){var t,e=i(139);this._onRestarted.fire(),this._setStatus(a.STATUS_RESOLVING),this.m_data=new N(["time","open","high","low","close","adt","style"]),this.updateSymbolInfo(null),this._prevSymbolId=this._symbolId,this._symbolId=this._makeNextSymbolId(),t=this._properties.interval.value(),this._pendingTimeRange&&(t=this._generateTimeframe(t,this._pendingTimeRange),delete this._pendingTimeRange),this._onBeforeModifySeries(this.getSymbolString(),t),t=st(t),this._chartApi.resolveSymbol(this._symbolId,this._getResolvingSymbolString(),this._handler),this._seriesId?(this._turnaround="s"+ ++this._turnaroundCounter,this._chartApi.modifySeries(this._seriesId,this._turnaround,this._symbolId,t,this._handler,this._prevSymbolId)):(this._seriesId=this._makeNextSeriesId(),!1===this._chartApi.createSeries(this._seriesId,this._turnaround,this._symbolId,t,this._prepareChartApiParams(),this._handler)&&(this._seriesId=void 0)),this._properties.showInDataWindow.listeners().subscribe(this.m_model,e.prototype.fullUpdate),this.m_symbol=this._properties.symbol.value(),this.m_interval=this._properties.interval.value()},a.prototype._generateTimeframe=function(t,e){var i,n=e.slice(-1),o=t;return"ytd"===e?o+=",YTD":"d"===n?(i=e.slice(0,-1),o+=","+i,T.enabled("daily_timeframe_suffix")&&(o+="D")):"m"===n?(i=e.slice(0,-1),o+=","+i+"M"):"all"===e&&(o+=",ALL"),o},a.prototype.hasDelayedSymbolIntervalChange=function(){return!!this._setSymbolIntervalDelay},a.prototype.setSymbolIntervalDelayed=function(){this._isDWMCached=null,this._willSymbolIntervalChanged()&&(this._setSymbolIntervalDelay&&(et.logNormal("Clear timeout to change symbol/interval #"+this._setSymbolIntervalDelay),clearTimeout(this._setSymbolIntervalDelay)),this._setSymbolIntervalDelay=setTimeout(function(){et.logNormal("Timeout #"+this._setSymbolIntervalDelay+' fired, new symbol will be "'+this._properties.symbol.value()+'"'),delete this._setSymbolIntervalDelay,this._setSymbolInterval(this._properties.symbol.value(),this._properties.interval.value())}.bind(this),30),et.logNormal("Started timeout #"+this._setSymbolIntervalDelay+' to change symbol/interval from "'+this.m_symbol+'" to "'+this._properties.symbol.value()+'"'))},a.prototype._willSymbolIntervalChanged=function(){
var t=this._checkIntervalWillChanged(this._parseInterval(this._properties.interval.value()).interval);return this._checkSymbolWillChanged(this._properties.symbol.value())||t},a.prototype._checkSymbolWillChanged=function(t){return!this.symbolSameAsCurrent(t)||T.enabled("same_data_requery")},a.prototype._checkIntervalWillChanged=function(t){return this.m_interval!==t||T.enabled("same_data_requery")},a.prototype._parseInterval=function(t){var e=(t+"").split(",");return{interval:2===e.length?e[0]:t,timeframe:2===e.length?e[1]:0}},a.prototype.rerequestData=function(){this._setSymbolInterval(this.m_symbol,this.m_interval,!0)},a.prototype._setSymbolInterval=function(t,e,i){var n,o,r,s,l,c,h;this.clearGotoDateResult(),n=lt.isRange(e),n&&this._properties.rangeStyle.inputs.range.setValue(lt.parse(e).multiplier()),o=this._parseInterval(e),r=o.interval,s=o.timeframe,l=this._checkSymbolWillChanged(t),c=this._checkIntervalWillChanged(r),(l||c||i)&&((n||lt.isRange(this.m_interval))&&(this._symbolId=null),this._syncModel=null,this.m_symbol=t,this.m_interval=r,this.m_timeframe=s,this._symbolId&&!l||this.updateSymbolInfo(null),this.m_model.realignLineTools(),this._status!==a.STATUS_SNAPSHOT&&(this._setStatus(a.STATUS_RESOLVING),this._symbolIntervalChanged.fire(),c&&(h={timeframe:this._pendingTimeRange},this._intervalChanged.fire(this.m_interval,h),this._pendingTimeRange=h.timeframe&&h.timeframe.toLowerCase()),this._onRestarted.fire(),this._seriesLoaded=!1,this._chartApi&&this._chartApi.connected()&&(this._symbolId&&!l||(this._prevSymbolId=this._symbolId,this._symbolId=this._makeNextSymbolId(),this._chartApi.resolveSymbol(this._symbolId,this._getResolvingSymbolString(),this._handler)),this._seriesId?(this._turnaround="s"+ ++this._turnaroundCounter,this._pendingTimeRange&&(e=this._generateTimeframe(e,this._pendingTimeRange),delete this._pendingTimeRange),this._onBeforeModifySeries(this.getSymbolString(),e),this._predictBars=0,e=st(e),this._chartApi.modifySeries(this._seriesId,this._turnaround,this._symbolId,e,this._handler,this._prevSymbolId)):(this._onBeforeModifySeries(this.getSymbolString(),e),this._seriesId=this._makeNextSeriesId(),e=st(e),this._chartApi.createSeries(this._seriesId,this._turnaround,this._symbolId,e,this._prepareChartApiParams(),this._handler)))))},a.prototype.setDefaultTimeframe=function(t){this._pendingTimeRange=t},a.prototype.actualSymbol=function(){return this.symbolInfo()?this.symbolInfo().full_name:this.symbol()},a.prototype.proSymbol=function(){return this.symbolInfo()?this.symbolInfo().pro_name:this.symbol()},a.prototype.symbol=function(){return this.properties().symbol.value()},a.prototype.interval=function(){return this.properties().interval.value()},a.prototype.isIntradayInterval=function(){var t=st(this.interval());return!!/^\d*$/.test(t)&&t<=1440},a.prototype.bars=function(){return this.m_data.m_bars},a.prototype.nsBars=function(){return this.m_data.m_nsBars},a.prototype.open=function(t){return this.m_data.valueAt(t)[TradingView.OPEN_PLOT]},a.prototype.high=function(t){
return this.m_data.valueAt(t)[TradingView.HIGH_PLOT]},a.prototype.low=function(t){return this.m_data.valueAt(t)[TradingView.LOW_PLOT]},a.prototype.close=function(t){return this.m_data.valueAt(t)[TradingView.CLOSE_PLOT]},a.prototype.hl2=function(t){return(this.high(t)+this.low(t))/2},a.prototype.hlc3=function(t){return(this.high(t)+this.low(t)+this.close(t))/3},a.prototype.ohlc4=function(t){return(this.open(t)+this.high(t)+this.low(t)+this.close(t))/4},a.prototype.priceRange=function(t,e){var i,n,o,s,a,l,c;return TradingView.isInteger(t)?TradingView.isInteger(e)?this.data().isEmpty()?null:this.m_priceScale.isLockScale()&&null!==(i=this._model.mainSeriesScaleRatio())?(n=this.priceScale().internalHeight()/(this.model().timeScale().barSpacing()/i),o=this.data().search(e,q.NearestLeft),s=(o.value[TradingView.HIGH_PLOT]+o.value[TradingView.LOW_PLOT])/2,new r(s-.5*n,s+.5*n)):(a=this.data().bars().minMaxOnRange2(t,e,[{index:TradingView.LOW_PLOT,offset:0},{index:TradingView.HIGH_PLOT,offset:0}]),l=this.data().nsBars().minMaxOnRange(t,e,[{index:TradingView.LOW_PLOT,offset:0},{index:TradingView.HIGH_PLOT,offset:0}]),a=Y(a,l),c=null!==a?a.min===a.max?new r(a.min-.5,a.max+.5):new r(a.min,a.max):new r(-.5,.5),this.priceScale().isLog()?new r(this.priceScale().priceToLogical(c.minValue()),this.priceScale().priceToLogical(c.maxValue())):c):(et.logDebug("Series.priceRange: incorrect endBar"),null):(et.logDebug("Series.priceRange: incorrect startBar"),null)},a.prototype.nearestData=function(t,e){if(!TradingView.isInteger(t))return void et.logDebug("Series.nearestData: incorrect logicalPoint");var i=this.data().search(t,e);return null!==i?i:void 0},a.prototype.nearestIndex=function(t,e){var i=this.nearestData(t,e);return i?i.index:void 0},a.prototype.paneViews=function(t){if(!this.properties().visible.value())return null;var e=[this._baseHorizontalLineView,this._paneView];return this._futureBarsPaneView&&e.push(this._futureBarsPaneView),this._projectionBarsPaneView&&e.push(this._projectionBarsPaneView),null!==this._waterlineView&&e.push(this._waterlineView),e.push(this._prevClosePriceLineView),e.push(this._priceLineView),e.push(this._symbolLabelView),null!==this._gotoDateView&&e.push(this._gotoDateView),e},a.prototype.dataWindowView=function(){return this._dataWindowView},a.prototype.legendView=function(){return this._legendView},a.prototype.statusView=function(){return _t?this._statusView:null},a.prototype.priceAxisViews=function(t,e){return this.m_model.paneForSource(this)===t&&e===this.priceScale()&&(this.m_model.properties().scalesProperties.showSeriesLastValue.value()||this.properties().showCountdown.value())?this._priceAxisViews:null},a.prototype.base=function(){return this._base},a.prototype.formatter=function(){return this._formatter},a.prototype.purgeSymbolInfo=function(){this._symbolInfo=null},a.prototype.symbolInfo=function(){return this._symbolInfo},a.prototype._recreateFormatter=function(){var t,e,i,n
;"default"===this.properties().minTick.value()?this._formatter=new H(this._symbolInfo?this._symbolInfo.pricescale:100,this._symbolInfo?this._symbolInfo.minmov:1,!!this._symbolInfo&&this._symbolInfo.fractional,this._symbolInfo?this._symbolInfo.minmove2:void 0):(t=this.properties().minTick.value().split(","),e=parseInt(t[0]),i=parseInt(t[1]),n="true"===t[2],this._formatter=new H(e,i,n)),this.priceScale()&&this.priceScale().updateFormatter()},a.prototype.updateSymbolInfo=function(t){var e,i,n=this,o=t&&(t.pro_name||t.full_name||t.name);T.enabled("charting_library_single_symbol_request")&&this.m_symbol&&(o=this.m_symbol),this._symbolInfo=t,t&&(this._properties.shortName.setValue(t.name),e=this._properties.symbol.value(),i=o,T.enabled("uppercase_instrument_names")&&(e=e.toUpperCase(),i=i.toUpperCase()),o&&e!==i&&this._properties.symbol.setValue(o)),this._base=t?t.pricescale/t.minmov:100,this._recreateFormatter(),this._statusView.update(),this.priceScale().updateFormatter(),this._quoteSessionSymbol!==o&&(this._quoteSessionClientId||(this._quoteSessionClientId="series-"+Q.guid()),this._unsubscribeQuoteSession(),o&&(this._quoteSessionSymbol=o,pt("full").subscribe(this._quoteSessionClientId,this._quoteSessionSymbol,function(t,e){n.quoteData=t&&t.values||null,e&&e.values&&e.values.current_session&&n.marketStatus.setValue(e.values.current_session)}))),this.checkInterval()},a.prototype.dataPoweredBy=function(){return null},a.prototype._unsubscribeQuoteSession=function(){this._quoteSessionSymbol&&(pt("full").unsubscribe(this._quoteSessionClientId,this._quoteSessionSymbol),this._quoteSessionSymbol=void 0)},a.prototype.symbolSameAsCurrent=function(t){if(this.m_symbol===t)return!0;var e=this._symbolInfo;if(e){if(e.full_name===t||e.pro_name===t)return!0;if(e.ticker===t)return!0;if(e.aliases&&-1!==e.aliases.indexOf(t))return!0;if(e.alternatives&&-1!==e.alternatives.indexOf(t))return!0;if(0===t.indexOf("FRA:")&&e.pro_name===t.replace("FRA:","FWB:"))return!0}return!1},a.prototype.updateAllViews=function(){var t,e;for(this._paneView.update(),this._dataWindowView.update(),this._legendView.update(),this._statusView.update(),t=this._priceAxisViews.length,e=0;e<t;e++)this._priceAxisViews[e].update();this._futureBarsPaneView&&this._futureBarsPaneView.update(),this._projectionBarsPaneView&&this._projectionBarsPaneView.update(),null!==this._waterlineView&&this._waterlineView.update(),this._prevClosePriceLineView.update(),this._priceLineView.update(),null!==this._gotoDateView&&this._gotoDateView.update(),this._symbolInfo&&this._symbolLabelView.update(),this._baseHorizontalLineView.update()},a.prototype._setStatus=function(t){this._status=t,this._statusView.update(),this.m_model.updateSource(this),this._onStatusChanged.fire()},a.prototype.requestMoreData=function(t){var e,i,n,o
;this._status!==a.STATUS_READY&&this._status!==a.STATUS_PULSE&&this._status!==a.STATUS_DELAYED&&this._status!==a.STATUS_DELAYED_STREAMING&&this._status!==a.STATUS_EOD&&this._status!==a.STATUS_REPLAY||this.m_model.timeScale().isEmpty()||null!==(e=this.m_model.timeScale().visibleBars())&&0!==this.bars().size()&&(i=t||e.lastBar()-l(this.data().last()).index,this._predictBars<i&&(this._predictBars=i,this._chartApi&&this._chartApi.connected()&&this._chartApi.requestMoreTickmarks(this._seriesId,i,this._handler)),this._endOfData||(n=l(this.bars().firstIndex()),(o=t||n-e.firstBar())<=0||(this._endOfData=!0,this._chartApi&&this._chartApi.connected()&&(this._chartApi.requestMoreData(this._seriesId,o,this._handler),T.enabled("charting_library_base")&&(this._predictBars=0)),this._setStatus(a.STATUS_LOADING))))},a.prototype.bindStyleChange=function(){var t=this;Object.keys(a.STYLE_SHORT_NAMES).map(function(t){return a.STYLE_SHORT_NAMES[t]+"Style"}).forEach(function(e){t._properties[e].listeners().subscribe(t,a.prototype.invalidateBarStylesCache)})},a.prototype.bindJapChartsInputs=function(){this._properties.style.listeners().subscribe(this,this.onChartStyleChanged),this._properties.renkoStyle.inputs.boxSize.listeners().subscribe(this,this.onInputChanged),this._properties.renkoStyle.inputs.style.listeners().subscribe(this,this.onInputChanged),this._properties.renkoStyle.inputs.atrLength.listeners().subscribe(this,this.onInputChanged),this._properties.renkoStyle.inputs.wicks.listeners().subscribe(this,this.onInputChanged),this._properties.pbStyle.inputs.lb.listeners().subscribe(this,this.onInputChanged),this._properties.kagiStyle.inputs.reversalAmount.listeners().subscribe(this,this.onInputChanged),this._properties.kagiStyle.inputs.style.listeners().subscribe(this,this.onInputChanged),this._properties.kagiStyle.inputs.atrLength.listeners().subscribe(this,this.onInputChanged),this._properties.pnfStyle.inputs.boxSize.listeners().subscribe(this,this.onInputChanged),this._properties.pnfStyle.inputs.reversalAmount.listeners().subscribe(this,this.onInputChanged),this._properties.pnfStyle.inputs.sources.listeners().subscribe(this,this.onInputChanged),this._properties.pnfStyle.inputs.style.listeners().subscribe(this,this.onInputChanged),this._properties.pnfStyle.inputs.atrLength.listeners().subscribe(this,this.onInputChanged),this._properties.rangeStyle.inputs.phantomBars.listeners().subscribe(this,this.onInputChanged)},a.prototype.createExtendedHoursProperty=function(){function t(){var t="undefined"!=typeof ProductFeatures&&isProductFeatureEnabled(ProductFeatures.EXTENDED_SESSION),i=e.model().readOnly(),n=e._properties.extendedHours.value(),o=T.enabled("widget");!n||o||i||t||(e._extendedHoursNotPermitted.fire(),n=!1),n&&!e.isIntradayInterval()&&(n=!1),e.extendedHours.setValue(n)}var e=this;e.extendedHours=new o,e._properties.extendedHours.listeners().subscribe(null,t),e._properties.interval.listeners().subscribe(null,t),e.chartWidgetInitialized.subscribe(null,t),t()},a.prototype.setChartStyleWithIntervalIfNeeded=function(t,e){var i,n=e
;void 0===e&&(n=at(t,this._properties.interval.value(),this._model.defaultResolutions())),i=lt.isEqual(n,this._properties.interval.value()),i||this._properties.interval.setValue(n),this._properties.style.setValue(t)},a.prototype.isNeedRestart=function(t){return void 0===t&&(t=this.properties().style.value()),!ot.isRangeStyle(this._prevChartStyle)&&!ot.isRangeStyle(t)&&!(this._prevChartStyle===t||!ot.isRequiringRestartSeriesStyles(this._prevChartStyle)&&!ot.isRequiringRestartSeriesStyles(t))},a.prototype.onChartStyleChanged=function(){this._updateBarFunction(),this.isNeedRestart()&&(this.data().clear(),this.model().timeScale().scrollToRealtime(!1),this.restart()),this._prevChartStyle=this.properties().style.value(),this._onStyleChanged.fire(this.properties().style.value()),this.invalidateBarStylesCache()},a.prototype.applyPreferences=function(t){var e=$.extend(!0,{},t);this.m_priceScale.setMode({autoScale:e.priceAxisProperties.autoScale,percentage:e.priceAxisProperties.percentage,log:e.priceAxisProperties.log,lockScale:e.priceAxisProperties.lockScale}),this.setChartStyleWithIntervalIfNeeded(e.style),delete e.style,delete e.interval,this._properties.mergeAndFire(e),this._properties.saveDefaults(),this.createPaneView(),this.invalidateBarStylesCache()},a.prototype.barFunction=function(){return this._barFunction},a.prototype._updateBarFunction=function(){var t="close";switch(this._properties.style.value()){case a.STYLE_LINE:t=this._properties.lineStyle.priceSource.value();break;case a.STYLE_AREA:t=this._properties.areaStyle.priceSource.value();break;case a.STYLE_BASELINE:t=this._properties.baselineStyle.priceSource.value()}this._barFunction=ot.barFunction(t)},a.prototype.style=function(){return this.properties().style.value()},a.prototype.isRangeBasedStyle=function(){return ot.isRangeBasedStyle(this.style())},a.prototype.onInputChanged=function(){this.restart()},a.prototype.onExtendedHoursChanged=function(){return this._extendedHoursChanged},a.prototype.getSymbolString=function(){var t,e,i;return t=T.enabled("pay_attention_to_ticker_not_symbol")&&this._symbolInfo?this._symbolInfo.ticker:this.actualSymbol(),this.extendedHours.value()&&(t={symbol:t,session:"extended"}),a.SYMBOL_STRING_DATA.hasOwnProperty(this._properties.style.value())&&(e=this.styleStudyInfo(this.getStyleShortName()+"Style").studyId,i=this.getInputsProperties(),t={symbol:t,type:e+"!",inputs:i.state()}),"string"!=typeof t&&(t="="+JSON.stringify(t)),t},a.prototype._getResolvingSymbolString=function(){return this.getSymbolString()},a.prototype.getStyleShortName=function(){var t=this._properties.style.value();if(a.STYLE_SHORT_NAMES.hasOwnProperty(t))return a.STYLE_SHORT_NAMES[t];throw Error("Missed short name for style "+t)},a.prototype.getStyleProperties=function(){return this._properties[this.getStyleShortName()+"Style"]},a.prototype.getInputsProperties=function(){return this.getStyleProperties().inputs||new o},a.prototype.getRealVisibleRange=function(){var t,e,i=this.model().timeScale().visibleBars()
;return null===i?null:(t=this.data().search(i.firstBar(),q.NearestRight),e=this.data().search(i.lastBar(),q.NearestLeft),null===t||null===e?null:new V(t.index,e.index))};a.prototype.firstValue=function(){var t=this.firstBar();return null===t?null:this._barFunction(t)},a.prototype.firstBar=function(){var t,e,i=this.model().timeScale().visibleBars();return null===i?null:(t=i.firstBar(),e=this.data().search(t,q.NearestRight),null!==e?e.value:null)},a.prototype.sessionsStudy=function(){var t,e,i,n;if(this._sessionsStudy)return this._sessionsStudy;for(t=this.model().paneForSource(this),e=t.dataSources(),i=0;i<e.length;i++)if((n=e[i])instanceof TradingView.Study&&"Sessions"===n.metaInfo().shortId)return this._sessionsStudy=n,this._sessionsStudy;return!1},a.prototype.clearSessionStudy=function(){this._sessionsStudy=null},a.prototype.createSessStudy=function(){if(!this.sessionsStudy()){var t=G.findStudyMetaInfo(this.model().studiesMetaData(),"Sessions@tv-basicstudies");this.model().insertStudy(t,!1,!0),this._onSessionsStudyCreated.fire()}},a.prototype.checkSessStudy=function(){T.enabled("charting_library_base")||(this.sessionsStudy()||this.createSessStudy(),this.sessionsStudy().start())},a.prototype.isSpread=function(){return"spread"===this._symbolInfo.type},a.prototype.firstSymbol=function(){return this._symbolInfo?this._symbolInfo.legs[0]:""},a.prototype.firstShortName=function(){return j.ticker(this.firstSymbol())},a.prototype.onSessionsStudyCreated=function(){return this._onSessionsStudyCreated},a.prototype.loadDataTo=function(t){this._turnaround="s"+ ++this._turnaroundCounter;var e=this._properties.interval.value();e=this._generateTimeframe(e,t),this._chartApi.modifySeries(this._seriesId,this._turnaround,this._symbolId,e,this._handler)},a.prototype.checkInterval=function(){if(this._symbolInfo&&(lt.isMinutes(this.interval())&&!this._symbolInfo.has_intraday&&this.requestingIntradayWhenNotSupported.fire(),this._symbolInfo.hasOwnProperty("supported_resolutions"))){var t=lt.normalize(this._properties.interval.value());-1===this._symbolInfo.supported_resolutions.indexOf(t)&&this.requestingResolutionWhenNotSupported.fire(this._symbolInfo.supported_resolutions[0])}},a.prototype.priceScale=function(){return this.m_priceScale},a.prototype.setPriceScale=function(t){this.m_priceScale!==t&&(this.m_priceScale=t,this._priceScaleChanged.fire(t),this._properties.removeProperty("priceAxisProperties"),this._properties.addChild("priceAxisProperties",t.properties()),this._properties.priceAxisProperties.childChanged())},a.prototype.priceScaleChanged=function(){return this._priceScaleChanged},a.prototype.setGotoDateResult=function(t){this._gotoDateResultCleared=!1,i.e(33).then(function(e){if(!this._gotoDateResultCleared){var n=i(936).GotoDateView;this._gotoDateView=new n(this,t),this.m_model.updateSource(this)}}.bind(this).bind(null,i)).catch(i.oe)},a.prototype.clearGotoDateResult=function(t){this._gotoDateView=null,this._gotoDateResultCleared=!0},a.prototype.syncModel=function(){var t,e;if(!this._syncModel){if(t=this.symbolInfo(),
e=this.interval(),!t||!e)return null;this._syncModel=new X(t,e)}return this._syncModel},a.prototype.turnaround=function(){return this._turnaround},a.prototype.getStylesPropertyPage=function(){return T.enabled("show_chart_property_page")?C.ChartStylesPropertyPage:null},a.prototype.getSourceIcon=function(){return{type:"loadSvg",svgId:"series."+this.properties().style.value()}},a.prototype.isStyleSupported=function(t){return!0},a.prototype.isStyleSupportedForReplay=function(t){return ot.isTimeBasedStyle(t)},a.prototype.isInReplay=function(){return null!==this._replaySubscriber},a.prototype._onBeforeModifySeries=function(t,e){},a.prototype._isExtendedHoursAllowed=function(){return this._symbolInfo&&-1!==["stock","index","futures"].indexOf(this._symbolInfo.type)},a.prototype._getTelemetryAdditionalData=function(t,e){e=void 0===e||e;var i={symbol:this.actualSymbol()};return e&&(i.resolution=this.interval()),void 0!==t&&(i.reason=t),i},a.prototype._sendTelemetryReport=function(t,e,i){void 0===i&&(i=this._getTelemetryAdditionalData());var n=Object.assign(e,{additional:i});telemetry.sendChartReport(t,n)},a.prototype._sendTelemetryCounter=function(t,e){this._sendTelemetryReport(t,{count:1},e)},a.prototype._sendTelemetryTiming=function(t,e,i){this._sendTelemetryReport(t,{value:e},i)},a.prototype.destroy=function(){this._unsubscribeQuoteSession(),this.clearGotoDateResult(),this._legendView.destroy()},TradingView.Series=a,e.Series=a}).call(e,i(8),i(15),i(16),i(65).PriceRange)},,,,function(t,e,i){"use strict";t.exports=i(299)},function(t,e,i){"use strict";function n(){this._registeredSources={},this._sourcesToRow={},this._rowsToSources={},this._currentSymbol="",this._actualCapacity=0,this._actualWidth=1,this._numericFormatter=new r,this._percentageFormatter=new o}var o=i(58).PercentageFormatter,r=i(68).NumericFormatter;n.prototype.levelsCount=function(){return 0},n.prototype.topByRow=function(t){return t*n.ROW_HEIGHT},n.prototype.rowHeight=function(t){return n.ROW_HEIGHT},n.prototype.canvas=function(){if(!this._canvas){this._canvas=$("<canvas>"),this._cache=this._canvas.get(0).getContext("2d"),this._canvas.prop("width",100).css("position","absolute").css("top",0).css("z-index",1e3).css("left",0);this._canvas.get(0).getContext("2d").font="12px Verdana"}return this._canvas},n.ROW_HEIGHT=14,n.prototype.points=function(t){return[t.points()[0],t.points()[1]]},n.prototype.startPoint=function(t,e){return e?t.points()[0]:t.points()[1]},n.prototype.priceRange=function(t,e){var i=this.points(t),n=i[0],o=i[1];return e?o.price-n.price:n.price-o.price},n.prototype.sourceIsReady=function(t){return t.points().length>=2},n.prototype._calculateWidth=function(t){var e,i,n,o,r,s,a,l,c,h,u,d,p,_,f,m,g,y,v,b,S,w,P;if(!this.sourceIsReady(t))return null;if(e=this.canvas().get(0).getContext("2d"),e.font="12px Verdana",i=!!t.properties().showPrices&&t.properties().showPrices.value(),n=!!t.properties().coeffsAsPercents&&t.properties().coeffsAsPercents.value(),o=t.properties().showCoeffs.value(),r=t.priceScale(),s=this.points(t),a=s[0],l=s[1],
!a||!l)return null;if(c=!1,h=t.properties(),h.reverse&&h.reverse.value()&&(c=h.reverse.value()),u=this.priceRange(t,c),d=this.startPoint(t,c).price,null===(p=t.ownerSource().firstValue()))return 0;for(_=0,f=[],m=1;m<=this.levelsCount();m++)g="level"+m,y=h[g],v=y.coeff.value(),b=d+v*u,S="",o&&(S+=n?this._percentageFormatter.format(Math.round(1e4*v)/100):this._numericFormatter.format(v)),i&&(S+="("+r.formatPrice(b,p)+")"),w=e.measureText(S).width,P={text:S,left:_,width:w+4},f.push(P),_+=P.width;return{totalWidth:_,cells:f}},n.prototype._effectiveState=function(t){var e,i,n,o,r,s,a={},l=t.properties();for(l.showPrices&&(a.showPrices=l.showPrices.value()),l.coeffsAsPercents&&(a.coeffsAsPercents=l.coeffsAsPercents.value()),a.showCoeffs=l.showCoeffs.value(),t.priceScale()&&t.priceScale().formatter().state&&(a.formatter=t.priceScale().formatter().state()),l.reverse&&(a.reverse=l.reverse.value()),a.p1=t.points()[0],a.p2=t.points()[1],3===t.points().length&&(a.p3=t.points()[2]),a.items=[],e=1;e<=this.levelsCount();e++)i="level"+e,n=l[i],o=n.coeff.value(),r=n.color.value(),s={coeff:o,color:r},a.items.push(s);return a},n.prototype._findEmptyRow=function(t){for(var e,i=0;this._rowsToSources[i];)i++;return this._rowsToSources[i]=t,i>=this._actualCapacity&&(this._actualCapacity++,e=this.canvas(),TradingView.resizeCanvas(e,this._actualWidth,n.ROW_HEIGHT*this._actualCapacity)),i},n.prototype._repaintSource=function(t,e,i){var o,r,s=n.ROW_HEIGHT*i.row,a=this.canvas().get(0).getContext("2d");for(a.clearRect(0,s,this._actualWidth,n.ROW_HEIGHT),a.textBaseline="bottom",a.font="12px Verdana",s+=n.ROW_HEIGHT,o=0;o<t.cells.length;o++)r=t.cells[o],a.fillStyle=e.items[o].color,a.fillText(r.text,r.left,s)},n.prototype.removeSource=function(t){var e,i;this._sourcesToRow[t]&&(e=this._sourcesToRow[t].row,i=this.canvas().get(0).getContext("2d"),i.save(),i.clearRect(0,this.topByRow(e),this._actualWidth,n.ROW_HEIGHT),i.restore(),delete this._sourcesToRow[t],delete this._rowsToSources[e])},n.prototype._effectiveStatesEquals=function(t,e){var i,n=function(t,e){return!(!t&&!e)&&(!(!t||e)||(!(t||!e)||(t.minMove!==e.minMove||(t.minMove2!==e.minMove2||(t.fractional!==e.fractional||t.fractionalLength!==e.fractionalLength)))))},o=function(t,e){return!(!t&&!e)&&(!(!t||e)||(!(t||!e)||(t.index!==e.index||t.price!==e.price)))},r=function(t,e){return t.coeff!==e.coeff||t.color!==e.color};if(t&&!e)return!1;if(!t&&e)return!1;if(t.showPrices!==e.showPrices)return!1;if(t.coeffsAsPercents!==e.coeffsAsPercents)return!1;if(t.showCoeffs!==e.showCoeffs)return!1;if(t.reverse!==e.reverse)return!1;if(n(t.formatter,e.formatter))return!1;if(o(t.p1,e.p1))return!1;if(o(t.p2,e.p2))return!1;if(o(t.p3,e.p3))return!1;if(t.items.length!==e.items.length)return!1;for(i=0;i<t.items.length;i++)if(r(t.items[i],e.items[i]))return!1;return!0},n.prototype.updateSource=function(t){var e,i,o,r,s=t.properties().symbol.value();return this._currentSymbol!==s&&(this._currentSymbol=s,this._sourcesToRow={},this._rowsToSources={}),this._sourcesToRow[t.id()]||(e=this._findEmptyRow(t.id()),
this._sourcesToRow[t.id()]={effectiveState:null,row:e}),i=this._sourcesToRow[t.id()].effectiveState,o=this._effectiveState(t),this._effectiveStatesEquals(i,o)||(r=this._calculateWidth(t),r?(this._sourcesToRow[t.id()].effectiveState=o,r.totalWidth>this._actualWidth&&(TradingView.resizeCanvas(this.canvas(),r.totalWidth,n.ROW_HEIGHT*this._actualCapacity),this._actualWidth=r.totalWidth),e=this._sourcesToRow[t.id()],this._repaintSource(r,o,e),this._sourcesToRow[t.id()].effectiveState=o,this._sourcesToRow[t.id()].preparedCells=r):this._sourcesToRow[t.id()].effectiveState=null),this._sourcesToRow[t.id()]},t.exports=n},function(t,e,i){"use strict";var n,o,r,s;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"dur",function(){return n}),i.d(e,"easingFunc",function(){return o}),i.d(e,"CubicBezier",function(){return r}),i.d(e,"color",function(){return s}),n=350,o={linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return t*(2-t)},easeInOutQuad:function(t){return t<.5?2*t*t:(4-2*t)*t-1},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return--t*t*t+1},easeInOutCubic:function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return 1- --t*t*t*t},easeInOutQuart:function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){return 1+--t*t*t*t*t},easeInOutQuint:function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t}},r=function(){function t(t,e,i,n){this._mX1=t,this._mY1=e,this._mX2=i,this._mY2=n}return t.prototype.easingFunc=function(t){return this._mX1===this._mY1&&this._mX2===this._mY2?t:this._calcBezier(this._getTForX(t))},t.prototype._a=function(t,e){return 1-3*e+3*t},t.prototype._b=function(t,e){return 3*e-6*t},t.prototype._c=function(t){return 3*t},t.prototype._calcBezier=function(t){return((this._a(this._mY1,this._mY2)*t+this._b(this._mY1,this._mY2))*t+this._c(this._mY1))*t},t.prototype._getSlope=function(t){return 3*this._a(this._mX1,this._mX2)*t*t+2*this._b(this._mX1,this._mX2)*t+this._c(this._mX1)},t.prototype._getTForX=function(t){var e,i,n,o=t;for(e=0;e<4;++e){if(0===(i=this._getSlope(o)))return o;n=this._calcBezier(o)-t,o-=n/i}return o},t}(),s={black0:"#000",black20:"#2b2d36",black25:"#2b2e37",black27:"#2f3241",black30:"#212121",black70:"#4A4A4A",black80:"#535353",black100:"#646464",black110:"#757575",black140:"#8A8A8A",black170:"#ADAEB0",black180:"#b4b4b4",black200:"#C8C8C8",black220:"#DADDE0",black230:"#ECECEC",black240:"#F2F2F2",black248:"#F8F8F8",black255:"#FFF",brand:"#3BB3E4",brandHover:"#3BABD8",brandActive:"#3898C2",brandDown:"#049DDC",brand220:"#3BB3E0",brand255:"#3BB3FF",brandNew:"#37A6EF",spinner:"#00A2E2",brandMedium80:"#3C4650",brandMedium90:"#465a6e",brandMedium100:"#627384",brandMedium120:"#758696",brandMedium150:"#94959C",brandMedium190:"#9DB2BD",brandMedium220:"#E9EFF2",brandMedium230:"#EAECEF",brandMedium240:"#F1F3F6",brandDark:"#2A2C39",brandDark50:"#252733",brandDark45:"#20222D",brandDarkText:"#6A6B74",danger:"#FF4A68",
dangerHover:"#F24965",dangerDown:"#FF173E",success:"#3CBC98",success55:"#37BC9B",success250:"#00FFC0",successHover:"#38B395",successDown:"#00A97F",attention:"#FFC84A",attention50:"#F89E30",growing:"#37bc9b",falling:"#ff4a68"}},,,function(t,e,i){"use strict";function n(){return Object(o.hasService)(r)?Object(o.service)(r):null}var o,r;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"TRADING_SERVICE",function(){return r}),e.tradingService=n,o=i(191),r={id:"TradingService"}},function(t,e,i){"use strict";(function(e){function i(){return/on-features-page=1/i.test(window.location.search)}var n=window.TradingView=window.TradingView||{};n.className=function(t){for(var e in this)if(n[e]===t)return e;return null},n.isOnFeaturePage=i(),n.wrapUrl=function(t){return e.enabled("charting_library_base")&&(t=t.replace("/static/","")),t},n.isMobile=function(){var t=/Android/i.test(navigator.userAgent),e=/BlackBerry/i.test(navigator.userAgent),i=/iPhone|iPad|iPod/i.test(navigator.userAgent),n=/Opera Mini/i.test(navigator.userAgent),o=t||e||i||n;return{Android:function(){return t},BlackBerry:function(){return e},iOS:function(){return i},Opera:function(){return n},any:function(){return o}}}(),n.supportTouch=function(){return Modernizr.touch||n.isMobile.any()},n.onWidget=function(){var t,e,i=["^widgetembed/?$","^cmewidgetembed/?$","^([0-9a-zA-Z-]+)/widgetembed/?$","^([0-9a-zA-Z-]+)/widgetstatic/?$","^([0-9a-zA-Z-]+)?/?miniwidgetembed/?$","^([0-9a-zA-Z-]+)?/?mediumwidgetembed/?$","^embed(-static)?/([0-9a-zA-Z]{8})/?$","^widgetpopup/?$","^extension/?$","^chatwidgetembed/?$","^ideaswidgetembed/?$","^ideas-widget/?$","^view-idea-widget/([0-9a-zA-Z]{8})/?$","^user-info-widget/?$","^user-info-widget-get/(.+?)?/?$","^embed-quotes-provider/?$","^idea-popup/?$","^hotlistswidgetembed/?$","^([0-9a-zA-Z-]+)/hotlistswidgetembed/?$","^marketoverviewwidgetembed/?$","^([0-9a-zA-Z-]+)/marketoverviewwidgetembed/?$","^eventswidgetembed/?$","^tickerswidgetembed/?$","^forexcrossrateswidgetembed/?$","^forexheatmapwidgetembed/?$","^marketquoteswidgetembed/?$","^screenerwidget/?$","^cryptomktscreenerwidget/?$","^([0-9a-zA-Z-]+)/cryptomktscreenerwidget/?$","^([0-9a-zA-Z-]+)/marketquoteswidgetembed/?$","^technical-analysis-widget-embed/$","^singlequotewidgetembed/?$"],n=window.location.pathname.replace(/^\//,"");for(e=i.length-1;e>=0;e--)if(t=RegExp(i[e]),t.test(n))return!0;return!1},n.onOrder=function(){return"/order/"===window.location.pathname},t.exports.CheckMobile=n.isMobile,t.exports.isOnFeaturePage=i,t.exports.onWidget=n.onWidget,t.exports.supportTouch=n.supportTouch}).call(e,i(4))},function(t,e,i){"use strict";function n(t){var e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'\(\)~]|%20|%00/g,function(t){return e[t]})}function o(t){var e=[];return t&&Object.keys(t).forEach(function(i){e.push(n(i)+"="+n(t[i]))}),e.join("&")}function r(){C||(C=!0,w[2]=$.t("Market"),w[1]=$.t("Limit"),w[3]=$.t("Stop"),w[4]=$.t("StopLimit"),P[1]=$.t("Buy",{context:"trading"}),P[-1]=$.t("Sell",{
context:"trading"}),T[2]=$.t("filled"),T[1]=$.t("cancelled"),T[6]=$.t("working"),T[3]=$.t("inactive"),T[4]=$.t("placing"),T[5]=$.t("rejected"))}function s(t){return t?t.map(function(t){if("-"===t.text||t.separator)return new b.ActionSeparator;var e=new b.Action({checkable:t.checkable,checked:t.checked,enabled:t.enabled,shortcut:t.shortcut,text:t.text,toolTip:t.tooltip,statName:t.statName});return e.callbacks().subscribe(null,function(e){t.action({checkable:e.checkable,checked:e.checked,enabled:e.enabled,text:e.text})}),e}):[]}function a(t){return t?t.map(function(t){if("-"===t.text||t.separator)return{separator:!0};var e={};return t.checkable&&(e.icon={image:"url('"+TradingView.wrapUrl("/static/images/dialogs/checkbox.png")+"')",offset:t.checked?"0 -16px":""}),e.title=t.text,e.action=t.action,t.url&&(e.url=t.url),t.target&&(e.target=t.target),t.externalLink&&(e.externalLink=t.externalLink),e}):[]}function l(t){if(!t||!t.done)return t;var e=t;return new Promise(function(t,i){e.done(function(e){t(e)}).fail(function(t){i(t)})})}function c(t,e){r();var i=P[t];return e?i.toUpperCase():i}function h(t,e){return r(),e?w[t].toUpperCase():w[t]}function u(t){return r(),T[t]}function d(t){switch(t){case 2:return"orderstatus-filled";case 1:return"orderstatus-cancelled";case 6:return"orderstatus-working";case 3:return"orderstatus-inactive";case 4:return"orderstatus-placing";case 5:return"orderstatus-rejected";default:return"orderstatus-unknown"}}function p(t){return 6===t||3===t}function _(t){return t.indexOf("JPY")===t.length-3?.01:1e-4}function f(t,e,i,n){var o={added:[],modified:[],removed:[]},r=t.slice(0);return e.forEach(function(e){var s,a,l,c,h=t.findIndex(function(t){return t[i]===e[i]});if(-1===h)return void o.added.push(e);for(r[h]=null,s=t[h],a=0,l=n;a<l.length;a++)if(c=l[a],(null===s[c]||"object"!=typeof s[c])&&s[c]!==e[c])return void o.modified.push(e)}),r.forEach(function(t){t&&o.removed.push(t)}),o}function m(t,e,i){var n,o,r;for(n=0,o=i;n<o.length;n++)if(r=o[n],(null===t[r]||"object"!=typeof t[r])&&t[r]!==e[r])return!0;return!1}function g(t,e){return t.reduce(function(t,i){return t[i[e]]=i,t},{})}function y(t){return Math.abs(t||0)<.001?"0.00":Object(S.splitThousands)((t||0).toFixed(2))}function v(t){return-1!==[2,1,5].indexOf(t)}var b,S,w,P,T,C;Object.defineProperty(e,"__esModule",{value:!0}),e.createQueryParams=o,e.convertActionDescriptionsToActions=s,e.convertActionDescriptionsToPopupMenuDescriptions=a,e.wrapDeferredWithPromise=l,e.sideToText=c,e.orderTypeToText=h,e.orderStatusToText=u,e.orderStatusId=d,e.isOrderActive=p,e.pipSizeForForex=_,e.findArraysDifferences=f,e.isObjectDifferent=m,e.objectsArrayToMap=g,e.formatNumber=y,e.isFinalOrderStatus=v,i(9),b=i(30),i.n(b),S=i(150),w={},P={},T={},C=!1},function(t,e,i){"use strict";var n,o,r,s,a;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"LINESTYLE_SOLID",function(){return n}),i.d(e,"LINESTYLE_DOTTED",function(){return o}),i.d(e,"LINESTYLE_DASHED",function(){return r}),i.d(e,"LINESTYLE_LARGE_DASHED",function(){return s}),
i.d(e,"LINESTYLE_SPARSE_DOTTED",function(){return a}),n=0,o=1,r=2,s=3,a=4},function(t,e,i){"use strict";var n=i(304),o={instances:[],createMenu:function(t,e,i){var o=new n(t,e,i);return this.instances.push(o),o},hideAll:function(){for(var t in this.instances)this.instances[t].hide()}};t.exports=o},function(t,e,i){"use strict";function n(t,e){return t<e}function o(t,e,i,n,o){var r,s,a;for(void 0===n&&(n=0),void 0===o&&(o=t.length),r=o-n;0<r;)s=r>>1,a=n+s,i(t[a],e)?(n=a+1,r-=s+1):r=s;return n}function r(t,e,i,r){return void 0===i&&(i=0),void 0===r&&(r=t.length),o(t,e,n,i,r)}function s(t,e,i,n,o){var r,s,a;for(void 0===n&&(n=0),void 0===o&&(o=t.length),r=o-n;0<r;)s=r>>1,a=n+s,i(e,t[a])?r=s:(n=a+1,r-=s+1);return n}function a(t,e,i,o){return void 0===i&&(i=0),void 0===o&&(o=t.length),s(t,e,n,i,o)}Object.defineProperty(e,"__esModule",{value:!0}),e.lowerbound=o,e.lowerbound_int=r,e.upperbound=s,e.upperbound_int=a},function(t,e,i){"use strict";function n(t,e,i,n,r){Object(l.assert)(o(t),"Unknown line tool: "+t);var s=Object(l.ensureDefined)(h[t]);return"LineToolVbPFixed"===t?new s(e,i,n,r):"LineToolRegressionTrend"===t?new s(e,i,n):["LineStudyMtpAnalysis","LineStudyMtpDecisionPoint","LineStudyMtpRiskReward","LineStudyMtpElliotWaveMain","LineStudyMtpElliotWaveMajor","LineStudyMtpElliotWaveMinor","LineStudyMtpDownWave1OrA","LineStudyMtpDownWave2OrB","LineStudyMtpDownWave3","LineStudyMtpDownWave4","LineStudyMtpDownWave5","LineStudyMtpDownWaveC","LineStudyMtpUpWave1OrA","LineStudyMtpUpWave2OrB","LineStudyMtpUpWave3","LineStudyMtpUpWave4","LineStudyMtpUpWave5","LineStudyMtpUpWaveC"].indexOf(t)>=0?new s(e,i,n):new s(e,i)}function o(t){return t in h}function r(t){return t instanceof c.LineDataSource}function s(t){var e=!1;return e}function a(t){var e=!1;return e}var l,c,h;Object.defineProperty(e,"__esModule",{value:!0}),e.createLineTool=n,e.isLineToolName=o,e.isLineTool=r,e.isStudyLineToolName=s,e.isStudyLineTool=a,l=i(6),i.n(l),c=i(1),i.n(c),h=i(47),i.n(h)},,,,,function(t,e,i){"use strict";function n(t,e){var n=e||new p("linetoolelliott");u.call(this,t,n),i.e(0).then(function(t){var e=i(252).ElliottLabelsPaneView;this._setPaneViews([new e(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}function o(t,e){var n=e||new p("linetoolelliott");u.call(this,t,n),this.version=o.version,i.e(0).then(function(t){var e=i(252).ElliottLabelsPaneView;this._setPaneViews([new e(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}function r(t,e){this._constructor="LineToolElliottImpulse";var i=e||new p("linetoolelliottimpulse");o.call(this,t,i)}function s(t,e){this._constructor="LineToolElliottTriangle";var i=e||new p("linetoolelliotttriangle");o.call(this,t,i)}function a(t,e){this._constructor="LineToolElliottTripleCombo";var i=e||new p("linetoolelliotttriplecombo");o.call(this,t,i)}function l(t,e){var n=e||new p("linetoolelliott");u.call(this,t,n),this.version=l.version,i.e(0).then(function(t){var e=i(252).ElliottLabelsPaneView;this._setPaneViews([new e(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}function c(t,e){
this._constructor="LineToolElliottCorrection";var i=e||new p("linetoolelliottcorrection");l.call(this,t,i)}function h(t,e){this._constructor="LineToolElliottLineToolElliottDoubleCombo";var i=e||new p("linetoolelliottdoublecombo");l.call(this,t,i)}var u=i(1).LineDataSource,d=i(30).Action,p=i(3).DefaultProperty,_=i(2).propertyPages;inherit(n,u),n.migrateState=function(t){var e={0:11,1:10,2:9,3:8,4:7,5:6,6:5,7:4,8:3},i={0:11,1:8};"LineToolElliottSubminuette"===t.type&&(t.type="LineToolElliottImpulse",t.state.degree=e[t.state.wavesize]),"LineToolElliottMinor"===t.type&&(t.type="LineToolElliottImpulse",t.state.degree=e[t.state.wavesize]),"LineToolElliottCircle"===t.type&&(t.type="LineToolElliottImpulse",t.state.degree=e[t.state.wavesize]),"LineToolElliottMinorRetr"===t.type&&(t.type="LineToolElliottCorrection",t.state.degree=i[t.state.wavesize]),"LineToolElliottMajorRetr"===t.type&&(t.type="LineToolElliottCorrection",t.state.degree=i[t.state.wavesize])},n.prototype.title=function(){return"Elliott Labels"},n.prototype.name=function(){return"Elliott Labels"},n.degrees=[$.t("Supermillennium"),$.t("Millennium"),$.t("Submillennium"),$.t("Grand Supercycle"),$.t("Supercycle"),$.t("Cycle"),$.t("Primary"),$.t("Intermediate"),$.t("Minor",{context:"wave"}),$.t("Minute"),$.t("Minuette"),$.t("Subminuette"),$.t("Micro"),$.t("Submicro"),$.t("Miniscule")],n.prototype.additionalActions=function(t){var e=new d({text:$.t("Degree")}),i=this;return e.subActions=n.degrees.map(function(e,n){var o=new d({text:e,checkable:!0,checked:i.properties().degree.value()===n});return o.callbacks().subscribe(null,function(){t.setProperty(i.properties().degree,n,"Change Elliott Degree")}),o}),[e]},n.prototype.label=function(t){var e=n.degrees.length-this.properties().degree.value()-1,i=Math.floor(e/3),o=e%3;return{fontIncrease:4*Math.floor(i),bold:!!(i%2),decoration:["","brackets","circle"][o],label:this.labelsGroup()[i][t]}},n.prototype.getStylesPropertyPage=function(){return _.LineToolElliottStylesPropertyPage},n.prototype.getDegrees=function(){return n.degrees},inherit(o,n),o.version=3,o.prototype.pointsCount=function(){return 6},o.prototype.migrateVersion=function(t,e,i){if(1===t){var n=$.extend({},this._timePoint[0]);this._timePoint.unshift(n),this._points.length>0&&(n=$.extend({},this._points[0]),this._points.unshift(n))}},inherit(r,o),r._labelsGroups=[["0","1","2","3","4","5"],["0","i","ii","iii","iv","v"],["0","1","2","3","4","5"],["0","I","II","III","IV","V"],["0","1","2","3","4","5"]],r.prototype.labelsGroup=function(){return r._labelsGroups},inherit(s,o),s._labelsGroups=[["0","A","B","C","D","E"],["0","a","b","c","d","e"],["0","A","B","C","D","E"],["0","a","b","c","d","e"],["0","A","B","C","D","E"]],s.prototype.labelsGroup=function(){return s._labelsGroups},inherit(a,o),a._labelsGroups=[["0","W","X","Y","X","Z"],["0","w","x","y","x","z"],["0","W","X","Y","X","Z"],["0","w","x","y","x","z"],["0","W","X","Y","X","Z"]],a.prototype.labelsGroup=function(){return a._labelsGroups},inherit(l,n),l.version=3,l.prototype.pointsCount=function(){return 4},
l.prototype.migrateVersion=function(t,e,i){if(1===t){var n=$.extend({},this._timePoint[0]);this._timePoint.insert(n,0),this._points.length>0&&(n=$.extend({},this._points[0]),this._points.insert(n,0))}},inherit(c,l),c._labelsGroups=[["0","A","B","C"],["0","a","b","c"],["0","A","B","C"],["0","a","b","c"],["0","A","B","C"]],c.prototype.labelsGroup=function(){return c._labelsGroups},inherit(h,l),h._labelsGroups=[["0","W","X","Y"],["0","w","x","y"],["0","W","X","Y"],["0","w","x","y"],["0","W","X","Y"]],h.prototype.labelsGroup=function(){return h._labelsGroups},e.LineToolElliott=n,e.LineToolElliottImpulse=r,e.LineToolElliottTriangle=s,e.LineToolElliottTripleCombo=a,e.LineToolElliottCorrection=c,e.LineToolElliottDoubleCombo=h},,,function(t,e,i){"use strict";function n(t,e){t.width=e.w,t.height=e.h;var i=t.getContext("2d");i&&i.translate(.5,.5)}function o(t,e){t.width=0,n(t,e)}function r(t,e,i,n,o,r){t.save(),t.translate(-.5,-.5),t.fillStyle=r,t.fillRect(e,i,n,o),t.restore()}function s(t,e){var i=document.createElement("canvas");return t.append(i),n(i,e),i}function a(t,e){return"center"===t.textAlign?0:c.IS_RTL?"start"===t.textAlign||"right"===t.textAlign?e:0:"start"===t.textAlign||"left"===t.textAlign?0:e}var l,c,h;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"Size",function(){return h}),e.resizeCanvas=n,e.hardResizeCanvas=o,e.clearRect=r,e.addCanvasTo=s,e.calcTextHorizontalShift=a,l=i(14),i.n(l),c=i(36),h=function(){function t(t,e){this.w=t,this.h=e}return t.prototype.equals=function(t){return this.w===t.w&&this.h===t.h},t}()},function(t,e,i){"use strict";var n=i(187).TVLocalStorage;i(81),TradingView.FeatureToggle={force_prefix:"forcefeaturetoggle.",enableFeature:function(t){n.setItem(this.force_prefix+t,"true")},disableFeature:function(t){n.setItem(this.force_prefix+t,"false")},resetFeature:function(t){n.removeItem(this.force_prefix+t)}},TradingView.isFeatureEnabled=function(t){function e(e){var i=Math.random()<=t[e];return n.setItem(o+e,i),i}function i(t){return-1===["address-autocomplete-google-key","black_friday","black_friday_popup","black_friday_mainpage","coinbase_payments","ios_app_info","text_notes","multiple-sos","datawindow","broker_ALOR_dev"].indexOf(t)&&-1===t.indexOf("-maintenance")}var o="featuretoggle.";return function(r){var s,a;return!(!s&&"local"!==window.environment||!i(r))||(!t[r]||-1!==t[r])&&(!!("true"===n.getItem(TradingView.FeatureToggle.force_prefix+r)||window.is_authenticated&&"undefined"!=typeof user&&user.settings&&"true"===user.settings[TradingView.FeatureToggle.force_prefix+r])||!("false"===n.getItem(TradingView.FeatureToggle.force_prefix+r)||window.is_authenticated&&"undefined"!=typeof user&&user.settings&&"false"===user.settings[TradingView.FeatureToggle.force_prefix+r])&&(!!t[r]&&(1===t[r]||(a=n.getItem(o+r),void 0===a||null===a?e(r):"true"===a))))}}(window.featureToggleState||{}),e.FeatureToggle=TradingView.FeatureToggle,e.isFeatureEnabled=TradingView.isFeatureEnabled},function(t,e,i){"use strict";function n(t){return"line"===t.type}function o(t){return"shapes"===t.type}
function r(t){return"chars"===t.type}function s(t){return"arrows"===t.type}function a(t){return"dataoffset"===t.type}function l(t){return"ohlc_open"===t.type}function c(t){return"ohlc_high"===t.type}function h(t){return"ohlc_low"===t.type}function u(t){return"ohlc_close"===t.type}function d(t){return l(t)||c(t)||h(t)||u(t)}function p(t){return"colorer"===t.type}function _(t){return"bar_colorer"===t.type}function f(t){return"bg_colorer"===t.type}function m(t){return"text_colorer"===t.type}function g(t){return"ohlc_colorer"===t.type}function y(t){return"ohlc_bars"===t.plottype}function v(t){return"ohlc_candles"===t.plottype}var b,S;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"PlotType",function(){return b}),e.isLinePlot=n,e.isShapesPlot=o,e.isCharsPlot=r,e.isArrowsPlot=s,e.isDataOffsetPlot=a,e.isOhlcOpenPlot=l,e.isOhlcHighPlot=c,e.isOhlcLowPlot=h,e.isOhlcClosePlot=u,e.isOhlcPlot=d,e.isColorerPlot=p,e.isBarColorerPlot=_,e.isBgColorerPlot=f,e.isTextColorerPlot=m,e.isOhlcColorerPlot=g,e.isOhlcPlotStyleBars=y,e.isOhlcPlotStyleCandles=v,i.d(e,"PlotSymbolSize",function(){return S}),function(t){t[t.Line=0]="Line",t[t.Histogram=1]="Histogram",t[t.Cross=3]="Cross",t[t.Area=4]="Area",t[t.Columns=5]="Columns",t[t.Circles=6]="Circles",t[t.LineWithBreaks=7]="LineWithBreaks",t[t.AreaWithBreaks=8]="AreaWithBreaks",t[t.StepLine=9]="StepLine"}(b||(b={})),function(t){t.Auto="auto",t.Tiny="tiny",t.Small="small",t.Normal="normal",t.Large="large",t.Huge="huge"}(S||(S={}))},function(t,e,i){"use strict";i(571),function(t){function e(t,e,i){for(var n=0;n<a.length;n++)a[n]||(e=e.toLowerCase()),t.addEventListener(a[n]+e,i,!1)}function i(e){var i=e.data(h).complete;n(e),i&&t.isFunction(i)&&i()}function n(t){t.stop(!0),t.css("background-color",""),t.removeData(c),t.removeData(h)}function o(t){var e=t.data(c);e&&(!0!==e?(e--,e?(r(t),t.data(c,e)):i(t)):r(t))}function r(t){var e=t.css("background-color"),i=t.data(h),n=i.highlightColor||u,r=i.duration||d,s=i.easing||p;t.animate({"background-color":n},r,s).animate({"background-color":e},r,s,o.bind(t,t))}var s,a,l,c,h,u,d,p,_=!1,f=document.body||document.documentElement,m="animation",g="Webkit Moz O ms Khtml".split(" "),y="";if(void 0!==f.style.animationName&&(_=!0),!1===_)for(s=0;s<g.length;s++)if(void 0!==f.style[g[s]+"AnimationName"]){y=g[s],m=y+"Animation","-"+y.toLowerCase()+"-",_=!0;break}a=["webkit","moz","MS","o",""],l="flicker-",c=l+"enable",h=l+"options",u="#fbf8e9",d=400,p="swing",t.fn.highlight=function(i,o){switch(i){default:return i=void 0===i||i,this.each(function(){var n,s;_?(i=!0===i?"infinite":i,e(this,"AnimationEnd",function(){this.style[m]=""}),n=document.getElementsByTagName("html")[0].classList,n.contains("theme-dark")?this.style[m]="highlight-animation-theme-dark 0.4s ease-in-out "+i+" alternate":this.style[m]="highlight-animation 0.4s ease-in-out "+i+" alternate"):(s=t(this),s.data(c,i),s.data(h,t.extend({},o||{})),s.is(":animated")||r(s))});case!1:return this.each(function(){_?this.style[m]="":n(t(this))})}}}(jQuery)},,function(t,e,i){"use strict";var n
;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"TVXWindowEvents",function(){return n}),i(31),function(t){function e(t,e){s[t]||(s[t]=[]),s[t].push(e)}function i(t,e){if(s[t]){var i=s[t].indexOf(e);-1!==i&&(1===s[t].length?delete s[t]:s[t].splice(i,1))}}function n(t){return TVLocalStorage.getItem(r+t)}function o(t,e){void 0===e&&(e=(new Date).valueOf()),e!==TVLocalStorage.getItem(r+t)&&TVLocalStorage.setItem(r+t,e)}var r="tvxwevents.",s={};window.addEventListener("storage",function(t){if(null!==t.newValue){var e=t.key;e&&e.startsWith(r)&&(e=e.substr(r.length),s[e]&&s[e].forEach(function(e){e.call(t.newValue,t.newValue)}))}}),t.on=e,t.off=i,t.current=n,t.emit=o}(n||(n={}))},,function(t,e,i){"use strict";(function(t,n,o){function r(e,i){var r,a=e._undoModel._chartWidget,l=a.onWidget(),c=!1;c=l?a._options&&!a._options.hideIdeas:!!t.enabled("bars_marks")&&TVSettings.getBool("BarsMarksContainer.visibile",!1),i?i.merge({visible:c,frozen:!1}):i=new n({visible:c,frozen:!1}),r=this,i.visible.listeners().subscribe(null,function(e){l||a._containsData||!t.enabled("bars_marks")||TVSettings.setValue("BarsMarksContainer.visibile",!!e.value()),r._tooltip&&r._tooltip.removeAll()}),s.call(this,e,i),this.onNeedRepaint=new o,this._requests=[],this._marks={},this._loadedRange=null,this._getDataTimeout=null,this._collectedRange=null,this._model.mainSeries().onSymbolIntervalChanged().subscribe(this,this.clearMarks),this._model.mainSeries().onSymbolResolved().subscribe(this,this.clearMarks),this._model.mainSeries().onTickmarksRangeChanged().subscribe(this,this.getData),this._initialize(),this.pinnedTooltips={},this._tooltip=new h(this._createTooltip.bind(this),this)}var s=i(1).LineDataSource,a=i(12).isNumber,l=i(211).BarsMarksContainerPaneView,c=i(211).BarsMarksContainerRenderer,h=i(746).TooltipRenderer,u=i(5).getLogger("Chart.BarsMarksContainer");inherit(r,s),r.prototype._constructor="Child class must override this member",r.prototype._initialize=function(t){throw Error("Child class must override this member")},r.prototype.onClicked=function(){throw Error("Child class must override this member")},r.prototype._getData=function(t){throw Error("Child class must override this member")},r.prototype._createTooltip=function(){throw Error("Child class must override this member")},r.prototype.updateDotData=function(t,e){return e},r.prototype.updatePlateData=function(t,e){},r.prototype._plateViewData=function(t){return{}},r.prototype.pinTooltip=function(t,e){this.pinnedTooltips[t]=e},r.prototype.timeScale=function(){return this._model.timeScale()},r.prototype.getIntervalInTicks=function(){function t(t){if((t=parseInt(t))!=t)throw new TypeError("Unexpected interval");return 60*t}var e=t(1440),i=7*e,n=31*e,o=this._model.mainSeries().properties().interval.value();switch(o){case"M":return n;case"W":return i;case"D":return e;default:return t(o)}},r.prototype._maxDate=Math.round(new Date(2037,0,1).getTime()/1e3),r.prototype.getVisibleTickmarksRange=function(){var t,e;return this.timeScale().isEmpty()?{start:0,end:0
}:(t=this.timeScale().visibleBars(),t.lastBar()>this.timeScale().points().firstIndex()&&t.firstBar()<this.timeScale().points().lastIndex()?(e=t.lastBar()<this.timeScale().points().lastIndex()?this.timeScale().indexToTimePoint(t.lastBar()):this._maxDate,t={start:this.timeScale().indexToTimePoint(Math.max(t.firstBar(),this.timeScale().points().firstIndex())),end:e},{start:t.start?t.start:void 0,end:t.end?t.end:void 0}):{start:0,end:0})},r.prototype.getVisibleRangePlates=function(){var t=[],e=this.getVisibleTickmarksRange(),i=this.getIntervalInTicks();return $.each(this._marks,function(n,o){var r=o.tickmark;r>=e.start&&r<=e.end+i&&t.push(o)}),t},r.prototype.getPublishedPlates=function(){var t={},e=this;return is_authenticated?($.each(this.getVisibleRangePlates(),function(i,n){n.is_public&&(e.pinnedTooltips[n.id]||n.user__id===user.id)&&(t[n.id]=n)}),t):t},r.prototype._maxPlatesPerBar=10,r.prototype.filterDisplayedPlates=function(t){return t=t.reduce(function(t,e){var i=this._getIndex(e.tickmark);return t[i]=t[i]||[],t[i].push(e),t}.bind(this),{}),t=Object.keys(t).reduce(function(e,i){var n=t[i];return n=n.sort(function(t,e){return e.views_count-t.views_count}),n=n.slice(0,this._maxPlatesPerBar),e.concat(n)}.bind(this),[])},r.prototype._layout=function(t){switch(t){default:case 0:return"up";case 1:return"down";case 2:return"up";case 3:case 4:case 5:case 6:return"up"}},r.prototype._theme=function(t){switch(t){default:case 0:return"neutral";case 1:return"green";case 2:return"red";case 3:return"yellow";case 4:return"blue";case 5:return"green";case 6:return"red"}},r.prototype._offset=function(t,e){var i;switch(t){default:case"up":i=e[TradingView.HIGH_PLOT];break;case"down":i=e[TradingView.LOW_PLOT]}return this.priceScale().priceToCoordinate(i,this.ownerSource().firstValue())},r.prototype._getIndex=function(t){return this.timeScale().timePointToIndex(t)},r.prototype.getViewData=function(){return{barWidth:this.barWidth(),plates:this.getPlatesViewData(),tooltip:this._tooltip}},r.prototype.barWidth=function(){return this.timeScale().barSpacing()},r.prototype.getPlatesViewData=function(){var t,e,i,n,o,r;if(this._model.mainSeries().data().isEmpty())return[];t=this.filterDisplayedPlates(this.getVisibleRangePlates()),e=this,i={},n=this._model.lastHittestData(),t=t.map(function(t){var o,r,s,a,l,c,h=this._getIndex(t.tickmark),u=this._getBar(h);return null!==u&&(o=this._layout(t.direction),r=this._theme(t.direction),s=n&&n.id===t.id,a=this.timeScale().indexToCoordinate(h),l=this._offset(o,u),c=0,h in i||(i[h]={up:0,down:0}),c=i[h][o]++,TradingView.merge({id:t.id,x:a,y:l,order:c,direction:o,theme:r,hovered:s,pinned:!0===e.pinnedTooltips[t.id],user__id:t.user__id,label:t.label,labelFontColor:t.labelFontColor||"#444",minSize:t.minSize||5},this._plateViewData(t)))}.bind(this)),t=t.filter(function(t){return!!t}),o=t.filter(function(t){return!0===t.hovered});for(r=0;r<t.length;r++)null!=o[0]&&t[r].user__id===o[0].user__id&&(t[r].highlightByAuthor=!0);return t.sort(function(t,e){return t.hovered&&!e.hovered?1:0}),t},
r.prototype._getBar=function(t){return this._model.mainSeries().data().valueAt(t)},r.prototype.paneViews=function(t){var e=this;return this._properties.visible.value()?[new l(this,t,function(t){return new c(t.getViewData(),e)})]:[]},r.prototype.dataWindowView=function(){return null},r.prototype.priceAxisViews=function(){return null},r.prototype.statusView=function(){return null},r.prototype.updateAllViews=function(){},r.prototype.pointsCount=function(){return 0},r.prototype.properties=function(){return this._properties},r.prototype._rangeDifference=function(t){return t=$.extend({},t),this._loadedRange&&(t.start<this._loadedRange.start?t.end=this._loadedRange.start:t.end>this._loadedRange.end&&(t.start=this._loadedRange.end)),t},r.prototype._rangeUnion=function(t,e){return t=$.extend({},t),e&&(t.start=Math.min(e.start,t.start),t.end=Math.max(e.end,t.end)),t},r.prototype._pushGetDataStack=function(t){if(!a(t.start)||!a(t.end))return void u.logError("Wrong tickmark range");this._getDataTimeout&&clearTimeout(this._getDataTimeout),this._collectedRange=this._rangeUnion(t,this._collectedRange),this._getDataTimeout=setTimeout(function(){this._getData(this._collectedRange),this._getDataTimeout=this._collectedRange=null}.bind(this),300)},r.prototype.roundRange=function(t){return{start:Math.round(t.start),end:Math.round(t.end)}},r.prototype.refreshData=function(){this.getData(this._lastRange)},r.prototype.getData=function(t){if(!a(t.start)||!a(t.end))return void u.logError("Wrong range");this._lastRange=t;var t=$.extend({},t);t.end=this._maxDate,this._pushGetDataStack(t)},r.prototype._abortAllRequests=function(){this._requests.forEach(function(t){t.abort()}),this._requests=[],this._getDataTimeout&&clearTimeout(this._getDataTimeout),this._getDataTimeout=this._collectedRange=null},r.prototype.clearMarks=function(){this._abortAllRequests(),this._marks={},this._loadedRange=null},e.BarsMarksContainer=r}).call(e,i(4),i(16),i(8))},,,,,,,,,,function(t,e,i){"use strict";function n(t,e){var i,n;return void 0===t&&(t=[]),void 0===e&&(e=[]),i=document.createElement("div"),n=document.createElement("div"),i.appendChild(n),i.classList.add(o.container),n.classList.add(o.inner),t.forEach(function(t){i.classList.add(o[t])}),e.forEach(function(t){i.classList.add(o[t])}),i}var o;e.a=n,o=i(548),i.n(o)},function(t,e,i){"use strict";(function(e){function n(t){this._data=t,this._textWidthCache=new l}function o(t,e,i,n,o){this._model=t,this._source=e,this._plotIndex=i,this._getterName=n||"symbol",this._propertyName=o,this._cache={},this._invalidated=!0,this._rendererData={}}var r=i(29),s=r.parseRgb,a=r.rgbToBlackWhiteString,l=i(134),c=i(66).CompositeRenderer,h=i(135).makeFont,u=i(35);n.prototype.hitTest=function(t){return null},n.prototype.draw=function(t){var e,i,n,o,r,s,a,l,c,h;this._data.visible&&(this._textWidthCache.font!==this._data.font&&(this._textWidthCache.reset(),this._textWidthCache.font=this._data.font),t.font=this._data.font,e=this._data.fontSize,i=Math.floor(e/4.5),n=Math.ceil(e/4.5),o=Math.ceil(e/3),
r=Math.ceil(this._textWidthCache.measureText(t,this._data.text)),s=Math.round(e/10),a=e+i+n,l=r+2*o,c=this._data.x-.5,"right"===this._data.align&&(c-=l),h=this._data.y-Math.floor(e/2)-i-.5,t.fillStyle=u.resetTransparency(this._data.backColor),t.fillRect(c,h,l,a),t.fillStyle=this._data.color,t.textAlign="left",t.fillText(this._data.text,c+o,h+i+e-s))},o.prototype.isPropertyEnabled=function(){return this._model.properties().scalesProperties[this._propertyName].value()},o.prototype.update=function(){this._invalidated=!0},o.prototype.updateImpl=function(){var t,i,n,o,r,l,u,d,p=this._rendererData;if(p.visible=!1,p.text="",this.isPropertyEnabled()&&this._source.properties().visible.value()&&(t=this._source.lastValueData(this._plotIndex,e.enabled("price_scale_always_last_bar_value")),!t.noData)){if(i=this._model.paneForSource(this._source),n="right",i.leftPriceScale()===this._source.priceScale()&&(n="left"),o=this._model.properties(),r=!i.leftPriceScale().mainSource()||!i.rightPriceScale().mainSource(),r&&o.scalesProperties.showLeftScale.value()&&!o.scalesProperties.showRightScale.value()&&(n="left"),!r){if("left"===n&&!o.scalesProperties.showLeftScale.value())return new c;if("right"===n&&!o.scalesProperties.showRightScale.value())return new c}l=t.coordinate,u=this._source.m_data.m_series&&this._source.m_data.m_series.properties().style.value()===TradingView.Series.STYLE_HEIKEN_ASHI,this._source.lastPriceLabelFixedCoordinate&&!u&&"showSymbolLabels"===!this._propertyName&&(l=this._source.lastPriceLabelFixedCoordinate(this._plotIndex)||l),t.color!==p.backColor&&(p.backColor=this._source.priceLineColor(t.color),d=a(s(p.backColor),160),p.color="black"===d?"white":"black"),p.text=this._source[this._getterName](this._plotIndex),p.visible=""!==p.text,p.align=n,p.x="right"===n?this._model.timeScale().width():0,p.y=l,p.fontSize=this._model.properties().scalesProperties.fontSize.value(),p.font=h(p.fontSize,"Arial","")}},o.prototype.renderer=function(){return this._invalidated&&(this.updateImpl(),this._invalidated=!1),this._renderer||(this._renderer=new n(this._rendererData)),this._renderer},t.exports=o}).call(e,i(4))},function(t,e,i){"use strict";function n(){var t,e,i,n;this._registeredSources={},this._sourcesToRow={},this._rowsToSources={},this._currentSymbol="",this._actualCapacity=0,this._actualWidth=0,this._canvas=$("<canvas>"),this._cache=this._canvas.get(0).getContext("2d"),this._currentWidth=400,this._canvas.prop("width",this._currentWidth).prop("height",1).css("position","absolute").css("top",0).css("z-index",1e3).css("left",0),this._ctx=this._canvas.get(0).getContext("2d"),this._ctx.font=u.fontSize+"px"+u.font,t=u.fontSize,e=u.lineSpacing,i=t+e,n=3,this._padding=8,this._rowHeight=i*n-e+2*this._padding+2}function o(t,e){this._constructor="LineToolTrendLine";var o=e||new a("linetooltrendline");s.call(this,t,o),t._trendLineStatsCache||(t._trendLineStatsCache=new n),i.e(0).then(function(t){var e=i(896).TrendLinePaneView;this._setPaneViews([new e(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}
var r=i(7).Point,s=i(1).LineDataSource,a=i(3).DefaultProperty,l=i(2).propertyPages,c=i(5).getLogger("Chart.LineToolTrendLine"),h=i(420).TrendLineStatsRenderer,u=i(386).LabelSettings;n.prototype.canvas=function(){return this._canvas},n.prototype.topByRow=function(t){return t*this._rowHeight},n.prototype.rowHeight=function(t){return this._rowHeight},n.prototype.rowWidth=function(t){var e=this._rowsToSources[t];return this._sourcesToRow[e].width},n.prototype.currentWidth=function(){return this._currentWidth},n.prototype._findEmptyRow=function(t){for(var e=0;this._rowsToSources[e];)e++;return this._rowsToSources[e]=t,e>=this._actualCapacity&&(this._actualCapacity++,TradingView.resizeCanvas(this._canvas,this._currentWidth,this._rowHeight*this._actualCapacity),this._ctx=this._canvas.get(0).getContext("2d"),c.logDebug("TrendLineCache. Expanging cache to "+this._actualCapacity+" items")),e},n.prototype._effectiveState=function(t){var e,i={};return i.p1=$.extend({},t.points()[0]),i.p2=$.extend({},t.points()[1]),e=t.properties(),i.showBars=e.showBarsRange.value(),i.showTimeRange=e.showDateTimeRange.value(),i.showDistance=e.showDistance.value(),i.showPriceRange=e.showPriceRange.value(),i.showAngle=e.showAngle.value(),i.color=e.textcolor.value(),i.showAngle&&(i.priceRange=t.priceScale().priceRange().state(),i.barSpacing=t._model.timeScale().barSpacing()),i},n.prototype._effectiveStatesEquals=function(t,e){var i=function(t,e){return!(!t&&!e)&&(!(!t||e)||(!(t||!e)||(t.index!==e.index||t.price!==e.price)))};if(t&&!e)return!1;if(!t&&e)return!1;if(i(t.p1,e.p1))return!1;if(i(t.p2,e.p2))return!1;if(t.color!==e.color)return!1;if(t.showBars!==e.showBars)return!1;if(t.showTimeRange!==e.showTimeRange)return!1;if(t.showDistance!==e.showDistance)return!1;if(t.showPriceRange!==e.showPriceRange)return!1;if(t.showAngle!==e.showAngle)return!1;if(t.showAngle){if(t.priceRange.min!==e.priceRange.min)return!1;if(t.priceRange.max!==e.priceRange.max)return!1;if(t.barSpacing!==e.barSpacing)return!1}return!0},n.prototype.removeSource=function(t){if(this._sourcesToRow[t]){var e=this._sourcesToRow[t].row;this._ctx.save(),this._ctx.clearRect(0,this.topByRow(e),this._currentWidth,this.rowHeight(e)),this._ctx.restore(),delete this._sourcesToRow[t],delete this._rowsToSources[e]}},n.prototype._repaintSource=function(t,e,i){var n,o;this._ctx.save(),this._ctx.translate(0,this.topByRow(e)+.5),i.points[0]=new r(0,0),i.offsetX=0,i.offsetY=0,delete i.horzAlign,delete i.vertAlign,this._ctx.clearRect(0,0,this._currentWidth,this.rowHeight(e)),n=new h(i,{}),o=n.draw(this._ctx),this._sourcesToRow[t].width=o.width,this._ctx.restore()},n.prototype.updateSource=function(t,e){var i,n,o,r,s,a=t.properties().symbol.value();return this._currentSymbol!==a&&(c.logDebug("TrendLineCache. Clearing canvas because of changing symbol from "+this._currentSymbol+" to "+a),this._currentSymbol=a,this._sourcesToRow={},this._rowsToSources={}),i=t.id(),this._sourcesToRow[i]||(n=this._findEmptyRow(i),this._sourcesToRow[i]={effectiveState:null,row:n}),
o=this._sourcesToRow[t.id()].effectiveState,r=this._effectiveState(t),this._effectiveStatesEquals(o,r)||(n=this._sourcesToRow[t.id()],s=e(),this._repaintSource(i,n.row,s),this._sourcesToRow[i].effectiveState=r),this._sourcesToRow[i]},inherit(o,s),o.prototype.stop=function(){s.prototype.stop.call(this),this._model._trendLineStatsCache.removeSource(this.id())},o.prototype.pointsCount=function(){return 2},o.prototype.title=function(){return"Trend Line"},o.prototype.name=function(){return"Trend Line"},o.prototype.canHasAlert=function(){return!0},o.prototype._getAlertPlots=function(){return[this._linePointsToAlertPlot(this._points,null,this.properties().extendLeft.value(),this.properties().extendRight.value())]},o.prototype.getStylesPropertyPage=function(){return l.LineToolTrendLineStylesPropertyPage},e.LineToolTrendLine=o},function(t,e,i){"use strict";function n(t,e){var n=e||new h("linetoolarrowmark");n.hasChild("text")||n.addChild("text",new c("")),n.addExclusion("text"),l.call(this,t,n),i.e(0).then(function(e){var n=i(421).TextPaneView,o=i(422).MarkPaneView,r=[new o(this,t,this.image,this.width,this.height,this.offsetX,this.offsetY)],s=this._createTextPaneView(n);null!==s&&r.push(s),this._setPaneViews(r)}.bind(this).bind(null,i)).catch(i.oe)}function o(t,e){this._constructor="LineToolArrowMarkLeft",n.call(this,t,e)}function r(t,e){this._constructor="LineToolArrowMarkUp",n.call(this,t,e)}function s(t,e){this._constructor="LineToolArrowMarkRight",n.call(this,t,e)}function a(t,e){this._constructor="LineToolArrowMarkDown",n.call(this,t,e)}var l=i(1).LineDataSource,c=i(16),h=i(3).DefaultProperty,u=i(2).propertyPages;inherit(n,l),n.prototype.width=21,n.prototype.height=21,n.prototype.offsetX=0,n.prototype.offsetY=0,n.prototype.paneViews=function(t){var e=l.prototype.paneViews.call(this,t);return null!==e&&this._textPaneView&&e.push(this._textPaneView),e},n.prototype.pointsCount=function(){return 1},n.prototype.title=function(){return"Arrow Mark"},n.prototype.name=function(){return"Arrow Mark"},n.prototype.getStylesPropertyPage=function(){return u.LineToolArrowMarkStylesPropertyPage},n.prototype._createTextPaneView=function(t){return null},inherit(o,n),o.prototype.image=new Image,o.prototype.image.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAVCAYAAACpF6WWAAAB50lEQVR4AWMgETAKKAgIAGkQ5mCgAmCWdtTWV4yxvgFkWwKxOKUGssr5Gccrx9t+Vk6w+w/kxwKxIrmGMTKIivIohFvONKsI+e/cl/ofamgGECuTYyCTqJ2mqlK01Vnr+uj/HjNy/1v1J8AMzSTHUBYZP6MgpTjb97bNsf9dpmf9N++J/W/UEQEztAiIbUEGo2EpIObE8C4oVuVDzLuBmv869aT8t5+c+t+0K/q/YXs4GGsWeIAMRscwy/yhBiO8K2ijJKcYZXXYuj7qv/u0nP/W/Yn/jTsjQYYRwliDhUXKy8BVKdbmuW1T7H+3Gdn/LXrjQN4FaSDLUBa5MItyoOAvp67k/45T0pC9S56hSrHWhY4tif9D5pUDXZjz36w7Blkx+S5VDLNoBUWMY3fKfwdExMAw+WEq7Wvkoxhn+waUhFwRSYhcQxGxL26jpqQYbX3CBpjY3aeDYj+BothHpFNxcW75cIvJpmXB/516Uv/bT0r5b9IVRUY6xQSssr6GkcAc9dGuNe6/y7RMMnMUJmCWcNTSBgbHZeuG6P+eM/P+W/VRlPcRwSGoJMgvH265yKIq/L9LfzqKoZSXp0Em6cDy9BvU0Dhyy1PM4PAwMFWKs7kFZFsBsQQDlQAjr4a0MJAWxFdHAQAcI3sGHsO1dgAAAABJRU5ErkJggg==",o.prototype.offsetX=1,o.prototype.offsetY=-10,o.prototype.title=function(){
return"Arrow Mark Left"},o.prototype.name=function(){return"Arrow Mark Left"},o.prototype._createTextPaneView=function(t){var e=new t(this,this._model,22,-3,"middle","left");return e.disableSelection(),e},inherit(r,n),r.prototype.image=new Image,r.prototype.image.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAVCAYAAACpF6WWAAACBklEQVR4AWMgErAoxVoXgmgGKgEWxTCLVseWxP9yYRbl1DCYSdrXyEc5we5vyLzy/0D6l5SXgStInFwDGcVt1JQU42zfOHan/HebkfPfqSv5v1KszXNBGyU5kDzpRoqLcytGW5+wbY797zA59b9Zd8x/xylp/22bYv8rRlkdBqrgINVIVvlwi8k29dH/Xadn/Tftiv5v2B4Opt1mZP+3ro/6Lx9i3k1K+DLL+hpGmpYF/3efnvPfvCcWZCAcW/TG/XeflvMfFM4yfkZBxIQvo4SjlrZSnO1Hp57U/9b9Cf+NOiKQDQXxgeKJ/516Uv4D1b0XtdNUxRu+gkqC/MBwvGzXGvffflLKf+POSISBCAwWtweGMyi8laKtzjKIivLgCUfLRdYN0f9dpmX+N+mKghiCieHh6wIMb2tguCuEW84E6ccIR7kgk3SLqvD/njPzYOFICIPVeczI/W9WEfJfzs84HmQOIhw9DEyV422/ufSn/7fqg4cjIQxWZwUMd+e+1P9A/Z+lHbX1weHLqyEtrBRncwsYm/+RsWaBBz4DwfLoehRjrG8IKAgIgOMHiK2AOA6IM6G4CKgIr6EgeZA6qPoMII4FYksgFmCA5gwJIFYEYmUotiXSUFuYHqh+cXw5TZlIQ5WxaR4mhuLBZBkqBcT+oJjFg/3B6kgAnFANyniwFEQdJgAAOuN7Bp7MBuYAAAAASUVORK5CYII=",r.prototype.offsetX=-9,r.prototype.offsetY=0,r.prototype.title=function(){return"Arrow Mark Up"},r.prototype.name=function(){return"Arrow Mark Up"},r.prototype._createTextPaneView=function(t){var e=new t(this,this._model,0,18,"top","center");return e.disableSelection(),e},inherit(s,n),s.prototype.image=new Image,s.prototype.image.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAVCAYAAACpF6WWAAAB60lEQVR4AWPAAziAWJBXQ1oYSDMyUAlIALGVUpzNLQkPA1Mgm5kahioCcZxygt1/5Xjbb3JBJulAPiulhioDcSbIUJf+9P8WVeH/5cMtFwkqCfKDgoNiQ636Ev57zsz7b90Q/V8x2vqyhKOWNqHg4ARiKZAhaNgWiItAhhp1RPw374n97zIt879da9x/pTjbj7K+hpE4gwNqoD9IMzasWeDx37A9HIxNuqL+209K+e/Uk/rftCwYGBwWkxnExbkRwYHpTZBGgti4M/K/dX/Cf/fpOf9t6sHBcULcRk0JaAYT6YYiMDw4XKdn/bdtjv2vGGf7RtrXyAdoDguZhiKwaVf0f4fJqf8du1NAQfVXMcyiFWQwmYYisFl3zH+3GTn/Q+aV/3dsSfyvFGtdSLFLHaek/XfqSga59JdcmEU5yKVkh6lFbxzQhdn/bZtiga6zeS7lZeAKMpCC2E/87z4t5791fdR/xSirw4I2SnKg2CcxnSK8aw+MGKceSMTIh5h3Q0szRvJzFCQJgXLUexk/oyCQd8nP+8DE7jEjF+jd6P9K0VZnRe00VWHeJcfQDJChzn2p/80qQv4rhFvOZBAV5QF5l5LyNBZann6W8zOOp0Z5Kg7Eloox1jekHbX1qVLyQ2NVQEBBQIBU7wIAOFZ7BmG7RzYAAAAASUVORK5CYII=",s.prototype.offsetX=-19,s.prototype.offsetY=-10,s.prototype.title=function(){return"Arrow Mark Right"},s.prototype.name=function(){return"Arrow Mark Right"},s.prototype._createTextPaneView=function(t){var e=new t(this,this._model,-22,-3,"middle","right",!0);return e.disableSelection(),e},inherit(a,n),a.prototype.image=new Image,
a.prototype.image.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAVCAYAAACpF6WWAAAB/UlEQVR4AWPAATj3Wij8J4RB6hhIAFIgTS9a8nBhmKFSpBiqDNJ0P80PF4YZqkyyobfD7HDh4WJolaKY+G5zhXvoMXva2xifoWB5dD07zeTvFKvxioDMFY6RFUgEGvzzQVk8OGafVib9v5fkhc9QkDxIHVj9vaKY/7vM5b+HS/JFA80TAhnKA8TGZSoiS057GYFiFqzhTpQTPkNB8iB1YPUnPQz+5ykKzQGaYwjE3CBDmUCuBWKHabqSZ0656oI0EY1B6idoSx4F6reDupIJFrTMQCwtxsYcvNZY5uU5T0OiDDwLdOFKI9knvMzM/kD9kmBz0AAbEKs6iHAX7zSX/3nF3xyvgZd8Tf9vM5P/ZiXAmQdNBazYEgIjEHOBwiVHXmjWcSctnAbeDLH5f8xR83+SjNBEoHo9sD4owGWwIBDb9mtJHMIVviDxDg3x3UB11kDMD9ZHADCDwkeAmdlvhZHMI2C4oRh4xl3//1IDmbvszAxeQHXiUPWEATR8lE0EubJB4QYMP7CBF31M/m82k/usy8uRCpRXAKsjEXCCwiteVqD/qIPG/+tBVv/3WCj8C5Pi7wCKawMxBwMZgBEaXlbtGuI7T7ro/G9QFdsI5JsDMR/+cCQcvuLsLAzubRoSa4FsJyAWBSdwsgEifKVBXoYmcBYGagCoQZzEGggAoyq6zKXuV5gAAAAASUVORK5CYII=",a.prototype.offsetX=-9,a.prototype.offsetY=-18,a.prototype.title=function(){return"Arrow Mark Down"},a.prototype.name=function(){return"Arrow Mark Down"},a.prototype._createTextPaneView=function(t){var e=new t(this,this._model,0,-23,"bottom","center");return e.disableSelection(),e},s.prototype.version=o.prototype.version=a.prototype.version=r.prototype.version=2,e.LineToolArrowMark=n,e.LineToolArrowMarkLeft=o,e.LineToolArrowMarkRight=s,e.LineToolArrowMarkUp=r,e.LineToolArrowMarkDown=a},,function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"LineEnd",function(){return n});var n;!function(t){t[t.Normal=0]="Normal",t[t.Arrow=1]="Arrow",t[t.Circle=2]="Circle"}(n||(n={}))},,function(t,e,i){"use strict";var n,o,r,s,a,l,c,h;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"CONNECTSTATUSES",function(){return n}),i.d(e,"ORDERTYPE",function(){return o}),i.d(e,"SIDE",function(){return r}),i.d(e,"ORDERSTATUS",function(){return s}),i.d(e,"ORDERSTATUSFILTER",function(){return a}),i.d(e,"PARENTTYPE",function(){return l}),i.d(e,"TICKETFOCUS",function(){return c}),i.d(e,"NOTIFICATION",function(){return h}),function(t){t[t.CONNECTED=1]="CONNECTED",t[t.CONNECTING=2]="CONNECTING",t[t.DISCONNECTED=3]="DISCONNECTED",t[t.ERROR=4]="ERROR"}(n||(n={})),function(t){t[t.LIMIT=1]="LIMIT",t[t.MARKET=2]="MARKET",t[t.STOP=3]="STOP",t[t.STOPLIMIT=4]="STOPLIMIT"}(o||(o={})),function(t){t[t.BUY=1]="BUY",t[t.SELL=-1]="SELL"}(r||(r={})),function(t){t[t.CANCELED=1]="CANCELED",t[t.FILLED=2]="FILLED",t[t.INACTIVE=3]="INACTIVE",t[t.PLACING=4]="PLACING",t[t.REJECTED=5]="REJECTED",t[t.WORKING=6]="WORKING"}(s||(s={})),function(t){t[t.ALL=0]="ALL",t[t.CANCELED=1]="CANCELED",t[t.FILLED=2]="FILLED",t[t.INACTIVE=3]="INACTIVE",t[t.REJECTED=5]="REJECTED",t[t.WORKING=6]="WORKING"}(a||(a={})),function(t){t[t.ORDER=1]="ORDER",t[t.POSITION=2]="POSITION"}(l||(l={})),function(t){t[t.STOPLOSS=1]="STOPLOSS",t[t.STOPPRICE=2]="STOPPRICE",t[t.TAKEPROFIT=3]="TAKEPROFIT"}(c||(c={})),function(t){t[t.ERROR=0]="ERROR",t[t.SUCCESS=1]="SUCCESS"}(h||(h={}))},function(t,e,i){"use strict";function n(){return new Promise(function(t){i.e(24).then(function(e){t(i(395))}.bind(null,i)).catch(i.oe)})}function o(t,e){return n().then(function(i){return i.bindToInput(t,e)
})}function r(t){return/[\d,]/.test(t)}function s(t){Object(f.setLastUsedResolution)(t),m.linking.interval.setValue(t)}function a(t){if(!Object(d.globalKeypressMatches)(t))return!1;t.preventDefault();var e=String.fromCharCode(t.charCode);return r(e)&&p.enabled("show_interval_dialog_on_key_press")?Object(_.showChangeIntervalDialog)({callback:s,ownerDocument:t.target&&t.target.ownerDocument},e):p.enabled("symbol_search_hot_key")&&n().then(function(i){i.showDialog({initialValue:e,callback:function(t,e){m.linking.symbol.setValue(t),e&&s(e)},ownerDocument:t.target&&t.target.ownerDocument})}),!0}function l(){u.pushBackListener("symbolEdit",a)}function c(t){return n().then(function(e){return e.showDialog(t)})}function h(t){return n().then(function(e){return e.setSearchRequestDelay(t)})}var u,d,p,_,f,m;Object.defineProperty(e,"__esModule",{value:!0}),e.bindToInput=o,e.activateKeyPressHandler=l,e.showDialog=c,e.setSearchRequestDelay=h,u=i(235),d=i(366),p=i(4),i.n(p),_=i(298),f=i(69),m=i(56)},function(t,e,i){"use strict";function n(t,e,i){return{title:t,count:e,sizer:function(t,n,o,r,s){var a,l,c,h,u,d,p;return void 0===s&&(s=e),a=Math.min(s,i),l=Math.ceil(s/a),c=Math.floor(t/i),h=t%i,(h+1)*l>s&&(l=s%l),u=Math.round((n.width-r-r-o*(l-1))/l),d=Math.round((n.height-r-r-o*(a-1))/a),p={top:r+h*(d+o),left:r+c*(u+o),width:u,height:d},c>=l-1&&(p.width=n.width-r-p.left),h>=a-1&&(p.height=n.height-r-p.top),p}}}function o(t){return"s"===t}function r(t){return!o(t)}var s,a,l,c;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"layouts",function(){return c}),e.isSingleLayout=o,e.isMultipleLayout=r,s=i(0),a={s:{title:"1 chart",count:1,sizer:function(t,e,i,n){return{width:e.width-n-n,height:e.height-n-n,top:n,left:n}}}},l={"3s":{title:"3-up Stacked",count:3,sizer:function(t,e,i,n,o){var r,s,a,l,h;if(void 0===o&&(o=3),o<3)return c["2h"].sizer(t,e,i,n,o);switch(r=e.width-n-n,s=e.height-n-n,a=s-i>>1,l=r-i>>1,t){case 0:return{width:l,height:s,left:n,top:n};case 1:return{width:l,height:a,left:l+i+n,top:n};case 2:return h=i+a,{width:l,height:s-h,left:l+i+n,top:h+n}}throw Error("incorrect index")}},"2h":n("2-up Horizontal",2,1),"2-1":n("2 at top and 1 at bottom",3,2),"2v":n("2-up Vertical",2,2),"3h":n("3-up Horizontal",3,1),"3v":n("3-up Vertical",3,3),4:n("4-up",4,2),6:n("6-up",6,2),8:n("8-up",8,2)},c=s.a({},a,l)},function(t,e,i){"use strict";var n,o,r,s,a;Object.defineProperty(e,"__esModule",{value:!0}),n=i(563),Object.defineProperty(e,"AutocompleteField",{enumerable:!0,get:function(){return n.AutocompleteField}}),o=i(567),Object.defineProperty(e,"CheckboxField",{enumerable:!0,get:function(){return o.CheckboxField}}),r=i(301),Object.defineProperty(e,"InputField",{enumerable:!0,get:function(){return r.InputField}}),s=i(568),Object.defineProperty(e,"InputFieldRegExp",{enumerable:!0,get:function(){return s.InputFieldRegExp}}),a=i(300),Object.defineProperty(e,"SaveRenameDialog",{enumerable:!0,get:function(){return a.SaveRenameDialog}})},function(t,e,i){"use strict";function n(t){return"."+t.replace(/\+/g,"")}function o(t,e,i,o){var r,s
;void 0===i&&(i="keydown"),r=n(t),s=o?$(o):u,s.unbind(i+r).bind(i+r,t,function(t){$(t.target).is("input[type=password]")||d||e.apply(null,Array.prototype.slice.call(arguments))}),h[t]=e}function r(t,e,i){void 0===e&&(e="keydown"),(i?$(i):u).unbind(e+n(t)),delete h[t]}function s(){return d?null:d=Object(c.randomHashN)(4)}function a(t){if(t!==d)throw Error("Lock id is outdated");d=null}var l,c,h,u,d;Object.defineProperty(e,"__esModule",{value:!0}),e.bind=o,e.unbind=r,e.disable=s,e.enable=a,l=i(14),i.n(l),c=i(22),h={},u=$(document),d=null},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"debounce",function(){return n});var n=function(t,e){function i(){t.apply(o,n)}var n,o,r=0;return function(){o=this,n=arguments,clearTimeout(r),r=setTimeout(i,e)}}},function(t,e,i){"use strict";var n,o,r;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"HorizontalLineRenderer",function(){return r}),n=i(10),o=i(49),i.n(o),r=function(){function t(){this._data=null,this._hitTest=new n.HitTestResult(n.HitTestResult.REGULAR)}return t.prototype.setData=function(t){this._data=t},t.prototype.setHitTest=function(t){this._hitTest=t},t.prototype.draw=function(t){var e,i;null!==this._data&&0!==this._data.points.length&&!1!==this._data.visible&&((e=this._data.points[0].y)<0||e>this._data.height||(i=this._data.width,t.lineCap="square",t.strokeStyle=this._data.color,t.lineWidth=this._data.linewidth,void 0!==this._data.linestyle&&Object(o.setLineStyle)(t,this._data.linestyle),Object(o.drawLine)(t,0,e,i,e)))},t.prototype.hitTest=function(t){return null===this._data||!1===this._data.visible?null:0===this._data.points.length?null:Math.abs(t.y-this._data.points[0].y)<=5?this._hitTest:null},t}()},function(t,e,i){"use strict";function n(t,e){return window.fetch(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.fetch=n},function(t,e,i){"use strict";function n(t,e){var i=t[0].getBoundingClientRect();e.localX=e.clientX-i.left,e.localY=e.clientY-i.top}var o,r,s,a,l,c,h;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"MouseEventHandler",function(){return h}),o=i(14),i.n(o),r=i(146),i.n(r),s=i(247),a=i(6),i.n(a),l=2,c=!1,h=function(){function t(t,e,i,n){this._clickCount=0,this._clickTimeoutId=null,this._touchContextMenuTimeout=null,this._lastTouchPosition={x:0,y:0},this._mouseMoveStartPosition=null,this._moveExceededManhattanDistance=!1,this._cancelClick=!1,this._hammerManager=null,this._isDestroyed=!1,this._$target=t,this._handler=e,this._originalPreventDefault=i,this._preventDefault=!n&&i,this._verticalTouchScroll=n,this._init()}return t.prototype.destroy=function(){null!==this._hammerManager&&(this._hammerManager.destroy(),this._hammerManager=null),this._isDestroyed=!0},t.prototype._mouseEnterHandler=function(t){this._$target.off("mousemove.chartgui"),this._$target.on("mousemove.chartgui",this._mouseMoveHandler.bind(this)),Modernizr.touch&&this._mouseMoveHandler(t),this._processEvent(t,this._handler.mouseEnterEvent),this._preventDefaultIfNeeded(t)},t.prototype._resetClickTimeout=function(){
null!==this._clickTimeoutId&&clearTimeout(this._clickTimeoutId),this._clickCount=0,this._clickTimeoutId=null},t.prototype._mouseMoveHandler=function(t){c&&!Modernizr.touch||(this._processEvent(t,this._handler.mouseMoveEvent),this._preventDefaultIfNeeded(t))},t.prototype._mouseMoveWithDownHandler=function(t){var e,i,n,o,r,s,c;void 0===t.button&&(t.button=0),e=!1,this._fixMouseTouchEvent(t,t.originalEvent),i=Modernizr.touch||t.originalEvent.touches,i&&(this._verticalTouchScroll&&(n=Math.abs(.5*(t.pageX-this._lastTouchPosition.x)),o=Math.abs(t.pageY-this._lastTouchPosition.y),n<=o?(e=!0,this._preventDefault=!1):this._preventDefault=this._originalPreventDefault),this._lastTouchPosition.x=t.pageX,this._lastTouchPosition.y=t.pageY),r=Object(a.ensure)(this._mouseMoveStartPosition),s=Math.abs(r.x-t.pageX),c=Math.abs(r.y-t.pageY),this._moveExceededManhattanDistance=this._moveExceededManhattanDistance||s+c>5,this._moveExceededManhattanDistance?(this._cancelClick=!0,i&&this._clearContextMenuTimeout()):i&&(e=!0),t.button===l||e||this._processEvent(t,this._handler.pressedMouseMoveEvent),this._preventDefaultIfNeeded(t)},t.prototype._mouseUpHandler=function(t){void 0===t.button&&(t.button=0),this._fixMouseTouchEvent(t,t.originalEvent),Modernizr.touch&&this._clearContextMenuTimeout(),this._mouseMoveStartPosition=null,c=!1;var e=t.target.ownerDocument.documentElement;$(e).off("mousemove.chartgui"),$(e).off("mouseup.chartgui"),Modernizr.touch||t.originalEvent.touches?($(e).off("touchmove.chartgui"),$(e).off("touchend.chartgui"),this._mouseLeaveHandler(t)):($(e).off("mousemove.chartgui touchmove.chartgui"),$(e).off("mouseup.chartgui touchend.chartgui")),t.button!==l&&(this._processEvent(t,this._handler.mouseUpEvent),++this._clickCount,this._clickTimeoutId&&this._clickCount>1?(this._processEvent(t,this._handler.mouseDoubleClickEvent),this._resetClickTimeout()):this._cancelClick||this._processEvent(t,this._handler.mouseClickEvent)),this._preventDefaultIfNeeded(t),Modernizr.touch&&this._mouseLeaveHandler(t)},t.prototype._clearContextMenuTimeout=function(){null!==this._touchContextMenuTimeout&&(clearTimeout(this._touchContextMenuTimeout),this._touchContextMenuTimeout=null)},t.prototype._mouseDownHandler=function(t){void 0===t.button&&(t.button=0),this._cancelClick=!1,this._moveExceededManhattanDistance=!1,this._fixMouseTouchEvent(t,t.originalEvent),Modernizr.touch&&(this._lastTouchPosition.x=t.pageX,this._lastTouchPosition.y=t.pageY,this._mouseEnterHandler(t)),this._mouseMoveStartPosition={x:t.pageX,y:t.pageY};var e=t.target.ownerDocument.documentElement;if(Modernizr.touch?($(e).off("touchmove.chartgui"),$(e).off("touchend.chartgui"),$(e).on("touchmove.chartgui",this._mouseMoveWithDownHandler.bind(this)),$(e).on("touchend.chartgui",this._mouseUpHandler.bind(this)),this._clearContextMenuTimeout(),this._touchContextMenuTimeout=setTimeout(this._contextMenuHandler.bind(this,t),500)):($(e).off("mousemove.chartgui touchmove.chartgui"),$(e).off("mouseup.chartgui touchend.chartgui"),
$(e).on("mousemove.chartgui touchmove.chartgui",this._mouseMoveWithDownHandler.bind(this)),$(e).on("mouseup.chartgui touchend.chartgui",this._mouseUpHandler.bind(this))),c=!0,t.button!==l&&(this._processEvent(t,this._handler.mouseDownEvent),this._clickTimeoutId||(this._clickCount=0,this._clickTimeoutId=setTimeout(this._resetClickTimeout.bind(this),500))),this._preventDefaultIfNeeded(t),this._preventDefault)try{window.focus()}catch(t){}},t.prototype._init=function(){var t=this;this._$target.mouseenter(this._mouseEnterHandler.bind(this)),this._$target.on("touchcancel",this._clearContextMenuTimeout.bind(this)),this._$target.on("touchstartoutside mousedownoutside",function(e){t._handler.mouseDownOutsideEvent&&t._handler.mouseDownOutsideEvent(e,t._$target)}),this._$target.mouseleave(this._mouseLeaveHandler.bind(this)),this._$target.contextMenu&&this._$target.contextMenu(this._contextMenuHandler.bind(this)),Modernizr.touch?(this._$target.on("touchstart.chartgui",this._mouseDownHandler.bind(this)),this._initGestureEvents()):this._$target.on("mousedown.chartgui touchstart.chartgui",this._mouseDownHandler.bind(this))},t.prototype._mouseLeaveHandler=function(t){this._$target.off("mousemove.chartgui touchmove.chartgui"),this._processEvent(t,this._handler.mouseLeaveEvent),this._preventDefaultIfNeeded(t)},t.prototype._contextMenuHandler=function(t){this._processEvent(t,this._handler.contextMenuEvent),this._preventDefaultIfNeeded(t),this._cancelClick=!0},t.prototype._processEvent=function(t,e){e&&(n(this._$target,t),e.call(this._handler,t,this._$target))},t.prototype._preventDefaultIfNeeded=function(t){this._preventDefault&&t.preventDefault()},t.prototype._initGestureEvents=function(){var t,e=this;[this._handler.gestureStartEvent,this._handler.gestureChangeEvent,this._handler.gestureEndEvent].some(Boolean)&&(t=new s.HammerJSLoader,t.load().then(function(t){e._isDestroyed||(e._hammerManager=new t(e._$target.get(0)),e._hammerManager.get("pinch").set({enable:!0}),e._hammerManager.on("pinchstart",function(t){e._handler.gestureStartEvent&&e._handler.gestureStartEvent(t,e._$target),e._clearContextMenuTimeout()}),e._hammerManager.on("pinchmove",function(t){e._handler.gestureChangeEvent&&e._handler.gestureChangeEvent(t,e._$target)}),e._hammerManager.on("pinchend pinchcancel",function(t){e._handler.gestureEndEvent&&e._handler.gestureEndEvent(t,e._$target)}))}))},t.prototype._fixMouseTouchEvent=function(t,e){var i;if(e.touches&&0!==e.touches.length)i=e.touches[0];else{if(!e.changedTouches||0===e.changedTouches.length)return;i=e.changedTouches[0]}t.pageX=i.pageX,t.pageY=i.pageY,t.localX=i.pageX,t.localY=i.pageY,t.clientX=i.clientX,t.clientY=i.clientY},t}()},,,,function(t,e,i){(function(t){TradingView.cleanButAmpersand=function(t,e){var i=e?["&amp;"]:["&"];return TradingView.clean(t,e,i)},TradingView.strip_tags=function(t){return t&&t.replace?t.replace(/(<([^>]+)>)/gi,""):t},TradingView.encodeSpread=function(t){return encodeURIComponent(t)},TradingView.clean=function(t,e,i){
var n,o,r,s=[["&","&amp;"],["<","&lt;"],[">","&gt;"],['"',"&quot;"],["'","&#039;"],["'","&#39;"]],a=t;if(!t||!t.replace)return a;for(n=0;n<s.length;n++)o=s[n][0],r=s[n][1],i&&i.indexOf&&-1!==i.indexOf(e?r:o)||(a=e?a.replace(RegExp(r,"g"),o):a.replace(RegExp(o,"g"),r));return a},void 0!==t&&t&&t.exports&&(t.exports={clean:TradingView.clean,cleanButAmpersand:TradingView.cleanButAmpersand,stripTags:TradingView.strip_tags})}).call(e,i(50)(t))},function(t,e,i){"use strict";function n(t){return Object(z.fetch)("/theme/?themeName="+encodeURIComponent(t),{credentials:"include",method:"GET"}).then(function(t){return t.json()}).then(function(t){var e={};return t.content&&(e.content=JSON.parse(t.content)),e})}function o(){return Y||Object(z.fetch)("/themes/",{credentials:"include",method:"GET"}).then(function(t){return Y=t.json()})}function r(t,e){var i=new FormData;return i.append("content",JSON.stringify(e)),i.append("name",t),Y=null,Object(z.fetch)("/save-theme/",{credentials:"include",method:"POST",body:i}).then(function(t){return t.json()},function(t){return q.logError(t)})}function s(t){var e=new FormData;return e.append("name",t),Y=null,Object(z.fetch)("/remove-theme/",{credentials:"include",method:"POST",body:e}).then(function(t){return t.json()},function(t){return q.logError(t)})}function a(t){return n(t).then(function(t){return!!t.content})}function l(){return J||(J=new Promise(function(t){i.e(30).then(function(e){var n,o=i(1454),r=i(1455);t((n={},n[X.Light]=r,n[X.Dark]=o,n))}.bind(null,i)).catch(i.oe)})),J}function c(){return[X.Light,X.Dark]}function h(){return l().then(function(t){var e;return e={},e[X.Light]=JSON.parse(t[X.Light]),e[X.Dark]=JSON.parse(t[X.Dark]),e})}function u(t){return h().then(function(e){return e[t]})}function d(t){return Z[t]||t}function p(t){return h().then(function(e){return c().some(function(i){return _(e[i],t)})})}function _(t,e){var i=t.content===e.content;return m(t.content,function(t,n){var o=y(t,e.content);return!(i=f(n,o))}),i}function f(t,e){if("string"==typeof t&&"string"==typeof e)try{return Object(G.areEqualRgb)(Object(G.parseRgb)(t),Object(G.parseRgb)(e))}catch(i){return t===e}return t===e}function m(t,e){void 0===t&&(t={});try{g(t,[],e)}catch(t){return}}function g(t,e,i){var n,o;for(n in t)if(t.hasOwnProperty(n))if(o=e.concat(n),"object"==typeof t[n])g(t[n],o,i);else if(i(o,t[n]))throw Error("exit")}function y(t,e){void 0===e&&(e={});var i=Function("obj","return obj."+t.join(".")+";");try{return i(e)}catch(t){return}}function v(t,e){var i,n;return void 0===e&&(e=[]),(i=tt[t])?ot.test(i)?i:(n=i,e.push(t),-1!==e.indexOf(n)?(console.warn("Colors definitions cycled"),i):e.length>nt?(console.warn("Too many variables-link in HEX-color search: "+e[0]),null):v(n,e)):null}function b(t,e){var i=rt[t];if(!i)throw Error("No such color "+t);return i}function S(t,e){var i,n;e||(e=window),i=e.document.documentElement;for(n in at)at[n].className&&i.classList.toggle(at[n].className,n===t)}function w(t){return!t.isPrivate}function P(){return at[ct.value()]||at[lt]}function T(t){
return P().getThemedColor(t)}function C(t){ct.setValue(t)}function x(){C(Object(U.getValue)(ht)||lt)}function k(){return Object(U.getValue)(ht)||null}function L(){Object(U.setValue)(ht,P().name,{forceFlush:!0})}function I(t){return n(t)}function A(){return o()}function E(){return c()}function M(t){return u(t).then(function(t){return t||{content:void 0}})}function O(){return h()}function D(t,e){return r(t,e)}function V(t){return s(t)}function R(t){return a(t)}function B(t){return d(t)}function F(t){return p(t)}function N(t){return{content:{chartProperties:{paneProperties:t.m_model.properties().paneProperties.state(),scalesProperties:t.m_model.properties().scalesProperties.state()},mainSourceProperties:t.m_model.m_mainSeries.properties().state()}}}var W,j,H,U,z,$,q,Y,G,K,X,J,Z,Q,tt,et,it,nt,ot,rt,st,at,lt,ct,ht;Object.defineProperty(e,"__esModule",{value:!0}),W=i(234),i(9),j=i(15),H=i.n(j),U=i(26),z=i(125),$=i(5),q=Object($.getLogger)("Themes.Provider"),Y=null,G=i(29),function(t){t.Light="light",t.Dark="dark"}(X||(X={})),J=null,K={},K[X.Light]=window.t("Light",{context:"colorThemeName"}),K[X.Dark]=window.t("Dark",{context:"colorThemeName"}),K.Black=window.t("Black",{context:"colorThemeName"}),K.Blue=window.t("Blue",{context:"colorThemeName"}),K.Grey=window.t("Grey",{context:"colorThemeName"}),K.White=window.t("White",{context:"colorThemeName"}),Z=K,Q=i(550),tt=i(551),et=i(6),it={},nt=Object.keys(tt).length,ot=/^#[0-9A-F]{6}$/i,Object.keys(tt).forEach(function(t){var e=v(t);it[t]=Object(et.ensureNotNull)(e)}),rt=it,i.d(e,"themes",function(){return at}),i.d(e,"DEFAULT_THEME",function(){return lt}),i.d(e,"watchedTheme",function(){return ct}),e.applyTheme=S,e.isPublicTheme=w,e.getCurrentTheme=P,e.setThemedColor=T,e.setTheme=C,e.restoreTheme=x,e.savedThemeName=k,e.syncTheme=L,e.getTheme=I,e.getThemeNames=A,e.getStdThemeNames=E,e.getStdTheme=M,e.getStdThemes=O,e.saveTheme=D,e.removeTheme=V,e.isThemeExist=R,e.translateStdThemeName=B,e.isStdTheme=F,e.extractThemeFromModel=N,st={},st[X.Light]={name:X.Light,label:window.t("Light",{context:"colorThemeName"}),className:"theme-light",order:2,getThemedColor:function(t){return b(t)}},st[X.Dark]={name:X.Dark,label:window.t("Dark",{context:"colorThemeName"}),className:"theme-dark",order:1,getThemedColor:function(t){return b(Q[t])}},at=st,lt="light",ct=new H.a,ct.subscribe(function(t){S(t,window)}),ht="current_theme.name"},function(t,e,i){"use strict";function n(t,e,n,o){return new Promise(function(r,s){i.e(1).then(function(s){var a=i(78).createDialog,l=a({title:t,content:e,width:500,type:"modal",draggable:!1,destroyOnClose:!0,addClass:"tv-text",actions:[{name:"no",text:o||window.t("No"),type:"default",method:"close"},{name:"yes",text:n||window.t("Yes"),type:"primary",method:"close",key:13}]});l.on("action:yes",function(){r(!0)}),l.on("destroy",function(){r(!1)}),l.open()}.bind(null,i)).catch(i.oe)})}e.a=n,i(31),i(9)},function(t,e,i){"use strict";function n(t){return t.description||""}Object.defineProperty(e,"__esModule",{value:!0}),e.getTranslatedSymbolDescription=n;i(9)
},function(t,e,i){"use strict";function n(t){this._maxSize=t||50,this.reset()}var o=/[2-9]/g;n.prototype.measureText=function(t,e,i){var n,r,s=i||o,a=(e+"").replace(s,"0");return this._cache[a]?this._cache[a].width:(this._actualSize===this._maxSize&&(n=this._tick2Labels[this._oldestTick],delete this._tick2Labels[this._oldestTick],delete this._cache[n],this._oldestTick++,this._actualSize--),0===(r=t.measureText(a).width)&&e.length?0:(this._cache[a]={width:r,tick:this._usageTick},this._tick2Labels[this._usageTick]=a,this._actualSize++,this._usageTick++,r))},n.prototype.reset=function(){this._actualSize=0,this._cache={},this._usageTick=1,this._oldestTick=1,this._tick2Labels={}},t.exports=n},function(t,e,i){"use strict";function n(t,e,i){return i&&(i+=" "),(i||"")+t+"px "+e}Object.defineProperty(e,"__esModule",{value:!0}),e.makeFont=n},function(t,e,i){"use strict";var n,o,r,s,a,l,c,h,u;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"StudyDataWindowView",function(){return u}),n=i(0),o=i(79),i.n(o),r=i(137),s=i(4),i.n(s),a=i(20),l=i(96),c=window.t("n/a"),h=function(t){function e(e,i,n,o){var r=t.call(this,e,i)||this;return r.plotId=n,r.plotIndex=o,r}return n.c(e,t),e}(r.DataWindowItem),u=function(t){function e(e,i){var n,o,r,s,a=t.call(this)||this;if(a._invalidated=!0,a._study=e,a._model=i,!(n=e.metaInfo().plots))return a;for(o=0;o<n.length;++o)a._study.isSelfColorerPlot(o)||a._study.isBarColorerPlot(o)||a._study.isBgColorerPlot(o)||a._study.isDataOffsetPlot(o)||a._study.isOHLCColorerPlot(o)||(r=n[o].id,s=new h(a._study.guiPlotName(r),"",r,o),a._items.push(s));return a.update(),a}return n.c(e,t),e.prototype.update=function(){this._invalidated=!0},e.prototype.items=function(){return this._invalidated&&(this._updateImpl(),this._invalidated=!1),this._items},e.prototype._updateImpl=function(){var t,e,i,n,r,h,u,d,p,_,f,m,g,y,v,b,S,w,P,T,C,x,k,L,I,A,E,M,O,D,V,R=!0;for(this._header=this._study.title(R),this._title=this._study.title(),t=this._study.isVisible()?c:"",e=0,i=this._items;e<i.length;e++)n=i[e],n.setValue(t);if(s.enabled("hide_last_na_study_output")&&this._items.length&&this._items[this._items.length-1].setValue(""),!this._model.timeScale().isEmpty()){if(r=this._study.metaInfo().plots,h={},u=this._study.metaInfo().palettes,r&&void 0!==u)for(d=0;d<r.length;d++)p=r[d],(Object(l.isColorerPlot)(p)||Object(l.isOhlcColorerPlot)(p))&&(_=p.target,h[_]={index:d,palette:u[p.palette],paletterProps:this._study.properties().palettes[p.palette]});for(f=this._study.data().size()-1,m=this._model.crossHairSource().appliedIndex(),g=this._study.formatter(),y={},v=0,b=this._items;v<b.length;v++)S=b[v],n=S,w=n.plotId,P=n.plotIndex,T=this._study.offset(w),void 0!==(C=Object(o.isNumber)(m)?this._study.nearestIndex(m-T,a.PlotRowSearchMode.NearestLeft):f)&&(x=y[w],void 0===x&&(x=this._study.getMinFirstBarIndexForPlot(w),Number.isFinite(x)&&(y[w]=x)),x>C||(k=this._study.data().last(),null!==(L=this._study.data().valueAt(C)||(null!==k?k.value:null))&&(I=L[P+1],Object(o.isNumber)(I)&&(n.setValue(g.format(I)),
A=this._study.properties().styles[w].color.value(),p=r[P],Object(l.isOhlcPlot)(p)&&(w=p.target||w,A=this._study.properties().ohlcPlots[w].color.value()),E=A,h[w]&&L.length>h[w].index+1&&(M=L[h[w].index+1],O=h[w].palette,void 0!==M&&null!==M&&void 0!==O&&(D=h[w].paletterProps,V=O.valToIndex?O.valToIndex[M]:M,E=D.colors[void 0!==V?V:M].color.value())),n.setColor(E)))))}},e}(r.DataWindowView)},function(t,e,i){"use strict";var n,o;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"DataWindowItem",function(){return n}),i.d(e,"DataWindowView",function(){return o}),n=function(){function t(t,e){this._visible=!0,this._title=t,this._value=e}return t.prototype.title=function(){return this._title},t.prototype.setTitle=function(t){this._title=t},t.prototype.text=function(){return this._value},t.prototype.value=function(){return this._value},t.prototype.setValue=function(t){this._value=t},t.prototype.visible=function(){return this._visible},t.prototype.setVisible=function(t){this._visible=t},t.prototype.color=function(){return this._color},t.prototype.setColor=function(t){this._color=t},t}(),o=function(){function t(){this._items=[],this._header="",this._title=""}return t.prototype.header=function(){return this._header},t.prototype.title=function(){return this._title},t.prototype.items=function(){return this._items},t.prototype.update=function(){},t}()},function(t,e,i){"use strict";function n(t,e){o.call(this,e),this._study=t,this._inputValueReplacements={NONE:"Default"}}var o=i(328);inherit(n,o),n.prototype.color=function(){return this._study.isFailed()||this._study.metaInfo&&this._study.metaInfo().isTVScriptStub?"#ff0000":o.prototype.color.call(this)},n.prototype.update=function(){this._study.isFailed()?this._text=this._study.title(!0,this._inputValueReplacements)+": "+this._study.status():this._text=this._study.title(!0,this._inputValueReplacements)+" "+this._study.status()},t.exports=n},function(t,e,i){"use strict";var n,o=i(6).assert,r=i(29),s=r.rgba,a=r.rgbaToString,l=r.parseRgb,c=i(654),h=i(210).PriceScale,u=i(144),d=i(86),p=d.createLineTool,_=d.isLineToolName,f=d.isStudyLineToolName,m=i(1).LineDataSource,g=i(47).LineToolBarsPattern,y=i(47).LineToolCallout,v=i(759),b=i(39),S=b.Study,w=b.prepareStudyPropsStateForLoadChart,P=b.prepareStudyPropertiesForLoadChart,T=i(345).createStudy,C=i(71).Series,x=i(43),k=i(51),L=i(3).DefaultProperty,I=i(32),A=i(4),E=i(5).getLogger("Chart.Serialization"),M=i(47).LineToolParallelChannel,O=i(47).LineToolTrendAngle,D=i(47).LineToolGhostFeed,V=i(47).LineToolElliott,R=i(34).PriceDataSource,B=i(209).Pane,F=i(17),N=i(35),W=i(348).preferencesByWhiteList;E=i(5).getLogger("Chart.Serialization"),c.version=2,c.prototype.state=function(t,e){var i,n,o,r={};for(r.panes=[],i=0;i<this.panes().length;i++)r.panes.push(this.panes()[i].state(!0,t,!1,e));return r.timeScale=this.m_timeScale.state(t),n=null,o=this.properties(),r.chartProperties={paneProperties:o.paneProperties.state(),scalesProperties:o.scalesProperties.state(),publishedChartsTimelineProperties:n?n.state(t):void 0,
chartEventsSourceProperties:o.chartEventsSourceProperties.state()},o.chartEventsSourceProperties&&(r.chartProperties.chartEventsSourceProperties=o.chartEventsSourceProperties.state()),r.version=c.version,r.timezone=this.timezone(),r},c.prototype.chartPropertiesTransparencyMigrate=function(t){var e,i,n;t.chartProperties.paneProperties.crossHairProperties&&(n=t.chartProperties.paneProperties.crossHairProperties,N.isHexColor(n.color)&&(i=n.transparency/100,e=l(n.color),n.color=a(s(e,i)))),t.chartProperties.paneProperties.dataWindowProperties&&(n=t.chartProperties.paneProperties.dataWindowProperties,N.isHexColor(n.color)&&(i=n.transparency/100,e=l(n.color),n.color=a(s(e,i))))},c.prototype.resetDeferredStudies=function(){new n(this).reset()},c.prototype._getExceedingChildStudies=function(t){var e,i,n,o,r,s,a,l,c=[];for(e=0;e<t.length;++e)c=c.concat(t[e].sources||[]);for(i=0,n=1,o=[],r={},s=0,a=1e6;c.length&&--a;)l=c[s],(l.ownerSource&&r[l.ownerSource]||!l.ownerSource)&&(r[l.id]=l,c.splice(c.indexOf(l),1),l.ownerSource&&"Study"===l.type&&l.state&&l.state.isChildStudy&&++i>n&&o.push(l)),s=(s+1)%c.length;return o},c.prototype.restoreState=function(t,e){var i,o,r,s,a,l,c,h,u,d,p,_;if(new n(this).reset(),i={},!t.panes)return void E.logDebug("ChartModel.restoreState: invalid state");if(!Array.isArray(t.panes))return void E.logDebug("ChartModel.restoreState: invalid state");if(t.panes.length<1)return void E.logDebug("ChartModel.restoreState: invalid state");if(t.chartProperties&&!t.chartProperties.timezone&&(t.chartProperties.timezone=t.timezone),t.chartProperties&&(o=TradingView.factoryDefaults("chartproperties").scalesProperties,TradingView.merge(o,t.chartProperties.scalesProperties),!("showLastValue"in o)||"showSeriesLastValue"in o||"showStudyLastValue"in o||(o.showSeriesLastValueProperty=o.showLastValue,o.showStudyLastValueProperty=o.showLastValue),"showSeriesLastValue"in o&&(i.showSeriesLastValueProperty=!0),"showStudyLastValue"in o&&(i.showStudyLastValueProperty=!0),t.chartProperties.paneProperties.vertGridProperties=t.chartProperties.paneProperties.vertGridProperties||TradingView.clone(t.chartProperties.paneProperties.gridProperties),t.chartProperties.paneProperties.horzGridProperties=t.chartProperties.paneProperties.horzGridProperties||TradingView.clone(t.chartProperties.paneProperties.gridProperties),this._properties.paneProperties.merge(t.chartProperties.paneProperties),this._properties.scalesProperties.merge(o),t.chartProperties.timezone&&this._properties.timezone.setValue(t.chartProperties.timezone),t.chartProperties.chartEventsSourceProperties&&this._properties.chartEventsSourceProperties&&this._properties.chartEventsSourceProperties.merge(t.chartProperties.chartEventsSourceProperties),this.m_timeScale.restoreState(t.timeScale,e)),t.timeScale&&this.m_timeScale.restoreState(t.timeScale,e),!this.readOnly()&&(r=this._getExceedingChildStudies(t.panes),r.length))for(s=t.panes.length-1;s>=0;--s){for(a=t.panes[s],l=a.sources.length-1;l>=0;--l)c=a.sources[l],~r.indexOf(c)&&a.sources.splice(l,1)
;a.sources.length||t.panes.splice(s,1)}for(h=t.panes,this.panes()[0].restoreState(h[0],e,t.version,i),s=1;s<t.panes.length;s++)a=this.panes()[s]||this.createPane(),a.restoreState(t.panes[s],e,t.version,i);for(this._invalidateBarColorerCaches(),u=this.dataSources(),d=0,s=0;s<u.length;s++)p=u[s],TradingView.isInherited(p.constructor,m)&&(d++,p.calcIsActualSymbol());return this._version=t.version,this.updateTimeScaleBaseIndex(),this.recalculateAllPanes(),this.invalidate(new F(F.FULL_UPDATE)),_=TVLocalStorage.getItem("linetools_limit")||1e3,window.is_authenticated&&window.user&&window.user.settings&&(_=window.user.settings.linetools_limit||_),d>_&&d%100==0?{lines_limit_exceeded:!0,line_tools_count:d}:{}},B.prototype.state=function(t,e,i,n){function o(t){return i&&!t.isSavedInStudyTemplates()||!t.state||!t.state()||!t.isSavedInChart(e)||n&&t.isActualSymbol&&!t.isActualSymbol()}var r,s,a={};if(t)for(a.sources=[],r=0;r<this.m_dataSources.length;r++)o(this.m_dataSources[r])||a.sources.push(this.m_dataSources[r].state(e));for(a.leftAxisState=this.m_leftPriceScale.state(),a.leftAxisState.m_isLockScale&&null!==this._lastLeftPriceScaleRatio&&(a.leftPriceScaleRatio=this._lastLeftPriceScaleRatio),a.leftAxisSources=[],r=0;r<this.m_leftPriceScale.dataSources().length;r++)o(this.m_leftPriceScale.dataSources()[r])||a.leftAxisSources.push(this.m_leftPriceScale.dataSources()[r].id());for(a.rightAxisState=this.m_rightPriceScale.state(),a.rightAxisState.m_isLockScale&&null!==this._lastRightPriceScaleRatio&&(a.rightPriceScaleRatio=this._lastRightPriceScaleRatio),a.rightAxisSources=[],r=0;r<this.m_rightPriceScale.dataSources().length;r++)o(this.m_rightPriceScale.dataSources()[r])||a.rightAxisSources.push(this.m_rightPriceScale.dataSources()[r].id());for(a.overlayPriceScales={},r=0;r<this.m_dataSources.length;r++)s=this.m_dataSources[r],this.isOverlay(s)&&s.isSavedInChart(e)&&(a.overlayPriceScales[s.id()]=s.priceScale().state());return a.stretchFactor=this._stretchFactor,this.m_mainDataSource&&(a.mainSourceId=this.m_mainDataSource.id()),a},B.prototype.sourceById=function(t){for(var e=0;e<this.m_dataSources.length;e++)if(this.m_dataSources[e].id()===t)return this.m_dataSources[e];return null},B.prototype.isESDStudy=function(t){return"Script$TV_EARNINGS@tv-scripting"===t.id||"Script$TV_DIVIDENDS@tv-scripting"===t.id||"Script$TV_SPLITS@tv-scripting"===t.id||"ESD$TV_EARNINGS@tv-scripting"===t.id||"ESD$TV_DIVIDENDS@tv-scripting"===t.id||"ESD$TV_SPLITS@tv-scripting"===t.id},B.prototype.isStudyToSkip=function(t){return!!this.isESDStudy(t)},B.prototype.restoreState=function(t,e,i,n){var o,r,s,a,l,c,u,d,p,_,f,g,y,v,b;if(n=n||{},!t.leftAxisState||!t.rightAxisState)throw Error("invalid state");if(!t.leftAxisSources||!t.rightAxisSources)throw Error("invalid state");if(t.stretchFactor&&(this._stretchFactor=t.stretchFactor),o={},t.sources)for(r=-1!==this.m_dataSources.indexOf(this._model.mainSeries()),this.clearSeries(),this.m_mainDataSource=null,r&&this.m_dataSources.push(this._model.mainSeries()),s=this.getZOrderMinMax(),a=s.minZOrder,l=s.maxZOrder,
function(){var e,i,n,o,r,s=t.sources.find(function(e){return e.id===t.mainSourceId});if(void 0===s)return void E.logWarn("There is no main source with id "+t.mainSourceId+", total sources="+t.sources.length);if(!TradingView.isInherited(TradingView[s.type],m))return void E.logNormal("The type of main source is not line tool - fix is unnecessary");for(e=null,i=0;i<t.sources.length;i++)if(n=t.sources[i],!TradingView.isInherited(TradingView[n.type],m)){if(null!==e)return void E.logWarn("Pane contains more than 1 possibly main sources - auto fix cannot be applied");e=n}if(null===e)return void E.logWarn("Pane contains only line tools - possible we need to remove this pane?");o=t.mainSourceId,r=0,t.mainSourceId=e.id,t.sources.forEach(function(t){t.ownerSource===o&&(t.ownerSource=e.id,r+=1)}),E.logNormal("Auto fix broken pane is applied, changed line tools="+r+", changed from="+o+" to="+e.id)}(),c=0;c<t.sources.length;c++)u=t.sources[c],d=u.type,Math.abs(u.zorder)>1e200?(p=a-1,E.logWarn("Datasource zorder has bad value: "+u.zorder+" Resetting it to "+p),u.zorder=p):this.isZOrderAvailable(u.zorder)||r&&"MainSeries"===d&&this._model.mainSeries().zorder()===u.zorder||(u.zorder=l+1),_=u.id,o[_]=u.ownerSource,d&&("MainSeries"===d?this._restoreMainSeries(u,e,r,n):d.toLowerCase().startsWith("study")?this._restoreStudy(u,e,n):TradingView.isInherited(TradingView[d],m)?this._restoreLineTool(u,e):TradingView[d]&&TradingView[d].createFromState&&this._restoreSpecialSource(u,e)),a=Math.min(a,u.zorder),l=Math.max(l,u.zorder);for(this.m_leftPriceScale.dataSources().splice(0,1/0),this.m_leftPriceScale._hasSeries=!1,f=defaults("chartproperties").paneProperties.leftAxisProperties,TradingView.merge(f,t.leftAxisState),this.m_leftPriceScale.restoreState(f),void 0!==t.leftPriceScaleRatio&&(this._lastLeftPriceScaleRatio=t.leftPriceScaleRatio),c=0;c<t.leftAxisSources.length;c++)(g=this.dataSourceForId(t.leftAxisSources[c]))&&(void 0!==f.m_showSymbolLabels&&g instanceof C&&this.model().properties().scalesProperties.showSymbolLabels.setValue(f.m_showSymbolLabels),g.setPriceScale(this.m_leftPriceScale),this.m_leftPriceScale.addDataSource(g));for(this.m_rightPriceScale.dataSources().splice(0,1/0),this.m_rightPriceScale._hasSeries=!1,f=defaults("chartproperties").paneProperties.rightAxisProperties,TradingView.merge(f,t.rightAxisState),this.m_rightPriceScale.restoreState(f),void 0!==t.rightPriceScaleRatio&&(this._lastRightPriceScaleRatio=t.rightPriceScaleRatio),c=0;c<t.rightAxisSources.length;c++)(g=this.dataSourceForId(t.rightAxisSources[c]))&&(void 0!==f.m_showSymbolLabels&&g instanceof C&&this.model().properties().scalesProperties.showSymbolLabels.setValue(f.m_showSymbolLabels),g.setPriceScale(this.m_rightPriceScale),this.m_rightPriceScale.addDataSource(g));for(c=0;c<this.m_dataSources.length;c++)g=this.m_dataSources[c],-1===this.m_rightPriceScale.dataSources().indexOf(g)&&-1===this.m_leftPriceScale.dataSources().indexOf(g)?(g._isOverlay=!0,y=new h(this._model.properties().scalesProperties),y.setHeight(this.m_height),
y.setTopMargin(this.m_rightPriceScale.topMargin()),y.setBottomMargin(this.m_rightPriceScale.bottomMargin()),y.addDataSource(g),t.overlayPriceScales&&t.overlayPriceScales[g.id()]&&(f=t.overlayPriceScales[g.id()],f.m_isAutoScale=!0,f.m_isLog=!1,f.m_isPercentage=!1,f.m_isLockScale=!1,y.restoreState(f)),g.setPriceScale(y)):g._isOverlay=!1;for(_ in o)(v=o[_])&&(g=this.sourceById(_))&&this.sourceById(_).setOwnerSource(this.sourceById(v));if(t.mainSourceId&&!this.m_mainDataSource&&(this.m_mainDataSource=this.dataSourceForId(t.mainSourceId)),!this.m_mainDataSource)for(c=0;c<this.m_dataSources.length;c++)if(g=this.m_dataSources[c],TradingView.isInherited(g.constructor,R)){this.m_mainDataSource=g;break}for(c=0;c<this.m_dataSources.length;c++)g=this.m_dataSources[c],TradingView.isInherited(g.constructor,m)?(g.ownerSource()||g.setOwnerSource(this.mainDataSource()),g.isFixed()&&g.restoreFixedPoints(),g.fixAfterRestorePriceAxis&&g.fixAfterRestorePriceAxis()):TradingView.isInherited(g.constructor,S)&&(b=g.properties(),b.linkedToSeries&&b.linkedToSeries.value()&&(g.ownerSource()||g.setOwnerSource(this.model().mainSeries())));this._updateMargins(),this._model.onMainSeriesPriceScaleNameChanged(),this._cachedOrderedSoruces=null,this._cachedHitTestSources=null},B.prototype._restoreMainSeries=function(t,e,i,n){var o,r,s,a,l,c,h,u,d,p,_,f,m,g,y,v=t.id,b=t.state,S=t.zorder;if(b&&["candleStyle","hollowCandleStyle","haStyle"].forEach(function(t){b[t]&&(b[t].wickUpColor=b[t].wickUpColor||b[t].wickColor,b[t].wickDownColor=b[t].wickDownColor||b[t].wickColor)}),i||(o=this._model.paneForSource(this._model.mainSeries()),o.removeDataSource(this._model.mainSeries()),this.m_dataSources.push(this._model.mainSeries())),this.m_mainDataSource=this._model.mainSeries(),r=b&&b.style?b.style:void 0,r===C.STYLE_PNF&&"ATR"===this._model.mainSeries().properties().pnfStyle.inputs.style.value()?this._model.mainSeries().properties().pnfStyle.inputs.style._value="Traditional":r===C.STYLE_RENKO&&"ATR"===this._model.mainSeries().properties().renkoStyle.inputs.style.value()&&(this._model.mainSeries().properties().renkoStyle.inputs.style._value="Traditional"),b&&!b.hasOwnProperty("showSessions")&&(b.showSessions=!1),b&&!b.extendedHours&&(b.extendedHours=!1),b&&e&&(b.showCountdown=!1),b&&(e&&!("showSeriesLastValueProperty"in n)&&"showLastValue"in b&&this._model.properties().scalesProperties.showSeriesLastValue.setValue(b.showLastValue),delete b.showLastValue),b)for(s={haStyle:k.chartStyleStudyId(C.STYLE_HEIKEN_ASHI,!0),renkoStyle:k.chartStyleStudyId(C.STYLE_RENKO,!0),pbStyle:k.chartStyleStudyId(C.STYLE_PB,!0),kagiStyle:k.chartStyleStudyId(C.STYLE_KAGI,!0),pnfStyle:k.chartStyleStudyId(C.STYLE_PNF,!0),rangeStyle:k.chartStyleStudyId(C.STYLE_RANGE,!0)},a=this._model.studyVersioning(),l=this._model.mainSeries().styleStudyInfos(),c=Object.keys(x.SYMBOL_STRING_DATA),h=0;h<c.length;h++)r=c[h],u=x.STYLE_SHORT_NAMES[r]+"Style",d=u in t?t[u].studyId:s[u],null!=(r=b[u])&&(p=r.inputs,_=I.parseIdString(d),f=l[u].studyId,m=I.parseIdString(f),
g=a.updateStudyInputs(_.id,_.version,m.version,p,null),r.inputs=g);this._model.mainSeries().clearSessionStudy(),this._model.mainSeries().properties().merge(b),this._model.mainSeries()._prevChartStyle=this._model.mainSeries().properties().style.value(),this._model.mainSeries().createPaneView(),this._model.mainSeries().setId(v),e&&this._model.mainSeries().restoreData(t.bars,t.nsBars,t.symbolInfo,t.rtPrice,t.boxSize,t.reversalAmount),void 0!==S&&this._model.mainSeries().setZorder(S),this._model.mainSeries().properties().extendedHours.listeners().fire(this._model.mainSeries().properties().extendedHours),(y=this._model.mainSeries().symbolInfo())&&this._model.mainSeries().onSymbolResolved().fire(this._model.mainSeries().symbolInfo())},B.prototype._restoreStudy=function(t,e,i){var o,r,s,a,l,c,h,d,p,_;return e&&void 0===t.data&&void 0===t.nonSeriesData&&void 0===t.indexes?void E.logError("Cannot restore (skipping) study without data "+t.id+", "+t.metaInfo.id):(o=t.id,r=t.state,s=t.zorder,a=t.ownerSource,l=TradingView.clone(t.metaInfo),$.extend(l,I.parseIdString(l.id)),this.isStudyToSkip(l)&&!e?void E.logNormal("Skipping study "+l.id):(c=r,h=this._model.studyVersioning(),d=h.patchPropsStateAndMetaInfo(c,l,{oldShowStudyLastValueProperty:e&&!i.showStudyLastValueProperty}),c=d.propsState,l=d.metaInfo,p=new u(this._model,t,l.shortDescription),p.setId(o),_=this,h.updateMetaInfoAsync(l,e).done(function(i){function r(n){var r,a=P(l,i,c,null,h,n),d=T(_._model,a,n||_._model.mainSeries(),s);d.setId(o),e&&(r=h.patchStudyData(l,t.data,t.nonSeriesData,t.indexes),d.restoreData(r.data,r.nsData,r.indexes)),_._model.replaceStudyStub(p,d)||(p=d),u.add(o,d)}var s,u,d;p.setStatus(""),s=i||new I(l),u=new n(_._model),d=a&&t.state.isChildStudy,d?u.get(a).done(r):r()}).fail(function(t){p.setStatus("error: "+t),p.setFailed(!0)}),p&&this.m_dataSources.push(p),delete this._cachedOrderedSoruces,delete this._cachedHitTestSources,p&&void 0!==s&&p.setZorder(s),p))},B.prototype._restoreLineTool=function(t,e,i){var n,r,s,a,l,c,h,d,m,b,S,P,T,C,x,k,E,R,B;if(i=void 0===i||i,V.migrateState(t),v.migrateState(t),n=t.type,r=t.id,s=t.state,a=i?t.zorder:this._newZOrderForLineTool(),o(_(n),"invalid data source type:"+n+" (expected to be a Line Tool)"),l=null,c=TradingView.factoryDefaults("linetool"),f(n)){if(l=this._model.studyVersioning(),t=l.patchPointsBasedStudyState(t),TradingView.merge(c,s),m=t.metaInfo,$.extend(m,I.parseIdString(m.fullId)),!e&&(b=m.productId,!pro.hasPackage(b)))return S=new u(this._model,t,m.shortDescription),S.setId(r),this.m_dataSources.push(S),void 0!==a&&S.setZorder(a),S.setStatus($.t("not authorized")),void S.setFailed(!0);P=l.updateMetaInfo(m),T=P||m,c=w(T,m,c,null,l),e?TradingView.merge(c,{fixedSize:!1}):TradingView.merge(c,{fixedSize:!0}),d=new L("study_"+T.id,c,!0),h=p(n,this._model,d,T,this.mainDataSource())}else C=n.toLowerCase(),TradingView.merge(c,TradingView.factoryDefaults(C)),d=TradingView[n].prototype.createPropertiesObject(C,c),d.merge(s),e?d.merge({fixedSize:!1}):d.merge({fixedSize:!0}),h=new TradingView[n](this._model,d,!0)
;return h.setId(r),h.linkKey=t.linkKey,x=t.alertId,x&&"function"==typeof h.setAlert&&A.enabled("alerts")&&!this._model.readOnly()&&!this._model.isJustClonedChart()&&h.setAlert(x,{noChartSave:!0}),k=t.indexes?t.indexes:[],k=k.slice(0,t.points.length),h.isFixed()?h.restorePositionPercents(t.positionPercents):h.restorePoints(t.points,k,e),h instanceof g||h instanceof y||h instanceof O||h instanceof D||h instanceof M?h.restoreData(t):e&&h.restoreData&&(E=t,l&&(E.graphics=l.patchPointsBasedStudyData(E.metaInfo,E.graphics)),h.restoreData(E)),R=null==t.version?1:t.version,B=null==h.version?1:h.version,R!==B&&"function"==typeof h.migrateVersion&&h.migrateVersion(R,B,{pane:this,model:this._model,properties:d}),this.m_dataSources.push(h),delete this._cachedOrderedSoruces,delete this._cachedHitTestSources,void 0!==a&&h.setZorder(a),h},B.prototype._restoreSpecialSource=function(t,e){var i,n=TradingView[t.type];n&&n.createFromState&&(i=n.createFromState(t,e,this._model))&&(i.setId(t.id),this.m_dataSources.push(i),i.zorder&&i.setZorder(i.zorder))},c.prototype.studyTemplate=function(t){var e,i,n,o,r={};for(r.panes=[],e=0;e<this.panes().length;e++)i=!0,n=!1,o=!0,r.panes.push(this.panes()[e].state(i,n,o));return t&&(r.interval=this.mainSeries().interval()),r.version=c.version,r},c.prototype.restoreStudyTemplate=function(t,e){this._undoModel.studyLoadTemplate(this._undoModel,this.studyTemplate(),t,e)},c.prototype.theme=function(){var t={};return t.chartProperties={paneProperties:this.properties().paneProperties.state(),scalesProperties:this.properties().scalesProperties.state(),symbolWatermarkProperties:this.properties().symbolWatermarkProperties.state()},t.mainSourceProperties=this.mainSeries().state().state,delete t.mainSourceProperties.symbol,delete t.mainSourceProperties.interval,delete t.chartProperties.paneProperties.topMargin,delete t.chartProperties.paneProperties.bottomMargin,t.version=c.version,t},c.prototype.restoreTheme=function(t){var e,i,n={hollowCandle:{related:"candle"}};for(e in n)t.mainSourceProperties[e+"Style"]||(i=t.mainSourceProperties[n[e].related+"Style"],t.mainSourceProperties[e+"Style"]=TradingView.clone(i));this._undoModel.chartLoadTheme(this,t)},c.prototype.preferences=function(){return W(this,this.mainSeries())},n=function(){function t(n){var o=e.indexOf(n);return~o?i[o]:this instanceof t?(this._source=n,this._studies={},this._deferreds={},e.push(n),void i.push(this)):new t(n)}var e=[],i=[];return t.prototype.add=function(t,e){this._deferreds[t]&&(this._deferreds[t].resolve(e),delete this._deferreds[t]),this._studies[t]=e},t.prototype.get=function(t){return this._studies[t]?$.Deferred().resolve(this._studies[t]):(this._deferreds[t]||(this._deferreds[t]=$.Deferred()),this._deferreds[t].promise())},t.prototype.reset=function(){var t=e.indexOf(this._source);~t&&(e.splice(t,1),i.splice(t,1))},t}(),t.exports=c},function(t,e,i){"use strict";function n(t){var e,i;return t.isEmpty()?null:null===(e=t.priceRange())?null:(i=e.length(),t.internalHeight()/i)}function o(t,e){var i,o,r
;return e.isLog()||t.isEmpty()||e.isEmpty()?null:null===(i=n(e))?null:(o=t.getValidBarSpacing(),r=Math.max(l,i),o/r)}function r(t,e,i){var n,o,r,s;return t.isLog()||null===i||t.isEmpty()?null:null===(n=t.priceRange())||n.isEmpty()?null:(o=t.internalHeight()/(e/i),r=n.length(),o===r?n:(s=(o-r)/2,new a.PriceRange(n.minValue()-s,n.maxValue()+s)))}function s(t,e){var i,n;return t.isLog()||null===e||t.isEmpty()?null:null===(i=t.priceRange())?null:(n=i.length(),t.internalHeight()/n*e)}var a,l;Object.defineProperty(e,"__esModule",{value:!0}),e.scaleRatio=o,e.priceRangeByScaleRatio=r,e.barSpacingByScaleRatio=s,a=i(65),l=1e-10},function(t,e,i){"use strict";function n(t,e){this._constructor="LineToolPitchfork";var i=e||this.createPropertiesObject("linetoolpitchfork");o.call(this,t,i),this._properties.style.listeners().subscribe(this,n.prototype._recreatePaneView),this._recreatePaneView()}var o=i(1).LineDataSource,r=i(18),s=i(30).Action,a=i(2).propertyPages,l=i(297).LineToolPitchforkStyle,c=null;inherit(n,o),n.prototype.additionalActions=function(){var t,e,i=[],n=["Original","Modified Schiff","Inside","Schiff"];for(t=0;t<4;t++)e=new s({checked:this.properties().style.value()===t,checkable:!0,text:$.t(n[t]),callbackContext:{target:this,value:t}}),e.callbacks().subscribe(null,function(t){var e=t.callbackContext(),i=e.target,n=e.value;i.properties().style.setValue(n),i.updateAllViews(),i._model.updateSource(i)}),i.push(e);return[i[0],i[3],i[1],i[2]]},n.prototype._recreatePaneView=function(){if(null===c)return void i.e(0).then(function(t){null===c&&(c=i(904)),this._recreatePaneView()}.bind(this).bind(null,i)).catch(i.oe);var t=[];this._properties.style.value()===l.Original?t=[new c.PitchforkLinePaneView(this,this._model)]:this._properties.style.value()===l.Schiff?t=[new c.SchiffPitchforkLinePaneView(this,this._model)]:this._properties.style.value()===l.Schiff2?t=[new c.SchiffPitchfork2LinePaneView(this,this._model)]:this._properties.style.value()===l.Inside&&(t=[new c.InsidePitchforkLinePaneView(this,this._model)]),this._setPaneViews(t)},n.prototype.pointsCount=function(){return 3},n.prototype.title=function(){return $.t("Pitchfork")},n.prototype.name=function(){return"Pitchfork"},n.prototype.processErase=function(t,e){var i="level"+e,n=this.properties()[i].visible;t.setProperty(n,!1,"Erase level line")},n.prototype.createPropertiesObject=function(t,e,i){return new r(t,e,i,{range:[0,8]})},n.prototype.getStylesPropertyPage=function(){return a.LineToolPitchforkStylesPropertyPage},e.LineToolPitchfork=n},function(t,e,i){"use strict";function n(t){var e=(""+t).match(/(.*)([DWM])/);return e?e[1]+$.t(e[2],{context:"interval_short"}):t}Object.defineProperty(e,"__esModule",{value:!0}),e.translatedIntervalString=n;i(9)},function(t,e,i){"use strict";var n,o,r,s;i.d(e,"a",function(){return s}),n=i(7),i.n(n),o=i(124),r=i(83),s=function(){function t(t){this._lineRendererData={width:0,height:0,points:[new n.Point(0,0)],color:"rgba(0, 0, 0, 0)",linewidth:1,linestyle:r.LINESTYLE_SOLID,visible:!1},this._lineRenderer=new o.HorizontalLineRenderer,
this._invalidated=!0,this._series=t,this._model=t.model(),this._lineRenderer.setData(this._lineRendererData)}return t.prototype.update=function(){this._invalidated=!0},t.prototype.renderer=function(){return this._invalidated&&(this._updateImpl(),this._invalidated=!1),this._lineRenderer},t}()},function(t,e,i){"use strict";(function(e){function n(t,i,n){r.call(this,t),this._origState=i,this._title=n;var a={visible:!0};this._properties=new e(a),this._statusView=new o(this,t.properties()),this._status=$.t("compiling..."),this._statusView.setText(this._title+" "+this._status),this._formatter=new s(Math.pow(10,2)),this._failed=!1}var o=i(138),r=i(34).PriceDataSource,s=i(13).PriceFormatter;inherit(n,r),n.prototype.properties=function(){return this._properties},n.prototype.statusView=function(){return this._statusView},n.prototype.state=function(t){return this._origState},n.prototype.setStatus=function(t){this._status=t,this._statusView.setText(this._title+" "+this._status)},n.prototype.formatter=function(){return this._formatter},n.prototype.title=function(){return this._title},n.prototype.isFailed=function(){return this._failed},n.prototype.setFailed=function(t){this._failed=t},n.prototype.start=function(t){},n.prototype.firstValue=function(t){return null},t.exports=n}).call(e,i(16))},function(t,e,i){"use strict";(function(e){function n(t,e,i){this._options=Object.assign({},C,i),this.pane=t,this._isLeft=n.isLeft(e),this._properties=t.chart().properties().scalesProperties,this.jqCell=$(document.createElement("td")),this.jqCell.addClass("chart-markup-table"),this.jqCell.addClass("price-axis"),this.jqCell.width(25),this._dv=$("<div>"),this._dv.css("width","100%"),this._dv.css("height","100%"),this._dv.css("position","relative"),this._dv.css("overflow","hidden"),this._dv.appendTo(this.jqCell),this.canvas=g(this._dv,new y(16,16)),$(this.canvas).css("position","absolute"),$(this.canvas).css("z-order","2"),$(this.canvas).css("left",0),$(this.canvas).css("top",0),this.ctx=this.canvas.getContext("2d"),this.top_canvas=g(this._dv,new y(16,16)),$(this.top_canvas).css("position","absolute"),$(this.top_canvas).css("z-order","1"),$(this.top_canvas).css("left",0),$(this.top_canvas).css("top",0),this.top_ctx=this.top_canvas.getContext("2d"),this._textWidthCache=new s,this.restoreDefaultCursor(),this.update(),this._mouseEventHandler=new v(this.jqCell,this,!0),this.dialog=this.pane.chart().dialog,this.contextMenu=null,this.actions={},this._isVisible=!0,this.priceScale().onMarksChanged.subscribe(this,this.onMarksChanged)}function o(t){var e=new T(t);return function(t,i){return isNumber(i)&&!t.isLog()?e.format(i):""}}var r,s,a,l,c,h,u,d,p,_,f,m,g,y,v,b,S,w,P,T,C,x;i(760),r=i(1).LineDataSource,s=i(134),a=i(30),l=a.Action,c=a.ActionSeparator,h=i(84),u=i(761),d=i(17),p=i(94),_=p.resizeCanvas,f=p.hardResizeCanvas,m=p.clearRect,g=p.addCanvasTo,y=p.Size,v=i(126).MouseEventHandler,b=i(28).trackEvent,S=i(135).makeFont,w=i(213).ActionBinder,P=i(5).getLogger("Chart.PriceAxisWidget"),T=i(230).LimitedPrecisionNumericFormatter,C={contextMenuEnabled:!0},
n.prototype._BORDER_SIZE=1,n.prototype._OFFSET_SIZE=1,n.prototype._TICK_LENGTH=3,n.LHS=1,n.RHS=2,n.isLeft=function(t){return t===n.LHS||t!==n.RHS&&(P.logDebug("PriceAxisWidget.isLeft: wrong side"),!1)},n.prototype.destroy=function(){this.actions.reset&&this.actions.reset.setActive(!1),this._mouseEventHandler.destroy()},n.prototype.backgroundColor=function(){return this.pane.chart().properties().paneProperties.background.value()},n.prototype.lineColor=function(){return this._properties.lineColor.value()},n.prototype.textColor=function(){return this._properties.textColor.value()},n.prototype.fontSize=function(){return this._properties.fontSize.value()},n.prototype.baseFont=function(){return S(this.fontSize(),"Arial","")},n.prototype.rendererOptions=function(){var t,e,i;return this._rendererOptions||(this._rendererOptions={isLeft:this._isLeft,width:0,height:0,borderSize:this._BORDER_SIZE,offsetSize:this._OFFSET_SIZE,tickLength:this._TICK_LENGTH,fontSize:NaN,font:"",widthCache:new s,_tickmarksCache:new u(11,"Arial","","#000"),color:""}),t=this._rendererOptions,e=!1,t.color!==this.textColor()&&(t.color=this.textColor(),e=!0),t.fontSize!==this.fontSize()&&(i=this.fontSize(),t.fontSize=i,t.font=S(this.fontSize(),"'Trebuchet MS', Tahoma, Arial, sans-serif",""),t.paddingTop=Math.floor(i/3.5),t.paddingBottom=t.paddingTop,t.paddingInner=Math.max(Math.ceil(i/3-t.tickLength/2),0),t.paddingOuter=Math.ceil(i/3),t.baselineOffset=Math.round(i/5),t.widthCache.reset(),e=!0),e&&t._tickmarksCache.reset(t.fontSize,"Arial","",t.color),this.size&&(t.width=this.size.w,t.height=this.size.h),this._rendererOptions},n.prototype.mouseDownEvent=function(t){var i,n;!this.priceScale().isEmpty()&&e.enabled("chart_zoom")&&(i=this.pane.chart().model(),n=this.pane.state(),this._mousedown=!0,this.setCursor("ns-resize"),i.startScalePrice(n,this.priceScale(),t.localY))},n.prototype.pressedMouseMoveEvent=function(t){var e=this.pane.chart().model(),i=this.pane.state(),n=this.priceScale();e.scalePriceTo(i,n,t.localY)},n.prototype.mouseDownOutsideEvent=function(t){var e,i=this.pane.chart().model(),n=this.pane.state();n&&(e=this.priceScale(),this._mousedown&&(this._mousedown=!1,i.endScalePrice(n,e),this.restoreDefaultCursor()))},n.prototype.mouseUpEvent=function(t){var e=this.pane.chart().model(),i=this.pane.state(),n=this.priceScale();this._mousedown=!1,e.endScalePrice(i,n),this.restoreDefaultCursor()},n.prototype._initActions=function(t){var e,i,o,r,s,a,c,h;this.pane.state()&&(this.actions={},i=this,this.actions.reset=new l({text:$.t("Reset Scale"),shortcut:"Alt+R",statName:"ResetScale"}),this.actions.reset.callbacks().subscribe(this,n.prototype.reset),this.priceScale().mainSource()instanceof TradingView.Series&&(o=function(){e={lockScale:this.value()},this._undoModel.setPriceScaleMode(e,i.priceScale(),this._undoText)},r=x(this.priceScale(),this.pane.chart().model().model().mainSeriesScaleRatio()),this.actions.setLockScale=new l({text:$.t("Lock Scale")+" "+r,checkable:!0,checked:this.priceScale().isLockScale(),statName:"ToggleLockScale"}),
this._lockScaleBinding=new w(this.actions.setLockScale,this.priceScale().properties().lockScale,this.pane.chart().model(),"Lock Scale",o),this._lockScaleBinding.setValue(this.priceScale().isLockScale())),s=function(){e={autoScale:this.value()},this._undoModel.setPriceScaleMode(e,i.priceScale(),this._undoText)},this.actions.setAutoScale=new l({text:$.t("Auto Scale"),checkable:!0,checked:!0,statName:"ToggleAutoScale"}),this._autoScaleBinding=new w(this.actions.setAutoScale,this.priceScale().properties().autoScale,this.pane.chart().model(),"Undo AutoScale",s),this._autoScaleBinding.setValue(this._autoScaleBinding.property().value()),a=function(){e={percentage:this.value()},this._undoModel.setPriceScaleMode(e,i.priceScale(),this._undoText)},this.actions.setPercentage=new l({text:$.t("Percentage",{context:"scale_menu"}),checkable:!0,checked:!1,statName:"TogglePercantage"}),this.actions.setPercentage.binding=new w(this.actions.setPercentage,this.priceScale().properties().percentage,this.pane.chart().model(),"Undo Percentage",a),c=function(){e={indexedTo100:this.value()},this._undoModel.setPriceScaleMode(e,i.priceScale(),this._undoText)},this.actions.setIndexedTo100=new l({text:$.t("Indexed to 100",{context:"scale_menu"}),checkable:!0,checked:!1,statName:"ToggleIndexedTo100"}),this.actions.setIndexedTo100.binding=new w(this.actions.setIndexedTo100,this.priceScale().properties().indexedTo100,this.pane.chart().model(),"Undo Indexed to 100",c),h=function(){e={log:this.value()},this._undoModel.setPriceScaleMode(e,i.priceScale(),this._undoText)},this.actions.setLog=new l({text:$.t("Log Scale",{context:"scale_menu"}),checkable:!0,checked:!1,statName:"ToggleLogScale"}),this.actions.setLog.binding=new w(this.actions.setLog,this.priceScale().properties().log,this.pane.chart().model(),"Undo Log Scale",h),this.actions.alignLabels=new l({text:$.t("No Overlapping Labels",{context:"scale_menu"}),checkable:!0,checked:!1,statName:"TogglePreciseLabels"}),this.actions.alignLabels.binding=new w(this.actions.alignLabels,this.priceScale().properties().alignLabels,this.pane.chart().model(),"No Overlapping Labels"),this._updateScalesActions())},n.prototype._updateScalesActions=function(){var t=this.priceScale(),e=t.mainSource()instanceof TradingView.Series,i=t.mainSource().properties();this.actions.setPercentage.setEnabled(!(t.isLog()||e&&t.isLockScale()||e&&i.style.value()===TradingView.Series.STYLE_PNF)),this.actions.setIndexedTo100.setEnabled(!(t.isLog()||e&&t.isLockScale()||e&&i.style.value()===TradingView.Series.STYLE_PNF)),this.actions.setLog.setEnabled(!(t.isPercentage()||t.isIndexedTo100()||e&&t.isLockScale()||e&&i.style.value()===TradingView.Series.STYLE_PNF)),this.actions.setAutoScale.setChecked(t.properties().autoScale.value()),this.actions.setAutoScale.setEnabled(!t.properties().autoScaleDisabled.value())},n.prototype.mouseClickEvent=function(t){},n.prototype.mouseDoubleClickEvent=function(t){this.reset(),b("GUI","Double click price scale")},n.prototype.contextMenuEvent=function(t,e){
this._options.contextMenuEnabled&&this._createContextMenu().show(t)},n.prototype._createContextMenu=function(){return h.createMenu(this.getContextMenuActions(),{statName:"PriceScaleContextMenu"})},n.prototype.getContextMenuActions=function(){var t,i;return this._initActions(),t=this.pane.chart().actions(),i=[],i.push(this.actions.reset,new c,t.showLeftAxis,t.showRightAxis,new c,this.actions.setAutoScale),this.actions.setLockScale&&i.push(this.actions.setLockScale),i.push(t.scaleSeriesOnly,new c,this.actions.setPercentage,this.actions.setIndexedTo100,this.actions.setLog,new c),e.enabled("fundamental_widget")||(i.push(t.showSymbolLabelsAction,t.showSeriesLastValue),i.push(t.showSeriesPrevCloseValue)),i.push(t.showStudyPlotNamesAction,t.showStudyLastValue),e.enabled("countdown")&&i.push(t.showCountdown),i.push(this.actions.alignLabels),!TradingView.onWidget()&&e.enabled("show_chart_property_page")&&e.enabled("chart_property_page_scales")&&t.scalesProperties&&i.push(new c,t.scalesProperties),i},n.prototype.backLabels=function(t){var e,i,n,o,r,s=[],a=this.priceScale().orderedSources().slice(),l=this.pane,c=l.chart().model(),h=l.state(),u=[],d=c.sourceBeingMoved()||c.lineBeingEdited()||c.lineBeingCreated();if(d&&u.push(d),c.selectedSource()&&u.push(c.selectedSource()),c.hoveredSource()&&u.push(c.hoveredSource()),this.priceScale()===h.defaultPriceScale())for(e=this.pane.state().dataSources(),i=0;i<e.length;i++)h.isOverlay(e[i])&&a.push(e[i]);for(i=0;i<a.length;++i)if(n=a[i],(t||-1===u.indexOf(n))&&(o=n.priceAxisViews(h,n.priceScale())))for(r=0;r<o.length;r++)s.push(o[r]);return s},n.prototype.optimalWidth=function(){var t,e,i,n,o,r,s;if(!this.isVisible())return 0;if(t=0,e=this.rendererOptions(),this.pane.state())for(i=this.ctx,n=this.priceScale().marks(),i.setFont(this.baseFont()),n.length>0&&(t=Math.max(e.widthCache.measureText(i,n[0].label),e.widthCache.measureText(i,n[n.length-1].label))),o=this.backLabels(!0),r=o.length;r--;)(s=e.widthCache.measureText(i,o[r].text()))>t&&(t=s);return Math.ceil(e.offsetSize+e.borderSize+e.tickLength+e.paddingInner+e.paddingOuter+t)},n.prototype.setSize=function(t){this.size&&this.size.equals(t)||(this.size=t,_(this.canvas,t),_(this.top_canvas,t),this.jqCell.css({width:t.w,"min-width":t.w,height:t.h}))},n.prototype.update=function(){},n.prototype._hightlightBackground=function(t,e,i){var n,o,r,s,a,l,c;if(i){for(n=e[0].price,o=e[0].price,r=1;r<e.length;r++)n=Math.min(n,e[r].price),o=Math.max(o,e[r].price);s=i.firstValue(),a=this.priceScale().priceToCoordinate(n,s),l=this.priceScale().priceToCoordinate(o,s),c="rgba(109, 158, 235, 0.3)",m(t,1,a,this.size.w-1,l-a,c)}},n.prototype.drawBackground=function(t){var e,i,n,o;if(m(t,0,0,this.size.w,this.size.h,this.backgroundColor()),e=this.pane.chart().model(),(i=e.model().selectedSource())&&i.priceScale()===this.priceScale()&&i instanceof r){if(n=i.axisPoints(),0===n.length)return;this._hightlightBackground(t,n,i.ownerSource())}o=e.model().crossHairSource(),
o.startMeasurePoint()&&this._hightlightBackground(t,o.measurePoints(),this.pane.state().mainDataSource())},n.prototype.drawBorder=function(t){var e,i,n;t.save(),t.fillStyle=this.lineColor(),e=this.size.h,this._isLeft?(t.translate(-.5,-.5),i=this.size.w-this._BORDER_SIZE-1,n=this.size.w-1):(t.translate(.5,-.5),i=0,n=i+this._BORDER_SIZE),t.fillRect(i,0,n-i,e),t.restore()},n.prototype.drawTickMarks=function(t){var e,i,n,o,r,s;if(t.save(),t.strokeStyle=this.lineColor(),e=this.priceScale().marks(),t.fillStyle=this.textColor(),t.setFont(this.baseFont()),i=this,t.translate(-.5,-.5),n=this.rendererOptions(),i._isLeft){for(t.fillStyle=i.lineColor(),t.beginPath(),o=this.size.w-i._OFFSET_SIZE-i._BORDER_SIZE-i._TICK_LENGTH,r=e.length;r--;)t.rect(o,e[r].coord,i._TICK_LENGTH,1);for(t.fill(),r=e.length;r--;)n._tickmarksCache.paintTo(t,e[r].label,o-n.paddingInner,e[r].coord,"right")}else{for(t.fillStyle=i.lineColor(),t.beginPath(),s=i._BORDER_SIZE+i._OFFSET_SIZE,r=e.length;r--;)t.rect(s,e[r].coord,i._TICK_LENGTH,1);for(t.fill(),r=e.length;r--;)n._tickmarksCache.paintTo(t,e[r].label,s+i._TICK_LENGTH+n.paddingInner,e[r].coord,"left")}t.restore()},n.prototype._alignLabels=function(){var t,e,i,n,o,r,s,a,l,c,h,u,d,p,_,f=this.size.h/2,m=[],g=this.priceScale().orderedSources().slice(),y=this.pane,v=y.state(),b=this.rendererOptions();if(this.priceScale()===v.defaultPriceScale())for(t=this.pane.state().dataSources(),e=0;e<t.length;e++)v.isOverlay(t[e])&&g.push(t[e]);for(i=this.priceScale().mainSource(),e=0;e<g.length;++e)if(n=g[e],o=n.priceAxisViews(v,n.priceScale())){for(r=0;r<o.length;r++)s=o[r],s.isVisible()&&m.push(s);i===n&&o.length>0&&(f=o[0].floatCoordinate())}for(a=m.filter(function(t){return t.floatCoordinate()<=f}),l=m.filter(function(t){return t.floatCoordinate()>f}),a.sort(function(t,e){return e.floatCoordinate()-t.floatCoordinate()}),a.length&&l.length&&l.push(a[0]),l.sort(function(t,e){return t.floatCoordinate()-e.floatCoordinate()}),c=m.length,e=0;e<c;e++)s=m[e],s.setFixedCoordinate(s.coordinate());if(h=this.priceScale().properties(),h.alignLabels&&h.alignLabels.value()){for(e=1;e<a.length;e++)s=a[e],u=a[e-1],d=u.height(b,!1),p=s.coordinate(),_=u.getFixedCoordinate(),(p||_)&&p>_-d&&s.setFixedCoordinate(_-d);for(r=1;r<l.length;r++)s=l[r],u=l[r-1],d=u.height(b,!0),p=s.coordinate(),_=u.getFixedCoordinate(),(p||_)&&p<_+d&&s.setFixedCoordinate(_+d)}},n.prototype.drawBackLabels=function(t){var e,i,n,o;for(t.save(),e=this.backLabels(),i=this.rendererOptions(),n=0;n<e.length;n++)o=e[n],o.renderer().draw(t,i);t.restore()},n.prototype.drawCrossHairLabel=function(t){var e,i,n,o,r,s,a=this.pane.chart().model().model(),l=[],c=a.sourceBeingMoved()||a.lineBeingEdited()||a.lineBeingCreated();for(c&&l.push({source:c,scale:c.priceScale()}),a.selectedSource()&&l.push({source:a.selectedSource(),scale:a.selectedSource().priceScale()}),a.hoveredSource()&&l.push({source:a.hoveredSource(),scale:a.hoveredSource().priceScale()}),l.push({source:a.crossHairSource(),scale:this.priceScale()}),e=this.pane.state(),i=0;i<l.length;i++)if(n=l[i],
o=n.source.priceAxisViews(e,n.scale))for(r=0;r<o.length;r++)s=o[r],t.save(),s.renderer().draw(t,this.rendererOptions()),t.restore()},n.prototype.priceScale=function(){var t=this.pane.state(),e=[];return e=this._isLeft?[t.leftPriceScale(),t.rightPriceScale()]:[t.rightPriceScale(),t.leftPriceScale()],null===e[0].mainSource()?null===e[1].mainSource()?e[0]:e[1]:e[0]},n.prototype.isVisible=function(){return this._isVisible},n.prototype.setVisible=function(t){(t=!!t)!==this._isVisible&&(t?this.jqCell.css("display","table-cell"):this.jqCell.css("display","none"),this._isVisible=t)},n.prototype.setAutoScale=function(t){var e=this.pane.state,i=this.priceScale();this.pane.chart().model().setPriceAutoScale(e,i,t)},n.prototype.reset=function(){var t=this.pane.state(),e=this.priceScale();this.pane.chart().model().resetPriceScale(t,e)},n.prototype.hardResetCanvas=function(){this.size&&(f(this.canvas,this.size),f(this.top_canvas,this.size))},n.prototype.paint=function(t){this._isVisible&&t&&(t===d.UPDATE_CURSOR_ONLY?(this.top_ctx.clearRect(-.5,-.5,this.size.w,this.size.h),this.drawCrossHairLabel(this.top_ctx)):(this._alignLabels(),this.drawBackground(this.ctx),this.drawBorder(this.ctx),this.pane.state()&&(this.drawTickMarks(this.ctx),this.drawBackLabels(this.ctx),this.top_ctx.clearRect(-.5,-.5,this.size.w,this.size.h),this.drawCrossHairLabel(this.top_ctx))))},n.prototype.restoreDefaultCursor=function(){this.setCursor("")},n.prototype.setCursor=function(t){var e="";"grabbing"!==t&&"ns-resize"!==t||(e="price-axis--cursor-"+t),this._currentCursorClassName!==e&&(this._currentCursorClassName&&this.jqCell.removeClass(this._currentCursorClassName),e&&this.jqCell.addClass(e),this._currentCursorClassName=e,this.jqCell.css("cursor"))},n.prototype.image=function(){var t={};return t.content=this.canvas.toDataURL(),t.contentWidth=this.size.w,t.contentHeight=this.size.h,t},n.prototype.onMarksChanged=function(){var t,e=this.optimalWidth();this._prevOptimalWidth<e&&(t=this,this.updateTimeout||(this.updateTimeout=setTimeout(function(){t.pane&&t.pane.chart&&t.pane.chart()&&t.pane.chart().model().model().fullUpdate(),t.updateTimeout=null},100))),this._prevOptimalWidth=e},x=o(7),t.exports={PriceAxisWidget:n,scaleRatioForContextMenuTransformer:o}}).call(e,i(4))},,function(t,e,i){"use strict";(function(t){function n(e,i,n){var o,r,s,a,l,c,h=this;if(this._options=$.extend({},this._defaultOptions,n||{}),this._$wrapper=e,this._$content=i,this._scroll_speed=40,this._shadow_offset=10,this._header_height=this._options.headerHeight,this._scroll_margin_top=this._options.scrollMarginTop,this.scrolled=new t,this.scrolltoend=new t,this.scrolltostart=new t,this.visibilityCallbacks=[],o=navigator.platform.toLowerCase(),r=navigator.userAgent.toLowerCase(),s=r.indexOf("firefox")>-1,a=o.indexOf("android")>-1||r.indexOf("android")>-1,this._touch=Modernizr.touch||navigator.msMaxTouchPoints||s&&a,this._touch)return this._$content.css("position","relative"),void this._$wrapper.css({"overflow-y":"auto","-webkit-overflow-scrolling":"touch",
"-ms-overflow-style":"-ms-autohiding-scrollbar"}).scroll(this._onScroll.bind(this));this._$wrapper.css("overflow","hidden"),this._$wrapper.on("mouseenter.sidebar-scroll",function(){h._bottomFixed||h._dragging||(h._options.alwaysVisible||h._$scrollBar.addClass("active"),h._onScroll())}).on("mouseleave.sidebar-scroll",function(){h._bottomFixed||h._dragging||(h._options.alwaysVisible||h._$scrollBar.removeClass("active"),h._onScroll())}).on("mousewheel.sidebar-scroll",function(t,e){if(!t.isDefaultPrevented())return h.scroll(e,"MozMousePixelScroll"===t.originalEvent.type?2:null)}),!1!==this._options.showTopShadow&&(this._$shadowTop=$('<div class="sb-inner-shadow top i-invisible">').appendTo(this._$wrapper)),!1!==this._options.showBottomShadow&&(this._$shadowBottom=$('<div class="sb-inner-shadow">').appendTo(this._$wrapper)),this._$shadowTop&&this._header_height&&this._$shadowTop.css("top",this._header_height-this._shadow_offset),l=this._options.additionalClass?" "+this._options.additionalClass:"",c=this._options.alwaysVisible?" active-always":"",this._$scrollBarWrapper=$('<div class="sb-scrollbar-wrap">').appendTo(this._$wrapper),this._$scrollBar=$('<div class="sb-scrollbar sb-scrollbar-body'+l+c+'"></div>').appendTo(this._$scrollBarWrapper),this._onScroll()}var o=i(219).lazyJqueryUI;n.prototype.isTouch=function(){return this._touch},n.prototype.getScrollBar=function(){return this._$scrollBar},n.prototype._defaultOptions={headerHeight:0,additionalClass:"",alwaysVisible:!1,showBottomShadow:!0,scrollMarginTop:1,bubbleScrollEvent:!1},n.prototype.initDraggable=function(){if(this._dragInitialized)return this;var t=this;return o(this._$scrollBar).draggable({axis:"y",containment:this._$scrollBarWrapper,start:function(){t._dragging=!0},stop:function(){t._dragging=!1},drag:function(e,i){t.updateScroll()}}),this._dragInitialized=!0,this},n.prototype.updateScroll=function(){var t,e,i,n,o;return this._touch?this:(t=1,e=Math.ceil(this._$scrollBar.position().top-this._scroll_margin_top-this._header_height),i=this.getContainerHeightWithoutHeader(),n=this._$content.outerHeight(),o=n-i-t,i<=0?this:(this._scroll_target_top=o<=0?this._header_height:Math.min(-e*n/i+this._header_height,this._header_height),e+this._$scrollBar.height()+2>=i?this.scrollToEnd():(this._$content.css("top",this._scroll_target_top+"px"),this._onScroll()),this))},n.prototype.getContainerHeightWithoutHeader=function(){return this._$wrapper[0].getBoundingClientRect().height-this._header_height},n.prototype.getContainerHeight=function(){return this._$wrapper[0].getBoundingClientRect().height},n.prototype.getContentHeight=function(){return this._$content[0].getBoundingClientRect().height},n.prototype.updateScrollBar=function(){var t,e,i,n,o,r,s,a,l;return this._touch?this:(t=1,e=this._$content.position().top,i=this.getContentHeight(),n=this.getContainerHeight(),o=this.getContainerHeightWithoutHeader(),r=t+this._header_height,s=o-2*t,a=(Math.abs(e)-this._header_height)*s/i,l=n*n/i,this.isContentShort()?(this._$scrollBar.addClass("js-hidden"),
this._$wrapper.removeClass("sb-scroll-active")):(this._$scrollBar.removeClass("js-hidden").height(l).css("top",r+a),this._$wrapper.addClass("sb-scroll-active"),this.initDraggable()),this)},n.prototype.scroll=function(t,e){var i,n,o,r,s;return this._touch?this:(i=this._$content.position().top,n=this._$content.outerHeight(),o=this.getContainerHeightWithoutHeader(),r=n-o-1,s=e||this._scroll_speed,r<=0||(this._scroll_target_top=Math.max(-r+this._header_height,Math.min(this._header_height,i+t*s)),this.setContentTop(this._scroll_target_top),this._onScroll()))},n.prototype.animateTo=function(t){var e,i,n;return this._touch?this:(e=this._$content.outerHeight(),i=this.getContainerHeightWithoutHeader(),(n=e-i-1)<=0||(this._scroll_target_top=Math.max(-n+this._header_height,Math.min(this._header_height,-t)),void this._$content.animate({top:this._scroll_target_top},500,function(){this._onScroll()}.bind(this))))},n.prototype.resize=function(){var t,e;if(!this._bottomFixed){if(t=this._$content.outerHeight(),e=this._$wrapper.outerHeight(),!this._options.vAlignBottom&&t<e)return void(this.atStart()||this.scrollToStart());this.atEnd()?this.scrollToEnd():"number"==typeof this._stickyBottom&&this.setContentTop(Math.min(0,this._stickyBottom+this._$wrapper.outerHeight()-this._$content.outerHeight()))}},n.prototype.resizeHeader=function(t){var e=t-this._header_height;this._header_height=t,this._scroll_target_top+=e,this._$shadowTop&&this._$shadowTop.css("top",this._header_height-this._shadow_offset),this.resize()},n.prototype.scrollTo=function(t,e){var i,n,o,r,s,a;if(e=$.extend({position:"visible",areaHeight:t instanceof $?t.height():0},e),t instanceof $&&(t=e.offsetTop||t.position().top),i=this._$content.position().top,n=this._$content.outerHeight(),o=this.getContainerHeightWithoutHeader(),n-o-1<=0)return!0;if(r=-1*(i-this._header_height),s=r+o,a=0,"visible"===e.position){if(t>r&&t+e.areaHeight<s)return!1;a=t+e.areaHeight>s?s-t-e.areaHeight:r-t}else"top"===e.position&&(a=r-t);return this.scroll(a,1),this._onScroll(),!1},n.prototype.scrollToEnd=function(){var t=this._$content.position().top,e=this._$content.outerHeight(),i=this._$wrapper.outerHeight(),n=e+t;return this.setContentTop(t+(i-n)+1),this._onScroll(),this},n.prototype.scrollToStart=function(){return this.setContentTop(this._header_height),this._onScroll(),this},n.prototype.currentPosition=function(){return Math.round(this._$content.position().top)},n.prototype.atStart=function(){return Math.round(this._$content.position().top)>=this._header_height},n.prototype.atEnd=function(t){var e,i,n,o;return"number"==typeof t&&isFinite(t)||(t=0),e=1,i=Math.round(this._$content.position().top),n=this._$content.outerHeight(),o=this._$wrapper.outerHeight(),n-Math.abs(i)-e<=o+t},n.prototype._onScroll=function(t){var e,i;return this._touch||this._$content.css("bottom","auto"),this.scrolled.fire(),this._dragging&&!0!==t||this.updateScrollBar(),e=this.atStart(),i=this.atEnd(),this._$shadowTop&&this._$shadowTop.toggleClass("i-invisible",!!e),
this._$shadowBottom&&this._$shadowBottom.toggleClass("i-invisible",!!i),this._onContentVisible(),!this._atStart&&e?(this._atStart=!0,this.scrolltostart.fire()):this._atStart&&!e&&delete this._atStart,!this._atEnd&&i?(this._atEnd=!0,this.scrolltoend.fire()):this._atEnd&&!i&&delete this._atEnd,this._options.vAlignBottom&&(this._stickyBottom=this._$content.outerHeight()-Math.abs(this._$content.position().top)-this._$wrapper.outerHeight()),!(!this._atStart&&!this._atEnd||("function"==typeof this._options.bubbleScrollEvent?!this._options.bubbleScrollEvent():!this._options.bubbleScrollEvent))},n.prototype.checkContentVisibility=function(){this._onContentVisible()},n.prototype.subscribeToContentVisible=function(t,e,i){this.visibilityCallbacks.push({id:t,$el:e,callback:i})},n.prototype.triggerVisibilityCallbacks=function(t){this._onContentVisible(t)},n.prototype._contentIsVisible=function(t){return t.$el.position().top>-1*this.currentPosition()},n.prototype._onContentVisible=function(t){var e,i,n;this.visibilityCallbacks.length&&(e=t||this._contentIsVisible.bind(this),i=[],n=this.visibilityCallbacks.filter(function(t,n){if(!$.contains(this._$content,t.$el[0]))return!1;var o=e(t);return o&&i.push(n),!o},this),i.forEach(function(e){this.visibilityCallbacks[e].callback(!!t)},this),delete this.visibilityCallbacks,this.visibilityCallbacks=n)},n.prototype.save=function(){return this._saved={top:this._$content.position().top,height:this._$content.outerHeight()},this},n.prototype.restore=function(){if(this._saved){if(this._saved.top===this._$content.position().top&&this._saved.height===this._$content.outerHeight())return delete this._saved,this;this._options.vAlignBottom&&(this._saved.top-=this._$content.outerHeight()-this._saved.height,this._saved.top>this._header_height&&(this._saved.top=this._header_height)),this.setContentTop(this._saved.top),delete this._saved,this._onScroll(!0)}return this},n.prototype.fixBottom=function(){var t,e;return this._bottomFixed?this:(this._touch?(t=this._$content.outerHeight(),e=this._$wrapper.scrollTop(),this._tempIntervalID=setInterval(function(){this._$wrapper.scrollTop(e+(this._$content.outerHeight()-t))}.bind(this),0)):this._$content.css({top:"auto",bottom:this._$wrapper.outerHeight()-this._$content.position().top-this._$content.outerHeight()}),this._bottomFixed=!0,this)},n.prototype.releaseBottom=function(){return this._bottomFixed?(this._touch?clearInterval(this._tempIntervalID):this._$content.css({top:this._$content.position().top,bottom:"auto"}),delete this._bottomFixed,this._onScroll(),this):this},n.prototype.setContentTop=function(t){return this._touch?this._options.vAlignBottom&&this._$content.outerHeight()<this._$wrapper.outerHeight()?(this._$wrapper.css("overflow-y","visible"),this._$content.css({position:"absolute",bottom:0})):(this._$content.css({position:"relative",bottom:"auto"}),this._$wrapper.css("overflow-y","auto"),this._$wrapper.scrollTop(-t)):this._$content.css("top",t),this},n.prototype.isContentShort=function(){
return this.getContentHeight()<=this.getContainerHeightWithoutHeader()},n.prototype.destroy=function(){this._$scrollBarWrapper.remove(),this._$shadowBottom&&this._$shadowBottom.remove(),this._$shadowTop&&this._$shadowTop.remove(),this._$wrapper.attr("style","").off("mouseenter.sidebar-scroll").off("mouseleave.sidebar-scroll").off("mousewheel.sidebar-scroll"),this._$content.attr("style","")},e.SidebarCustomScroll=n}).call(e,i(8))},function(t,e,i){"use strict";var n,o=i(151).ESC,r=function(t,e,n){var s,a,l,c,h,u,d=".popup-menu";t=$(t),n=n||{},n.activeClass=n.activeClass||"",s=(n.event||"click")+d,n.hideEvent&&(a=n.hideEvent+d),l=function(){},c=l,h={},u=function(s,u,p){function _(e){var i=$(e.target).parents().andSelf();i.is(v)||i.is(t)||i.is(".charts-popup-tab-headers, .charts-popup-itemheader")||c()}function f(t){if(h.preventFirstProcessClick)return void(h.preventFirstProcessClick=!1);var e=$(t.target).parents().andSelf();e.is(".charts-popup-tab-headers, .charts-popup-itemheader")||n.notCloseOnButtons&&e.is(".icon-delete")||c()}function m(t){t.keyCode===o&&c()}function g(e,o,s){var a,l,c,h,u,d,p,_,f,m,y,b,S,w,P,T;if(e instanceof r.TabGroup){if(!e.tabs||!e.tabs.length)return;return 1!==e.tabs.length||e.tabs[0].title?(a=$('<div class="charts-popup-tab-group"></div>').appendTo(s),l=$('<div class="charts-popup-tab-headers"></div>').appendTo(a),c=null,void $.each(e.tabs||[],function(t,i){var n,o;i.items&&i.items.length&&(n=$('<div class="charts-popup-tab"></div>').hide().appendTo(a),$.each(i.items,function(){g(this,void 0,n)}),o=$('<span class="charts-popup-tab-header">').append($('<a href="javascript://" class="charts-popup-tab-header-label">').text(i.name)).appendTo(l),o.on("click",function(t){o.is(".active")||(l.find(".charts-popup-tab-header.active").removeClass("active"),o.addClass("active"),a.find(".charts-popup-tab").hide(),n.show(),t&&t.preventDefault(),"function"==typeof e.onChange&&e.onChange.call(e,i.name))}),c&&!i.active||(c=o,l.find(".charts-popup-tab-header.active").removeClass("active"),o.addClass("active"),a.find(".charts-popup-tab").hide(),n.show()))})):void $.each(e.tabs[0].items,function(){g(this,void 0,s)})}return e instanceof r.Group?(h=$('<div class="charts-popup-group"></div>').appendTo(s),e.title&&(u=$('<div class="charts-popup-itemheader"></div>').text(e.title).prepend($('<span class="charts-popup-itemheader-icon"></span>')),e.collapsible&&(h.addClass("charts-popup-group-collapsible"),h.toggleClass("collapsed",e.collapsed),u.on("click",function(){h.toggleClass("collapsed"),"function"==typeof e.onChange&&e.onChange(h.hasClass("collapsed")),v.height()===parseInt(v.css("max-height"))?v.addClass("popup-menu-scroll-y"):v.height()<parseInt(v.css("max-height"))&&v.removeClass("popup-menu-scroll-y")})),h.append(u)),void $.each(e.items,function(t){g(this,1,h)})):e instanceof r.Header?void s.append($('<div class="charts-popup-itemheader"></div>').text(e.title)):e.separator?(d=$('<span class="separator"></span>'),void s.append(d)):(d=$('<a class="item">'),e.url&&d.attr("href",e.url),
e.target&&d.attr("target",e.target),o||d.addClass("first"),"function"==typeof e.active?e.active(e)&&d.addClass("active"):e.active&&d.addClass("active"),e.addClass&&d.addClass(e.addClass),e.addData&&d.data(e.addData),e.disabled&&d.addClass("disabled"),"function"==typeof e.action&&(p=e.action,_=function(t){$(t.target).parents().andSelf().is(w)||(p.apply(d,arguments),!e.url&&t&&"function"==typeof t.preventDefault&&t.preventDefault())},n.upAction?d.bind("mouseup",_):d.bind("click",_)),e.date?(f=$('<span class="title"></span>').appendTo(d),$('<span class="date"></span>').text(e.date||"").appendTo(d)):e.icon&&!n.svg?(m=$('<span class="icon"></span>').appendTo(d),m.css("background-image",e.icon.image||""),e.icon.offset&&m.css("background-position","string"==typeof e.icon.offset?e.icon.offset:e.icon.offset.x+"px "+e.icon.offset.y+"px"),f=$('<span class="title"></span>').appendTo(d)):!0===n.svg&&e.svg?(n.wrapIcon?d.append($('<span class="icon-wrap">').addClass(e.iconClass).append(e.svg)):d.append(e.svg),f=$('<span class="title"></span>').appendTo(d)):e.iconClass?(d.append($('<span class="icon"></span>').addClass(e.iconClass)),f=$('<span class="title"></span>').appendTo(d)):f=$('<span class="title-expanded"></span>').appendTo(d),e.html?f.html(e.html):f.text(TradingView.clean(e.title,!0)||""),y=$('<span class="shortcut"></span>').appendTo(d),e.shortcut&&y.text(e.shortcut.keys),"function"==typeof e.deleteAction&&(b=e.deleteAction,S=e.deleteAction.title||$.t("Delete"),w=$('<span class="icon-delete">'),w.html(i(226)),w.attr("title",S),w.on("click",function(t){b.apply(d,arguments),t.preventDefault()}),d.append(w)),e.buttons instanceof Array&&e.buttons.length&&e.buttons.forEach(function(t){t.el instanceof $||(t.el=$(t.el)),t.el.appendTo(d),t.handler&&t.el.on("click",function(e){t.handler.apply(d,arguments)})}),void 0!==e.counter&&("function"==typeof e.counter?(P=$('<span class="counter"></span>').html(e.counter()),P.appendTo(d)):(T=e.counterBlue?"blue":"",$('<span class="counter"></span>').text(e.counter+"").addClass(T).appendTo(d))),s.append(d),void t.data("popup-menu",s))}var y,v,b,S,w,P,T,C,x,k,L,I,A,E,M,O,D,V,R,B,F,N,W,j,H,U,z=s.target.ownerDocument,q=z.defaultView,Y=u||e;if("function"==typeof Y&&(Y=Y()),$(this).hasClass("open")||$(this).hasClass("active"))return s.preventDefault(),c(),void(y=h.scrollTop);switch(c=function(){h.scrollTop=v.scrollTop(),v.remove(),t.removeClass("active open "+n.activeClass),t.data("popup-menu",null),$(z).off("click",f),$(z).off("mousedown",_),Modernizr.touch&&$(z).off("touchstart.chartgui",_),$(z).off("selectstart."+d),z.removeEventListener("keydown",m,!1),c=l,n.onRemove&&n.onRemove()},t.addClass("active open "+n.activeClass),v=$('<div class="charts-popup-list">'),n.addClass&&v.addClass(n.addClass),n.zIndex&&v.css("z-index",n.zIndex),b=v,n.listInner&&(b=$('<div class="list-inner">').appendTo(b)),n.listTable&&(b=$('<div class="list-table">').appendTo(b)),$.each(Y,function(t){g(this,t,b)}),a||(h.preventFirstProcessClick=!0),$(z).on("click",f),$(z).on("mousedown",_),z.addEventListener("keydown",m,!1),
Modernizr.touch&&$(z).on("touchstart.chartgui",_),n.upAction&&$(z).on("selectstart.popup-menu",function(){return!1}),v.appendTo(z.body),S=$(q).width(),w=Math.min($(q).height(),$("body").height()),P=t.outerWidth(),T=t.outerHeight(),C=t.offset(),y=$(q).scrollTop()||0,C.top-=y,C.top=Math.round(C.top),C.left=Math.round(C.left),x=v.outerWidth(),k=v.outerHeight(),L=void 0!==n.viewportSpacing?n.viewportSpacing:10,I=n.popupSpacing?~~n.popupSpacing:1,A=n.popupDrift?~~n.popupDrift:0,E=k-v.height(),M="down",n.direction&&(M="function"==typeof n.direction?n.direction():n.direction),O=!!n.reverse,"down"===M?(D=w-C.top-T-I-L-E,V=C.top-I-L-E,D<Math.max(k||0,100)&&V>D&&(M="up")):"right"===M&&(R=S-C.left-P-I-L-E,B=C.left-I-L-E,R<Math.max(x||0,100)&&B>R&&(M="left")),M){case"down":case"up":"down"===M?v.css("top",C.top+T+I+"px"):v.css("bottom",w-C.top+I+"px").css("top","auto"),O?v.css("left",Math.max(C.left+A+P-x,L)+"px").css("right","auto"):v.css("left",C.left+A+"px").css("right","auto");break;case"right":case"left":I=Math.max(I,4),"right"===M?v.css("left",Math.floor(C.left+P+I)+"px").css("right","auto"):v.css("left",Math.floor(Math.max(C.left-x-I,L))+"px").css("right","auto"),O?v.css("top",Math.floor(Math.max(C.top+A+T-k,L))+"px"):v.css("top",Math.floor(C.top+A)+"px")}for(v.show(),F=C.top,"up"===M||{left:1,right:1}[M]&&O?"up"!==M?F+=T:F-=T+I+E+L:F=w-F-T-2*I-E,v.height()>F&&v.addClass("popup-menu-scroll-y"),v.css("max-height",F+"px"),n.careRightBorder&&(N=S+$(q).scrollLeft(),parseInt(v.css("left"))+v.width()+L>N&&v.css("left",N-v.width()-L+"px").css("right","auto")),n.careBottomBorder&&parseInt(v.css("top"))+v.height()+L>w+y&&v.css("top",w-v.height()-L+y+"px"),j=t.parents().andSelf(),H=j.size();H--;)if("fixed"===j.eq(H).css("position")){W=j.eq(H);break}W&&(U=v.offset(),v.css({position:"fixed",left:U.left-$(z).scrollLeft(),right:"auto"})),v[0].scrollHeight>v.height()&&v.addClass("popup-with-scroll"),s&&s.preventDefault()},s&&t.bind(s,u),a&&t.bind(a,function(){c()}),n.runOpened&&u()};r.TabGroup=function t(e){if(!(this instanceof t))return new t(e);e=e||{},this.tabs=[],"function"==typeof e.onChange&&(this.onChange=e.onChange)},r.TabGroup.prototype.appendTab=function(t,e,i){if(null==t?t="":t+="",e||(e=[]),i||(i={}),!Array.isArray(e))throw new TypeError("items must be an array");return this.tabs.push({name:t,items:e,active:!!i.active}),e},r.Header=function t(e){if(!(this instanceof t))return new t(e);this.title=e},r.Group=function t(e){if(!(this instanceof t))return new t(e);e=e||{},this.items=[],this.title=null==e.title?"":e.title+"",this.collapsible=!!e.collapsible,this.collapsed=!!e.collapsed,"function"==typeof e.onChange&&(this.onChange=e.onChange)},r.Group.prototype.push=function(){this.items.push.apply(this.items,arguments)},e.bindPopupMenu=r,n=function(t){t=$(t),t.unbind(".popup-menu"),t.removeData("popup-menu")},e.unbindPopupMenu=n},function(t,e,i){"use strict";function n(t){this._data=t}function o(t,e){this._data=t,this._model=e,this.radius=this._data.radius||o.OUTER_RADIUS}function r(t){n.call(this,t)}
var s=i(10).HitTestResult,a=i(198).PaneRendererArrowsUpDown;i(81),n.RADIUS=3.5,n.prototype.tolerance=2,n.prototype.draw=function(t){function e(t){return void 0===t.x||TradingView.isNaN(t.x)||null===t.x||void 0===t.y||TradingView.isNaN(t.y)||null===t.y}var i,n,o;if(this._data)for(t.strokeStyle="#6B6B6B",t.fillStyle="#D6D6D6",i=this._data.vertOffset||0,n=0;n<this._data.points.length;n++)o=this._data.points[n],e(o)||this._drawMarker(t,o,i)},n.prototype._drawMarker=function(t,e,i){t.beginPath(),t.arc(e.x+.5,e.y+.5+i,n.RADIUS,0,2*Math.PI,!0),t.closePath(),t.fill(),t.stroke()},n.prototype.hitTest=function(t){var e,i;if(!this._data)return null;for(e=0;e<this._data.points.length;e++)if(i=this._data.points[e],i.subtract(t).length()<=n.RADIUS+this.tolerance)return new s(this._data.hittestResult,i.data);return null},o.OUTER_RADIUS=TradingView.isMobile.any()?16:8,o.prototype.tolerance=2,o.prototype.draw=function(t){var e,i,n,o,r,s,a,l,c,h=this._data.currentPoint,u=this._data.outerStrokeWidth||1;for(e=0;e<this._data.points.length;e++)i=this._data.points[e],n=i.subtract(h).length(),o=TradingView.isInteger(i.data)&&this._data.linePointBeingEdited===i.data,r=this.radius,s=this._data.strokeWidth||2,a=n<=r+this.tolerance,l=a?1:0,r+=l,s+=l,o||(i.square?(t.fillStyle=this._data.backgroundColor,t.fillRect(i.x-r,i.y-r,2*r,2*r),t.fillStyle=this._data.color,c=r-u,t.fillRect(i.x-c,i.y-c,2*c,2*c),c=r-u-s,t.fillStyle=this._data.backgroundColor,t.fillRect(i.x-c,i.y-c,2*c,2*c)):(t.beginPath(),t.arc(i.x,i.y,r,0,2*Math.PI,!0),t.closePath(),t.fillStyle=this._data.backgroundColor,t.fill(),t.beginPath(),t.arc(i.x,i.y,r-u,0,2*Math.PI,!0),t.closePath(),t.fillStyle=this._data.color,t.fill(),t.beginPath(),t.arc(i.x,i.y,r-u-s,0,2*Math.PI,!0),t.closePath(),t.fillStyle=this._data.backgroundColor,t.fill()))},o.prototype.hitTest=function(t){var e,i,n;for(e=0;e<this._data.points.length;e++)if(i=this._data.points[e],n=i.subtract(t).length(),n<=this.radius+this.tolerance)return new s(this._data.hittestResult,i.data);return null},inherit(r,n),r.prototype._drawMarker=function(t,e,i){var o=e.isUp?1:-1,r=a.prototype._calculateVerticalOffset(this._data.barSpacing),s=a.prototype._calculateMinHeight(this._data.barSpacing),l=i+o*r+o*s;t.beginPath(),t.arc(e.x+.5,e.y+.5+l,n.RADIUS,0,2*Math.PI,!0),t.closePath(),t.fill(),t.stroke()},e.SelectionRenderer=n,e.LineAnchor=o,e.SelectionRendererArrowsUpDown=r},function(t,e,i){"use strict";function n(t,e){void 0===e&&(e="&nbsp;");var i=(t+"").split(".");return i[0].replace(/\B(?=(\d{3})+(?!\d))/g,e)+(i[1]?"."+i[1]:"")}Object.defineProperty(e,"__esModule",{value:!0}),e.splitThousands=n},,function(t,e,i){var n;!function(e){"use strict";function o(){}function r(t,e){for(var i=t.length;i--;)if(t[i].listener===e)return i;return-1}function s(t){return function(){return this[t].apply(this,arguments)}}function a(t){return"function"==typeof t||t instanceof RegExp||!(!t||"object"!=typeof t)&&a(t.listener)}var l=o.prototype,c=e.EventEmitter;l.getListeners=function(t){var e,i,n=this._getEvents();if(t instanceof RegExp){e={}
;for(i in n)n.hasOwnProperty(i)&&t.test(i)&&(e[i]=n[i])}else e=n[t]||(n[t]=[]);return e},l.flattenListeners=function(t){var e,i=[];for(e=0;e<t.length;e+=1)i.push(t[e].listener);return i},l.getListenersAsObject=function(t){var e,i=this.getListeners(t);return i instanceof Array&&(e={},e[t]=i),e||i},l.addListener=function(t,e){var i,n,o;if(!a(e))throw new TypeError("listener must be a function");i=this.getListenersAsObject(t),n="object"==typeof e;for(o in i)i.hasOwnProperty(o)&&-1===r(i[o],e)&&i[o].push(n?e:{listener:e,once:!1});return this},l.on=s("addListener"),l.addOnceListener=function(t,e){return this.addListener(t,{listener:e,once:!0})},l.once=s("addOnceListener"),l.defineEvent=function(t){return this.getListeners(t),this},l.defineEvents=function(t){for(var e=0;e<t.length;e+=1)this.defineEvent(t[e]);return this},l.removeListener=function(t,e){var i,n,o=this.getListenersAsObject(t);for(n in o)o.hasOwnProperty(n)&&-1!==(i=r(o[n],e))&&o[n].splice(i,1);return this},l.off=s("removeListener"),l.addListeners=function(t,e){return this.manipulateListeners(!1,t,e)},l.removeListeners=function(t,e){return this.manipulateListeners(!0,t,e)},l.manipulateListeners=function(t,e,i){var n,o,r=t?this.removeListener:this.addListener,s=t?this.removeListeners:this.addListeners;if("object"!=typeof e||e instanceof RegExp)for(n=i.length;n--;)r.call(this,e,i[n]);else for(n in e)e.hasOwnProperty(n)&&(o=e[n])&&("function"==typeof o?r.call(this,n,o):s.call(this,n,o));return this},l.removeEvent=function(t){var e,i=typeof t,n=this._getEvents();if("string"===i)delete n[t];else if(t instanceof RegExp)for(e in n)n.hasOwnProperty(e)&&t.test(e)&&delete n[e];else delete this._events;return this},l.removeAllListeners=s("removeEvent"),l.emitEvent=function(t,e){var i,n,o,r,s=this.getListenersAsObject(t);for(r in s)if(s.hasOwnProperty(r))for(i=s[r].slice(0),o=0;o<i.length;o++)n=i[o],!0===n.once&&this.removeListener(t,n.listener),n.listener.apply(this,e||[])===this._getOnceReturnValue()&&this.removeListener(t,n.listener);return this},l.trigger=s("emitEvent"),l.emit=function(t){var e=Array.prototype.slice.call(arguments,1);return this.emitEvent(t,e)},l.setOnceReturnValue=function(t){return this._onceReturnValue=t,this},l._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},l._getEvents=function(){return this._events||(this._events={})},o.noConflict=function(){return e.EventEmitter=c,o},void 0!==(n=function(){return o}.call(e,i,e,t))&&(t.exports=n)}(this||{})},function(t,e,i){"use strict";function n(t,e,i){function n(t,e,i,n,o,r){var s=0;return t<i?s|=1:t>o&&(s|=2),e<n?s|=4:e>r&&(s|=8),s}for(var o,r,s,a=t[0].x,l=t[0].y,c=t[1].x,h=t[1].y,u=e.x,d=e.y,p=i.x,_=i.y,f=n(a,l,u,d,p,_),g=n(c,h,u,d,p,_),y=!1,v=0;;){if(v>1e3)throw Error("Cohen - Sutherland algorithm: infinity loop");if(v++,!(f|g)){y=!0;break}if(f&g)break;o=f||g,r=void 0,s=void 0,8&o?(r=a+(c-a)*(_-l)/(h-l),s=_):4&o?(r=a+(c-a)*(d-l)/(h-l),s=d):2&o?(s=l+(h-l)*(p-a)/(c-a),r=p):(s=l+(h-l)*(u-a)/(c-a),r=u),o===f?(a=r,l=s,f=n(a,l,u,d,p,_)):(c=r,h=s,
g=n(c,h,u,d,p,_))}return y?m.equalPoints(m.point(a,l),m.point(c,h))?m.point(a,l):m.lineSegment(m.point(a,l),m.point(c,h)):null}function o(t,e){var i,n,o=t.A,r=e.A,s=t.B,a=e.B,l=t.C,c=e.C,h=o*a-r*s;return Math.abs(h)<1e-6?null:(i=(s*c-a*l)/h,n=(r*l-o*c)/h,new m.Point(i,n))}function r(t,e,i,n){var o,r=e.subtract(t),s=n.subtract(i),a=r.x*s.y-r.y*s.x;return Math.abs(a)<1e-6?null:(o=t.subtract(i),(o.y*s.x-o.x*s.y)/a)}function s(t,e,i,n){var o,s,a,l=r(t,e,i,n);return null===l?null:(o=e.subtract(t),s=o.scaled(l).add(t),a=g.distanceToSegment(i,n,s),Math.abs(a.distance)<1e-6?l:null)}function a(t,e){return-(t.C+t.B*e)/t.A}function l(t,e){return-(t.C+t.A*e)/t.B}function c(t,e){var i,n,o;for(i=0,n=t;i<n.length;i++)if(o=n[i],m.equalPoints(o,e))return!1;return t.push(e),!0}function h(t,e,i){var n,o,r,s,h,u=e.x,d=e.y,p=i.x,_=i.y;if(0===t.A)return n=-t.C/t.B,d<=n&&n<=_?m.lineSegment(m.point(u,n),m.point(p,n)):null;if(0===t.B)return o=-t.C/t.A,u<=o&&o<=p?m.lineSegment(m.point(o,d),m.point(o,_)):null;switch(r=[],s=function(e){var i=l(t,e);d<=i&&i<=_&&c(r,new m.Point(e,i))},h=function(e){var i=a(t,e);u<=i&&i<=p&&c(r,new m.Point(i,e))},s(u),h(d),s(p),h(_),r.length){case 0:return null;case 1:return r[0];case 2:return m.equalPoints(r[0],r[1])?r[0]:m.lineSegment(r[0],r[1])}return f.assert(!1,"We should have at most two intersection points"),null}function u(t,e,i,n){var o,r=s(t,e,i,new m.Point(n.x,i.y)),a=s(t,e,new m.Point(n.x,i.y),n),l=s(t,e,n,new m.Point(i.x,n.y)),c=s(t,e,new m.Point(i.x,n.y),i),h=[];return null!==r&&r>=0&&h.push(r),null!==a&&a>=0&&h.push(a),null!==l&&l>=0&&h.push(l),null!==c&&c>=0&&h.push(c),0===h.length?null:(h.sort(function(t,e){return t-e}),o=y.pointInRectangle(t,i,n)?h[0]:h[h.length-1],t.addScaled(e.subtract(t),o))}function d(t,e){return!(t.length>0&&m.equalPoints(t[t.length-1],e))&&(t.push(e),!0)}function p(t,e){var i,n,r,s,a,l=[];for(i=0;i<t.length;++i)n=t[i],r=t[(i+1)%t.length],s=m.lineThroughPoints(n,r),y.pointInHalfplane(n,e)?(d(l,n),y.pointInHalfplane(r,e)||null!==(a=o(s,e.edge))&&d(l,a)):y.pointInHalfplane(r,e)&&null!==(a=o(s,e.edge))&&d(l,a);return l.length>=3?l:null}function _(t,e){var i,n,o,r,s,a=t;for(i=0;i<e.length&&null!==a;++i)n=e[i],o=e[(i+1)%e.length],r=e[(i+2)%e.length],s=m.lineThroughPoints(n,o),a=p(a,m.halfplaneThroughPoint(s,r));return a}var f,m,g,y;Object.defineProperty(e,"__esModule",{value:!0}),f=i(6),m=i(7),g=i(37),y=i(57),e.intersectLineSegmentAndRectangle=n,e.intersectLines=o,e.intersectLineSegments=s,e.intersectLineAndRectangle=h,e.intersectRayAndRectangle=u,e.intersectPolygonAndHalfplane=p,e.intersectPolygons=_},function(t,e,i){"use strict";(function(n){function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r,s,a,l,c,h;Object.defineProperty(e,"__esModule",{value:!0}),r=function(){function t(t,e){var i,n;for(i=0;i<e.length;i++)n=e[i],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(225),i(399),
a=i(5).getLogger("Ui.TvControlCheckbox"),l={labelWrapper:'{{#hasLabel}}<label>{{#labelLeft}}<span class="tv-control-checkbox__label {{#labelAddClass}}{{labelAddClass}}{{/labelAddClass}}">{{labelLeft}}</span>{{/labelLeft}}{{> inputWrapper }}{{#labelRight}}<span class="tv-control-checkbox__label {{#labelAddClass}}{{labelAddClass}}{{/labelAddClass}}">{{labelRight}}</span>{{/labelRight}}</label>{{/hasLabel}}{{^hasLabel}}{{> inputWrapper }}{{/hasLabel}}',inputWrapper:'<{{ tag }} class="{{ customClass }}{{#disabled}} i-disabled{{/disabled}}">{{^hasCheckbox}}{{> checkbox }}{{/hasCheckbox}}{{> box }}{{> ripple }}</{{ tag }}>',checkbox:'<input{{#id}} id="{{ id }}"{{/id}} class="{{> checkboxClass }}" type="checkbox"{{#name}} name="{{ name }}"{{/name}}{{#checked}} checked{{/checked}}{{#disabled}} disabled{{/disabled}}>',checkboxClass:"{{ customClass }}__input",box:'<span class="{{ customClass }}__box {{#boxAddClass}}{{boxAddClass}}{{/boxAddClass}}">'+i(224)+"</span>",ripple:'<span class="{{ customClass }}__ripple js-ripple"></span>'},c="i-inited",h=function(){function t(e){var i,n=e.customClass,r=void 0===n?"tv-control-checkbox":n,s=e.$checkbox,l=e.tag,h=e.id,u=e.name,d=e.checked,p=e.disabled,_=e.labelLeft,f=e.labelRight,m=e.labelAddClass,g=e.boxAddClass;if(o(this,t),this.$el=null,void 0===l&&(l=_||f?"span":"label"),i=s instanceof $&&!!s.length){if(!s.is("input[type=checkbox]"))return void a.logError("`$checkbox` need to be input[type=checkbox]");if(s.hasClass(c))return;this._setInputId(s,h),this._setInputClass(s,r),this._setInputName(s,u),this._setInputChecked(s,d),this._setInputDisabled(s,p),d=!!s.prop("checked"),p=!!s.attr("disabled")}this.$el=this.render({$checkbox:s,hasCheckbox:i,customClass:r,tag:l,id:h,name:u,checked:d,disabled:p,labelLeft:_,labelRight:f,hasLabel:_||f,labelAddClass:m,boxAddClass:g}),this.$checkbox=i?s:this.$el.find("input[type=checkbox]")}return r(t,[{key:"_setInputId",value:function(t,e){void 0!==e&&t.attr("id",e)}},{key:"_setInputClass",value:function(t,e){var i=n.render(l.checkboxClass,{customClass:e});t.addClass(i)}},{key:"_setInputName",value:function(t,e){void 0!==e&&t.attr("name",e)}},{key:"_setInputChecked",value:function(t,e){void 0!==e&&t.prop("checked",!!e)}},{key:"_setInputDisabled",value:function(t,e){void 0!==e&&(e?t.setAttribute("disabled","disabled"):t.removeAttr("disabled"))}},{key:"render",value:function(t){var e,i=t.$checkbox,o=$(n.render(l.labelWrapper,t,l));return t.hasCheckbox&&(o.insertBefore(i),e=o.find("."+t.customClass).andSelf().filter("."+t.customClass).eq(0),e.prepend(i.detach()),i.addClass(c)),o}},{key:"checked",set:function(t){this._setInputChecked(this.$checkbox,!!t)},get:function(){return!!this.$checkbox.prop("checked")}}]),t}(),$.fn.tvControlCheckbox=(0,s.createTvBlockWithInstance)("tv-control-checkbox",function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new h(TradingView.mergeObj(e,{$checkbox:t}))}),e.default=h,t.exports=e.default}).call(e,i(93))},function(t,e,i){"use strict";var n,o;Object.defineProperty(e,"__esModule",{value:!0}),
i.d(e,"TimeFormatter",function(){return o}),n=i(13),o=function(){function t(t){this._formatStr=t||"%h:%m:%s"}return t.prototype.format=function(t){return n.customFormatters.timeFormatter?n.customFormatters.timeFormatter.format(t):this._formatStr.replace("%h",Object(n.numberToStringWithLeadingZero)(t.getUTCHours(),2)).replace("%m",Object(n.numberToStringWithLeadingZero)(t.getUTCMinutes(),2)).replace("%s",Object(n.numberToStringWithLeadingZero)(t.getUTCSeconds(),2))},t.prototype.formatLocal=function(t){return n.customFormatters.timeFormatter?n.customFormatters.timeFormatter.formatLocal?n.customFormatters.timeFormatter.formatLocal(t):n.customFormatters.timeFormatter.format(t):this._formatStr.replace("%h",Object(n.numberToStringWithLeadingZero)(t.getHours(),2)).replace("%m",Object(n.numberToStringWithLeadingZero)(t.getMinutes(),2)).replace("%s",Object(n.numberToStringWithLeadingZero)(t.getSeconds(),2))},t}()},function(t,e,i){"use strict";var n=i(17),o={_fontHeightCache:{},_parsedColorCache:{}};o._parseColor=function(t){var e,i,n;return this._parsedColorCache[t]?this._parsedColorCache[t]:(e=document.createElement("div"),e.style.color=t,i=e.style.color.match(/^rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/i)||e.style.color.match(/^rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\,\s*(\d*\.?\d+)\s*\)$/i),n={r:i[1],g:i[2],b:i[3],a:i[4]||"1"},this._parsedColorCache[t]=n,n)},o.getColorFromProperties=function(t,e){var i=1-e.value()/100,n=this._parseColor(t.value());return"rgba("+n.r+","+n.g+","+n.b+","+i+")"},o.setColorToProperties=function(t,e,i){var n,o=this._parseColor(t);e.setValue("rgb("+o.r+","+o.g+","+o.b+")"),n=100*(1-o.a),i.setValue(Math.max(0,Math.min(n,100)))},o._parseFont=function(t){var e,i,n=document.createElement("div");return n.style.font=t,e=n.style.fontSize.match(/(\d+)pt/),i=e&&e[0]===n.style.fontSize,{family:n.style.fontFamily,size:i?e[1]:"",bold:"bold"===n.style.fontWeight,italic:"italic"===n.style.fontStyle}},o.getFontFromProperties=function(t,e,i,n){return[i.value()?"bold":"",n.value()?"italic":"",e.value()+"pt",t.value()].join(" ")},o.setFontToProperties=function(t,e,i,n,o){var r=this._parseFont(t);r.family.length>0&&e.setValue(r.family),r.size.length>0&&i.setValue(r.size),n.setValue(r.bold),o.setValue(r.italic)},o.fontHeight=function(t){var e,i;return this._fontHeightCache[t]||(e=document.createElement("span"),e.appendChild(document.createTextNode("height")),document.body.appendChild(e),e.style.cssText="font: "+t+"; white-space: nowrap; display: inline;",i=e.offsetHeight,document.body.removeChild(e),this._fontHeightCache[t]=Math.ceil(i)),this._fontHeightCache[t]},o.drawPolyHoverOrPress=function(t,e,i,n){n?(t.save(),t.fillStyle="rgba(0, 0, 0, 0.15)",CanvasEx.drawPoly(t,e,!0),t.restore()):i&&(t.save(),t.fillStyle="rgba(0, 0, 0, 0.1)",CanvasEx.drawPoly(t,e,!0),t.restore())},o.repaint=function(t){var e=new n(n.LIGHT_UPDATE);e.force=!0,t.invalidate(e)},o.roundToMinTick=function(t,e){var i=t.mainSource().base(),n=1/i;return n*Math.round(e/n)},t.exports=o},function(t,e,i){"use strict";function n(){
clearTimeout(W),clearTimeout(j),clearTimeout(H)}function o(t,e){H=setTimeout(t,e)}function r(t,e){j=setTimeout(t,e)}function s(t,e){W=setTimeout(t,e)}function a(){var t=document.getElementById(U);if(t)return void(z=t);z=document.createElement("div"),z.id=U,document.body.appendChild(z)}function l(){z.innerHTML=""}function c(t){return $.then(function(){l(),z.appendChild(t)})}function h(t,e){var i,n=G.includes(e)?Y[e]:"";(i=t.classList).remove.apply(i,G.map(function(t){return Y[t]}).filter(function(t){return!!t})),n&&!t.classList.contains(n)&&t.classList.add(n)}function u(t,e){var i=K.get(t);return i&&i[e]}function d(t,e,i){var n=K.get(t)||{};n[e]=i,K.set(t,n)}function p(t){var e=t.getAttribute("title");return e&&(d(t,"text",e),t.removeAttribute("title")),u(t,"text")||""}function _(t){var e=p(t),i=t.getBoundingClientRect(),n={h:i.height,w:i.width,x:i.left,y:i.top},o=t.getAttribute("data-color-theme")||"",r=t.classList.contains("common-tooltip-html"),s=parseInt(t.getAttribute("data-tooltip-delay")||""),a={type:"none"};return e&&(a={type:r?"html":"text",data:e}),{above:t.classList.contains("common-tooltip-above"),below:t.classList.contains("common-tooltip-below"),otl:t.classList.contains("common-tooltip-otl"),otr:t.classList.contains("common-tooltip-otr"),vertical:t.classList.contains("common-tooltip-vertical"),hotkey:t.getAttribute("data-tooltip-hotkey"),narrow:t.classList.contains("common-tooltip-narrow"),colorTheme:o,tooltipDelay:s,rect:n,content:a}}function f(t){var e,i,n,o,r,s,a=S(),l=C(a),c=t.content;switch(c.type){case"element":l.innerHTML="",l.appendChild(c.data);break;case"html":l.innerHTML=c.data;break;case"text":t.hotkey?(i=P(),i.innerText=c.data,l.appendChild(i)):l.innerText=c.data}return t.hotkey&&(n="none"!==c.type,o=w(),r=Object(X.hotKeyDeserialize)(t.hotkey),s=b(r.keys),o.innerHTML=(e=r.text).format.apply(e,s).replace(/\s\+\s/g,'<span class="'+Q["common-tooltip__plus-sign"]+'">+</span>'),l.classList.add(Q["common-tooltip__body--with-hotkey"]),n&&o.classList.add(Q["common-tooltip__hotkey-block--divider"]),l.appendChild(o)),a}function m(t,e){var i,n,o,r,s,a,l,c,u,d,p,_,f,m,g,y,b=e.rect;b&&(h(t,e.colorTheme||"default"),e.addClass&&t.classList.add(e.addClass),i=C(t),i.classList.toggle(Q["common-tooltip__body--width_wide"],!!e.wide),i.classList.toggle(Q["common-tooltip__body--width_narrow"],!!e.narrow),i.classList.toggle(Q["common-tooltip__body--no-buttons"],!0),t.classList.toggle(Q["common-tooltip--no-pointer-events"],!Modernizr.pointerevents),i.style.left=v(0),i.style.width=v(i.clientWidth+2),n=document.body.clientWidth,o=document.body.clientHeight,r=e.vertical,s=r&&b.w<20||!r&&b.h<20,t.classList.toggle(Q["common-tooltip--farther"],s),t.classList.toggle(Q["common-tooltip--vertical"],r),t.classList.toggle(Q["common-tooltip--horizontal"],!r),a=T(t),l="",r?(t.style.left=v(b.x+b.w),t.style.top=v(b.y-(t.offsetHeight-b.h)/2),c=(t.querySelector(":last-child")||i).getBoundingClientRect().right,u=c+tt>n,t.classList.toggle(Q["common-tooltip--direction_reversed"],u),
t.classList.toggle(Q["common-tooltip--direction_normal"],!u),l=u?"after":"before",Z.IS_RTL?(l=e.otr?"after":l,l=e.otl?"before":l):(l=e.otr?"before":l,l=e.otl?"after":l),a.classList.toggle(Q["common-tooltip__ear-holder--before"],"before"===l),a.classList.toggle(Q["common-tooltip__ear-holder--after"],"after"===l),"after"===l&&(t.style.left="auto",t.style.right=v(n-b.x))):(d=b.x-(i.offsetWidth-b.w)/2,p=n-tt-t.offsetWidth,_=Math.max(tt,Math.min(d,p)),t.style.bottom=v(o-b.y),t.style.left=v(_),u=p<d,t.classList.toggle(Q["common-tooltip--direction_reversed"],u),t.classList.toggle(Q["common-tooltip--direction_normal"],!u),f=i.getBoundingClientRect().top,l=f<tt?"below":"above",l=e.above?"above":l,l=e.below?"below":l,a.classList.toggle(Q["common-tooltip__ear-holder--above"],"above"===l),a.classList.toggle(Q["common-tooltip__ear-holder--below"],"below"===l),"below"===l&&(t.style.bottom="auto",t.style.top=v(b.y+b.h)),m=x(t),g=i.getBoundingClientRect().left,y=Math.round(b.x+b.w/2-(g+i.clientWidth/2)),t.style.left=v(_+y),t.style.width=v(i.clientWidth+m.clientWidth),y=u?Math.max(0,y):Math.min(0,y),m.style.left=v(-y),i.style.left=v(-y)))}function g(t){t.classList.toggle(Q["common-tooltip--hidden"],!1)}function y(t){t.classList.toggle(Q["common-tooltip--hidden"],!0)}function v(t){return Math.floor(t)+"px"}function b(t){return t.map(function(t){return'<span class="'+Q["common-tooltip__hotkey-button"]+'">'+t+"</span>"})}function S(){return rt.cloneNode(!0)}function w(){return st.cloneNode(!0)}function P(){return at.cloneNode(!0)}function T(t){return t.querySelector("."+Q["common-tooltip__ear-holder"])}function C(t){return t.querySelector("."+Q["common-tooltip__body"])}function x(t){return t.querySelector("."+Q["common-tooltip__button-container"])}function k(t,e){var i,n,o,r,s;return void 0===e&&(e={}),i=B(e),n=i.content,o=F.e(i,["content"]),r=_(t),s=Object.assign(r,o),"none"!==n.type&&(s.content=n),!("none"===s.content.type&&!s.hotkey)&&(L(s),!0)}function L(t){var e=B(t),i=f(e);ht={options:e,element:i},c(i).then(function(){n(),ct?O(i):(y(i),s(function(){return O(i)},E(e)))})}function I(t){return p(t)}function A(t){var e,i,n,o=t.target,r=t.currentTarget,s=V(o,r,"apply-common-tooltip"),a=function(e){var i,n,o;if("buttons"in t){if(1&t.buttons)return"continue"}else if(1===t.which)return"continue";if((i=function(){return k(e)})())return n=function(){e.removeEventListener("common-tooltip-update",i),e.removeEventListener("mouseleave",n),e.removeEventListener("mousedown",n),document.removeEventListener("scroll",n),M()},o=function(t){27===t.keyCode&&(document.removeEventListener("keydown",o),n())},e.addEventListener("common-tooltip-update",i),e.addEventListener("mouseleave",n),e.addEventListener("mousedown",n),document.addEventListener("scroll",n),document.addEventListener("keydown",o),"break"};for(e=0,i=s;e<i.length&&(n=i[e],"break"!==a(n));e++);}function E(t){return"number"!=typeof t.tooltipDelay||isNaN(t.tooltipDelay)?lt:t.tooltipDelay}function M(){var t,e,i;n(),ct&&ht&&(t=ht.element,e=ht.options,i=function(){
t.removeEventListener("mouseleave",i),y(t),o(function(){l(),ct=!1,ht=null},lt/2)},e.tooltipHideDelay?r(function(){t.querySelector(":hover")?t.addEventListener("mouseleave",i):i()},e.tooltipHideDelay):i())}function O(t){var e,i=Object(q.ensureNotNull)(ht).options;m(t,i),g(t),ct=!0,i.forceHideOnMove&&(e=function(){document.removeEventListener("mousemove",e),M()},document.addEventListener("mousemove",e))}function D(t){return t&&(t.nodeType===Node.ELEMENT_NODE?t:null)}function V(t,e,i){for(var n=[];t&&t!==e;)t.classList&&t.classList.contains(i)&&n.push(t),t=t.parentElement||D(t.parentNode);return n}function R(t){return"content"in t}function B(t){var e,i,n,o,r;return R(t)?t:(e=t.inner,i=t.html,n=t.text,o=F.e(t,["inner","html","text"]),r={type:"none"},e&&(r={type:"element",data:e}),n&&(r={type:i?"html":"text",data:n}),F.a({content:r},o))}var F,N,W,j,H,U,z,$,q,Y,G,K,X,J,Z,Q,tt,et,it,nt,ot,rt,st,at,lt,ct,ht;Object.defineProperty(e,"__esModule",{value:!0}),F=i(0),N=i(146),W=0,j=0,H=0,U="tooltip-root-element",$=new Promise(function(t){"interactive"===document.readyState?(a(),t()):document.addEventListener("DOMContentLoaded",function(){a(),t()})}),q=i(6),Y={default:"",white:"theme-white","round-shadow":"theme-round-shadow"},G=Object.keys(Y),K=new WeakMap,X=i(362),J=i(158),Z=i(36),i(31),Q=i(543),tt=10,et="common-tooltip-wrapper",it='\n\t<div id="'+et+'" class="'+Q["common-tooltip"]+'">\n\t\t<div class="'+Q["common-tooltip__ear-holder"]+'" >\n\t\t\t<div class="'+Q["common-tooltip__body"]+' js-tooltip-body"></div>\n\t\t</div>\n\t\t<div class="'+Q["common-tooltip__button-container"]+'"></div>\n\t</div>\n',nt='\n\t<div class="'+Q["common-tooltip__hotkey-block"]+'"></div>\n',ot='\n\t<div class="'+Q["common-tooltip__hotkey-text"]+'"></div>\n',rt=Object(J.parseHtmlElement)(it),st=Object(J.parseHtmlElement)(nt),at=Object(J.parseHtmlElement)(ot),e.showOnElement=k,e.show=L,e.updateTooltipText=I,e.hide=M,lt=500,ct=!1,ht=null,Modernizr.touch||document.addEventListener("mouseover",A,!0)},function(t,e,i){"use strict";function n(t,e){var i,n;return i=null==e?document.documentElement:9===e.nodeType?e.documentElement:e,r&&(n=r.get(i)),n||(n=i.ownerDocument.createRange(),n.selectNodeContents(i),r&&r.set(i,n)),n.createContextualFragment(t)}function o(t,e){var i,o,r,s=n(t,e);if("firstElementChild"in s)i=s.firstElementChild;else for(i=null,o=0;o<s.childNodes.length;o++)if(r=s.childNodes[o],1===r.nodeType){i=r;break}return null!==i&&s.removeChild(i),i}Object.defineProperty(e,"__esModule",{value:!0}),e.parseHtml=n,e.parseHtmlElement=o;var r;"WeakMap"in window&&(r=new WeakMap)},function(t,e,i){"use strict";function n(t,e,i,n,o){function r(t){return e&&e[t]?e[t]:t}function s(t,e,i,n){var o=r(e[0]);return!!t.hasOwnProperty(o)&&(e.length>1?s(t[o],e.slice(1),i):(t[o]&&t[o].setValue?t[o].setValue(i):t[o]=i,!0))}function a(t){i||g.logWarn("Path `"+t+"` does not exist.")}var l,c,h,u;if(n)for(l in n)c=l.split("."),h=r(c[0]),u=void 0!==o&&o===c[0],0!==c.length&&u&&(c=c.slice(1),h=r(c[0])),0!==c.length&&t.hasOwnProperty(h)?s(t,c,n[l])||a(l):u&&a(l)}
function o(t,e,i,o){window.__defaultsOverrides&&n(t,e,i,window.__defaultsOverrides,o)}function r(){var t=/^linetool.+/;Object.keys(TradingView.defaultProperties).forEach(function(e){t.test(e)&&o(TradingView.defaultProperties[e],null,!1,e)})}function s(t,e){return e?c(t,e):a(t)}function a(t){var e,i=y(t);return window._UNIT_TESTS||(e=TradingView.clone(TVSettings.getJSON(t,null)))&&TradingView.merge(i,e),i}function l(t){var e,i;return!!t&&(t=""+t,e=RegExp("\\d+"),i=e.exec(t),null!==i&&i[0]===t)}function c(t,e){var i,n,o,r,s=y(t);return window._UNIT_TESTS||(i=TradingView.clone(TVSettings.getJSON(t,null)),t.startsWith("study_")&&i&&l(i.version)&&(n=i.inputs,o=e.updateStudyInputs(i.id,i.version,"last",n,null),i.inputs=o,r=e.updateStudyState(i,i),i=r),TradingView.merge(s,i)),s}var h=i(43),u=i(297).LineToolPitchforkStyle,d=i(240).LineToolBarsPatternMode,p=i(96).PlotType,_=i(188),f=i(116).LineEnd,m=i(379).StatsPosition,g=i(5).getLogger("Chart.Defaults"),y=function(t){var e,i,n,s,a,l,c,g,y={a:function(t,e){return{color:t,visible:e}},b:function(t,e,i){return{coeff:t,color:e,visible:i}},c:function(t,e,i,n,o){return{coeff:t,color:e,visible:i,linestyle:void 0===n?CanvasEx.LINESTYLE_SOLID:n,linewidth:void 0===o?1:o}},d:function(t,e,i){return{color:t,width:i,visible:e}},e:function(t,e,i,n,o){return{color:t,visible:e,width:i,x:n,y:o}},f:function(t,e,i,n,o,r){return{coeff1:t,coeff2:e,color:i,visible:n,linestyle:void 0===o?CanvasEx.LINESTYLE_SOLID:o,linewidth:void 0===r?1:r}}};if(void 0===TradingView.defaultProperties){switch(window.locale){case"ar_AE":e="Asia/Dubai";break;case"au":e="Australia/Sydney";break;case"br":e="America/Sao_Paulo";break;case"ca":e="America/Toronto";break;case"de_DE":case"it":e="Europe/Berlin";break;case"es":e="Europe/Madrid";break;case"fa_IR":e="Asia/Tehran";break;case"fr":case"sv_SE":e="Europe/Paris";break;case"he_IL":case"tr":e="Europe/Athens";break;case"hu_HU":case"pl":e="Europe/Warsaw";break;case"id":case"th_TH":case"vi_VN":e="Asia/Bangkok";break;case"in":e="Asia/Kolkata";break;case"ja":case"kr":e="Asia/Tokyo";break;case"ms_MY":e="Asia/Singapore";break;case"ru":e="Europe/Moscow";break;case"uk":e="Europe/London";break;case"zh_CN":case"zh_TW":e="Asia/Shanghai";break;default:e="Etc/UTC"}TradingView.defaultProperties={chartproperties:{timezone:e,dataWindowProperties:{background:"rgba( 255, 254, 206, 0.2)",border:"rgba( 96, 96, 144, 1)",font:"Verdana",fontBold:!1,fontItalic:!1,fontSize:10,transparency:80,visible:!0},paneProperties:{background:"#ffffff",gridProperties:{color:"#e1ecf2",style:CanvasEx.LINESTYLE_SOLID},vertGridProperties:{color:"#e1ecf2",style:CanvasEx.LINESTYLE_SOLID},horzGridProperties:{color:"#e1ecf2",style:CanvasEx.LINESTYLE_SOLID},crossHairProperties:{color:"#758696",style:CanvasEx.LINESTYLE_DASHED,transparency:0,width:1},topMargin:5,bottomMargin:5,leftAxisProperties:{autoScale:!0,autoScaleDisabled:!1,lockScale:!1,percentage:!1,percentageDisabled:!1,indexedTo100:!1,log:!1,logDisabled:!1,alignLabels:!0},rightAxisProperties:{autoScale:!0,autoScaleDisabled:!1,lockScale:!1,percentage:!1,
percentageDisabled:!1,log:!1,logDisabled:!1,alignLabels:!0},legendProperties:{showStudyArguments:!0,showStudyTitles:!0,showStudyValues:!0,showSeriesTitle:!0,showSeriesOHLC:!0,showLegend:!0,showBarChange:!0}},scalesProperties:{showLeftScale:!1,showRightScale:!0,backgroundColor:"#ffffff",lineColor:"#555",textColor:"#555",fontSize:11,scaleSeriesOnly:!1,showSeriesLastValue:!0,showSeriesPrevCloseValue:!1,showStudyLastValue:!1,showSymbolLabels:!1,showStudyPlotLabels:!1,barSpacing:_.DEFAULT_BAR_SPACING},mainSeriesProperties:{style:h.STYLE_CANDLES,esdShowDividends:!0,esdShowSplits:!0,esdShowEarnings:!0,esdShowBreaks:!1,esdBreaksStyle:{color:"rgba( 235, 77, 92, 1)",style:CanvasEx.LINESTYLE_DASHED,width:1},esdFlagSize:2,showCountdown:!0,showInDataWindow:!0,visible:!0,showPriceLine:!0,priceLineWidth:1,priceLineColor:"",baseLineColor:"#B2B5BE",showPrevClosePriceLine:!1,prevClosePriceLineWidth:1,prevClosePriceLineColor:"rgba( 85, 85, 85, 1)",minTick:"default",extendedHours:!1,sessVis:!1,statusViewStyle:{fontSize:17,showExchange:!0,showInterval:!0,showSymbolAsDescription:!1},candleStyle:{upColor:"#53b987",downColor:"#eb4d5c",drawWick:!0,drawBorder:!0,borderColor:"#378658",borderUpColor:"#53b987",borderDownColor:"#eb4d5c",wickColor:"#737375",wickUpColor:"#a9cdd3",wickDownColor:"#f5a6ae",barColorsOnPrevClose:!1},hollowCandleStyle:{upColor:"rgba( 83, 185, 135, 1)",downColor:"rgba( 255, 77, 92, 1)",drawWick:!0,drawBorder:!0,borderColor:"rgba( 55, 134, 88, 1)",borderUpColor:"rgba( 83, 185, 135, 1)",borderDownColor:"rgba( 255, 77, 92, 1)",wickColor:"rgba( 115, 115, 117, 1)",wickUpColor:"rgba( 169, 220, 195, 1)",wickDownColor:"rgba( 245, 166, 174, 1)"},haStyle:{upColor:"rgba( 83, 185, 135, 1)",downColor:"rgba( 255, 77, 92, 1)",drawWick:!0,drawBorder:!0,borderColor:"rgba( 55, 134, 88, 1)",borderUpColor:"rgba( 83, 185, 135, 1)",borderDownColor:"rgba( 255, 77, 92, 1)",wickColor:"rgba( 115, 115, 117, 1)",wickUpColor:"rgba( 83, 185, 135, 1)",wickDownColor:"rgba( 255, 77, 92, 1)",showRealLastPrice:!1,barColorsOnPrevClose:!1,inputs:{},inputInfo:{}},barStyle:{upColor:"rgba( 83, 185, 135, 1)",downColor:"rgba( 255, 77, 92, 1)",barColorsOnPrevClose:!1,dontDrawOpen:!1},lineStyle:{color:"rgba( 60, 120, 216, 1)",linestyle:CanvasEx.LINESTYLE_SOLID,linewidth:1,priceSource:"close",styleType:h.STYLE_LINE_TYPE_SIMPLE},areaStyle:{color1:"rgba( 96, 96, 144, 0.5)",color2:"rgba( 1, 246, 245, 0.5)",linecolor:"rgba( 0, 148, 255, 1)",linestyle:CanvasEx.LINESTYLE_SOLID,linewidth:1,priceSource:"close",transparency:50},priceAxisProperties:{autoScale:!0,autoScaleDisabled:!1,lockScale:!1,percentage:!1,percentageDisabled:!1,log:!1,logDisabled:!1},renkoStyle:{upColor:"rgba( 83, 185, 135, 1)",downColor:"rgba( 255, 77, 92, 1)",borderUpColor:"rgba( 83, 185, 135, 1)",borderDownColor:"rgba( 255, 77, 92, 1)",upColorProjection:"rgba( 169, 220, 195, 1)",downColorProjection:"rgba( 245, 166, 174, 1)",borderUpColorProjection:"rgba( 169, 220, 195, 1)",borderDownColorProjection:"rgba( 245, 166, 174, 1)",wickUpColor:"rgba( 83, 185, 135, 1)",wickDownColor:"rgba( 255, 77, 92, 1)",
inputs:{source:"close",boxSize:3,style:"ATR",atrLength:14,wicks:!0},inputInfo:{source:{name:"Source"},boxSize:{name:"Box size"},style:{name:"Style"},atrLength:{name:"ATR Length"},wicks:{name:"Wicks"}}},pbStyle:{upColor:"rgba( 83, 185, 135, 1)",downColor:"rgba( 255, 77, 92, 1)",borderUpColor:"rgba( 83, 185, 135, 1)",borderDownColor:"rgba( 255, 77, 92, 1)",upColorProjection:"rgba( 169, 220, 195, 1)",downColorProjection:"rgba( 245, 166, 174, 1)",borderUpColorProjection:"rgba( 169, 220, 195, 1)",borderDownColorProjection:"rgba( 245, 166, 174, 1)",inputs:{source:"close",lb:3},inputInfo:{source:{name:"Source"},lb:{name:"Number of line"}}},kagiStyle:{upColor:"rgba( 83, 185, 135, 1)",downColor:"rgba( 255, 77, 92, 1)",upColorProjection:"rgba( 169, 220, 195, 1)",downColorProjection:"rgba( 245, 166, 174, 1)",inputs:{source:"close",style:"ATR",atrLength:14,reversalAmount:1},inputInfo:{source:{name:"Source"},style:{name:"Style"},atrLength:{name:"ATR Length"},reversalAmount:{name:"Reversal amount"}}},pnfStyle:{upColor:"rgba( 83, 185, 135, 1)",downColor:"rgba( 255, 77, 92, 1)",upColorProjection:"rgba( 169, 220, 195, 1)",downColorProjection:"rgba( 245, 166, 174, 1)",inputs:{sources:"Close",reversalAmount:3,boxSize:1,style:"ATR",atrLength:14},inputInfo:{sources:{name:"Source"},boxSize:{name:"Box size"},reversalAmount:{name:"Reversal amount"},style:{name:"Style"},atrLength:{name:"ATR Length"}}},baselineStyle:{baselineColor:"rgba( 117, 134, 150, 1)",topFillColor1:"rgba( 83, 185, 135, 0.1)",topFillColor2:"rgba( 83, 185, 135, 0.1)",bottomFillColor1:"rgba( 235, 77, 92, 0.1)",bottomFillColor2:"rgba( 235, 77, 92, 0.1)",topLineColor:"rgba( 83, 185, 135, 1)",bottomLineColor:"rgba( 235, 77, 92, 1)",topLineWidth:1,bottomLineWidth:1,priceSource:"close",transparency:50,baseLevelPercentage:50},rangeStyle:{upColor:"rgba( 83, 185, 135, 1)",downColor:"rgba( 255, 77, 92, 1)",upColorProjection:"rgba( 169, 220, 195, 1)",downColorProjection:"rgba( 245, 166, 174, 1)",inputs:{range:10,phantomBars:!1},inputInfo:{range:{name:"Range"},phantomBars:{name:"Phantom Bars"}}}},symbolWatermarkProperties:{color:"rgba( 85, 85, 85, 0)",transparency:100},chartEventsSourceProperties:{visible:!0,futureOnly:!0,breaks:{color:"rgba(85, 85, 85, 1)",visible:!1,style:CanvasEx.LINESTYLE_DASHED,width:1}},tradingProperties:{showPositions:!0,showOrders:!0,showExecutions:!0,extendLeft:!0,lineLength:5,lineWidth:1,lineStyle:CanvasEx.LINESTYLE_DASHED},alertsProperties:{labels:{visible:!0,color:"rgba( 215, 84, 66, 1)",highlightColor:"rgba( 255, 255, 51, 1)",hoverColor:"rgba( 245, 227, 135, 1)",line:{visible:!0,style:CanvasEx.LINESTYLE_DASHED,width:1}},fakeLabels:{visible:!0,color:"rgba( 119, 119, 119, 1)",line:{visible:!0,style:CanvasEx.LINESTYLE_DASHED,width:1}},drawingIcon:{color:"rgba( 170, 170, 170, 1)"}},editorFontsList:["Verdana","Courier New","Times New Roman","Arial"],volumePaneSize:"large"},drawings:{magnet:!1,stayInDrawingMode:!1,drawOnAllCharts:!0,crossHairColor:"#585858",crossHairStyle:CanvasEx.LINESTYLE_DASHED,crossHairWidth:1},linetoolorder:{singleChartOnly:!0,
extendLeft:"inherit",lineLength:"inherit",lineColor:"rgba( 255, 0, 0, 1)",lineTransparency:0,lineStyle:"inherit",lineWidth:"inherit",bodyBorderColor:"rgba( 255, 0, 0, 0)",bodyBorderTransparency:0,bodyBackgroundColor:"rgba( 255, 255, 255, 0.75)",bodyBackgroundTransparency:25,bodyTextColor:"rgba( 255, 0, 0, 0)",bodyTextTransparency:0,bodyFontFamily:"Verdana",bodyFontSize:7,bodyFontBold:!0,bodyFontItalic:!1,quantityBorderColor:"rgba( 255, 0, 0, 0)",quantityBorderTransparency:0,quantityBackgroundColor:"rgba( 255, 0, 0, 0.75)",quantityBackgroundTransparency:25,quantityTextColor:"rgba( 255, 255, 255, 1)",quantityTextTransparency:0,quantityFontFamily:"Verdana",quantityFontSize:7,quantityFontBold:!0,quantityFontItalic:!1,cancelButtonBorderColor:"rgba( 255, 0, 0, 1)",cancelButtonBorderTransparency:0,cancelButtonBackgroundColor:"rgba( 255, 255, 255, 0.75)",cancelButtonBackgroundTransparency:25,cancelButtonIconColor:"rgba( 255, 0, 0, 1)",cancelButtonIconTransparency:0,tooltip:""},linetoolposition:{singleChartOnly:!0,extendLeft:"inherit",lineLength:"inherit",lineColor:"rgba( 0, 113, 224, 1)",lineTransparency:0,lineStyle:"inherit",lineWidth:"inherit",bodyBorderColor:"rgba( 0, 113, 224, 1)",bodyBorderTransparency:0,bodyBackgroundColor:"rgba( 255, 255, 255, 0.75)",bodyBackgroundTransparency:25,bodyTextColor:"rgba( 0, 113, 224, 1)",bodyTextTransparency:0,bodyFontFamily:"Verdana",bodyFontSize:7,bodyFontBold:!0,bodyFontItalic:!1,quantityBorderColor:"rgba( 0, 113, 224, 1)",quantityBorderTransparency:0,quantityBackgroundColor:"rgba( 0, 113, 224, 0.75)",quantityBackgroundTransparency:25,quantityTextColor:"rgba( 255, 255, 255, 1)",quantityTextTransparency:0,quantityFontFamily:"Verdana",quantityFontSize:7,quantityFontBold:!0,quantityFontItalic:!1,reverseButtonBorderColor:"rgba( 0, 113, 224, 1)",reverseButtonBorderTransparency:0,reverseButtonBackgroundColor:"rgba( 255, 255, 255, 0.75)",reverseButtonBackgroundTransparency:25,reverseButtonIconColor:"rgba( 0, 113, 224, 1)",reverseButtonIconTransparency:0,closeButtonBorderColor:"rgba( 0, 113, 224, 1)",closeButtonBorderTransparency:0,closeButtonBackgroundColor:"rgba( 255, 255, 255, 0.75)",closeButtonBackgroundTransparency:25,closeButtonIconColor:"rgba( 0, 113, 224, 1)",closeButtonIconTransparency:0,tooltip:""},linetoolexecution:{singleChartOnly:!0,direction:"buy",arrowHeight:8,arrowSpacing:1,arrowColor:"rgba( 0, 0, 255, 1)",arrowTransparency:0,text:"",textColor:"rgba( 0, 0, 0, 1)",textTransparency:0,fontFamily:"Verdana",fontSize:8,fontBold:!1,fontItalic:!1,tooltip:""},linetoolicon:{singleChartOnly:!0,clonable:!0,color:"rgba( 61, 133, 198, 1)",size:40,icon:61536,angle:.5*Math.PI,scale:1},linetoolbezierquadro:{clonable:!0,linecolor:"rgba( 21, 153, 128, 1)",linewidth:1,fillBackground:!1,backgroundColor:"rgba( 21, 56, 153, 0.5)",transparency:50,linestyle:CanvasEx.LINESTYLE_SOLID,extendLeft:!1,extendRight:!1,leftEnd:f.Normal,rightEnd:f.Normal},linetoolbeziercubic:{clonable:!0,linecolor:"rgba( 21, 153, 128, 1)",linewidth:1,fillBackground:!1,backgroundColor:"rgba( 21, 56, 153, 0.5)",transparency:50,
linestyle:CanvasEx.LINESTYLE_SOLID,extendLeft:!1,extendRight:!1,leftEnd:f.Normal,rightEnd:f.Normal},linetooltrendline:{clonable:!0,linecolor:"rgba( 21, 153, 128, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID,extendLeft:!1,extendRight:!1,leftEnd:f.Normal,rightEnd:f.Normal,font:"Verdana",textcolor:"rgba( 21, 119, 96, 1)",fontsize:12,bold:!1,italic:!1,snapTo45Degrees:!0,alwaysShowStats:!1,showMiddlePoint:!1,showPriceRange:!1,showBarsRange:!1,showDateTimeRange:!1,showDistance:!1,showAngle:!1,statsPosition:m.Right},linetoolinfoline:{clonable:!0,linecolor:"rgba( 21, 153, 128, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID,extendLeft:!1,extendRight:!1,leftEnd:f.Normal,rightEnd:f.Normal,font:"Verdana",textcolor:"rgba( 21, 119, 96, 1)",fontsize:12,bold:!1,italic:!1,snapTo45Degrees:!0,alwaysShowStats:!0,showMiddlePoint:!1,showPriceRange:!0,showBarsRange:!0,showDateTimeRange:!0,showDistance:!0,showAngle:!0,statsPosition:m.Center},linetooltimecycles:{clonable:!0,linecolor:"rgba(21, 153, 128, 1)",linewidth:1,fillBackground:!0,backgroundColor:"rgba(106, 168, 79, 0.5)",transparency:50,linestyle:CanvasEx.LINESTYLE_SOLID},linetoolsineline:{clonable:!0,linecolor:"rgba( 21, 153, 128, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID},linetooltrendangle:{singleChartOnly:!0,clonable:!0,linecolor:"rgba( 21, 153, 128, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID,snapTo45Degrees:!0,font:"Verdana",textcolor:"rgba( 21, 119, 96, 1)",fontsize:12,bold:!0,italic:!1,alwaysShowStats:!1,showMiddlePoint:!1,showPriceRange:!1,showBarsRange:!1,extendRight:!1,extendLeft:!1,statsPosition:m.Right},linetooldisjointangle:{clonable:!0,linecolor:"rgba( 18, 159, 92, 1)",linewidth:2,linestyle:CanvasEx.LINESTYLE_SOLID,fillBackground:!0,backgroundColor:"rgba( 106, 168, 79, 0.5)",transparency:50,extendLeft:!1,extendRight:!1,leftEnd:f.Normal,rightEnd:f.Normal,font:"Verdana",textcolor:"rgba( 18, 159, 92, 1)",fontsize:12,bold:!1,italic:!1,showPrices:!1,showPriceRange:!1,showDateTimeRange:!1,showBarsRange:!1},linetoolflatbottom:{clonable:!0,linecolor:"rgba( 73, 133, 231, 1)",linewidth:2,linestyle:CanvasEx.LINESTYLE_SOLID,fillBackground:!0,backgroundColor:"rgba( 21, 56, 153, 0.5)",transparency:50,extendLeft:!1,extendRight:!1,leftEnd:f.Normal,rightEnd:f.Normal,font:"Verdana",textcolor:"rgba( 73, 133, 231, 1)",fontsize:12,bold:!1,italic:!1,showPrices:!1,showPriceRange:!1,showDateTimeRange:!1,showBarsRange:!1},linetoolfibspiral:{counterclockwise:!1,clonable:!0,linecolor:"rgba( 21, 153, 128, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID},linetooldaterange:{clonable:!0,linecolor:"rgba( 88, 88, 88, 1)",linewidth:1,font:"Verdana",textcolor:"rgba( 255, 255, 255, 1)",fontsize:12,fillLabelBackground:!0,labelBackgroundColor:"rgba( 91, 133, 191, 0.9)",labelBackgroundTransparency:30,fillBackground:!0,backgroundColor:"rgba( 186, 218, 255, 0.4)",backgroundTransparency:60,drawBorder:!1,borderColor:"rgba( 102, 123, 139, 1)",extendTop:!1,extendBottom:!1},linetoolpricerange:{clonable:!0,linecolor:"rgba( 88, 88, 88, 1)",linewidth:1,font:"Verdana",
textcolor:"rgba( 255, 255, 255, 1)",fontsize:12,fillLabelBackground:!0,labelBackgroundColor:"rgba( 91, 133, 191, 0.9)",labelBackgroundTransparency:30,fillBackground:!0,backgroundColor:"rgba( 186, 218, 255, 0.4)",backgroundTransparency:60,drawBorder:!1,borderColor:"rgba( 102, 123, 139, 1)",extendLeft:!1,extendRight:!1},linetooldateandpricerange:{clonable:!0,linecolor:"rgba( 88, 88, 88, 1)",linewidth:1,font:"Verdana",textcolor:"rgba( 255, 255, 255, 1)",fontsize:12,fillLabelBackground:!0,labelBackgroundColor:"rgba( 91, 133, 191, 0.9)",labelBackgroundTransparency:30,fillBackground:!0,backgroundColor:"rgba( 186, 218, 255, 0.4)",backgroundTransparency:60,drawBorder:!1,borderColor:"rgba( 102, 123, 139, 1)"},linetoolriskrewardshort:{clonable:!0,linecolor:"rgba( 88, 88, 88, 1)",linewidth:1,font:"Verdana",textcolor:"rgba(255, 255, 255, 1)",fontsize:12,fillLabelBackground:!0,labelBackgroundColor:"rgba( 88, 88, 88, 1)",labelBackgroundTransparency:0,fillBackground:!0,stopBackground:"rgba( 255, 0, 0, 0.2)",profitBackground:"rgba( 0, 160, 0, 0.2)",stopBackgroundTransparency:80,profitBackgroundTransparency:80,drawBorder:!1,borderColor:"rgba( 102, 123, 139, 1)",compact:!1,riskDisplayMode:"percents",accountSize:1e3,risk:25},linetoolriskrewardlong:{clonable:!0,linecolor:"rgba( 88, 88, 88, 1)",linewidth:1,font:"Verdana",textcolor:"rgba(255, 255, 255, 1)",fontsize:12,fillLabelBackground:!0,labelBackgroundColor:"rgba( 88, 88, 88, 1)",labelBackgroundTransparency:0,fillBackground:!0,stopBackground:"rgba( 255, 0, 0, 0.2)",profitBackground:"rgba( 0, 160, 0, 0.2)",stopBackgroundTransparency:80,profitBackgroundTransparency:80,drawBorder:!1,borderColor:"rgba( 102, 123, 139, 1)",compact:!1,riskDisplayMode:"percents",accountSize:1e3,risk:25},linetoolarrow:{clonable:!0,linecolor:"rgba( 111, 136, 198, 1)",linewidth:2,linestyle:CanvasEx.LINESTYLE_SOLID,extendLeft:!1,extendRight:!1,leftEnd:f.Normal,rightEnd:f.Arrow,font:"Verdana",textcolor:"rgba( 21, 119, 96, 1)",fontsize:12,bold:!1,italic:!1,alwaysShowStats:!1,showMiddlePoint:!1,showPriceRange:!1,showBarsRange:!1,showDateTimeRange:!1,showDistance:!1,showAngle:!1,statsPosition:m.Right},linetoolray:{clonable:!0,linecolor:"rgba( 21, 153, 128, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID,extendLeft:!1,extendRight:!0,leftEnd:f.Normal,rightEnd:f.Normal,font:"Verdana",textcolor:"rgba( 21, 119, 96, 1)",fontsize:12,bold:!1,italic:!1,alwaysShowStats:!1,showMiddlePoint:!1,showPriceRange:!1,showBarsRange:!1,showDateTimeRange:!1,showDistance:!1,showAngle:!1,statsPosition:m.Right},linetoolextended:{clonable:!0,linecolor:"rgba( 21, 153, 128, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID,extendLeft:!0,extendRight:!0,leftEnd:f.Normal,rightEnd:f.Normal,font:"Verdana",textcolor:"rgba( 21, 119, 96, 1)",fontsize:12,bold:!1,italic:!1,alwaysShowStats:!1,showMiddlePoint:!1,showPriceRange:!1,showBarsRange:!1,showDateTimeRange:!1,showDistance:!1,showAngle:!1,statsPosition:m.Right},linetoolhorzline:{clonable:!0,linecolor:"rgba( 128, 204, 219, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID,showPrice:!0,
showLabel:!1,font:"Verdana",textcolor:"rgba( 21, 119, 96, 1)",fontsize:12,bold:!1,italic:!1,horzLabelsAlign:"center",vertLabelsAlign:"top"},linetoolhorzray:{clonable:!0,linecolor:"rgba( 128, 204, 219, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID,showPrice:!0,showLabel:!1,font:"Verdana",textcolor:"rgba( 21, 119, 96, 1)",fontsize:12,bold:!1,italic:!1,horzLabelsAlign:"center",vertLabelsAlign:"top"},linetoolvertline:{clonable:!0,linecolor:"rgba( 128, 204, 219, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID,showTime:!0},linetoolcrossline:{clonable:!0,linecolor:"rgba(6, 160, 227, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID,showPrice:!0,showTime:!0},linetoolcirclelines:{clonable:!0,trendline:{visible:!0,color:"rgba( 128, 128, 128, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_DASHED},linecolor:"rgba( 128, 204, 219, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID},linetoolfibtimezone:{horzLabelsAlign:"right",vertLabelsAlign:"bottom",clonable:!0,baselinecolor:"rgba( 128, 128, 128, 1)",linecolor:"rgba( 0, 85, 219, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID,showLabels:!0,font:"Verdana",fillBackground:!1,transparency:80,trendline:{visible:!0,color:"rgba( 128, 128, 128, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_DASHED},level1:y.c(0,"rgba( 128, 128, 128, 1)",!0),level2:y.c(1,"rgba( 0, 85, 219, 1)",!0),level3:y.c(2,"rgba( 0, 85, 219, 1)",!0),level4:y.c(3,"rgba( 0, 85, 219, 1)",!0),level5:y.c(5,"rgba( 0, 85, 219, 1)",!0),level6:y.c(8,"rgba( 0, 85, 219, 1)",!0),level7:y.c(13,"rgba( 0, 85, 219, 1)",!0),level8:y.c(21,"rgba( 0, 85, 219, 1)",!0),level9:y.c(34,"rgba( 0, 85, 219, 1)",!0),level10:y.c(55,"rgba( 0, 85, 219, 1)",!0),level11:y.c(89,"rgba( 0, 85, 219, 1)",!0),__collectibleLines:["trendline","level1","level2","level3","level4","level5","level6","level7","level8","level9","level10","level11"]},linetooltext:{clonable:!0,color:"rgba( 102, 123, 139, 1)",font:"Verdana",fontsize:20,fillBackground:!1,backgroundColor:"rgba( 91, 133, 191, 0.9)",backgroundTransparency:70,drawBorder:!1,borderColor:"rgba( 102, 123, 139, 1)",bold:!1,italic:!1,locked:!1,fixedSize:!0,wordWrap:!1,wordWrapWidth:400},linetooltextabsolute:{singleChartOnly:!0,clonable:!0,color:"rgba( 102, 123, 139, 1)",font:"Verdana",fontsize:20,fillBackground:!1,backgroundColor:"rgba( 155, 190, 213, 0.3)",backgroundTransparency:70,drawBorder:!1,borderColor:"rgba( 102, 123, 139, 1)",bold:!1,italic:!1,locked:!0,wordWrap:!1,wordWrapWidth:400},linetoolballoon:{clonable:!0,color:"rgba( 102, 123, 139, 1)",backgroundColor:"rgba( 255, 254, 206, 0.7)",borderColor:"rgba( 140, 140, 140, 1)",fontWeight:"bold",fontsize:12,font:"Arial",transparency:30},linetoolbrush:{clonable:!0,linecolor:"rgba( 53, 53, 53, 1)",linewidth:2,linestyle:CanvasEx.LINESTYLE_SOLID,smooth:5,fillBackground:!1,backgroundColor:"rgba( 21, 56, 153, 0.5)",transparency:50,leftEnd:f.Normal,rightEnd:f.Normal},linetoolpolyline:{clonable:!0,linecolor:"rgba( 53, 53, 53, 1)",linewidth:2,linestyle:CanvasEx.LINESTYLE_SOLID,fillBackground:!0,backgroundColor:"rgba( 21, 56, 153, 0.5)",transparency:50,
filled:!1},linetoolarrowmark:{clonable:!0,color:"rgba( 120, 120, 120, 1)",fontsize:20,font:"Verdana"},linetoolarrowmarkleft:{clonable:!0,color:"rgba( 120, 120, 120, 1)",fontsize:20,font:"Verdana"},linetoolarrowmarkup:{clonable:!0,color:"rgba( 120, 120, 120, 1)",fontsize:20,font:"Verdana"},linetoolarrowmarkright:{clonable:!0,color:"rgba( 120, 120, 120, 1)",fontsize:20,font:"Verdana"},linetoolarrowmarkdown:{clonable:!0,color:"rgba( 120, 120, 120, 1)",fontsize:20,font:"Verdana"},linetoolflagmark:{clonable:!0,color:"rgba( 255, 0, 0, 1)"},linetoolnote:{clonable:!0,markerColor:"rgba( 46, 102, 255, 1)",textColor:"rgba( 0, 0, 0, 1)",backgroundColor:"rgba( 255, 255, 255, 1)",backgroundTransparency:0,font:"Arial",fontSize:12,bold:!1,italic:!1,locked:!1,fixedSize:!0},linetoolnoteabsolute:{singleChartOnly:!0,clonable:!0,markerColor:"rgba( 46, 102, 255, 1)",textColor:"rgba( 0, 0, 0, 1)",backgroundColor:"rgba( 255, 255, 255, 1)",backgroundTransparency:0,font:"Arial",fontSize:12,bold:!1,italic:!1,locked:!0,fixedSize:!0},linetoolthumbup:{clonable:!0,color:"rgba( 0, 128, 0, 1)"},linetoolthumbdown:{clonable:!0,color:"rgba( 255, 0, 0, 1)"},linetoolpricelabel:{clonable:!0,color:"rgba( 102, 123, 139, 1)",backgroundColor:"rgba( 255, 255, 255, 0.7)",borderColor:"rgba( 140, 140, 140, 1)",fontWeight:"bold",fontsize:11,font:"Arial",transparency:30},linetoolrectangle:{clonable:!0,color:"rgba( 21, 56, 153, 1)",fillBackground:!0,backgroundColor:"rgba( 21, 56, 153, 0.5)",linewidth:1,snapTo45Degrees:!0,transparency:50},linetoolrotatedrectangle:{clonable:!0,color:"rgba( 152, 0, 255, 1)",fillBackground:!0,backgroundColor:"rgba( 142, 124, 195, 0.5)",transparency:50,linewidth:1,snapTo45Degrees:!0},linetoolellipse:{clonable:!0,color:"rgba( 153, 153, 21, 1)",fillBackground:!0,backgroundColor:"rgba( 153, 153, 21, 0.5)",transparency:50,linewidth:1},linetoolarc:{clonable:!0,color:"rgba( 153, 153, 21, 1)",fillBackground:!0,backgroundColor:"rgba( 153, 153, 21, 0.5)",transparency:50,linewidth:1},linetoolprediction:{singleChartOnly:!0,linecolor:"rgba( 28, 115, 219, 1)",linewidth:2,sourceBackColor:"rgba( 241, 241, 241, 1)",sourceTextColor:"rgba( 110, 110, 110, 1)",sourceStrokeColor:"rgba( 110, 110, 110, 1)",targetStrokeColor:"rgba( 47, 168, 255, 1)",targetBackColor:"rgba( 11, 111, 222, 1)",targetTextColor:"rgba( 255, 255, 255, 1)",successBackground:"rgba( 54, 160, 42, 0.9)",successTextColor:"rgba( 255, 255, 255, 1)",failureBackground:"rgba( 231, 69, 69, 0.5)",failureTextColor:"rgba( 255, 255, 255, 1)",intermediateBackColor:"rgba( 234, 210, 137, 1)",intermediateTextColor:"rgba( 109, 77, 34, 1)",transparency:10,centersColor:"rgba( 32, 32, 32, 1)"},linetooltriangle:{clonable:!0,color:"rgba( 153, 21, 21, 1)",fillBackground:!0,backgroundColor:"rgba( 153, 21, 21, 0.5)",transparency:50,linewidth:1},linetoolcallout:{clonable:!0,color:"rgba( 255, 255, 255, 1)",backgroundColor:"rgba( 153, 21, 21, 0.5)",transparency:50,linewidth:2,fontsize:12,font:"Verdana",bordercolor:"rgba( 153, 21, 21, 1)",bold:!1,italic:!1,wordWrap:!1,wordWrapWidth:400},linetoolparallelchannel:{
clonable:!0,linecolor:"rgba( 119, 52, 153, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID,extendLeft:!1,extendRight:!1,fillBackground:!0,backgroundColor:"rgba( 180, 167, 214, 0.5)",transparency:50,showMidline:!1,midlinecolor:"rgba( 119, 52, 153, 1)",midlinewidth:1,midlinestyle:CanvasEx.LINESTYLE_DASHED},linetoolelliottimpulse:{degree:7,clonable:!0,showWave:!0,color:"rgba( 61, 133, 198, 1)",linewidth:1},linetoolelliotttriangle:{degree:7,clonable:!0,showWave:!0,color:"rgba( 255, 152, 0, 1)",linewidth:1},linetoolelliotttriplecombo:{degree:7,clonable:!0,showWave:!0,color:"rgba( 106, 168, 79, 1)",linewidth:1},linetoolelliottcorrection:{degree:7,clonable:!0,showWave:!0,color:"rgba( 61, 133, 198, 1)",linewidth:1},linetoolelliottdoublecombo:{degree:7,clonable:!0,showWave:!0,color:"rgba( 106, 168, 79, 1)",linewidth:1},linetoolbarspattern:{singleChartOnly:!0,color:"rgba( 80, 145, 204, 1)",clonable:!0,mode:d.Bars,mirrored:!1,flipped:!1},linetoolghostfeed:{singleChartOnly:!0,clonable:!0,averageHL:20,variance:50,candleStyle:{upColor:"#6ba583",downColor:"#d75442",drawWick:!0,drawBorder:!0,borderColor:"#378658",borderUpColor:"#225437",borderDownColor:"#5b1a13",wickColor:"#737375"},transparency:50},study:{inputs:{},styles:{},palettes:{},bands:{},area:{},graphics:{},showInDataWindow:!0,visible:!0,showStudyArguments:!0,precision:"default"},linetoolpitchfork:{clonable:!0,fillBackground:!0,transparency:80,style:u.Original,median:{visible:!0,color:"rgba( 165, 0, 0, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID},level0:y.c(.25,"rgba( 160, 107, 0, 1)",!1),level1:y.c(.382,"rgba( 105, 158, 0, 1)",!1),level2:y.c(.5,"rgba( 0, 155, 0, 1)",!0),level3:y.c(.618,"rgba( 0, 153, 101, 1)",!1),level4:y.c(.75,"rgba( 0, 101, 153, 1)",!1),level5:y.c(1,"rgba( 0, 0, 153, 1)",!0),level6:y.c(1.5,"rgba( 102, 0, 153, 1)",!1),level7:y.c(1.75,"rgba( 153, 0, 102, 1)",!1),level8:y.c(2,"rgba( 165, 0, 0, 1)",!1),__collectibleLines:["median","level0","level1","level2","level3","level4","level5","level6","level7","level8"]},linetoolpitchfan:{clonable:!0,fillBackground:!0,transparency:80,median:{visible:!0,color:"rgba( 165, 0, 0, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID},level0:y.c(.25,"rgba( 160, 107, 0, 1)",!1),level1:y.c(.382,"rgba( 105, 158, 0, 1)",!1),level2:y.c(.5,"rgba( 0, 155, 0, 1)",!0),level3:y.c(.618,"rgba( 0, 153, 101, 1)",!1),level4:y.c(.75,"rgba( 0, 101, 153, 1)",!1),level5:y.c(1,"rgba( 0, 0, 153, 1)",!0),level6:y.c(1.5,"rgba( 102, 0, 153, 1)",!1),level7:y.c(1.75,"rgba( 153, 0, 102, 1)",!1),level8:y.c(2,"rgba( 165, 0, 0, 1)",!1),__collectibleLines:["median","level0","level1","level2","level3","level4","level5","level6","level7","level8"]},linetoolgannfan:{clonable:!0,showLabels:!0,font:"Verdana",fillBackground:!0,transparency:80,level1:y.f(1,8,"rgba( 160, 107, 0, 1)",!0),level2:y.f(1,4,"rgba( 105, 158, 0, 1)",!0),level3:y.f(1,3,"rgba( 0, 155, 0, 1)",!0),level4:y.f(1,2,"rgba( 0, 153, 101, 1)",!0),level5:y.f(1,1,"rgba( 128, 128, 128, 1)",!0),level6:y.f(2,1,"rgba( 0, 101, 153, 1)",!0),level7:y.f(3,1,"rgba( 0, 0, 153, 1)",!0),
level8:y.f(4,1,"rgba( 102, 0, 153, 1)",!0),level9:y.f(8,1,"rgba( 165, 0, 0, 1)",!0),__collectibleLines:["level1","level2","level3","level4","level5","level6","level7","level8","level9","level10","level11"]},linetoolganncomplex:{clonable:!0,fillBackground:!1,arcsBackground:{fillBackground:!0,transparency:80},reverse:!1,scaleRatio:"",showLabels:!0,labelsStyle:{font:"Verdana",fontSize:12,bold:!1,italic:!1},levels:[y.d("rgba( 128, 128, 128, 1)",!0,1),y.d("rgba( 160, 107, 0, 1)",!0,1),y.d("rgba( 105, 158, 0, 1)",!0,1),y.d("rgba( 0, 155, 0, 1)",!0,1),y.d("rgba( 0, 153, 101, 1)",!0,1),y.d("rgba( 128, 128, 128, 1)",!0,1)],fanlines:[y.e("rgba( 165, 0, 255, 1)",!1,1,8,1),y.e("rgba( 165, 0, 0, 1)",!1,1,5,1),y.e("rgba( 128, 128, 128, 1)",!1,1,4,1),y.e("rgba( 160, 107, 0, 1)",!1,1,3,1),y.e("rgba( 105, 158, 0, 1)",!0,1,2,1),y.e("rgba( 0, 155, 0, 1)",!0,1,1,1),y.e("rgba( 0, 153, 101, 1)",!0,1,1,2),y.e("rgba( 0, 153, 101, 1)",!1,1,1,3),y.e("rgba( 0, 0, 153, 1)",!1,1,1,4),y.e("rgba( 102, 0, 153, 1)",!1,1,1,5),y.e("rgba( 165, 0, 255, 1)",!1,1,1,8)],arcs:[y.e("rgba( 160, 107, 0, 1)",!0,1,1,0),y.e("rgba( 160, 107, 0, 1)",!0,1,1,1),y.e("rgba( 160, 107, 0, 1)",!0,1,1.5,0),y.e("rgba( 105, 158, 0, 1)",!0,1,2,0),y.e("rgba( 105, 158, 0, 1)",!0,1,2,1),y.e("rgba( 0, 155, 0, 1)",!0,1,3,0),y.e("rgba( 0, 155, 0, 1)",!0,1,3,1),y.e("rgba( 0, 153, 101, 1)",!0,1,4,0),y.e("rgba( 0, 153, 101, 1)",!0,1,4,1),y.e("rgba( 0, 0, 153, 1)",!0,1,5,0),y.e("rgba( 0, 0, 153, 1)",!0,1,5,1)],__collectibleLines:["trendline","levels.0","levels.1","levels.2","levels.3","levels.4","levels.5","fanlines.0","fanlines.1","fanlines.2","fanlines.3","fanlines.4","fanlines.5","fanlines.6","fanlines.7","fanlines.8","fanlines.9","fanlines.10","arcs.0","arcs.1","arcs.2","arcs.3","arcs.4","arcs.5","arcs.6","arcs.7","arcs.8","arcs.9","arcs.10"]},linetoolgannfixed:{clonable:!0,fillBackground:!1,arcsBackground:{fillBackground:!0,transparency:80},reverse:!1,levels:[y.d("rgba( 128, 128, 128, 1)",!0,1),y.d("rgba( 160, 107, 0, 1)",!0,1),y.d("rgba( 105, 158, 0, 1)",!0,1),y.d("rgba( 0, 155, 0, 1)",!0,1),y.d("rgba( 0, 153, 101, 1)",!0,1),y.d("rgba( 128, 128, 128, 1)",!0,1)],fanlines:[y.e("rgba( 165, 0, 255, 1)",!1,1,8,1),y.e("rgba( 165, 0, 0, 1)",!1,1,5,1),y.e("rgba( 128, 128, 128, 1)",!1,1,4,1),y.e("rgba( 160, 107, 0, 1)",!1,1,3,1),y.e("rgba( 105, 158, 0, 1)",!0,1,2,1),y.e("rgba( 0, 155, 0, 1)",!0,1,1,1),y.e("rgba( 0, 153, 101, 1)",!0,1,1,2),y.e("rgba( 0, 153, 101, 1)",!1,1,1,3),y.e("rgba( 0, 0, 153, 1)",!1,1,1,4),y.e("rgba( 102, 0, 153, 1)",!1,1,1,5),y.e("rgba( 165, 0, 255, 1)",!1,1,1,8)],arcs:[y.e("rgba( 160, 107, 0, 1)",!0,1,1,0),y.e("rgba( 160, 107, 0, 1)",!0,1,1,1),y.e("rgba( 160, 107, 0, 1)",!0,1,1.5,0),y.e("rgba( 105, 158, 0, 1)",!0,1,2,0),y.e("rgba( 105, 158, 0, 1)",!0,1,2,1),y.e("rgba( 0, 155, 0, 1)",!0,1,3,0),y.e("rgba( 0, 155, 0, 1)",!0,1,3,1),y.e("rgba( 0, 153, 101, 1)",!0,1,4,0),y.e("rgba( 0, 153, 101, 1)",!0,1,4,1),y.e("rgba( 0, 0, 153, 1)",!0,1,5,0),y.e("rgba( 0, 0, 153, 1)",!0,1,5,1)],
__collectibleLines:["trendline","levels.0","levels.1","levels.2","levels.3","levels.4","levels.5","fanlines.0","fanlines.1","fanlines.2","fanlines.3","fanlines.4","fanlines.5","fanlines.6","fanlines.7","fanlines.8","fanlines.9","fanlines.10","arcs.0","arcs.1","arcs.2","arcs.3","arcs.4","arcs.5","arcs.6","arcs.7","arcs.8","arcs.9","arcs.10"]},linetoolgannsquare:{clonable:!0,color:"rgba( 21, 56, 153, 0.8)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID,font:"Verdana",showTopLabels:!0,showBottomLabels:!0,showLeftLabels:!0,showRightLabels:!0,fillHorzBackground:!0,horzTransparency:80,fillVertBackground:!0,vertTransparency:80,reverse:!1,fans:y.a("rgba( 128, 128, 128, 1)",!1),hlevel1:y.b(0,"rgba( 128, 128, 128, 1)",!0),hlevel2:y.b(.25,"rgba( 160, 107, 0, 1)",!0),hlevel3:y.b(.382,"rgba( 105, 158, 0, 1)",!0),hlevel4:y.b(.5,"rgba( 0, 155, 0, 1)",!0),hlevel5:y.b(.618,"rgba( 0, 153, 101, 1)",!0),hlevel6:y.b(.75,"rgba( 0, 101, 153, 1)",!0),hlevel7:y.b(1,"rgba( 128, 128, 128, 1)",!0),vlevel1:y.b(0,"rgba( 128, 128, 128, 1)",!0),vlevel2:y.b(.25,"rgba( 160, 107, 0, 1)",!0),vlevel3:y.b(.382,"rgba( 105, 158, 0, 1)",!0),vlevel4:y.b(.5,"rgba( 0, 155, 0, 1)",!0),vlevel5:y.b(.618,"rgba( 0, 153, 101, 1)",!0),vlevel6:y.b(.75,"rgba( 0, 101, 153, 1)",!0),vlevel7:y.b(1,"rgba( 128, 128, 128, 1)",!0),__collectibleLines:["fans","hlevel1","hlevel2","hlevel3","hlevel4","hlevel5","hlevel6","hlevel7","vlevel1","vlevel2","vlevel3","vlevel4","vlevel5","vlevel6","vlevel7"]},linetoolfibspeedresistancefan:{clonable:!0,fillBackground:!0,transparency:80,grid:{color:"rgba( 128, 128, 128, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID,visible:!0},linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID,font:"Verdana",showTopLabels:!0,showBottomLabels:!0,showLeftLabels:!0,showRightLabels:!0,snapTo45Degrees:!0,hlevel1:y.b(0,"rgba( 128, 128, 128, 1)",!0),hlevel2:y.b(.25,"rgba( 160, 107, 0, 1)",!0),hlevel3:y.b(.382,"rgba( 105, 158, 0, 1)",!0),hlevel4:y.b(.5,"rgba( 0, 155, 0, 1)",!0),hlevel5:y.b(.618,"rgba( 0, 153, 101, 1)",!0),hlevel6:y.b(.75,"rgba( 0, 101, 153, 1)",!0),hlevel7:y.b(1,"rgba( 128, 128, 128, 1)",!0),vlevel1:y.b(0,"rgba( 128, 128, 128, 1)",!0),vlevel2:y.b(.25,"rgba( 160, 107, 0, 1)",!0),vlevel3:y.b(.382,"rgba( 105, 158, 0, 1)",!0),vlevel4:y.b(.5,"rgba( 0, 155, 0, 1)",!0),vlevel5:y.b(.618,"rgba( 0, 153, 101, 1)",!0),vlevel6:y.b(.75,"rgba( 0, 101, 153, 1)",!0),vlevel7:y.b(1,"rgba( 128, 128, 128, 1)",!0),__collectibleLines:["trendline","hlevel1","hlevel2","hlevel3","hlevel4","hlevel5","hlevel6","hlevel7","vlevel1","vlevel2","vlevel3","vlevel4","vlevel5","vlevel6","vlevel7"]},linetoolfibretracement:{clonable:!0,showCoeffs:!0,showPrices:!0,font:"Verdana",fillBackground:!0,transparency:80,extendLines:!1,horzLabelsAlign:"left",vertLabelsAlign:"middle",reverse:!1,coeffsAsPercents:!1,trendline:{visible:!0,color:"rgba( 128, 128, 128, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_DASHED},levelsStyle:{linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID},level1:y.b(0,"rgba( 128, 128, 128, 1)",!0),level2:y.b(.236,"rgba( 204, 40, 40, 1)",!0),
level3:y.b(.382,"rgba( 149, 204, 40, 1)",!0),level4:y.b(.5,"rgba( 40, 204, 40, 1)",!0),level5:y.b(.618,"rgba( 40, 204, 149, 1)",!0),level6:y.b(.786,"rgba( 40, 149, 204, 1)",!0),level7:y.b(1,"rgba( 128, 128, 128, 1)",!0),level8:y.b(1.618,"rgba( 40, 40, 204, 1)",!0),level9:y.b(2.618,"rgba( 204, 40, 40, 1)",!0),level10:y.b(3.618,"rgba( 149, 40, 204, 1)",!0),level11:y.b(4.236,"rgba( 204, 40, 149, 1)",!0),level12:y.b(1.272,"rgba( 149, 204, 40, 1)",!1),level13:y.b(1.414,"rgba( 204, 40, 40, 1)",!1),level16:y.b(2,"rgba( 40, 204, 149, 1)",!1),level14:y.b(2.272,"rgba( 149, 204, 40, 1)",!1),level15:y.b(2.414,"rgba( 40, 204, 40, 1)",!1),level17:y.b(3,"rgba( 40, 149, 204, 1)",!1),level18:y.b(3.272,"rgba( 128, 128, 128, 1)",!1),level19:y.b(3.414,"rgba( 40, 40, 204, 1)",!1),level20:y.b(4,"rgba( 204, 40, 40, 1)",!1),level21:y.b(4.272,"rgba( 149, 40, 204, 1)",!1),level22:y.b(4.414,"rgba( 204, 40, 149, 1)",!1),level23:y.b(4.618,"rgba( 149, 204, 40, 1)",!1),level24:y.b(4.764,"rgba( 40, 204, 149, 1)",!1),__collectibleLines:["trendline","level1","level2","level3","level4","level5","level6","level7","level8","level9","level10","level11","level12","level13","level14","level15","level16","level17","level18","level19","level20","level21","level22","level23","level24"]},linetoolfibchannel:{clonable:!0,showCoeffs:!0,showPrices:!0,font:"Verdana",fillBackground:!0,transparency:80,extendLeft:!1,extendRight:!1,horzLabelsAlign:"left",vertLabelsAlign:"middle",coeffsAsPercents:!1,levelsStyle:{linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID},level1:y.b(0,"rgba( 128, 128, 128, 1)",!0),level2:y.b(.236,"rgba( 204, 40, 40, 1)",!0),level3:y.b(.382,"rgba( 149, 204, 40, 1)",!0),level4:y.b(.5,"rgba( 40, 204, 40, 1)",!0),level5:y.b(.618,"rgba( 40, 204, 149, 1)",!0),level6:y.b(.786,"rgba( 40, 149, 204, 1)",!0),level7:y.b(1,"rgba( 128, 128, 128, 1)",!0),level8:y.b(1.618,"rgba( 40, 40, 204, 1)",!0),level9:y.b(2.618,"rgba( 204, 40, 40, 1)",!0),level10:y.b(3.618,"rgba( 149, 40, 204, 1)",!0),level11:y.b(4.236,"rgba( 204, 40, 149, 1)",!0),level12:y.b(1.272,"rgba( 149, 204, 40, 1)",!1),level13:y.b(1.414,"rgba( 204, 40, 40, 1)",!1),level16:y.b(2,"rgba( 40, 204, 149, 1)",!1),level14:y.b(2.272,"rgba( 149, 204, 40, 1)",!1),level15:y.b(2.414,"rgba( 40, 204, 40, 1)",!1),level17:y.b(3,"rgba( 40, 149, 204, 1)",!1),level18:y.b(3.272,"rgba( 128, 128, 128, 1)",!1),level19:y.b(3.414,"rgba( 40, 40, 204, 1)",!1),level20:y.b(4,"rgba( 204, 40, 40, 1)",!1),level21:y.b(4.272,"rgba( 149, 40, 204, 1)",!1),level22:y.b(4.414,"rgba( 204, 40, 149, 1)",!1),level23:y.b(4.618,"rgba( 149, 204, 40, 1)",!1),level24:y.b(4.764,"rgba( 40, 204, 149, 1)",!1),__collectibleLines:["level1","level2","level3","level4","level5","level6","level7","level8","level9","level10","level11","level12","level13","level14","level15","level16","level17","level18","level19","level20","level21","level22","level23","level24"]},linetoolprojection:{clonable:!0,showCoeffs:!0,font:"Verdana",fillBackground:!0,transparency:80,color1:"rgba( 0, 128, 0, 0.2)",color2:"rgba( 255, 0, 0, 0.2)",linewidth:1,trendline:{visible:!0,
color:"rgba( 128, 128, 128, 1)",linestyle:CanvasEx.LINESTYLE_SOLID},level1:y.c(1,"rgba( 128, 128, 128, 1)",!0)},linetool5pointspattern:{clonable:!0,color:"rgba( 204, 40, 149, 1)",textcolor:"rgba( 255, 255, 255, 1)",fillBackground:!0,backgroundColor:"rgba( 204, 40, 149, 0.5)",font:"Verdana",fontsize:12,bold:!1,italic:!1,transparency:50,linewidth:1},linetoolcypherpattern:{clonable:!0,color:"#CC2895",textcolor:"#FFFFFF",fillBackground:!0,backgroundColor:"#CC2895",font:"Verdana",fontsize:12,bold:!1,italic:!1,transparency:50,linewidth:1},linetooltrianglepattern:{clonable:!0,color:"rgba( 149, 40, 255, 1)",textcolor:"rgba( 255, 255, 255, 1)",fillBackground:!0,backgroundColor:"rgba( 149, 40, 204, 0.5)",font:"Verdana",fontsize:12,bold:!1,italic:!1,transparency:50,linewidth:1},linetoolabcd:{clonable:!0,color:"rgba( 0, 155, 0, 1)",textcolor:"rgba( 255, 255, 255, 1)",font:"Verdana",fontsize:12,bold:!1,italic:!1,linewidth:2},linetoolthreedrivers:{clonable:!0,color:"rgba( 149, 40, 255, 1)",textcolor:"rgba( 255, 255, 255, 1)",fillBackground:!0,backgroundColor:"rgba( 149, 40, 204, 0.5)",font:"Verdana",fontsize:12,bold:!1,italic:!1,transparency:50,linewidth:2},linetoolheadandshoulders:{clonable:!0,color:"rgba( 69, 104, 47, 1)",textcolor:"rgba( 255, 255, 255, 1)",fillBackground:!0,backgroundColor:"rgba( 69, 168, 47, 0.5)",font:"Verdana",fontsize:12,bold:!1,italic:!1,transparency:50,linewidth:2},linetoolfibwedge:{singleChartOnly:!0,clonable:!0,showCoeffs:!0,font:"Verdana",fillBackground:!0,transparency:80,trendline:{visible:!0,color:"rgba( 128, 128, 128, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID},level1:y.c(.236,"rgba( 204, 40, 40, 1)",!0),level2:y.c(.382,"rgba( 149, 204, 40, 1)",!0),level3:y.c(.5,"rgba( 40, 204, 40, 1)",!0),level4:y.c(.618,"rgba( 40, 204, 149, 1)",!0),level5:y.c(.786,"rgba( 40, 149, 204, 1)",!0),level6:y.c(1,"rgba( 128, 128, 128, 1)",!0),level7:y.c(1.618,"rgba( 40, 40, 204, 1)",!1),level8:y.c(2.618,"rgba( 204, 40, 40, 1)",!1),level9:y.c(3.618,"rgba( 149, 40, 204, 1)",!1),level10:y.c(4.236,"rgba( 204, 40, 149, 1)",!1),level11:y.c(4.618,"rgba( 204, 40, 149, 1)",!1),__collectibleLines:["trendline","level1","level2","level3","level4","level5","level6","level7","level8","level9","level10","level11"]},linetoolfibcircles:{clonable:!0,showCoeffs:!0,font:"Verdana",fillBackground:!0,transparency:80,snapTo45Degrees:!0,coeffsAsPercents:!1,trendline:{visible:!0,color:"rgba( 128, 128, 128, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_DASHED},level1:y.c(.236,"rgba( 204, 40, 40, 1)",!0),level2:y.c(.382,"rgba( 149, 204, 40, 1)",!0),level3:y.c(.5,"rgba( 40, 204, 40, 1)",!0),level4:y.c(.618,"rgba( 40, 204, 149, 1)",!0),level5:y.c(.786,"rgba( 40, 149, 204, 1)",!0),level6:y.c(1,"rgba( 128, 128, 128, 1)",!0),level7:y.c(1.618,"rgba( 40, 40, 204, 1)",!0),level8:y.c(2.618,"rgba( 204, 40, 40, 1)",!0),level9:y.c(3.618,"rgba( 149, 40, 204, 1)",!0),level10:y.c(4.236,"rgba( 204, 40, 149, 1)",!0),level11:y.c(4.618,"rgba( 204, 40, 149, 1)",!0),
__collectibleLines:["trendline","level1","level2","level3","level4","level5","level6","level7","level8","level9","level10","level11"]},linetoolfibspeedresistancearcs:{clonable:!0,showCoeffs:!0,font:"Verdana",fillBackground:!0,transparency:80,fullCircles:!1,trendline:{visible:!0,color:"rgba( 128, 128, 128, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_DASHED},level1:y.c(.236,"rgba( 204, 40, 40, 1)",!0),level2:y.c(.382,"rgba( 149, 204, 40, 1)",!0),level3:y.c(.5,"rgba( 40, 204, 40, 1)",!0),level4:y.c(.618,"rgba( 40, 204, 149, 1)",!0),level5:y.c(.786,"rgba( 40, 149, 204, 1)",!0),level6:y.c(1,"rgba( 128, 128, 128, 1)",!0),level7:y.c(1.618,"rgba( 40, 40, 204, 1)",!0),level8:y.c(2.618,"rgba( 204, 40, 40, 1)",!0),level9:y.c(3.618,"rgba( 149, 40, 204, 1)",!0),level10:y.c(4.236,"rgba( 204, 40, 149, 1)",!0),level11:y.c(4.618,"rgba( 204, 40, 149, 1)",!0),__collectibleLines:["trendline","level1","level2","level3","level4","level5","level6","level7","level8","level9","level10","level11"]},linetooltrendbasedfibextension:{clonable:!0,showCoeffs:!0,showPrices:!0,font:"Verdana",fillBackground:!0,transparency:80,extendLines:!1,horzLabelsAlign:"left",vertLabelsAlign:"middle",reverse:!1,coeffsAsPercents:!1,trendline:{visible:!0,color:"rgba( 128, 128, 128, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_DASHED},levelsStyle:{linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID},level1:y.b(0,"rgba( 128, 128, 128, 1)",!0),level2:y.b(.236,"rgba( 204, 40, 40, 1)",!0),level3:y.b(.382,"rgba( 149, 204, 40, 1)",!0),level4:y.b(.5,"rgba( 40, 204, 40, 1)",!0),level5:y.b(.618,"rgba( 40, 204, 149, 1)",!0),level6:y.b(.786,"rgba( 40, 149, 204, 1)",!0),level7:y.b(1,"rgba( 128, 128, 128, 1)",!0),level8:y.b(1.618,"rgba( 40, 40, 204, 1)",!0),level9:y.b(2.618,"rgba( 204, 40, 40, 1)",!0),level10:y.b(3.618,"rgba( 149, 40, 204, 1)",!0),level11:y.b(4.236,"rgba( 204, 40, 149, 1)",!0),level12:y.b(1.272,"rgba( 149, 204, 40, 1)",!1),level13:y.b(1.414,"rgba( 204, 40, 40, 1)",!1),level16:y.b(2,"rgba( 40, 204, 149, 1)",!1),level14:y.b(2.272,"rgba( 149, 204, 40, 1)",!1),level15:y.b(2.414,"rgba( 40, 204, 40, 1)",!1),level17:y.b(3,"rgba( 40, 149, 204, 1)",!1),level18:y.b(3.272,"rgba( 128, 128, 128, 1)",!1),level19:y.b(3.414,"rgba( 40, 40, 204, 1)",!1),level20:y.b(4,"rgba( 204, 40, 40, 1)",!1),level21:y.b(4.272,"rgba( 149, 40, 204, 1)",!1),level22:y.b(4.414,"rgba( 204, 40, 149, 1)",!1),level23:y.b(4.618,"rgba( 149, 204, 40, 1)",!1),level24:y.b(4.764,"rgba( 40, 204, 149, 1)",!1),__collectibleLines:["trendline","level1","level2","level3","level4","level5","level6","level7","level8","level9","level10","level11","level12","level13","level14","level15","level16","level17","level18","level19","level20","level21","level22","level23","level24"]},linetooltrendbasedfibtime:{clonable:!0,showCoeffs:!0,font:"Verdana",fillBackground:!0,transparency:80,horzLabelsAlign:"right",vertLabelsAlign:"bottom",trendline:{visible:!0,color:"rgba( 128, 128, 128, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_DASHED},level1:y.c(0,"rgba( 128, 128, 128, 1)",!0),level2:y.c(.382,"rgba( 204, 40, 40, 1)",!0),
level3:y.c(.5,"rgba( 149, 204, 40, 1)",!1),level4:y.c(.618,"rgba( 40, 204, 40, 1)",!0),level5:y.c(1,"rgba( 40, 204, 149, 1)",!0),level6:y.c(1.382,"rgba( 40, 149, 204, 1)",!0),level7:y.c(1.618,"rgba( 128, 128, 128, 1)",!0),level8:y.c(2,"rgba( 40, 40, 204, 1)",!0),level9:y.c(2.382,"rgba( 204, 40, 40, 1)",!0),level10:y.c(2.618,"rgba( 149, 40, 204, 1)",!0),level11:y.c(3,"rgba( 204, 40, 149, 1)",!0),__collectibleLines:["trendline","level1","level2","level3","level4","level5","level6","level7","level8","level9","level10","level11"]},linetoolschiffpitchfork:{clonable:!0,fillBackground:!0,transparency:80,style:u.Schiff,median:{visible:!0,color:"rgba( 165, 0, 0, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID},level0:y.c(.25,"rgba( 160, 107, 0, 1)",!1),level1:y.c(.382,"rgba( 105, 158, 0, 1)",!1),level2:y.c(.5,"rgba( 0, 155, 0, 1)",!0),level3:y.c(.618,"rgba( 0, 153, 101, 1)",!1),level4:y.c(.75,"rgba( 0, 101, 153, 1)",!1),level5:y.c(1,"rgba( 0, 0, 153, 1)",!0),level6:y.c(1.5,"rgba( 102, 0, 153, 1)",!1),level7:y.c(1.75,"rgba( 153, 0, 102, 1)",!1),level8:y.c(2,"rgba( 165, 0, 0, 1)",!1),__collectibleLines:["median","level0","level1","level2","level3","level4","level5","level6","level7","level8"]},linetoolschiffpitchfork2:{clonable:!0,fillBackground:!0,transparency:80,style:u.Schiff2,median:{visible:!0,color:"rgba( 165, 0, 0, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID},level0:y.c(.25,"rgba( 160, 107, 0, 1)",!1),level1:y.c(.382,"rgba( 105, 158, 0, 1)",!1),level2:y.c(.5,"rgba( 0, 155, 0, 1)",!0),level3:y.c(.618,"rgba( 0, 153, 101, 1)",!1),level4:y.c(.75,"rgba( 0, 101, 153, 1)",!1),level5:y.c(1,"rgba( 0, 0, 153, 1)",!0),level6:y.c(1.5,"rgba( 102, 0, 153, 1)",!1),level7:y.c(1.75,"rgba( 153, 0, 102, 1)",!1),level8:y.c(2,"rgba( 165, 0, 0, 1)",!1),__collectibleLines:["median","level0","level1","level2","level3","level4","level5","level6","level7","level8"]},linetoolinsidepitchfork:{clonable:!0,fillBackground:!0,transparency:80,style:u.Inside,median:{visible:!0,color:"rgba( 165, 0, 0, 1)",linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID},level0:y.c(.25,"rgba( 160, 107, 0, 1)",!1),level1:y.c(.382,"rgba( 105, 158, 0, 1)",!1),level2:y.c(.5,"rgba( 0, 155, 0, 1)",!0),level3:y.c(.618,"rgba( 0, 153, 101, 1)",!1),level4:y.c(.75,"rgba( 0, 101, 153, 1)",!1),level5:y.c(1,"rgba( 0, 0, 153, 1)",!0),level6:y.c(1.5,"rgba( 102, 0, 153, 1)",!1),level7:y.c(1.75,"rgba( 153, 0, 102, 1)",!1),level8:y.c(2,"rgba( 165, 0, 0, 1)",!1),__collectibleLines:["median","level0","level1","level2","level3","level4","level5","level6","level7","level8"]},linetool:{frozen:!1,visible:!0},linetoolvisibilities:{intervalsVisibilities:{seconds:!0,secondsFrom:1,secondsTo:59,minutes:!0,minutesFrom:1,minutesTo:59,hours:!0,hoursFrom:1,hoursTo:24,days:!0,daysFrom:1,daysTo:366,weeks:!0,months:!0,ranges:!0}}},o(TradingView.defaultProperties.chartproperties),r()}for(void 0===TradingView.defaultProperties["study_MA@tv-basicstudies"]&&(TradingView.defaultProperties["study_MA@tv-basicstudies"]={description:"Moving Average",shortDescription:"MA",inputs:{length:9,source:"close"},
styles:{MovAvg:{visible:!0,color:"rgba( 4, 150, 255, 1)",linestyle:CanvasEx.LINESTYLE_SOLID,linewidth:1,plottype:p.Line,histogramBase:0,title:"MA"}}}),void 0===TradingView.defaultProperties["study_PivotPointsHighLow@tv-basicstudies"]&&(TradingView.defaultProperties["study_PivotPointsHighLow@tv-basicstudies"]={font:"Arial",fontsize:10,borderColor:"rgba( 83, 143, 31, 1)",backColor:"rgba( 240, 255, 204, 1)",textColor:"rgba( 0, 0, 0, 1)"}),void 0===TradingView.defaultProperties["study_PivotPointsStandard@tv-basicstudies"]&&(i="rgba( 212, 121, 40, 1)",n=!0,s=1,TradingView.defaultProperties["study_PivotPointsStandard@tv-basicstudies"]={_hardCodedDefaultsVersion:1,font:"Arial",fontsize:11,levelsStyle:{showLabels:!0,visibility:{P:n,"S1/R1":n,"S2/R2":n,"S3/R3":n,"S4/R4":n,"S5/R5":n},colors:{P:i,"S1/R1":i,"S2/R2":i,"S3/R3":i,"S4/R4":i,"S5/R5":i},widths:{P:s,"S1/R1":s,"S2/R2":s,"S3/R3":s,"S4/R4":s,"S5/R5":s}}}),void 0===TradingView.defaultProperties["study_ZigZag@tv-basicstudies"]&&(TradingView.defaultProperties["study_ZigZag@tv-basicstudies"]={color:"rgba( 86, 135, 29, 1)",linewidth:2}),void 0===TradingView.defaultProperties["study_ElliottWave@tv-basicstudies"]&&(TradingView.defaultProperties["study_ElliottWave@tv-basicstudies"]={inputs:{},level0:y.a("rgba( 255, 0, 0, 1)",!1),level1:y.a("rgba( 0, 128, 0, 1)",!1),level2:y.a("rgba( 0, 0, 255, 1)",!1),level3:y.a("rgba( 255, 0, 255, 1)",!1),level4:y.a("rgba( 0, 128, 255, 1)",!0),level5:y.a("rgba( 255, 0, 0, 1)",!0),level6:y.a("rgba( 0, 128, 0, 1)",!0),level7:y.a("rgba( 0, 0, 255, 1)",!0),level8:y.a("rgba( 255, 0, 255, 1)",!0)}),void 0===TradingView.defaultProperties["study_LinearRegression@tv-basicstudies"]&&(TradingView.defaultProperties["study_LinearRegression@tv-basicstudies"]={styles:{upLine:{visible:!0,color:"rgba( 0, 0, 255, 0.3)",linestyle:CanvasEx.LINESTYLE_SOLID,linewidth:1},downLine:{visible:!0,color:"rgba( 0, 0, 255, 0.3)",linestyle:CanvasEx.LINESTYLE_SOLID,linewidth:1},baseLine:{visible:!0,color:"rgba( 255, 0, 0, 0.3)",linestyle:CanvasEx.LINESTYLE_SOLID,linewidth:1},extendLines:!0,showPearsons:!0,backgroundColor:"rgba( 153, 21, 21, 0.3)",transparency:70}}),void 0===TradingView.defaultProperties["study_RegressionTrend@tv-basicstudies"]&&(TradingView.defaultProperties["study_RegressionTrend@tv-basicstudies"]={linewidth:1,linestyle:CanvasEx.LINESTYLE_SOLID,styles:{upLine:{visible:!0,color:"rgba( 0, 0, 255, 0.3)",linestyle:CanvasEx.LINESTYLE_SOLID,linewidth:1},downLine:{visible:!0,color:"rgba( 0, 0, 255, 0.3)",linestyle:CanvasEx.LINESTYLE_SOLID,linewidth:1},baseLine:{visible:!0,color:"rgba( 255, 0, 0, 0.3)",linestyle:CanvasEx.LINESTYLE_SOLID,linewidth:1},extendLines:!1,showPearsons:!0,transparency:70}}),void 0===TradingView.defaultProperties["study_Compare@tv-basicstudies"]&&(TradingView.defaultProperties["study_Compare@tv-basicstudies"]={minTick:"default"}),void 0===TradingView.defaultProperties["study_Overlay@tv-basicstudies"]&&(a="study_Overlay@tv-basicstudies",TradingView.defaultProperties[a]={style:h.STYLE_BARS,showPriceLine:!1,minTick:"default",candleStyle:{
upColor:"rgba( 107, 165, 131, 1)",downColor:"rgba( 215, 84, 66, 1)",drawWick:!0,drawBorder:!0,borderColor:"rgba( 55, 134, 88, 1)",borderUpColor:"rgba( 34, 84, 55, 1)",borderDownColor:"rgba( 91, 26, 19, 1)",wickColor:"rgba( 115, 115, 117, 1)",wickUpColor:"rgba( 115, 115, 117, 1)",wickDownColor:"rgba( 115, 115, 117, 1)",barColorsOnPrevClose:!1},hollowCandleStyle:{upColor:"rgba( 107, 165, 131, 1)",downColor:"rgba( 215, 84, 66, 1)",drawWick:!0,drawBorder:!0,borderColor:"rgba( 55, 134, 88, 1)",borderUpColor:"rgba( 34, 84, 55, 1)",borderDownColor:"rgba( 91, 26, 19, 1)",wickColor:"rgba( 115, 115, 117, 1)",wickUpColor:"rgba( 115, 115, 117, 1)",wickDownColor:"rgba( 115, 115, 117, 1)",barColorsOnPrevClose:!1},barStyle:{upColor:"rgba( 107, 165, 131, 1)",downColor:"rgba( 215, 84, 66, 1)",barColorsOnPrevClose:!1,dontDrawOpen:!1},lineStyle:{color:"rgba( 3, 3, 247, 1)",linestyle:CanvasEx.LINESTYLE_SOLID,linewidth:1,priceSource:"close",styleType:h.STYLE_LINE_TYPE_SIMPLE},areaStyle:{color1:"rgba( 96, 96, 144, 0.5)",color2:"rgba( 1, 246, 245, 0.5)",linecolor:"rgba( 0, 148, 255, 1)",linestyle:CanvasEx.LINESTYLE_SOLID,linewidth:1,priceSource:"close",transparency:50},baselineStyle:{baselineColor:"rgba( 117, 134, 150, 1)",topFillColor1:"rgba( 83, 185, 135, 0.1)",topFillColor2:"rgba( 83, 185, 135, 0.1)",bottomFillColor1:"rgba( 235, 77, 92, 0.1)",bottomFillColor2:"rgba( 235, 77, 92, 0.1)",topLineColor:"rgba( 83, 185, 135, 1)",bottomLineColor:"rgba( 235, 77, 92, 1)",topLineWidth:1,bottomLineWidth:1,priceSource:"close",transparency:50,baseLevelPercentage:50},styles:{open:{visible:!0,color:"rgba( 255, 0, 0, 1)",linestyle:CanvasEx.LINESTYLE_SOLID,linewidth:1,plottype:p.Line,histogramBase:0},high:{visible:!0,color:"rgba( 255, 0, 0, 1)",linestyle:CanvasEx.LINESTYLE_SOLID,linewidth:1,plottype:p.Line,histogramBase:0},low:{visible:!0,color:"rgba( 255, 0, 0, 1)",linestyle:CanvasEx.LINESTYLE_SOLID,linewidth:1,plottype:p.Line,histogramBase:0},close:{visible:!0,color:"rgba( 255, 0, 0, 1)",linestyle:CanvasEx.LINESTYLE_SOLID,linewidth:1,plottype:p.Line,histogramBase:0}}}),l=t.split("."),c=TradingView.defaultProperties,g=0;g<l.length;g++)c&&(c=c[l[g]]);return c?TradingView.clone(c):{}};s.create=function(t,e){if(e){var i=y(t);TradingView.defaultProperties[t]=$.extend(e,i)}},s.remove=function(t){TradingView.defaultProperties[t]=void 0},TradingView.saveDefaults=function(t,e){TVSettings.setJSON(t,e)},TradingView.factoryDefaults=y,window.applyDefaultOverridesToLinetools=r,window.applyDefaultsOverrides=o,window.applyPropertiesOverrides=n,window.defaults=s,e.applyDefaultOverridesToLinetools=r,e.applyDefaultsOverrides=o,e.applyPropertiesOverrides=n,e.defaults=s,e.factoryDefaults=y,e.saveDefaults=TradingView.saveDefaults},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return t.reduce(function(t,e,i){return~t.indexOf(e)||t.push(e),t},[])},t.exports=e.default},function(t,e,i){"use strict";function n(t,e){var i,n=Promise.reject();for(i=0;i<e;++i)n=n.catch(t);return n}Object.defineProperty(e,"__esModule",{value:!0}),
e.retries=n},function(t,e,i){"use strict";var n,o,r,s,a;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"ResizerDetacherState",function(){return a}),n=i(6),i.n(n),o=i(15),r=i.n(o),s=i(14),i.n(s),a=function(){function t(t){var e=this;this._alive=new r.a,this._body=new r.a,this._width=new r.a,this._height=new r.a,this._fullscreen=new r.a,this._detachable=new r.a,this._fullscreenable=new r.a,this._visible=new r.a,this._availWidth=new r.a,this._availHeight=new r.a,this._owner=new r.a,this._ownersStack=[],this.owner=this._owner.readonly(),this._bridge={alive:this._alive.readonly(),body:this._body.readonly(),width:this._width.readonly(),height:this._height.readonly(),fullscreen:this._fullscreen.readonly(),detachable:this._detachable.readonly(),fullscreenable:this._fullscreenable.readonly(),visible:this._visible.readonly(),availWidth:this._availWidth.readonly(),availHeight:this._availHeight.readonly(),remove:function(){var t=e._owner.value();t&&t.remove&&t.remove()},negotiateWidth:function(t){var i=e._owner.value();i&&i.negotiateWidth&&i.negotiateWidth(t)},negotiateHeight:function(t){var i=e._owner.value();i&&i.negotiateHeight&&i.negotiateHeight(t)},requestFullscreen:function(){var t=e._owner.value();t&&t.requestFullscreen&&t.requestFullscreen()},exitFullscreen:function(){var t=e._owner.value();t&&t.exitFullscreen&&t.exitFullscreen()},detach:function(t){var i=e._owner.value();i&&i.detach&&i.detach(t)},attach:function(){var t=e._owner.value();t&&t.attach&&t.attach()}},t&&this.pushOwner(t)}return t.prototype.bridge=function(){return this._bridge},t.prototype.pushOwner=function(t){var e,i,n,o;if(t.alive.value()){for(e=0,i=this._ownersStack;e<i.length;e++)n=i[e],this._unsubscribeOwner(n);o={owner:t},this._ownersStack.push(o),this._subscribeOwner(o)}},t.prototype._subscribeOwner=function(t){var e,i,n=this,o=t.owner;t.deathWatcher||(this._alive.setValue(!0),t.deathWatcher=o.alive.spawn(),t.deathWatcher.subscribe(function(e){e||n._deadHandler(t)})),this._owner.setValue(o),t.subscriptions||(e=t.subscriptions=[],this._visible.setValue(!1),i=function(t,i){if(t){var n=t.spawn();e.push(n),n.subscribe(function(t){i.setValue(t)},{callWithLast:!0})}else i.deleteValue()},i(o.body,this._body),i(o.width,this._width),i(o.height,this._height),i(o.fullscreen,this._fullscreen),i(o.detachable,this._detachable),i(o.fullscreenable,this._fullscreenable),i(o.availWidth,this._availWidth),i(o.availHeight,this._availHeight),i(o.visible,this._visible))},t.prototype._unsubscribeOwner=function(t,e){var i,n,o;if(t.subscriptions){for(i=0,n=t.subscriptions;i<n.length;i++)o=n[i],o.unsubscribe();t.subscriptions=null}e&&t.deathWatcher&&(t.deathWatcher.unsubscribe(),t.deathWatcher=null)},t.prototype._deadHandler=function(t){var e,i=this._ownersStack.indexOf(t);for(Object(n.assert)(-1!==i,"sanitized owner should be in stack"),e=this._ownersStack.length-1;e>=i;e--)this._unsubscribeOwner(this._ownersStack[e],!0);this._ownersStack.length=i,i>0?this._subscribeOwner(this._ownersStack[i-1]):(this._alive.setValue(!1),this._owner.deleteValue())},t}()
},function(t,e,i){"use strict";(function(e){var i=[{d:"E-Mini S&P 500",t:"ES"},{d:"E-Mini Nasdaq 100",t:"NQ"},{d:"Gold",t:"GC"},{d:"Silver",t:"SI"},{d:"Crude Oil WTI",t:"CL"},{d:"Natural Gas",t:"NG"},{d:"Australian Dollar",t:"6A"},{d:"Australian Dollar (Floor)",t:"AD"},{d:"Euro FX",t:"6E"},{d:"Euro FX (Floor)",t:"EC"},{d:"Corn",t:"ZC"},{d:"Corn (Floor)",t:"C"},{d:"Eurodollar",t:"GE"},{d:"Eurodollar (Floor)",t:"ED"}],n=function(){function t(t,e){var i=function(){};return i.prototype=e.prototype,t.prototype=new i,t}function n(t){return t.replace(/[\^\$\(\)\[\]\{\}\*\+\?\|\\]/g,"\\$&")}function o(){}function r(t){this.value=t}function s(){}function a(){}function l(){}function c(){}function h(){}function u(){}function d(){}function p(){}function _(t){this.value=t}function f(t){this.value=t}function m(t){this.value=t}function g(){_.apply(this,arguments)}function y(){f.apply(this,arguments)}function v(t,e){var i,n,o,s,a,l,c,h,u=[];t:for(;i=j.exec(t);){for(n=H.length;n--;)if(i[n+1]){H[n].ctor&&(o=new H[n].ctor(i[n+1]),o._offset=i.index,u.push(o));continue t}s=new m(i[0]),s._offset=i.index,u.push(s)}if(e&&e.recover)for(n=u.length;n--;)l=u[n],l instanceof f||l instanceof _?(void 0!==a&&(c=new _(""),h=u.splice(n,a-n+1,c),c.value=h.map(function(t){return t.value}).join("")),a=n):l instanceof r||(a=void 0);return u}function b(t){var i,n,o,c,h,u,d,p,g,y;if(e.enabled("charting_library_base"))return{currentState:"var"};for(i="init",n="var",o="operator",c=i,h={warnings:[],errors:[],isEmpty:!0},u=[],d=0;d<t.length;d++)if(!((p=t[d])instanceof r))if(delete h.isEmpty,p.isIncomplete&&(g={status:"incomplete",reason:"incomplete_token",offset:p._offset,token:p},p.incompleteSuggest&&(g.recover={append:p.incompleteSuggest()}),h.warnings.push(g),d!==t.length-1))g.status="error";else if(p instanceof _||p instanceof f){if(c===n){h.errors.push({status:"error",reason:"unexpected_token",offset:p._offset,token:p});continue}c=n}else if(p instanceof l){if(c!==n){h.errors.push({status:"error",reason:"unexpected_token",offset:p._offset,token:p});continue}c=o}else if(p instanceof s){if(c===n){h.errors.push({status:"error",reason:"unexpected_token",offset:p._offset,token:p});continue}u.push(p),c=i}else if(p instanceof a){if(c!==n){h.errors.push({status:"error",reason:"unexpected_token",offset:p._offset,token:p});continue}y=u.pop(),y||h.errors.push({status:"error",reason:"unbalanced_brace",offset:p._offset,token:p,recover:{prepend:new s}}),c=n}else p instanceof m&&h.errors.push({status:"error",reason:"unparsed_entity",offset:p._offset,token:p});for(h.braceBalance=u.length,c!==n&&h.warnings.push({status:"incomplete"}),y=null;u.length;)p=u.pop(),g={status:"incomplete",reason:"unbalanced_brace",offset:p._offset,token:p},c===n&&(g.recover={append:new a}),h.warnings.push(g);return h.currentState=c,0===h.warnings.length&&delete h.warnings,0===h.errors.length&&delete h.errors,h}function S(t){var e,i=[];for(e=0;e<t.length;e++)t[e]instanceof r||i.push(t[e]);return i}function w(t){var e,i,n,o,r,c,h;for(t=S(t),e=[],i=[],o=0;o<t.length;o++)r=t[o],
r instanceof l?i.length&&i[i.length-1].minPrecedence>r.precedence&&(i[i.length-1].minPrecedence=r.precedence):r instanceof s?i.push(n={minPrecedence:1/0,openBraceIndex:o}):r instanceof a&&(n=i.pop(),c=t[n.openBraceIndex-1],(h=t[o+1])instanceof l&&!(h.precedence<=n.minPrecedence)||!(!(c instanceof l)||c.precedence<n.minPrecedence||c.precedence===n.minPrecedence&&c.commutative)||(e.unshift(n.openBraceIndex),e.push(o),i.length&&i[i.length-1].minPrecedence>n.minPrecedence&&(i[i.length-1].minPrecedence=n.minPrecedence)));for(o=e.length;o--;)t.splice(e[o],1);return t}function P(t){for(var e=0;e<t.length;e++)t[e].parse&&t[e].parse();return t}function T(t){var e=C(t);return w(e?e:[new f("1"),new d,new s].concat(t).concat(new a))}function C(t){var e,i,n,o=0,c=1,h=2,u=3,p=o,_=0;for(i=0;i<t.length;i++)if(!((n=t[i])instanceof r))switch(p){case o:if(!(n instanceof f&&1==+n.value))return!1;p=c;break;case c:if(!(p===c&&n instanceof d))return!1;p=h,e=i+1;break;case h:if(n instanceof s)p=u,_=1;else if(n instanceof l)return!1;break;case u:n instanceof s?_++:n instanceof a&&--_<=0&&(p=h)}return t.slice(e)}function x(t){return new _(t).ticker()}function k(t){if("string"!=typeof t)throw new TypeError("expression must be a string");return t=v(t),t.filter(function(t){return t instanceof _}).map(function(t){return t.exchange()}).filter(function(t){return t})}function L(t){return t=k(t),1!==t.length?null:t[0]}function I(t,e){return t=k(t),t.some(function(t){return!!~e.indexOf((t||"").toUpperCase())})}function A(t){return I(t,["BATS"])}function E(t){return(t=L(t))&&-1!==t.toUpperCase().indexOf("_EOD")}function M(t){return I(t,["CHXEUR"])}function O(t){return I(t,["CHXJPY"])}function D(t){return I(t,pro.getProductsByType(pro.PRODUCT_TYPES.exchange).map(function(t){return t.exchange.toUpperCase()+"_DLY"}))}function V(t,e){return!!(t=L(t))&&t.substr(0,e.length)===e}function R(t){if("string"!=typeof t)throw new TypeError("expression must be a string");var e=w(S(v(t)));return e.forEach(function(t){t instanceof _&&t.exchange(null)}),F(e)}function B(t){if("string"!=typeof t)throw new TypeError("expression must be a string");return F(w(S(v(t))))}function F(t){return t.join("")}var N,W,j,H=[{pattern:"(",ctor:s},{pattern:")",ctor:a},{pattern:"+",ctor:c},{pattern:"-",ctor:h},{pattern:"*",ctor:u},{pattern:"/",ctor:d},{pattern:"^",ctor:p},{pattern:/\d+(?:\.\d*|(?![a-zA-Z0-9_!:\.&]))|\.\d+/,ctor:f},{pattern:/\./,ctor:y},{pattern:e.enabled("charting_library_base")?/[a-zA-Z0-9_\u0370-\u1FFF_\u2E80-\uFFFF^][a-zA-Z0-9_\u0020\u0370-\u1FFF_\u2E80-\uFFFF_!:\.&]*|'.+?'/:/[a-zA-Z0-9_\u0370-\u1FFF_\u2E80-\uFFFF][a-zA-Z0-9_\u0020\u0370-\u1FFF_\u2E80-\uFFFF_!|:\.&]*|'.+?'/,ctor:_},{pattern:/'[^']*/,ctor:g},{pattern:/[\0-\x20\s]+/,ctor:r}];return o.prototype.toString=function(){return this.value},t(r,o),t(s,o),s.prototype.value="(",t(a,o),a.prototype.value=")",t(l,o),t(c,l),c.prototype.value="+",c.prototype.precedence=0,c.prototype.commutative=!0,t(h,l),h.prototype.value="-",h.prototype.precedence=0,h.prototype.commutative=!1,t(u,l),u.prototype.value="*",
u.prototype.precedence=1,u.prototype.commutative=!0,t(d,l),d.prototype.value="/",d.prototype.precedence=1,d.prototype.commutative=!1,t(p,l),p.prototype.value="^",p.prototype.precedence=2,p.prototype.commutative=!1,N=/^'?(?:([A-Z0-9_]+):)?(.*?)'?$/i,W=/[\+\-\/\*]/,t(_,o),_.prototype.toString=function(){if(this.hasOwnProperty("_ticker")){var t=W.test(this._ticker)?"'":"";return t+(this._exchange?this._exchange+":":"")+this._ticker+t}return this.value},_.prototype.parse=function(){var t=N.exec(this.value);t[1]&&(this._exchange=t[1]),this._ticker=t[2]},_.prototype.parseAsFutures=function(){var t,e,n;for(this.hasOwnProperty("_ticker")||this.parse(),t=function(t){return i.some(function(e){return e.t===t})},e=2;e>=1;--e)if(n=this._ticker.slice(0,e),t(n)){this._root=n,this._contract=this._ticker.slice(e);break}},_.prototype.exchange=function(t){if(this.hasOwnProperty("_ticker")||this.parse(),!(arguments.length>0))return this._exchange;null===t||void 0===t?delete this._exchange:this._exchange=t+""},_.prototype.ticker=function(t){if(this.hasOwnProperty("_ticker")||this.parse(),!(arguments.length>0))return this._ticker;null===t||void 0===t?delete this._ticker:this._ticker=t+"",delete this._root,delete this._contract},_.prototype.root=function(t){if(this.hasOwnProperty("_root")||this.parseAsFutures(),!(arguments.length>0))return this._root;null===t||void 0===t?delete this._root:(this._root=t+"",this._root&&(this._ticker=this._root+(this._contract||"")))},_.prototype.contract=function(t){if(this.hasOwnProperty("_contract")||this.parseAsFutures(),!(arguments.length>0))return this._root;null===t||void 0===t?delete this._contract:(this._contract=t+"",this._root&&(this._ticker=this._root+this._contract))},t(f,o),f.prototype.toString=function(){return this.hasOwnProperty("_normalizedValue")?this._normalizedValue:this.value},f.prototype.parse=function(){this._normalizedValue=this.value.replace(/^0+|\.0*$/g,"").replace(/(\.\d*?)0+$/,"$1").replace(/^(\.|$)/,"0$1")},m.prototype.toString=function(){return this.value},t(g,_),g.prototype.isIncomplete=!0,g.prototype.incompleteSuggest=function(){if("'"!==this.value)return"'"},t(y,f),y.prototype.isIncomplete=!0,j=RegExp(H.map(function(t){return"("+("string"==typeof t.pattern?n(t.pattern):t.pattern.source)+")"}).concat(".").join("|"),"g"),{tokenize:v,validate:b,factorOutBraces:w,normalizeTokens:P,flip:T,hasBatsSymbols:A,hasEodSymbols:E,hasChxeurSymbols:M,hasChxjpySymbols:O,hasFreeDelaySymbols:D,getExchange:L,isExchange:V,SymbolToken:_,IncompleteSymbolToken:g,NumberToken:f,BinaryOperatorToken:l,OpenBraceToken:s,CloseBraceToken:a,ticker:x,shortName:R,normalize:B}}();t.exports=n}).call(e,i(4))},function(t,e,i){"use strict";function n(t){this.items=t.items,this._simpleMode=t.simpleMode,this.barSpacing=t.barSpacing,this.lineColor=t.lineColor,this.lineWidth=t.lineWidth,this.lineStyle=t.lineStyle,this.withMarkers=t.withMarkers,this.withSteps=t.withSteps,this.hittest=t.hittest,this.ignorePaletteLineWidth=t.ignorePaletteLineWidth,this.forceLineColor=!!t.forceLineColor}
var o=i(7).Point,r=i(37).distanceToSegment,s=i(27),a=i(10).HitTestResult;n.prototype.draw=function(t){t.lineCap="square",t.lineJoin=this.withMarkers?"round":"miter",t.strokeStyle=this.lineColor,t.fillStyle=this.lineColor,t.lineWidth=this.lineWidth,t.lineStyle=this.lineStyle,s.setValidLineStyle(t,this.lineStyle),this._simpleMode?this._drawSimpleMode(t):this._drawLines(t)},n.prototype._drawSimpleMode=function(t){var e,i,n,o;if(t.beginPath(),this.walkLine(t,this.items),t.stroke(),this.withMarkers){for(e=this.lineWidth+2,i=2*Math.PI,t.beginPath(),o=this.items.length;o--;)(n=this.items[o])&&(t.moveTo(n.x,n.y),t.arc(n.x,n.y,e,0,i));t.fill()}},n.prototype.walkLine=function(t,e,i,n){var o,r,a,l,c,h,u,d,p,_,f;if(e){for(o=.25*this.barSpacing,u=s.coordinateIsValid,d=0,p=e.length;d<p;d++)if(_=e[d],u(_.y)){a=_,r=d;break}if(void 0!==r&&a)for(f=this.withSteps&&this.lineWidth&&this.lineWidth%2==0?.5:0,d=r,p=e.length;d<p;d++){if(c=e[d],h=e[d+1]||{},u(c.y))if(l&&u(l.y))this.withSteps&&t.lineTo(l.x+f,c.y+f),t.lineTo(c.x+f,c.y+f),i&&!u(h.y)&&t.lineTo(c.x+f,n);else if(h&&u(h.y))i?(d!==r&&t.lineTo(c.x+f,n),t.lineTo(c.x+f,c.y+f)):t.moveTo(c.x+f,c.y+f);else if(i){if(0===d)continue;d!==r&&t.lineTo(c.x-o+f,n),t.lineTo(c.x-o+f,c.y+f),t.lineTo(c.x+o+f,c.y+f),t.lineTo(c.x+o+f,n)}else t.moveTo(c.x-o+f,c.y+f),t.lineTo(c.x+o+f,c.y+f);l=c}}},n.prototype._drawLines=function(t){function e(e,i,n){a(i.y)&&(a(e.y)?t.lineTo(i.x,i.y):n&&a(n.y)?t.moveTo(i.x,i.y):(t.moveTo(i.x-r,i.y),t.lineTo(i.x+r,i.y)))}var i,n,o,r,a,l,c,h,u,d,p,_,f,m;if(this.items.length){for(r=.25*this.barSpacing,a=s.coordinateIsValid,t.beginPath(),l=this.items[0],l&&t.moveTo(l.x,l.y),c=t.strokeStyle,h=t.lineWidth,u=t.lineStyle,d=1;d<this.items.length;++d)i=this.items[d-1],n=this.items[d],o=this.items[d+1],n.style&&!this.forceLineColor?(p=n.style.color,_=n.style.width,f=n.style.style):(p=this.lineColor,_=this.lineWidth,f=this.lineStyle),this.ignorePaletteLineWidth&&(_=this.lineWidth),m=p!==c||_!==h||f!==u,m&&(c=p,h=_,u=f,t.stroke(),t.beginPath(),t.strokeStyle=p,t.lineWidth=_,s.setValidLineStyle(t,f),t.moveTo(i.x,i.y)),e(i,n,o);t.stroke()}},n.prototype.hitTest=function(t){for(var e,i,n,l,c,h,u,d,p=s.selectionTolerance(this.lineWidth),_=0,f=this.items.length-1;f-_>2;)h=Math.round((f+_)/2),u=this.items[h],u.x<=t.x?_=h:f=h;for(_=Math.max(1,_-1),f=Math.min(this.items.length-1,f+1),d=_;d<=f;++d)if(e=this.items[d-1],i=this.items[d],n=e.x,l=i.x,c=r(new o(n,e.y),new o(l,i.y),new o(t.x,t.y)),c.distance<=p)return this.hittest?this.hittest:new a(a.REGULAR);return null},e.PaneRendererLine=TradingView.PaneRendererLine=n},,,,,,,,,,,,,,,,,,,,,,,function(t,e,i){"use strict";var n,o=function(){try{this.isAvailable=!0,this.localStorage=window.localStorage,this.localStorage.setItem("tvlocalstorage.available","true")}catch(t){delete this.isAvailable,delete this.localStorage}this._updateLength()};o.prototype.length=0,o.prototype.isAvailable=!1,o.prototype.localStorage={"tvlocalstorage.available":"false"},o.prototype._updateLength=function(){var t,e
;if(this.isAvailable)this.length=this.localStorage.length;else{t=0;for(e in this.localStorage)this.localStorage.hasOwnProperty(e)&&t++;this.length=t}},o.prototype.key=function(t){return this.isAvailable?this.localStorage.key(t):Object.keys(this.localStorage)[t]},o.prototype.getItem=function(t){return this.isAvailable?this.localStorage.getItem(t):this.localStorage[t]},o.prototype.setItem=function(t,e){this.isAvailable?this.localStorage.setItem(t,e):this.localStorage[t]=e,this._updateLength()},o.prototype.removeItem=function(t){this.isAvailable?this.localStorage.removeItem(t):delete this.localStorage[t],this._updateLength()},o.prototype.clear=function(){this.isAvailable?this.localStorage.clear():this.localStorage={},this._updateLength()},n=function(t){this.storage=t},n.prototype.getItem=function(t){return Promise.resolve(this.storage.getItem(t))},n.prototype.setItem=function(t,e){return Promise.resolve(this.storage.setItem(t,e))},window.TVLocalStorage=new o,window.TVLocalStorageAsync=new n(window.TVLocalStorage),t.exports={TVLocalStorage:window.TVLocalStorage,TVLocalStorageAsync:window.TVLocalStorageAsync}},function(t,e,i){"use strict";var n,o,r,s,a,l,c;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"MINUTE_SPAN",function(){return n}),i.d(e,"HOUR_SPAN",function(){return o}),i.d(e,"DAY_SPAN",function(){return r}),i.d(e,"WEEK_SPAN",function(){return s}),i.d(e,"MONTH_SPAN",function(){return a}),i.d(e,"YEAR_SPAN",function(){return l}),i.d(e,"DEFAULT_BAR_SPACING",function(){return c}),n=20,o=30,r=40,s=50,a=60,l=70,c=6},function(t,e,i){"use strict";function n(t){var e=t.split(":");return{name:e[0],type:2===e.length?e[1]:null}}function o(t,e,i,o){var r,s,a,l,c,p,_,f,m,g,y,v,b,S,w,P=i.split(".");if(0!==P.length&&0!==P[0].length){if(r=n(P[0]),s=r.name,a=r.type,l=null!==a,c=!l||"plot"===a,p=!l||"band"===a,_=!l||"area"===a,f=!l||"input"===a,m=c?d.getPlotIdByTitle(t,s):null,g=p?d.getBandIndexByName(t,s):null,y=_?d.getFilledAreaIdByTitle(t,s):null,v=f?d.getInputByName(t,s):null,b=e.hasOwnProperty(s),(null!==m?1:0)+(null!==g?1:0)+(null!==y?1:0)+(null!==v?1:0)+(b?1:0)>1)return void h.logWarn("Study '"+t.description+"' has ambiguous identifier '"+s+"'");if(S=P[1],null!==m){if(1===P.length)return void h.logWarn("Path of sub-property of '"+s+"' plot for study '"+t.description+"' must be not empty");w=P.slice(1),u.applyPlotProperty(t,e,m,w,o)}else if(null!==v)u.applyInputValue(e,v,o);else if(null!==g){if(void 0===S)return void h.logWarn("Property name of '"+s+"' band for study '"+t.description+"' must be set");u.applyBandProperty(e,g,S,o)}else if(null!==y){if(void 0===S)return void h.logWarn("Property name of '"+s+"' area for study '"+t.description+"' must be set");u.applyFilledAreaProperty(e,y,S,o)}else b?u.setRootProperty(e,P,o):h.logWarn("Study '"+t.description+"' has no plot or input '"+s+"'")}}function r(t,e){var i,n=t.properties(),r=n.state();for(i in e)e.hasOwnProperty(i)&&o(t.metaInfo(),r,i,e[i]);n.mergeAndFire(r)}function s(t,e,i){var n,r,s,a,l;for(n in t)t.hasOwnProperty(n)&&-1!==(r=n.indexOf("."))&&(s=n.substr(0,r),
a=d.getMetaInfoByDescription(e,s),null!==a?(l=i(a.id),null!==l?o(a,l,n.substr(r+1),t[n]):h.logWarn("Cannot apply overrides for study "+s)):h.logWarn("There is no such study "+s))}var a,l,c,h,u,d;Object.defineProperty(e,"__esModule",{value:!0}),e.applyOverridesToStudy=r,e.applyOverridesToStudyDefaults=s,a=i(6),i.n(a),l=i(96),c=i(5),h=Object(c.getLogger)("Chart.Model.StudyPropertiesOverrider"),function(t){function e(t,e,i){var n,o,r,s;if(void 0===t.plots)return null;for(n=0,o=t.plots;n<o.length;n++)if(r=o[n],Object(l.isColorerPlot)(r)&&void 0!==e.palettes&&(s=e.palettes[r.palette],r.target===i&&void 0!==s))return s;return null}function i(t,e,i,n,o){if(void 0===t.styles)return void h.logWarn("Study does not have styles");if(null===e&&!isNaN(n)&&n>0)return void h.logWarn("Study plot does not have color #"+n);if(0===n||isNaN(n)){Object(a.ensureDefined)(t.styles[i]).color=o+"",n=0}null!==e&&(Object(a.ensureDefined)(e.colors[n]).color=o+"")}function n(t,n,o,r,s){var a,l,c,d,p;if(void 0===n.styles)return void h.logWarn("Study does not have styles");if("color"===(a=r[0]))return l=e(t,n,o),c=r.length>1?parseInt(r[1]):NaN,void i(n,l,o,c,s);if(void 0===(d=n.styles[o])||!d.hasOwnProperty(a))return void h.logWarn("Study plot does not have property '"+a+"'");if("plottype"===a){if(void 0===(p=u[s+""]))return void h.logWarn("Unsupported plot type for plot: "+s);s=p}d[a]=s}function o(t,e,i,n){var o,r;if(void 0===t.bands)return void h.logWarn("Study does not have bands");if(void 0===(o=t.bands[e])||!o.hasOwnProperty(i))return void h.logWarn("Study band does not have property '"+i+"'");if("plottype"===i){if(void 0===(r=u[n+""]))return void h.logWarn("Unsupported plot type for band: "+n);n=r}o[i]=n}function r(t,e,i,n){if(void 0===t.filledAreasStyle)return void h.logWarn("Study does not have areas");var o=t.filledAreasStyle[e];if(void 0===o||!o.hasOwnProperty(i))return void h.logWarn("Study area does not have property '"+i+"'");o[i]=n}function s(t,e,i){if(void 0===t.inputs||!t.inputs.hasOwnProperty(e))return void h.logWarn("Study does not have input '"+e+"'");t.inputs[e]=i}function c(t,e,i){var n,o,r,s,a;if(0!==e.length){for(n=t,o=0,r=e.slice(0,-1);o<r.length&&(s=r[o],null!=n&&t.hasOwnProperty(s));o++)n=t[s];if(a=e[e.length-1],null==n||!n.hasOwnProperty(a))return void h.logWarn("Study does not have property "+e.join("."));n[a]=i}}var u={line:l.PlotType.Line,histogram:l.PlotType.Histogram,cross:l.PlotType.Cross,area:l.PlotType.Area,columns:l.PlotType.Columns,circles:l.PlotType.Circles,line_with_breaks:l.PlotType.LineWithBreaks,area_with_breaks:l.PlotType.AreaWithBreaks};t.applyPlotProperty=n,t.applyBandProperty=o,t.applyFilledAreaProperty=r,t.applyInputValue=s,t.setRootProperty=c}(u||(u={})),function(t){function e(t,e){var i,n,o;if(void 0===t.inputs)return null;for(e=e.toLowerCase(),i=0,n=t.inputs;i<n.length;i++)if(o=n[i],o.name.toLowerCase()===e)return o.id;return null}function i(t,e){var i,n,o;if(void 0===t.styles)return null;e=e.toLowerCase();for(i in t.styles)if(n=t.styles[i],o=void 0!==n&&void 0!==n.title?n.title:i,
o.toLowerCase()===e)return i;return null}function n(t,e){var i,n,o;if(void 0===t.filledAreas)return null;for(e=e.toLowerCase(),i=0,n=t.filledAreas;i<n.length;i++)if(o=n[i],o.title.toLowerCase()===e)return o.id;return null}function o(t,e){if(void 0===t.bands)return null;e=e.toLowerCase();for(var i=0;i<t.bands.length;++i)if(t.bands[i].name.toLowerCase()===e)return i;return null}function r(t,e){var i,n,o;for(e=e.toLowerCase(),i=0,n=t;i<n.length;i++)if(o=n[i],o.description.toLowerCase()===e||o.shortDescription.toLowerCase()===e)return o;return null}t.getInputByName=e,t.getPlotIdByTitle=i,t.getFilledAreaIdByTitle=n,t.getBandIndexByName=o,t.getMetaInfoByDescription=r}(d||(d={}))},function(t,e,i){"use strict";var n,o;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"Version",function(){return o}),n=i(6),i.n(n),o=function(){function t(t,e){this._major=t,this._minor=e}return t.prototype.major=function(){return this._major},t.prototype.minor=function(){return this._minor},t.prototype.isZero=function(){return 0===this._major&&0===this._minor},t.prototype.toString=function(){return this._major+"."+this._minor},t.prototype.compareTo=function(t){return this._major<t._major?-1:this._major>t._major?1:this._minor<t._minor?-1:this._minor>t._minor?1:0},t.prototype.isLess=function(t){return this.compareTo(t)<0},t.prototype.isLessOrEqual=function(t){return this.compareTo(t)<=0},t.prototype.isEqual=function(t){return 0===this.compareTo(t)},t.prototype.isGreater=function(t){return this.compareTo(t)>0},t.prototype.isGreaterOrEqual=function(t){return this.compareTo(t)>=0},t.parse=function(e){var i,o,r;if(e instanceof t)return new t(e.major(),e.minor());if("number"==typeof e)return Object(n.assert)(Math.floor(e)===e,"Version should not be a float number"),new t(e,0);if("string"==typeof e){if(i=e.split("."),1===i.length)return o=parseInt(i[0],10),Object(n.assert)(!isNaN(o),"Bad version string: "+e),new t(o,0);if(2===i.length)return o=parseInt(i[0],10),Object(n.assert)(!isNaN(o),"Bad version string: "+e),r=parseInt(i[1],10),Object(n.assert)(!isNaN(r),"Bad version string: "+e),new t(o,r);throw Error("Bad version string (one dot expected): "+e)}throw Error("Bad version: "+e)},t.ZERO=new t(0,0),t}()},function(t,e,i){"use strict";function n(t,e){if(o(t))throw Error("Service already registered");s[t.id]=e}function o(t){return void 0!==s[t.id]}function r(t){var e=s[t.id];if(void 0===e)throw Error("ServiceLocator: Service "+t.id+" not found");return e}Object.defineProperty(e,"__esModule",{value:!0}),e.registerService=n,e.hasService=o,e.service=r;var s={}},function(t,e,i){"use strict";function n(t,e,i){return void 0===i&&(i="promise rejected by time-out"),new Promise(function(n,o){var r=setTimeout(function(){return o(i)},e);t.then(function(t){clearTimeout(r),n(t)}),t.catch(function(t){clearTimeout(r),o(t)})})}Object.defineProperty(e,"__esModule",{value:!0}),e.makeTimeLimited=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"QuantityFormatter",function(){return n});var n=function(){function t(t){
this._precision=t}return t.prototype.format=function(t){return void 0===this._precision?t+"":t.toFixed(this._precision).replace(/\.?0+$/,"")},t}()},function(t,e,i){"use strict";i.d(e,"a",function(){return n});var n=function(){function t(t){this._activeBroker=null,this._trading=t,this._trading.onConnectionStatusChange.subscribe(this,this._onStatusChange),this._onStatusChange(this._trading.connectStatus())}return t.prototype.activeBroker=function(){return this._activeBroker},t.prototype.trading=function(){return this._trading},t.prototype._onStatusChange=function(t){this._activeBroker===this._trading.activeBroker()&&1===t||(this._activeBroker&&(this.stopService(),this._activeBroker=null),this._trading.activeBroker()&&1===t&&(this._activeBroker=this._trading.activeBroker(),this.startService()))},t}()},function(t,e,i){"use strict";var n,o,r,s,a,l,c,h,u,d;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"DataModeIndicator",function(){return d}),n=i(0),i(9),i(31),o=i(609),i.n(o),r=i(314),s={connecting:"tv-data-mode--connecting",delayed:"tv-data-mode--delayed",delayed_streaming:"tv-data-mode--delayed",endofday:"tv-data-mode--endofday",forbidden:"tv-data-mode--forbidden",realtime:"tv-data-mode--realtime",snapshot:"tv-data-mode--snapshot",loading:"tv-data-mode--loading",replay:"tv-data-mode--replay"},a={connecting:$.t("Connecting"),delayed:$.t("Delayed"),delayed_streaming:$.t("Delayed"),endofday:$.t("End of Day"),forbidden:$.t("Instrument is not allowed"),realtime:$.t("Real-time"),snapshot:$.t("Snapshot"),loading:"",replay:$.t("Replay Mode")},l={connecting:$.t("C",{context:"data_mode_connecting_letter"}),delayed:$.t("D",{context:"data_mode_delayed_letter"}),delayed_streaming:$.t("D",{context:"data_mode_delayed_streaming_letter"}),endofday:$.t("E",{context:"data_mode_end_of_day_letter"}),forbidden:$.t("F",{context:"data_mode_forbidden_letter"}),realtime:$.t("R",{context:"data_mode_realtime_letter"}),snapshot:$.t("S",{context:"data_mode_snapshot_letter"}),loading:"",replay:$.t("R",{context:"data_mode_replay_letter"})},c=600,h={streaming:"realtime"},u={classMap:s,classSuffix:"",data:{values:{update_mode:"connecting"}},labelMap:a,modeInterval:c,short:!1,shortLabelMap:l,showTooltip:!0,tooltipType:"custom"},d=function(t){function e(e){var i=t.call(this,e)||this;return i._quoteSessionPrefix="data-mode-indicator",i._componentClass="tv-data-mode",i._init(e),i}return n.c(e,t),e.prototype.getLabel=function(){return!0===this._shortMode?this._shortLabelMap[this._value]||"":t.prototype.getLabel.call(this)},e.prototype.setMode=function(t,e){this.update({values:{update_mode:t,update_mode_seconds:e}})},e.prototype.hide=function(){this._el.classList.add("i-hidden")},e.prototype.show=function(){this._el.classList.remove("i-hidden")},e.prototype.getTooltipText=function(){var t="",e=this.getValue();if(""===e)return t;switch(e){case"delayed":t=$.t("Quotes are delayed by {0} min and updated every 30 seconds");break;case"delayed_streaming":t=$.t("Quotes are delayed by {0} min");break;default:t=this._labelMap[e]||t}
return["delayed","delayed_streaming"].includes(e)&&(t=t.format(Math.round(this._modeInterval/60))),t},e.prototype._init=function(e){void 0===e&&(e={});var i=Object.assign({},u,e);this._modeInterval=i.modeInterval||c,this._shortLabelMap=i.shortLabelMap||l,t.prototype._init.call(this,i),this._render()},e.prototype._getValueFromData=function(t){var e;return e=void 0!==t.values&&void 0!==t.values.update_mode?t.values.update_mode:this.getValue(),h[e]||e},e.prototype._updateValue=function(e,i){void 0!==e.values&&void 0!==e.values.update_mode_seconds&&(this._modeInterval=e.values.update_mode_seconds),t.prototype._updateValue.call(this,e,i)},e}(r.a)},function(t,e,i){"use strict";function n(t){return!d.some(function(e){return t[e]().size>0})}function o(t,e,i,n){var o,r,s,a;if(void 0!==e){o=function(e){var o,r=e.styleId;void 0!==i&&Object(c.assert)(r in i,"Every style used by graphics primitive should be declared in study metainfo"),o=null,t.forEach(function(t,e){e===r&&(o=t[0])}),null===o&&(o={indexes:n,items:[]},t.set(r,[o])),o.items=o.items.concat(e.data)};for(r=0,s=e;r<s.length;r++)a=s[r],o(a)}}function r(t,e,i){var n,o,r,s=null;for(n=0,o=t;n<o.length;n++)r=o[n],r.styleId===i&&(s=r);null===s&&(s={styleId:i,data:[]},t.push(s)),s.data.push(e)}function s(t){var e,i=t.hhistsByTimePointIndex();i.clear(),e=a(t.hhists()),i.set("histBars",e)}function a(t){var e=new Map;return t.forEach(function(t,i){var n,o,r,s,a,c,h=t[0],d=h.indexes;for(n=0,o=h.items;n<o.length;n++)r=o[n],r.firstBarTime<0||r.firstBarTime>=d.length?u.logError("Cannot find index "+r.firstBarTime+" in study timescale indexes"):(s=l.a({},r,{styleId:i}),a=d[r.firstBarTime],c=e.get(a),void 0===c?e.set(a,{indexes:d,items:[s]}):c.items.push(s))}),e}var l,c,h,u,d;i.d(e,"d",function(){return d}),e.c=n,e.b=o,e.a=r,e.e=s,l=i(0),c=i(6),i.n(c),h=i(5),u=Object(h.getLogger)("Chart.StudyGraphics"),d=["horizlines","vertlines","lines","hlines","textmarks","shapemarks","backgrounds","polygons","trendchannels","hhists"]},function(t,e,i){"use strict";function n(){this.backColorers=[]}function o(t){n.call(this),this._series=t}function r(t,e){n.call(this),this._study=t,this._plotIndex=e}var s=i(20).PlotRowSearchMode;n.prototype.barStyle=function(t,e,i){var n,o={};for(n=this.backColorers.length-1;n>=0;n--)this.backColorers[n].applyBarStyle(t,e,o,i);return this.applyBarStyle(t,e,o,i),o},n.prototype.pushBackBarColorer=function(t){this.backColorers.push(t)},n.prototype.applyBarStyle=function(t,e,i){throw Error("This function is supposed to be reimplemented in a subclass")},inherit(o,n),o.prototype.applyBarStyle=function(t,e,i,n){var o,r,s,a,l,c,h,u,d,p,_,f,m,g,y,v;switch(i||(i={}),i.barColor=null,i.barBorderColor=null,i.barWickColor=null,i.isBarHollow=null,i.isBarUp=null,i.upColor=null,i.downColor=null,i.isTwoColorBar=null,o=this._series.properties(),o.style.value()){case TradingView.Series.STYLE_LINE:i.barColor=o.lineStyle.color.value();break;case TradingView.Series.STYLE_AREA:i.barColor=o.areaStyle.linecolor.value();break;case TradingView.Series.STYLE_BARS:r=o.barStyle.upColor.value(),
s=o.barStyle.downColor.value(),a=r,l=s,c=this.findBar(t,!1,n),o.barStyle.barColorsOnPrevClose.value()?(h=this.findPrevBar(t,!1,n),i.barColor=h[TradingView.CLOSE_PLOT]<=c[TradingView.CLOSE_PLOT]?r:s,i.barBorderColor=h[TradingView.CLOSE_PLOT]<=c[TradingView.CLOSE_PLOT]?a:l):(i.barColor=c[TradingView.OPEN_PLOT]<=c[TradingView.CLOSE_PLOT]?r:s,i.barBorderColor=c[TradingView.OPEN_PLOT]<=c[TradingView.CLOSE_PLOT]?a:l);break;case TradingView.Series.STYLE_CANDLES:r=o.candleStyle.upColor.value(),s=o.candleStyle.downColor.value(),a=o.candleStyle.borderUpColor?o.candleStyle.borderUpColor.value():o.candleStyle.borderColor.value(),l=o.candleStyle.borderDownColor?o.candleStyle.borderDownColor.value():o.candleStyle.borderColor.value(),u=o.candleStyle.wickUpColor?o.candleStyle.wickUpColor.value():o.candleStyle.wickColor.value(),d=o.candleStyle.wickDownColor?o.candleStyle.wickDownColor.value():o.candleStyle.wickColor.value(),c=this.findBar(t,!1,n),o.candleStyle.barColorsOnPrevClose.value()?(h=this.findPrevBar(t,!1,n),p=h[TradingView.CLOSE_PLOT]<=c[TradingView.CLOSE_PLOT]):p=c[TradingView.OPEN_PLOT]<=c[TradingView.CLOSE_PLOT],i.barColor=p?r:s,i.barBorderColor=p?a:l,i.barWickColor=p?u:d;break;case TradingView.Series.STYLE_HOLLOW_CANDLES:r=o.hollowCandleStyle.upColor.value(),s=o.hollowCandleStyle.downColor.value(),a=o.hollowCandleStyle.borderUpColor?o.hollowCandleStyle.borderUpColor.value():o.hollowCandleStyle.borderColor.value(),l=o.hollowCandleStyle.borderDownColor?o.hollowCandleStyle.borderDownColor.value():o.hollowCandleStyle.borderColor.value(),u=o.hollowCandleStyle.wickUpColor?o.hollowCandleStyle.wickUpColor.value():o.hollowCandleStyle.wickColor.value(),d=o.hollowCandleStyle.wickDownColor?o.hollowCandleStyle.wickDownColor.value():o.hollowCandleStyle.wickColor.value(),c=this.findBar(t,!1,n),h=this.findPrevBar(t,!1,n),h[TradingView.CLOSE_PLOT]<=c[TradingView.CLOSE_PLOT]?(i.barColor=r,i.barBorderColor=a,i.barWickColor=u):(i.barColor=s,i.barBorderColor=l,i.barWickColor=d),c[TradingView.OPEN_PLOT]<=c[TradingView.CLOSE_PLOT]?i.isBarHollow=!0:i.isBarHollow=!1;break;case TradingView.Series.STYLE_HEIKEN_ASHI:r=o.haStyle.upColor.value(),s=o.haStyle.downColor.value(),a=o.haStyle.borderUpColor.value(),l=o.haStyle.borderDownColor.value(),u=o.haStyle.wickUpColor.value(),d=o.haStyle.wickDownColor.value(),c=this.findBar(t,e,n),o.haStyle.barColorsOnPrevClose.value()?(h=this.findPrevBar(t,e,n),p=h[TradingView.CLOSE_PLOT]<=c[TradingView.CLOSE_PLOT]):p=c[TradingView.OPEN_PLOT]<=c[TradingView.CLOSE_PLOT],i.barColor=p?r:s,i.barBorderColor=p?a:l,i.barWickColor=p?u:d;break;case TradingView.Series.STYLE_RENKO:c=this.findBar(t,e,n),p=c[TradingView.OPEN_PLOT]<=c[TradingView.CLOSE_PLOT],r=e?o.renkoStyle.upColorProjection.value():o.renkoStyle.upColor.value(),s=e?o.renkoStyle.downColorProjection.value():o.renkoStyle.downColor.value(),a=e?o.renkoStyle.borderUpColorProjection.value():o.renkoStyle.borderUpColor.value(),l=e?o.renkoStyle.borderDownColorProjection.value():o.renkoStyle.borderDownColor.value(),u=o.renkoStyle.wickUpColor.value(),
d=o.renkoStyle.wickDownColor.value(),i.barColor=p?r:s,i.barBorderColor=p?a:l,i.barWickColor=p?u:d,i.isBarUp=p;break;case TradingView.Series.STYLE_PB:c=this.findBar(t,e,n),p=c[TradingView.OPEN_PLOT]<=c[TradingView.CLOSE_PLOT],r=e?o.pbStyle.upColorProjection.value():o.pbStyle.upColor.value(),s=e?o.pbStyle.downColorProjection.value():o.pbStyle.downColor.value(),a=e?o.pbStyle.borderUpColorProjection.value():o.pbStyle.borderUpColor.value(),l=e?o.pbStyle.borderDownColorProjection.value():o.pbStyle.borderDownColor.value(),i.barColor=p?r:s,i.barBorderColor=p?a:l,i.isBarUp=p;break;case TradingView.Series.STYLE_KAGI:i.upColor=e?o.kagiStyle.upColorProjection.value():o.kagiStyle.upColor.value(),i.downColor=e?o.kagiStyle.downColorProjection.value():o.kagiStyle.downColor.value(),_=null,c=this.findBar(t,e,n),c[TradingView.LOW_PLOT]<c[TradingView.ADT_PLOT]&&c[TradingView.ADT_PLOT]<c[TradingView.HIGH_PLOT]?(_=c[TradingView.OPEN_PLOT]<=c[TradingView.CLOSE_PLOT],i.isTwoColorBar=!0):(_=c[TradingView.OPEN_PLOT]<=c[TradingView.CLOSE_PLOT]?c[TradingView.OPEN_PLOT]===c[TradingView.ADT_PLOT]:c[TradingView.OPEN_PLOT]!==c[TradingView.ADT_PLOT],i.isTwoColorBar=!1),i.barColor=_?i.upColor:i.downColor,i.isBarUp=c[TradingView.OPEN_PLOT]<=c[TradingView.CLOSE_PLOT];break;case TradingView.Series.STYLE_PNF:c=this.findBar(t,e,n),p=c[TradingView.ADT_PLOT]>0,r=e?o.pnfStyle.upColorProjection.value():o.pnfStyle.upColor.value(),s=e?o.pnfStyle.downColorProjection.value():o.pnfStyle.downColor.value(),i.isBarUp=p,i.barColor=p?r:s;break;case TradingView.Series.STYLE_BASELINE:c=this.findBar(t,e,n),f=o.baselineStyle,m=this._series.priceScale(),g=Math.round(m.height()*(Math.abs(100-f.baseLevelPercentage.value())/100)),y=this._series.firstValue(),v=m.coordinateToPrice(g,y),c[TradingView.CLOSE_PLOT]>v?i.barColor=o.baselineStyle.topLineColor.value():i.barColor=o.baselineStyle.bottomLineColor.value()}return i},o.prototype.getSeriesBars=function(t){return t?this._series.nsBars():this._series.bars()},o.prototype._findBarFieldValue=function(t,e,i){var n=this.getSeriesBars(i).valueAt(t);if(null!==n)return n[e]},o.prototype.findBar=function(t,e,i){return i?i.value:this.getSeriesBars(e).valueAt(t)||[]},o.prototype.findPrevBar=function(t,e,i){var n,o;return i&&i.previousValue?i.previousValue:(n=this._series.bars(),o=n._search(t,s.Exact),null!==o&&o>0?this._series.bars()._valueAt(o-1):[])},inherit(r,n),r.prototype.applyBarStyle=function(t,e,i){var n,o,r,s,a,l,c,h,u,d,p,_,f;return i||(i={}),e?i:(n=this._study.properties(),n.visible.value()?(o=this._study.metaInfo(),(r=this._study.data())&&0!==r.size()?(s=o.plots[this._plotIndex],this._study.getMinFirstBarIndexForPlot(s.id)>t?i:(a=n.styles[s.id],a.visible&&!a.visible.value()?i:(l=this._study.offset(s.id),null===(c=r.valueAt(t-l))?i:null==(h=c[this._plotIndex+1])?i:(h=Math.round(h),u=o.plots[this._plotIndex].palette,d=n.palettes,p=d[u],_=o.palettes[u].valToIndex?o.palettes[u].valToIndex[h]:h,f=p.colors[_].color.value(),i.barColor=f,i.upColor=f.color,i.downColor=f.color,i)))):i):i)},e.SeriesBarColorer=o,e.StudyBarColorer=r
},function(t,e,i){"use strict";function n(t){this.items=t.items,this.barSpacing=t.barSpacing,this.colorUp=t.colorup,this.colorDn=t.colordown,this.colorBorderUp=t.colorBorderUp,this.colorBorderDown=t.colorBorderDown,this.width=this._calculateWidth(t.barSpacing),this.minHeight=t.minHeight,this.vertOffset=this._calculateVerticalOffset(t.barSpacing)}function o(t,e,i,n){this.x=t,this.y=e,this.height=i,this.isUp=n}var r=i(7).Point,s=i(10).HitTestResult;n.prototype._calculateVerticalOffset=function(t){return Math.round((t||0)/4)},n.prototype._calculateMinHeight=function(t){return this.width||this._calculateWidth(t)},n.prototype._calculateWidth=function(t){var t=t||this.barSpacing;return Math.round(t/2)},n.prototype.draw=function(t){var e,i,n,o,r,s,a,l=this.width,c=l<4,h=Math.max(parseInt(l/2),1),u=Math.round(this.width/2),d=Math.round(this.width);for(t.translate(1,1),e=0,i=this.items.length;e<i;e++)n=this.items[e],o=n.isUp?-1:1,r=Math.abs(n.height),s=n.y-o*this.vertOffset,t.beginPath(),t.translate(n.x,s),c?(t.moveTo(0,0),t.lineTo(-u,-u*o),t.moveTo(0,0),t.lineTo(u,-u*o),t.moveTo(0,0),t.lineTo(0,-r*o),t.moveTo(-u,-r*o),t.lineTo(u,-r*o),t.lineWidth=h,t.strokeStyle=n.isUp?this.colorUp:this.colorDn,t.stroke()):(t.moveTo(0,0),r<d?(t.lineTo(l,-r*o),t.lineTo(-l,-r*o)):(t.lineTo(l,-d*o),t.lineTo(u,-d*o),t.lineTo(u,-r*o),t.lineTo(-u,-r*o),t.lineTo(-u,-d*o),t.lineTo(-l,-d*o)),t.lineTo(0,0),a=n.isUp?this.colorBorderUp:this.colorBorderDown,t.strokeStyle=a,t.stroke(),t.fillStyle=n.isUp?this.colorUp:this.colorDn,t.fill()),t.translate(-n.x,-s);t.translate(-1,-1)},n.prototype.hitTest=function(t){var e,i,n,o,r,a,l,c,h,u=Math.round(this.width/2),d=Math.round(this.width);for(e=0;e<this.items.length;++e)if((i=this.items[e])&&void 0!==i.x&&null!==i.x&&!TradingView.isNaN(i.x)&&void 0!==i.y&&null!==i.y&&!TradingView.isNaN(i.y)&&(n=Math.abs(i.height),o=i.isUp?-1:1,r=n+d,a=i.y-o*this.vertOffset,l=a-o*r,c=i.x-u,h=i.x+u,c<t.x&&t.x<h&&(i.isUp?a<t.y&&t.y<l:l<t.y&&t.y<a)))return new s(s.REGULAR);return null},inherit(o,r),e.PaneRendererArrowsUpDown=TradingView.PaneRendererArrowsUpDown=n,e.PaneRendererArrowsUpDownItem=TradingView.PaneRendererArrowsUpDownItem=o},function(t,e,i){"use strict";function n(t){this.bars=t.bars,this.barSpacing=t.barSpacing,this.barWidth=o.optimalBarWidth(t.barSpacing),this.barLineWidth=Math.max(1,Math.round(this.barWidth)),this.dontDrawOpen=t.dontDrawOpen}var o=i(27),r=i(10).HitTestResult;n.prototype.draw=function(t){var e,i,n;for(t.save(),t.translate(.5,.5),i=0;i<this.bars.length;++i)n=this.bars[i],e!==n.color&&(t.fillStyle=n.color,e=n.color),t.fillRect(Math.round(n.time-this.barLineWidth/2),Math.round(n.high-this.barWidth/2),Math.round(this.barLineWidth),Math.round(n.low-n.high+this.barWidth)),this.barLineWidth<this.barSpacing-1&&(this.dontDrawOpen||t.fillRect(Math.round(n.time-1.5*this.barWidth),Math.round(n.open-this.barWidth/2),Math.round(1.5*this.barWidth),Math.round(this.barWidth)),t.fillRect(Math.round(n.time),Math.round(n.close-this.barWidth/2),Math.round(1.5*this.barWidth),Math.round(this.barWidth)));t.restore()},
n.prototype.hitTest=function(t){var e,i,n,s,a=this.bars,l=.5*this.barSpacing;if(0===a.length)return null;if(t.x<a[0].time-l)return null;if(t.x>a[a.length-1].time+l)return null;for(e=null,i=0;i<a.length;++i)if(n=a[i],t.x<=n.time+l){e=n;break}return s=o.selectionTolerance(this.barLineWidth),e&&e.high-s<=t.y&&t.y<=e.low+s?new r(r.REGULAR):null},e.PaneRendererBars=TradingView.PaneRendererBars=n},function(t,e,i){"use strict";t.exports=function(t,e){var i,n=10,o=t%n;for(o&&(t=t-o+n),i=[];t<=e;t+=n)i.push(t);return i}},function(t,e,i){"use strict";function n(t,e){var n,o,r,a,l,c,h,u,d;if(!t)throw Error("No studies metainfo");if(n=i(653),this._studiesMetainfo=t,!e)throw Error("No studies migrations");for(this._studiesMigrations=e,this._migrations={},o=0;o<this._studiesMigrations.length;o++)for(r=this._studiesMigrations[o],a=r.versFrom,l=r.versTo,c=0;c<r.studyMigrations.length;c++)h=r.studyMigrations[c],u=h.studyId,0!==h.rules.length?(d=u in this._migrations?this._migrations[u]:new n(u),d.addMigration(a,l,h.rules),this._migrations[u]=d):s.logError("Study Migration should have at least one convertion rule");this._clientMigrations=[function(t,e){var i,n,o,r,s;if(0===this._studiesMetainfo.length||!t.isTVScript||t.version>=22)return e;for(i={},n=0,o=0;void 0!==(r=e[o]);)s=e[r.id],r.isFake&&(r.id="in_"+n++),i[o]=r,i[r.id]=s,o++;return i}]}var o=i(6).assert,r=i(190).Version,s=i(5).getLogger("Chart.Study.Versioning"),a=i(248),l=i(32);n.prototype.updateMetaInfo=function(t){var e,i,n;if(!t)return t;for(o(!t.isTVScript,"This method should update only built-in java indicators metaInfo. For Pine indicators use updateMetaInfoAsync"),e=null,i=this._studiesMetainfo,n=0;n<i.length;n++)if(i[n].id===t.id){e=i[n];break}return TradingView.clone(e)},n.prototype.updateMetaInfoAsync=function(t,e){var i,n,o,r,s,a=$.Deferred(),c=a.promise();if(!t)return a.reject("No old metaInfo was given"),c;if(e)return a.resolve(null),c;if(i=t.isTVScript&&t.scriptIdPart&&TVScript.pineType(t.scriptIdPart)===TVScript.PineType.Addon,n=l.versionOf(t),t.isTVScript&&!t.pine&&!i&&n<l.VERSION_PINE_PROTECT_TV_4164);else if((t.isTVScript||t.isTVScriptStubToCompile)&&t.pine&&!i);else{for(o=null,r=this._studiesMetainfo,s=0;s<r.length;s++)if(r[s].id===t.id){o=r[s];break}o?a.resolve(TradingView.clone(o)):a.resolve(null)}return c},n.prototype.lastVersionOfStudy=function(t){return l.findStudyMetaInfo(this._studiesMetainfo,t).version},n.prototype.updateStudyInputs=function(t,e,i,n,o){var a,l,c,h,u,d,p,_=TradingView.clone(n);if(t in this._migrations&&(a=r.parse(e),"last"===i?(c=this.lastVersionOfStudy(t),l=r.parse(c)):l=r.parse(i),h=this._migrations[t],u=h.updateInputs(a,l,_),_=u),null==o)return _;for(d in o)d in _||(_[d]=o[d]);for(d in _)d in o||(p=_[d],s.logWarn("Extra input detected, studyId="+t+", versionFrom="+e+", inputId="+d+", inputValue="+p+", removing it and continue..."),delete _[d]);return _},n.prototype.updateStudyState=function(t,e,i){var n,o,r,a,c,h,u,d,p,_,f,m,g,y;if(null==t||null==e||null==i)return t;for(t=TradingView.clone(t),n=e.isTVScript||!!e.pine,
n||e.version===i.version||(o=i&&i.defaults.inputs,r=this.updateStudyInputs(e.id,e.version,i.version,t.inputs,o),t.inputs=r),a=0;a<this._clientMigrations.length;++a)r=this._clientMigrations[a].call(this,e,t.inputs),Object.keys(r).length===Object.keys(t.inputs).length?t.inputs=r:s.logWarn("StudyVersioning._clientMigrations application returned bad result. Skipping it...");if(c=l.versionOf(e),e.isTVScript&&e.TVScriptSourceCode&&c>=12&&c<=26){for(h={},a=0;a<e.plots.length;++a)u=e.plots[a],d=i.plots[a],h[u.id]=d.id;for(p=Object.keys(t.styles),a=0;a<p.length;++a)_=p[a],f=t.styles[_],delete t.styles[_],m=h[_],t.styles[m]=f;for(g=Object.keys(t.plots),a=0;a<g.length;++a)y=g[a],_=t.plots[y].id,t.plots[y].id=h[_]}return t},n.prototype.patchPointsBasedStudyState=function(t){return n._fixInputsMaxValue(t.state,t.metaInfo),t},n.prototype.patchPointsBasedStudyData=function(t,e){if(!a.isProd())return e;if(!t||!e)return e;var i=TradingView.clone(e);return"VbPFixed@tv-volumebyprice"===t.id&&t.version&&t.version<=4&&n._patchOldVolumeProfiles(0,i),i},n.prototype.patchStudyData=function(t,e,i,o){var r,s,c,h,u,d,p;if(!a.isProd())return{data:e,nsData:i,indexes:o};if(r=TradingView.clone(e),s=TradingView.clone(i),c=TradingView.clone(o),"VbPVisible@tv-volumebyprice"===t.id&&t.version&&t.version<=4&&n._patchOldVolumeProfiles(0,r.graphics),"VbPSessions@tv-volumebyprice"===t.id&&t.version&&t.version<=4&&n._patchOldVolumeProfiles(0,r.graphics),h=l.versionOf(t),t.isTVScript&&t.TVScriptSourceCode&&h>=12&&h<=26)for(u=r.columns,r.columns=[],d=0;d<u.length;++d)p="plot_"+d,r.columns.push(p);return{data:r,nsData:s,indexes:c}},n._patchOldVolumeProfiles=function(t,e){var i,n=e.hhists[t].data,o=[];for(i in n)o=o.concat(n[i]);e.hhists[0].data=o},n._fixInputsOrder=function(t,e){var i,o,r,s,a=l.getOrderedInputIds(e),c=n.splitInputs(t.inputs),h=c.arr,u=c.obj,d=TradingView.merge({},u);for(i=0;i<a.length;++i)o=a[i],null!==(r=n.findInputKeyById(h,o))&&(s=h[r],d[i]=s);t.inputs=d},n.INPUT_MAX_VALUE=1e12,n._verifyInputsMaxValue=function(t){var e,i,o=n.INPUT_MAX_VALUE;if(t.inputs)for(e=0;e<t.inputs.length;e++)i=t.inputs[e],"integer"===i.type&&i.max&&i.max>o&&s.logWarn("Bad integer input max value in metaInfo id="+t.id+" title="+t.description)},n._fixInputsMaxValue=function(t,e){var i,o,r,s,a,l;if(!TradingView.isAbsent(e)){if(i=n.INPUT_MAX_VALUE,e.inputs)for(o=0;o<e.inputs.length;o++)r=e.inputs[o],"integer"===r.type&&r.max&&r.max>i&&(r.max=i);if(t&&t.inputs){s=n.splitInputs(t.inputs),a=s.arr;for(l in a)r=a[l],"integer"===r.type&&r.max&&r.max>i&&(r.max=i);t.inputs=TradingView.merge(s.obj,s.arr)}}},n.prototype.patchPropsStateAndMetaInfo=function(t,e,i){var o,r,s,a,c,h,u,d,p,_,f,m,g,y,v,b,S,w;if("Script$BOOKER"!==e.productId||e.alerts||delete t.alerts,n._fixInputsOrder(t,e),n._fixInputsMaxValue(t,e),o=n.splitInputs(t.inputs),t.inputs=o.obj,l.versionOf(e)<l.METAINFO_FORMAT_VERSION_SOS_V2&&e.isChildStudy&&(t.isChildStudy=e.isChildStudy),r=60,
e.isTVScript&&e.version<r&&("Script$TV_EARNINGS@tv-scripting"!==e.id&&"Script$TV_DIVIDENDS@tv-scripting"!==e.id&&"Script$TV_SPLITS@tv-scripting"!==e.id||delete e.TVScriptSourceCode),"Volume"!==e.id&&"Volume@tv-basicstudies"!==e.id||0!==e.inputs.length||(e.inputs=[{id:"length",type:"integer",defval:20,min:1,max:1e3}],e.plots.push({id:"vol_ma",type:"line"})),"Volume@tv-basicstudies"===e.id&&e.version&&e.version<=46&&(t.styles.vol.transparency=t.transparency||87),"PivotPointsStandard@tv-basicstudies"===e.id&&(0===e.inputs.length?(t.inputs={kind:"Traditional",showHistoricalPivots:!0},e.inputs=[{defval:"Traditional",id:"kind",type:"text",options:["Traditional","Fibonacci","Woodie","Classic","DeMark","Camarilla"]},{id:"showHistoricalPivots",type:"bool",defval:!0}]):1===e.inputs.length&&(t.inputs={kind:"Traditional"},e.inputs=[{defval:"Traditional",id:"kind",type:"text",options:["Traditional","Fibonacci","Woodie","Classic","DeMark","Camarilla"]},{id:"showHistoricalPivots",type:"bool",defval:!0}]),void 0===t._hardCodedDefaultsVersion&&(t._hardCodedDefaultsVersion=1,s=t.color,delete t.color,t.levelsStyle={colors:{P:s,"S1/R1":s,"S2/R2":s,"S3/R3":s,"S4/R4":s,"S5/R5":s}})),"CMF"===e.shortId&&2===e.inputs.length&&(t.inputs={length:t.inputs["length fast"]},e.inputs=e.inputs.splice(0,1),e.inputs[0].id="length"),e.defaults&&void 0===e.defaults.precision&&(-1!==["Volume@tv-basicstudies","VbPVisible@tv-volumebyprice","VbPSessions@tv-volumebyprice"].indexOf(e.id)?e.defaults.precision=0:e.defaults.precision=4),a=60,e.version<a)for(c=["TV_DIVIDENDS","TV_SPLITS","TV_EARNINGS"],h=6,u=0;u<c.length;u++)e.id.startsWith("Script$"+c[u]+"@tv-scripting")&&(e.fullId="ESD"+e.fullId.substring(h),e.id="ESD"+e.id.substring(h),e.name="ESD"+e.name.substring(h),e.shortId="ESD"+e.shortId.substring(h),e.productId="ESD"+e.productId.substring(h));if(l.versionOf(e)<l.VERSION_PINE_PROTECT_TV_4164&&(d={"StrategyScript$STD;Consecutive%1Ups/Downs%1Strategy":{pineId:"STD;Consecutive%1Ups%1Downs%1Strategy",className:"StrategyScript"},Script$EDGR_NET_INCOME_FROM_CONTINUING_OPERATIONS_APPLICABLE_TO_COMMON_V2:{pineId:"Script$EDGR_NET_INCOME_FROM_CONTINUING_OPS_APPLICABLE_TO_COMMON_V2",className:"Script"}},e.shortId in d&&(p=d[e.shortId].className+"$"+d[e.shortId].pineId,_={scriptIdPart:d[e.shortId].pineId,fullId:e.fullId.replace(e.shortId,p),id:e.id.replace(e.shortId,p),name:e.name.replace(e.shortId,p),shortId:p},TradingView.merge(e,_),TradingView.merge(t,_)),f=TradingView.StudyMetaInfo.cutScriptIdPart(e.fullId),(m=f.match(/^(USER)(_\d+)(;)(.*)$/))&&(g=m[0],y=m[1]+m[3]+m[2]+m[4],_={scriptIdPart:y,fullId:e.fullId.replace(g,y),id:e.id.replace(g,y),name:e.name.replace(g,y),shortId:e.shortId.replace(g,y)},TradingView.merge(e,_),TradingView.merge(t,_))),"MA"===e.id){switch(v=new l({id:"MAExp",properties:[{id:"is_price_study",type:"bool",value:"true"}],inputs:[{id:"length",type:"integer",defval:20,min:1,max:500},{id:"source",type:"text",defval:"close",options:["open","high","low","close"]}],plots:[{id:"MovAvgExp",type:"line"}],palettes:{}}),b=new l({id:"MASimple",
properties:[{id:"is_price_study",type:"bool",value:"true"}],inputs:[{id:"length",type:"integer",defval:20,min:1,max:500},{id:"source",type:"text",defval:"close",options:["open","high","low","close"]}],plots:[{id:"MovAvgSimple",type:"line"}],palettes:{}}),S=new l({id:"MAVolumeWeighted",properties:[{id:"is_price_study",type:"bool",value:"true"}],inputs:[{id:"length",type:"integer",defval:20,min:1,max:500},{id:"source",type:"text",defval:"close",options:["open","high","low","close"]}],plots:[{id:"MovAvgVolumeWeighted",type:"line"}],palettes:{}}),w=new l({id:"MAWeighted",properties:[{id:"is_price_study",type:"bool",value:"true"}],inputs:[{id:"length",type:"integer",defval:20,min:1,max:500},{id:"source",type:"text",defval:"close",options:["open","high","low","close"]}],plots:[{id:"MovAvgWeighted",type:"line"}],palettes:{}}),t.inputs.type){case"exp":e=v;break;case"simple":e=b;break;case"weighted":e=w;break;case"volume weighted":e=S}t.styles[e.plots[0].id]=t.styles.MovAvg,delete t.styles.MovAvg,delete t.inputs.type}return i.oldShowStudyLastValueProperty&&(t.oldShowLastValue=t.showLastValue),delete t.showLastValue,delete t.showStudyArguments,{propsState:t,metaInfo:e}},n.mergeInputs=function(t,e){n.mergeInputsArrPart(t,e),n.mergeInputsObjPart(t,e)},n.mergeInputsArrPart=function(t,e){var i,o,r=n.splitInputs(e);for(i in r.arr)o=n.findInputKeyById(t,r.arr[i].id),o?TradingView.merge(t[o],r.arr[i]):n.appendInputInfoToArr(t,r.arr[i])},n.mergeInputsObjPart=function(t,e){var i=n.splitInputs(e);TradingView.merge(t,i.obj)},n.appendInputInfoToArr=function(t,e){var i,n,o=-1;for(i in t)n=parseInt(i,10),isNumber(n)&&n>o&&(o=n);t[o+1]=e},n.splitInputs=function(t){var e,i={},n={};for(e in t)isNumber(parseInt(e,10))?i[e]=t[e]:n[e]=t[e];return{arr:i,obj:n}},n.findInputKeyById=function(t,e){var i,n=null;for(i in t)if(isNumber(parseInt(i,10))&&t[i].id===e){n=i;break}return n},n.getInputKeyById=function(t,e){var i=n.findInputKeyById(t,e);if(!i)throw Error("Cannot find input with id: "+e);return i},t.exports=n},function(t,e,i){"use strict";var n,o,r,s;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"LineToolPriceAxisView",function(){return s}),n=i(0),o=i(6),i.n(o),r=i(54),s=function(t){function e(e,i){var n=t.call(this)||this;return n._activeBackground="#0F6DBF",n._background="#5592C9",n._active=!1,n._source=e,n._data=i,n}return n.c(e,t),e.prototype.setActive=function(t){this._active=t},e.prototype.setBackground=function(t){this._background=t},e.prototype._updateRendererData=function(t){var e,i,n,o,r,s,a,l;t.visible=!1,e=this._source.model(),e.timeScale()&&!e.timeScale().isEmpty()&&(null===(i=this._source.priceScale())||i.isEmpty()||(e.selectedSource()===this._source||this._source.isForcedDrawPriceAxisLabel())&&null!==e.timeScale().visibleBars()&&(n=this._source.axisPoints(),o=this._data.pointIndex,n.length<=o||(r=n[o],isFinite(r.price)&&(s=this._source.ownerSource(),null!=(a=null!==s?s.firstValue():null)&&(l=this._active?this._activeBackground:this._background,this._data.backgroundProperty&&(l=this._data.backgroundProperty.value()),
t.background=l,t.borderColor="#2E84A6",t.color=this.generateTextColor(l),t.coordinate=i.priceToCoordinate(r.price,a),t.text=this._formatPrice(r.price,a),t.visible=!0)))))},e.prototype._formatPrice=function(t,e){return Object(o.ensureNotNull)(this._source.priceScale()).formatPrice(t,e)},e}(r.a)},function(t,e,i){"use strict";var n,o;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"TimeAxisView",function(){return o}),n=i(29),i.n(n),o=function(){function t(){this._text="",this._background="#585858",this._coordinate=0}return t.prototype.text=function(){return this._text},t.prototype.background=function(){return this._background},t.prototype.color=function(){return"black"===Object(n.rgbToBlackWhiteString)(Object(n.parseRgb)(this._background),150)?"white":"black"},t.prototype.coordinate=function(){return this._coordinate},t}()},function(t,e,i){"use strict";var n,o,r;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"TimeAxisViewRenderer",function(){return r}),n=i(49),i.n(n),o=/[1-9]/g,r=function(){function t(){this._data=null}return t.prototype.setData=function(t){this._data=t},t.prototype.draw=function(t,e){var i,r,s,a,l,c,h,u,d,p,_,f,m,g;null!==this._data&&!1!==this._data.visible&&0!==this._data.text.length&&(t.font=e.font,(i=Math.round(e.widthCache.measureText(t,this._data.text,o)))<=0||(r=e.paddingHorizontal,s=i+2*r,a=s/2,l=this._data.width,c=this._data.coordinate,h=Math.floor(c-a)+.5,h<0?(c+=Math.abs(0-h),h=Math.floor(c-a)+.5):h+s>l&&(c-=Math.abs(l-(h+s)),h=Math.floor(c-a)+.5),u=h+s,d=.5,p=d+e.borderSize+e.paddingTop+e.fontSize+e.paddingBottom,t.fillStyle=this._data.background,t.lineWidth=1,Object(n.drawRoundRect)(t,h,d,u-h,p-d,1),t.fill(),_=Math.round(this._data.coordinate+1),f=d,m=f+e.borderSize+e.tickLength,t.strokeStyle=this._data.color,t.beginPath(),t.moveTo(_,f),t.lineTo(_,m),t.stroke(),g=p-e.baselineOffset-e.paddingBottom,t.textAlign="left",t.fillStyle=this._data.color,t.fillText(this._data.text,h+r,g)))},t}()},function(t,e,i){"use strict";var n,o,r,s;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"AbbreviatedDateTimeFormatter",function(){return s}),n=i(155),o=i(13),r={1:window.t("Jan"),2:window.t("Feb"),3:window.t("Mar"),4:window.t("Apr"),5:window.t("May"),6:window.t("Jun"),7:window.t("Jul"),8:window.t("Aug"),9:window.t("Sep"),10:window.t("Oct"),11:window.t("Nov"),12:window.t("Dec")},s=function(){function t(t){void 0===t&&(t=!1),this._dwm=t}return t.prototype.format=function(t){var e=this._formatDate(t);return this._dwm||(e+=" · "+new n.TimeFormatter("%h:%m").format(t)),e},t.prototype.formatLocal=function(t){var e=this._formatDateLocal(t);return this._dwm||(e+=" · "+new n.TimeFormatter("%h:%m").formatLocal(t)),e},t.prototype._formatDate=function(t){var e,i,n;return o.customFormatters&&o.customFormatters.dateFormatter?o.customFormatters.dateFormatter.format(t):(e=Object(o.numberToStringWithLeadingZero)(t.getUTCDate(),2),i=r[t.getUTCMonth()+1],n=(""+t.getUTCFullYear()).substring(2),e+" "+i+" '"+n)},t.prototype._formatDateLocal=function(t){var e,i,n
;return o.customFormatters.dateFormatter?o.customFormatters.dateFormatter.formatLocal?o.customFormatters.dateFormatter.formatLocal(t):o.customFormatters.dateFormatter.format(t):(e=Object(o.numberToStringWithLeadingZero)(t.getDate(),2),i=r[t.getMonth()+1],n=(""+t.getFullYear()).substring(2),e+" "+i+" '"+n)},t}()},function(t,e,i){"use strict";function n(t,e){this.customization={forcePriceAxisLabel:!0,disableSelection:!0,disableErasing:!0},o.call(this,t,e)}var o=i(1).LineDataSource;inherit(n,o),n.POINTS_COUNT=1,n.prototype.pointsCount=function(){return n.POINTS_COUNT},n.prototype.hasContextMenu=function(){return!1},n.prototype.state=function(){return null},n.prototype.startMoving=function(){o.prototype.startMoving.apply(this,arguments),this._cursorMoved=!1},n.prototype.endMoving=function(){o.prototype.endMoving.apply(this,arguments),this._cursorMoved=!1},n.prototype.correctPoints=function(t){var e,i,n,o,r;for(this._currentMovingPoint&&this._startMovingPoint?this._currentMovingPoint.price-this._startMovingPoint.price&&(this._cursorMoved=!0):this._cursorMoved=!1,e=this.priceScale(),i=e.mainSource().base(),n=1/i,o=0;o<t.length;o++)r=t[o],this._cursorMoved&&(r.price=this._currentMovingPoint.price),r.price=n*Math.round(r.price/n),t[o]=r},n.prototype.userEditEnabled=function(){return!0},n.prototype.canBeHidden=function(){return!1},n.prototype.isUserDeletable=function(){return!1},n.prototype.showInObjectTree=function(){return!1},n.prototype.getInputsPropertyPage=function(){return null},n.prototype.doesMovingAffectsUndo=function(){return!1},t.exports=n},function(t,e,i){"use strict";var n,o,r;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"LineToolHorzLinePriceAxisView",function(){return r}),n=i(0),o=i(54),r=function(t){function e(e){var i=t.call(this)||this;return i._source=e,i}return n.c(e,t),e.prototype._updateRendererData=function(t){var e,i,n,o,r,s;t.visible=!1,e=this._source.points(),i=this._source.priceScale(),0===e.length||null===i||i.isEmpty()||(n=e[0],isFinite(n.price)&&(o=this._source.ownerSource(),null!=(r=null!==o?o.firstValue():null)&&(s=this._source.properties().linecolor.value(),t.background=s,t.color=this.generateTextColor(s),t.coordinate=i.priceToCoordinate(n.price,r),t.text=i.formatPrice(n.price,r),t.visible=!0)))},e}(o.a)},function(t,e,i){"use strict";(function(t){function n(e,o){var r,s,c,d,p,_,f,m,g,y=o||new h("linetoolriskreward");a.call(this,e,y),this._properties.addExclusion&&(this._properties.addExclusion("stopLevel"),this._properties.addExclusion("profitLevel")),o.stopLevel||o.profitLevel||(r=e.timeScale().visibleBars(),s=r.firstBar(),c=r.lastBar(),d=e.mainSeries().priceRange(s,c),p=e.mainSeries().priceScale(),p.isLog()&&(_=p.logicalToPrice(d.minValue()),f=p.logicalToPrice(d.maxValue()),d=new t(_,f)),d&&!d.isEmpty()&&(m=Math.round(.2*d.length()*e.mainSeries().base()),y.merge({stopLevel:m,profitLevel:m}))),g=this,y.stopLevel.listeners().subscribe(this,this.recalculate),y.stopLevel.listeners().subscribe(null,function(){g.properties().stopPrice._listeners.fire(g.properties().stopPrice)}),
y.profitLevel.listeners().subscribe(this,this.recalculate),y.profitLevel.listeners().subscribe(null,function(){g.properties().targetPrice._listeners.fire(g.properties().targetPrice)}),y.addChild("entryPrice",new n.PriceProperty(this,0)),y.addChild("stopPrice",new n.StopPriceProperty(this)),y.addChild("targetPrice",new n.TargetPriceProperty(this)),y.addProperty("riskSize",250),y.addProperty("qty",0),y.addProperty("amountTarget",y.accountSize.value()),y.addProperty("amountStop",y.accountSize.value()),this._riskInPercentsFormatter=new u(2),this._riskInMoneyFormatter=new u,y.risk.subscribe(this,this._recalculateRiskSize),y.accountSize.subscribe(this,this._recalculateRiskSize),y.riskDisplayMode.subscribe(this,this._recalculateRisk),y.riskDisplayMode.subscribe(this,this._recalculateRiskSize),y.entryPrice.subscribe(this,this._recalculateRiskSize),y.stopPrice.subscribe(this,this._recalculateRiskSize),y.profitLevel.subscribe(this,this._recalculateRiskSize),y.stopLevel.subscribe(this,this._recalculateRiskSize),y.qty.subscribe(this,this._recalculateRiskSize),"percents"===y.riskDisplayMode.value()&&y.risk.value()>100&&y.riskDisplayMode.setValueSilently("money"),this._syncStateExclusions=["entryPrice","stopPrice","targetPrice","riskSize","qty","amountTarget","amountStop","risk","accountSize"],this.version=n.version,this._entryPriceAxisView=new l(this,{colorProperty:y.linecolor,priceProperty:y.entryPrice}),this._stopPriceAxisView=new l(this,{colorProperty:y.stopBackground,priceProperty:y.stopPrice}),this._profitPriceAxisView=new l(this,{colorProperty:y.profitBackground,priceProperty:y.targetPrice}),i.e(0).then(function(t){var e=i(915).RiskRewardPaneView;this._setPaneViews([new e(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}function o(t,e){var i,o;this._constructor="LineToolRiskRewardShort",i=e||new h("linetoolriskrewardshort"),n.call(this,t,i),o=this.properties(),o.entryPrice.subscribe(this,this._recalculateQty),o.stopPrice.subscribe(this,this._recalculateQty),o.riskSize.subscribe(this,this._recalculateQty),o.entryPrice.subscribe(this,this._recalculateAmount),o.profitLevel.subscribe(this,this._recalculateAmount),o.stopLevel.subscribe(this,this._recalculateAmount),o.accountSize.subscribe(this,this._recalculateAmount),o.riskSize.subscribe(this,this._recalculateAmount),o.qty.subscribe(this,this._recalculateAmount)}function r(t,e){var i,o;this._constructor="LineToolRiskRewardLong",i=e||new h("linetoolriskrewardlong"),n.call(this,t,i),o=this.properties(),o.entryPrice.subscribe(this,this._recalculateQty),o.stopPrice.subscribe(this,this._recalculateQty),o.riskSize.subscribe(this,this._recalculateQty),o.entryPrice.subscribe(this,this._recalculateAmount),o.profitLevel.subscribe(this,this._recalculateAmount),o.stopLevel.subscribe(this,this._recalculateAmount),o.accountSize.subscribe(this,this._recalculateAmount),o.riskSize.subscribe(this,this._recalculateAmount),o.qty.subscribe(this,this._recalculateAmount)}
var s=i(6).ensureNotNull,a=i(1).LineDataSource,l=i(691).LineToolRiskRewardPriceAxisView,c=i(38),h=i(3).DefaultProperty,u=i(68).NumericFormatter,d=i(2).propertyPages,p=i(423).RiskRewardPointIndex;inherit(n,a),n.prototype.riskFormatter=function(t){return"percents"===t?this._riskInPercentsFormatter:this._riskInMoneyFormatter},n.prototype.getRiskStep=function(t){return"percents"===t?.01:1},n.prototype._roundValue=function(t){return parseFloat(t.toFixed(2))},n.prototype._recalculateRisk=function(){var t=this.properties(),e=t.riskDisplayMode.value(),i=t.riskSize.value(),n=t.accountSize.value(),o=t.risk.value();o="percents"===e?this._roundValue(i/n*100):this._roundValue(n/100*o),this._riskInChange=!0,t.risk.setValue(this.riskFormatter(e).format(o)),this._riskInChange=!1},n.prototype._recalculateRiskSize=function(){var t,e,i,n;this._riskInChange||(t=this.properties(),e=t.risk.value(),i=t.riskDisplayMode.value(),n=t.accountSize.value(),"percents"===i?t.riskSize.setValue(e/100*n):e>n?(t.risk.setValue(n),t.riskSize.setValue(n)):t.riskSize.setValue(e))},n.version=2,n.prototype.i18nCache={title:$.t("Risk/Reward")},n.prototype.lastBarData=function(){var t,e,i,n,o,r=this._model.mainSeries().bars().firstIndex(),a=this._model.mainSeries().bars().lastIndex();return null===r||null===a||isNaN(r)||isNaN(a)?null:(t=this.points(),4===t.length?(e=t[p.ActualClose],e.index<r?null:{closePrice:e.price,index:Math.min(a,e.index)}):(i=t[p.Close],i.index<r?null:(n=Math.min(a,i.index),o=s(this._model.mainSeries().bars().valueAt(n)),{closePrice:o[TradingView.CLOSE_PLOT],index:n})))},n.prototype.migrateVersion=function(t,e,i){var n,o,r,s;1===t&&this._points.length>=1&&(n=[],n.push(this._points[0]),o=this._points[0],o={price:o.price,index:o.index+50},n.push(o),this._points[1]&&n.push(this._points[1]),this._points[2]&&n.push(this._points[2]),this._points=n,this._timePoint.length>=1&&(r=[],o=this._timePoint[0],r.push(o),s={price:o.price,time_t:o.time_t,offset:o.offset+50},r.push(s),this._timePoint[1]&&n.push(this._points[1]),this._timePoint[2]&&n.push(this._points[2]),this._timePoint=r))},n.prototype.checkAlert=function(){this.recalculate()},n.prototype.priceAxisViews=function(t,e){return this.isSourceHidden()?null:e!==this.priceScale()||this._model.paneForSource(this)!==t?null:[this._entryPriceAxisView,this._stopPriceAxisView,this._profitPriceAxisView]},n.prototype.updateAllViews=function(){this.isActualSymbol()&&this._properties.visible.value()&&(c.hideAllDrawings().value()&&this.userEditEnabled()||(a.prototype.updateAllViews.call(this),this._entryPriceAxisView.update(),this._stopPriceAxisView.update(),this._profitPriceAxisView.update()))},n.prototype.setPoint=function(t,e){switch(t){case 0:e.price=this._roundPrice(e.price),a.prototype.setPoint.call(this,t,e),this.recalculate();break;case 1:this.isActualSymbol()&&this.properties().stopPrice.setValue(this.preparseStopPrice(e.price));break;case 2:this.isActualSymbol()&&this.properties().targetPrice.setValue(this.preparseProfitPrice(e.price));break;case 3:e.price=this._roundPrice(e.price),
a.prototype.setPoint.call(this,1,e),this.recalculate()}},n.PriceProperty=function(t,e){a.PointPriceProperty.call(this,t,e)},inherit(n.PriceProperty,a.PointPriceProperty),n.PriceProperty.prototype.setValue=function(t){var e=this._lineSource.points()[this._pointIndex];e.price=parseFloat(t),this._lineSource.setPoint(this._pointIndex,e),this._lineSource.recalculate(),this._lineSource._model.updateSource(this._lineSource),this._listeners.fire(this),this._lineSource.endChanging(),this._lineSource._syncMultichartState()},n.StopPriceProperty=function(t){n.PriceProperty.call(this,t,1)},inherit(n.StopPriceProperty,n.PriceProperty),n.StopPriceProperty.prototype.value=function(){var t=this._lineSource.stopPrice(),e=this._lineSource.ownerSource().formatter(),i=e.parse(e.format(t));return i.price?i.price:i.value},n.StopPriceProperty.prototype.setValue=function(t){var e=Math.round(Math.abs(t-this._lineSource.entryPrice())*this._lineSource._model.mainSeries().base());this._lineSource.properties().stopLevel.setValue(e),this._lineSource.properties().stopLevel.listeners().fire(this._lineSource.properties().stopLevel)},n.TargetPriceProperty=function(t){n.PriceProperty.call(this,t,2)},inherit(n.TargetPriceProperty,n.PriceProperty),n.TargetPriceProperty.prototype.value=function(){var t=this._lineSource.profitPrice(),e=this._lineSource.ownerSource().formatter(),i=e.parse(e.format(t));return i.price?i.price:i.value},n.TargetPriceProperty.prototype.setValue=function(t){var e=Math.round(Math.abs(t-this._lineSource.entryPrice())*this._lineSource._model.mainSeries().base());this._lineSource.properties().profitLevel.setValue(e),this._lineSource.properties().profitLevel.listeners().fire(this._lineSource.properties().profitLevel)},n.prototype.pointsCount=function(){return 1},n.prototype.title=function(){return this.i18nCache.title},n.prototype.name=function(){return"Risk/Reward"},n.prototype.addPoint=function(t){var e,i;return t.price=this._roundPrice(t.price),a.prototype.addPoint.call(this,t,null,!0),e={price:t.price,index:t.index+50},a.prototype._addPointIntenal.call(this,e,null,!0),i=this.calculateActualEntry(t,e),i&&(a.prototype._addPointIntenal.call(this,i,null,!0),(e=this.findClosePoint(i,e))&&a.prototype._addPointIntenal.call(this,e,null,!0)),this._lastPoint=null,this.normalizePoints(),this.createServerPoints(),!0},n.prototype._roundPrice=function(t){var e=this._model.mainSeries().base();return Math.round(t*e)/e},n.prototype.recalculate=function(){var t,e,i,n,o;this.properties().interval.value()===this._model.mainSeries().interval()&&0!==this.points().length&&(t=this.properties().targetPrice.value(),e=this.properties().stopPrice.value(),i=[this._points[0],this._points[1]],n=this.calculateActualEntry(this.points()[0],this.points()[1]),n&&(i.push(n),(o=this.findClosePoint(n,this.points()[1]))&&i.push(o)),this._points=i,t!==this.properties().targetPrice.value()&&this.properties().targetPrice._listeners.fire(this.properties().targetPrice),
e!==this.properties().stopPrice.value()&&this.properties().stopPrice._listeners.fire(this.properties().stopPrice))},n.prototype.start=function(){a.prototype.start.call(this),this.recalculate()},n.prototype.startMoving=function(t){t.price=this._roundPrice(t.price),a.prototype.startMoving.call(this,t)},n.prototype.move=function(t){t.price=this._roundPrice(t.price),a.prototype.move.call(this,t),this.recalculate(),this._entryPriceAxisView.update()},n.prototype.correctPoints=function(t){return!!this.isActualSymbol()&&a.prototype.correctPoints.call(this,[t[0],t[1]])},n.prototype.entryPrice=function(){return this.points()[0].price},n.prototype.findClosePoint=function(t,e){var i,n,o,r=this._model.mainSeries().bars(),a=s(r.firstIndex()),l=Math.max(t.index,a),c=s(r.lastIndex());for(i=l;i<=Math.min(c,e.index);i++)if(n=s(r.valueAt(i)),null!=(o=this.checkStopPrice(n)))return{index:i,price:o};return null},n.prototype.calculateActualEntry=function(t,e){var i,n,o=this._model.mainSeries().bars(),r=s(o.firstIndex()),a=Math.max(t.index,r),l=t.price,c=s(o.lastIndex());for(i=a;i<=Math.min(c,e.index);i++)if(n=s(o.valueAt(i)),n[TradingView.HIGH_PLOT]>=l&&n[TradingView.LOW_PLOT]<=l)return{index:i,price:l};return null},n.prototype.axisPoints=function(){var t,e,i;if(!this._points[p.ActualEntry])return[];if(t=this._points[p.ActualEntry],e=null,4===this._points.length)e=this._points[p.ActualClose];else{if(!(i=this.lastBarData()))return[];e={index:i.index,price:i.closePrice}}return[t,e]},n.prototype.getInputsPropertyPage=function(){return d.LineToolRiskRewardInputsPropertyPage},n.prototype.getStylesPropertyPage=function(){return d.LineToolRiskRewardStylesPropertyPage},inherit(o,n),o.prototype.i18nCache={title:$.t("Risk/Reward short")},o.prototype._recalculateQty=function(){var t,e,i,n,o;0!==this.points().length&&(t=this.properties(),e=t.entryPrice.value(),i=t.stopPrice.value(),n=t.riskSize.value(),o=Math.floor(n/Math.abs(i-e)),t.qty.setValue(o))},o.prototype._recalculateAmount=function(){var t,e,i,n,o,r,s,a;0!==this.points().length&&(t=this.properties(),e=t.accountSize.value(),i=t.entryPrice.value(),n=t.qty.value(),o=t.stopPrice.value(),r=t.targetPrice.value(),s=this._roundValue(e+(i-r)*n),a=this._roundValue(e-(o-i)*n),t.amountTarget.setValue(s),t.amountStop.setValue(a))},o.prototype.title=function(){return this.i18nCache.title},o.prototype.name=function(){return"Risk/Reward short"},o.prototype.stopPrice=function(){return this.entryPrice()+this.properties().stopLevel.value()/this._model.mainSeries().base()},o.prototype.profitPrice=function(){return this.entryPrice()-this.properties().profitLevel.value()/this._model.mainSeries().base()},o.prototype.calculatePL=function(t){return this.entryPrice()-t},o.prototype.preparseStopPrice=function(t){t=this._roundPrice(t);var e=this.entryPrice()+1/this._model.mainSeries().base();return Math.max(t,e)},o.prototype.preparseProfitPrice=function(t){t=this._roundPrice(t);var e=this.entryPrice()-1/this._model.mainSeries().base();return Math.min(t,e)},o.prototype.checkStopPrice=function(t){
var e=this.stopPrice(),i=this.profitPrice();return t[TradingView.HIGH_PLOT]>=e?this.stopPrice():t[TradingView.LOW_PLOT]<=i?this.profitPrice():null},r.prototype.i18nCache={title:$.t("Risk/Reward long")},inherit(r,n),r.prototype._recalculateQty=function(){var t,e,i,n,o;0!==this.points().length&&(t=this.properties(),e=t.entryPrice.value(),i=t.stopPrice.value(),n=t.riskSize.value(),o=Math.floor(n/Math.abs(e-i)),t.qty.setValue(o))},r.prototype._recalculateAmount=function(){var t,e,i,n,o,r,s,a;0!==this.points().length&&(t=this.properties(),e=t.accountSize.value(),i=t.entryPrice.value(),n=t.qty.value(),o=t.stopPrice.value(),r=t.targetPrice.value(),s=this._roundValue(e+(r-i)*n),a=this._roundValue(e-(i-o)*n),t.amountTarget.setValue(s),t.amountStop.setValue(a))},r.prototype.stopPrice=function(){return this.entryPrice()-this.properties().stopLevel.value()/this._model.mainSeries().base()},r.prototype.profitPrice=function(){return this.entryPrice()+this.properties().profitLevel.value()/this._model.mainSeries().base()},r.prototype.calculatePL=function(t){return t-this.entryPrice()},r.prototype.preparseStopPrice=function(t){t=this._roundPrice(t);var e=this.entryPrice()-1/this._model.mainSeries().base();return Math.min(t,e)},r.prototype.preparseProfitPrice=function(t){t=this._roundPrice(t);var e=this.entryPrice()+1/this._model.mainSeries().base();return Math.max(t,e)},r.prototype.checkStopPrice=function(t){var e=this.stopPrice(),i=this.profitPrice();return t[TradingView.LOW_PLOT]<=e?this.stopPrice():t[TradingView.HIGH_PLOT]>=i?this.profitPrice():null},r.prototype.title=function(){return this.i18nCache.title},r.prototype.name=function(){return"Risk/Reward long"},e.LineToolRiskReward=n,e.LineToolRiskRewardLong=r,e.LineToolRiskRewardShort=o}).call(e,i(65).PriceRange)},function(t,e,i){"use strict";(function(t){function n(e,i,o){var r,s;this.m_timeScale=e,r=i.rightAxisProperties.state(),r.autoScale=!0,this.m_rightPriceScale=new c(o.properties().scalesProperties,r),this.m_rightPriceScale.modeChanged().subscribe(this,this._onPriceScaleModeChanged.bind(this,this.m_rightPriceScale)),s=i.leftAxisProperties.state(),s.autoScale=!0,this.m_leftPriceScale=new c(o.properties().scalesProperties,s),this.m_leftPriceScale.modeChanged().subscribe(this,this._onPriceScaleModeChanged.bind(this,this.m_leftPriceScale)),this.m_dataSources=[],this.m_height=0,this.m_width=0,this.m_mainDataSource=null,this._properties=i,this._model=o,this._tagsChanged=new t,this._destroyed=new t,this._leftPriceScaleRatioChanged=new t,this._rightPriceScaleRatioChanged=new t,this._leftPriceScaleRatioChanged.subscribe(this,this._mainSeriesPaneScaleRatioOnChange),this._rightPriceScaleRatioChanged.subscribe(this,this._mainSeriesPaneScaleRatioOnChange),this.m_timeScale.barSpacingChanged().subscribe(this,this._recalculatePriceScaleByScaleRatio),this.m_leftPriceScale.internalHeightChanged().subscribe(this,this._recalculatePriceScaleByScaleRatio),this.m_rightPriceScale.internalHeightChanged().subscribe(this,this._recalculatePriceScaleByScaleRatio),
this.m_leftPriceScale.priceRangeChanged().subscribe(this,this._recalculateTimeScaleByLeftScaleRatio),this.m_rightPriceScale.priceRangeChanged().subscribe(this,this._recalculateTimeScaleByRightScaleRatio),this.m_leftPriceScale.priceRangeChanged().subscribe(this,this._onLeftPriceScaleSetMinMaxPriceRange),this.m_rightPriceScale.priceRangeChanged().subscribe(this,this._onRightPriceScaleSetMinMaxPriceRange),this._lastLeftPriceScaleRatio=h(this.m_timeScale,this.m_leftPriceScale),this._lastRightPriceScaleRatio=h(this.m_timeScale,this.m_rightPriceScale),i.topMargin.listeners().subscribe(this,n.prototype._updateMargins),i.bottomMargin.listeners().subscribe(this,n.prototype._updateMargins),this._updateMargins(),this._stretchFactor=n.DEFAULT_STRETCH_FACTOR,this._isInInsertManyDataSourcesState=!1,this._lastLineDataSourceZOrder=null,this._maximized=!1,this._isMainPane=!1}var o=i(332).ExecutionsPositionController,r=i(1).LineDataSource,s=i(65).PriceRange,a=i(34).PriceDataSource,l=i(5).getLogger("Chart.Pane"),c=i(210).PriceScale,h=i(140).scaleRatio,u=i(140).priceRangeByScaleRatio,d=i(140).barSpacingByScaleRatio;n.DEFAULT_STRETCH_FACTOR=1e3,n.PANE_ANIMATION_DURATION=500,n.sortSourcesPreOrdered={"Volume@tv-basicstudies":0,ChartEventsSource:1,"ESD$TV_DIVIDENDS@tv-scripting":2,"ESD$TV_SPLITS@tv-scripting":3,"ESD$TV_EARNINGS@tv-scripting":4,LineToolOrder:5,LineToolPosition:6,LineToolExecution:7},n.prototype.destroy=function(){var t,e;for(this._leftPriceScaleRatioChanged.unsubscribe(this,this._mainSeriesPaneScaleRatioOnChange),this._rightPriceScaleRatioChanged.unsubscribe(this,this._mainSeriesPaneScaleRatioOnChange),this.m_rightPriceScale.priceRangeChanged().unsubscribe(this,this._recalculateTimeScaleByRightScaleRatio),this.m_leftPriceScale.priceRangeChanged().unsubscribe(this,this._recalculateTimeScaleByLeftScaleRatio),this.m_timeScale.barSpacingChanged().unsubscribe(this,this._recalculatePriceScaleByScaleRatio),this.m_leftPriceScale.internalHeightChanged().unsubscribe(this,this._recalculatePriceScaleByScaleRatio),this.m_rightPriceScale.internalHeightChanged().unsubscribe(this,this._recalculatePriceScaleByScaleRatio),this.m_leftPriceScale.priceRangeChanged().unsubscribe(this,this._onLeftPriceScaleSetMinMaxPriceRange),this.m_rightPriceScale.priceRangeChanged().unsubscribe(this,this._onRightPriceScaleSetMinMaxPriceRange),this.m_leftPriceScale.modeChanged().unsubscribeAll(this),this.m_rightPriceScale.modeChanged().unsubscribeAll(this),this._properties.topMargin.listeners().unsubscribe(this,n.prototype._updateMargins),this._properties.bottomMargin.listeners().unsubscribe(this,n.prototype._updateMargins),t=0;t<this.m_dataSources.length;t++)e=this.m_dataSources[t],e.destroy&&e.destroy();this._destroyed.fire()},n.prototype.setPaneSize=function(t){var e={large:1,medium:.6,small:.3,tiny:.15};if(!e[t])throw Error("Unknown size enum value: "+t);this._stretchFactor=e[t]*n.DEFAULT_STRETCH_FACTOR},n.sortSources=function(t){return t.map(function(t){var e,i,o=t._constructor;return isFunction(t.metaInfo)&&(o=t.metaInfo().id),
i=n.sortSourcesPreOrdered[o]||0,e=i>0?1/0:i<0?-1/0:t.zorder(),[t,i,e]}).sort(function(t,e){return t[1]-e[1]||t[2]-e[2]}).map(function(t){return t[0]})},n.prototype._updateMargins=function(){var t,e,i=.01*this._properties.topMargin.value(),n=.01*this._properties.bottomMargin.value();for(this.m_leftPriceScale.setTopMargin(i),this.m_leftPriceScale.setBottomMargin(n),this.m_rightPriceScale.setTopMargin(i),this.m_rightPriceScale.setBottomMargin(n),t=0;t<this.m_dataSources.length;t++)(e=this.m_dataSources[t])instanceof TradingView.Study&&this.isOverlay(e)&&"Volume"!==e.metaInfo().shortId&&e.priceScale()&&e.priceScale()!==this.m_leftPriceScale&&e.priceScale()===this.m_rightPriceScale&&(e.priceScale().setTopMargin(i),e.priceScale().setBottomMargin(n),this.recalculatePriceScale(e.priceScale()));this.recalculatePriceScale(this.m_leftPriceScale),this.recalculatePriceScale(this.m_rightPriceScale),this.updateAllViews()},n.prototype.model=function(){return this._model},n.prototype.width=function(){return this.m_width},n.prototype.height=function(){return this.m_height},n.prototype.setWidth=function(t){this.m_width=t,this.updateAllViews()},n.prototype.setHeight=function(t){var e,i;for(this.m_height=t,this.m_leftPriceScale.setHeight(t),this.m_rightPriceScale.setHeight(t),e=0;e<this.m_dataSources.length;e++)i=this.m_dataSources[e],this.isOverlay(i)&&i.priceScale()&&i.priceScale().setHeight(t);this.updateAllViews()},n.prototype.leftPriceScale=function(){return this.m_leftPriceScale},n.prototype.rightPriceScale=function(){return this.m_rightPriceScale},n.prototype.timeScale=function(){return this.m_timeScale},n.prototype.dataSources=function(){return this.m_dataSources},n.prototype.isOverlay=function(t){return t._isOverlay},n.prototype._processMainSourceChange=function(){var t,e,i,o,s,l,c;if(null===this.m_mainDataSource)for(e=0;e<this.m_dataSources.length;e++)if(i=this.m_dataSources[e],TradingView.isInherited(i.constructor,a)&&!this.isOverlay(i)&&(!i.properties().linkedToSeries||!i.properties().linkedToSeries.value())){this.m_mainDataSource=i,t=!0;break}if(this.m_mainDataSource&&t){for(o=[],e=0;e<this.m_dataSources.length;e++)i=this.m_dataSources[e],TradingView.isInherited(i.constructor,r)&&o.push(i);for(o=n.sortSources(o),e=0;e<o.length;e++)this.move(o[e],this.m_mainDataSource.priceScale(),!0)}else if(!this.m_mainDataSource||this.isOverlay(this.m_mainDataSource)&&0===this.nonOverlayPricesSourcesCount())for(e=0;e<this.m_dataSources.length;e++)if(i=this.m_dataSources[e],TradingView.isInherited(i.constructor,a)&&this.isOverlay(i)&&i.showInObjectTree()){for(this.m_mainDataSource=i,this.m_rightPriceScale.addDataSource(i),i.setPriceScale(this.m_rightPriceScale),s=this._model.children(i),c=0;c<s.length;c++)l=s[c],this.m_rightPriceScale.addDataSource(l),l.setPriceScale(this.m_rightPriceScale),l._isOverlay=!1;this.recalculatePriceScale(this.m_rightPriceScale),i._isOverlay=!1;break}},n.prototype._newZOrderForLineTool=function(){var t,e,i,n=null;for(t=0;t<this.m_dataSources.length;++t)(e=this.m_dataSources[t])instanceof r&&(i=e.zorder(),
(null===n||i>n)&&(n=i));return null===n&&(n=this.getZOrderMinMax().minZOrder-1),this.m_dataSources.forEach(function(t){t.zorder()>n&&t.setZorder(t.zorder()+1)}),n+1},n.prototype.beginInsertManyLineDataSources=function(){this._isInInsertManyDataSourcesState=!0,this._lastLineDataSourceZOrder=null},n.prototype.endInsertManyLineDataSources=function(){this._isInInsertManyDataSourcesState=!1,this._lastLineDataSourceZOrder=null},n.prototype.addDataSource=function(t,e,i){var n;t instanceof r&&!i?(n=null!==this._lastLineDataSourceZOrder?this._lastLineDataSourceZOrder:this._newZOrderForLineTool(),this._isInInsertManyDataSourcesState&&(this._lastLineDataSourceZOrder=n)):n=this.getZOrderMinMax().minZOrder-1,this.insertDataSource(t,e,n)},n.prototype.insertDataSource=function(t,e,i){var o,r,s;this.m_dataSources.push(t),o=!1,t===this._model.mainSeries()?(this.m_mainDataSource=t,o=!0):null===this.m_mainDataSource&&(this.m_mainDataSource=t,o=!0),t._isOverlay=!1,null!==e||t.preferNoScale()||this.canHaveMoreNoScaleSources()||(e=this.rightPriceScale()),null===e&&(r=this.m_rightPriceScale.topMargin(),s=this.m_rightPriceScale.bottomMargin(),t.metaInfo&&"Volume@tv-basicstudies"===t.metaInfo().id&&(r=.75,s=0),e=new c(this._model.properties().scalesProperties),e.setHeight(this.m_height),e.setTopMargin(r),e.setBottomMargin(s),t._isOverlay=!0),e.addDataSource(t,this._isInInsertManyDataSourcesState),t.setPriceScale(e),t.onTagsChanged&&t.onTagsChanged().subscribe(this,n.prototype.onSourceTagsChanged),t.setZorder(i),o&&this._processMainSourceChange(),this._tagsChanged.fire(),TradingView.isInherited(t.constructor,a)&&this.recalculatePriceScale(e),this.invalidateSourcesCache()},n.prototype.removeDataSource=function(t,e){var i,o=this.m_dataSources.indexOf(t);if(-1===o)return void l.logDebug("removeDataSource: invalid data source");t._isOverlay=!1,this.m_dataSources.splice(o,1),t!==this.m_mainDataSource||e||(this.m_mainDataSource=null),i=null,-1!==this.m_leftPriceScale.dataSources().indexOf(t)?(this.m_leftPriceScale.removeDataSource(t),i=this.m_leftPriceScale):-1!==this.m_rightPriceScale.dataSources().indexOf(t)&&(this.m_rightPriceScale.removeDataSource(t),i=this.m_rightPriceScale),t.onTagsChanged&&t.onTagsChanged().unsubscribe(this,n.prototype.onSourceTagsChanged),TradingView.isInherited(t.constructor,a)&&this._processMainSourceChange(),this._tagsChanged.fire(),i&&TradingView.isInherited(t.constructor,a)&&this.recalculatePriceScale(i),this.invalidateSourcesCache()},n.prototype.startScalePrice=function(t,e){t.startScale(e)},n.prototype.scalePriceTo=function(t,e){t.scaleTo(e),this.updateAllViews()},n.prototype.endScalePrice=function(t){t.endScale()},n.prototype.startScrollPrice=function(t,e){t.startScroll(e)},n.prototype.scrollPriceTo=function(t,e){t.scrollTo(e),this.updateAllViews()},n.prototype.endScrollPrice=function(t){t.endScroll()},n.prototype.setPriceAutoScale=function(t,e){if(t.setMode({autoScale:e}),this.timeScale().isEmpty())return void t.setPriceRange(null);this.recalculatePriceScale(t)},n.prototype.restorePriceScaleState=function(t,e){
t.restoreState(e),this.updateAllViews()},n.prototype.updateAllViews=function(){for(var t=0;t<this.m_dataSources.length;t++)this.m_dataSources[t].updateAllViews()},n.prototype.defaultPriceScale=function(){var t=this.m_mainDataSource?this.m_mainDataSource.priceScale():this.rightPriceScale();return void 0===t&&(t=new c(this._model.properties().scalesProperties)),t},n.prototype._priceScaleIsPrice=function(t){var e=t.mainSource();return!!e&&(!!TradingView.isInherited(e.constructor,TradingView.Series)||!!TradingView.isInherited(e.constructor,TradingView.Study)&&e.metaInfo().is_price_study)},n.prototype.findSuitableScale=function(t){if(TradingView.isInherited(t.constructor,TradingView.Study)&&"Volume@tv-basicstudies"===t.metaInfo().id)return this.m_rightPriceScale.mainSource()||this.m_leftPriceScale.mainSource()?null:this.m_rightPriceScale;var e=!1;if(TradingView.isInherited(t.constructor,TradingView.Study)?e=t.metaInfo().is_price_study:TradingView.isInherited(t.constructor,TradingView.Series)&&(e=!0),e){if(this._priceScaleIsPrice(this.m_rightPriceScale))return this.m_rightPriceScale;if(this._priceScaleIsPrice(this.m_leftPriceScale))return this.m_leftPriceScale}return this.m_rightPriceScale.mainSource()?this.m_leftPriceScale.mainSource()?null:this.m_leftPriceScale:this.m_rightPriceScale},n.prototype.mainDataSource=function(){return this.m_mainDataSource},n.prototype.recalculatePriceScale=function(t){var e,i;t&&(e=t.sourcesForAutoscale(),t.isAutoScale()&&e&&e.length>0&&!this.timeScale().isEmpty()&&(i=this.timeScale().visibleBars(),t.recalculatePriceRange(i)),t.updatePaneViews())},n.prototype.resetPriceScale=function(t){var e=this.timeScale().visibleBars();t.isLockScale()||t.setMode({autoScale:!0}),t.recalculatePriceRange(e),this.updateAllViews()},n.prototype.recalculate=function(){var t,e;for(this.recalculatePriceScale(this.m_rightPriceScale),this.recalculatePriceScale(this.m_leftPriceScale),t=0;t<this.m_dataSources.length;t++)e=this.m_dataSources[t],!this.isOverlay(e)||e instanceof r||this.recalculatePriceScale(e.priceScale());this.updateAllViews(),this._model.updatePane(this)},n.prototype.isEmpty=function(){return null===this.m_mainDataSource},n.prototype.move=function(t,e,i){var n=this.m_dataSources.slice(),o=null!==e;this.removeDataSource(t,o),this.addDataSource(t,e,i),this.m_dataSources=n,this.invalidateSourcesCache()},n.prototype.dataSourceForId=function(t){for(var e=0;e<this.m_dataSources.length;e++)if(this.m_dataSources[e].id()===t)return this.m_dataSources[e];return null},n.prototype.priceScaleForSource=function(t){return-1!==this.rightPriceScale().dataSources().indexOf(t)?this.rightPriceScale():-1!==this.leftPriceScale().dataSources().indexOf(t)?this.leftPriceScale():null},n.prototype.sourceById=function(t){for(var e=0;e<this.m_dataSources.length;e++)if(this.m_dataSources[e].id()===t)return this.m_dataSources[e];return null},n.prototype.containsMainSeries=function(){return-1!==this.m_dataSources.indexOf(this._model.mainSeries())},n.prototype.priceScaleByName=function(t){
return"left"===t?this.m_leftPriceScale:"right"===t?this.m_rightPriceScale:null},n.prototype.priceScaleName=function(t){return t===this.m_leftPriceScale?"left":t===this.m_rightPriceScale?"right":""},n.prototype.hitTestSources=function(){var t,e,i,n,o;if(this._cachedHitTestSources)return this._cachedHitTestSources;for(t=this.orderedSources(),e=[],i=[this._model.crossHairSource()],n=0;n<t.length;n++)o=t[n],TradingView.isInherited(o.constructor,r)?e.push(o):i.push(o);return this._cachedHitTestSources=i.concat(e),this._cachedHitTestSources},n.prototype.orderedSources=function(){var t,e,i,o;if(this._cachedOrderedSoruces)return this._cachedOrderedSoruces;for(t=[],e=0,i=this.m_dataSources.length;e<i;e++)o=this.m_dataSources[e],TradingView.isInherited(o.constructor,r)&&!o.isActualSymbol()||t.push(o);return t=n.sortSources(t),this._cachedOrderedSoruces=t,t},n.prototype.createDrawingsCaches=function(){o.recreateOrderedByBarsSourcesCache(this)},n.prototype.clearDrawingCaches=function(){o.clearOrderedByBarsSourcesCache()},n.prototype.invalidateSourcesCache=function(){this._cachedOrderedSoruces=null,this._cachedHitTestSources=null,this.m_leftPriceScale.invalidateSourcesCache(),this.m_rightPriceScale.invalidateSourcesCache()},n.prototype.getZOrderMinMax=function(){var t,e,i,n,o=this.orderedSources();if(0===o.length)return{minZOrder:0,maxZOrder:0};for(t=o[0].zorder(),e=o[0].zorder(),i=1;i<o.length;i++)n=o[i],n.zorder()<t&&(t=n.zorder()),n.zorder()>e&&(e=n.zorder());return{minZOrder:t,maxZOrder:e}},n.prototype.isZOrderAvailable=function(t){var e,i;for(e=0;e<this.m_dataSources.length;e++)if(i=this.m_dataSources[e],i.zorder()===t)return!1;return!0},n.prototype.sendToBack=function(t){var e,i=this.getZOrderMinMax().minZOrder,n=Math.abs(t.zorder()-i);for(e=0;e<n;e++)this.changeZOrder(t,-1)},n.prototype.bringToFront=function(t){var e,i=this.getZOrderMinMax().maxZOrder,n=Math.abs(t.zorder()-i);for(e=0;e<n;e++)this.changeZOrder(t,1)},n.prototype.changeZOrder=function(t,e){var i,n,o,r,s,a=this.orderedSources().filter(function(t){return t.showInObjectTree()}),l=0;for(i=0,n=a.length;i<n;i++)if(a[i]===t){l=i;break}l>0&&e<0?(o=a[l-1].zorder(),r=t.zorder(),a[l-1].setZorder(r),t.setZorder(o)):l<a.length-1&&e>0&&(s=a[l+1].zorder(),r=t.zorder(),a[l+1].setZorder(r),t.setZorder(s)),this.invalidateSourcesCache()},n.prototype.onSourceTagsChanged=function(){this._tagsChanged.fire()},n.prototype.onTagsChanged=function(){return this._tagsChanged},n.prototype.onDestroyed=function(){return this._destroyed},n.prototype.dumpPriceScale=function(t){var e,i,n,o=t.dataSources(),r=[];for(e=0;e<o.length;e++)if(i=o[e].priceAxisViews(this,t))for(n=0;n<i.length;n++)r.push(i[n].dump());return r},n.prototype.dumpViews=function(){var t,e,i,n,o,r={};for(r.paneViews={},t=this.orderedSources(),e=0;e<t.length;e++)if(i=t[e],r.paneViews[e]=[],n=i.paneViews())for(o=0;o<n.size();o++)r.paneViews[e].push(n.item(e).dump());return r.leftAxis=this.dumpPriceScale(this.m_leftPriceScale),r.rightAxis=this.dumpPriceScale(this.m_rightPriceScale),r},n.prototype.clearSeries=function(){
for(var t=this.m_dataSources.length-1;t>=0;t--)TradingView.isInherited(this.m_dataSources[t].constructor,TradingView.Series)&&this.m_dataSources.splice(t,1)},n.prototype.nonOverlayPricesSourcesCount=function(){return this.m_dataSources.filter(function(t){return(!t.properties().linkedToSeries||!t.properties().linkedToSeries.value())&&(TradingView.isInherited(t.constructor,a)&&t.showInObjectTree()&&!t.isNoScale())}).length},n.prototype.canHaveMoreNoScaleSources=function(){return this.nonOverlayPricesSourcesCount()>1},n.prototype.actionNoScaleIsEnabled=function(t){return!(!this.isOverlay(t)&&TradingView.isInherited(t.constructor,a))||this.canHaveMoreNoScaleSources()},n.prototype.executionsPositionController=function(){return this._executionsPositionController||(this._executionsPositionController=new o(this,this._model.timeScale())),this._executionsPositionController},n.prototype.isLast=function(){var t=this._model.panes();return t[t.length-1]===this},n.prototype.setMaximized=function(t){this._maximized=t},n.prototype.isMaximized=function(){return this._maximized},n.prototype.isMainPane=function(){var t=this._model.mainSeries(),e=!1;return this.m_dataSources.forEach(function(i){e||(e=i===t)}),this._isMainPane=e,e},n.prototype.properties=function(){return this._properties},n.prototype._mainSourceVisiblePriceRange=function(t){var e=this.m_timeScale.visibleBars();return null!==e?t.mainSource().priceRange(e.firstBar(),e.lastBar()):new s(-.5,.5)},n.prototype.applyLeftPriceScaleRatio=function(t){this._lastLeftPriceScaleRatio!==t&&(this._setNewPriceRangeByScaleRatio(this.m_leftPriceScale,t,this._mainSourceVisiblePriceRange(this.m_leftPriceScale),!0,!0),this._tryToApplyNewLeftPriceScaleRatio(h(this.m_timeScale,this.m_leftPriceScale)))},n.prototype.applyRightPriceScaleRatio=function(t){this._lastRightPriceScaleRatio!==t&&(this._setNewPriceRangeByScaleRatio(this.m_rightPriceScale,t,this._mainSourceVisiblePriceRange(this.m_rightPriceScale),!0,!0),this._tryToApplyNewRightPriceScaleRatio(h(this.m_timeScale,this.m_rightPriceScale)))},n.prototype.isLeftPriceScaleLocked=function(){return!this.m_leftPriceScale.isLog()&&this.m_leftPriceScale.isLockScale()},n.prototype.isRightPriceScaleLocked=function(){return!this.m_rightPriceScale.isLog()&&this.m_rightPriceScale.isLockScale()},n.prototype.leftPriceScaleRatio=function(){return null===this._lastLeftPriceScaleRatio&&(this._lastLeftPriceScaleRatio=h(this.m_timeScale,this.m_leftPriceScale)),this._lastLeftPriceScaleRatio},n.prototype.rightPriceScaleRatio=function(){return null===this._lastRightPriceScaleRatio&&(this._lastRightPriceScaleRatio=h(this.m_timeScale,this.m_rightPriceScale)),this._lastRightPriceScaleRatio},n.prototype._mainSeriesPaneScaleRatioOnChange=function(){this.isMainPane()&&(this._lastLeftPriceScaleRatio=null,this._lastRightPriceScaleRatio=null,this._model.mainSeriesScaleRatioPropertyOnChanged())},n.prototype._applyOldScaleRatioToPriceScale=function(t,e){if(this._isRecalculatingScales||null===e||void 0===e)return!1;this._isRecalculatingScales=!0,
this._setNewPriceRangeByScaleRatio(t,e,this._mainSourceVisiblePriceRange(t)),this._isRecalculatingScales=!1},n.prototype._applyOldScaleRatioToTimeScale=function(t,e){if(this._isRecalculatingScales||null===e||void 0===e)return!1;this._isRecalculatingScales=!0,this._setNewBarSpacingByScaleRatio(t,e),this._isRecalculatingScales=!1},n.prototype._tryToApplyNewLeftPriceScaleRatio=function(t){if(this._lastLeftPriceScaleRatio===t||this.m_leftPriceScale.isLog())return!1;this._leftPriceScaleRatioChanged.fire(this._lastLeftPriceScaleRatio,t),this._lastLeftPriceScaleRatio=t},n.prototype._tryToApplyNewRightPriceScaleRatio=function(t){if(this._lastRightPriceScaleRatio===t||this.m_rightPriceScale.isLog())return!1;this._rightPriceScaleRatioChanged.fire(this._lastRightPriceScaleRatio,t),this._lastRightPriceScaleRatio=t},n.prototype._recalculatePriceScaleByScaleRatio=function(){this.isMainPane()&&(this.m_leftPriceScale.mainSource()&&(this.isLeftPriceScaleLocked()&&null!==this._lastLeftPriceScaleRatio?this._applyOldScaleRatioToPriceScale(this.m_leftPriceScale,this._lastLeftPriceScaleRatio):this._tryToApplyNewLeftPriceScaleRatio(h(this.m_timeScale,this.m_leftPriceScale))),this.m_rightPriceScale.mainSource()&&(this.isRightPriceScaleLocked()&&null!==this._lastRightPriceScaleRatio?this._applyOldScaleRatioToPriceScale(this.m_rightPriceScale,this._lastRightPriceScaleRatio):this._tryToApplyNewRightPriceScaleRatio(h(this.m_timeScale,this.m_rightPriceScale))))},n.prototype._recalculateTimeScaleByLeftScaleRatio=function(){this.isLeftPriceScaleLocked()&&null!==this._lastLeftPriceScaleRatio?this._applyOldScaleRatioToTimeScale(this.m_leftPriceScale,this._lastLeftPriceScaleRatio):this._tryToApplyNewLeftPriceScaleRatio(h(this.m_timeScale,this.m_leftPriceScale))},n.prototype._recalculateTimeScaleByRightScaleRatio=function(){this.isRightPriceScaleLocked()&&null!==this._lastRightPriceScaleRatio?this._applyOldScaleRatioToTimeScale(this.m_rightPriceScale,this._lastRightPriceScaleRatio):this._tryToApplyNewRightPriceScaleRatio(h(this.m_timeScale,this.m_rightPriceScale))},n.prototype._setNewPriceRangeByScaleRatio=function(t,e,i,n,o){var r=u(t,this.m_timeScale.barSpacing(),e);t.setPriceRange(null!==r?r:i,n,o)},n.prototype._setMinMaxPriceRange=function(t,e){var i=u(t,this.m_timeScale.maxBarSpacing(),e),n=u(t,this.m_timeScale.minBarSpacing(),e);null!==i&&t.setMaxPriceRange(i),null!==n&&t.setMinPriceRange(n)},n.prototype._onLeftPriceScaleSetMinMaxPriceRange=function(){this._setMinMaxPriceRange(this.m_leftPriceScale,this._lastLeftPriceScaleRatio)},n.prototype._onRightPriceScaleSetMinMaxPriceRange=function(){this._setMinMaxPriceRange(this.m_rightPriceScale,this._lastRightPriceScaleRatio)},n.prototype._setNewBarSpacingByScaleRatio=function(t,e){var i=this.m_timeScale.getValidBarSpacing(d(t,e));this.m_timeScale.isValidBarSpacing(i)&&this.m_timeScale.setBarSpacing(i)},n.prototype._onPriceScaleModeChanged=function(t,e,i){if(e.percentage!==i.percentage||e.indexedTo100!==i.indexedTo100){var n=this.timeScale().visibleBars();null!==n&&(t.recalculatePriceRange(n),
t.updatePaneViews())}},e.Pane=n}).call(e,i(8))},function(t,e,i){"use strict";(function(t,n){function o(t,e){return e<0&&(t=-t),t/100*e+e}function r(t,e){var i=100*(t-e)/e;return e<0?-i:i}function s(t,e){var i=r(t.minValue(),e),n=r(t.maxValue(),e);return new b(i,n)}function a(t,e){return t-=100,e<0&&(t=-t),t/100*e+e}function l(t,e){var i=100*(t-e)/e+100;return e<0?-i:i}function c(t,e){var i=l(t.minValue(),e),n=l(t.maxValue(),e);return new b(i,n)}function h(t,e){if(this.m_base=t,this.m_integralDividers=e,this.m_fractionalDividers=[],_.isBaseDecimal(this.m_base))this.m_fractionalDividers=[2,2.5,2];else for(var i=this.m_base;1!==i;){if(i%2==0)this.m_fractionalDividers.push(2),i/=2;else{if(i%5!=0)throw new RangeError("unexpected base");this.m_fractionalDividers.push(2),this.m_fractionalDividers.push(2.5),i/=5}if(this.m_fractionalDividers.length>100)throw Error("something wrong with base")}}function u(t,e,i,n){this.m_marks=[],this.m_base=e,this.m_priceScale=t,this._currentFormatBase=0,this._coordinateToLogicalFunc=i,this._logicalToCoordinateFunc=n}function d(e,i){var o;i=Object.assign({},p,i),this._properties=new t(i),this._scalesProperties=e,this.m_height=0,this._internalHeightCache=null,this._internalHeightChanged=new n,this.m_priceRange=null,this._priceRangeChanged=new n,this.m_dataSources=[],this.m_topMargin=0,this.m_bottomMargin=0,this._studyTopMargin=0,this._studyBottomMargin=0,this.m_scrollStartPoint=null,this.m_scaleStartPoint=null,this.m_maxPriceRange=null,this.m_minPriceRange=null,this.m_priceRangeSnapshot=null,this._invalidatedForRange={isValid:!0},this.onMarksChanged=new n,o=this,this._coordinateToLogicalFunc=function(t,e){return o._coordinateToLogical(t,e)},this._logicalToCoordinateFunc=function(t,e,i){return o._logicalToCoordinate(t,e,i)},this.m_markBuilder=new u(this,100,this._coordinateToLogicalFunc,this._logicalToCoordinateFunc),this._modeChanged=new n,this._sourcesForAutoscale=null,this._sourcesToUpdateViews=null,this._hasSeries=!1,o=this,this._properties.listeners().subscribe(null,function(){o.mainSource()&&o.mainSource().model()&&o.mainSource().model().fullUpdate()}),this._scalesProperties.listeners().subscribe(this,function(){this._marksCache=null})}var p,_=i(55),f=i(1).LineDataSource,m=i(34).PriceDataSource,g=i(71).Series,y=i(13).PriceFormatter,v=i(58).PercentageFormatter,b=i(65).PriceRange;h.prototype.TICK_SPAN_EPSILON=1e-9,h.prototype.tickSpan=function(t,e,i){var n,o=0===this.m_base?0:1/this.m_base,r=this.TICK_SPAN_EPSILON,s=Math.pow(10,Math.max(0,Math.ceil(_.log10(t-e)))),a=0;for(a=0,n=this.m_integralDividers[0];s>o+r&&_.greaterOrEqual(s,o,r)&&_.greaterOrEqual(s,i*n,r)&&_.greaterOrEqual(s,1,r);++a,n=this.m_integralDividers[a%this.m_integralDividers.length])s/=n;if(s<=o+r&&(s=o),s=Math.max(1,s),this.m_fractionalDividers.length>0&&_.equal(s,1,r))for(a=0,n=this.m_fractionalDividers[0];s>o+r&&_.greaterOrEqual(s,i*n,r);++a,n=this.m_fractionalDividers[a%this.m_fractionalDividers.length])s/=n;return s},u.prototype.TICK_DENSITY=2.5,u.prototype.base=function(){return this.m_base},
u.prototype.setBase=function(t){if(t<0)throw new RangeError("base < 0");this.m_base=t},u.prototype.fontHeight=function(){return this.m_priceScale.fontSize()},u.prototype.tickSpan=function(t,e){var i,n,o,r,s,a,l;if(t<e)throw new RangeError("high < low");return i=this.m_priceScale.height(),n=this.tickMarkHeight(),o=(t-e)*n/i,r=new h(this.m_base,[2,2.5,2]),s=new h(this.m_base,[2,2,2.5]),a=new h(this.m_base,[2.5,2,2]),l=[],l.push(r.tickSpan(t,e,o)),l.push(s.tickSpan(t,e,o)),l.push(a.tickSpan(t,e,o)),_.min(l)},u.prototype.tickMarkHeight=function(){return Math.ceil(this.fontHeight()*this.TICK_DENSITY)},u.prototype.rebuildTickMarks=function(){var t,e,i,n,o,r,s,a,l,c,h,u,d=this.m_priceScale;if(null===d)throw new TypeError("scale is null");if(d.isEmpty())return void(this.m_marks=[]);if(null===(t=d.mainSource()))return void(this.m_marks=[]);if(e=t.firstValue(),i=d.height(),n=this._coordinateToLogicalFunc(i-1,e),o=this._coordinateToLogicalFunc(0,e),o=Math.max(o,n),n=Math.min(o,n),o!==n)for(r=this.tickSpan(o,n),s=o%r,s+=s<0?r:0,this.m_marks=[],a=o>=n?1:-1,l=null,c=d.formatter(),h=o-s;h>n;h-=r)u=this._logicalToCoordinateFunc(h,e,!0),null!==l&&Math.abs(u-l)<this.tickMarkHeight()||(this.m_marks.push({coord:Math.round(u),label:c.format(h)}),l=u,d.isLog()&&(r=this.tickSpan(h*a,n)))},u.prototype.marks=function(){return this.m_marks},p={autoScale:!0,autoScaleDisabled:!1,lockScale:!1,percentage:!1,percentageDisabled:!1,log:!1,logDisabled:!1,alignLabels:!0,indexedTo100:!1},d.prototype.initScaleProperties=function(){var t=this.isLockScale();t&&(this.properties().percentage.setValue(!1),this.properties().indexedTo100.setValue(!1),this.properties().log.setValue(!1),this.properties().autoScale.setValue(!1)),this.properties().percentageDisabled.setValue(t),this.properties().logDisabled.setValue(t),this.properties().autoScaleDisabled.setValue(this.properties().percentage.value()||this.properties().indexedTo100.value()),this.properties().percentage.value()&&(this.properties().log.setValue(!1),this.properties().indexedTo100.setValue(!1)),this.properties().indexedTo100.value()&&(this.properties().log.setValue(!1),this.properties().percentage.setValue(!1))},d.prototype.isAutoScale=function(){return this._properties.autoScale.value()&&!this.isLockScale()},d.prototype.isLockScale=function(){return this._properties.lockScale.value()},d.prototype.isLog=function(){return this._properties.log.value()},d.prototype.isPercentage=function(){return this._properties.percentage.value()},d.prototype.isIndexedTo100=function(){return this._properties.indexedTo100.value()},d.prototype._convertPriceRangeFromLog=function(t){var e,i;return null===t?null:(e=this._fromLog(t.minValue()),i=this._fromLog(t.maxValue()),new b(e,i))},d.prototype._convertPriceRangeToLog=function(t){var e,i;return null===t?null:(e=this._toLog(t.minValue()),i=this._toLog(t.maxValue()),new b(e,i))},d.prototype._canConvertPriceRangeFromLog=function(t){var e,i;return null!==t&&(e=this._fromLog(t.minValue()),i=this._fromLog(t.maxValue()),isFinite(e)&&isFinite(i))},
d.prototype._setAutoScaleValueWithDependentProperties=function(t){!t&&this._properties.autoScale.value()&&this._properties.percentage.value()&&(this._properties.percentage.setValueSilently(t),this._properties.indexedTo100.setValueSilently(t)),this._properties.autoScale.setValueSilently(t),this._properties.lockScale.value()&&t&&(this._properties.lockScale.setValueSilently(!1),this._properties.percentageDisabled.setValueSilently(!1),this._properties.logDisabled.setValueSilently(!1))},d.prototype._setLockScaleValueWithDependentProperties=function(t){this._properties.lockScale.setValueSilently(t),t&&(this._properties.autoScale.setValueSilently(!1),this._properties.percentage.setValueSilently(!1),this._properties.indexedTo100.setValueSilently(!1),this._properties.log.setValueSilently(!1),this._properties.autoScaleDisabled.setValueSilently(!t)),this._properties.percentageDisabled.setValueSilently(t),this._properties.logDisabled.setValueSilently(t)},d.prototype._setPercentageValueWithDependentProperties=function(t){this._properties.percentage.setValueSilently(t),this._properties.autoScaleDisabled.setValueSilently(t),t&&this._properties.autoScale.setValueSilently(!0),this._properties.log.value()&&t&&this._properties.log.setValueSilently(!1),this._properties.lockScale.value()&&t&&this._properties.lockScale.setValueSilently(!1),this._properties.indexedTo100.value()&&t&&this._properties.indexedTo100.setValueSilently(!1)},d.prototype._setIndexedTo100ValueWithDependentProperties=function(t){this._properties.indexedTo100.setValueSilently(t),this._properties.autoScaleDisabled.setValueSilently(t),t&&this._properties.autoScale.setValueSilently(!0),this._properties.log.value()&&t&&this._properties.log.setValueSilently(!1),this._properties.lockScale.value()&&t&&this._properties.lockScale.setValueSilently(!1),this._properties.percentage.value()&&t&&this._properties.percentage.setValueSilently(!1)},d.prototype._setLogValueWithDependentProperties=function(t){this._properties.log.setValueSilently(t),this._properties.percentage.value()&&t&&(this._properties.percentage.setValueSilently(!1),this._properties.autoScaleDisabled.setValueSilently(!1)),this._properties.lockScale.value()&&t&&this._properties.lockScale.setValueSilently(!1),this._properties.indexedTo100.value()&&t&&this._properties.indexedTo100.setValueSilently(!1)},d.prototype.mode=function(){return{autoScale:this._properties.autoScale.value(),lockScale:this._properties.lockScale.value(),percentage:this._properties.percentage.value(),indexedTo100:this._properties.indexedTo100.value(),log:this._properties.log.value()}},d.prototype.setMode=function(t){var e={},i=this.mode(),n=null;void 0!==t.autoScale&&t.autoScale!==i.autoScale&&(e.autoScale=t.autoScale,this._setAutoScaleValueWithDependentProperties(t.autoScale)),void 0!==t.lockScale&&t.lockScale!==i.lockScale&&(e.lockScale=t.lockScale,this._setLockScaleValueWithDependentProperties(t.lockScale)),void 0!==t.percentage&&t.percentage!==i.percentage&&(e.percentage=t.percentage,this._setPercentageValueWithDependentProperties(t.percentage)),
void 0!==t.indexedTo100&&t.indexedTo100!==i.indexedTo100&&(e.indexedTo100=t.indexedTo100,this._setIndexedTo100ValueWithDependentProperties(t.indexedTo100)),void 0!==t.log&&t.log!==i.log&&(e.log=t.log,this._setLogValueWithDependentProperties(t.log)),i.log&&!this._properties.log.value()&&(this._canConvertPriceRangeFromLog(this.m_priceRange)?null!==(n=this._convertPriceRangeFromLog(this.m_priceRange))&&this.setPriceRange(n):this.properties().autoScale.setValue(!0)),!i.log&&this._properties.log.value()&&null!==(n=this._convertPriceRangeToLog(this.m_priceRange))&&this.setPriceRange(n),i.autoScale!==this._properties.autoScale.value()&&this._properties.autoScale.listeners().fire(this._properties.autoScale),i.autoScaleDisabled!==this._properties.autoScaleDisabled.value()&&this._properties.autoScaleDisabled.listeners().fire(this._properties.autoScaleDisabled),i.lockScale!==this._properties.lockScale.value()&&this._properties.lockScale.listeners().fire(this._properties.lockScale),i.percentage!==this._properties.percentage.value()&&(this._properties.percentage.listeners().fire(this._properties.percentage),this.updateFormatter()),i.indexedTo100!==this._properties.indexedTo100.value()&&(this._properties.indexedTo100.listeners().fire(this._properties.indexedTo100),this.updateFormatter()),i.percentageDisabled!==this._properties.percentageDisabled.value()&&this._properties.percentageDisabled.listeners().fire(this._properties.percentageDisabled),i.log!==this._properties.log.value()&&this._properties.log.listeners().fire(this._properties.log),i.logDisabled!==this._properties.logDisabled.value()&&this._properties.logDisabled.listeners().fire(this._properties.logDisabled),void 0===e.log&&void 0===e.percentage&&void 0===e.lockScale&&void 0===e.autoScale&&void 0===e.percentage||this._modeChanged.fire(i,this.mode())},d.prototype.modeChanged=function(){return this._modeChanged},d.prototype.properties=function(){return this._properties},d.prototype.fontSize=function(){return this._scalesProperties.fontSize.value()},d.prototype.height=function(){return this.m_height},d.prototype.setHeight=function(t){this.m_height!==t&&(this.m_height=t,this._invalidateInternalHeightCache(),this._marksCache=null)},d.prototype.topMargin=function(){return Math.max(this.m_topMargin,this._studyTopMargin)},d.prototype.setTopMargin=function(t){if(!isNumber(t))throw new TypeError("invalid margin");if(t<0||t>30)throw new RangeError("invalid margin");this.m_topMargin!==t&&(this.m_topMargin=t,this._invalidateInternalHeightCache(),this._marksCache=null)},d.prototype.bottomMargin=function(){return Math.max(this.m_bottomMargin,this._studyBottomMargin)},d.prototype.setBottomMargin=function(t){if(!isNumber(t))throw new TypeError("invalid margin");if(t<0||t>30)throw new RangeError("invalid margin");this.m_bottomMargin!==t&&(this.m_bottomMargin=t,this._invalidateInternalHeightCache(),this._marksCache=null)},d.prototype.internalHeight=function(){if(this._internalHeightCache)return this._internalHeightCache;var t=this.height()*(1-this.topMargin()-this.bottomMargin())
;return this._internalHeightCache=t,t},d.prototype._invalidateInternalHeightCache=function(){this._internalHeightCache=null,this._internalHeightChanged.fire()},d.prototype.internalHeightChanged=function(){return this._internalHeightChanged},d.prototype.priceRange=function(){return this.makeSureItIsValid(),this.m_priceRange},d.prototype.priceRangeChanged=function(){return this._priceRangeChanged},d.prototype.setPriceRange=function(t,e,i){var n,o,r;if(!(t instanceof b))throw new TypeError("incorrect price range");return n=this.m_priceRange,!!(e||null===n&&null!==t||null!==n&&!n.equals(t))&&(o=null!==this.m_maxPriceRange&&this.m_maxPriceRange.containsStrictly(t),r=null!==this.m_minPriceRange&&t.containsStrictly(this.m_minPriceRange),!(this.isLockScale()&&!e&&(o||r))&&(this._marksCache=null,this.m_priceRange=t,void(i||this._priceRangeChanged.fire(n,t))))},d.prototype.isEmpty=function(){return this.makeSureItIsValid(),0===this.m_height||!this.m_priceRange||this.m_priceRange.isEmpty()},d.prototype.invertedCoordinate=function(t){return this.height()-1-t},d._logicalOffset=4,d._coordOffset=1e-4,d.prototype._toLog=function(t){var e,i=Math.abs(t);return i<1e-8?0:(e=_.log10(i+d._coordOffset)+d._logicalOffset,t<0?-e:e)},d.prototype.priceToLogical=function(t){return this.isLog()&&t?this._toLog(t):t},d.prototype._fromLog=function(t){var e,i=Math.abs(t);return i<1e-8?0:(e=Math.pow(10,i-d._logicalOffset)-d._coordOffset,t<0?-e:e)},d.prototype.logicalToPrice=function(t){return this.isLog()?this._fromLog(t):t},d.prototype._logicalToCoordinate=function(t,e,i){var n,o;return this.makeSureItIsValid(),this.isEmpty()?0:(t=this.priceToLogical(t),n=this.bottomMargin()*this.height()+(this.internalHeight()-1)*(t-this.priceRange().minValue())/(this.priceRange().maxValue()-this.priceRange().minValue()),o=this.invertedCoordinate(n),i?o:Math.round(o))},d.prototype.priceToCoordinate=function(t,e,i){return this.isPercentage()?t=r(t,e):this.isIndexedTo100()&&(t=l(t,e)),this._logicalToCoordinate(t,e,i)},d.prototype.pointsArrayToCoordinates=function(t,e){var i,n,o,s,a,c,h,u,d;if(this.makeSureItIsValid(),i=this.bottomMargin()*this.height(),n=this.priceRange().minValue(),o=this.priceRange().maxValue(),s=this.internalHeight()-1,a=s/(o-n),this.isPercentage())for(c=0;c<t.length;c++)t[c].y=r(t[c].y,e);if(this.isIndexedTo100())for(c=0;c<t.length;c++)t[c].y=l(t[c].y,e);if(this.isLog())for(c=0;c<t.length;c++)t[c].y=this.priceToLogical(t[c].y);for(c=0;c<t.length;c++)h=t[c].y,TradingView.isNaN(h)||void 0===h||null===h||(u=i+a*(h-n),d=this.m_height-1-u,t[c].y=Math.round(d))},d.prototype.pricesArrayToCoordinates=function(t,e){var i,n,o,s,a,c,h,u,d;if(this.makeSureItIsValid(),i=this.bottomMargin()*this.height(),n=this.priceRange().minValue(),o=this.priceRange().maxValue(),s=this.internalHeight()-1,a=s/(o-n),this.isPercentage())for(c=0;c<t.length;c++)t[c]=r(t[c],e);if(this.isIndexedTo100())for(c=0;c<t.length;c++)t[c]=l(t[c],e);if(this.isLog())for(c=0;c<t.length;c++)t[c]=this.priceToLogical(t[c]);for(c=0;c<t.length;c++)void 0!==(h=t[c])&&null!==h&&(u=i+a*(h-n),
d=this.m_height-1-u,t[c]=Math.round(d))},d.prototype.barPricesToCoordinates=function(t,e){var i,n,o,s,a,c,h,u,d,p,_,f;if(this.makeSureItIsValid(),i=t,n=this.bottomMargin()*this.height(),o=this.priceRange().minValue(),s=this.priceRange().maxValue(),a=this.internalHeight()-1,c=null,this.isPercentage()?c=r:this.isIndexedTo100()?c=l:this.isLog()&&(c=function(t){return t?this._toLog(t):t}.bind(this)),null!==c)for(h=0;h<i.length;h++)i[h]&&(i[h].open=c(i[h].open,e),i[h].high=c(i[h].high,e),i[h].low=c(i[h].low,e),i[h].close=c(i[h].close,e),i[h].additionalPrice&&(i[h].additionalPrice=c(i[h].additionalPrice,e)));for(u=a/(s-o),h=0;h<i.length;h++)(d=i[h])&&(p=d.open,_=n+u*(p-o),f=this.m_height-1-_,d.open=Math.round(f),p=d.high,_=n+u*(p-o),f=this.m_height-1-_,d.high=Math.round(f),p=d.low,_=n+u*(p-o),f=this.m_height-1-_,d.low=Math.round(f),p=d.close,_=n+u*(p-o),f=this.m_height-1-_,d.close=Math.round(f),d.additionalPrice&&(p=d.additionalPrice,_=n+u*(p-o),f=this.m_height-1-_,d.additionalPrice=Math.round(f)))},d.prototype._coordinateToLogical=function(t,e){var i,n;return this.makeSureItIsValid(),this.isEmpty()?0:(i=this.invertedCoordinate(t),n=this.priceRange().minValue()+(this.priceRange().maxValue()-this.priceRange().minValue())*((i-this.bottomMargin()*this.height())/(this.internalHeight()-1)),this.logicalToPrice(n))},d.prototype.coordinateToPrice=function(t,e){var i=this._coordinateToLogical(t,e);return this.isPercentage()?i=o(i,e):this.isIndexedTo100()&&(i=a(i,e)),i},d.prototype.dataSources=function(){return this.m_dataSources},d.prototype.orderedSources=function(){var t,e,n,o;if(this._cachedOrderedSoruces)return this._cachedOrderedSoruces;for(t=[],e=0;e<this.m_dataSources.length;e++)n=this.m_dataSources[e],null==n.zorder()&&n.setZorder(e+1),t.push(n);return o=i(209).Pane,t=o.sortSources(t),this._cachedOrderedSoruces=t,this._cachedOrderedSoruces},d.prototype.invalidateSourcesCache=function(){this._cachedOrderedSoruces=null},d.prototype.hasSeries=function(){return this._hasSeries},d.prototype.addDataSource=function(t,e){var i,n;(e||-1===this.m_dataSources.indexOf(t))&&(TradingView.isInherited(t.constructor,g)&&(i=t.properties(),!0!==this._hasSeries&&(i.lockScale&&(this.setMode({lockScale:i.lockScale.value()}),i.removeProperty("lockScale")),i.pnfStyle.lockScale&&i.pnfStyle.removeProperty("lockScale")),this._hasSeries=!0),n=this,t.properties().visible.listeners().subscribe(null,function(){n._sourcesForAutoscale=null}),this.m_dataSources.push(t),this._mainSource=void 0,this._sourcesForAutoscale=null,this._sourcesToUpdateViews=null,this.updateFormatter(),this.initScaleProperties(),this.invalidateSourcesCache())},d.prototype.removeDataSource=function(t){var e=this.m_dataSources.indexOf(t);if(-1===e)throw Error("source is not attached to scale");this.m_dataSources.splice(e,1),TradingView.isInherited(t.constructor,g)&&(this._hasSeries=!1),this.mainSource()||this.setMode({autoScale:!0}),this._mainSource=void 0,this._sourcesForAutoscale=null,this._sourcesToUpdateViews=null,this.updateFormatter(),this.invalidateSourcesCache()},
d.prototype.isScaled=function(){return"number"==typeof this.m_scaleStartPoint},d.prototype.startScale=function(t){this.isPercentage()||this.isIndexedTo100()||null===this.m_scaleStartPoint&&null===this.m_priceRangeSnapshot&&(this.isEmpty()||(this.m_scaleStartPoint=this.m_height-t,this.m_priceRangeSnapshot=this.priceRange().clone()))},d.prototype.marks=function(){return this._marksCache?this._marksCache:(this.m_markBuilder.rebuildTickMarks(),this._marksCache=this.m_markBuilder.marks(),this.onMarksChanged.fire(),this._marksCache)},d.prototype.setMaxPriceRange=function(t){this.m_maxPriceRange=t},d.prototype.setMinPriceRange=function(t){this.m_minPriceRange=t},d.prototype.scaleTo=function(t){var e,i;this.isPercentage()||this.isIndexedTo100()||null!==this.m_scaleStartPoint&&(this.setMode({autoScale:!1}),t=this.m_height-t,t<0&&(t=0),e=(this.m_scaleStartPoint+.2*(this.m_height-1))/(t+.2*(this.m_height-1)),i=this.m_priceRangeSnapshot.clone(),e=Math.max(e,.1),i.scaleAroundCenter(e),this.setPriceRange(i))},d.prototype.endScale=function(){this.isPercentage()||this.isIndexedTo100()||null!==this.m_scaleStartPoint&&(this.m_scaleStartPoint=null,this.m_priceRangeSnapshot=null)},d.prototype.startScroll=function(t){this.isAutoScale()||null===this.m_scrollStartPoint&&null===this.m_priceRangeSnapshot&&(this.isEmpty()||(this.m_scrollStartPoint=t,this.m_priceRangeSnapshot=this.priceRange().clone()))},d.prototype.scrollTo=function(t){var e,i,n,o;this.isAutoScale()||null!==this.m_scrollStartPoint&&(e=this.priceRange().length()/(this.height()-1),i=t-this.m_scrollStartPoint,n=i*e,o=this.m_priceRangeSnapshot.clone(),o.shift(n),this.setPriceRange(o,!0),this._marksCache=null)},d.prototype.endScroll=function(){this.isAutoScale()||null!==this.m_scrollStartPoint&&(this.m_scrollStartPoint=null,this.m_priceRangeSnapshot=null)},d.prototype.state=function(){var t={};return t.m_priceRange=!this.priceRange()||this.isPercentage()||this.isIndexedTo100()?null:this.priceRange().serialize(),t.m_isAutoScale=this.isAutoScale(),t.m_isPercentage=this._properties.percentage.value(),t.m_isIndexedTo100=this._properties.indexedTo100.value(),t.m_isLog=this._properties.log.value(),t.m_isLockScale=this.isLockScale(),t.m_height=this.m_height,t.m_topMargin=this.m_topMargin,t.m_bottomMargin=this.m_bottomMargin,t},d.prototype.restoreState=function(t){var e,i=t.m_priceRange;if(void 0===i)throw new TypeError("invalid state");if(void 0===t.m_isAutoScale)throw new TypeError("invalid state");e={autoScale:t.m_isAutoScale},void 0!==t.m_isPercentage&&(e.percentage=t.m_isPercentage),void 0!==t.m_isIndexedTo100&&(e.indexedTo100=t.m_isIndexedTo100),void 0!==t.m_isLog&&(e.log=t.m_isLog),void 0!==t.m_isLockScale&&(e.lockScale=t.m_isLockScale),i?(i instanceof b||(i=new b(i)),this.setPriceRange(i,!0)):this.m_priceRange=null,void 0!==t.m_height&&this.setHeight(Math.max(0,t.m_height)),this.setMode(e),void 0!==t.m_topMargin&&(this.m_topMargin=t.m_topMargin),void 0!==t.m_bottomMargin&&(this.m_bottomMargin=t.m_bottomMargin),this._mainSource=void 0,this._scaleSeriesOnly=!1},
d.prototype.mainSource=function(){var t,e;if(void 0!==this._mainSource)return this._mainSource;for(t=void 0,e=0;e<this.m_dataSources.length;e++){if(TradingView.isInherited(this.m_dataSources[e].constructor,g)){t=this.m_dataSources[e];break}!t&&TradingView.isInherited(this.m_dataSources[e].constructor,m)&&(t=this.m_dataSources[e])}return this._mainSource=t,this._mainSource||null},d.prototype.formatter=function(){return this._formatter||this.updateFormatter(),this._formatter},d.prototype.formatPrice=function(t,e){return this.isPercentage()?t=r(t,e):this.isIndexedTo100()&&(t=l(t,e)),this.formatter().format(t)},d.prototype.updateFormatter=function(){var t,e;this._marksCache=null,t=this.mainSource(),e=100,t&&(e=t.base()),this._formatter=null,this.isPercentage()?(this._formatter=new v,e=100):this.isIndexedTo100()?(this._formatter=new y(100,1),e=100):this._formatter=t?t.formatter():new y(100,1),this.m_markBuilder=new u(this,e,this._coordinateToLogicalFunc,this._logicalToCoordinateFunc),this.m_markBuilder.rebuildTickMarks()},d.prototype._recalculateSourcesForAutoscale=function(){var t,e;this._mainSource&&(this._scaleSeriesOnly=this._scalesProperties.scaleSeriesOnly.value()),t=this._scaleSeriesOnly&&this._hasSeries,e=function(e){return!!(e.properties().visible.value()||e instanceof g)&&(t?TradingView.isInherited(e.constructor,g):TradingView.isInherited(e.constructor,m))},this._sourcesForAutoscale=this.m_dataSources.filter(e)},d.prototype.sourcesForAutoscale=function(){return this._mainSource&&this._scaleSeriesOnly!==this._scalesProperties.scaleSeriesOnly.value()&&(this._sourcesForAutoscale=null),this._sourcesForAutoscale||this._recalculateSourcesForAutoscale(),this._sourcesForAutoscale},d.prototype.recalculatePriceRange=function(t){this._invalidatedForRange={visibleBars:t,isValid:!1}},d.prototype.makeSureItIsValid=function(){this._invalidatedForRange.isValid||(this._invalidatedForRange.isValid=!0,this.recalculatePriceRangeImpl())},d.prototype.recalculatePriceRangeImpl=function(){var t,e,i,n,o,r,a,l,h,u,d,p,_=this._invalidatedForRange.visibleBars;if(null!==_){for(t=null,e=this.sourcesForAutoscale(),i=0,n=0,o=this.isPercentage(),r=this.isIndexedTo100(),a=0;a<e.length;a++)l=e[a],l.properties().visible.value()&&(h=_.firstBar(),u=_.lastBar(),d=l.priceRange(h,u),d&&(o?d=s(d,l.firstValue()):r&&(d=c(d,l.firstValue())),t=null===t?d:t.merge(d)),l.margins&&(p=l.margins(),i=Math.max(p[0],i),n=Math.max(p[1],n)));(Math.abs(n-this._studyBottomMargin)>.01||Math.abs(i-this._studyTopMargin)>.01)&&(this._studyBottomMargin=n,this._studyTopMargin=i,this._marksCache=null,this._invalidateInternalHeightCache()),t?(t.minValue()===t.maxValue()&&(t=new b(t.minValue()-.5,t.maxValue()+.5)),this.setPriceRange(t)):this.m_priceRange||this.setPriceRange(new b(-.5,.5)),this._invalidatedForRange.isValid=!0}},d.prototype.sourcesToUpdateViews=function(){var t,e;if(!this._sourcesToUpdateViews)for(this._sourcesToUpdateViews=[],t=0;t<this.m_dataSources.length;t++)e=this.m_dataSources[t],
TradingView.isInherited(e.constructor,f)&&!e.isActualSymbol()||this._sourcesToUpdateViews.push(e);return this._sourcesToUpdateViews},d.prototype.updatePaneViews=function(){var t,e=this.sourcesToUpdateViews();for(t=0;t<e.length;t++)e[t].updateAllViews()},d.prototype.priceRangeInPrice=function(){var t,e,i,n,o,r;return this.isEmpty()?null:null===(t=this.m_priceScale)?null:null===(e=t.mainSource())?null:(i=e.firstValue(),n=this.height(),o=this.coordinateToPrice(n-1,i),r=this.coordinateToPrice(0,i),{from:o,to:r})},e.PriceScale=d}).call(e,i(16),i(8))},function(t,e,i){"use strict";function n(t,e,i){this.source=t,this.pane=e,this._rendererFactory=i}function o(t,e){this._barWidth=t.barWidth,this._plates=t.plates,this._tooltip=t.tooltip,this._model=e}function r(){this._layout=[],this._currentId=void 0,this.tooltipHovered=!1}var s=i(7).Point,a=i(57).pointInCircle,l=i(10).HitTestResult;n.prototype.update=function(){},n.prototype.renderer=function(){return this._rendererFactory(this.source)},o.prototype.draw=function(t){t.save();for(var e=0;e<this._plates.length;e++)if(this._plates[e].highlightByAuthor){this._highlightByAuthor=!0;break}this._plates.forEach(this._drawItem.bind(this,t)),this._tooltip.draw(this._plates.map(function(t){return this._plateTransform(t)}.bind(this)),t),this._tooltip.endDraw(),t.restore()},o.prototype._drawItem=function(t,e){t.save(),this._highlightByAuthor&&!e.highlightByAuthor&&(t.globalAlpha=.4);var i=this._dotTransform(e);i.mine?this._drawTriangle(t,i):this._drawDot(t,i),t.restore()},o.prototype._commonTransform=function(t){var e=Math.max(1.4*t.minSize,this._barWidth+4),i=t.y+{up:-1,down:1}[t.direction]*(e*(t.order+.6)+.25*e),n=TradingView.clone(t.overridedTheme||this.themes[t.theme]);return n.dotBorderWidth=t.hovered||t.highlightByAuthor?4:2,{id:t.id,theme:n,themeName:t.theme,x:Math.round(t.x+1),y:Math.round(i),pinned:t.pinned,hovered:t.hovered}},o.prototype._dotTransform=function(t){var e=this._commonTransform(t);return e.radius=Math.max(t.minSize/2,.4*this._barWidth),e.label=t.label,e.labelFontColor=t.labelFontColor,e.labelFontSize=Math.ceil(Math.max(10,Math.min(e.radius,20))),this._model.updateDotData(t,e)},o.prototype._plateTransform=function(t){var e=this._commonTransform(t);return this._model.updatePlateData(t,e)},o.THEMES=["green","red","neutral","yellow","blue"],o.prototype.themes={green:{border:"#78C143",background:"#8DDD54"},red:{border:"#CC4545",background:"#ED5A5A"},neutral:{border:"#EAC300",background:"#FFD400"},yellow:{border:"#EAC300",background:"#FFD400"},blue:{border:"#047ACE",background:"#0496FF"}},o.prototype._drawTriangle=function(t,e){var i,n,o,r;t.strokeStyle=e.theme.border,t.fillStyle=e.theme.background,t.lineWidth=e.theme.dotBorderWidth,i=e,n=e.radius,o=Math.cos(Math.PI/6)*n,r=Math.sin(Math.PI/6)*n,t.translate(i.x,i.y),"up"===e.direction&&t.rotate(Math.PI),e.public||(t.lineWidth/=2),t.beginPath(),t.moveTo(0,-n),t.lineTo(o,r),t.lineTo(-o,r),t.lineTo(0,-n),t.closePath(),t.stroke(),e.public&&t.fill()},o.prototype._drawDot=function(t,e){t.strokeStyle=e.theme.border,
t.fillStyle=e.theme.background,t.lineWidth=e.theme.dotBorderWidth,t.beginPath(),t.arc(e.x,e.y,e.radius,0,2*Math.PI,!0),t.closePath(),t.stroke(),t.fill(),e.label&&e.radius>6&&(t.textAlign="center",t.textBaseline="middle",t.font="bold "+e.labelFontSize+"px Arial",t.fillStyle=e.labelFontColor,t.fillText(e.label,e.x,e.y))},o.prototype.hitTest=function(t){var e,i;for(i=this._plates.length-1;i>=0;--i)if(e=this._hitTestDot(this._plates[i],t))return e;return null},o.prototype._hitTestDot=function(t,e){var i=this._dotTransform(t),n=new s(i.x,i.y);return a(e,n,Math.max(i.radius,8))?new l(l.REGULAR,t):null},r.prototype._createLayout=function(){throw Error("Child class must override this member")},r.prototype._updatePlate=function(t){throw Error("Child class must override this member")},r.prototype._getContainer=function(t){return this._container&&this._context===t||(this._context=t,this._container=$(t.canvas).parent()),this._container},r.prototype._plateArrowSize=14,r.prototype.showPlate=function(t,e){var i,n,o,r,s,a,l,c;this._currentId===t.id&&this._layout&&0!==this._layout.length&&null!=this._layout[0].parentNode||(this._currentId=t.id,this._createLayout(),this._getContainer(e).append(this._layout),i=this,this._layout.hover(function(){i.tooltipHovered=!0,$(this).stop(!0).fadeTo(0,1)},function(){i.tooltipHovered=!1})),n=Math.round(t.barWidth/2),n>15&&(n=15),n<10&&(n=10),this._updatePlate(t),o=e.canvas.getBoundingClientRect(),r=t.x-this._layout.outerWidth()<this._plateArrowSize,s=o.width-t.x+Math.round(t.barWidth/2+n),r&&(s-=this._layout.outerWidth()+2*this._plateArrowSize),a=o.height,l=20,c=10,this._layout.toggleClass("right",r),this._layout.css({top:Math.min(Math.max(t.y,l),a-this._layout.outerHeight()-c),right:s,fontSize:n+"px",display:"block"})},r.prototype._removeLayout=function(){this.tooltipHovered||(this._layout.stop(!0),this._layout.remove())},r.prototype._toggleLayout=function(t){this._layout.toggle(t)},r.prototype.hide=function(t){this.tooltipHovered?this._layout.stop(!0).fadeTo(0,1):this._layout.fadeOut(400,function(){$(this).remove(),t()})},r.prototype.setSource=function(t){this.source=t},e.BarsMarksContainerPaneView=n,e.BarsMarksContainerRenderer=o,e.BarMarkTooltip=r},function(t,e,i){"use strict";var n,o,r,s,a,l;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"NonSeriesStudy",function(){return l}),n=i(0),o=i(6),i.n(o),r=i(39),i.n(r),s=i(17),a=i.n(s),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.c(e,t),e.prototype.clearData=function(){this._customData=null,this._indexes=null},e.prototype.restoreData=function(t,e,i){r.Study.prototype.restoreData.call(this,t),this._customData=e,this._indexes=i},e.prototype.state=function(e){var i=t.prototype.state.call(this,e);return e&&(i.nonSeriesData=this._customData,i.indexes=this._indexes),i},e.prototype.customData=function(){return this._customData},e.prototype._setPaneViews=function(t){this._paneViews=t,this.model().invalidate(new a.a(a.a.LIGHT_UPDATE))},e.prototype._onDataUpdated=function(e,i,n){
null!==i&&(i.indexes_replace?(Object(o.assert)("nochange"!==n),this._indexes=n):(this._customData=i.data,"nochange"!==n&&(this._indexes=n))),t.prototype._onDataUpdated.call(this,e,i,n)},e}(r.Study),l.prototype.superclass=r.Study},function(t,e,i){function n(t,e,i,s,a){if(!i)return void r.logDebug("Missed undo model");o.call(this,t,e,!0,i,s),a?t.callbacks().subscribe(this,a):t.callbacks().subscribe(this,n.prototype.onActionCallback)}var o=i(374).Binding,r=i(5).getLogger("Chart.PropertyPage.ActionBinder");inherit(n,o),n.prototype.onActionCallback=function(t){this._undoModel.setProperty(this._property,this.value(),this._undoText)},n.prototype.value=function(){return this.control().checked},n.prototype.setValue=function(t){return this.control().checked=!!t},e.ActionBinder=n},function(t,e,i){"use strict";var n=function(){function t(t){switch(t){case"c67":case"m67":case"c45":return"copy";case"c86":case"m86":case"s45":return"paste";case"c88":case"m88":case"s46":return"cut"}}function e(t){var e=[];return t.shiftKey&&e.push("s"),t.ctrlKey&&e.push("c"),t.metaKey&&e.push("m"),t.altKey&&e.push("a"),e.push(t.keyCode),e.join("")}function i(t){var e=$.Event(u+":"+t);return $(window).trigger(e,{AppClipboard:_}),e}function n(n){var o,r,s;if((document.activeElement===document.body||document.activeElement===document.documentElement)&&(o=e(n),r=t(o))){if("keydown"===n.type)d[o]=!0;else if(d[o])return;if(document.getSelection){if(!document.getSelection().isCollapsed)return}else if(document.selection&&"None"!==document.selection.type)return;n.isDefaultPrevented()||(s=i(r),s.isDefaultPrevented()&&n.preventDefault())}}function o(t){t=t.originalEvent||t,t.key===h&&i("change")}function r(){p||($(document).on("keypress keydown",n),$(window).on("storage",o),p=!0)}function s(){$(document).off("keypress keydown",n),$(window).off("storage",o),$(window).off(u+":copy"),$(window).off(u+":paste"),$(window).off(u+":cut"),$(window).off(u+":change"),p=!1}function a(){try{return JSON.parse(TVLocalStorage.getItem(h))}catch(t){return null}}function l(t){if(null==t)return c();var e=JSON.stringify(t);e!==TVLocalStorage.getItem(h)&&(TVLocalStorage.setItem(h,e),i("change"))}function c(){TVLocalStorage.getItem(h)&&(TVLocalStorage.removeItem(h),i("change"))}var h="application-clipboard",u="appclip",d={},p=!1,_={init:r,set:l,get:a,clear:c,destroy:s};return _}();t.exports=n},function(t,e,i){"use strict";function n(t,e,i,n){var r=e+i+t;return{get:function(){if(!o[r]){var t=n.get();if(isNaN(t))return NaN;o[r]=t}return o[r]},set:function(){throw Error("Not implemented")},indexOf:function(t){throw Error("Not implemented")}}}e.a=n;var o={}},function(t,e,i){"use strict";var n=i(21);JSServer.studyLibrary=[{name:"Accumulation/Distribution",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#808000"}},precision:4,inputs:{}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},
description:"Accumulation/Distribution",shortDescription:"Accum/Dist",is_price_study:!1,inputs:[],id:"Accumulation/Distribution@tv-basicstudies-1",scriptIdPart:"",name:"Accumulation/Distribution"},constructor:function(){this.f_0=function(t,e,i,o){return n.Std.or(n.Std.and(n.Std.eq(t,e),n.Std.eq(t,i)),n.Std.eq(e,i))?0:(2*t-i-e)/(e-i)*o},this.main=function(t,e){var i,o,r;return this._context=t,this._input=e,i=this.f_0(n.Std.close(this._context),n.Std.high(this._context),n.Std.low(this._context),n.Std.volume(this._context)),o=n.Std.cum(i,this._context),r=o,[r]}}},{name:"Accumulative Swing Index",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#3C78D8"}},precision:4,inputs:{in_0:10}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"ASI",histogramBase:0,joinPoints:!1}},description:"Accumulative Swing Index",shortDescription:"ASI",is_price_study:!1,inputs:[{id:"in_0",name:"Limit Move Value",defval:10,type:"float",min:.1,max:1e5}],id:"Accumulative Swing Index@tv-basicstudies-1",scriptIdPart:"",name:"Accumulative Swing Index"},constructor:function(){this.f_0=function(t,e){var i=e.new_var(n.Std.open(e)),o=e.new_var(n.Std.high(e)),r=e.new_var(n.Std.low(e)),s=e.new_var(n.Std.close(e)),a=n.Std.abs(o-s.get(1)),l=n.Std.abs(r-s.get(1)),c=n.Std.abs(o-r),h=n.Std.abs(s.get(1)-i.get(1)),u=n.Std.max(a,l),d=n.Std.iff(a>=n.Std.max(l,c),a-.5*l+.25*h,n.Std.iff(l>=n.Std.max(a,c),l-.5*a+.25*h,c+.25*h));return n.Std.iff(0===d,0,(s-s.get(1)+.5*(s-i)+.25*(s.get(1)-i.get(1)))/d*u/t*50)},this.f_1=function(t,e){var i=this.f_0(t,e);return n.Std.cum(i,e)},this.main=function(t,e){var i,n;return this._context=t,this._input=e,i=this._input(0),n=this.f_1(i,this._context),[n]}}},{name:"Advance/Decline",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#FF0000"}},precision:4,inputs:{in_0:10}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"Advance/Decline",shortDescription:"AD",is_price_study:!1,inputs:[{id:"in_0",name:"length",defval:10,type:"integer",min:1,max:2e3}],id:"Advance/Decline@tv-basicstudies-1",scriptIdPart:"",name:"Advance/Decline"},constructor:function(){this.f_0=function(t,e){return n.Std.gt(t,e)},this.f_1=function(t,e){return n.Std.lt(t,e)},this.f_2=function(t,e){return 0===e?t:t/e},this.main=function(t,e){var i,o,r,s,a,l,c,h,u;return this._context=t,this._input=e,i=this._input(0),o=this.f_0(n.Std.close(this._context),n.Std.open(this._context)),r=this._context.new_var(o),s=n.Std.sum(r,i,this._context),a=this.f_1(n.Std.close(this._context),n.Std.open(this._context)),l=this._context.new_var(a),c=n.Std.sum(l,i,this._context),h=this.f_2(s,c),u=h,[u]}}},{name:"Arnaud Legoux Moving Average",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{
linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#000080"}},precision:4,inputs:{in_0:9,in_1:.85,in_2:6}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"Arnaud Legoux Moving Average",shortDescription:"ALMA",is_price_study:!0,inputs:[{id:"in_0",name:"Window Size",defval:9,type:"integer",min:0,max:5e3},{id:"in_1",name:"Offset",defval:.85,type:"float",min:-1e12,max:1e12},{id:"in_2",name:"Sigma",defval:6,type:"float",min:-1e12,max:1e12}],id:"Arnaud Legoux Moving Average@tv-basicstudies-1",scriptIdPart:"",name:"Arnaud Legoux Moving Average"},constructor:function(){this.main=function(t,e){var i,o,r,s,a,l;return this._context=t,this._input=e,i=n.Std.close(this._context),o=this._input(0),r=this._input(1),s=this._input(2),a=this._context.new_var(i),l=n.Std.alma(a,o,r,s),[l]}}},{name:"Aroon",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#FF6A00"},plot_1:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#0094FF"}},precision:4,inputs:{in_0:14}},plots:[{id:"plot_0",type:"line"},{id:"plot_1",type:"line"}],styles:{plot_0:{title:"Upper",histogramBase:0,joinPoints:!1},plot_1:{title:"Lower",histogramBase:0,joinPoints:!1}},description:"Aroon",shortDescription:"Aroon",is_price_study:!1,inputs:[{id:"in_0",name:"length",defval:14,type:"integer",min:1,max:2e3}],id:"Aroon@tv-basicstudies-1",scriptIdPart:"",name:"Aroon"},constructor:function(){this.f_0=function(t,e){return 100*(t+e)/e},this.main=function(t,e){var i,o,r,s,a,l,c,h,u,d,p,_;return this._context=t,this._input=e,i=this._input(0),o=n.Std.high(this._context),r=i+1,s=this._context.new_var(o),a=n.Std.highestbars(s,r,this._context),l=this.f_0(a,i),c=n.Std.low(this._context),h=this._context.new_var(c),u=n.Std.lowestbars(h,r,this._context),d=this.f_0(u,i),p=l,_=d,[p,_]}}},{name:"Average Directional Index",metainfo:{_metainfoVersion:41,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#FF0000"}},precision:4,inputs:{in_0:14,in_1:14}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"ADX",histogramBase:0,joinPoints:!1,isHidden:!1}},description:"Average Directional Index",shortDescription:"ADX",is_price_study:!1,inputs:[{id:"in_0",name:"ADX Smoothing",defval:14,type:"integer",min:-1e12,max:1e12},{id:"in_1",name:"DI Length",defval:14,type:"integer",min:-1e12,max:1e12}],id:"average_directional_Index@tv-basicstudies-1",scriptIdPart:"",name:"Average Directional Index"},constructor:function(){this.f_0=function(t){
var e=this._context.new_var(n.Std.high(this._context)),i=n.Std.change(e),o=this._context.new_var(n.Std.low(this._context)),r=-n.Std.change(o),s=this._context.new_var(n.Std.tr(void 0,this._context)),a=n.Std.rma(s,t,this._context),l=this._context.new_var(n.Std.and(n.Std.gt(i,r),n.Std.gt(i,0))?i:0),c=n.Std.fixnan(100*n.Std.rma(l,t,this._context)/a,this._context),h=this._context.new_var(n.Std.and(n.Std.gt(r,i),n.Std.gt(r,0))?r:0);return[c,n.Std.fixnan(100*n.Std.rma(h,t,this._context)/a,this._context)]},this.f_1=function(t,e){var i=this.f_0(t),o=i[0],r=i[1],s=o+r,a=this._context.new_var(n.Std.abs(o-r)/(n.Std.eq(s,0)?1:s));return[100*n.Std.rma(a,e,this._context)]},this.main=function(t,e){return this._context=t,this._input=e,this.f_1(this._input(0),this._input(1))}}},{name:"Average True Range",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#FF0000"}},precision:4,inputs:{in_0:14}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"Average True Range",shortDescription:"ATR",is_price_study:!1,inputs:[{id:"in_0",name:"length",defval:14,type:"integer",min:1,max:2e3}],id:"Average True Range@tv-basicstudies-1",scriptIdPart:"",name:"Average True Range"},constructor:function(){this.main=function(t,e){var i,o,r,s;return this._context=t,this._input=e,i=this._input(0),o=n.Std.tr(this._context),r=this._context.new_var(o),s=n.Std.rma(r,i,this._context),[s]}}},{name:"Awesome Oscillator",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:1,trackPrice:!1,transparency:35,visible:!0,color:"#000080"}},precision:4,palettes:{palette_0:{colors:{0:{color:"#FF0000",width:1,style:0},1:{color:"#008000",width:1,style:0}}}},inputs:{}},plots:[{id:"plot_0",type:"line"},{id:"plot_1",palette:"palette_0",target:"plot_0",type:"colorer"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"Awesome Oscillator",shortDescription:"AO",is_price_study:!1,palettes:{palette_0:{colors:{0:{name:"Color 0"},1:{name:"Color 1"}}}},inputs:[],id:"Awesome Oscillator@tv-basicstudies-1",scriptIdPart:"",name:"Awesome Oscillator"},constructor:function(){this.f_0=function(t,e){return t-e},this.f_1=function(t){return n.Std.le(t,0)?0:1},this.main=function(t,e){var i,o,r,s,a,l,c,h,u,d;return this._context=t,this._input=e,i=n.Std.hl2(this._context),o=this._context.new_var(i),r=n.Std.sma(o,5,this._context),s=this._context.new_var(i),a=n.Std.sma(s,34,this._context),l=this.f_0(r,a),c=l,h=this._context.new_var(l),u=n.Std.change(h),d=this.f_1(u),[c,d]}}},{name:"Balance of Power",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#FF0000"}},precision:4,inputs:{}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,
joinPoints:!1}},description:"Balance of Power",shortDescription:"Balance of Power",is_price_study:!1,inputs:[],id:"Balance of Power@tv-basicstudies-1",scriptIdPart:"",name:"Balance of Power"},constructor:function(){this.f_0=function(t,e,i,n){return(t-e)/(i-n)},this.main=function(t,e){return this._context=t,this._input=e,[this.f_0(n.Std.close(this._context),n.Std.open(this._context),n.Std.high(this._context),n.Std.low(this._context))]}}},{name:"Bollinger Bands",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#FF0000"},plot_1:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#0000FF"},plot_2:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#0000FF"}},precision:4,filledAreasStyle:{fill_0:{color:"#000080",transparency:90,visible:!0}},inputs:{in_0:20,in_1:2}},plots:[{id:"plot_0",type:"line"},{id:"plot_1",type:"line"},{id:"plot_2",type:"line"}],styles:{plot_0:{title:"Median",histogramBase:0,joinPoints:!1},plot_1:{title:"Upper",histogramBase:0,joinPoints:!1},plot_2:{title:"Lower",histogramBase:0,joinPoints:!1}},description:"Bollinger Bands",shortDescription:"BB",is_price_study:!0,filledAreas:[{id:"fill_0",objAId:"plot_1",objBId:"plot_2",type:"plot_plot",title:"Plots Background"}],inputs:[{id:"in_0",name:"length",defval:20,type:"integer",min:1,max:1e4},{id:"in_1",name:"mult",defval:2,type:"float",min:.001,max:50}],id:"Bollinger Bands@tv-basicstudies-1",scriptIdPart:"",name:"Bollinger Bands"},constructor:function(){this.f_0=function(t,e){return t*e},this.f_1=function(t,e){return t+e},this.f_2=function(t,e){return t-e},this.main=function(t,e){var i,o,r,s,a,l,c,h,u,d,p,_,f;return this._context=t,this._input=e,i=n.Std.close(this._context),o=this._input(0),r=this._input(1),s=this._context.new_var(i),a=n.Std.sma(s,o,this._context),l=this._context.new_var(i),c=n.Std.stdev(l,o,this._context),h=this.f_0(r,c),u=this.f_1(a,h),d=this.f_2(a,h),p=a,_=u,f=d,[p,_,f]}}},{name:"Bollinger Bands %B",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#008080"}},precision:4,bands:[{color:"#808080",linestyle:2,linewidth:1,visible:!0,value:1},{color:"#808080",linestyle:2,linewidth:1,visible:!0,value:0}],filledAreasStyle:{fill_0:{color:"#008080",transparency:90,visible:!0}},inputs:{in_0:20,in_1:2}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"Bollinger Bands %B",shortDescription:"BB %B",is_price_study:!1,bands:[{id:"hline_0",name:"UpperLimit"},{id:"hline_1",name:"LowerLimit"}],filledAreas:[{id:"fill_0",objAId:"hline_0",objBId:"hline_1",type:"hline_hline",title:"Hlines Background"}],inputs:[{id:"in_0",name:"length",defval:20,type:"integer",min:1,max:1e4},{id:"in_1",name:"mult",defval:2,type:"float",min:.001,max:50}],
id:"Bollinger Bands %B@tv-basicstudies-1",scriptIdPart:"",name:"Bollinger Bands %B"},constructor:function(){this.f_0=function(t,e){return t*e},this.f_1=function(t,e){return t+e},this.f_2=function(t,e){return t-e},this.f_3=function(t,e,i){return(t-e)/(i-e)},this.main=function(t,e){var i,o,r,s,a,l,c,h,u,d,p,_;return this._context=t,this._input=e,i=n.Std.close(this._context),o=this._input(0),r=this._input(1),s=this._context.new_var(i),a=n.Std.sma(s,o,this._context),l=this._context.new_var(i),c=n.Std.stdev(l,o,this._context),h=this.f_0(r,c),u=this.f_1(a,h),d=this.f_2(a,h),p=this.f_3(i,d,u),_=p,[_]}}},{name:"Bollinger Bands Width",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#0000FF"}},precision:4,inputs:{in_0:20,in_1:2}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"Bollinger Bands Width",shortDescription:"BBW",is_price_study:!1,inputs:[{id:"in_0",name:"length",defval:20,type:"integer",min:1,max:1e4},{id:"in_1",name:"mult",defval:2,type:"float",min:.001,max:50}],id:"Bollinger Bands Width@tv-basicstudies-1",scriptIdPart:"",name:"Bollinger Bands Width"},constructor:function(){this.f_0=function(t,e){return t*e},this.f_1=function(t,e){return t+e},this.f_2=function(t,e){return t-e},this.f_3=function(t,e,i){return(t-e)/i},this.main=function(t,e){var i,o,r,s,a,l,c,h,u,d,p,_;return this._context=t,this._input=e,i=n.Std.close(this._context),o=this._input(0),r=this._input(1),s=this._context.new_var(i),a=n.Std.sma(s,o,this._context),l=this._context.new_var(i),c=n.Std.stdev(l,o,this._context),h=this.f_0(r,c),u=this.f_1(a,h),d=this.f_2(a,h),p=this.f_3(u,d,a),_=p,[_]}}},{name:"Chaikin Money Flow",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#008000"}},precision:4,bands:[{color:"#808080",linestyle:2,linewidth:1,visible:!0,value:0}],inputs:{in_0:20}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"Chaikin Money Flow",shortDescription:"CMF",is_price_study:!1,bands:[{id:"hline_0",name:"Zero"}],inputs:[{id:"in_0",name:"length",defval:20,type:"integer",min:1,max:2e3}],id:"Chaikin Money Flow@tv-basicstudies-1",scriptIdPart:"",name:"Chaikin Money Flow"},constructor:function(){this.f_0=function(t,e,i,o){return n.Std.or(n.Std.and(n.Std.eq(t,e),n.Std.eq(t,i)),n.Std.eq(e,i))?0:(2*t-i-e)/(e-i)*o},this.f_1=function(t,e){return t/e},this.main=function(t,e){var i,o,r,s,a,l,c,h,u;return this._context=t,this._input=e,i=this._input(0),o=this.f_0(n.Std.close(this._context),n.Std.high(this._context),n.Std.low(this._context),n.Std.volume(this._context)),r=this._context.new_var(o),s=n.Std.sum(r,i,this._context),a=n.Std.volume(this._context),l=this._context.new_var(a),c=n.Std.sum(l,i,this._context),h=this.f_1(s,c),u=h,[u]}}},{name:"Chaikin Oscillator",
metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#FF0000"}},precision:4,bands:[{color:"#808080",linestyle:2,linewidth:1,visible:!0,value:0}],inputs:{in_0:3,in_1:10}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"Chaikin Oscillator",shortDescription:"Chaikin Osc",is_price_study:!1,bands:[{id:"hline_0",name:"Zero"}],inputs:[{id:"in_0",name:"short",defval:3,type:"integer",min:1,max:2e3},{id:"in_1",name:"long",defval:10,type:"integer",min:1,max:2e3}],id:"Chaikin Oscillator@tv-basicstudies-1",scriptIdPart:"",name:"Chaikin Oscillator"},constructor:function(){this.f_0=function(t,e){return t-e},this.main=function(t,e){var i,o,r,s,a,l,c,h,u;return this._context=t,this._input=e,i=this._input(0),o=this._input(1),r=n.Std.accdist(this._context),s=this._context.new_var(r),a=n.Std.ema(s,i,this._context),l=this._context.new_var(r),c=n.Std.ema(l,o,this._context),h=this.f_0(a,c),u=h,[u]}}},{name:"Chande Kroll Stop",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#008000"},plot_1:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#FF0000"}},precision:4,inputs:{in_0:10,in_1:1,in_2:9}},plots:[{id:"plot_0",type:"line"},{id:"plot_1",type:"line"}],styles:{plot_0:{title:"Long",histogramBase:0,joinPoints:!1},plot_1:{title:"Short",histogramBase:0,joinPoints:!1}},description:"Chande Kroll Stop",shortDescription:"Chande Kroll Stop",is_price_study:!0,inputs:[{id:"in_0",name:"p",defval:10,type:"integer",min:1,max:4999},{id:"in_1",name:"x",defval:1,type:"integer",min:1,max:1e12},{id:"in_2",name:"q",defval:9,type:"integer",min:1,max:1e12}],id:"Chande Kroll Stop@tv-basicstudies-1",scriptIdPart:"",name:"Chande Kroll Stop"},constructor:function(){this.f_0=function(t,e,i){return t-e*i},this.f_1=function(t,e,i){return t+e*i},this.main=function(t,e){var i,o,r,s,a,l,c,h,u,d,p,_,f,m,g,y,v;return this._context=t,this._input=e,i=this._input(0),o=this._input(1),r=this._input(2),s=n.Std.high(this._context),a=this._context.new_var(s),l=n.Std.highest(a,i,this._context),c=n.Std.atr(i,this._context),h=this.f_0(l,o,c),u=this._context.new_var(s),d=n.Std.lowest(u,i,this._context),p=this.f_1(d,o,c),_=this._context.new_var(h),f=n.Std.highest(_,r,this._context),m=this._context.new_var(p),g=n.Std.lowest(m,r,this._context),y=g,v=f,[y,v]}}},{name:"Chande Momentum Oscillator",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#008080"}},precision:4,inputs:{in_0:9}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"Chande Momentum Oscillator",shortDescription:"ChandeMO",is_price_study:!1,inputs:[{id:"in_0",
name:"length",defval:9,type:"integer",min:1,max:2e3}],id:"Chande Momentum Oscillator@tv-basicstudies-1",scriptIdPart:"",name:"Chande Momentum Oscillator"},constructor:function(){this.f_0=function(t){return n.Std.ge(t,0)?t:0},this.f_1=function(t){return n.Std.ge(t,0)?0:-t},this.f_2=function(t,e){return 100*t/e},this.f_3=function(t,e){return this.f_2(t-e,t+e)},this.main=function(t,e){var i,o,r,s,a,l,c,h,u,d,p,_;return this._context=t,this._input=e,i=this._input(0),o=n.Std.close(this._context),r=this._context.new_var(o),s=n.Std.change(r),a=this.f_0(s),l=this.f_1(s),c=this._context.new_var(a),h=n.Std.sum(c,i,this._context),u=this._context.new_var(l),d=n.Std.sum(u,i,this._context),p=this.f_3(h,d),_=p,[_]}}},{name:"Chop Zone",metainfo:{_metainfoVersion:41,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:5,trackPrice:!1,transparency:35,visible:!0,color:"#000080"}},precision:4,palettes:{palette_0:{colors:{0:{color:"#34dddd",width:1,style:0},1:{color:"#006400",width:1,style:0},2:{color:"#98fb98",width:1,style:0},3:{color:"#00FF00",width:1,style:0},4:{color:"#8B0000",width:1,style:0},5:{color:"#FF0000",width:1,style:0},6:{color:"#FF7F00",width:1,style:0},7:{color:"#ffc04c",width:1,style:0},8:{color:"#FFFF00",width:1,style:0}}}},inputs:{}},plots:[{id:"plot_0",type:"line"},{id:"plot_1",palette:"palette_0",target:"plot_0",type:"colorer"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1,isHidden:!1}},description:"Chop Zone",shortDescription:"Chop Zone",is_price_study:!1,palettes:{palette_0:{colors:{0:{name:"Color 0"},1:{name:"Color 1"},2:{name:"Color 2"},3:{name:"Color 3"},4:{name:"Color 4"},5:{name:"Color 5"},6:{name:"Color 6"},7:{name:"Color 7"},8:{name:"Color 8"}},valToIndex:{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8}}},inputs:[],id:"chop_zone@tv-basicstudies-1",scriptIdPart:"",name:"Chop Zone"},constructor:function(){this.f_0=function(){var t=n.Std.close(this._context),e=n.Std.hlc3(this._context),i=this._context.new_var(n.Std.high(this._context)),o=n.Std.highest(i,30,this._context),r=n.Std.lowest(i,30,this._context),s=25/(o-r)*r,a=this._context.new_var(t),l=this._context.new_var(n.Std.ema(a,34,this._context)),c=(l.get(1)-l.get(0))/e*s,h=n.Std.sqrt(1+c*c),u=n.Std.round(180*n.Std.acos(1/h)/3.141592653589793),d=n.Std.iff(n.Std.gt(c,0),-u,u),p=n.Std.and(n.Std.gt(d,-2.14),n.Std.le(d,-.71))?7:8,_=n.Std.and(n.Std.gt(d,-3.57),n.Std.le(d,-2.14))?6:p,f=n.Std.and(n.Std.gt(d,-5),n.Std.le(d,-3.57))?5:_,m=n.Std.le(d,-5)?4:f,g=n.Std.and(n.Std.lt(d,2.14),n.Std.ge(d,.71))?3:m,y=n.Std.and(n.Std.lt(d,3.57),n.Std.ge(d,2.14))?2:g,v=n.Std.and(n.Std.lt(d,5),n.Std.ge(d,3.57))?1:y;return[1,n.Std.ge(d,5)?0:v]},this.main=function(t,e){return this._context=t,this._input=e,this.f_0()}}},{name:"Choppiness Index",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#0000FF"}},precision:4,bands:[{color:"#808080",linestyle:2,linewidth:1,visible:!0,value:61.8
},{color:"#808080",linestyle:2,linewidth:1,visible:!0,value:38.2}],filledAreasStyle:{fill_0:{color:"#008000",transparency:90,visible:!0}},inputs:{in_0:14}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"Choppiness Index",shortDescription:"CHOP",is_price_study:!1,bands:[{id:"hline_0",name:"UpperLimit"},{id:"hline_1",name:"LowerLimit"}],filledAreas:[{id:"fill_0",objAId:"hline_0",objBId:"hline_1",type:"hline_hline",title:"Hlines Background"}],inputs:[{id:"in_0",name:"length",defval:14,type:"integer",min:1,max:2e3}],id:"Choppiness Index@tv-basicstudies-1",scriptIdPart:"",name:"Choppiness Index"},constructor:function(){this.f_0=function(t,e,i,o){return 100*n.Std.log10(t/(e-i))/o},this.main=function(t,e){var i,o,r,s,a,l,c,h,u,d,p,_,f;return this._context=t,this._input=e,i=this._input(0),o=n.Std.atr(1,this._context),r=this._context.new_var(o),s=n.Std.sum(r,i,this._context),a=n.Std.high(this._context),l=this._context.new_var(a),c=n.Std.highest(l,i,this._context),h=n.Std.low(this._context),u=this._context.new_var(h),d=n.Std.lowest(u,i,this._context),p=n.Std.log10(i),_=this.f_0(s,c,d,p),f=_,[f]}}},{name:"Commodity Channel Index",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#808000"}},precision:4,bands:[{color:"#808080",linestyle:2,linewidth:1,visible:!0,value:100},{color:"#808080",linestyle:2,linewidth:1,visible:!0,value:-100}],filledAreasStyle:{fill_0:{color:"#808000",transparency:90,visible:!0}},inputs:{in_0:20}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"Commodity Channel Index",shortDescription:"CCI",is_price_study:!1,bands:[{id:"hline_0",name:"UpperLimit"},{id:"hline_1",name:"LowerLimit"}],filledAreas:[{id:"fill_0",objAId:"hline_0",objBId:"hline_1",type:"hline_hline",title:"Hlines Background"}],inputs:[{id:"in_0",name:"length",defval:20,type:"integer",min:1,max:2e3}],id:"Commodity Channel Index@tv-basicstudies-1",scriptIdPart:"",name:"Commodity Channel Index"},constructor:function(){this.f_0=function(t,e,i){return(t-e)/(.015*i)},this.main=function(t,e){var i,o,r,s,a,l,c,h;return this._context=t,this._input=e,i=n.Std.hlc3(this._context),o=this._input(0),r=this._context.new_var(i),s=n.Std.sma(r,o,this._context),a=this._context.new_var(i),l=n.Std.dev(a,o,this._context),c=this.f_0(i,s,l),h=c,[h]}}},{name:"Connors RSI",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#800080"}},precision:4,bands:[{color:"#808080",linestyle:2,linewidth:1,visible:!0,value:70},{color:"#808080",linestyle:2,linewidth:1,visible:!0,value:30}],filledAreasStyle:{fill_0:{color:"#800080",transparency:90,visible:!0}},inputs:{in_0:3,in_1:2,in_2:100}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"CRSI",histogramBase:0,joinPoints:!1}},
description:"Connors RSI",shortDescription:"CRSI",is_price_study:!1,bands:[{id:"hline_0",name:"UpperLimit"},{id:"hline_1",name:"LowerLimit"}],filledAreas:[{id:"fill_0",objAId:"hline_0",objBId:"hline_1",type:"hline_hline",title:"Hlines Background"}],inputs:[{id:"in_0",name:"RSI Length",defval:3,type:"integer",min:1},{id:"in_1",name:"UpDown Length",defval:2,type:"integer",min:1},{id:"in_2",name:"ROC Length",defval:100,type:"integer",min:1}],id:"Connors RSI@tv-basicstudies-1",scriptIdPart:"",name:"Connors RSI"},constructor:function(){this.f_1=function(t,e,i){var o=i.new_var(n.Std.max(n.Std.change(t),0));return n.Std.rma(o,e,i)},this.f_2=function(t,e,i){var o=i.new_var(-n.Std.min(n.Std.change(t),0));return n.Std.rma(o,e,i)},this.f_3=function(){var t=0;return function(e){var i=e.get(0),o=e.get(1);return t=i===o?0:i>o?n.Std.nz(t)<=0?1:n.Std.nz(t)+1:n.Std.nz(t)>=0?-1:n.Std.nz(t)-1,this._context.new_var(t)}}(),this.main=function(t,e){var i,o,r,s,a,l,c,h,u,d,p;return this._context=t,this._input=e,i=n.Std.close(this._context),o=this._context.new_var(i),r=this._input(0),s=this._input(1),a=this._input(2),l=n.Std.rsi(this.f_1(o,r,this._context),this.f_2(o,r,this._context)),c=this.f_3(o),h=n.Std.rsi(this.f_1(c,s,this._context),this.f_2(c,s,this._context)),u=this._context.new_var(n.Std.roc(o,1)),d=n.Std.percentrank(u,a),p=n.Std.avg(l,h,d),[p]}}},{name:"Coppock Curve",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#000080"}},precision:4,inputs:{in_0:10,in_1:14,in_2:11}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"Coppock Curve",shortDescription:"Coppock Curve",is_price_study:!1,inputs:[{id:"in_0",name:"WMA Length",defval:10,type:"integer",min:-1e12,max:5e3},{id:"in_1",name:"Long RoC Length",defval:14,type:"integer",min:1,max:4999},{id:"in_2",name:"Short RoC Length",defval:11,type:"integer",min:1,max:4999}],id:"Coppock Curve@tv-basicstudies-1",scriptIdPart:"",name:"Coppock Curve"},constructor:function(){this.f_0=function(t,e){return t+e},this.main=function(t,e){var i,o,r,s,a,l,c,h,u,d,p,_;return this._context=t,this._input=e,i=this._input(0),o=this._input(1),r=this._input(2),s=n.Std.close(this._context),a=this._context.new_var(s),l=n.Std.roc(a,o),c=this._context.new_var(s),h=n.Std.roc(c,r),u=this.f_0(l,h),d=this._context.new_var(u),p=n.Std.wma(d,i,this._context),_=p,[_]}}},{name:"Correlation Coeff",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:4,trackPrice:!1,transparency:40,visible:!0,color:"#800080"}},precision:4,inputs:{in_0:"AAPL",in_1:20}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"Correlation Coefficient",shortDescription:"CC",is_price_study:!1,inputs:[{id:"in_0",name:"sym",defval:"AAPL",type:"symbol"},{id:"in_1",name:"length",defval:20,type:"integer",min:1,max:2e3}],
id:"Correlation Coeff@tv-basicstudies-1",scriptIdPart:"",name:"Correlation Coeff"},constructor:function(){this.init=function(t,e){this._context=t,this._input=e,this._context.new_sym(this._input(0),n.Std.period(this._context),n.Std.period(this._context))},this.main=function(t,e){var i,o,r,s,a,l,c,h,u,d;return this._context=t,this._input=e,i=this._context.new_unlimited_var(this._context.symbol.time),this._input(0),n.Std.period(this._context),o=n.Std.close(this._context),r=this._input(1),this._context.select_sym(1),s=this._context.new_unlimited_var(this._context.symbol.time),a=n.Std.close(this._context),l=this._context.new_unlimited_var(a),this._context.select_sym(0),c=l.adopt(s,i,0),h=this._context.new_var(o),u=this._context.new_var(c),d=n.Std.correlation(h,u,r,this._context),[d]}}},{name:"Detrended Price Oscillator",metainfo:{_metainfoVersion:42,isTVScript:!1,isTVScriptStub:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#808000"}},precision:4,bands:[{color:"#808080",linestyle:2,linewidth:1,visible:!0,value:0}],inputs:{in_0:21,in_1:!1}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"DPO",histogramBase:0,joinPoints:!1,isHidden:!1}},description:"Detrended Price Oscillator",shortDescription:"DPO",is_price_study:!1,is_hidden_study:!1,id:"detrended_price_oscillator@tv-basicstudies-1",bands:[{id:"hline_0",name:"Zero",isHidden:!1}],inputs:[{id:"in_0",name:"Period",defval:21,type:"integer",min:1,max:1e12},{id:"in_1",name:"isCentered",defval:!1,type:"bool"}],scriptIdPart:"",name:"Detrended Price Oscillator"},constructor:function(){this.f_0=function(){var t=this._input(0),e=this._input(1),i=Math.floor(t/2+1),o=this._context.new_var(n.Std.close(this._context)),r=this._context.new_var(n.Std.sma(o,t,this._context)),s=this._context.new_var(n.Std.close(this._context)),a=s.get(i)-r,l=n.Std.close(this._context)-r.get(i),c=e?a:l,h=-i;return[c,e?h:0]},this.main=function(t,e){this._context=t,this._input=e;var i=this.f_0();return[{value:i[0],offset:i[1]}]}}},{name:"Directional Movement Index",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#0000FF"},plot_1:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#FF7F00"},plot_2:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#FF0000"}},precision:4,inputs:{in_0:14,in_1:14}},plots:[{id:"plot_0",type:"line"},{id:"plot_1",type:"line"},{id:"plot_2",type:"line"}],styles:{plot_0:{title:"+DI",histogramBase:0,joinPoints:!1},plot_1:{title:"-DI",histogramBase:0,joinPoints:!1},plot_2:{title:"ADX",histogramBase:0,joinPoints:!1}},description:"Directional Movement",shortDescription:"DMI",is_price_study:!1,inputs:[{id:"in_0",name:"DI Length",defval:14,type:"integer",min:1,max:2e3},{id:"in_1",name:"ADX Smoothing",defval:14,type:"integer",min:1,max:50}],id:"Directional Movement Index@tv-basicstudies-1",scriptIdPart:"",
name:"Directional Movement Index"},constructor:function(){this.f_0=function(t){return-t},this.f_1=function(t,e){return n.Std.and(n.Std.gt(t,e),n.Std.gt(t,0))?t:0},this.f_2=function(t,e){return 100*t/e},this.f_3=function(t,e){return t+e},this.f_4=function(t,e,i){return n.Std.abs(t-e)/(n.Std.eq(i,0)?1:i)},this.f_5=function(t){return 100*t},this.main=function(t,e){var i,o,r,s,a,l,c,h,u,d,p,_,f,m,g,y,v,b,S,w,P,T,C,x,k,L,I,A,E,M;return this._context=t,this._input=e,i=this._input(0),o=this._input(1),r=n.Std.high(this._context),s=this._context.new_var(r),a=n.Std.change(s),l=n.Std.low(this._context),c=this._context.new_var(l),h=n.Std.change(c),u=this.f_0(h),d=n.Std.tr(this._context),p=this._context.new_var(d),_=n.Std.rma(p,i,this._context),f=this.f_1(a,u),m=this._context.new_var(f),g=n.Std.rma(m,i,this._context),y=this.f_2(g,_),v=n.Std.fixnan(y,this._context),b=this.f_1(u,a),S=this._context.new_var(b),w=n.Std.rma(S,i,this._context),P=this.f_2(w,_),T=n.Std.fixnan(P,this._context),C=this.f_3(v,T),x=this.f_4(v,T,C),k=this._context.new_var(x),L=n.Std.rma(k,o,this._context),I=this.f_5(L),A=v,E=T,M=I,[A,E,M]}}},{name:"Donchian Channels",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#0000FF"},plot_1:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#0000FF"},plot_2:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#FF7F00"}},precision:4,filledAreasStyle:{fill_0:{color:"#0000FF",transparency:90,visible:!0}},inputs:{in_0:20}},plots:[{id:"plot_0",type:"line"},{id:"plot_1",type:"line"},{id:"plot_2",type:"line"}],styles:{plot_0:{title:"Lower",histogramBase:0,joinPoints:!1},plot_1:{title:"Upper",histogramBase:0,joinPoints:!1},plot_2:{title:"Basis",histogramBase:0,joinPoints:!1}},description:"Donchian Channels",shortDescription:"DC",is_price_study:!0,filledAreas:[{id:"fill_0",objAId:"plot_1",objBId:"plot_0",type:"plot_plot",title:"Plots Background"}],inputs:[{id:"in_0",name:"length",defval:20,type:"integer",min:1,max:2e3}],id:"Donchian Channels@tv-basicstudies-1",scriptIdPart:"",name:"Donchian Channels"},constructor:function(){this.main=function(t,e){var i,o,r,s,a,l,c,h,u,d,p;return this._context=t,this._input=e,i=this._input(0),o=n.Std.low(this._context),r=this._context.new_var(o),s=n.Std.lowest(r,i,this._context),a=n.Std.high(this._context),l=this._context.new_var(a),c=n.Std.highest(l,i,this._context),h=n.Std.avg(c,s),u=s,d=c,p=h,[u,d,p]}}},{name:"Double Exponential Moving Average",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#008000"}},precision:4,inputs:{in_0:9}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"Double EMA",shortDescription:"DEMA",is_price_study:!0,inputs:[{id:"in_0",name:"length",defval:9,type:"integer",min:1,
max:1e4}],id:"Double Exponential Moving Average@tv-basicstudies-1",scriptIdPart:"",name:"Double Exponential Moving Average"},constructor:function(){this.f_0=function(t,e){return 2*t-e},this.main=function(t,e){var i,o,r,s,a,l,c,h;return this._context=t,this._input=e,i=this._input(0),o=n.Std.close(this._context),r=this._context.new_var(o),s=n.Std.ema(r,i,this._context),a=this._context.new_var(s),l=n.Std.ema(a,i,this._context),c=this.f_0(s,l),h=c,[h]}}},{name:"Ease of Movement",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#808000"}},precision:4,inputs:{in_0:1e4,in_1:14}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"Ease Of Movement",shortDescription:"EOM",is_price_study:!1,inputs:[{id:"in_0",name:"Divisor",defval:1e4,type:"integer",min:1,max:1e9},{id:"in_1",name:"length",defval:14,type:"integer",min:1,max:2e3}],id:"Ease of Movement@tv-basicstudies-1",scriptIdPart:"",name:"Ease of Movement"},constructor:function(){this.f_0=function(t,e,i,n,o){return t*e*(i-n)/o},this.main=function(t,e){var i,o,r,s,a,l,c,h,u;return this._context=t,this._input=e,i=this._input(0),o=this._input(1),r=n.Std.hl2(this._context),s=this._context.new_var(r),a=n.Std.change(s),l=this.f_0(i,a,n.Std.high(this._context),n.Std.low(this._context),n.Std.volume(this._context)),c=this._context.new_var(l),h=n.Std.sma(c,o,this._context),u=h,[u]}}},{name:"Elders Force Index",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#800000"}},precision:4,bands:[{color:"#808080",linestyle:2,linewidth:1,visible:!0,value:0}],inputs:{in_0:13}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"Elder's Force Index",shortDescription:"EFI",is_price_study:!1,bands:[{id:"hline_0",name:"Zero"}],inputs:[{id:"in_0",name:"length",defval:13,type:"integer",min:1,max:2e3}],id:"Elders Force Index@tv-basicstudies-1",scriptIdPart:"",name:"Elders Force Index"},constructor:function(){this.f_0=function(t,e){return t*e},this.main=function(t,e){var i,o,r,s,a,l,c,h;return this._context=t,this._input=e,i=this._input(0),o=n.Std.close(this._context),r=this._context.new_var(o),s=n.Std.change(r),a=this.f_0(s,n.Std.volume(this._context)),l=this._context.new_var(a),c=n.Std.ema(l,i,this._context),h=c,[h]}}},{name:"EMA Cross",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#FF0000"},plot_1:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#008000"},plot_2:{linestyle:0,linewidth:4,plottype:3,trackPrice:!1,transparency:35,visible:!0,color:"#000080"}},precision:4,inputs:{in_0:9,in_1:26}},plots:[{id:"plot_0",type:"line"},{id:"plot_1",
type:"line"},{id:"plot_2",type:"line"}],styles:{plot_0:{title:"Short",histogramBase:0,joinPoints:!1},plot_1:{title:"Long",histogramBase:0,joinPoints:!1},plot_2:{title:"Crosses",histogramBase:0,joinPoints:!1}},description:"EMA Cross",shortDescription:"EMA Cross",is_price_study:!0,inputs:[{id:"in_0",name:"Short",defval:9,type:"integer",min:1,max:2e3},{id:"in_1",name:"Long",defval:26,type:"integer",min:1,max:2e3}],id:"EMA Cross@tv-basicstudies-1",scriptIdPart:"",name:"EMA Cross"},constructor:function(){this.f_0=function(t,e){return t?e:n.Std.na()},this.main=function(t,e){var i,o,r,s,a,l,c,h,u,d,p;return this._context=t,this._input=e,i=this._input(0),o=this._input(1),r=n.Std.close(this._context),s=this._context.new_var(r),a=n.Std.ema(s,i,this._context),l=this._context.new_var(r),c=n.Std.ema(l,o,this._context),h=a,u=c,d=n.Std.cross(a,c,this._context),p=this.f_0(d,a),[h,u,p]}}},{name:"Envelope",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#FF7F00"},plot_1:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#0000FF"},plot_2:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#0000FF"}},precision:4,filledAreasStyle:{fill_0:{color:"#0000FF",transparency:90,visible:!0}},inputs:{in_0:20,in_1:10,in_2:!1}},plots:[{id:"plot_0",type:"line"},{id:"plot_1",type:"line"},{id:"plot_2",type:"line"}],styles:{plot_0:{title:"Median",histogramBase:0,joinPoints:!1},plot_1:{title:"Upper",histogramBase:0,joinPoints:!1},plot_2:{title:"Lower",histogramBase:0,joinPoints:!1}},description:"Envelope",shortDescription:"Env",is_price_study:!0,filledAreas:[{id:"fill_0",objAId:"plot_1",objBId:"plot_2",type:"plot_plot",title:"Plots Background"}],inputs:[{id:"in_0",name:"Length",defval:20,type:"integer",min:1,max:2e3},{id:"in_1",name:"percent",defval:10,type:"float",min:-1e12,max:1e12},{id:"in_2",name:"exponential",defval:!1,type:"bool"}],id:"Envelope@tv-basicstudies-1",scriptIdPart:"",name:"Envelope"},constructor:function(){this.f_0=function(t,e,i){return t?e:i},this.f_1=function(t,e){return t*(1+e)},this.f_2=function(t,e){return t*(1-e)},this.main=function(t,e){var i,o,r,s,a,l,c,h,u,d,p,_,f,m,g;return this._context=t,this._input=e,i=n.Std.close(this._context),o=this._input(0),r=this._input(1),s=this._input(2),a=this._context.new_var(i),l=n.Std.ema(a,o,this._context),c=this._context.new_var(i),h=n.Std.sma(c,o,this._context),u=this.f_0(s,l,h),d=r/100,p=this.f_1(u,d),_=this.f_2(u,d),f=u,m=p,g=_,[f,m,g]}}},{name:"Fisher Transform",metainfo:{_metainfoVersion:41,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#0000FF"},plot_1:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#FF7F00"}},precision:4,bands:[{color:"#FF7F00",linestyle:2,linewidth:1,visible:!0,value:1.5},{color:"#808080",linestyle:2,linewidth:1,
visible:!0,value:.75},{color:"#FF7F00",linestyle:2,linewidth:1,visible:!0,value:0},{color:"#808080",linestyle:2,linewidth:1,visible:!0,value:-.75},{color:"#FF7F00",linestyle:2,linewidth:1,visible:!0,value:-1.5}],inputs:{in_0:9}},plots:[{id:"plot_0",type:"line"},{id:"plot_1",type:"line"}],styles:{plot_0:{title:"Fisher",histogramBase:0,joinPoints:!1,isHidden:!1},plot_1:{title:"Trigger",histogramBase:0,joinPoints:!1,isHidden:!1}},description:"Fisher Transform",shortDescription:"Fisher",is_price_study:!1,bands:[{id:"hline_0",name:"Level",isHidden:!1},{id:"hline_1",name:"Level",isHidden:!1},{id:"hline_2",name:"Level",isHidden:!1},{id:"hline_3",name:"Level",isHidden:!1},{id:"hline_4",name:"Level",isHidden:!1}],inputs:[{id:"in_0",name:"Length",defval:9,type:"integer",min:1,max:1e12}],id:"fisher_transform@tv-basicstudies-1",scriptIdPart:"",name:"Fisher Transform"},constructor:function(){this.f_0=function(t){var e=n.Std.lt(t,-.99)?-.999:t;return[n.Std.gt(t,.99)?.999:e]},this.f_1=function(){var t,e,i,o=this._input(0),r=this._context.new_var(n.Std.hl2(this._context)),s=n.Std.highest(r,o,this._context),a=this._context.new_var(n.Std.hl2(this._context)),l=n.Std.lowest(a,o,this._context),c=this._context.new_var(),h=this.f_0(.66*((n.Std.hl2(this._context)-l)/n.Std.max(s-l,.001)-.5)+.67*n.Std.nz(c.get(1)));return c.set(h[0]),t=this._context.new_var(),t.set(.5*n.Std.log((1+c.get(0))/n.Std.max(1-c.get(0),.001))+.5*n.Std.nz(t.get(1))),e=t.get(1),i=t.get(0),[i,e]},this.main=function(t,e){return this._context=t,this._input=e,this.f_1()}}},{name:"Historical Volatility",metainfo:{_metainfoVersion:41,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#0000FF"}},precision:4,inputs:{in_0:10}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1,isHidden:!1}},description:"Historical Volatility",shortDescription:"HV",is_price_study:!1,inputs:[{id:"in_0",name:"length",defval:10,type:"integer",min:1,max:1e12}],id:"historical_volatility@tv-basicstudies-1",scriptIdPart:"",name:"Historical Volatility"},constructor:function(){this.f_0=function(){var t=this._input(0),e=n.Std.or(n.Std.isintraday(this._context),n.Std.and(n.Std.isdaily(this._context),n.Std.eq(n.Std.interval(this._context),1)))?1:7,i=this._context.new_var(n.Std.close(this._context)),o=this._context.new_var(n.Std.log(n.Std.close(this._context)/i.get(1)));return[100*n.Std.stdev(o,t,this._context)*n.Std.sqrt(365/e)]},this.main=function(t,e){return this._context=t,this._input=e,this.f_0()}}},{name:"Hull MA",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#000080"}},precision:4,inputs:{in_0:9}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"Hull Moving Average",shortDescription:"HMA",is_price_study:!0,inputs:[{id:"in_0",name:"length",defval:9,
type:"integer",min:1,max:1e4}],id:"Hull MA@tv-basicstudies-1",scriptIdPart:"",name:"Hull MA"},constructor:function(){this.f_0=function(t,e){return 2*t-e},this.main=function(t,e){var i,o,r,s,a,l,c,h,u,d,p,_,f;return this._context=t,this._input=e,i=n.Std.close(this._context),o=this._input(0),r=o/2,s=this._context.new_var(i),a=n.Std.wma(s,r,this._context),l=this._context.new_var(i),c=n.Std.wma(l,o,this._context),h=this.f_0(a,c),u=n.Std.sqrt(o),d=n.Std.round(u),p=this._context.new_var(h),_=n.Std.wma(p,d,this._context),f=_,[f]}}},{name:"Ichimoku Cloud",metainfo:{_metainfoVersion:42,isTVScript:!1,isTVScriptStub:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#0496ff"},plot_1:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#991515"},plot_2:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#459915"},plot_3:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#008000"},plot_4:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#FF0000"}},precision:4,palettes:{palette_0:{colors:{0:{color:"#008000",width:1,style:0},1:{color:"#FF0000",width:1,style:0}}}},filledAreasStyle:{fill_0:{color:"#000080",transparency:90,visible:!0}},inputs:{in_0:9,in_1:26,in_2:52,in_3:26}},plots:[{id:"plot_0",type:"line"},{id:"plot_1",type:"line"},{id:"plot_2",type:"line"},{id:"plot_3",type:"line"},{id:"plot_4",type:"line"},{id:"plot_5",palette:"palette_0",target:"fill_0",type:"colorer"}],styles:{plot_0:{title:"Conversion Line",histogramBase:0,joinPoints:!1,isHidden:!1},plot_1:{title:"Base Line",histogramBase:0,joinPoints:!1,isHidden:!1},plot_2:{title:"Lagging Span",histogramBase:0,joinPoints:!1,isHidden:!1},plot_3:{title:"Lead 1",histogramBase:0,joinPoints:!1,isHidden:!1},plot_4:{title:"Lead 2",histogramBase:0,joinPoints:!1,isHidden:!1}},description:"Ichimoku Cloud",shortDescription:"Ichimoku",is_price_study:!0,is_hidden_study:!1,id:"Ichimoku Cloud@tv-basicstudies-1",palettes:{palette_0:{colors:{0:{name:"Color 0"},1:{name:"Color 1"}},valToIndex:{0:0,1:1}}},filledAreas:[{id:"fill_0",objAId:"plot_3",objBId:"plot_4",type:"plot_plot",title:"Plots Background",isHidden:!1,palette:"palette_0"}],inputs:[{id:"in_0",name:"Conversion Line Periods",defval:9,type:"integer",min:1,max:1e12},{id:"in_1",name:"Base Line Periods",defval:26,type:"integer",min:1,max:1e12},{id:"in_2",name:"Lagging Span 2 Periods",defval:52,type:"integer",min:1,max:1e12},{id:"in_3",name:"Displacement",defval:26,type:"integer",min:1,max:1e12}],scriptIdPart:"",name:"Ichimoku Cloud"},constructor:function(){this.donchian=function(t){var e=this._context.new_var(n.Std.low(this._context)),i=this._context.new_var(n.Std.high(this._context));return n.Std.avg(n.Std.lowest(e,t,this._context),n.Std.highest(i,t,this._context))},this.f_1=function(){var t=this._input(0),e=this._input(1),i=this._input(2),o=this._input(3),r=this.donchian(t),s=this.donchian(e),a=n.Std.avg(r,s),l=this.donchian(i)
;return[r,s,n.Std.close(this._context),a,l,-o,o,o,n.Std.gt(a,l)?0:1]},this.main=function(t,e){this._context=t,this._input=e;var i=this.f_1();return[i[0],i[1],{value:i[2],offset:i[5]},{value:i[3],offset:i[6]},{value:i[4],offset:i[7]},i[8]]}}},{name:"Keltner Channels",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#0000FF"},plot_1:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#0000FF"},plot_2:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#0000FF"}},precision:4,filledAreasStyle:{fill_0:{color:"#0000FF",transparency:90,visible:!0}},inputs:{in_0:!0,in_1:20,in_2:1}},plots:[{id:"plot_0",type:"line"},{id:"plot_1",type:"line"},{id:"plot_2",type:"line"}],styles:{plot_0:{title:"Upper",histogramBase:0,joinPoints:!1},plot_1:{title:"Middle",histogramBase:0,joinPoints:!1},plot_2:{title:"Lower",histogramBase:0,joinPoints:!1}},description:"Keltner Channels",shortDescription:"KC",is_price_study:!0,filledAreas:[{id:"fill_0",objAId:"plot_0",objBId:"plot_2",type:"plot_plot",title:"Plots Background"}],inputs:[{id:"in_0",name:"useTrueRange",defval:!0,type:"bool"},{id:"in_1",name:"length",defval:20,type:"integer",min:1,max:2e3},{id:"in_2",name:"mult",defval:1,type:"float",min:-1e12,max:1e12}],id:"Keltner Channels@tv-basicstudies-1",scriptIdPart:"",name:"Keltner Channels"},constructor:function(){this.f_0=function(t,e,i,n){return t?e:i-n},this.f_1=function(t,e,i){return t+e*i},this.f_2=function(t,e,i){return t-e*i},this.main=function(t,e){var i,o,r,s,a,l,c,h,u,d,p,_,f,m;return this._context=t,this._input=e,i=n.Std.close(this._context),o=this._input(0),r=this._input(1),s=this._input(2),a=this._context.new_var(i),l=n.Std.ema(a,r,this._context),c=this.f_0(o,n.Std.tr(this._context),n.Std.high(this._context),n.Std.low(this._context)),h=this._context.new_var(c),u=n.Std.ema(h,r,this._context),d=this.f_1(l,u,s),p=this.f_2(l,u,s),_=d,f=l,m=p,[_,f,m]}}},{name:"Klinger Oscillator",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#000080"},plot_1:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#008000"}},precision:4,inputs:{}},plots:[{id:"plot_0",type:"line"},{id:"plot_1",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1},plot_1:{title:"Signal",histogramBase:0,joinPoints:!1}},description:"Klinger Oscillator",shortDescription:"Klinger Oscillator",is_price_study:!1,inputs:[],id:"Klinger Oscillator@tv-basicstudies-1",scriptIdPart:"",name:"Klinger Oscillator"},constructor:function(){this.f_0=function(t,e){return n.Std.ge(t,0)?e:-e},this.f_1=function(t,e){return t-e},this.main=function(t,e){var i,o,r,s,a,l,c,h,u,d,p,_,f;return this._context=t,this._input=e,i=n.Std.hlc3(this._context),o=this._context.new_var(i),r=n.Std.change(o),
s=this.f_0(r,n.Std.volume(this._context)),a=this._context.new_var(s),l=n.Std.ema(a,34,this._context),c=this._context.new_var(s),h=n.Std.ema(c,55,this._context),u=this.f_1(l,h),d=this._context.new_var(u),p=n.Std.ema(d,13,this._context),_=u,f=p,[_,f]}}},{name:"Know Sure Thing",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#008000"},plot_1:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#FF0000"}},precision:4,bands:[{color:"#808080",linestyle:2,linewidth:1,visible:!0,value:0}],inputs:{in_0:10,in_1:15,in_2:20,in_3:30,in_4:10,in_5:10,in_6:10,in_7:15,in_8:9}},plots:[{id:"plot_0",type:"line"},{id:"plot_1",type:"line"}],styles:{plot_0:{title:"KST",histogramBase:0,joinPoints:!1},plot_1:{title:"Signal",histogramBase:0,joinPoints:!1}},description:"Know Sure Thing",shortDescription:"KST",is_price_study:!1,bands:[{id:"hline_0",name:"Zero"}],inputs:[{id:"in_0",name:"roclen1",defval:10,type:"integer",min:1,max:2e3},{id:"in_1",name:"roclen2",defval:15,type:"integer",min:1,max:2e3},{id:"in_2",name:"roclen3",defval:20,type:"integer",min:1,max:2e3},{id:"in_3",name:"roclen4",defval:30,type:"integer",min:1,max:2e3},{id:"in_4",name:"smalen1",defval:10,type:"integer",min:1,max:2e3},{id:"in_5",name:"smalen2",defval:10,type:"integer",min:1,max:2e3},{id:"in_6",name:"smalen3",defval:10,type:"integer",min:1,max:2e3},{id:"in_7",name:"smalen4",defval:15,type:"integer",min:1,max:2e3},{id:"in_8",name:"siglen",defval:9,type:"integer",min:1,max:2e3}],id:"Know Sure Thing@tv-basicstudies-1",scriptIdPart:"",name:"Know Sure Thing"},constructor:function(){this.f_0=function(t,e,i,n){return t+2*e+3*i+4*n},this.main=function(t,e){var i,o,r,s,a,l,c,h,u,d,p,_,f,m,g,y,v,b,S,w,P,T,C,x,k,L,I,A,E,M,O,D,V,R,B,F,N,W,j;return this._context=t,this._input=e,i=this._input(0),o=this._input(1),r=this._input(2),s=this._input(3),a=this._input(4),l=this._input(5),c=this._input(6),h=this._input(7),u=this._input(8),d=n.Std.close(this._context),p=i,_=this._context.new_var(d),f=n.Std.roc(_,p),m=a,g=this._context.new_var(f),y=n.Std.sma(g,m,this._context),v=o,b=this._context.new_var(d),S=n.Std.roc(b,v),w=l,P=this._context.new_var(S),T=n.Std.sma(P,w,this._context),C=r,x=this._context.new_var(d),k=n.Std.roc(x,C),L=c,I=this._context.new_var(k),A=n.Std.sma(I,L,this._context),E=s,M=this._context.new_var(d),O=n.Std.roc(M,E),D=h,V=this._context.new_var(O),R=n.Std.sma(V,D,this._context),B=this.f_0(y,T,A,R),F=this._context.new_var(B),N=n.Std.sma(F,u,this._context),W=B,j=N,[W,j]}}},{name:"Least Squares Moving Average",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#000080"}},precision:4,inputs:{in_0:25,in_1:0}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"Least Squares Moving Average",shortDescription:"LSMA",
is_price_study:!0,inputs:[{id:"in_0",name:"Length",defval:25,type:"integer",min:1,max:1e12},{id:"in_1",name:"Offset",defval:0,type:"integer",min:-1e12,max:1e12}],id:"Least Squares Moving Average@tv-basicstudies-1",scriptIdPart:"",name:"Least Squares Moving Average"},constructor:function(){this.main=function(t,e){var i,o,r,s,a,l;return this._context=t,this._input=e,i=this._input(0),o=this._input(1),r=n.Std.close(this._context),s=this._context.new_var(r),a=n.Std.linreg(s,i,o),l=a,[l]}}},{name:"Linear Regression Curve",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#000080"}},precision:4,inputs:{in_0:9}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"Linear Regression Curve",shortDescription:"LRC",is_price_study:!0,inputs:[{id:"in_0",name:"Length",defval:9,type:"integer",min:1,max:2e3}],id:"Linear Regression Curve@tv-basicstudies-1",scriptIdPart:"",name:"Linear Regression Curve"},constructor:function(){this.main=function(t,e){var i,o,r,s,a;return this._context=t,this._input=e,i=n.Std.close(this._context),o=this._input(0),r=this._context.new_var(i),s=n.Std.linreg(r,o,0),a=s,[a]}}},{name:"MA Cross",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#FF0000"},plot_1:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#008000"},plot_2:{linestyle:0,linewidth:4,plottype:3,trackPrice:!1,transparency:35,visible:!0,color:"#000080"}},precision:4,inputs:{in_0:9,in_1:26}},plots:[{id:"plot_0",type:"line"},{id:"plot_1",type:"line"},{id:"plot_2",type:"line"}],styles:{plot_0:{title:"Short",histogramBase:0,joinPoints:!1},plot_1:{title:"Long",histogramBase:0,joinPoints:!1},plot_2:{title:"Crosses",histogramBase:0,joinPoints:!1}},description:"MA Cross",shortDescription:"MA Cross",is_price_study:!0,inputs:[{id:"in_0",name:"Short",defval:9,type:"integer",min:1,max:2e3},{id:"in_1",name:"Long",defval:26,type:"integer",min:1,max:2e3}],id:"MA Cross@tv-basicstudies-1",scriptIdPart:"",name:"MA Cross"},constructor:function(){this.f_0=function(t,e){return t?e:n.Std.na()},this.main=function(t,e){var i,o,r,s,a,l,c,h,u,d,p;return this._context=t,this._input=e,i=this._input(0),o=this._input(1),r=n.Std.close(this._context),s=this._context.new_var(r),a=n.Std.sma(s,i,this._context),l=this._context.new_var(r),c=n.Std.sma(l,o,this._context),h=a,u=c,d=n.Std.cross(a,c,this._context),p=this.f_0(d,a),[h,u,p]}}},{name:"MA with EMA Cross",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#FF0000"},plot_1:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#008000"},plot_2:{linestyle:0,linewidth:4,plottype:3,trackPrice:!1,
transparency:35,visible:!0,color:"#000080"}},precision:4,inputs:{in_0:10,in_1:10}},plots:[{id:"plot_0",type:"line"},{id:"plot_1",type:"line"},{id:"plot_2",type:"line"}],styles:{plot_0:{title:"MA",histogramBase:0,joinPoints:!1},plot_1:{title:"EMA",histogramBase:0,joinPoints:!1},plot_2:{title:"Crosses",histogramBase:0,joinPoints:!1}},description:"MA with EMA Cross",shortDescription:"MA/EMA Cross",is_price_study:!0,inputs:[{id:"in_0",name:"Length MA",defval:10,type:"integer",min:1,max:2e3},{id:"in_1",name:"Length EMA",defval:10,type:"integer",min:1,max:2e3}],id:"MA with EMA Cross@tv-basicstudies-1",scriptIdPart:"",name:"MA with EMA Cross"},constructor:function(){this.f_0=function(t,e){return t?e:n.Std.na()},this.main=function(t,e){var i,o,r,s,a,l,c,h,u,d,p;return this._context=t,this._input=e,i=this._input(0),o=this._input(1),r=n.Std.close(this._context),s=this._context.new_var(r),a=n.Std.sma(s,i,this._context),l=this._context.new_var(r),c=n.Std.ema(l,o,this._context),h=a,u=c,d=n.Std.cross(a,c,this._context),p=this.f_0(d,a),[h,u,p]}}},{name:"Mass Index",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#000080"}},precision:4,inputs:{in_0:10}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"Mass Index",shortDescription:"Mass Index",is_price_study:!1,inputs:[{id:"in_0",name:"length",defval:10,type:"integer",min:1,max:2e3}],id:"Mass Index@tv-basicstudies-1",scriptIdPart:"",name:"Mass Index"},constructor:function(){this.f_0=function(t,e){return t-e},this.f_1=function(t,e){return t/e},this.main=function(t,e){var i,o,r,s,a,l,c,h,u,d;return this._context=t,this._input=e,i=this._input(0),o=this.f_0(n.Std.high(this._context),n.Std.low(this._context)),r=this._context.new_var(o),s=n.Std.ema(r,9,this._context),a=this._context.new_var(s),l=n.Std.ema(a,9,this._context),c=this.f_1(s,l),h=this._context.new_var(c),u=n.Std.sum(h,i,this._context),d=u,[d]}}},{name:"McGinley Dynamic",metainfo:{_metainfoVersion:42,isTVScript:!1,isTVScriptStub:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#000080"}},precision:4,inputs:{in_0:14}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1,isHidden:!1}},description:"McGinley Dynamic",shortDescription:"McGinley Dynamic",is_price_study:!0,is_hidden_study:!1,id:"mcginley_dynamic@tv-basicstudies-1",inputs:[{id:"in_0",name:"length",defval:14,type:"integer",min:1,max:1e12}],scriptIdPart:"",name:"McGinley Dynamic"},constructor:function(){this.f_0=function(){var t,e=this._input(0),i=n.Std.close(this._context),o=this._context.new_var(i),r=n.Std.ema(o,e,this._context),s=this._context.new_var(),a=s.get(1)+(i-s.get(1))/(e*n.Std.pow(i/s.get(1),4));return s.set(n.Std.na(s.get(1))?r:a),t=s.get(0),[t]},this.main=function(t,e){return this._context=t,this._input=e,this.f_0()}}},{name:"Momentum",metainfo:{
_metainfoVersion:30,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#808000"}},precision:4,inputs:{in_0:10,in_1:"close"}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Mom",histogramBase:0,joinPoints:!1,isHidden:!1}},description:"Momentum",shortDescription:"Mom",is_price_study:!1,inputs:[{id:"in_0",name:"Length",defval:10,type:"integer",min:1,max:2e3},{id:"in_1",name:"Source",defval:"close",type:"source",options:["open","high","low","close","hl2","hlc3","ohlc4"]}],id:"Momentum@tv-basicstudies-1",scriptIdPart:"",name:"Momentum"},constructor:function(){this.main=function(t,e){var i,o,r,s,a;return this._context=t,this._input=e,i=this._input(0),o=n.Std[this._input(1)](this._context),r=this._context.new_var(o),s=r.get(i),a=s?o-s:null,[a]}}},{name:"Money Flow",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#459915"}},precision:4,bands:[{color:"#c0c0c0",linestyle:2,linewidth:1,visible:!0,value:80},{color:"#c0c0c0",linestyle:2,linewidth:1,visible:!0,value:20}],filledAreasStyle:{fill_0:{color:"#9915ff",transparency:90,visible:!0}},inputs:{in_0:14}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"Money Flow",shortDescription:"MFI",is_price_study:!1,bands:[{id:"hline_0",name:"UpperLimit"},{id:"hline_1",name:"LowerLimit"}],filledAreas:[{id:"fill_0",objAId:"hline_0",objBId:"hline_1",type:"hline_hline",title:"Hlines Background"}],inputs:[{id:"in_0",name:"Length",defval:14,type:"integer",min:1,max:2e3}],id:"Money Flow@tv-basicstudies-1",scriptIdPart:"",name:"Money Flow"},constructor:function(){this.f_0=function(t,e,i){return t*(n.Std.le(e,0)?0:i)},this.f_1=function(t,e,i){return t*(n.Std.ge(e,0)?0:i)},this.main=function(t,e){var i,o,r,s,a,l,c,h,u,d,p,_;return this._context=t,this._input=e,i=this._input(0),o=n.Std.hlc3(this._context),r=this._context.new_var(o),s=n.Std.change(r),a=this.f_0(n.Std.volume(this._context),s,o),l=this._context.new_var(a),c=n.Std.sum(l,i,this._context),h=this.f_1(n.Std.volume(this._context),s,o),u=this._context.new_var(h),d=n.Std.sum(u,i,this._context),p=n.Std.rsi(c,d),_=p,[_]}}},{name:"Moving Average",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#0000FF"}},precision:4,inputs:{in_0:9,in_1:"close",in_2:0}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"Moving Average",shortDescription:"MA",is_price_study:!0,inputs:[{id:"in_0",name:"Length",defval:9,type:"integer",min:1,max:1e4},{id:"in_1",name:"Source",defval:"close",type:"source",options:["open","high","low","close","hl2","hlc3","ohlc4"]},{id:"in_2",name:"Offset",defval:0,type:"integer",min:-1e4,max:1e4}],
id:"Moving Average@tv-basicstudies-1",scriptIdPart:"",name:"Moving Average"},constructor:function(){this.main=function(t,e){var i,o,r,s,a,l;return this._context=t,this._input=e,i=n.Std[this._input(1)](this._context),o=this._input(0),r=this._input(2),s=this._context.new_var(i),a=n.Std.sma(s,o,this._context),l=a,[{value:l,offset:r}]}}},{name:"Moving Average Channel",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#0000FF"},plot_1:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#CC0000"}},precision:4,filledAreasStyle:{fill_0:{color:"#A2C4C9",transparency:90,visible:!0}},inputs:{in_0:20,in_1:20,in_2:0,in_3:0}},plots:[{id:"plot_0",type:"line"},{id:"plot_1",type:"line"}],styles:{plot_0:{title:"Upper",histogramBase:0,joinPoints:!1},plot_1:{title:"Lower",histogramBase:0,joinPoints:!1}},filledAreas:[{id:"fill_0",objAId:"plot_0",objBId:"plot_1",type:"plot_plot",title:"Plots Background"}],description:"Moving Average Channel",shortDescription:"MAC",is_price_study:!0,inputs:[{id:"in_0",name:"Upper Length",defval:20,type:"integer",min:1,max:1e4},{id:"in_1",name:"Lower Length",defval:20,type:"integer",min:1,max:1e4},{id:"in_2",name:"Upper Offset",defval:0,type:"integer",min:-1e4,max:1e4},{id:"in_3",name:"Lower Offset",defval:0,type:"integer",min:-1e4,max:1e4}],id:"Moving Average Channel@tv-basicstudies-1",scriptIdPart:"",name:"Moving Average Channel"},constructor:function(){this.main=function(t,e){var i,o,r,s,a,l,c,h,u,d;return this._context=t,this._input=e,i=n.Std.high(this._context),o=n.Std.low(this._context),r=this._input(0),s=this._input(1),a=this._input(2),l=this._input(3),c=this._context.new_var(i),h=this._context.new_var(o),u=n.Std.sma(c,r,this._context),d=n.Std.sma(h,s,this._context),[{value:u,offset:a},{value:d,offset:l}]}}},{name:"Moving Average Convergence/Divergence",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:1,trackPrice:!1,transparency:35,visible:!0,color:"#FF0000"},plot_1:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#0000FF"},plot_2:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#FF0000"}},precision:4,inputs:{in_0:12,in_1:26,in_3:"close",in_2:9}},plots:[{id:"plot_0",type:"line"},{id:"plot_1",type:"line"},{id:"plot_2",type:"line"}],styles:{plot_0:{title:"Histogram",histogramBase:0,joinPoints:!1},plot_1:{title:"MACD",histogramBase:0,joinPoints:!1},plot_2:{title:"Signal",histogramBase:0,joinPoints:!1}},description:"MACD",shortDescription:"MACD",is_price_study:!1,inputs:[{id:"in_0",name:"fastLength",defval:12,type:"integer",min:1,max:2e3},{id:"in_1",name:"slowLength",defval:26,type:"integer",min:1,max:2e3},{id:"in_3",name:"Source",defval:"close",type:"source",options:["open","high","low","close","hl2","hlc3","ohlc4"]},{id:"in_2",name:"signalLength",defval:9,type:"integer",
min:1,max:50}],id:"Moving Average Convergence/Divergence@tv-basicstudies-1",scriptIdPart:"",name:"MACD"},constructor:function(){this.f_0=function(t,e){return t-e},this.main=function(t,e){var i,o,r,s,a,l,c,h,u,d,p,_,f,m,g;return this._context=t,this._input=e,i=n.Std[this._input(2)](this._context),o=this._input(0),r=this._input(1),s=this._input(3),a=this._context.new_var(i),l=n.Std.ema(a,o,this._context),c=this._context.new_var(i),h=n.Std.ema(c,r,this._context),u=this.f_0(l,h),d=this._context.new_var(u),p=n.Std.ema(d,s,this._context),_=this.f_0(u,p),f=_,m=u,g=p,[f,m,g]}}},{name:"Moving Average Exponential",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#0000FF"}},precision:4,inputs:{in_0:9,in_1:"close",in_2:0}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"Moving Average Exponential",shortDescription:"EMA",is_price_study:!0,inputs:[{id:"in_0",name:"Length",defval:9,type:"integer",min:1,max:1e4},{id:"in_1",name:"Source",defval:"close",type:"source",options:["open","high","low","close","hl2","hlc3","ohlc4"]},{id:"in_2",name:"Offset",defval:0,type:"integer",min:-1e4,max:1e4}],id:"Moving Average Exponential@tv-basicstudies-1",scriptIdPart:"",name:"Moving Average Exponential"},constructor:function(){this.main=function(t,e){var i,o,r,s,a,l;return this._context=t,this._input=e,i=n.Std[this._input(1)](this._context),o=this._input(0),r=this._input(2),s=this._context.new_var(i),a=n.Std.ema(s,o,this._context),l=a,[{value:l,offset:r}]}}},{name:"Moving Average Weighted",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#0000FF"}},precision:4,inputs:{in_0:9,in_1:"close",in_2:0}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"Moving Average Weighted",shortDescription:"WMA",is_price_study:!0,inputs:[{id:"in_0",name:"Length",defval:9,type:"integer",min:1,max:2e3},{id:"in_1",name:"Source",defval:"close",type:"source",options:["open","high","low","close","hl2","hlc3","ohlc4"]},{id:"in_2",name:"Offset",defval:0,type:"integer",min:-1e4,max:1e4}],id:"Moving Average Weighted@tv-basicstudies-1",scriptIdPart:"",name:"Moving Average Weighted"},constructor:function(){this.main=function(t,e){var i,o,r,s,a,l;return this._context=t,this._input=e,i=n.Std[this._input(1)](this._context),o=this._input(0),r=this._input(2),s=this._context.new_var(i),a=n.Std.wma(s,o,this._context),l=a,[{value:l,offset:r}]}}},{name:"Net Volume",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#0000FF"}},precision:4,inputs:{}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},
description:"Net Volume",shortDescription:"Net Volume",is_price_study:!1,inputs:[],id:"Net Volume@tv-basicstudies-1",scriptIdPart:"",name:"Net Volume"},constructor:function(){this.f_0=function(t,e,i){return n.Std.gt(t,0)?e:n.Std.lt(i,0)?-e:0*e},this.main=function(t,e){var i,o,r,s,a;return this._context=t,this._input=e,i=n.Std.close(this._context),o=this._context.new_var(i),r=n.Std.change(o),s=this.f_0(r,n.Std.volume(this._context),r),a=s,[a]}}},{name:"On Balance Volume",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#0000FF"}},precision:4,inputs:{}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"On Balance Volume",shortDescription:"OBV",is_price_study:!1,inputs:[],id:"On Balance Volume@tv-basicstudies-1",scriptIdPart:"",name:"On Balance Volume"},constructor:function(){this.f_0=function(t,e,i){return n.Std.gt(t,0)?e:n.Std.lt(i,0)?-e:0*e},this.main=function(t,e){var i,o,r,s,a,l;return this._context=t,this._input=e,i=n.Std.close(this._context),o=this._context.new_var(i),r=n.Std.change(o),s=this.f_0(r,n.Std.volume(this._context),r),a=n.Std.cum(s,this._context),l=a,[l]}}},{name:"Parabolic SAR",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:3,trackPrice:!1,transparency:35,visible:!0,color:"#0000FF"}},precision:4,inputs:{in_0:.02,in_1:.02,in_2:.2}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"Parabolic SAR",shortDescription:"SAR",is_price_study:!0,inputs:[{id:"in_0",name:"start",defval:.02,type:"float",min:-1e12,max:1e12},{id:"in_1",name:"increment",defval:.02,type:"float",min:-1e12,max:1e12},{id:"in_2",name:"maximum",defval:.2,type:"float",min:-1e12,max:1e12}],id:"Parabolic SAR@tv-basicstudies-1",scriptIdPart:"",name:"Parabolic SAR"},constructor:function(){this.main=function(t,e){var i,o,r,s,a;return this._context=t,this._input=e,i=this._input(0),o=this._input(1),r=this._input(2),s=n.Std.sar(i,o,r,this._context),a=s,[a]}}},{name:"Price Channel",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#FF0080"},plot_1:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#FF0080"},plot_2:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#0496FF"}},precision:4,inputs:{in_0:20,in_1:0}},plots:[{id:"plot_0",type:"line"},{id:"plot_1",type:"line"},{id:"plot_2",type:"line"}],styles:{plot_0:{title:"Highprice Line",histogramBase:0,joinPoints:!1},plot_1:{title:"Lowprice Line",histogramBase:0,joinPoints:!1},plot_2:{title:"Centerprice Line",histogramBase:0,joinPoints:!1}},description:"Price Channel",shortDescription:"PC",is_price_study:!1,inputs:[{id:"in_0",name:"Length",defval:20,
type:"integer",min:1,max:2e3},{id:"in_1",name:"Offset Length",defval:0,type:"integer",min:1,max:2e3}],id:"Price Channel@tv-basicstudies-1",scriptIdPart:"",name:"Price Channel"},constructor:function(){this.main=function(t,e){var i,o,r,s,a,l,c,h,u;return this._context=t,this._input=e,i=n.Std.high(this._context),o=this._context.new_var(i),r=n.Std.low(this._context),s=this._context.new_var(r),a=this._input(0),l=this._input(1),c=n.Std.highest(o,a,this._context),h=n.Std.lowest(s,a,this._context),u=n.Std.avg(c,h),[{value:c,offset:l},{value:h,offset:l},{value:u,offset:l}]}}},{name:"Price Oscillator",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#0000FF"}},precision:4,inputs:{in_0:10,in_1:21}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"Price Oscillator",shortDescription:"PPO",is_price_study:!1,inputs:[{id:"in_0",name:"shortlen",defval:10,type:"integer",min:1,max:2e3},{id:"in_1",name:"longlen",defval:21,type:"integer",min:1,max:2e3}],id:"Price Oscillator@tv-basicstudies-1",scriptIdPart:"",name:"Price Oscillator"},constructor:function(){this.f_0=function(t,e){return(t-e)/e*100},this.main=function(t,e){var i,o,r,s,a,l,c,h,u;return this._context=t,this._input=e,i=n.Std.close(this._context),o=this._input(0),r=this._input(1),s=this._context.new_var(i),a=n.Std.sma(s,o,this._context),l=this._context.new_var(i),c=n.Std.sma(l,r,this._context),h=this.f_0(a,c),u=h,[u]}}},{name:"Price Volume Trend",metainfo:{_metainfoVersion:42,isTVScript:!1,isTVScriptStub:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#0000FF"}},precision:4,inputs:{}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"PVT",histogramBase:0,joinPoints:!1,isHidden:!1}},description:"Price Volume Trend",shortDescription:"PVT",is_price_study:!1,is_hidden_study:!1,id:"price_volume_trend@tv-basicstudies-1",inputs:[],scriptIdPart:"",name:"Price Volume Trend"},constructor:function(){this.f_0=function(){var t=this._context.new_var(n.Std.close(this._context));return[n.Std.cum(n.Std.change(t)/t.get(1)*n.Std.volume(this._context),this._context)]},this.main=function(t,e){return this._context=t,this._input=e,[this.f_0()[0]]}}},{name:"Rate Of Change",metainfo:{_metainfoVersion:41,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#0000FF"}},precision:4,bands:[{color:"#808080",linestyle:2,linewidth:1,visible:!0,value:0}],inputs:{in_0:9}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"ROC",histogramBase:0,joinPoints:!1,isHidden:!1}},description:"Rate Of Change",shortDescription:"ROC",is_price_study:!1,bands:[{id:"hline_0",name:"Zero Line",isHidden:!1}],inputs:[{id:"in_0",name:"length",defval:9,type:"integer",min:1,max:1e12}],id:"rate_of_change@tv-basicstudies-1",scriptIdPart:"",
name:"Rate Of Change"},constructor:function(){this.main=function(t,e){var i,o,r;return this._context=t,this._input=e,i=this._context.new_var(n.Std.close(this._context)),o=this._input(0),r=100*(i.get(0)-i.get(o))/i.get(o),[r]}}},{name:"Relative Strength Index",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#800080"}},precision:4,bands:[{color:"#808080",linestyle:2,linewidth:1,visible:!0,value:70},{color:"#808080",linestyle:2,linewidth:1,visible:!0,value:30}],filledAreasStyle:{fill_0:{color:"#800080",transparency:90,visible:!0}},inputs:{in_0:14}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"Relative Strength Index",shortDescription:"RSI",is_price_study:!1,bands:[{id:"hline_0",name:"UpperLimit"},{id:"hline_1",name:"LowerLimit"}],filledAreas:[{id:"fill_0",objAId:"hline_0",objBId:"hline_1",type:"hline_hline",title:"Hlines Background"}],inputs:[{id:"in_0",name:"Length",defval:14,type:"integer",min:1,max:2e3}],id:"Relative Strength Index@tv-basicstudies-1",scriptIdPart:"",name:"Relative Strength Index"},constructor:function(){this.f_0=function(t){return n.Std.max(t,0)},this.f_1=function(t){return-n.Std.min(t,0)},this.f_2=function(t,e){return n.Std.eq(t,0)?100:n.Std.eq(e,0)?0:100-100/(1+e/t)},this.main=function(t,e){var i,o,r,s,a,l,c,h,u,d,p,_;return this._context=t,this._input=e,i=n.Std.close(this._context),o=this._input(0),r=this._context.new_var(i),s=n.Std.change(r),a=this.f_0(s),l=this._context.new_var(a),c=n.Std.rma(l,o,this._context),h=this.f_1(s),u=this._context.new_var(h),d=n.Std.rma(u,o,this._context),p=this.f_2(d,c),_=p,[_]}}},{name:"Relative Vigor Index",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#008000"},plot_1:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#FF0000"}},precision:4,inputs:{in_0:10}},plots:[{id:"plot_0",type:"line"},{id:"plot_1",type:"line"}],styles:{plot_0:{title:"RVGI",histogramBase:0,joinPoints:!1},plot_1:{title:"Signal",histogramBase:0,joinPoints:!1}},description:"Relative Vigor Index",shortDescription:"RVGI",is_price_study:!1,inputs:[{id:"in_0",name:"Length",defval:10,type:"integer",min:1,max:2e3}],id:"Relative Vigor Index@tv-basicstudies-1",scriptIdPart:"",name:"Relative Vigor Index"},constructor:function(){this.f_0=function(t,e){return t-e},this.f_1=function(t,e){return t/e},this.main=function(t,e){var i,o,r,s,a,l,c,h,u,d,p,_,f,m,g,y;return this._context=t,this._input=e,i=this._input(0),o=this.f_0(n.Std.close(this._context),n.Std.open(this._context)),r=this._context.new_var(o),s=n.Std.swma(r,this._context),a=this._context.new_var(s),l=n.Std.sum(a,i,this._context),c=this.f_0(n.Std.high(this._context),n.Std.low(this._context)),h=this._context.new_var(c),u=n.Std.swma(h,this._context),d=this._context.new_var(u),
p=n.Std.sum(d,i,this._context),_=this.f_1(l,p),f=this._context.new_var(_),m=n.Std.swma(f,this._context),g=_,y=m,[g,y]}}},{name:"Relative Volatility Index",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#000080"}},precision:4,bands:[{color:"#808080",linestyle:2,linewidth:1,visible:!0,value:80},{color:"#808080",linestyle:2,linewidth:1,visible:!0,value:20}],filledAreasStyle:{fill_0:{color:"#808000",transparency:90,visible:!0}},inputs:{in_0:10}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"Relative Volatility Index",shortDescription:"RVI",is_price_study:!1,bands:[{id:"hline_0",name:"UpperLimit"},{id:"hline_1",name:"LowerLimit"}],filledAreas:[{id:"fill_0",objAId:"hline_0",objBId:"hline_1",type:"hline_hline",title:"Hlines Background"}],inputs:[{id:"in_0",name:"length",defval:10,type:"integer",min:1,max:2e3}],id:"Relative Volatility Index@tv-basicstudies-1",scriptIdPart:"",name:"Relative Volatility Index"},constructor:function(){this.f_0=function(t,e){return n.Std.le(t,0)?0:e},this.f_1=function(t,e){return n.Std.gt(t,0)?0:e},this.f_2=function(t,e){return t/(t+e)*100},this.main=function(t,e){var i,o,r,s,a,l,c,h,u,d,p,_,f,m;return this._context=t,this._input=e,i=this._input(0),o=n.Std.close(this._context),r=this._context.new_var(o),s=n.Std.stdev(r,i,this._context),a=this._context.new_var(o),l=n.Std.change(a),c=this.f_0(l,s),h=this._context.new_var(c),u=n.Std.ema(h,14,this._context),d=this.f_1(l,s),p=this._context.new_var(d),_=n.Std.ema(p,14,this._context),f=this.f_2(u,_),m=f,[m]}}},{name:"SMI Ergodic Indicator/Oscillator",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#0000FF"},plot_1:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#FF7F00"},plot_2:{linestyle:0,linewidth:1,plottype:1,trackPrice:!1,transparency:35,visible:!0,color:"#FF0000"}},precision:4,inputs:{in_0:5,in_1:20,in_2:5}},plots:[{id:"plot_0",type:"line"},{id:"plot_1",type:"line"},{id:"plot_2",type:"line"}],styles:{plot_0:{title:"Indicator",histogramBase:0,joinPoints:!1},plot_1:{title:"Signal",histogramBase:0,joinPoints:!1},plot_2:{title:"Oscillator",histogramBase:0,joinPoints:!1}},description:"SMI Ergodic Indicator/Oscillator",shortDescription:"SMIIO",is_price_study:!1,inputs:[{id:"in_0",name:"shortlen",defval:5,type:"integer",min:1,max:2e3},{id:"in_1",name:"longlen",defval:20,type:"integer",min:1,max:2e3},{id:"in_2",name:"siglen",defval:5,type:"integer",min:1,max:2e3}],id:"SMI Ergodic Indicator/Oscillator@tv-basicstudies-1",scriptIdPart:"",name:"SMI Ergodic Indicator/Oscillator"},constructor:function(){this.f_0=function(t,e){return t-e},this.main=function(t,e){var i,o,r,s,a,l,c,h,u,d,p,_;return this._context=t,this._input=e,i=this._input(0),o=this._input(1),r=this._input(2),
s=n.Std.close(this._context),a=this._context.new_var(s),l=n.Std.tsi(a,i,o,this._context),c=this._context.new_var(l),h=n.Std.ema(c,r,this._context),u=this.f_0(l,h),d=l,p=h,_=u,[d,p,_]}}},{name:"Smoothed Moving Average",metainfo:{_metainfoVersion:41,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#FF0000"}},precision:4,inputs:{in_0:7,in_1:"close"}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1,isHidden:!1}},description:"Smoothed Moving Average",shortDescription:"SMMA",is_price_study:!0,inputs:[{id:"in_0",name:"Length",defval:7,type:"integer",min:1,max:1e12},{id:"in_1",name:"Source",defval:"close",type:"source",options:["open","high","low","close","hl2","hlc3","ohlc4"]}],id:"smoothed_moving_average@tv-basicstudies-1",scriptIdPart:"",name:"Smoothed Moving Average"},constructor:function(){this.f_0=function(){var t,e=this._input(0),i=n.Std[this._input(1)](this._context),o=this._context.new_var(i),r=n.Std.sma(o,e,this._context),s=this._context.new_var(),a=(s.get(1)*(e-1)+i)/e;return s.set(n.Std.na(s.get(1))?r:a),t=s.get(0),[t]},this.main=function(t,e){return this._context=t,this._input=e,this.f_0()}}},{name:"Stochastic",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#0000FF"},plot_1:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#FF0000"}},precision:4,bands:[{color:"#808080",linestyle:2,linewidth:1,visible:!0,value:80},{color:"#808080",linestyle:2,linewidth:1,visible:!0,value:20}],filledAreasStyle:{fill_0:{color:"#800080",transparency:75,visible:!0}},inputs:{in_0:14,in_1:1,in_2:3}},plots:[{id:"plot_0",type:"line"},{id:"plot_1",type:"line"}],styles:{plot_0:{title:"%K",histogramBase:0,joinPoints:!1},plot_1:{title:"%D",histogramBase:0,joinPoints:!1}},description:"Stochastic",shortDescription:"Stoch",is_price_study:!1,bands:[{id:"hline_0",name:"UpperLimit"},{id:"hline_1",name:"LowerLimit"}],filledAreas:[{id:"fill_0",objAId:"hline_0",objBId:"hline_1",type:"hline_hline",title:"Hlines Background"}],inputs:[{id:"in_0",name:"length",defval:14,type:"integer",min:1,max:1e4},{id:"in_1",name:"smoothK",defval:1,type:"integer",min:1,max:1e4},{id:"in_2",name:"smoothD",defval:3,type:"integer",min:1,max:1e4}],id:"Stochastic@tv-basicstudies-1",scriptIdPart:"",name:"Stochastic"},constructor:function(){this.main=function(t,e){var i,o,r,s,a,l,c,h,u,d,p,_,f,m,g,y;return this._context=t,this._input=e,i=this._input(0),o=this._input(1),r=this._input(2),s=n.Std.close(this._context),a=n.Std.high(this._context),l=n.Std.low(this._context),c=this._context.new_var(s),h=this._context.new_var(a),u=this._context.new_var(l),d=n.Std.stoch(c,h,u,i,this._context),p=this._context.new_var(d),_=n.Std.sma(p,o,this._context),f=this._context.new_var(_),m=n.Std.sma(f,r,this._context),g=_,y=m,[g,y]}}},{name:"Stochastic RSI",metainfo:{
_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#0000FF"},plot_1:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#FF0000"}},precision:4,bands:[{color:"#808080",linestyle:2,linewidth:1,visible:!0,value:80},{color:"#808080",linestyle:2,linewidth:1,visible:!0,value:20}],filledAreasStyle:{fill_0:{color:"#800080",transparency:80,visible:!0}},inputs:{in_0:14,in_1:14,in_2:3,in_3:3}},plots:[{id:"plot_0",type:"line"},{id:"plot_1",type:"line"}],styles:{plot_0:{title:"%K",histogramBase:0,joinPoints:!1},plot_1:{title:"%D",histogramBase:0,joinPoints:!1}},description:"Stochastic RSI",shortDescription:"Stoch RSI",is_price_study:!1,bands:[{id:"hline_0",name:"UpperLimit"},{id:"hline_1",name:"LowerLimit"}],filledAreas:[{id:"fill_0",objAId:"hline_0",objBId:"hline_1",type:"hline_hline",title:"Hlines Background"}],inputs:[{id:"in_0",name:"lengthRSI",defval:14,type:"integer",min:1,max:1e4},{id:"in_1",name:"lengthStoch",defval:14,type:"integer",min:1,max:1e4},{id:"in_2",name:"smoothK",defval:3,type:"integer",min:1,max:1e4},{id:"in_3",name:"smoothD",defval:3,type:"integer",min:1,max:1e4}],id:"Stochastic RSI@tv-basicstudies-1",scriptIdPart:"",name:"Stochastic RSI"},constructor:function(){this.f_1=function(t,e,i){var o=i.new_var(n.Std.max(n.Std.change(t),0));return n.Std.rma(o,e,i)},this.f_2=function(t,e,i){var o=i.new_var(-n.Std.min(n.Std.change(t),0));return n.Std.rma(o,e,i)},this.main=function(t,e){var i,o,r,s,a,l,c,h,u,d,p,_,f,m,g,y,v;return this._context=t,this._input=e,i=n.Std.close(this._context),o=this._input(0),r=this._input(1),s=this._input(2),a=this._input(3),l=this._context.new_var(i),c=n.Std.rsi(this.f_1(l,o,this._context),this.f_2(l,o,this._context)),h=this._context.new_var(c),u=this._context.new_var(c),d=this._context.new_var(c),p=n.Std.stoch(h,u,d,r,this._context),_=this._context.new_var(p),f=n.Std.sma(_,s,this._context),m=this._context.new_var(f),g=n.Std.sma(m,a,this._context),y=f,v=g,[y,v]}}},{name:"TRIX",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#800000"}},precision:4,bands:[{color:"#808080",linestyle:2,linewidth:1,visible:!0,value:0}],inputs:{in_0:18}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"TRIX",histogramBase:0,joinPoints:!1}},description:"TRIX",shortDescription:"TRIX",is_price_study:!1,bands:[{id:"hline_0",name:"Zero"}],inputs:[{id:"in_0",name:"length",defval:18,type:"integer",min:1,max:2e3}],id:"TRIX@tv-basicstudies-1",scriptIdPart:"",name:"TRIX"},constructor:function(){this.f_0=function(t){return n.Std.log(t)},this.f_1=function(t){return 1e4*t},this.main=function(t,e){var i,o,r,s,a,l,c,h,u,d,p,_;return this._context=t,this._input=e,i=this._input(0),o=this.f_0(n.Std.close(this._context)),r=this._context.new_var(o),s=n.Std.ema(r,i,this._context),a=this._context.new_var(s),
l=n.Std.ema(a,i,this._context),c=this._context.new_var(l),h=n.Std.ema(c,i,this._context),u=this._context.new_var(h),d=n.Std.change(u),p=this.f_1(d),_=p,[_]}}},{name:"Triple EMA",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#008000"}},precision:4,inputs:{in_0:9}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"Triple EMA",shortDescription:"TEMA",is_price_study:!0,inputs:[{id:"in_0",name:"length",defval:9,type:"integer",min:1,max:1e4}],id:"Triple EMA@tv-basicstudies-1",scriptIdPart:"",name:"Triple EMA"},constructor:function(){this.f_0=function(t,e,i){return 3*(t-e)+i},this.main=function(t,e){var i,o,r,s,a,l,c,h,u,d;return this._context=t,this._input=e,i=this._input(0),o=n.Std.close(this._context),r=this._context.new_var(o),s=n.Std.ema(r,i,this._context),a=this._context.new_var(s),l=n.Std.ema(a,i,this._context),c=this._context.new_var(l),h=n.Std.ema(c,i,this._context),u=this.f_0(s,l,h),d=u,[d]}}},{name:"True Strength Indicator",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#000080"},plot_1:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#FF0000"}},precision:4,bands:[{color:"#808080",linestyle:2,linewidth:1,visible:!0,value:0}],inputs:{in_0:25,in_1:13,in_2:13}},plots:[{id:"plot_0",type:"line"},{id:"plot_1",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1},plot_1:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"True Strength Indicator",shortDescription:"True Strength Indicator",is_price_study:!1,bands:[{id:"hline_0",name:"Zero"}],inputs:[{id:"in_0",name:"long",defval:25,type:"integer",min:1,max:4999},{id:"in_1",name:"short",defval:13,type:"integer",min:1,max:4999},{id:"in_2",name:"siglen",defval:13,type:"integer",min:1,max:4999}],id:"True Strength Indicator@tv-basicstudies-1",scriptIdPart:"",name:"True Strength Indicator"},constructor:function(){this.main=function(t,e){var i,o,r,s,a,l,c,h;return this._context=t,this._input=e,i=this._input(0),o=this._input(1),r=this._input(2),s=n.Std.close(this._context),a=this._context.new_var(s),l=n.Std.tsi(a,o,i,this._context),c=l,h=this._context.new_var(c),[c,n.Std.ema(h,r,this._context)]}}},{name:"Ultimate Oscillator",metainfo:{_metainfoVersion:41,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#FF0000"}},precision:4,inputs:{in_0:7,in_1:14,in_2:28}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"UO",histogramBase:0,joinPoints:!1,isHidden:!1}},description:"Ultimate Oscillator",shortDescription:"UO",is_price_study:!1,inputs:[{id:"in_0",name:"length7",defval:7,type:"integer",min:1,max:1e12},{id:"in_1",name:"length14",defval:14,type:"integer",min:1,max:1e12
},{id:"in_2",name:"length28",defval:28,type:"integer",min:1,max:1e12}],id:"ultimate_oscillator@tv-basicstudies-1",scriptIdPart:"",name:"Ultimate Oscillator"},constructor:function(){this.f_0=function(t,e,i){var o=this._context.new_var(t),r=this._context.new_var(e);return[n.Std.sum(o,i,this._context)/n.Std.sum(r,i,this._context)]},this.f_1=function(){var t=this._input(0),e=this._input(1),i=this._input(2),o=this._context.new_var(n.Std.close(this._context)),r=n.Std.max(n.Std.high(this._context),o.get(1)),s=this._context.new_var(n.Std.close(this._context)),a=n.Std.min(n.Std.low(this._context),s.get(1)),l=n.Std.close(this._context)-a,c=r-a,h=this.f_0(l,c,t),u=this.f_0(l,c,e),d=this.f_0(l,c,i);return[100*(4*h[0]+2*u[0]+d[0])/7]},this.main=function(t,e){return this._context=t,this._input=e,this.f_1()}}},{name:"VWAP",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:0,transparency:0,visible:!0,color:"#3A6CA8"}},precision:4},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"VWAP",histogramBase:0,joinPoints:!1,isHidden:!1}},description:"VWAP",shortDescription:"VWAP",is_price_study:!0,inputs:[],id:"VWAP@tv-basicstudies-1",scriptIdPart:"",name:"VWAP"},constructor:function(){this.f_1=function(t){t.hist=null,t.add_hist()},this.init=function(t,e){this._isNewSession=n.Std.createNewSessionCheck(t)},this.main=function(t,e){var i,o,r,s;return this._context=t,this._input=e,i=t.new_var(),o=t.new_var(),this._context.symbol.time&&(r=this._context.symbol.time,this._isNewSession(r)&&(this.f_1(i),this.f_1(o))),i.set(n.Std.nz(i.get(1))+n.Std.hlc3(this._context)*n.Std.volume(this._context)),o.set(n.Std.nz(o.get(1))+n.Std.volume(this._context)),s=i.get(0)/o.get(0),[s]}}},{name:"VWMA",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#0000FF"}},precision:4,inputs:{in_0:20}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"VWMA",shortDescription:"VWMA",is_price_study:!0,inputs:[{id:"in_0",name:"len",defval:20,type:"integer",min:1,max:1e4}],id:"VWMA@tv-basicstudies-1",scriptIdPart:"",name:"VWMA"},constructor:function(){this.main=function(t,e){var i,o,r,s,a;return this._context=t,this._input=e,i=n.Std.close(this._context),o=this._input(0),r=this._context.new_var(i),s=n.Std.vwma(r,o,this._context),a=s,[a]}}},{name:"Volume Oscillator",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#000080"}},precision:4,bands:[{color:"#808080",linestyle:2,linewidth:1,visible:!0,value:0}],inputs:{in_0:5,in_1:10}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"Volume Oscillator",shortDescription:"Volume Osc",is_price_study:!1,bands:[{id:"hline_0",name:"Zero"}],
inputs:[{id:"in_0",name:"shortlen",defval:5,type:"integer",min:1,max:4999},{id:"in_1",name:"longlen",defval:10,type:"integer",min:1,max:4999}],id:"Volume Oscillator@tv-basicstudies-1",scriptIdPart:"",name:"Volume Oscillator"},constructor:function(){this.f_0=function(t,e){return 100*(t-e)/e},this.main=function(t,e){var i,o,r,s,a,l,c,h,u;return this._context=t,this._input=e,i=this._input(0),o=this._input(1),r=n.Std.volume(this._context),s=this._context.new_var(r),a=n.Std.ema(s,i,this._context),l=this._context.new_var(r),c=n.Std.ema(l,o,this._context),h=this.f_0(a,c),u=h,[u]}}},{name:"Vortex Indicator",metainfo:{_metainfoVersion:42,isTVScript:!1,isTVScriptStub:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#0000FF"},plot_1:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#FF0000"}},precision:4,inputs:{in_0:14}},plots:[{id:"plot_0",type:"line"},{id:"plot_1",type:"line"}],styles:{plot_0:{title:"VI +",histogramBase:0,joinPoints:!1,isHidden:!1},plot_1:{title:"VI -",histogramBase:0,joinPoints:!1,isHidden:!1}},description:"Vortex Indicator",shortDescription:"VI",is_price_study:!1,is_hidden_study:!1,id:"vortex_indicator@tv-basicstudies-1",inputs:[{id:"in_0",name:"Period",defval:14,type:"integer",min:2,max:1e12}],scriptIdPart:"",name:"Vortex Indicator"},constructor:function(){this.f_0=function(){var t=this._input(0),e=this._context.new_var(n.Std.low(this._context)),i=this._context.new_var(n.Std.abs(n.Std.high(this._context)-e.get(1))),o=n.Std.sum(i,t,this._context),r=this._context.new_var(n.Std.high(this._context)),s=this._context.new_var(n.Std.abs(n.Std.low(this._context)-r.get(1))),a=n.Std.sum(s,t,this._context),l=this._context.new_var(n.Std.atr(1,this._context)),c=n.Std.sum(l,t,this._context);return[o/c,a/c]},this.main=function(t,e){return this._context=t,this._input=e,this.f_0()}}},{name:"Willams %R",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#000080"}},precision:4,bands:[{color:"#808080",linestyle:2,linewidth:1,visible:!0,value:-20},{color:"#808080",linestyle:2,linewidth:1,visible:!0,value:-80}],filledAreasStyle:{fill_0:{color:"#000080",transparency:90,visible:!0}},inputs:{in_0:14}},plots:[{id:"plot_0",type:"line"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"Williams %R",shortDescription:"%R",is_price_study:!1,bands:[{id:"hline_0",name:"UpperLimit"},{id:"hline_1",name:"LowerLimit"}],filledAreas:[{id:"fill_0",objAId:"hline_0",objBId:"hline_1",type:"hline_hline",title:"Hlines Background"}],inputs:[{id:"in_0",name:"length",defval:14,type:"integer",min:1,max:2e3}],id:"Willams %R@tv-basicstudies-1",scriptIdPart:"",name:"Willams %R"},constructor:function(){this.f_0=function(t,e,i){return 100*(t-e)/(e-i)},this.main=function(t,e){var i,o,r,s,a,l,c,h,u;return this._context=t,this._input=e,i=this._input(0),o=n.Std.high(this._context),
r=this._context.new_var(o),s=n.Std.highest(r,i,this._context),a=n.Std.low(this._context),l=this._context.new_var(a),c=n.Std.lowest(l,i,this._context),h=this.f_0(n.Std.close(this._context),s,c),u=h,[u]}}},{name:"Williams Alligator",metainfo:{_metainfoVersion:27,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#0000FF"},plot_1:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#FF0000"},plot_2:{linestyle:0,linewidth:1,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#008000"}},precision:4,inputs:{in_0:21,in_1:13,in_2:8}},plots:[{id:"plot_0",type:"line"},{id:"plot_1",type:"line"},{id:"plot_2",type:"line"}],styles:{plot_0:{title:"Jaw",histogramBase:0,joinPoints:!1},plot_1:{title:"Teeth",histogramBase:0,joinPoints:!1},plot_2:{title:"Lips",histogramBase:0,joinPoints:!1}},description:"Williams Alligator",shortDescription:"Alligator",is_price_study:!0,inputs:[{id:"in_0",name:"jawLength",defval:21,type:"integer",min:1,max:2e3},{id:"in_1",name:"teethLength",defval:13,type:"integer",min:1,max:2e3},{id:"in_2",name:"lipsLength",defval:8,type:"integer",min:1,max:2e3}],id:"Williams Alligator@tv-basicstudies-1",scriptIdPart:"",name:"Williams Alligator"},constructor:function(){this.main=function(t,e){var i,o,r,s,a,l,c,h,u,d,p,_,f;return this._context=t,this._input=e,i=this._input(0),o=this._input(1),r=this._input(2),s=n.Std.hl2(this._context),a=this._context.new_var(s),l=n.Std.ema(a,i,this._context),c=this._context.new_var(s),h=n.Std.ema(c,o,this._context),u=this._context.new_var(s),d=n.Std.ema(u,r,this._context),p=l,_=h,f=d,[{value:p,offset:8},{value:_,offset:5},{value:f,offset:3}]}}},{name:"Williams Fractals",metainfo:{_metainfoVersion:42,isTVScript:!1,isTVScriptStub:!1,defaults:{styles:{plot_0:{plottype:"shape_triangle_down",visible:!0,location:"BelowBar",transparency:0,color:"#800000"},plot_1:{plottype:"shape_triangle_up",visible:!0,location:"AboveBar",transparency:0,color:"#808000"}},precision:4,inputs:{in_0:2}},plots:[{id:"plot_0",type:"shapes"},{id:"plot_1",type:"shapes"}],styles:{plot_0:{title:"Down fractals",isHidden:!1},plot_1:{title:"Up fractals",isHidden:!1}},description:"Williams Fractal",shortDescription:"Fractals",is_price_study:!0,is_hidden_study:!1,id:"Williams Fractals@tv-basicstudies-1",inputs:[{id:"in_0",name:"Periods",defval:2,type:"integer",min:2,max:1e12}],scriptIdPart:"",name:"Williams Fractals",isCustomIndicator:!0},constructor:function(){this.f_0=function(){
var t=this._input(0),e=this._context.new_var(n.Std.high(this._context)),i=n.Std.or(n.Std.and(n.Std.and(n.Std.lt(e.get(t+2),e.get(t)),n.Std.lt(e.get(t+1),e.get(t))),n.Std.and(n.Std.lt(e.get(t-1),e.get(t)),n.Std.lt(e.get(t-2),e.get(t)))),n.Std.or(n.Std.or(n.Std.and(n.Std.lt(e.get(t+3),e.get(t)),n.Std.and(n.Std.and(n.Std.lt(e.get(t+2),e.get(t)),n.Std.eq(e.get(t+1),e.get(t))),n.Std.and(n.Std.lt(e.get(t-1),e.get(t)),n.Std.lt(e.get(t-2),e.get(t))))),n.Std.and(n.Std.and(n.Std.lt(e.get(t+4),e.get(t)),n.Std.lt(e.get(t+3),e.get(t))),n.Std.and(n.Std.and(n.Std.eq(e.get(t+2),e.get(t)),n.Std.le(e.get(t+1),e.get(t))),n.Std.and(n.Std.lt(e.get(t-1),e.get(t)),n.Std.lt(e.get(t-2),e.get(t)))))),n.Std.or(n.Std.and(n.Std.and(n.Std.lt(e.get(t+5),e.get(t)),n.Std.and(n.Std.lt(e.get(t+4),e.get(t)),n.Std.eq(e.get(t+3),e.get(t)))),n.Std.and(n.Std.and(n.Std.eq(e.get(t+2),e.get(t)),n.Std.le(e.get(t+1),e.get(t))),n.Std.and(n.Std.lt(e.get(t-1),e.get(t)),n.Std.lt(e.get(t-2),e.get(t))))),n.Std.and(n.Std.and(n.Std.and(n.Std.lt(e.get(t+6),e.get(t)),n.Std.lt(e.get(t+5),e.get(t))),n.Std.and(n.Std.eq(e.get(t+4),e.get(t)),n.Std.le(e.get(t+3),e.get(t)))),n.Std.and(n.Std.and(n.Std.eq(e.get(t+2),e.get(t)),n.Std.le(e.get(t+1),e.get(t))),n.Std.and(n.Std.lt(e.get(t-1),e.get(t)),n.Std.lt(e.get(t-2),e.get(t)))))))),o=this._context.new_var(n.Std.low(this._context));return[n.Std.or(n.Std.and(n.Std.and(n.Std.gt(o.get(t+2),o.get(t)),n.Std.gt(o.get(t+1),o.get(t))),n.Std.and(n.Std.gt(o.get(t-1),o.get(t)),n.Std.gt(o.get(t-2),o.get(t)))),n.Std.or(n.Std.or(n.Std.and(n.Std.gt(o.get(t+3),o.get(t)),n.Std.and(n.Std.and(n.Std.gt(o.get(t+2),o.get(t)),n.Std.eq(o.get(t+1),o.get(t))),n.Std.and(n.Std.gt(o.get(t-1),o.get(t)),n.Std.gt(o.get(t-2),o.get(t))))),n.Std.and(n.Std.and(n.Std.gt(o.get(t+4),o.get(t)),n.Std.gt(o.get(t+3),o.get(t))),n.Std.and(n.Std.and(n.Std.eq(o.get(t+2),o.get(t)),n.Std.ge(o.get(t+1),o.get(t))),n.Std.and(n.Std.gt(o.get(t-1),o.get(t)),n.Std.gt(o.get(t-2),o.get(t)))))),n.Std.or(n.Std.and(n.Std.and(n.Std.gt(o.get(t+5),o.get(t)),n.Std.and(n.Std.gt(o.get(t+4),o.get(t)),n.Std.eq(o.get(t+3),o.get(t)))),n.Std.and(n.Std.and(n.Std.eq(o.get(t+2),o.get(t)),n.Std.ge(o.get(t+1),o.get(t))),n.Std.and(n.Std.gt(o.get(t-1),o.get(t)),n.Std.gt(o.get(t-2),o.get(t))))),n.Std.and(n.Std.and(n.Std.and(n.Std.gt(o.get(t+6),o.get(t)),n.Std.gt(o.get(t+5),o.get(t))),n.Std.and(n.Std.eq(o.get(t+4),o.get(t)),n.Std.ge(o.get(t+3),o.get(t)))),n.Std.and(n.Std.and(n.Std.eq(o.get(t+2),o.get(t)),n.Std.ge(o.get(t+1),o.get(t))),n.Std.and(n.Std.gt(o.get(t-1),o.get(t)),n.Std.gt(o.get(t-2),o.get(t)))))))),i]},this.main=function(t,e){this._context=t,this._input=e;var i=this.f_0();return[{value:i[0],offset:-2},{value:i[1],offset:-2}]}}}]},function(t,e,i){function n(){this._data=null,this._hittest=new o(o.MOVEPOINT)}var o,r,s,a;i(81),o=i(10).HitTestResult,r=i(116).LineEnd,s=i(37).distanceToSegment,a=i(27).extendAndClipLineSegment,n.prototype.setData=function(t){this._data=t},n.prototype.setHitTest=function(t){this._hittest=t},n.prototype.drawArrow=function(t,e,i,n){var o,r,s,a,l,c,h,u,d
;e.subtract(t).length()<1||(o=e.subtract(t).normalized(),r=5*n,s=o.scaled(r),a=e.subtract(s),l=o.transposed(),c=3*n,h=l.scaled(c),u=a.add(h),d=a.subtract(h),CanvasEx.drawLine(i,Math.round(u.x),Math.round(u.y),e.x,e.y),CanvasEx.drawLine(i,Math.round(d.x),Math.round(d.y),e.x,e.y))},n.prototype.extendAndClipLineSegment=function(t,e){return a(t,e,this._data.width,this._data.height,this._data.extendleft,this._data.extendright)},n.prototype.drawCircle=function(t,e,i,n){n=$.extend({fillStyle:"#000000"},n),e.save(),e.fillStyle=n.fillStyle,e.beginPath(),e.arc(t.x,t.y,i,0,2*Math.PI,!1),e.fill(),n.strokeWidth&&(e.lineWidth=n.strokeWidth,e.stroke()),e.restore()},n.prototype.draw=function(t){var e,i,n,o,r;null===this._data||this._data.points&&this._data.points.length<2||this._data.floatPoints&&this._data.floatPoints.length<2||(t.lineCap="butt",t.strokeStyle=this._data.color,t.lineWidth=this._data.linewidth,t.lineStyle=this._data.linestyle,e=this._data.floatPoints||this._data.points,i=e[0],n=e[1],this._data.overlayLineEndings?o=[$.extend(!0,{},i),$.extend(!0,{},n)]:this.drawEnds(t,[i,n]),r=this.extendAndClipLineSegment(i,n),null!==r&&this._data.linewidth>0&&CanvasEx.drawLine(t,r[0].x,r[0].y,r[1].x,r[1].y),this._data.overlayLineEndings&&this.drawEnds(t,o))},n.prototype.drawEnds=function(t,e){var i=e[0],n=e[1];switch(this._data.leftend){case r.Arrow:this.drawArrow(n,i,t,t.lineWidth);break;case r.Circle:this.drawCircle(i,t,t.lineWidth,this._data.endstyle)}switch(this._data.rightend){case r.Arrow:this.drawArrow(i,n,t,t.lineWidth);break;case r.Circle:this.drawCircle(n,t,t.lineWidth,this._data.endstyle)}},n.prototype.hitTest=function(t){var e,i,n,o,r,a;return null===this._data||this._data.points&&this._data.points.length<2?null:this._data.floatPoints&&this._data.floatPoints.length<2?null:(e=TradingView.isMobile.any()?24:3,i=this._data.floatPoints||this._data.points,n=i[0],o=i[1],r=this.extendAndClipLineSegment(n,o),null!==r&&(a=s(r[0],r[1],t),a.distance<=e)?this._hittest:null)},e.TrendLineRenderer=n},function(t,e,i){function n(t,e){this._linesMaxWidth=null,this._hittest=e||new o(o.MOVEPOINT),this._data={},this._fontSize=0,this.setData(t)}var o=i(10).HitTestResult,r=i(94).calcTextHorizontalShift,s=i(49).drawRoundRect;n.prototype.setData=function(t){var e,i,n,o=this._data,r=this.fontStyle();this._data=t,this._fontSize=t.fontsize||t.fontSize||30,e=t.text===o.text,i=t.wordWrapWidth===o.wordWrapWidth,n=r===this.fontStyle(),e&&i&&n?(this._data.lines=o.lines,this._lines=o.lines):(this._linesMaxWidth=null,t.lines=this.wordWrap(t.text,t.wordWrapWidth),this._lines=t.lines)},function(){function t(){var t=document.createElement("canvas");t.width=0,t.height=0,e=t.getContext("2d"),t=null}var e;n.prototype.setPoints=function(t,e){this._data.points=t,this._hittest=e||new o(o.MOVEPOINT)},n.prototype._getLinesMaxWidth=function(){var i,n;if(null!==this._linesMaxWidth)return this._linesMaxWidth;if(e||t(),e.textBaseline="alphabetic",e.font=this.fontStyle(),this._data.wordWrapWidth)return this._data.wordWrapWidth;for(i=0,
n=0;n<this._lines.length;n++)i=Math.max(i,e.measureText(this._lines[n]).width);return this._linesMaxWidth=i,i},n.prototype.measure=function(){var t=this._fontSize,e=this._getLinesMaxWidth(),i=t*this._lines.length,n=~~(t/6);return this._data.backgroundHorzInflate&&(e+=2*this._data.backgroundHorzInflate),this._data.backgroundVertInflate&&(i+=2*this._data.backgroundVertInflate),e=Math.ceil(e+2*n),i=Math.ceil(i+2*n),e%2!=0&&e++,this._data.padding&&(i+=this._data.padding),{width:e,height:i,textBgPadding:n}},n.prototype.wordWrap=function(i,n,o){var r,s,a,l,c,h,u,d,p;if(e||t(),n=+n,i+="",r=i.split(/[^\S\r\n]*(?:\r\n|\r|\n|$)/),r[r.length-1]||r.pop(),!isFinite(n)||n<=0)return r;for(e.font=o||this.fontStyle(),s=[],a=0;a<r.length;a++)if(l=r[a],(c=e.measureText(l).width)<=n)s.push(l);else for(h=l.split(/([-\)\]\},.!?:;])|(\s+)/);h.length;){if((u=~~(n/c*(h.length+2)/3))<=0||e.measureText(h.slice(0,3*u-1).join("")).width<=n)for(;e.measureText(h.slice(0,3*(u+1)-1).join("")).width<=n;)u++;else for(;u>0&&e.measureText(h.slice(0,3*--u-1).join("")).width>n;);if(u>0)s.push(h.slice(0,3*u-1).join("")),h.splice(0,3*u);else{if(d=h[0]+(h[1]||""),p=1===p?1:~~(n/e.measureText(d)*d.length),e.measureText(d.substr(0,p)).width<=n)for(;e.measureText(d.substr(0,p+1)).width<=n;)p++;else for(;p>1&&e.measureText(d.substr(0,--p)).width>n;);p<1&&(p=1),s.push(d.substr(0,p)),h[0]=d.substr(p),h[1]=""}if((c=e.measureText(h.join("")).width)<=n){s.push(h.join(""));break}}return s}}(),n.prototype._x=function(){return this._data.points[0].x+this._data.offsetX},n.prototype._y=function(){var t,e=this._fontSize*this._lines.length;switch(this._data.scaleY&&(e*=this._data.scaleY),t=this._data.points[0].y+this._data.offsetY+e,this._data.vertAlign){case"top":break;case"bottom":t-=e;break;case"middle":t-=e/2}return t},n.prototype.fontStyle=function(){return(this._data.bold?"bold ":"")+(this._data.italic?"italic ":"")+this._fontSize+"px "+this._data.font},n.prototype.draw=function(t){var e,i,n,o,a,l,c,h,u,d,p,_,f,m,g,y;if(0!==this._data.points.length){switch(e=this._x(),i=this._y(),n=this._fontSize,this._data.scaleY&&(n*=this._data.scaleY),i-=n*(this._lines.length-1),t.textBaseline="alphabetic",t.font=this.fontStyle(),this._data.horzAlign){case"left":t.textAlign="start";break;case"right":t.textAlign="end";break;case"center":t.textAlign="center"}if(t.translate(e+.5,i+.5),e=0,i=0,n=this._fontSize,this._data.scaleX&&this._data.scaleY&&(o=Math.min(this._data.scaleX,this._data.scaleY),t.scale(o,o)),a=this._getLinesMaxWidth(),l=r(t,a),c=0,this._data.backgroundColor||this._data.borderColor||this._data.highlightBorder&&this._data.wordWrapWidth){switch(h=e,this._data.horzAlign){case"left":break;case"right":h-=a;break;case"center":h-=a/2}u=n*this._lines.length,d=~~(n/6),this._data.backgroundHorzInflate&&(a+=2*this._data.backgroundHorzInflate,h-=this._data.backgroundHorzInflate),this._data.backgroundVertInflate&&(u+=2*this._data.backgroundVertInflate,i+=this._data.backgroundVertInflate),p={x:Math.floor(h-d),y:Math.floor(i-n),w:Math.ceil(a+2*d),h:Math.ceil(u+2*d)},p.w%2!=0&&p.w++,
this._data.padding&&(p.h+=this._data.padding,c=this._data.padding),this._data.backgroundVertInflate&&(i+=this._data.backgroundVertInflate),this._data.backgroundRoundRect?(s(t,p.x,p.y,p.w,p.h,this._data.backgroundRoundRect),this._data.backgroundColor&&(t.fillStyle=this._data.backgroundColor,t.fill()),this._data.borderColor&&(_=~~Math.max(n/12,1),t.strokeStyle=this._data.borderColor,t.lineWidth=_,t.stroke())):(this._data.backgroundColor&&(t.fillStyle=this._data.backgroundColor,t.fillRect(p.x,p.y,p.w,p.h)),this._data.borderColor?(_=~~Math.max(n/12,1),t.strokeStyle=this._data.borderColor,t.lineWidth=_,t.strokeRect(p.x-_/2,p.y-_/2,p.w+_,p.h+_)):this._data.highlightBorder&&(t.strokeStyle=this._data.color,t.lineWidth=1,t.beginPath(),g=[3,1],t.dashedLineTo(p.x-.5,m=p.y-.5,f=p.x+p.w+.5,m,g),t.dashedLineTo(f,m,f,m=p.y+p.h+.5,g),t.dashedLineTo(f=p.x-.5,m,p.x+p.w+.5,m,g),t.dashedLineTo(f,p.y-.5,f,m,g),t.stroke()))}for(this._data.backgroundVertInflate&&!this._data.backgroundColor&&(i+=2*this._data.backgroundVertInflate),t.fillStyle=this._data.color,this._data.forceTextAlign&&(t.textAlign=this._data.horzAlign?this._data.horzAlign:"left"),this._data.forceTextAlign||(e+=l),y=0;y<this._lines.length;y++)t.fillText(this._lines[y],e,i),i+=n+c}},n.prototype.hitTest=function(t){var e,i,n,o,r,s;return 0===this._data.points.length?null:(e=this._fontSize,this._data.scaleY&&(e*=this._data.scaleY),i=this._getLinesMaxWidth(),this._data.scaleX&&(i*=this._data.scaleX),n=this._data.points[0].x+this._data.offsetX,o=this._data.points[0].y+this._data.offsetY,"bottom"===this._data.vertAlign&&(o-=this._lines.length*this._fontSize),"middle"===this._data.vertAlign&&(o-=this._lines.length*this._fontSize/2),"right"===this._data.horzAlign?n-=i:"center"===this._data.horzAlign&&(n-=i/2),r=this._data.backgroundColor||this._data.borderColor?~~(e/6):0,s=this._data.borderColor?~~Math.max(e/12,1):0,t.x>=n-r-s&&t.x<=n+i+r+s&&t.y>=o-s&&t.y<=o+this._lines.length*this._fontSize+2*r+s?this._hittest:null)},e.TextRenderer=n},function(t,e,i){"use strict";function n(t){return t in $.fn?Promise.resolve():(s||(s=new Promise(function(t){i.e(19).then(function(e){i(394),t()}.bind(null,i)).catch(i.oe)})),s)}function o(t){return new a(t)}var r,s,a;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"LazyJqueryUI",function(){return a}),e.lazyJqueryUI=o,r=i(14),i.n(r),a=function(){function t(t){this._$elem=t}return t.prototype.draggable=function(){var t=arguments,e=this._$elem;return n("draggable").then(function(){return e.draggable.apply(e,t)})},t.prototype.resizable=function(){var t=arguments,e=this._$elem;return n("resizable").then(function(){return e.resizable.apply(e,t)})},t.prototype.sortable=function(){var t=arguments,e=this._$elem;return n("sortable").then(function(){return e.sortable.apply(e,t)})},t.prototype.datepicker=function(){var t=arguments,e=this._$elem;return n("datepicker").then(function(){return e.datepicker.apply(e,t)})},t}()},function(t,e,i){"use strict";(function(n){function o(t){return t&&t.__esModule?t:{default:t}}function r(){var t,e,i=h.width()
;for(d.width=i,d.height=h.height(),t=0;t<p.length;t++)if(i<=d.breakpoints[p[t]]){d.device!==p[t]&&(e=d.device,d.device=p[t],d.trigger("changeDevice",[p[t],e]));break}return d}var s,a,l,c,h,u,d,p;Object.defineProperty(e,"__esModule",{value:!0}),s=i(152),a=o(s),l=i(556),c=$("body"),h=$(window),u=0,d={width:null,height:null,device:null,checkDevice:r,isMobileSafari:!!navigator.userAgent.match(/Version\/[\d\.]+.*Safari/)||!!navigator.userAgent.match("CriOS"),getScrollbarWidth:function(){var t=void 0;return function(){var e,i,n,o;return void 0===t&&(e=document.createElement("div"),e.style.visibility="hidden",e.style.width="100px",e.style.msOverflowStyle="scrollbar",document.body.appendChild(e),i=e.offsetWidth,e.style.overflow="scroll",n=document.createElement("div"),n.style.width="100%",e.appendChild(n),o=n.offsetWidth,e.parentNode.removeChild(e),t=i-o),t}}(),hasScroll:function(t){return t.get(0).scrollHeight>t.height()},breakpoints:l.breakpoints,widgetbarBreakpoint:1064,setFixedBodyState:function(t){var e,i;t&&1==++u?("hidden"!==$(document.body).css("overflow").toLowerCase()&&document.body.scrollHeight>document.body.offsetHeight&&($(".widgetbar-wrap").css("right",d.getScrollbarWidth()),c.css("padding-right",parseInt(c.css("padding-right").replace("px",""))+d.getScrollbarWidth()+"px").data("wasScroll",!0)),c.addClass("i-no-scroll")):!t&&u>0&&0==--u&&(c.removeClass("i-no-scroll"),c.data("wasScroll")&&(e=c.get(0),$(".widgetbar-wrap").css("right",0),i=$(".widgetbar-wrap").width()||0,e.scrollHeight<=e.clientHeight&&(i-=d.getScrollbarWidth()),c.css("padding-right",(i<0?0:i)+"px").data("wasScroll",void 0)))}},p=Object.keys(d.breakpoints).sort(function(t,e){return d.breakpoints[t]-d.breakpoints[e]}),n.extend(d,a.default.prototype),r(),$(r),h.on("resize",r),e.default=d,t.exports=e.default}).call(e,i(100))},function(t,e,i){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),n=i(557),i.n(n),i.o(n,"TVDialogAbstract")&&i.d(e,"TVDialogAbstract",function(){return n.TVDialogAbstract}),i.o(n,"closeAllDialogs")&&i.d(e,"closeAllDialogs",function(){return n.closeAllDialogs})},,,function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 11 9" width="11px" height="9px"><path fill="none" fill-rule="evenodd" stroke-width="2" d="M1 3.22l3.415 3.496L10 1"/></svg>'},function(t,e,i){"use strict";function n(t){if(t)return function(e,i,n){function o(e,i){return i?t[e](a,i):t[e](a)}var r,s,a=$(this);return"get"===e?(r=i,"function"==typeof t[r]?o(r,n):t[r]):t[e]?a.each(function(){return o(e,s)}):a}}function o(t,e){function i(t,e,i){return void 0===i?t[e]():t[e](i)}if(t&&e)return t=""+t,function(n,o,a){var l,c,h;return"get"===n?l=o:(c=o,"object"===(void 0===n?"undefined":r(n))&&void 0===o?(c=n,n="init"):"string"!=typeof n&&(n="init")),"getInstance"===n?$(this).eq(0).data(t):"destroy"===n?(h=$(this).eq(0).data(t))?void("function"==typeof h.destroy?(i(h,"destroy",c),
$(this).eq(0).removeData(t)):s.logError("[Block Plugin] "+t+" does not support destroy command")):void console.warn("[Block Plugin] Trying to execute destroy method of "+t+" but it has not been inited"):"get"===n?(h=$(this).eq(0).data(t),h?"function"==typeof h[l]?i(h,l,a):h[l]:void console.warn("[Block Plugin] Trying to get prop or execute method of "+t+" but it has not been inited")):$(this).each(function(){var o=$(this),r=o.data(t);void 0===r&&(r=void 0===c?e(o):e(o,c),o.data(t,r)),"init"!==n&&("function"==typeof r[n]?i(r,n,c):s.logError("[Block Plugin] "+t+" does not support command "+n))})}}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=i(5).getLogger("CommonUI.CreateTVBlockPlugin");t.exports.createTvBlockPlugin=n,t.exports.createTvBlockWithInstance=o},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 13 13" width="13" height="13"><path d="M5.182 6.596l-3.889-3.889-.707-.707 1.414-1.414.707.707 3.889 3.889 3.889-3.889.707-.707 1.414 1.414-.707.707-3.889 3.889 3.889 3.889.707.707-1.414 1.414-.707-.707-3.889-3.889-3.889 3.889-.707.707-1.414-1.414.707-.707 3.889-3.889z"/></svg>'},function(t,e,i){"use strict";function n(t,e,i){return t*(1-i)+e*i}function o(t){return new l(t)}var r,s,a,l;Object.defineProperty(e,"__esModule",{value:!0}),e.doAnimate=o,r=i(0),s=i(77),a={from:0,duration:250,easing:s.easingFunc.easeOutCubic},l=function(){function t(t){var e,i=this;this._doing=!0,this._options=r.a({},a,t),e=performance.now(),window.requestAnimationFrame(function(t){i._animation(e,i._options.from,t)})}return t.prototype.stop=function(){this._doing=!1},t.prototype._animation=function(t,e,i){var o,r,s,a,l,c=this;return this._doing?(i=!i||i<1e12?performance.now():i,o=i-t,r=o>=this._options.duration||e===this._options.to,s=n(this._options.from,this._options.to,this._options.easing(o/this._options.duration)),a=r?this._options.to:s,l=a-e,this._options.onStep(l,a),r?void this._finishAnimation():void window.requestAnimationFrame(function(e){c._animation(t,a,e)})):void this._finishAnimation()},t.prototype._finishAnimation=function(){this._options.onComplete&&this._options.onComplete()},t}()},function(t,e,i){"use strict";function n(t){return void 0===t&&(t=""),'\n\t\t<div class="tv-spinner" role="progressbar">\n\t\t\t<div class="tv-spinner__spinner-layer">\n\t\t\t\t<div class="tv-spinner__background tv-spinner__width_element"></div>\n\t\t\t\t<div class="tv-spinner__circle-clipper tv-spinner__width_element tv-spinner__circle-clipper--left"></div>\x3c!--\n\t\t\t\t--\x3e<div class="tv-spinner__circle-clipper tv-spinner__width_element tv-spinner__circle-clipper--right"></div>\n\t\t\t</div>\n\t\t</div>\n\t'}var o,r,s,a,l;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"DEFAULT_SIZE",function(){return s}),e.renderSpinnerTemplate=n,i.d(e,"Spinner",function(){return l}),o=i(396),i.n(o),r=i(158),s="large",a=Object(r.parseHtmlElement)(n()),
l=function(){function t(t){this._shown=!1,this._el=a.cloneNode(!0),this.setSize(t||s)}return t.prototype.spin=function(t){return this._el.classList.add("tv-spinner--shown"),void 0===this._container&&(this._container=t,t.appendChild(this._el)),this._shown=!0,this},t.prototype.stop=function(t){return t&&void 0!==this._container&&this._container.removeChild(this._el),this._el.classList.remove("tv-spinner--shown"),this._shown=!1,this},t.prototype.setStyle=function(t){var e=this;return Object.keys(t).forEach(function(i){var n=t[i];void 0!==n&&e._el.style.setProperty(i,n)}),this},t.prototype.setSize=function(t){var e=void 0!==t?"tv-spinner--size_"+t:"";return this._el.className="tv-spinner "+e+" "+(this._shown?"tv-spinner--shown":""),this},t.prototype.getEl=function(){return this._el},t.prototype.destroy=function(){this.stop(),delete this._el,delete this._container},t}()},function(t,e,i){"use strict";var n,o,r,s;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"TimePointIndexSearchMode",function(){return r}),i.d(e,"SeriesData",function(){return s}),n=i(6),i.n(n),o=i(20),function(t){t[t.FromLeft=-1]="FromLeft",t[t.FromRight=1]="FromRight"}(r||(r={})),s=function(){function t(t){this.m_bars=new o.PlotList(t),this.m_nsBars=new o.PlotList(t)}return t.prototype.bars=function(){return this.m_bars},t.prototype.nsBars=function(){return this.m_nsBars},t.prototype.size=function(){return this.m_bars.size()+this.m_nsBars.size()},t.prototype.each=function(t){this.m_bars.each(t),this.m_nsBars.each(t)},t.prototype.clear=function(){this.m_bars.clear(),this.m_nsBars.clear(),this.lastProjectionPrice=void 0},t.prototype.isEmpty=function(){return this.m_bars.isEmpty()&&this.m_nsBars.isEmpty()},t.prototype.first=function(){return this.m_bars.isEmpty()?this.m_nsBars.first():this.m_bars.first()},t.prototype.last=function(){return this.m_nsBars.isEmpty()?this.m_bars.last():this.m_nsBars.last()},t.prototype.search=function(t,e){return this.nsBars().isEmpty()?this.bars().search(t,e):this.bars().isEmpty()?this.nsBars().search(t,e):Object(n.ensureNotNull)(this.nsBars().firstIndex())<=t?this.nsBars().search(t,e):this.bars().search(t,e)},t.prototype.valueAt=function(t){var e=this.search(t);return null!==e?e.value:null},t.prototype.plotValueToTimePointIndex=function(t,e,i){var n,o,s,a;if(i===r.FromRight)return n=function(i,n){var o=n[e];return void 0!==o&&null!==o&&t>=o},null!==(o=this.m_bars.findLast(n))?o.index:(s=this.m_nsBars.findLast(n),null!==s?s.index:this.m_bars.firstIndex());if(i===r.FromLeft)return a=function(i,n){var o=n[e];return void 0!==o&&null!==o&&t<=o},null!==(o=this.m_bars.findFirst(a))?o.index:(s=this.m_nsBars.findFirst(a),null!==s?s.index:this.m_bars.lastIndex());throw Error("plotValueToTimePointIndex: unsupported search mode")},t}()},function(t,e,i){"use strict";var n,o;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"LimitedPrecisionNumericFormatter",function(){return o}),n=i(12),i.n(n),o=function(){function t(t){void 0===t&&(t=1),this._precision=t}return t.prototype.format=function(t){var e,i
;return Object(n.isNumber)(t)||(t=parseFloat(t)),e=t.toFixed(this._precision),i=Math.pow(10,-this._precision),Math.max(parseFloat(e),i)+""},t}()},function(t,e,i){"use strict";var n,o,r;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"HEADER_TOOLBAR_HEIGHT_EXPANDED",function(){return o}),i.d(e,"HEADER_TOOLBAR_HEIGHT_COLLAPSED",function(){return r}),n=i(547),i.n(n),o=parseInt(n["css-value-header-toolbar-height"]),r=3},function(t,e,i){t.exports=i(580)},function(t,e,i){"use strict";function n(t,e,n,s){var a=Object(o.loadPropertyPages)(),l=function(o,r){i.e(20).then(function(r){a.then(function(){var r=i(427),a=new r(t,e,s);a.show(n),o(a)})}.bind(null,i)).catch(r)};return Object(r.retries)(function(t){return new Promise(l)},2)}var o,r;Object.defineProperty(e,"__esModule",{value:!0}),e.showEditObjectDialog=n,o=i(2),i.n(o),r=i(161)},function(t,e){},function(t,e,i){"use strict";function n(t){for(var e=0;e<p.length;e++)if(p[e].name===t)return e;return-1}function o(t){if(!_)for(var e=p.length-1;e>=0&&!0!==p[e].func(t);e--);}function r(t){t.addEventListener("keypress",o,!1)}function s(t,e){var i={name:t,func:e},o=n(i.name);o>-1?p[o]=i:p.push(i)}function a(t){p.forEach(function(e,i){e.name===t&&p.splice(i,1)})}function l(t,e){var i={name:t,func:e},o=n(i.name);o>-1&&p.splice(o,1),p.unshift(i)}function c(){return _?null:_=Object(d.randomHashN)(4)}function h(t){if(t!==_)throw Error("Lock id is outdated");_=null}var u,d,p,_;Object.defineProperty(e,"__esModule",{value:!0}),e.listen=r,e.registerListener=s,e.removeListener=a,e.pushBackListener=l,e.disable=c,e.enable=h,u=i(14),i.n(u),d=i(22),p=[],_=null,r(window)},function(t,e,i){"use strict";var n,o,r,s,a;i.d(e,"a",function(){return s}),i.d(e,"b",function(){return a}),n=i(0),o=i(8),r=i.n(o),s=function(){function t(t,e,i,n,o){var s=this;this._onChange=new r.a,this._handleChange=function(){s._onChange.fire(s.get())},this._crossTabEvents=t,this._jsonKeyValueStore=e,this.CROSSTAB_EVENT_NAME=i,this.JSON_STORE_KEY=n,this.defaultStoreValue=this._serialize(o),this._subscribe()}return t.prototype.get=function(){var t=this._jsonKeyValueStore.getJSON(this.JSON_STORE_KEY,this.defaultStoreValue);return this._deserialize(t)},t.prototype.set=function(t,e){var i=this._serialize(t);this._jsonKeyValueStore.setJSON(this.JSON_STORE_KEY,i,e),this._crossTabEvents.emit(this.CROSSTAB_EVENT_NAME),this._onChange.fire(t)},t.prototype.getOnChange=function(){return this._onChange},t.prototype.destroy=function(){this._unsubscribe(),this._onChange.destroy(),delete this._onChange},t.prototype._subscribe=function(){this._crossTabEvents.on(this.CROSSTAB_EVENT_NAME,this._handleChange),this._jsonKeyValueStore.onSync.subscribe(this,this._handleChange)},t.prototype._unsubscribe=function(){this._crossTabEvents.off(this.CROSSTAB_EVENT_NAME,this._handleChange),this._jsonKeyValueStore.onSync.unsubscribe(this,this._handleChange)},t}(),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.c(e,t),e.prototype._serialize=function(t){return t},e.prototype._deserialize=function(t){return t},e}(s)
},function(t,e,i){"use strict";function n(t){return new Promise(function(e){i.e(1).then(function(n){var o=i(78).createDialog;e(o(r.a({},a,t)))}.bind(null,i)).catch(i.oe)})}function o(t){n(t).then(function(t){return t.open()})}var r,s,a;Object.defineProperty(e,"__esModule",{value:!0}),e.createNoticeDialog=n,e.showNoticeDialog=o,r=i(0),s=i(14),i.n(s),i(9),a={width:400,destroyOnClose:!0,title:window.t("Notification"),content:window.t("You are notified"),contentWrapTemplate:'<div class="tv-dialog__section tv-dialog__section--no-border"><div class="tv-text"><p></p></div></div>',actionsWrapTemplate:'<div class="tv-dialog__section tv-dialog__section--actions tv-dialog__section--no-border">',actions:[{name:"ok",type:"primary",text:window.t("Ok"),method:"close",key:[13,32]}]}},function(t,e,i){"use strict";var n,o;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"DateFormatter",function(){return o}),n=i(13),o=function(){function t(){}return t.prototype.format=function(t){return n.customFormatters&&n.customFormatters.dateFormatter?n.customFormatters.dateFormatter.format(t):Object(n.numberToStringWithLeadingZero)(t.getUTCFullYear(),4)+"-"+Object(n.numberToStringWithLeadingZero)(t.getUTCMonth()+1,2)+"-"+Object(n.numberToStringWithLeadingZero)(t.getUTCDate(),2)},t.prototype.formatLocal=function(t){return n.customFormatters.dateFormatter?n.customFormatters.dateFormatter.formatLocal?n.customFormatters.dateFormatter.formatLocal(t):n.customFormatters.dateFormatter.format(t):Object(n.numberToStringWithLeadingZero)(t.getFullYear(),4)+"-"+Object(n.numberToStringWithLeadingZero)(t.getMonth()+1,2)+"-"+Object(n.numberToStringWithLeadingZero)(t.getDate(),2)},t}()},function(t,e,i){"use strict";function n(t){for(var e=0;e<u.length;e++)if(t===u[e].id)return!0;return!1}var o,r,s,a,l,c,h,u;for(Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"availableTimezones",function(){return u}),e.timezoneIsAvailable=n,i(9),o=i(412),r=[{id:"Etc/UTC",title:$.t("UTC")},{id:"exchange",title:$.t("Exchange")}],s=[{id:"Africa/Cairo",title:$.t("Cairo"),offset:0},{id:"Africa/Johannesburg",title:$.t("Johannesburg"),offset:0},{id:"Africa/Lagos",title:$.t("Lagos"),offset:0},{id:"America/Argentina/Buenos_Aires",title:$.t("Buenos Aires"),offset:0},{id:"America/Bogota",title:$.t("Bogota"),offset:0},{id:"America/Caracas",title:$.t("Caracas"),offset:0},{id:"America/Chicago",title:$.t("Chicago"),offset:0},{id:"America/El_Salvador",title:$.t("San Salvador"),offset:0},{id:"America/Juneau",title:$.t("Juneau"),offset:0},{id:"America/Lima",title:$.t("Lima"),offset:0},{id:"America/Los_Angeles",title:$.t("Los Angeles"),offset:0},{id:"America/Mexico_City",title:$.t("Mexico City"),offset:0},{id:"America/New_York",title:$.t("New York"),offset:0},{id:"America/Phoenix",title:$.t("Phoenix"),offset:0},{id:"America/Santiago",title:$.t("Santiago"),offset:0},{id:"America/Sao_Paulo",title:$.t("Sao Paulo"),offset:0},{id:"America/Toronto",title:$.t("Toronto"),offset:0},{id:"America/Vancouver",title:$.t("Vancouver"),offset:0},{id:"Asia/Almaty",title:$.t("Almaty"),offset:0},{
id:"Asia/Ashkhabad",title:$.t("Ashkhabad"),offset:0},{id:"Asia/Bahrain",title:$.t("Bahrain"),offset:0},{id:"Asia/Bangkok",title:$.t("Bangkok"),offset:0},{id:"Asia/Chongqing",title:$.t("Chongqing"),offset:0},{id:"Asia/Dubai",title:$.t("Dubai"),offset:0},{id:"Asia/Ho_Chi_Minh",title:$.t("Ho Chi Minh"),offset:0},{id:"Asia/Hong_Kong",title:$.t("Hong Kong"),offset:0},{id:"Asia/Jakarta",title:$.t("Jakarta"),offset:0},{id:"Asia/Jerusalem",title:$.t("Jerusalem"),offset:0},{id:"Asia/Kolkata",title:$.t("Kolkata"),offset:0},{id:"Asia/Kuwait",title:$.t("Kuwait"),offset:0},{id:"Asia/Muscat",title:$.t("Muscat"),offset:0},{id:"Asia/Qatar",title:$.t("Qatar"),offset:0},{id:"Asia/Riyadh",title:$.t("Riyadh"),offset:0},{id:"Asia/Seoul",title:$.t("Seoul"),offset:0},{id:"Asia/Shanghai",title:$.t("Shanghai"),offset:0},{id:"Asia/Singapore",title:$.t("Singapore"),offset:0},{id:"Asia/Taipei",title:$.t("Taipei"),offset:0},{id:"Asia/Tehran",title:$.t("Tehran"),offset:0},{id:"Asia/Tokyo",title:$.t("Tokyo"),offset:0},{id:"Atlantic/Reykjavik",title:$.t("Reykjavik"),offset:0},{id:"Australia/Adelaide",title:$.t("Adelaide"),offset:0},{id:"Australia/Brisbane",title:$.t("Brisbane"),offset:0},{id:"Australia/Sydney",title:$.t("Sydney"),offset:0},{id:"Europe/Athens",title:$.t("Athens"),offset:0},{id:"Europe/Belgrade",title:$.t("Belgrade"),offset:0},{id:"Europe/Berlin",title:$.t("Berlin"),offset:0},{id:"Europe/Copenhagen",title:$.t("Copenhagen"),offset:0},{id:"Europe/Helsinki",title:$.t("Helsinki"),offset:0},{id:"Europe/Istanbul",title:$.t("Istanbul"),offset:0},{id:"Europe/London",title:$.t("London"),offset:0},{id:"Europe/Luxembourg",title:$.t("Luxembourg"),offset:0},{id:"Europe/Madrid",title:$.t("Madrid"),offset:0},{id:"Europe/Moscow",title:$.t("Moscow"),offset:0},{id:"Europe/Paris",title:$.t("Paris"),offset:0},{id:"Europe/Riga",title:$.t("Riga"),offset:0},{id:"Europe/Rome",title:$.t("Rome"),offset:0},{id:"Europe/Stockholm",title:$.t("Stockholm"),offset:0},{id:"Europe/Tallinn",title:$.t("Tallinn"),offset:0},{id:"Europe/Vilnius",title:$.t("Vilnius"),offset:0},{id:"Europe/Warsaw",title:$.t("Warsaw"),offset:0},{id:"Europe/Zurich",title:$.t("Zurich"),offset:0},{id:"Pacific/Auckland",title:$.t("New Zealand"),offset:0},{id:"Pacific/Chatham",title:$.t("Chatham Islands"),offset:0},{id:"Pacific/Fakaofo",title:$.t("Tokelau"),offset:0},{id:"Pacific/Honolulu",title:$.t("Honolulu"),offset:0},{id:"Pacific/Norfolk",title:$.t("Norfolk Island"),offset:0}],a=0,l=s;a<l.length;a++)c=l[a],h=Object(o.a)(c.id),c.title="("+h.string+") "+c.title,c.offset=h.offset;s.sort(function(t,e){var i=t.offset-e.offset;return 0!==i?i:t.title.localeCompare(e.title)}),u=r.concat(s)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"LineToolBarsPatternMode",function(){return n});var n;!function(t){t[t.Bars=0]="Bars",t[t.Line=1]="Line",t[t.OpenClose=2]="OpenClose",t[t.LineOpen=3]="LineOpen",t[t.LineHigh=4]="LineHigh",t[t.LineLow=5]="LineLow",t[t.LineHL2=6]="LineHL2"}(n||(n={}))},function(t,e,i){"use strict";function n(t,e,i){var n,o,r,s,a=null,l=0
;return i=i||{},s=function(){l=!1===i.leading?0:Date.now(),a=null,r=t.apply(n,o),a||(n=o=null)},function(){var c,h=Date.now();return l||!1!==i.leading||(l=h),c=e-(h-l),n=this,o=arguments,c<=0||c>e?(a&&(clearTimeout(a),a=null),l=h,r=t.apply(n,o),a||(n=o=null)):a||!1===i.trailing||(a=setTimeout(s,c)),r}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n,t.exports=e.default},function(t,e,i){"use strict";var n,o,r,s,a,l,c;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"isDrawingToolbarVisible",function(){return c}),n=i(26),i.n(n),o=i(4),i.n(o),r=i(15),s=i.n(r),a=!o.enabled("hide_left_toolbar_by_default"),l=n.getBool("ChartDrawingToolbarWidget.visible",a),c=new s.a(l)},function(t,e){t.exports={inputWrapper:"inputWrapper-6bNZbTW4-",textInput:"textInput-3WRWEmm7-",error:"error-v0663AtN-",success:"success-7iP8kTY5-",textInputLeftDirection:"textInputLeftDirection-mlAXPh8V-",xsmall:"xsmall-3Ah_Or2--",small:"small-2bmxiJCE-",large:"large-1JDowW2I-",iconed:"iconed-3ZQvxTot-",inputIcon:"inputIcon-W_Bse-a1-",clearable:"clearable-2tabt_rj-",clearIcon:"clearIcon-389FR5J4-",grouped:"grouped-34HX1lDr-"}},function(t,e,i){"use strict";var n={};n.renderAttributes=function(t){var e,i="";for(e in t)t[e]&&(i+=" "+e+'="'+t[e]+'"');return i},n.create=function(t,e){var i=$(document.createElement(t));return e&&(e.html&&(i.html(e.html),delete e.html),i.attr(e)),i},n.validAttributes=["abbr","accept-charset","accept","accesskey","action","align","alink","alt","archive","axis","background","bgcolor","border","cellpadding","cellspacing","char","charoff","charset","checked","cite","class","classid","clear","code","codebase","codetype","color","cols","colspan","compact","content","coords","data","datetime","declare","defer","dir","disabled","enctype","face","for","frame","frameborder","headers","height","href","hreflang","hspace","http-equiv","id","ismap","label","lang","language","link","longdesc","marginheight","marginwidth","maxlength","media","method","multiple","name","nohref","noresize","noshade","nowrap","object","onblur","onchange","onclick","ondblclick","onfocus","onkeydown","onkeypress","onkeyup","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","onreset","onselect","onsubmit","onunload","profile","prompt","readonly","rel","rev","rows","rowspan","rules","scheme","scope","scrolling","selected","shape","size","span","src","standby","start","style","summary","tabindex","target","text","title","type","usemap","valign","value","valuetype","version","vlink","vspace","width"],n.validAttribute=function(t){return-1!==jQuery.inArray(t,n.validAttributes)},n.cleanAttributes=function(t){return jQuery.each(t,function(e,i){n.validAttribute(e)||delete t[e]}),t},t.exports=n},function(t,e,i){"use strict";var n,o,r;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"DateTimeFormatter",function(){return r}),n=i(155),o=i(238),r=function(){function t(t){void 0===t&&(t=!1),this._dwm=t}return t.prototype.format=function(t){var e=(new o.DateFormatter).format(t)
;return this._dwm||(e+=" "+(new n.TimeFormatter).format(t)),e},t.prototype.formatLocal=function(t){var e=(new o.DateFormatter).formatLocal(t);return this._dwm||(e+=" "+(new n.TimeFormatter).formatLocal(t)),e},t}()},function(t,e,i){"use strict";var n,o,r,s,a;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"PLACE_HOLDER",function(){return s}),i.d(e,"VolumeFormatter",function(){return a}),n=i(68),o=i(12),i.n(o),r=i(79),i.n(r),i(9),s="---",a=function(){function t(t){this.type="volume",this._numericFormatter=new n.NumericFormatter,this._fractionalValues=void 0!==t&&t>0,this._precision=t}return t.prototype.state=function(){return{precision:this._precision}},t.prototype.format=function(t){if(!Object(o.isNumber)(t))return s;var e="";return t<0&&(e="-",t=-t),t>=1e100?window.t("N/A"):(!this._fractionalValues||t>=995?t=Math.round(t):this._fractionalValues&&(t=+t.toFixed(this._precision)),t<995?e+this._formatNumber(t):t<999995?e+this._formatNumber(t/1e3)+"K":t<999999995?(t=1e3*Math.round(t/1e3),e+this._formatNumber(t/1e6)+"M"):(t=1e6*Math.round(t/1e6),e+this._formatNumber(t/1e9)+"B"))},t.prototype.parse=function(t){var e,i,n;return"---"===t?{error:"not a number",res:!1,value:NaN}:(e={K:1e3,M:1e6,B:1e9},i=t.slice(-1),e.hasOwnProperty(i)?(n=this._numericFormatter.parse(t.slice(0,-1)),Object(o.isNumber)(n)?{res:!0,value:n*e[i]}:{error:"not a number",res:!1,value:NaN}):(n=this._numericFormatter.parse(t),Object(o.isNumber)(n)?{res:!0,value:n}:{error:"not a number",res:!1,value:NaN}))},t.serialize=function(t){return t.state()},t.deserialize=function(e){return new t(e.precision)},t.prototype._formatNumber=function(t){return this._fractionalValues&&(t=Object(r.fixComputationError)(t)),this._numericFormatter.format(t).replace(/(\.[1-9]*)0+$/,function(t,e){return e})},t}()},function(t,e,i){"use strict";var n,o,r;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"HammerJSLoader",function(){return r}),n=i(0),o=i(53),r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.c(e,t),e.prototype._startLoading=function(){return i.e(37).then(i.bind(null,828))},e}(o.a)},function(t,e,i){"use strict";function n(t){var e,i;return void 0===t&&(t=location.host),e=["i18n.tradingview.com","partial.tradingview.com","www.tradingview.com","wwwcn.tradingview.com"],i=["d33t3vvu2t2yu5.cloudfront.net","dwq4do82y8xi7.cloudfront.net","s.tradingview.com","s3.tradingview.com"],-1!==e.indexOf(t)||-1!==i.indexOf(t)||t.match(/^[a-z]{2}\.tradingview\.com/)||t.match(/prod-[^.]+.tradingview.com/)?"battle":-1!==t.indexOf("tradingview.com")?"staging":t.match(/webcharts/)?"staging_local":(t.match(/^localhost(:\d+)?$/),"local")}function o(){return"local"===n()}function r(){return"battle"===n()}function s(){return!r()}Object.defineProperty(e,"__esModule",{value:!0}),e.environment=n,e.isLocal=o,e.isProd=r,e.isDebug=s},function(t,e,i){"use strict";function n(t){this._data=t,this.bars=t.bars,this._barWidth=o.optimalBarWidth(t.barSpacing),this._barBorderWidth=1}var o=i(27),r=i(10).HitTestResult;n.prototype.draw=function(t){
var e,i,n,o,r,s,a,l,c,h,u,d,p,_,f=this.bars,m=this._data.barSpacing,g=this._data.drawWick,y=this._data.drawBorder,v=this._data.wickColor,b=this._barBorderWidth,S=this._barWidth;if(t.lineCap="square",t.lineStyle=this._data.lineStyle,m<1){if(g){for(t.strokeStyle=v,t.lineWidth=1,t.beginPath(),h=f.length;h-- >0;)u=f[h],t.moveTo(u.time,u.low),t.lineTo(u.time,u.high);t.stroke()}for(t.lineWidth=1,d="",p=!1,t.beginPath(),h=f.length;h-- >0;)u=f[h],c=u.time,d!==u.color&&(p&&(t.stroke(),t.beginPath(),p=!1),t.strokeStyle=u.color,d=u.color),t.moveTo(u.time,u.open),t.lineTo(u.time,u.close),p=!0;p&&t.stroke()}else{if(f=f.slice().sort(function(t,e){return t.color>e.color?-1:t.color<e.color?1:0}),t.translate(-.5,-.5),t.lineWidth=b,g)for(_=v,t.fillStyle=v,h=f.length;h--;)u=f[h],c=u.time,e=u.open,i=u.high,n=u.low,o=u.close,u.wickColor&&u.wickColor!==_&&(t.fillStyle=u.wickColor,_=u.wickColor),a=Math.min(e,o),l=Math.max(e,o),u.hollow?(t.fillRect(c,i,1,a-i),t.fillRect(c,l,1,n-l)):t.fillRect(c,i,1,n-i);if(y)for(h=f.length;h--;)u=f[h],f[h+1]&&u.borderColor===f[h+1].borderColor||(t.fillStyle=u.borderColor),u.hollow||(c=u.time,e=u.open,o=u.close,r=Math.round(c-S),s=Math.round(c+S),a=Math.min(e,o),l=Math.max(e,o),t.fillRect(r,a,s-r+1,l-a+1));for(h=f.length;h--;)u=f[h],c=u.time,e=u.open,i=u.high,n=u.low,o=u.close,r=Math.round(c-S),s=Math.round(c+S),a=Math.min(e,o),l=Math.max(e,o),f[h+1]&&u.color===f[h+1].color||(t.strokeStyle=u.color),t.fillStyle=u.color,Math.abs(a-l)<=1&&(t.fillStyle=u.borderColor),u.hollow?(t.translate(-.5,-.5),t.strokeRect(r+1,a+1,s-r,l-a),t.translate(.5,.5)):(y&&(r+=1,a+=1,s-=1,l-=1),t.fillRect(r,a,s-r+1,l-a+1))}},n.prototype.hitTest=function(t){var e,i,n,s,a=this.bars,l=.5*this._data.barSpacing;if(0===a.length)return null;if(t.x<a[0].time-l)return null;if(t.x>a[a.length-1].time+l)return null;for(e=null,i=0;i<a.length;++i)if(n=a[i],t.x<=n.time+l){e=n;break}return s=o.selectionTolerance(this._barBorderWidth),e&&e.high-s<=t.y&&t.y<=e.low+s?this._data.hittest||new r(r.REGULAR):null},e.PaneRendererCandles=TradingView.PaneRendererCandles=n},function(t,e,i){"use strict";var n,o;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"ScaleType",function(){return n}),i.d(e,"plotShapesData",function(){return o}),i(9),function(t){t[t.Right=0]="Right",t[t.Left=1]="Left",t[t.None=2]="None"}(n||(n={})),o={shape_arrow_down:{guiName:$.t("Arrow Down"),id:"shape_arrow_down",paneRendererClass:"PaneRendererArrowDown",pineName:"shape.arrowdown"},shape_arrow_up:{guiName:$.t("Arrow Up"),id:"shape_arrow_up",paneRendererClass:"PaneRendererArrowUp",pineName:"shape.arrowup"},shape_circle:{guiName:$.t("Circle"),id:"shape_circle",paneRendererClass:"PaneRendererCircleShape",pineName:"shape.circle"},shape_cross:{guiName:$.t("Cross"),id:"shape_cross",paneRendererClass:"PaneRendererCrossShape",pineName:"shape.cross"},shape_diamond:{guiName:$.t("Diamond"),id:"shape_diamond",paneRendererClass:"PaneRendererDiamond",pineName:"shape.diamond"},shape_flag:{guiName:$.t("Flag"),id:"shape_flag",paneRendererClass:"PaneRendererFlagShape",pineName:"shape.flag"},
shape_label_down:{guiName:$.t("Label Down"),id:"shape_label_down",paneRendererClass:"PaneRendererLabelDown",pineName:"shape.labeldown"},shape_label_up:{guiName:$.t("Label Up"),id:"shape_label_up",paneRendererClass:"PaneRendererLabelUp",pineName:"shape.labelup"},shape_square:{guiName:$.t("Square"),id:"shape_square",paneRendererClass:"PaneRendererSquare",pineName:"shape.square"},shape_triangle_down:{guiName:$.t("Triangle Down"),id:"shape_triangle_down",paneRendererClass:"PaneRendererTriangleApexDown",pineName:"shape.triangledown"},shape_triangle_up:{guiName:$.t("Triangle Up"),id:"shape_triangle_up",paneRendererClass:"PaneRendererTriangleApexUp",pineName:"shape.triangleup"},shape_xcross:{guiName:$.t("X Cross"),id:"shape_xcross",paneRendererClass:"PaneRendererXCross",pineName:"shape.xcross"}}},function(t,e,i){"use strict";var n,o,r,s;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"MarkLocation",function(){return n}),i.d(e,"HAlign",function(){return o}),i.d(e,"VAlign",function(){return r}),i.d(e,"LineStyle",function(){return s}),function(t){t.AboveBar="AboveBar",t.BelowBar="BelowBar",t.Top="Top",t.Bottom="Bottom",t.Right="Right",t.Left="Left",t.Absolute="Absolute",t.AbsoluteUp="AbsoluteUp",t.AbsoluteDown="AbsoluteDown"}(n||(n={})),function(t){t.Left="left",t.Center="center",t.Right="right"}(o||(o={})),function(t){t.Top="top",t.Middle="middle",t.Bottom="bottom"}(r||(r={})),function(t){t[t.Solid=0]="Solid",t[t.Dotted=1]="Dotted",t[t.Dashed=2]="Dashed"}(s||(s={}))},,function(t,e,i){"use strict";var n,o;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"BarsRange",function(){return o}),n=i(6),i.n(n),o=function(){function t(t,e){Object(n.assert)(t<=e,"The last bar in the bars range should be greater than or equal to the first bar"),this._firstBar=t,this._lastBar=e}return t.prototype.firstBar=function(){return this._firstBar},t.prototype.lastBar=function(){return this._lastBar},t.prototype.count=function(){return this._lastBar-this._firstBar+1},t.prototype.contains=function(t){return this._firstBar<=t&&t<=this._lastBar},t.prototype.equals=function(t){return this._firstBar===t.firstBar()&&this._lastBar===t.lastBar()},t}()},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,i){"use strict";!function(t){if(document.createElement("canvas")&&document.createElement("canvas").getContext){var e=function(e){var i=e.backingStorePixelRatio||e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return(t.devicePixelRatio||1)/i}(document.createElement("canvas").getContext("2d"));e<=1||(t.hidpiCanvasRatio=e,function(t){var i,n,o=function(t,e){for(var i in t)t.hasOwnProperty(i)&&e(t[i],i)},r={fillRect:"all",clearRect:"all",strokeRect:"all",moveTo:"all",lineTo:"all",arc:[0,1,2],arcTo:"all",bezierCurveTo:"all",isPointinPath:"all",isPointinStroke:"all",quadraticCurveTo:"all",rect:"all",translate:"all",createRadialGradient:"all",createLinearGradient:"all",drawImagePatchedSource:[1,2,3,4]};t.drawImagePatchedSource=t.drawImage,i=t.drawImage,
t.drawImagePatchedSourceAndDest=function(t){var n,o=Array.prototype.slice.call(arguments);for(n=1;n<o.length;++n)o[n]&&(o[n]*=e);return o.length>5&&("width"in t&&(o[3]=Math.min(t.width,Math.max(1,o[3]))),"height"in t&&(o[4]=Math.min(t.height,Math.max(1,o[4])))),i.apply(this,o)},o(r,function(i,n){var o=t[n];t[n]=function(){var t,n;if("all"===i)for(n=[],t=arguments.length;0<t--;)n[t]=arguments[t]*e;else for(n=Array.prototype.slice.call(arguments),t=i.length;0<t--;)n[i[t]]&&(n[i[t]]=n[i[t]]*e);return o.apply(this,n)}}),t.drawImage=function(t){return function(){return arguments[0]instanceof HTMLCanvasElement?t.drawImagePatchedSourceAndDest.apply(this,arguments):t.drawImagePatchedSource.apply(this,arguments)}}(t),n=/(\d+(?:\.\d+)?)(px|em|rem|pt)/g,t.fillText=function(t){return function(){var i=Array.prototype.slice.call(arguments);i[1]*=e,i[2]*=e,this.font=this.font.replace(n,function(t,i,n){return i*e+n}),t.apply(this,i),this.font=this.font.replace(n,function(t,i,n){return i/e+n})}}(t.fillText),t.strokeText=function(t){return function(){var i=Array.prototype.slice.call(arguments);i[1]*=e,i[2]*=e,this.font=this.font.replace(n,function(t,i,n){return i*e+n}),t.apply(this,i),this.font=this.font.replace(n,function(t,i,n){return i/e+n})}}(t.strokeText)}(CanvasRenderingContext2D.prototype),function(t){t.getContext=function(t){return function(i){var n=t.call(this,i);return"2d"===i&&this.width!==Math.floor(parseInt(this.style.width)*e)&&(this.style.height=this.height+"px",this.style.width=this.width+"px",this.width*=e,this.height*=e),n}}(t.getContext)}(HTMLCanvasElement.prototype))}}(window)},function(t,e,i){"use strict";function n(t){var e,i;if(3===t.nodeType&&t.data.trim())return t;if(t.childNodes)for(e=t.childNodes.length;e--;)if(i=n(t.childNodes[e]))return i;return null}function o(t,e){var i,n=e.parentNode;n&&(i=e.nextSibling,i?n.insertBefore(t,i):n.appendChild(t))}function r(t){var e,i,r,s=n(t);if(s){if(e=s.data,s.parentNode&&s.parentNode.tagName&&"sup"===s.parentNode.tagName.toLowerCase())return;i=/^([^]*)(\S)(\s*)$/.exec(e),i&&(s.data=i[1],r=document.createElement("sup"),r.textContent=i[2],o(r,s),i[3]&&o(document.createTextNode(i[3]),r))}}e.a=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"LineToolPitchforkStyle",function(){return n});var n;!function(t){t[t.Original=0]="Original",t[t.Schiff=1]="Schiff",t[t.Inside=2]="Inside",t[t.Schiff2=3]="Schiff2"}(n||(n={}))},function(t,e,i){"use strict";function n(t,e){i.e(25).then(i.bind(null,819)).then(function(i){new i.ChangeIntervalDialog(t).show(e)})}Object.defineProperty(e,"__esModule",{value:!0}),e.showChangeIntervalDialog=n},function(t,e,i){"use strict";var n=i(42),o=i(12).parseJSONorNot,r=i(5).getLogger("Chart.SaveloadAdapter.Library"),s=function(){var t,e,i,s,a={},l=null;return a.setCustomAdapter=function(t){l=t,r.logNormal("Use custom save-load adapter")},a.initialize=function(n,o,r,a){t=n,e=o,i=r,s=a},a.updateUser=function(t){e=t},a.getCharts=function(n,a){function c(t){t=t.map(function(t){return{id:t.id,name:t.name,image_url:t.id,
modified_iso:t.timestamp,short_symbol:t.symbol,interval:t.resolution}}),n(t)}return l?void l.getAllCharts().then(c).catch(a):$.ajax({url:"{0}/{1}/charts?client={2}&user={3}".format(i,encodeURIComponent(s),encodeURIComponent(t),encodeURIComponent(e)),type:"GET",crossDomain:!0}).done(function(t){var e=o(t);if("ok"!==e.status)return r.logWarn("Charts list request failed: "+e.message),void a();c(e.data)}).fail(a)},a.removeChart=function(n,a){if(l)return void l.removeChart(n).then(a);$.ajax({url:"{0}/{1}/charts?client={2}&user={3}&chart={4}".format(i,encodeURIComponent(s),encodeURIComponent(t),encodeURIComponent(e),encodeURIComponent(n)),type:"DELETE",crossDomain:!0}).done(function(t){var e=o(t);"ok"!==e.status&&r.logWarn("Chart delete request failed: "+e.message),a()})},a.saveChart=function(n,a,c,h,u,d,p){var _,f=u.id.value(),m={name:n,content:JSON.stringify(h),symbol:a,resolution:c};if(l)return m.id=f,void l.saveChart(m).then(d).catch(p);_="{0}/{1}/charts?client={2}&user={3}".format(i,encodeURIComponent(s),encodeURIComponent(t),encodeURIComponent(e)),void 0!==f&&null!==f&&(_+="&chart="+encodeURIComponent(f)),$.ajax({url:_,data:m,type:"POST",crossDomain:!0}).done(function(t){var e=o(t);if("ok"!==e.status)return r.logWarn("Chart save request failed: "+e.message),void p();d(e.id)}).fail(function(){p()})},a.getChartContent=function(n,a,c){function h(t){var e=JSON.parse(t);return e.uid=n.id,e}if(l)return void l.getChartContent(n.id).then(function(t){var e=h(t);a(e)}).catch(c);$.ajax({url:"{0}/{1}/charts?client={2}&user={3}&chart={4}".format(i,encodeURIComponent(s),encodeURIComponent(t),encodeURIComponent(e),encodeURIComponent(n.id)),type:"GET",crossDomain:!0}).done(function(t){var e,i=o(t);if("ok"!==i.status)return void r.logWarn("Chart load request failed: "+i.message);e=h(i.data.content),a(e)}).fail(function(){c&&c()})},a.loadChart=function(t){a.getChartContent(t,function(t){n.emit("chart_load_requested",t)},function(){r.logWarn("Error loading chart")})},a.removeStudyTemplate=function(n,a){if(l)return void l.removeStudyTemplate({name:n}).then(a);$.ajax({url:"{0}/{1}/study_templates?client={2}&user={3}&template={4}".format(i,encodeURIComponent(s),encodeURIComponent(t),encodeURIComponent(e),encodeURIComponent(n)),type:"DELETE",crossDomain:!0}).done(function(t){var e=o(t);"ok"!==e.status&&r.logWarn("Chart delete request failed: "+e.message),a()})},a.getStudyTemplateContent=function(n,r){if(l)return void l.getStudyTemplateContent({name:n}).then(function(t){r({content:t})});$.ajax({url:"{0}/{1}/study_templates?client={2}&user={3}&template={4}".format(i,encodeURIComponent(s),encodeURIComponent(t),encodeURIComponent(e),encodeURIComponent(n)),type:"GET",crossDomain:!0}).done(function(t){r(o(t).data)})},a.saveStudyTemplate=function(n,a){var c={name:n.name,content:n.content};if(l)return void l.saveStudyTemplate(c).then(a.bind(null,{error:""})).catch(function(t){a({error:null!=t?""+t:"error"})});$.ajax({url:"{0}/{1}/study_templates?client={2}&user={3}".format(i,encodeURIComponent(s),encodeURIComponent(t),encodeURIComponent(e)),
type:"POST",crossDomain:!0,data:c}).done(function(t){var e=o(t);"ok"!==e.status&&r.logWarn("Template save request failed: "+e.message),a({error:"ok"===e.status?"":e.status})})},a._templatesCache=null,a.getStudyTemplatesList=function(n){function c(t){t=t.map(function(t){return{is_default:!1,name:t.name}}),a._templatesCache=t,n(t)}return a._templatesCache?void n(a._templatesCache):(a._templatesCache=[],l?void l.getAllStudyTemplates().then(c):void $.ajax({url:"{0}/{1}/study_templates?client={2}&user={3}".format(i,encodeURIComponent(s),encodeURIComponent(t),encodeURIComponent(e)),type:"GET",crossDomain:!0}).done(function(t){if(null!==a._templatesCache){var e=o(t);if("ok"!==e.status)return void r.logWarn("Templates list request failed: "+e.message);c(e.data)}}))},a.invalidateStudyTemplatesList=function(){a._templatesCache=null},a}();t.exports=s},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o,r,s,a;Object.defineProperty(e,"__esModule",{value:!0}),e.SaveRenameDialog=void 0,o=function(){function t(t,e){var i,n;for(i=0;i<e.length;i++)n=e[i],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),i(554),r=i(70),s={YES:"yes",CLOSE:"close"},a=0,e.SaveRenameDialog=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.fields,o=e.confirm,r=e.title,s=void 0===r?"":r,a=e.destroyOnClose,l=void 0===a||a,c=e.modal,h=void 0!==c&&c;n(this,t),this._$form=$("<div></div>"),this._fields=i,this._appendFieldsToForm(),this._title=s,this._destroyOnClose=l,this._modal=h,this._isConfirmDialogOpened=!1,o&&(this._needCheckConfirm=!0,this._shouldShowConfirm=o.shouldShowDialog,this._getConfirmMessage=o.getMessage)}return o(t,[{key:"setField",value:function(t,e){this._fields.find(function(e){return e.name===t}).value=e}},{key:"show",value:function(){var t=this,e=this._createDialog();return new Promise(function(i){e.then(function(e){e.on("action:submit",function(e){return t._onSubmit(e,i)}),e.open(),e.on("beforeClose",t._unmountFields.bind(t)),t._fields[a].select()})})}},{key:"_appendFieldsToForm",value:function(){var t=this;this._fields.forEach(function(e){e.appendTo(t._$form)})}},{key:"_createDialog",value:function(){var t=this;return new Promise(function(e){i.e(1).then(function(n){var o=i(78).createDialog;e(o({type:t._modal?"modal":"popup",title:t._title,content:t._$form,actionsWrapTemplate:'<div class="tv-dialog__section tv-dialog__section--actions i-align_right tv-dialog__section--no-border">',width:470,destroyOnClose:t._destroyOnClose,isClickOutFn:function(){if(t._isConfirmDialogOpened)return!1},actions:[{name:"submit",type:"primary",text:$.t("Save"),key:13,addClass:"js-submit-button"},{name:"cancel",type:"default",text:$.t("Cancel"),method:"close",addClass:"js-cancel-button"}]}))}.bind(null,i)).catch(i.oe)})}},{key:"_onSubmit",value:function(t,e){var i=this,n=this._validate();if(n)t.error(n.error),
n.focus();else{if(!this._needCheckConfirm)return e(this._collectValues(),t),void t.close();Promise.resolve(this._shouldShowConfirm(this._collectValues())).then(function(n){if(!n)return e(i._collectValues(),t),void t.close();i._showConfirmDialog().then(function(n){n===s.CLOSE&&(t.focus(),i._fields[a].focus()),n===s.YES&&(e(i._collectValues(),t),t.close())})})}}},{key:"_showConfirmDialog",value:function(){var t=this;return new Promise(function(e){Promise.resolve(t._getConfirmMessage(t._collectValues())).then(function(i){t._isConfirmDialogOpened=!0,(0,r.createConfirmDialog)({type:"modal",content:i}).then(function(i){i.on("action:yes",function(t){e(s.YES),t.close()}),i.on("afterClose",function(){e(s.CLOSE),t._isConfirmDialogOpened=!1}),i.open()})})})}},{key:"_validate",value:function(){return this._fields.find(function(t){return!t.valid})}},{key:"_collectValues",value:function(){return this._fields.reduce(function(t,e){return t[e.name]=e.value,t},{})}},{key:"_unmountFields",value:function(){this._fields.forEach(function(t){t.unmount&&t.unmount()})}}]),t}()},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o;Object.defineProperty(e,"__esModule",{value:!0}),o=function(){function t(t,e){var i,n;for(i=0;i<e.length;i++)n=e[i],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),e.InputField=function(){function t(e){var i=e.label,o=e.name,r=e.maxLength,s=e.error,a=void 0===s?"":s;n(this,t),this._name=o,this._$field=$('<label class="tv-rename-chart-dialog__field">\n\t\t\t\t<span class="tv-rename-chart-dialog__label">'+i+'</span>\n\t\t\t\t<input class="tv-control-input" type="text" name="'+o+'" maxlength="'+r+'"/>\n\t\t\t</label>'),this._$input=this._$field.find("input"),this._error=a}return o(t,[{key:"appendTo",value:function(t){t.append(this._$field)}},{key:"focus",value:function(){return this._$input.focus()}},{key:"select",value:function(){return this.focus().select()}},{key:"value",set:function(t){this._$input.val(t)},get:function(){return this._$input.val()}},{key:"name",get:function(){return this._name}},{key:"valid",get:function(){return!!this._$input.val().trim()}},{key:"error",set:function(t){this._error=t},get:function(){return this._error}}]),t}()},function(t,e,i){"use strict";var n,o,r;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"ChartChangesWatcher",function(){return r}),n=i(8),o=i.n(n),r=function(){function t(t,e,i){this._hasChanges=!1,this._undoHistory=t,this._chartSaver=e,this._globalEvents=i,this._onValueChanged=new o.a,this._subscribe()}return t.prototype.destroy=function(){this._unsubscribe(),this._onValueChanged.destroy()},t.prototype.hasChanges=function(){return this._hasChanges},t.prototype.getOnChange=function(){return this._onValueChanged},t.prototype._subscribe=function(){this._globalEvents.subscribe("chart_loaded",this._handleChartLoaded,this),
this._undoHistory.undoStack().onChange().subscribe(this,this._handleChangeUndoStack),this._chartSaver.chartSaved().subscribe(this,this._handleChartSaved)},t.prototype._unsubscribe=function(){this._globalEvents.unsubscribe("chart_loaded",this._handleChartLoaded,this),this._undoHistory.undoStack().onChange().unsubscribe(this,this._handleChangeUndoStack),this._chartSaver.chartSaved().unsubscribe(this,this._handleChartSaved)},t.prototype._setChanges=function(t){this._hasChanges=t,this._onValueChanged.fire(t)},t.prototype._handleChartLoaded=function(){this._setChanges(!1)},t.prototype._handleChangeUndoStack=function(){var t=this._undoHistory.undoStack().head();t&&!t.customFlag("doesnt_affect_save")&&this._setChanges(!0)},t.prototype._handleChartSaved=function(t){t&&this._setChanges(!1)},t}()},function(t,e,i){"use strict";function n(t,e){o.enabled("saveload_requires_authentication")?window.runOrSignIn(t,e):t()}var o;e.a=n,o=i(4),i.n(o)},function(t,e,i){"use strict";function n(t){var e,i=[],o=t.m_items;for(e=0;e<o.length;e++)o[e]._menu&&(i.push(o[e]._menu),i=i.concat(n(o[e]._menu)));return i}function o(t,e,i){var n,o;this.options={},this._parentMenuItem=i,$.extend(this.options,e),this.options.class&&(this.options.attributes.class=this.options.class),this.jqMenu=null,this.m_wrapper=null,this.m_items=[];for(n in t)o=t[n],this.addItem(o)}var r,s,a,l,c,h,u,d;i(97),r=i(305),s=i(30).ActionPlaceholder,a=i(582),l=a.Item,c=a.ItemPlaceholder,h=i(244),u=i(36).IS_RTL,d=i(583).setOffset,o.prototype.addItem=function(t){var e;return e=t instanceof s?new c(t,this):new l(t,this),this.m_items.push(e),e},o.renderItem=function(t,e){t.append(e.render(t))},o.prototype.closeOtherSubmenus=function(t){for(var e=0;e<this.m_items.length;++e)this.m_items[e].highlight(!1),this.m_items[e]._menu&&(this.m_items[e]._menu.destroy(),this.m_items[e]._menu=null)},o.prototype.isShown=function(){return null!==this.jqMenu},o.prototype.render=function(){var t,e,i,n=this.getAttributes();if(this._parentMenuItem){t=$("<table>"),this.jqMenu=t,t.attr("cellspacing","0"),t.attr("cellpadding","0"),t.addClass("context-menu"),t.addClass("submenu");for(e in this.m_items)i=this.m_items[e],o.renderItem(t,i)}else{t=h.create(r.MENU_TAG,n),this.jqMenu=t;for(e in this.m_items)i=this.m_items[e],o.renderItem(t,i)}return this.jqMenu},o.prototype.getAttributes=function(){var t={},e=["context-menu"];return this.options.attributes&&this.options.attributes.class&&e.push(this.options.attributes.class),t.cellspacing=0,t.cellpadding=0,t.class=e.join(),t},o.prototype.deploy=function(t,e){var i,o=this,r=t.target&&t.target.ownerDocument||document,s=this.wrapper();return this.jqMenu=s.append(this.render()),e?($(e).data("submenu",this.jqMenu),$(r.body).append(this.jqMenu),this.jqMenu.data("parent-menu",e),this.jqMenu.data("parent-item",t.currentTarget)):($(r.body).append(this.jqMenu),i=function(t){var e,s;if(!o.m_wrapper[0].contains(t.target)){for(e=n(o),s=0;s<e.length;s++)if(e[s].m_wrapper[0].contains(t.target))return;o.hide(),r.removeEventListener("mousedown",i,!1),
r.removeEventListener("touchstart",i,!1)}},r.addEventListener("mousedown",i,!1),r.addEventListener("touchstart",i,!1)),this.jqMenu.contextMenu(function(t){return!1}),this._setCoords(t),this.jqMenu},o.prototype.show=function(t,e){this.deploy(t,e).show()},o.prototype.hide=function(){this.isShown()&&this.destroy()},o.prototype.destroy=function(){this.m_items.forEach(function(t){t._menu&&t._menu.destroy()}),this.jqMenu&&(this.jqMenu.remove(),this.jqMenu=null),this.m_wrapper.empty()},o.prototype._setCoords=function(t){var e,i,n,o,r,s,a,l,c,h=t.target.ownerDocument,p=h.defaultView,_=5,f=this.jqMenu,m=$(this.jqMenu.data("parent-item")),g={width:$(p).width(),height:Math.min($(p).height(),$(h.body).height())},y={top:$(h).scrollTop(),left:$(h).scrollLeft()};for(this.jqMenu.css({maxWidth:g.width-2*_,maxHeight:g.height-2*_}),e={width:f.outerWidth(),height:f.outerHeight()},n=u?e.width:0,m.size()?(o=m.offset(),i={top:o.top-1,left:o.left+m.outerWidth()}):i={top:t.pageY,left:t.pageX-n},d(this.jqMenu[0],i),r=!1,s={},s.top=Math.min(i.top,g.height+y.top-e.height-_),a=u?i.left+_<y.left:i.left+e.width+_>g.width+y.left,a||this.options.reverse?u?s.left=i.left+e.width:(r=!0,s.left=i.left-e.width):s.left=i.left,l=t.target;l&&1===l.nodeType;l=l.parentNode)if("fixed"===$(l).css("position")){this.jqMenu.css("position","fixed");break}d(this.jqMenu[0],s),r&&(c=e.width-this.jqMenu.outerWidth())&&(s.left+=c,d(this.jqMenu[0],s))},o.prototype._wrapper=function(){var t=r.WRAPPER_ATTRIBUTES;return this.m_wrapper=h.create(r.WRAPPER_TAG,t),this._parentMenuItem||this.m_wrapper.addClass("topmenu"),this.m_wrapper},o.prototype.wrapper=function(t){return this.m_wrapper||this._wrapper()},t.exports=o},function(t,e,i){"use strict";t.exports={INSERT_AT_END:0,INSERT_AT_START:1,INSERT_AT_POS:2,WRAPPER_TAG:"div",WRAPPER_ATTRIBUTES:{class:"context-menu-wrapper"},MENU_TAG:"table",ITEM_ROW_TAG:"tr",ICON_CELL_TAG:"td",TEXT_CELL_TAG:"td",RIGHT_CELL_TAG:"td",SUBMENU_CELL_TAG:"td"}},function(t,e,i){"use strict";function n(t){var e,i,n,o=[];for(e=0,i=t;e<i.length;e++)n=i[e],n.canBeClosed||(n.canBeClosed=!0,o.push(n));return o}function o(t){var e,i,n,o,r,s,a,l,c,h,u,d,p={};for(e=0,i=t;e<i.length;e++)n=i[e],o=p[n.symbol],void 0===o&&(o={oldest:null,all:[]},p[n.symbol]=o),(null===o.oldest||o.oldest.date>n.date)&&(o.oldest=n),o.all.push(n);for(r=[],s=0,a=Object.keys(p);s<a.length;s++)for(l=a[s],o=Object(g.ensureDefined)(p[l]),c=0,h=o.all;c<h.length;c++)n=h[c],u=o.oldest===n,d=u!==n.canBeClosed,n.canBeClosed=u,d&&r.push(n);return r}function r(t){var e,i,n,o,r,s,a,l,c,h,u,d,p,_,f,m,y,v,b={};for(e=0,i=t;e<i.length;e++)n=i[e],o=b[n.symbol],void 0===o&&(o={},b[n.symbol]=o),r=o[n.qty],void 0===r&&(r={oldest:null,all:[]},o[n.qty]=r),(null===r.oldest||r.oldest.date>n.date)&&(r.oldest=n),r.all.push(n);for(s=[],a=0,l=Object.keys(b);a<l.length;a++)for(c=l[a],h=Object(g.ensureDefined)(b[c]),u=0,d=Object.keys(h);u<d.length;u++)for(p=d[u],_=Object(g.ensureDefined)(h[p]),f=0,m=_.all;f<m.length;f++)n=m[f],y=_.oldest===n,v=y!==n.canBeClosed,n.canBeClosed=y,v&&s.push(n);return s}function s(t){
Object(g.assert)("object"!=typeof t,"Expected not an object")}function a(t){return t.configFlags=Object.assign({},L,t.configFlags),t}function l(t,e){I.push({metainfo:a(t),createBrokerFunction:e})}function c(){return I.map(function(t){return t.metainfo})}function h(t,e){return new Promise(function(i){var n=I.filter(function(t){return t.metainfo.id===e})[0],o=new k.BrokerConnectionAdapterHost(t,n.metainfo);n.createBrokerFunction(o,function(t){i(new x(n.metainfo,t,o))})})}var u,d,p,_,f,m,g,y,v,b,S,w,P,T,C,x,k,L,I;Object.defineProperty(e,"__esModule",{value:!0}),u=i(0),i(9),d=i(4),p=function(){function t(t,e,i){var n=this;this._symbol=null,this._side=null,this._realtimeData=null,this._avgPrice=null,this._positionId=t,this._adapter=e,this._host=i,this._adapter.positionById(t).then(function(t){n._symbol=t.symbol,n._side=t.side,n._onPositionChanged(t),n._onRealtimeBinded=n._onRealtime.bind(n),n._adapter.subscribeRealtime(n._symbol,n._onRealtimeBinded),n._adapter.positionUpdate.subscribe(n,n._onPositionChanged)})}return t.prototype.stop=function(){this._symbol&&this._adapter.unsubscribeRealtime(this._symbol,this._onRealtimeBinded),this._adapter.positionUpdate.unsubscribe(this,this._onPositionChanged)},t.prototype._updatePL=function(){if(this._realtimeData&&this._realtimeData.trade&&this._avgPrice){var t=(this._realtimeData.trade-Math.abs(this._avgPrice))*(1===this._side?1:-1);this._host.plUpdate(this._positionId,t)}},t.prototype._onRealtime=function(t,e){this._realtimeData=e,this._updatePL()},t.prototype._onPositionChanged=function(t){this._avgPrice=t.avgPrice,this._updatePL()},t}(),_=i(12),f=i(8),m=i.n(f),g=i(6),y=i(82),v=function(){function t(t){this._objects={},this._started=!1,this._isObjectsRequestActual=!1,this._ordersPromise=null,this._getter=t,this.updateDelegate=new m.a,this.partialUpdateDelegate=new m.a}return t.prototype.start=function(){this._started||(this._started=!0,this._ordersPromise=this._requestObjects())},t.prototype.stop=function(){this._objects={},this._started=!1,this._ordersPromise=null,this._isObjectsRequestActual=!1},t.prototype.update=function(t,e){if(this._started){if(this._isObjectsRequestActual)return void(this._isObjectsRequestActual=!1);this._objects[t.id]=t,this._onObjectUpdated(t,e)}},t.prototype.partialUpdate=function(t,e){var i,n,o;if(this._started){if(this._isObjectsRequestActual)return void(this._isObjectsRequestActual=!1);Object(_.isObject)(t)?(i=t.id,n=t):(i=t,n=Object(g.ensure)(e)),o=this._objects[i],o&&(Object.assign(o,n),this.partialUpdateDelegate.fire(o,n))}},t.prototype.fullUpdate=function(){if(this._started)return this._isObjectsRequestActual?void(this._isObjectsRequestActual=!1):void(this._ordersPromise=this._requestObjects())},t.prototype.getObjects=function(){return this._ordersPromise||Promise.resolve(Object.values(this._objects))},t.prototype._onObjectUpdated=function(t,e){this.updateDelegate.fire(t,e)},t.prototype._onAllObjectsUpdated=function(){var t=this;this._objectsCache().forEach(function(e){return t.updateDelegate.fire(e,!0)})},t.prototype._objectsCache=function(){
return Object.values(this._objects)},t.prototype._requestObjects=function(){return u.b(this,void 0,void 0,function(){var t;return u.d(this,function(e){switch(e.label){case 0:t=[],e.label=1;case 1:return this._isObjectsRequestActual=!0,[4,this._getter()];case 2:t=e.sent(),e.label=3;case 3:if(!this._isObjectsRequestActual)return[3,1];e.label=4;case 4:return this._objects=Object(y.objectsArrayToMap)(t,"id"),this._ordersPromise=null,this._isObjectsRequestActual=!1,this._onAllObjectsUpdated(),[2,t]}})})},t}(),b=i(307),S=i(5),w=i(192),P=function(t){function e(e,i){var n=t.call(this,e)||this;return n._brokerConfigGetter=i,n}return u.c(e,t),e.prototype._onObjectUpdated=function(e,i){this._patchTrades(this._objectsCache().filter(function(t){return t.symbol===e.symbol&&0!==t.qty}),e,i),t.prototype._onObjectUpdated.call(this,e,i)},e.prototype._onAllObjectsUpdated=function(){this._patchTrades(this._objectsCache().filter(function(t){return 0!==t.qty})),t.prototype._onAllObjectsUpdated.call(this)},e.prototype._patchTrades=function(e,i,s){var a,l,c,h,u,d=this._brokerConfigGetter();for(a=d.requiresFIFOCloseTrades?d.fifoOnlyForSameQty?r:o:n,l=a(e),c=0,h=l;c<h.length;c++)u=h[c],i!==u&&t.prototype._onObjectUpdated.call(this,u,s)},e}(v),T=i(308),C=Object(S.getLogger)("Trading.BrokerConnectionAdapter"),x=function(){function t(t,e,i){var n,o=this;this.connectionStatusUpdate=new m.a,this.executionUpdate=new m.a,this.fullUpdate=new m.a,this._subscriptions={},this._lastFireResult={},this._fakeDomeSubscriptions={},this._formattersCache={},this._spreadFormattersCache={},this._quantityFormattersCache={},this._tradesCache=null,this._profitLossEmitters={},this._guiAccessor=null,this._fakePositionUpdateDelegate=null,this.config=t.configFlags,this._brokerMetainfo=this._patchMetainfo(t),this._brokerConnection=e,this._host=i,i.setBrokerConnectionAdapter(this),this._initializeConnectProtection(),this._positionsCache=e.positions?new v(function(){return e.positions?e.positions():Promise.resolve([])}):null,this._tradesCache=e.trades?new P(function(){return e.trades?e.trades():Promise.resolve([])},function(){return o.config}):null,this._ordersCache=new v(function(){return e.orders()}),n=function(t){1===t?(null!==o._positionsCache&&o._positionsCache.start(),o._ordersCache.start(),o._tradesCache&&o._tradesCache.start()):(null!==o._positionsCache&&o._positionsCache.stop(),o._ordersCache.stop(),o._tradesCache&&o._tradesCache.stop())},this.connectionStatusUpdate.subscribe(null,n),n(this.connectionStatus()),t.configFlags.supportPLUpdate||(this._brokerConnection.subscribePL=function(t){o._profitLossEmitters[t]=o._createProfitLossEmitter(t)},this._brokerConnection.unsubscribePL=function(t){var e=o._profitLossEmitters[t];e&&(e.stop(),o._profitLossEmitters[t]=null)}),t.configFlags.supportLevel2Data||(e.subscribeDOME=function(t){o._fakeSubscribeDOME(t)},e.unsubscribeDOME=function(t){o._fakeUnsubscribeDOME(t)}),t.configFlags.supportPositions||(this._fakePositionUpdateDelegate=new m.a)}return t.prototype.host=function(){return this._host},
Object.defineProperty(t.prototype,"orderUpdate",{get:function(){return this._ordersCache.updateDelegate},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"positionUpdate",{get:function(){return null===this._fakePositionUpdateDelegate?Object(g.ensure)(this._positionsCache).updateDelegate:this._fakePositionUpdateDelegate},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tradeUpdate",{get:function(){return Object(g.ensure)(this._tradesCache).updateDelegate},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"orderPartialUpdate",{get:function(){return this._ordersCache.partialUpdateDelegate},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"positionPartialUpdate",{get:function(){return null===this._fakePositionUpdateDelegate?Object(g.ensure)(this._positionsCache).partialUpdateDelegate:this._fakePositionUpdateDelegate},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tradePartialUpdate",{get:function(){return Object(g.ensure)(this._tradesCache).partialUpdateDelegate},enumerable:!0,configurable:!0}),t.prototype.onOrderUpdate=function(t,e){this._ordersCache.update(t,e)},t.prototype.onOrderPartialUpdate=function(t,e){this._ordersCache.partialUpdate(t,e)},t.prototype.onPositionUpdate=function(t,e){if(Object(g.assert)(!!this.config.supportPositions,"Broker doesn`t support positions"),0===t.qty){var i=this._lastFireResult[t.symbol];i&&delete i.PL}Object(g.ensure)(this._positionsCache).update(t,e)},t.prototype.onPositionPartialUpdate=function(t,e){Object(g.assert)(!!this.config.supportPositions,"Broker doesn`t support positions"),Object(g.ensure)(this._positionsCache).partialUpdate(t,e)},t.prototype.onTradeUpdate=function(t,e){if(Object(g.assert)(!!this.config.supportTrades,"Broker doesn`t support trades"),0===t.qty){var i=this._lastFireResult[t.symbol];i&&delete i.TradePL}Object(g.ensure)(this._tradesCache).update(t,e)},t.prototype.onTradePartialUpdate=function(t,e){Object(g.ensure)(this._tradesCache).partialUpdate(t,e)},t.prototype.onFullUpdate=function(){null!==this._positionsCache&&this._positionsCache.fullUpdate(),this._ordersCache.fullUpdate(),this._tradesCache&&this._tradesCache.fullUpdate(),this.fullUpdate.fire()},t.prototype.patchConfig=function(t){Object(T.migrateConfigFlags)(t),Object.assign(this.config,t),Object.assign(this._brokerMetainfo.configFlags,t),this._brokerMetainfo=this._patchMetainfo(this._brokerMetainfo)},t.prototype.chartContextMenuActions=function(t,e){return this._brokerConnection.chartContextMenuActions(t,e)},t.prototype.buttonDropdownActions=function(){return this._host.buttonDropdownActions()||[]},t.prototype.connectionStatus=function(){return this._brokerConnection.connectionStatus()},t.prototype.isConnected=function(){return 1===this._brokerConnection.connectionStatus()},t.prototype.signIn=function(t,e,i){return Object(S.getLogger)("Trading."+this._brokerMetainfo.id+".Connection").logNormal("Try to login with username: "+t),this._brokerConnection.signIn(t,e,i)},t.prototype.disconnect=function(){
return this._brokerConnection.disconnect()},t.prototype.currentAccount=function(){return this._brokerConnection.currentAccount?this._brokerConnection.currentAccount():""},t.prototype.currentAccountType=function(){return this._brokerConnection.currentAccountType?this._brokerConnection.currentAccountType():""},t.prototype.metainfo=function(){return this._brokerMetainfo},t.prototype.bro=function(){return this._brokerConnection},t.prototype.fireSubscription=function(t,e,i,n){if(void 0===this._lastFireResult[e]&&(this._lastFireResult[e]={Realtime:null,PL:null,Equity:null,DOME:null,TradePL:null}),Object(g.ensure)(this._lastFireResult[e])[t]={data:i,time:Date.now()},void 0!==this._subscriptions[e]){var o=Object(g.ensure)(this._subscriptions[e]);Object(g.ensure)(o[t]).forEach(function(t){return t(e,i,n)})}},t.prototype.positions=function(t){return this.config.supportPositions?(this._makeSureBrokerIsConnected(),this._positions().then(function(e){return e.filter(function(e){return void 0===t||e.symbol===t})})):Promise.resolve([])},t.prototype.disconnectWarningMessage=function(){return this._brokerConnection.disconnectWarningMessage?this._brokerConnection.disconnectWarningMessage():null},t.prototype.trades=function(t){return this._makeSureBrokerIsConnected(),Object(g.assert)(!!this.config.supportTrades,"Broker doesn`t support trades"),this._trades().then(function(e){return e.filter(function(e){return void 0===t||e.symbol===t})})},t.prototype.positionById=function(t){return this.positions().then(function(e){return e.find(function(e){return e.id===t})}).then(function(t){return Object(g.ensure)(t)})},t.prototype.tradeById=function(t){return Object(g.assert)(!!this.config.supportTrades,"Broker doesn`t support trades"),this.trades().then(function(e){return e.find(function(e){return e.id===t})}).then(function(t){return Object(g.ensure)(t)})},t.prototype.orders=function(t){var e=this;return this._makeSureBrokerIsConnected(),this._orders().then(function(i){return i.filter(function(e){return void 0===t||e.symbol===t}).map(function(t){return e._host.patchOrderUpdateTime(t)})})},t.prototype.executions=function(t){return this._makeSureBrokerIsConnected(),this._brokerConnection.executions(t)},t.prototype.orderById=function(t){var e=this;return this._makeSureBrokerIsConnected(),this._brokerConnection.orders().then(function(i){return e._host.patchOrderUpdateTime(i.filter(function(e){return e.id===t})[0])})},t.prototype.accountManagerInfo=function(){return this._brokerConnection.accountManagerInfo()},t.prototype.isTradable=function(t){return this._makeSureBrokerIsConnected(),this._brokerConnection.isTradable(t)},t.prototype.formatter=function(t){return this._makeSureBrokerIsConnected(),this._formattersCache[t]||(this._formattersCache[t]=this._brokerConnection.formatter&&this._brokerConnection.formatter(t)||this.host().defaultFormatter(t)),Object(w.makeTimeLimited)(this._formattersCache[t],1e4,"formatter not received")},t.prototype.spreadFormatter=function(t){return this._makeSureBrokerIsConnected(),
this._spreadFormattersCache[t]||(this._spreadFormattersCache[t]=this._brokerConnection.spreadFormatter&&this._brokerConnection.spreadFormatter(t)||this.host().defaultFormatter(t)),Object(w.makeTimeLimited)(this._spreadFormattersCache[t],1e4,"spreadFormatter not received")},t.prototype.quantityFormatter=function(t){return this._makeSureBrokerIsConnected(),this._quantityFormattersCache[t]||(this._quantityFormattersCache[t]=this._brokerConnection.quantityFormatter&&this._brokerConnection.quantityFormatter(t)||this.host().quantityFormatter()),Object(w.makeTimeLimited)(this._quantityFormattersCache[t],1e4,"quantityFormatter not received")},t.prototype.setGuiAccessor=function(t){this._guiAccessor=t},t.prototype.placeOrder=function(t,e){return u.b(this,void 0,void 0,function(){var i,n,o,r,s,a=this;return u.d(this,function(l){switch(l.label){case 0:return this._makeSureBrokerIsConnected(),this.config.supportCustomPlaceOrderTradableCheck?(n=!0,[3,3]):[3,1];case 1:return[4,this.isTradable(t.symbol)];case 2:n=l.sent(),l.label=3;case 3:if(!(i=n))return b.MessageDialog.show(window.t("Non-tradable symbol"),"<p>"+window.t("This symbol cannot be traded through __broker__.",{broker:this.metainfo().title})+"</p>"),[2];o=e&&this._host.silentOrdersPlacement().value(),r=this._guiAccessor&&o?this._guiAccessor.showReplayConfirmationDialog():Promise.resolve(),l.label=4;case 4:return l.trys.push([4,6,,7]),[4,r];case 5:return l.sent(),[3,7];case 6:return s=l.sent(),[2];case 7:return[2,this.processErrors(this._brokerConnection.placeOrder(t,o),o,window.t("Order rejected"),function(){a._host.trackOrderPlaced(),a._host.trackEvent("","SilentMode",o?"On":"Off")})]}})})},t.prototype.modifyOrder=function(t,e,i){this._makeSureBrokerIsConnected();var n=e&&this._host.silentOrdersPlacement().value();return this.processErrors(this._brokerConnection.modifyOrder(t,n,i),n,window.t("Failed to modify order"))},t.prototype.cancelOrder=function(t){s(t),this._makeSureBrokerIsConnected();var e=this._host.silentOrdersPlacement().value();return this.processErrors(this._brokerConnection.cancelOrder(t,e),!0,window.t("Failed to cancel order"))},t.prototype.cancelOrders=function(t,e){function i(t){return 4===t.status||3===t.status||6===t.status}var n,o=this;return this._makeSureBrokerIsConnected(),n=this._host.silentOrdersPlacement().value(),this.orders().then(function(r){var s,a=r.filter(function(n){return n.symbol===t&&(!e||n.side===e)&&i(n)});return a.length?1===a.length?o.cancelOrder(a[0].id):(s=a.map(function(t){return t.id}),o.processErrors(o._brokerConnection.cancelOrders(t,e,s,n),!0,window.t("Failed to cancel one or more orders"))):Promise.resolve()})},t.prototype.closePosition=function(t){var e,i=this;return s(t),this._makeSureBrokerIsConnected(),e=this._host.silentOrdersPlacement().value(),this.config.supportClosePosition?this.processErrors(Object(g.ensureDefined)(this._brokerConnection.closePosition).call(this._brokerConnection,t,e),e,window.t("Failed to close position")):this.positionById(t).then(function(t){var n={qty:Math.abs(t.qty),side:1===t.side?-1:1,
symbol:t.symbol,brokerSymbol:t.brokerSymbol,type:2};return i.processErrors(i._brokerConnection.placeOrder(n,e),e,window.t("Failed to close position"),function(){i._host.trackOrderPlaced()})})},t.prototype.closeTrade=function(t){s(t),this._makeSureBrokerIsConnected(),Object(g.assert)(!!this.config.supportTrades,"Broker doesn`t support trades");var e=this._host.silentOrdersPlacement().value();if(this._brokerConnection.closeTrade)return this.processErrors(this._brokerConnection.closeTrade(t,e),e,window.t("Failed to close position"));throw Error("Method closeTrade is not implemented")},t.prototype.reversePosition=function(t){var e,i=this;if(s(t),this._makeSureBrokerIsConnected(),this.metainfo().configFlags.supportMultiposition&&!this.config.supportReversePosition)throw Error("Cannot reverse position on multiposition acount");return e=this._host.silentOrdersPlacement().value(),this.config.supportReversePosition&&this._brokerConnection.reversePosition?this.processErrors(this._brokerConnection.reversePosition(t,e),e,window.t("Failed to reverse position")):this.positionById(t).then(function(t){var n=function(){var e={qty:2*Math.abs(t.qty),side:1===t.side?-1:1,symbol:t.symbol,brokerSymbol:t.brokerSymbol,type:2};return i._brokerConnection.placeOrder(e,!0)};return e?i.processErrors(n(),e,window.t("Failed to reverse position"),function(){i._host.trackOrderPlaced()}):i.processErrors(i._host.showReversePositionDialog(t,n),!1,window.t("Failed to reverse position"),function(){return i._host.trackOrderPlaced()})})},t.prototype.editPositionBrackets=function(t,e,i,n){if(this._makeSureBrokerIsConnected(),Object(g.assert)(!!this.config.supportPositionBrackets,"Broker doesn`t support brackets on positions"),this._brokerConnection.editPositionBrackets)return this.processErrors(this._brokerConnection.editPositionBrackets(t,e,i,n));throw Error("Method editPositionBrackets is not implemented")},t.prototype.editTradeBrackets=function(t,e,i,n){if(this._makeSureBrokerIsConnected(),Object(g.assert)(!!this.config.supportTradeBrackets,"Broker doesn`t support brackets on trades"),this._brokerConnection.editTradeBrackets)return this.processErrors(this._brokerConnection.editTradeBrackets(t,e,i,n));throw Error("Method editTradeBrackets is not implemented")},t.prototype.subscribeRealtime=function(t,e){return this._makeSureBrokerIsConnected(),this._addSubscription("Realtime",t,e)},t.prototype.quotesSnapshot=function(t){var e=this;return Object(w.makeTimeLimited)(new Promise(function(i){var n=function(t,o){o&&(o.trade||o.ask||o.bid)&&(e.unsubscribeRealtime(t,n),i(o))};e.subscribeRealtime(t,n)}),1e4,"quotesSnapshot not received")},t.prototype.subscribeDOME=function(t,e){return this._makeSureBrokerIsConnected(),this._addSubscription("DOME",t,e)},t.prototype.subscribePL=function(t,e){return this._makeSureBrokerIsConnected(),this._addSubscription("PL",t,e)},t.prototype.subscribeTradePL=function(t,e){return this._makeSureBrokerIsConnected(),this._addSubscription("TradePL",t,e)},t.prototype.subscribeEquity=function(t){return this._makeSureBrokerIsConnected(),
this._addSubscription("Equity","Equity",t)},t.prototype.unsubscribeRealtime=function(t,e){this._removeSubscription("Realtime",t,e)},t.prototype.unsubscribeDOME=function(t,e){this._removeSubscription("DOME",t,e)},t.prototype.unsubscribePL=function(t,e){this._removeSubscription("PL",t,e)},t.prototype.unsubscribeTradePL=function(t,e){this._removeSubscription("TradePL",t,e)},t.prototype.unsubscribeEquity=function(t){this._removeSubscription("Equity","Equity",t)},t.prototype.accountInfo=function(){return Object(w.makeTimeLimited)(this._brokerConnection.accountInfo(),1e4,"accountInfo not received")},t.prototype.symbolInfo=function(t){return Object(w.makeTimeLimited)(this._brokerConnection.symbolInfo(t),1e4,"symbolInfo not received")},t.prototype.bugReportInfo=function(){function t(t){return JSON.parse(JSON.stringify(t))}function e(t){var i,n;if("object"!=typeof t)return t;if(Object(_.isArray)(t))return t.map(e);i={};for(n in t)"object"!=typeof t[n]&&(i[n]=t[n]);return i}var i=this;return Promise.all([this.orders(),this.positions(),this.config.supportTrades?this.trades():Promise.resolve([])]).then(function(n){return{activeBroker:i.metainfo().title,orders:e(t(n[0])),positions:e(t(n[1])),trades:e(t(n[2])),silentOrdersPlacement:i._host.silentOrdersPlacement().value(),floatingPanel:i._host.floatingTradingPanelVisibility().value(),account:i.currentAccount(),accountType:i.currentAccountType(),lastUpdates:i._lastFireResult,time:Date.now(),brokerSpecific:i._brokerConnection.bugReportInfo?i._brokerConnection.bugReportInfo():null}})},t.prototype.processErrors=function(t,e,i,n){var o=this;if(!Object(_.isPromise)(t))throw Error("Broker incorrectly implements API, should return Promise");return t.then(n).catch(function(t){if(void 0===t||!0===t||!1===t)return Promise.resolve(void 0!==t&&t);var n="";return"string"==typeof t?n=t:"object"==typeof t&&"string"==typeof t.message&&(n=t.message),n.length?(e&&d.enabled("trading_notifications")?o._host.showNotification(i||"",n,0):C.logWarn(t),Promise.resolve(!1)):Promise.reject(t)})},t.prototype.setDurations=function(t){this._brokerMetainfo.durations=t.slice()},t.prototype.setSymbolSearchId=function(t){this._brokerMetainfo.symbolSearchId=t},t.prototype.getRealtimeDataCheckParams=function(){return this._brokerConnection.getRealtimeDataCheckParams?this._brokerConnection.getRealtimeDataCheckParams():{}},t.prototype.destroy=function(){void 0!==this._brokerConnection.destroy&&this._brokerConnection.destroy()},t.prototype._initializeConnectProtection=function(){var t=this,e=null,i=function(){e&&(clearTimeout(e),e=null)},n=function(n){if(i(),2===n){var o="oauth"===t.config.authorizationType?18e4:6e4;e=setTimeout(function(){t._host.selectBroker(),t.host().showNotification(window.t("Authorization Error"),window.t("The connection attempt failed. Please try again later."))},o)}};this.connectionStatusUpdate.subscribe(null,n)},t.prototype._fakeSubscribeDOME=function(t){var e=this;this._fakeDomeSubscriptions[t]=function(t,i){var n=i.ask||i.trade,o=i.bid||i.trade,r={snapshot:!0,asks:n?[{price:n,
volume:i.ask_size||1/0}]:[],bids:o?[{price:o,volume:i.bid_size||1/0}]:[]};e.host().domeUpdate(t,r)},this.subscribeRealtime(t,this._fakeDomeSubscriptions[t])},t.prototype._fakeUnsubscribeDOME=function(t){this.unsubscribeRealtime(t,this._fakeDomeSubscriptions[t])},t.prototype._createProfitLossEmitter=function(t){return new p(t,this,this._host)},t.prototype._patchMetainfo=function(t){var e=Object(_.clone)(t);return e.configFlags.supportReversePosition=!this.config.supportMultiposition||this.config.supportReversePosition,e.configFlags.supportClosePosition=!0,e.configFlags.supportPLUpdate=!0,e},t.prototype._addSubscription=function(t,e,i){var n,o,r,s;void 0===this._subscriptions[e]&&(this._subscriptions[e]={Realtime:[],PL:[],Equity:[],DOME:[],TradePL:[]}),n=Object(g.ensure)(this._subscriptions[e]),o=n[t].length>0,n[t].push(i),r=this._lastFireResult[e],void 0!==r&&void 0!==r[t]&&null!==r[t]&&i(e,r[t].data),!o&&n[t].length>0&&(s="subscribe"+t,this._brokerConnection[s]&&this._brokerConnection[s](e))},t.prototype._removeSubscription=function(t,e,i){var n,o,r;void 0!==this._subscriptions[e]&&(n=Object(g.ensure)(this._subscriptions[e]),o=n[t].indexOf(i),o>-1&&n[t].splice(o,1),0===n[t].length&&(r="unsubscribe"+t,this._brokerConnection[r]&&this._brokerConnection[r](e)))},t.prototype._positions=function(){return this._positionsCache?this._positionsCache.getObjects():Promise.resolve([])},t.prototype._trades=function(){return this._tradesCache?this._tradesCache.getObjects():Promise.resolve([])},t.prototype._orders=function(){return this._ordersCache.getObjects()},t.prototype._makeSureBrokerIsConnected=function(){Object(g.assert)(1===this.connectionStatus(),"Broker is not connected")},t}(),k=i(589),e.addBroker=l,e.brokersList=c,e.createBrokerConnection=h,L={supportDemoLiveSwitcher:!0,supportEditAmount:!0,supportMarketBrackets:!0,supportMarketOrders:!0,supportStopOrders:!0,supportLimitOrders:!0,supportStopLimitOrders:!1,supportPositions:!0,supportDOM:!0,supportModifyOrder:!0},I=[]},function(t,e,i){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"MessageDialog",function(){return n}),i(31),i(9),n={show:function(t,e){i.e(1).then(function(n){(0,i(78).createDialog)({title:t,content:e,width:500,type:"modal",draggable:!1,destroyOnClose:!0,closeOnOutsideClick:!1,addClass:"tv-text",actions:[{name:"ok",text:window.t("Ok"),type:"primary",method:"close"}]}).open()}.bind(null,i)).catch(i.oe)}}},function(t,e,i){"use strict";function n(t){t.supportBrackets&&(r.logWarn("supportBrackets is deprecated. Use supportOrderBrackets and supportPositionBrackets instead."),t.supportOrderBrackets=!0,t.supportPositionBrackets=!0)}var o,r;Object.defineProperty(e,"__esModule",{value:!0}),e.migrateConfigFlags=n,o=i(5),r=Object(o.getLogger)("Trading.Migrations")},function(t,e,i){"use strict";var n,o,r,s;i.d(e,"a",function(){return s}),n=i(13),o=i(44),r=i(193),s=function(){function t(t){this._realtimeSubscriptions={},this._domeSubscriptions={},this._lastQuoteValues={},this._realtimeSubscriptions={},this._lastQuoteValues={},
this._connectionId=t}return t.prototype.isTradable=function(t){return Promise.resolve(!1)},t.prototype.connectionStatus=function(){return 3},t.prototype.formatter=function(t){return Object(o.getQuoteSessionInstance)("simple").formatter(t,!0)},t.prototype.spreadFormatter=function(t){var e=Object(o.getQuoteSessionInstance)("simple");return Promise.all([e.snapshot(t),e.formatter(t)]).then(function(t){var e=t[0],i=t[1],o=i.state();return"forex"!==e.type&&"cfd"!==e.type||!o.minMove2?i:new n.PriceFormatter(o.minMove2)})},t.prototype.quantityFormatter=function(t){return Promise.resolve(new r.QuantityFormatter)},t.prototype.symbolInfo=function(t){return Object(o.getQuoteSessionInstance)("simple").snapshot(t).then(function(t){return{minTick:t.minmov/t.pricescale,qty:{min:1,max:1e10,step:1},description:t.description,pipValue:NaN,pipSize:NaN}})},t.prototype.subscribeRealtime=function(t,e){function i(t){var e,i=t.values,n=i.ask||i.last_price,o=i.bid||i.last_price;return i.spread?e=i.spread:("forex"===i.type||"cfd"===i.type)&&void 0!==o&&void 0!==n&&i.minmove2&&i.pricescale&&(e=(n-o)*i.pricescale/i.minmove2),{ask:n,ask_size:i.ask_size,bid:o,bid_size:i.bid_size,size:i.volume,spread:e,trade:i.last_price,type:i.type}}var n,r,s,a=this,l=!1;this._realtimeSubscriptions[t]||(this._realtimeSubscriptions[t]=[],l=!0),n=this._realtimeSubscriptions[t],n.push(e),l?Object(o.getQuoteSessionInstance)("full").subscribe(this._connectionId,t,function(e,o){var r,s;if(!e.error&&e.values&&e.values.pricescale){a._lastQuoteValues[t]=e,r=i(e),"is_tradable"in e.values&&(r.is_tradable=e.values.is_tradable);for(s=0;s<n.length;s++)n[s](t,r)}}):this._lastQuoteValues[t]&&(r=this._lastQuoteValues[t],s=i(r),e(t,s))},t.prototype.unsubscribeRealtime=function(t,e){var i,n=this._realtimeSubscriptions[t];n&&-1!==(i=n.indexOf(e))&&(n.splice(i,1),n.length||(delete this._realtimeSubscriptions[t],Object(o.getQuoteSessionInstance)("full").unsubscribe(this._connectionId,t)))},t.prototype.subscribeDOME=function(t,e){function i(t){var e=t.values.ask||t.values.last_price,i=t.values.bid||t.values.last_price,n=l.includes(t.values.type)?0:t.values.ask_size||1/0,o=l.includes(t.values.type)?0:t.values.bid_size||1/0;return{snapshot:!0,asks:e?[{price:e,volume:n}]:[],bids:i?[{price:i,volume:o}]:[]}}var n,r,s,a=this,l=["bitcoin","index"],c=!1;this._domeSubscriptions[t]||(this._domeSubscriptions[t]=[],c=!0),n=this._domeSubscriptions[t],n.push(e),c?Object(o.getQuoteSessionInstance)("full").subscribe(this._connectionId+"dom",t,function(e,o){var r,s;if(!e.error&&e.values&&e.values.pricescale)for(a._lastQuoteValues[t]=e,r=i(e),s=0;s<n.length;s++)n[s](t,r)}):this._lastQuoteValues[t]&&(r=this._lastQuoteValues[t],s=i(r),e(t,s))},t.prototype.unsubscribeDOME=function(t,e){var i,n=this._domeSubscriptions[t];n&&-1!==(i=n.indexOf(e))&&(n.splice(i,1),n.length||(delete this._domeSubscriptions[t],Object(o.getQuoteSessionInstance)("full").unsubscribe(this._connectionId+"dom",t)))},t.prototype.quotesSnapshot=function(t){var e=this;return new Promise(function(i){var n=function(t,o){
e.unsubscribeRealtime(t,n),i(o)};e.subscribeRealtime(t,n)})},t}()},function(t,e,i){"use strict";function n(){return Object(o.hasService)(r)?Object(o.service)(r):null}var o,r;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"CHART_WIDGET_COLLECTION_SERVICE",function(){return r}),e.chartWidgetCollectionService=n,o=i(191),r={id:"ChartWidgetCollectionService"}},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 11 11" width="11" height="11"><g fill-rule="evenodd"><path d="M3.905 8.25V2.63H4.9v4.734h2.54v.886H3.906z"/><path d="M5.5 0A5.502 5.502 0 0 0 0 5.5C0 8.536 2.465 11 5.5 11 8.536 11 11 8.535 11 5.5S8.535 0 5.5 0zm0 1C7.983 1 10 3.018 10 5.5 10 7.983 7.982 10 5.5 10A4.502 4.502 0 0 1 1 5.5C1 3.017 3.018 1 5.5 1z"/></g></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 11 11" width="11" height="11"><g fill-rule="evenodd"><path d="M3.798 7.94l.37-.895c.392.276.78.415 1.162.415.585 0 .878-.205.878-.613a.872.872 0 0 0-.206-.55c-.138-.173-.423-.37-.853-.585-.432-.216-.722-.393-.872-.534a1.425 1.425 0 0 1-.345-.495 1.63 1.63 0 0 1-.12-.638c0-.435.16-.795.477-1.082.318-.284.727-.428 1.226-.428.65 0 1.126.12 1.43.364l-.302.858a1.87 1.87 0 0 0-1.108-.376c-.23 0-.41.06-.536.183a.627.627 0 0 0-.19.474c0 .32.358.655 1.07 1.003.377.184.65.353.814.508.167.156.293.336.38.542.087.206.132.436.132.69 0 .454-.18.828-.54 1.122-.36.295-.84.442-1.446.442A2.57 2.57 0 0 1 3.8 7.94H3.8z"/><path d="M5.5 0A5.502 5.502 0 0 0 0 5.5C0 8.536 2.465 11 5.5 11 8.536 11 11 8.535 11 5.5S8.535 0 5.5 0zm0 1C7.983 1 10 3.018 10 5.5 10 7.983 7.982 10 5.5 10A4.502 4.502 0 0 1 1 5.5C1 3.017 3.018 1 5.5 1z"/></g></svg>'},function(t,e,i){"use strict";var n,o,r,s,a,l,c;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"MarketStatusIndicator",function(){return c}),n=i(0),i(9),o=i(608),i.n(o),r=i(314),s={invalid:"tv-market-status--invalid",market:"tv-market-status--market",out_of_session:"tv-market-status--out-of-session",post_market:"tv-market-status--post-market",pre_market:"tv-market-status--pre-market",loading:"tv-market-status--loading",holiday:"tv-market-status--holiday",replay:"tv-market-status--replay"},a={invalid:$.t("Invalid Symbol"),market:$.t("Market Open"),out_of_session:$.t("Market Closed"),post_market:$.t("Post Market"),pre_market:$.t("Pre Market"),loading:$.t("Loading"),holiday:$.t("Holiday"),replay:""},l={classMap:s,classSuffix:"",data:{},extraTitle:"",labelMap:a,short:!1,showTooltip:!0,tooltipType:"custom"},c=function(t){function e(e){var i=t.call(this,e)||this;return i._quoteSessionPrefix="market-status-indicator",i._componentClass="tv-market-status",i._extraTitle="",i._init(e),i}return n.c(e,t),e.prototype.setStatus=function(t,e){var i={values:{current_session:t}};this.update(i,e)},e.prototype.getTooltipText=function(){var e=t.prototype.getTooltipText.call(this);return""===e?e:(""!==this._extraTitle&&(e=e+", "+this._extraTitle),e)},e.prototype.setExtraTitle=function(t){this._extraTitle=t},e.prototype.reset=function(){this._clearClasses(),this._labelEl.textContent="",
this._extraTitle="",this._el.setAttribute("title",""),this._value=""},e.prototype.enableShortMode=function(e){void 0===e&&(e=!0),void 0!==this._labelEl&&this._labelEl.classList.add("i-hidden"),t.prototype.enableShortMode.call(this)},e.prototype.disableShortMode=function(){void 0!==this._labelEl&&this._labelEl.classList.remove("i-hidden"),t.prototype.disableShortMode.call(this)},e.prototype._renderLabel=function(){this._labelEl.textContent=this.getLabel()},e.prototype._getValueFromData=function(t){return void 0!==t.values&&void 0!==t.values.current_session?t.values.current_session:this.getValue()},e.prototype._render=function(){this._renderLabelElement(),this._renderDotElement(),t.prototype._render.call(this)},e.prototype._init=function(e){var i=Object.assign({},l,e);t.prototype._init.call(this,i),this.setExtraTitle(i.extraTitle),this._render()},e.prototype._renderLabelElement=function(){void 0===this._labelEl&&(this._labelEl=document.createElement("span"),this._labelEl.classList.add(this._componentClass+"__label"),this._labelEl.classList.add(this._componentClass+"__label"+this._classSuffix),this._el.appendChild(this._labelEl))},e.prototype._renderDotElement=function(){void 0===this._dotEl&&(this._dotEl=document.createElement("span"),this._dotEl.classList.add(this._componentClass+"__dot"),this._dotEl.classList.add(this._componentClass+"__dot"+this._classSuffix),this._el.appendChild(this._dotEl))},e}(r.a)},function(t,e,i){"use strict";var n,o,r,s,a;i.d(e,"a",function(){return a}),n=i(5),o=i(22),r=i(44),i(157),s=Object(n.getLogger)("GUI.Blocks.AbstractIndicator"),a=function(){function t(t){this._classSuffix="",this._quoteSessionPrefix="abstract-indicator",this._shortMode=!1,this._showTooltip=!0,this._subscribed=!1,this._tooltipType="custom",this._quoteSession=t.quoteSession}return t.prototype.getValue=function(){return this._value},t.prototype.getTooltipText=function(){return this.getLabel()},t.prototype.getLabel=function(){return this._labelMap[this._value]||""},t.prototype.getElement=function(){return this._el},t.prototype.update=function(t,e){this._updateValue(t,e),this._render()},t.prototype.setTooltipEnabled=function(t){void 0===t&&(t=!1),this._showTooltip!==t&&(this._showTooltip=t,this._renderTooltip())},t.prototype.enableShortMode=function(){!0!==this._shortMode&&(this._shortMode=!0,this._render())},t.prototype.disableShortMode=function(){!1!==this._shortMode&&(this._shortMode=!1,this._render())},t.prototype.isShortModeEnabled=function(){return this._shortMode},t.prototype.start=function(){!this._subscribed&&this._symbolName&&(this._quoteSession||(this._quoteSession=Object(r.getQuoteSessionInstance)("simple")),this._quoteSession.subscribe(this._getQuoteSessionId(),this._symbolName,this.update.bind(this)),this._subscribed=!0)},t.prototype.stop=function(){this._subscribed&&this._quoteSession&&this._symbolName&&(this._quoteSession.unsubscribe(this._getQuoteSessionId(),this._symbolName),this._subscribed=!1)},t.prototype._init=function(t){this._el=t.el?t.el:document.createElement("span"),this._el.innerHTML="",
this._classMap=t.classMap,this._labelMap=t.labelMap,this._showTooltip=t.showTooltip,this._classSuffix=t.classSuffix,this._symbolName=t.symbol,t.tooltipType&&(this._tooltipType=t.tooltipType),this._quoteSessionGUID=Object(o.guid)(),!0===t.short&&this.enableShortMode(),t.data&&this._updateValue(t.data)},t.prototype._clearClasses=function(){var t=this;Object.values(this._classMap).map(function(e){t._el.classList.remove(""+e),t._el.classList.remove(""+e+t._classSuffix)})},t.prototype._render=function(){this._renderClasses(),this._renderTooltip(),this._renderLabel()},t.prototype._renderLabel=function(){this._el.textContent=this.getLabel()},t.prototype._updateValue=function(t,e){var i=this._getValueFromData(t);(e||i!==this._value)&&(this._value=i)},t.prototype._renderClasses=function(){var t,e,i,n=this._el.classList;n.add(this._componentClass,this._componentClass+this._classSuffix),t=this._classMap[this._value];for(e in this._classMap)(i=this._classMap[e])&&(i===t?n.add(i,i+this._classSuffix):n.remove(i,i+this._classSuffix));!t&&this._value&&s.logWarn("no className for status "+this._value)},t.prototype._renderTooltip=function(){this._el.setAttribute("title",this._showTooltip?this.getTooltipText():""),"custom"===this._tooltipType&&this._el.classList.toggle("apply-common-tooltip",this._showTooltip)},t.prototype._getQuoteSessionId=function(){return this._quoteSessionPrefix+"."+this._quoteSessionGUID},t}(),window.AbstractIndicator=a},function(t,e,i){"use strict";function n(t,e){var i,n,o;if(!t&&!e)return!0;if(!t||!e)return!1;if((t.title||"")!==(e.title||""))return!1;if(!t.symbols&&!e.symbols)return!0;if(i=t.symbols||[],n=e.symbols||[],i.length!==n.length)return!1;for(o=i.length;o>=0;--o)if(i[o]!==n[o])return!1;return!0}function o(){var t,e,i;for(a(),t=Object.keys(x).map(function(t){return x[t].title}),e=1;!0;e++)if(i=$.t("Watchlist")+(e>1?" ("+e+")":""),-1===t.indexOf(i))return i}function r(t,e){s(t,e),_.TVXWindowEvents.emit(P,t)}function s(t,e){C.forEach(function(i){i!==e&&i.change(t)})}function a(){L||(b.logNormal("Init"),L=!0,c(),_.TVXWindowEvents.on(P,l),p.onSync.subscribe(null,c))}function l(t){b.logNormal("xWindow list changed "+t);var e=p.getJSON("savedwatch."+t,null);e?x[t]=e:delete x[t],s(t)}function c(){var t,e,i;x={},k={},b.logNormal("Reload lists"),t=p.keys(),t.forEach(function(t){var e,i,n=/^savedwatch\.(.*)$/.exec(t);if(!n)return void w.tryParseList(t,k);e=n[1],(i=p.getJSON(t,null))&&(i.symbols||(i.symbols=[]),x[e]=i)}),e=Object.keys(x).length,i=Object.keys(k).length,b.logNormal("Loaded "+e+" normal lists and "+i+" legacy"),i>0&&Object.keys(k).forEach(function(t){var e=k[t],i={auto:!!e.auto,symbols:e.symbols,title:e.title+""};p.setJSON("savedwatch."+t,i,{forceFlush:!0}),p.setJSON("widgetbar.widget.watchlist."+t,{listId:t}),x[t]=i})}function h(t,e){return+(u(t.id,t.title)>u(e.id,e.title))||+(u(t.id,t.title)===u(e.id,e.title))-1}function u(t,e){return void 0===e&&(e=""),e.toLowerCase()+"\0"+e+"\0"+t}var d,p,_,f,m,g,y,v,b,S,w,P,T,C,x,k,L;Object.defineProperty(e,"__esModule",{value:!0}),
i.d(e,"WatchListManager",function(){return T}),e.pickTitle=o,e.compareLists=h,i(9),d=i(22),p=i(26),i.n(p),_=i(99),f=i(248),m=i(5),g=i(4),i.n(g),y=i(8),v=i.n(y),b=Object(m.getLogger)("WatchList.ListManager"),S=g.enabled("multiple_watchlists"),function(t){function e(t,e){var i,n;-1!==t.indexOf(r)&&(i=t.substring(r.length),n=p.getJSON(t,{}),n.listId&&0!==n.listId.length||(b.logNormal("Trying to parse legacy watch list "+i),e[i]={auto:!0,symbols:n.list||[],title:n.title||o()}))}function i(t){p.remove(r+t,{forceFlush:!0})}function n(t){var e={list:t.symbols,title:t.title};p.setJSON(r+t.id,e,{forceFlush:!0})}var r="widgetbar.widget.watchlist.";t.tryParseList=e,t.removeList=i,t.saveList=n}(w||(w={})),P="savedwatch.changed",T=function(){function t(t){this._onChange=null,this._canDelete=null,this._onListAdded=new v.a,this._onListRemoved=new v.a,this._onListRenamed=new v.a,C.push(this),t&&t.onchange&&(this._onChange=t.onchange),t&&t.canDelete&&(this._canDelete=t.canDelete)}return t.prototype.onListAdded=function(){return this._onListAdded},t.prototype.onListRemoved=function(){return this._onListRemoved},t.prototype.onListRenamed=function(){return this._onListRenamed},t.prototype.destroy=function(){var t=C.indexOf(this);if(-1===t)throw Error("Access violation");C.splice(t,1)},t.prototype.createList=function(t,e){if(!t)return null;var i={id:Object(d.randomHash)(),symbols:e||[],title:t};return b.logNormal("Creating watch list "+i.id+" with "+i.symbols.length+" symbol(s)"),this.saveList(i)?(this._onListAdded.fire(i.id,i.symbols),i):(b.logWarn("Cannot save watch list"),null)},t.prototype.getList=function(t,e){var i;return void 0===e&&(e=!0),a(),x.hasOwnProperty(t)?(i=x[t],{auto:!!i.auto,id:t,symbols:i.symbols.slice(),title:i.title}):e&&k.hasOwnProperty(t)?(i=k[t],{auto:!0,id:t,symbols:i.symbols.slice(),title:i.title}):null},t.prototype.getAllLists=function(t){var e,i=this;return void 0===t&&(t=!0),a(),e={},t&&Object.keys(k).forEach(function(t){var n=i.getList(t,!0);n&&(e[t]=n)}),Object.keys(x).forEach(function(t){var n=i.getList(t);n&&(e[t]=n)}),e},t.prototype.getFirstList=function(){var t=this.getAllLists(!0),e=Object.keys(t).shift();return e?t[e]:null},t.prototype.saveList=function(t){var e;if(!t)throw new TypeError("list must be an object");if("string"!=typeof t.id)throw new TypeError("id property must be a string");if(null!=t.symbols&&!Array.isArray(t.symbols))throw new TypeError("symbols property must be an array or null");return a(),!(!(window.user&&window.is_authenticated||S||x[t.id])&&Object.keys(this.getAllLists()).length>0)&&(b.logNormal("Saving WatchList with id "+t.id),!x.hasOwnProperty(t.id)&&k.hasOwnProperty(t.id)?!n(t,k[t.id])&&(w.saveList(t),!0):!n(t,x[t.id])&&(e={auto:!!t.auto,symbols:t.symbols,title:t.title+""},p.setJSON("savedwatch."+t.id,e,{forceFlush:!0}),x[t.id]=e,r(t.id,this),!0))},t.prototype.deleteList=function(t){if(b.logNormal("Remove list "+t),!x[t])return w.removeList(t),void delete k[t];p.remove("savedwatch."+t,{forceFlush:!0}),delete x[t],r(t,this),this._onListRemoved.fire(t)},
t.prototype.updateList=function(t,e){var i=this.getList(t);null!==i&&(i.symbols=e,this.saveList(i),null!==this._onChange&&this._onChange(i.id))},t.prototype.renameList=function(t,e){var i,n=this.getList(t);null!==n&&(i=n.title,n.title=e,this.saveList(n),null!==this._onChange&&this._onChange(n.id),this._onListRenamed.fire(t,i,e))},t.prototype.canDelete=function(t){return C.every(function(e){return!e._canDelete||e._canDelete(t)})},t.prototype.canRename=function(t){return!!t},t.prototype.change=function(t){this._onChange&&this._onChange(t)},t.prototype.getOrderedList=function(){return Object.values(this.getAllLists()).sort(h)},t.prototype.exportList=function(t){var e;e=Object(f.isProd)()?"https://www.tradingview.com/exportwatchlist/"+t:window.location.protocol+"//"+window.location.host+"/exportwatchlist/"+t+"/",window.open(e,"Export")},t}(),C=[],x={},k={},L=!1},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 17 17"><g stroke="#cdbd28" stroke-linecap="round" stroke-width="0"><path d="M0 13h2v2H0zM3 13h13v2H3zM0 9h2v2H0zM3 5h13v2H3zM0 4.998h2v2H0zM3 9h13v2H3zM0 1h2v2H0zM3 1h13v2H3z"/></g></svg>'},function(t,e,i){"use strict";function n(t){return d.enabled("remove_img_from_rss")?t.replace(/<img[^>]*>/g,""):t}function o(t){var e,i,n={};for(e=0;e<t.childNodes.length;e++)i=t.childNodes[e],0!==i.childNodes.length&&(n[i.nodeName]=i.childNodes[0].nodeValue);return n}function r(t){return Object(p.isString)(t)?n(t):""}function s(t){return l.b(this,void 0,void 0,function(){var e,i,s,a,c,h,u,d,_;return l.d(this,function(l){switch(l.label){case 0:return[4,Object(f.fetch)(t)];case 1:return e=l.sent(),e.ok?[4,e.text()]:[2,[]];case 2:if(i=l.sent(),s=(new DOMParser).parseFromString(i,"text/xml"),a=s.getElementsByTagName("channel"),1!==a.length)return[2,[]];if(c=a[0].getElementsByTagName("item"),0===c.length)return[2,[]];for(h=[],u=0;u<c.length;u++)h.push(o(c[u]));return h.length?(d="title",1===h.length&&-1!==h[0][d].indexOf("RSS feed not found")?[2,[]]:(_=h.map(function(t){var e=t;return Object(p.isString)(e.title)?{content:r(e.description),contentSnippet:r(e.contentSnippet),link:r(e.link),published:Object(p.isString)(e.pubDate)?new Date(e.pubDate):new Date(Date.now()),title:n(e.title)}:null}),[2,_.filter(function(t){return null!==t})])):[2,[]]}})})}function a(t,e){return s(t).then(function(t){return t.map(function(t){return t.source=e,t})})}var l,c,h,u,d,p,_,f,m,g,y,v,b,S;Object.defineProperty(e,"__esModule",{value:!0}),l=i(0),c=i(14),h=i(612),u=i.n(h),d=i(4),p=i(12),_=i(616),f=i(125),m=i(5),g=Object(m.getLogger)("Library.News.RSS"),y={name:"Yahoo Finance",url:"https://feeds.finance.yahoo.com/rss/2.0/headline?s={SYMBOL}&region=US&lang=en-US"},v=function(t){function e(e){void 0===e&&(e=null);var i=t.call(this)||this;return i._settings=null,i._settings=e,i}return l.c(e,t),e.prototype.getBySymbol=function(t,e,i){var n,o=[];return o=this._settings?this._settings[e]||this._settings.default:y,Object(p.isArray)(o)||(o=[o]),n=[],Promise.all(o.map(function(o){
return a(o.url.replace("{SYMBOL}",t).replace("{EXCHANGE}",i).replace("{TYPE}",e),o.name).then(function(t){n=n.concat(t)}).catch(function(){g.logWarn("Something went wrong during load news")})})).then(function(){return n.sort(function(t,e){return e.published.valueOf()-t.published.valueOf()}),n})},e.prototype.needAppendSymbolToTitle=function(){return!0},e}(u.a),i.d(e,"overrides",function(){return b}),i.d(e,"LibraryNewsProvider",function(){return S}),b={getNews:null,isNewsGeneric:!1},S=function(t){function e(){var e=window.urlParams.rss_news_feed;return t.call(this,e?JSON.parse(e):null)||this}return l.c(e,t),e.prototype.getBySymbol=function(e,i,n){if(b.getNews){var o=b.getNews;return new Promise(function(t){o(e,t)})}return t.prototype.getBySymbol.call(this,e,i,n)},e.prototype.renderItem=function(e){var i,n,o=this,r=e.link||"";return e.link=e.link||"javascript:void(0)",i=t.prototype.renderItem.call(this,e),0===r.length&&e.fullDescription&&(n=e.fullDescription,i.on("click",function(t){t.preventDefault(),o.showPopup({content:n,title:e.title})}),i.css("cursor","pointer")),i},e.prototype.needAppendSymbolToTitle=function(){return(!b.getNews||!b.isNewsGeneric)&&t.prototype.needAppendSymbolToTitle.call(this)},e}(v)},function(t,e){},function(t,e,i){"use strict";var n,o;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"QuoteSessionPriceFormater",function(){return o}),n=i(13),o=function(){function t(t){this.type="quoteSessionPrice",this.reset(t)}return t.prototype.state=function(){return this._priceFormatter.state()},t.prototype.reset=function(t){this._priceFormatter=t||new n.PriceFormatter(100,1,0)},t.prototype.update=function(t,e){var i=null!=e.pricescale||null!=e.minmov||null!=e.fractional||null!=e.minmove2,o=null!=t.pricescale&&null!=t.minmov&&null!=t.fractional&&null!=t.minmove2;i&&o&&(this._priceFormatter=new n.PriceFormatter(t.pricescale,t.minmov,t.fractional,t.minmove2))},t.prototype.format=function(t,e,i){return this._priceFormatter.format(t,e,i)},t.prototype.hasForexAdditionalPrecision=function(){return this._priceFormatter.hasForexAdditionalPrecision()},t.serialize=function(t){return t.state()},t.deserialize=function(e){return new t(new n.PriceFormatter(e.priceScale,e.minMove,e.fractional,e.minMove2))},t}()},function(t,e,i){"use strict";function n(t,e,i){if(this._chartApi=t,this._sessionid="ds_"+o.randomHash(),this._sessionstarted=!1,!isFinite(e))throw new RangeError("scale must be a finite number");if(!isFinite(i))throw new RangeError("viewportWidth must be a finite number");this._scale=e,this._viewportWidth=i}var o=i(22);n.prototype.connected=function(){return this._chartApi.connected()},n.prototype.connect=function(t){this._globalHandler=t,this._chartApi.createSession(this._sessionid,this),this._chartApi.connect()},n.prototype.disconnect=function(){this._chartApi.disconnect()},n.prototype.depthSetSymbol=function(t){this._chartApi.depthSetSymbol(this._sessionid,t)},n.prototype.depthClearSymbol=function(){this._chartApi.depthClearSymbol(this._sessionid)},n.prototype.depthSetScale=function(t){
if(!isFinite(t))throw new RangeError("scale must be a finite number");this._chartApi.depthSetScale(this._sessionid,t),this._scale=t},n.prototype.onMessage=function(t){switch(t.method){case"connected":this._sessionstarted||(this._chartApi.depthCreateSession(this._sessionid,this._scale,this._viewportWidth),this._sessionstarted=!0);break;case"disconnected":this._sessionstarted=!1}this._globalHandler(t)},n.prototype.stopSession=function(){this._chartApi.depthDeleteSession(this._sessionid),this._sessionstarted=!1},t.exports=n},function(t,e,i){"use strict";var n,o,r;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"UndoMacroCommand",function(){return r}),n=i(0),o=i(45),r=function(t){function e(e){var i=t.call(this,e,!1)||this;return i._subcommands=[],i}return n.c(e,t),e.prototype.addCommand=function(t){this._subcommands.push(t)},e.prototype.isEmpty=function(){return 0===this._subcommands.length},e.prototype.redo=function(){for(var t=0;t<this._subcommands.length;t++)this._subcommands[t].redo()},e.prototype.undo=function(){for(var t=this._subcommands.length-1;t>=0;t--)this._subcommands[t].undo()},e}(o.UndoCommand)},function(t,e,i){"use strict";function n(t){var e,i;if(""===t)return Promise.resolve(null);if(e=JSON.parse(t),!Object(o.isObject)(e)||"function"==typeof e)return Promise.reject(Error("Non-object content in the non-series envelope"));if(Object(o.hasProperty)(e,"indexes_replace"))return Promise.resolve({indexes_replace:!0});if(i={indexes_replace:!1},Object(o.hasProperty)(e,"offsets")&&(i.offsets=e.offsets),Object(o.hasProperty)(e,"isUpdate")){if("boolean"!=typeof e.isUpdate)return Promise.reject(Error('Invalid type of "isUpdate" field'));i.isUpdate=e.isUpdate}return Object(o.hasProperty)(e,"data")&&(i.data=e.data),Object(o.hasProperty)(e,"graphicsCmds")&&(i.graphicsCmds=Object(r.b)(e.graphicsCmds)),Promise.resolve(i)}var o,r;Object.defineProperty(e,"__esModule",{value:!0}),e.unpackNonSeriesData=n,i(0),o=i(323),i.n(o),r=i(324)},function(t,e,i){"use strict";function n(t){var e=typeof t;return null!==t&&("object"===e||"function"===e)}function o(t,e){return e in t}Object.defineProperty(e,"__esModule",{value:!0}),e.isObject=n,e.hasProperty=o},function(t,e,i){"use strict";function n(t){var e,i,n,o;if(Object(a.hasProperty)(t,"create"),Object(a.hasProperty)(t,"erase"))for(e=t.erase,Object(s.assert)(Array.isArray(e),"Collection of erase commands should be array"),i=0,n=e;i<n.length;i++)o=n[i],Object(s.assert)("all"===o.action||"one"===o.action,"Erase command action should be 'all' or 'one'");return t}function o(t,e){t.forEach(function(t){var i,n,o;for(i=0,n=t;i<n.length;i++)o=n[i],o.indexes=e})}function r(t,e){for(var i=0;i<t.length;++i)if(t[i].id===e)return i;return-1}var s,a,l,c,h;e.b=n,i.d(e,"a",function(){return h}),s=i(6),i.n(s),a=i(323),i.n(a),l=i(196),c=i(325),h=function(){function t(){this.indexes=[],this._horizlines=new Map,this._vertlines=new Map,this._lines=new Map,this._hlines=new Map,this._textmarks=new Map,this._shapemarks=new Map,this._backgrounds=new Map,this._polygons=new Map,
this._trendchannels=new Map,this._hhists=new Map,this._hhistsByTimePointIndex=new Map}return t.prototype.horizlines=function(){return this._horizlines},t.prototype.vertlines=function(){return this._vertlines},t.prototype.lines=function(){return this._lines},t.prototype.hlines=function(){return this._hlines},t.prototype.textmarks=function(){return this._textmarks},t.prototype.shapemarks=function(){return this._shapemarks},t.prototype.backgrounds=function(){return this._backgrounds},t.prototype.polygons=function(){return this._polygons},t.prototype.trendchannels=function(){return this._trendchannels},t.prototype.hhists=function(){return this._hhists},t.prototype.hhistsByTimePointIndex=function(){return this._hhistsByTimePointIndex},t.prototype.clear=function(){this.indexes=[],this._clearPrimitives()},t.prototype.extract=function(){var t={indexes:this.indexes,horizlines:this._horizlines,vertlines:this._vertlines,lines:this._lines,hlines:this._hlines,textmarks:this._textmarks,shapemarks:this._shapemarks,backgrounds:this._backgrounds,polygons:this._polygons,trendchannels:this._trendchannels,hhists:this._hhists};return this.indexes=[],this._horizlines=new Map,this._vertlines=new Map,this._lines=new Map,this._hlines=new Map,this._textmarks=new Map,this._shapemarks=new Map,this._backgrounds=new Map,this._polygons=new Map,this._trendchannels=new Map,this._hhists=new Map,this._hhistsByTimePointIndex.clear(),new c.a("data",t)},t.prototype.replaceIndexesTo=function(t){this.indexes=t,o(this._horizlines,t),o(this._vertlines,t),o(this._lines,t),o(this._hlines,t),o(this._textmarks,t),o(this._shapemarks,t),o(this._backgrounds,t),o(this._polygons,t),o(this._trendchannels,t),o(this._hhists,t),this._postProcess()},t.prototype.processCommands=function(t,e){void 0!==t.erase&&this._processEraseCommands(t.erase),void 0!==t.create&&this._processCreateCommands(t.create,e)},t.prototype._processCreateCommands=function(t,e){var i,n;for(i in t)if(t.hasOwnProperty(i))switch(n=i,Object(s.assert)(n in e,"There is a '"+n+"' in study response, but it doesn't present in graphics info!"),n){case"horizlines":Object(l.b)(this._horizlines,t[n],e[n],this.indexes);break;case"vertlines":Object(l.b)(this._vertlines,t[n],e[n],this.indexes);break;case"lines":Object(l.b)(this._lines,t[n],e[n],this.indexes);break;case"hlines":Object(l.b)(this._hlines,t[n],e[n],this.indexes);break;case"textmarks":Object(l.b)(this._textmarks,t[n],e[n],this.indexes);break;case"shapemarks":Object(l.b)(this._shapemarks,t[n],e[n],this.indexes);break;case"backgrounds":Object(l.b)(this._backgrounds,t[n],e[n],this.indexes);break;case"polygons":Object(l.b)(this._polygons,t[n],e[n],this.indexes);break;case"trendchannels":Object(l.b)(this._trendchannels,t[n],e[n],this.indexes);break;case"hhists":Object(l.b)(this._hhists,t[n],e[n],this.indexes)}this._postProcess()},t.prototype._processEraseCommands=function(t){var e,i,n,o=function(t){if("all"===t.action)s._clearPrimitives();else{({horizlines:s._horizlines,vertlines:s._vertlines,lines:s._lines,hlines:s._hlines,textmarks:s._textmarks,
shapemarks:s._shapemarks,backgrounds:s._backgrounds,polygons:s._polygons,trendchannels:s._trendchannels,hhists:s._hhists})[t.type].forEach(function(e){var i=r(e[0].items,t.id);i>=0&&e[0].items.splice(i,1)})}},s=this;for(e=0,i=t;e<i.length;e++)n=i[e],o(n)},t.prototype._postProcess=function(){this._hhists.size>0&&Object(l.e)(this)},t.prototype._clearPrimitives=function(){this._horizlines=new Map,this._vertlines=new Map,this._lines=new Map,this._hlines=new Map,this._textmarks=new Map,this._shapemarks=new Map,this._backgrounds=new Map,this._polygons=new Map,this._trendchannels=new Map,this._hhists=new Map,this._hhistsByTimePointIndex.clear()},t}()},function(t,e,i){"use strict";function n(){return new c}function o(t){return new c("state",t)}function r(t){var e,i,n,o,r,c=new Set;for(e=0,i=l.d;e<i.length;e++)n=i[e],s(c,t[n]());return o=[],c.forEach(function(t){return o.push(t)}),o.sort(function(t,e){return t-e}),r={indexes:o},t.horizlines().forEach(function(t,e){var i,n,s,c,h,u,d;for(i=0,n=t;i<n.length;i++)for(s=n[i],c=s.indexes,h=0,u=s.items;h<u.length;h++)d=u[h],r.horizlines=r.horizlines||[],Object(l.a)(r.horizlines,a.a({},d,{startIndex:o.indexOf(c[d.startIndex]),endIndex:o.indexOf(c[d.endIndex])}),e)}),t.vertlines().forEach(function(t,e){var i,n,s,c,h,u,d;for(i=0,n=t;i<n.length;i++)for(s=n[i],c=s.indexes,h=0,u=s.items;h<u.length;h++)d=u[h],r.vertlines=r.vertlines||[],Object(l.a)(r.vertlines,a.a({},d,{index:o.indexOf(c[d.index])}),e)}),t.lines().forEach(function(t,e){var i,n,s,c,h,u,d;for(i=0,n=t;i<n.length;i++)for(s=n[i],c=s.indexes,h=0,u=s.items;h<u.length;h++)d=u[h],r.lines=r.lines||[],Object(l.a)(r.lines,a.a({},d,{startIndex:o.indexOf(c[d.startIndex]),endIndex:o.indexOf(c[d.endIndex])}),e)}),t.hlines().forEach(function(t,e){var i,n,o,s,a,c;for(i=0,n=t;i<n.length;i++)for(o=n[i],s=0,a=o.items;s<a.length;s++)c=a[s],r.hlines=r.hlines||[],Object(l.a)(r.hlines,c,e)}),t.textmarks().forEach(function(t,e){var i,n,s,c,h,u,d;for(i=0,n=t;i<n.length;i++)for(s=n[i],c=s.indexes,h=0,u=s.items;h<u.length;h++)d=u[h],r.textmarks=r.textmarks||[],Object(l.a)(r.textmarks,a.a({},d,{time:o.indexOf(c[d.time])}),e)}),t.shapemarks().forEach(function(t,e){var i,n,s,c,h,u,d;for(i=0,n=t;i<n.length;i++)for(s=n[i],c=s.indexes,h=0,u=s.items;h<u.length;h++)d=u[h],r.shapemarks=r.shapemarks||[],Object(l.a)(r.shapemarks,a.a({},d,{time:o.indexOf(c[d.time])}),e)}),t.backgrounds().forEach(function(t,e){var i,n,s,c,h,u,d;for(i=0,n=t;i<n.length;i++)for(s=n[i],c=s.indexes,h=0,u=s.items;h<u.length;h++)d=u[h],r.backgrounds=r.backgrounds||[],Object(l.a)(r.backgrounds,a.a({},d,{start:o.indexOf(c[d.start]),stop:o.indexOf(c[d.stop])}),e)}),t.polygons().forEach(function(t,e){var i,n,s,c=function(t){var i,n,s,c,h=t.indexes;for(i=0,n=t.items;i<n.length;i++)s=n[i],c=s.points.map(function(t){return a.a({},t,{index:o.indexOf(h[t.index])})}),r.polygons=r.polygons||[],Object(l.a)(r.polygons,a.a({},s,{points:c}),e)};for(i=0,n=t;i<n.length;i++)s=n[i],c(s)}),t.trendchannels().forEach(function(t,e){var i,n,s,c,h,u,d;for(i=0,n=t;i<n.length;i++)for(s=n[i],c=s.indexes,h=0,
u=s.items;h<u.length;h++)d=u[h],r.trendchannels=r.trendchannels||[],Object(l.a)(r.trendchannels,a.a({},d,{startIndex:o.indexOf(c[d.startIndex]),endIndex:o.indexOf(c[d.endIndex])}),e)}),t.hhists().forEach(function(t,e){var i,n,s,c,h,u,d;for(i=0,n=t;i<n.length;i++)for(s=n[i],c=s.indexes,h=0,u=s.items;h<u.length;h++)d=u[h],r.hhists=r.hhists||[],Object(l.a)(r.hhists,a.a({},d,{firstBarTime:o.indexOf(c[d.firstBarTime]),lastBarTime:o.indexOf(c[d.lastBarTime])}),e)}),r}function s(t,e){e.forEach(function(e,i){var n,o,r,s,a,l;for(n=0,o=e;n<o.length;n++)for(r=o[n],s=0,a=r.indexes;s<a.length;s++)l=a[s],t.add(l)})}var a,l,c;i.d(e,"a",function(){return c}),e.b=n,e.c=o,e.d=r,a=i(0),l=i(196),c=function(){function t(t,e){var i,n;this.indexes=[],this._horizlines=new Map,this._vertlines=new Map,this._lines=new Map,this._hlines=new Map,this._textmarks=new Map,this._shapemarks=new Map,this._backgrounds=new Map,this._polygons=new Map,this._trendchannels=new Map,this._hhists=new Map,this._hhistsByTimePointIndex=new Map,"data"===t?(i=e,this.indexes=i.indexes,this._horizlines=i.horizlines,this._vertlines=i.vertlines,this._lines=i.lines,this._hlines=i.hlines,this._textmarks=i.textmarks,this._shapemarks=i.shapemarks,this._backgrounds=i.backgrounds,this._polygons=i.polygons,this._trendchannels=i.trendchannels,this._hhists=i.hhists,this._postProcess()):"state"===t&&(n=e,this.indexes=n.indexes||[],Object(l.b)(this._horizlines,n.horizlines,void 0,this.indexes),Object(l.b)(this._vertlines,n.vertlines,void 0,this.indexes),Object(l.b)(this._lines,n.lines,void 0,this.indexes),Object(l.b)(this._hlines,n.hlines,void 0,this.indexes),Object(l.b)(this._textmarks,n.textmarks,void 0,this.indexes),Object(l.b)(this._shapemarks,n.shapemarks,void 0,this.indexes),Object(l.b)(this._backgrounds,n.backgrounds,void 0,this.indexes),Object(l.b)(this._polygons,n.polygons,void 0,this.indexes),Object(l.b)(this._trendchannels,n.trendchannels,void 0,this.indexes),Object(l.b)(this._hhists,n.hhists,void 0,this.indexes),this._postProcess())}return t.prototype.horizlines=function(){return this._horizlines},t.prototype.vertlines=function(){return this._vertlines},t.prototype.lines=function(){return this._lines},t.prototype.hlines=function(){return this._hlines},t.prototype.textmarks=function(){return this._textmarks},t.prototype.shapemarks=function(){return this._shapemarks},t.prototype.backgrounds=function(){return this._backgrounds},t.prototype.polygons=function(){return this._polygons},t.prototype.trendchannels=function(){return this._trendchannels},t.prototype.hhists=function(){return this._hhists},t.prototype.hhistsByTimePointIndex=function(){return this._hhistsByTimePointIndex},t.prototype._postProcess=function(){this._hhists.size>0&&Object(l.e)(this)},t}()},function(t,e,i){"use strict";function n(t){t.forceLineColor=!1,r.call(this,t),this.color1=t.color1,this.color2=t.color2,this.bottom=t.bottom,this.isSeries=!!t.isSeries,this._simpleMode=t.simpleMode}var o=i(27).coordinateIsValid,r=i(164).PaneRendererLine;inherit(n,r),n.prototype.draw=function(t){
var e,i,n,s,a,l,c,h,u,d,p,_;if(0!==this.items.length){for(t.lineCap="square",t.strokeStyle=this.lineColor,t.lineWidth=this.lineWidth,t.lineStyle=this.lineStyle,t.lineWidth=1,e=0;e<this.items.length&&!o(this.items[e].y);)e++;for(i=this.items.length-1;i>=0&&!o(this.items[i].y);)i--;if(!(e>=i)){for(t.translate(.5,.5),n={},s=this.items,a=e;a<=i;a++)l=s[a],c=l.style?l.style.color:this.lineColor,a<i&&s[a+1].style&&(h=s[a+1].style.color,c!==h&&(u=n[h]||[],u.push(l),n[h]=u)),d=n[c]||[],d.push(l),n[c]=d;for(c in n){for(d=n[c],t.beginPath(),p=0,a=0;a<d.length;a++)d[a].style&&d[a].style.color!==c&&(t.moveTo(d[p].x,this.bottom),this.walkLine(t,d.slice(p,a),!0,this.bottom),p=a);t.moveTo(d[p].x,this.bottom),this.walkLine(t,d.slice(p,d.length),!0,this.bottom),t.closePath(),this.isSeries?(_=t.createLinearGradient(0,0,0,this.bottom),_.addColorStop(0,this.color1),_.addColorStop(1,this.color2),t.fillStyle=_,this._simpleMode=!0):t.fillStyle=c,t.fill()}t.lineWidth=this.lineWidth,r.prototype.draw.call(this,t)}}},e.PaneRendererArea=TradingView.PaneRendererArea=n},function(t,e,i){"use strict";function n(t,e,i,n,o){var r,s,a,l,c;for(this._canvasesMap={},this._lines=t.split(/[^\S\r\n]*(?:\r\n|\r|\n)/),this._font=this._fontStyle(e,i,n,o),this._fontSize=o,r=$("<canvas>"),s=r.get(0).getContext("2d"),s.font=this._font,a=0,l=0;l<this._lines.length;l++)c=s.measureText(this._lines[l]).width,a=Math.max(a,c);this.textImageWidth=a+1,this.textImageHeight=this._lines.length*o}n.prototype.paintTo=function(t,e,i,n,o,r){var s=this._getTextImage(e),a=this._x(i,o,this.textImageWidth),l=this._y(n,r,this.textImageHeight);t.drawImage(s,a-.5,l-.5)},n.prototype._getTextImage=function(t){var e,i,n,o,r;if(this._canvasesMap[t])return this._canvasesMap[t].get(0);for(e=$("<canvas>").attr("width",this.textImageWidth).attr("height",this.textImageHeight),i=e.get(0).getContext("2d"),i.textBaseline="top",i.font=this._font,i.textAlign="center",i.fillStyle=t,n=Math.round(this.textImageWidth/2),o=0,r=0;r<this._lines.length;r++)i.fillText(this._lines[r],n,o),o+=this._fontSize;return this._canvasesMap[t]=e,e.get(0)},n.prototype._x=function(t,e,i){var n=t;switch(e){case"left":break;case"right":n-=i;break;case"center":n-=i/2}return Math.round(n)},n.prototype._y=function(t,e,i){var n=t;switch(e){case"top":break;case"bottom":n-=i;break;case"middle":n-=i/2}return Math.round(n)},n.prototype._fontStyle=function(t,e,i,n){return(t?"bold ":"")+(e?"italic ":"")+n+"px "+i},t.exports=n},function(t,e,i){"use strict";function n(t){this._props=t,this._text="",this._size="12px",this._bold=!1}n.prototype.text=function(){return this._text},n.prototype.setText=function(t){this._text=t},n.prototype.color=function(){return this._props.scalesProperties.textColor.value()},n.prototype.bold=function(){return this._bold},n.prototype.size=function(){return this._size},t.exports=n},function(t,e,i){"use strict";function n(t,e){this.handler=t,this.customId=e}function o(){}var r=i(12).declareClassAsPureInterface;TradingView.WEB_SOCKET_WAS_CONNECTED=!1,o.REBIND_STUDY_STANDALONE_TO_CHILD=1,
o.REBIND_STUDY_CHILD_TO_STANDALONE=2,o.prototype.defaultWatchlistSymbols=function(){},o.prototype.defaultResolutions=function(){},o.prototype.supportedSymbolsTypes=function(){},o.prototype.supportedExchangesList=function(){},o.prototype.futuresRegex=function(){},o.prototype.quoteCreateSession=function(t){},o.prototype.quoteDeleteSession=function(t){},o.prototype.quoteSetFields=function(t,e){},o.prototype.quoteAddSymbols=function(t,e){},o.prototype.quoteRemoveSymbols=function(t,e){},o.prototype.quoteFastSymbols=function(t,e){},o.prototype.depthCreateSession=function(t,e,i){},o.prototype.depthDeleteSession=function(t){},o.prototype.depthSetSymbol=function(t,e){},o.prototype.depthClearSymbol=function(t){},o.prototype.depthSetScale=function(t,e){},o.prototype.chartCreateSession=function(t,e){},o.prototype.chartDeleteSession=function(t){},o.prototype.createSession=function(t,e){},o.prototype.removeSession=function(t){},o.prototype.connected=function(){},o.prototype.connect=function(){},o.prototype.disconnect=function(){},o.prototype.switchTimezone=function(t,e){},o.prototype.resolveSymbol=function(t,e,i,n,o){},o.prototype.createSeries=function(t,e,i,n,o,r,s){},o.prototype.removeSeries=function(t,e,i){},o.prototype.modifySeries=function(t,e,i,n,o,r){},o.prototype.requestMoreData=function(t,e,i,n){},o.prototype.requestMetadata=function(t,e,i){},o.prototype.isCanCreateStudy=function(t,e){},o.prototype.createStudy=function(t,e,i,n,o,r,s){},o.prototype.rebindStudy=function(t,e,i,n,o,r,s,a){},o.prototype.removeStudy=function(t,e,i){},o.prototype.modifyStudy=function(t,e,i,n,o){},o.prototype.createPointset=function(t,e,i,n,o,r,s){},o.prototype.modifyPointset=function(t,e,i,n,o){},o.prototype.removePointset=function(t,e,i){},o.prototype.requestMoreTickmarks=function(t,e,i,n){},o.prototype.requestFirstBarTime=function(t,e,i,n){},o.prototype._invokeHandler=function(t,e){},o.prototype._sendRequest=function(t,e){},o.prototype._onMessage=function(t){},o.prototype._convertTimescaleResponse=function(t){},o.prototype._dispathNotification=function(t){},o.prototype._invokeNotificationHandler=function(t,e,i){},o.prototype._notifySessions=function(t){},o.prototype.unpack=function(t){},o.prototype.searchSymbols=function(t,e,i,n,o,r,s,a,l){},o.prototype.serverTimeOffset=function(){},o.prototype.getMarks=function(t,e,i,n,o){},o.prototype.getTimescaleMarks=function(t,e,i,n,o){},r(o,"ChartApiInterface"),t.exports.HandlerInfo=n,t.exports.ChartApiInterface=o},function(t,e,i){"use strict";function n(){a.call(this)}function o(t,e){this._constructor="LineToolFibSpeedResistanceArcs";var o=e||this.createPropertiesObject("linetoolfibwedge");r.call(this,t,o),t._fibWedgeLabelsCache||(t._fibWedgeLabelsCache=new n),i.e(0).then(function(t){var e=i(816).FibWedgePaneView;this._setPaneViews([new e(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var r=i(1).LineDataSource,s=i(18),a=i(76),l=i(2).propertyPages;inherit(n,a),n.prototype.levelsCount=function(){return o.LevelsCount},inherit(o,r),o.LevelsCount=11,o.prototype.getCache=function(){
return this._model._fibWedgeLabelsCache||(this._model._fibWedgeLabelsCache=new n),this._model._fibWedgeLabelsCache},o.prototype.pointsCount=function(){return 3},o.prototype.title=function(){return"Fib Wedge"},o.prototype.name=function(){return"Fib Wedge"},o.prototype.setPoint=function(t,e){var i,n,o,s,a,l,c;r.prototype.setPoint.call(this,t,e),this._recursiveGuard||(this._recursiveGuard=!0,2===t?(i=this.pointToScreenPoint(this._points[0])[0],n=this.pointToScreenPoint(this._points[1])[0],o=this.pointToScreenPoint(this._points[2])[0],s=o.subtract(i).length(),a=n.subtract(i).normalized(),n=i.add(a.scaled(s)),l=this.screenPointToPoint(n),this._properties.points[1].price.setValue(l.price),this._properties.points[1].bar.setValue(l.index)):(i=this.pointToScreenPoint(this._points[0])[0],n=this.pointToScreenPoint(this._points[1])[0],o=this.pointToScreenPoint(this._points[2])[0],c=n.subtract(i).length(),a=o.subtract(i).normalized(),o=i.add(a.scaled(c)),l=this.screenPointToPoint(o),this._properties.points[2].price.setValue(l.price),this._properties.points[2].bar.setValue(l.index)),this._recursiveGuard=!1)},o.prototype.addPoint=function(t){var e,i,n,o,s,a,l,c;return 2===this._points.length&&(e=this.pointToScreenPoint(this._points[0])[0],i=this.pointToScreenPoint(this._points[1])[0],n=this.pointToScreenPoint(t)[0],o=i.subtract(e).length(),s=n.subtract(e).normalized(),n=e.add(s.scaled(o)),a=this.ownerSource().firstValue(),l=this.priceScale().coordinateToPrice(n.y,a),c=Math.round(this._model.timeScale().coordinateToIndex(n.x)),t={index:c,price:l}),r.prototype.addPoint.call(this,t)},o.prototype.processErase=function(t,e){var i="level"+e,n=this.properties()[i].visible;t.setProperty(n,!1,"Erase level line")},o.prototype.createPropertiesObject=function(t,e,i){return new s(t,e,i,{range:[1,11]})},o.prototype.getInputsPropertyPage=function(){return null},o.prototype.getStylesPropertyPage=function(){return l.LineToolFibWedgeStylesPropertyPage},e.LineToolFibWedge=o},function(t,e,i){"use strict";var n,o,r,s,a;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"LineToolVertLineTimeAxisView",function(){return a}),n=i(0),o=i(203),r=i(204),s=i(205),a=function(t){function e(e,i){var n=t.call(this)||this;return n._source=e,n._model=i,n._invalidated=!0,n._renderer=new r.TimeAxisViewRenderer,n}return n.c(e,t),e.prototype.update=function(){this._invalidated=!0},e.prototype.updateImpl=function(){var t,e;this._model.timeScale().isEmpty()||0!==this._source.points().length&&(this._text="",this._background=this._source.properties().linecolor.value(),t=this._source.points()[0].index,this._coordinate=this._model.timeScale().indexToCoordinate(t),e=this._model.timeScale().indexToUserTime(t),e&&(this._text=new s.AbbreviatedDateTimeFormatter(this._model.mainSeries().isDWM()).format(e)),this._invalidated=!1)},e.prototype.renderer=function(){return this._invalidated&&this.updateImpl(),this._renderer.setData({width:this._model.timeScale().width(),text:this._text,coordinate:this._coordinate,color:this.color(),background:this._background,visible:!0}),
this._renderer},e}(o.TimeAxisView)},function(t,e,i){"use strict";(function(t){function n(t,e){this._pane=t,this._timeScale=e}function o(t){this._line=t}function r(t,e){this._adapter=new o(this),this._constructor="LineToolExecution";var n=e||new l("linetoolexecution");this.customization={forcePriceAxisLabel:!1,disableSelection:!0,disableErasing:!0},s.call(this,t,n),i.e(0).then(function(t){var e=i(897).ExecutionPaneView;this._setPaneViews([new e(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var s=i(1).LineDataSource,a=i(156),l=i(3).DefaultProperty,c=i(20).PlotRowSearchMode;n.prototype._cachedByBarIndexOrderedExecutions={},n.recreateOrderedByBarsSourcesCache=function(t){var e,i,o,r,s;for(n.clearOrderedByBarsSourcesCache(),e=n.prototype,i=t.orderedSources(),o=0;o<i.length;++o)r=i[o],r._adapter&&void 0!==r._adapter._index&&(s=e._cachedByBarIndexOrderedExecutions[r._adapter._index],e._cachedByBarIndexOrderedExecutions[r._adapter._index]=s||[],e._cachedByBarIndexOrderedExecutions[r._adapter._index].push(r))},n.clearOrderedByBarsSourcesCache=function(){n.prototype._cachedByBarIndexOrderedExecutions={}},n.prototype.getXYCoordinate=function(t,e,i){var n,o,s,a,l,h,u,d,p,_,f=0,m=t.getDirection(),g="buy"===m,y=this._pane.model().mainSeries();if(y.bars&&(n=g?10:-10,null!==(o=y.bars().search(i,c.NearestLeft))&&(i=o.index,s=g?o.value[TradingView.LOW_PLOT]:o.value[TradingView.HIGH_PLOT],a=y.priceScale(),l=y.firstValue(),f=a.priceToCoordinate(s,l)+n)),t._index=i,h=e.visibleBars(),!isFinite(i)||null===h||i>h.lastBar()||i<h.firstBar())return{x:-1,y:-1};for(u=this._cachedByBarIndexOrderedExecutions[i]||this._pane.orderedSources(),d=u.length-1;d>=0;--d)if((p=u[d])instanceof r&&p._adapter._index===i&&p._adapter.getDirection()===m){if(p===t._line)break;_=p._adapter._height(),f=g?f+_:f-_}return{x:e.indexToCoordinate(i),y:f}},o.prototype._height=function(){var t,e=this.getArrowHeight(),i=this.getArrowSpacing();return this.getText()&&a.fontHeight(this.getFont()),t=10,e+i+0+t},o.prototype.getIndex=function(){return this._line._model.timeScale().baseIndex()-this._line.points()[0].index},o.prototype.setIndex=function(t){var e,i=this._line._model.timeScale(),n=i.baseIndex(),o=n-Math.abs(t);return this._line.startMoving(this._line.points()[0]),e=TradingView.merge({},this._line.points()[0]),e.index=o,this._line.move(e),this._line.endMoving(),this},o.prototype.getTime=function(){return this._unixtime},o.prototype.setTime=function(t){var e=this._line._model.mainSeries();return this._unixtime=ChartApiInstance.alignTimePoint?ChartApiInstance.alignTimePoint(t,e.interval(),e.symbolInfo()):t,this._line.restorePoints([{offset:0,price:this.getPrice(),time_t:this._unixtime}],[]),this._line.createServerPoints(),this},o.prototype.getPrice=function(){return this._line.points().length>0?this._line.points()[0].price:this._line._timePoint.length>0?this._line._timePoint[0].price:void 0},o.prototype.setPrice=function(t){return this._line.points().length>0&&(this._line.points()[0].price=t),this._line._timePoint.length>0&&(this._line._timePoint[0].price=t),
this},o.prototype.getText=function(){return this._line.properties().text.value()},o.prototype.setText=function(t){return this._line.properties().text.setValue(t||""),this._line.updateAllViewsAndRedraw(),this},o.prototype.getArrowHeight=function(){return this._line.properties().arrowHeight.value()},o.prototype.setArrowHeight=function(t){return this._line.properties().arrowHeight.setValue(t||5),this},o.prototype.getArrowSpacing=function(){return this._line.properties().arrowSpacing.value()},o.prototype.setArrowSpacing=function(t){return this._line.properties().arrowSpacing.setValue(t||1),this},o.prototype.getDirection=function(){return this._line.properties().direction.value()},o.prototype.setDirection=function(t){return this._line.properties().direction.setValue(t||"buy"),this},o.prototype.getArrowColor=function(){return a.getColorFromProperties(this._line.properties().arrowColor,this._line.properties().arrowTransparency)},o.prototype.setArrowColor=function(t){return a.setColorToProperties(t,this._line.properties().arrowColor,this._line.properties().arrowTransparency),this},o.prototype.getTextColor=function(){return a.getColorFromProperties(this._line.properties().textColor,this._line.properties().textTransparency)},o.prototype.setTextColor=function(t){return a.setColorToProperties(t,this._line.properties().textColor,this._line.properties().textTransparency),this},o.prototype.getFont=function(){return a.getFontFromProperties(this._line.properties().fontFamily,this._line.properties().fontSize,this._line.properties().fontBold,this._line.properties().fontItalic)},o.prototype.setFont=function(t){return a.setFontToProperties(t,this._line.properties().fontFamily,this._line.properties().fontSize,this._line.properties().fontBold,this._line.properties().fontItalic),this},o.prototype.setTooltip=function(t){return null==t?t="":t+="",this._line.properties().tooltip.setValue(t),this},o.prototype.getTooltip=function(){return this._line.properties().tooltip.value()},o.prototype.remove=function(){this._line._model.removeSource(this._line),delete this._line},inherit(r,s),r.POINTS_COUNT=1,r.skipMagnetting=!0,r.prototype.pointsCount=function(){return r.POINTS_COUNT},r.prototype.title=function(){return"Execution"},r.prototype.name=function(){return"Execution"},r.prototype.hasContextMenu=function(){return!1},r.prototype.state=function(){return null},r.prototype.updateAllViews=function(){return this._isVisible()?s.prototype.updateAllViews.call(this):null},r.prototype.priceAxisViews=function(t,e){return this._isVisible()?s.prototype.priceAxisViews.call(this,t,e):null},r.prototype._isVisible=function(){return this._model.properties().tradingProperties.showExecutions.value()},r.prototype.paneViews=function(e){return TradingView.printing&&!t.enabled("snapshot_trading_drawings")?null:this._model.properties().tradingProperties.showExecutions.value()?s.prototype.paneViews.call(this,e):null},r.prototype.userEditEnabled=function(){return!1},r.prototype.showInObjectTree=function(){return!1},r.prototype.getInputsPropertyPage=function(){return null},
e.ExecutionsPositionController=n,e.LineToolExecution=r}).call(e,i(4))},function(t,e,i){"use strict";function n(t,e,i){return new l(t,e,i)}var o,r,s,a,l;e.a=n,o=i(0),r=i(12),i.n(r),s=i(18),a=i.n(s),l=function(t){function e(e,i,n){return t.call(this,e,i,n,{names:["width","color","visible"]})||this}return o.c(e,t),e.prototype._iterateLevels=function(t,e){var i,n,o;for(i in t.levels)if(t.levels[i]&&Object(r.isSameType)(t.levels[i],e.typecheck())){n=e.tpl();for(o in this._map.names)this._map.names.hasOwnProperty(o)&&(n=e.fill(o,this._map.names[o],t.levels[i],n));t.levels[i]=n}return t},e}(a.a)},function(t,e,i){"use strict";function n(t,e){this._constructor="LineTool5PointsPattern";var n=e||new r("linetool5pointspattern");o.call(this,t,n),i.e(0).then(function(t){var e=i(817).Pattern5PaneView;this._setPaneViews([new e(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var o=i(1).LineDataSource,r=i(3).DefaultProperty,s=i(245).DateTimeFormatter,a=i(2).propertyPages;inherit(n,o),n.prototype.pointsCount=function(){return 5},n.prototype.title=function(){return"XABCD Pattern"},n.prototype.name=function(){return"XABCD Pattern"},n.prototype._tooltipFieldsHash={time0:{title:"Date 1",value:null},price0:{title:"Price 1",value:null},time1:{title:"Date 2",value:null},price1:{title:"Price 2",value:null},time2:{title:"Date 3",value:null},price2:{title:"Price 3",value:null},time3:{title:"Date 4",value:null},price3:{title:"Price 4",value:null},time4:{title:"Date 5",value:null},price4:{title:"Price 5",value:null}},n.prototype._updateTooltip=function(){var t,e,i,n,o,r=this._tooltipFieldsHash,a=this.points().m_values;a[0]&&(e=this._model.timeScale().indexToUserTime(a[0].index),r.time0.value=e?new s(this._model.mainSeries().isDWM()).format(e):0,r.price0.value=this._model.mainSeries()._formatter.format(a[0].price)),a[1]&&(t=this._model.timeScale().indexToUserTime(a[1].index),r.time1.value=t?new s(this._model.mainSeries().isDWM()).format(t):0,r.price1.value=this._model.mainSeries()._formatter.format(a[1].price)),a[2]&&(i=this._model.timeScale().indexToUserTime(a[2].index),r.time2.value=i?new s(this._model.mainSeries().isDWM()).format(i):0,r.price2.value=this._model.mainSeries()._formatter.format(a[2].price)),a[3]&&(n=this._model.timeScale().indexToUserTime(a[3].index),r.time3.value=n?new s(this._model.mainSeries().isDWM()).format(n):0,r.price3.value=this._model.mainSeries()._formatter.format(a[3].price)),a[4]&&(o=this._model.timeScale().indexToUserTime(a[4].index),r.time4.value=t?new s(this._model.mainSeries().isDWM()).format(o):0,r.price4.value=this._model.mainSeries()._formatter.format(a[4].price))},n.prototype.tooltip=function(){return this._updateTooltip(),this._formatTooltip()},n.prototype.getStylesPropertyPage=function(){return a.LineToolLineTool5PointsPatternStylesPropertyPage},e.LineTool5PointsPattern=n},function(t,e,i){"use strict";function n(t,e){this._constructor="LineToolNote";var o=e||new a("linetoolnote");o.hasChild("text")||o.addChild("text",new s($.t("Text"))),o.addExclusion("text"),r.call(this,t,o),this.version=n.version,
i.e(0).then(function(t){var e=i(919).NotePaneView;this._setPaneViews([new e(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}function o(t,e){var i=e||new a("linetoolnoteabsolute");i.locked.value()||i.locked.setValue(!0),n.call(this,t,i)}var r=i(1).LineDataSource,s=i(16),a=i(3).DefaultProperty,l=i(2).propertyPages;inherit(n,r),n.TOOLTIP_WIDTH=300,n.TOOLTIP_PADDING=10,n.TOOLTIP_LINESPACING=5,n.version=1,n.prototype.pointsCount=function(){return 1},n.prototype.title=function(){return $.t("Note")},n.prototype.name=function(){return"Note"},n.prototype.applyTemplate=function(t){delete t.locked,delete t.text,r.prototype.applyTemplate.call(this,t)},n.prototype.getTooltipWidth=function(){return n.TOOLTIP_WIDTH},n.prototype.getTooltipPadding=function(){return n.TOOLTIP_PADDING},n.prototype.getTooltipLineSpacing=function(){return n.TOOLTIP_LINESPACING},inherit(o,n),o.prototype.title=function(){return $.t("Anchored Note")},o.prototype.name=function(){return"Anchored Note"},n.prototype.state=function(t){var e=r.prototype.state.call(this,t);return t&&(e.state.fixedSize=!1),e},n.prototype.getStylesPropertyPage=function(){return l.LineToolNotePropertyPage},e.LineToolNote=n,e.LineToolNoteAbsolute=o},function(t,e,i){"use strict";function n(t,e){this._constructor="LineToolText";var n=e||new l("linetooltext");n.hasChild("text")||n.addChild("text",new a($.t("Text"))),n.addExclusion("text"),r.call(this,t,n),this._timeScale=t.timeScale(),this._barSpacing=t.timeScale().barSpacing(),i.e(0).then(function(t){var e=i(421).TextPaneView;this._setPaneViews([new e(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}function o(t,e){var i=e||new l("linetooltextabsolute");i.locked.value()||i.locked.setValue(!0),n.call(this,t,i)}var r=i(1).LineDataSource,s=i(34).DataSource,a=i(16),l=i(3).DefaultProperty,c=i(2).propertyPages;inherit(n,r),n.MIN_WIDTH=100,n.prototype.setPoint=function(t,e){var i,o,r=this.properties();if(0===t&&r.wordWrapWidth&&r.wordWrapWidth.value()){if(i=r.locked&&r.locked.value()?this.fixedPoints()[0].x:this._timeScale.indexToCoordinate(this.points()[0].index),o=this._timeScale.indexToCoordinate(e.index)-i-~~(r.fontsize.value()/6),!isFinite(o))return;r.wordWrapWidth.setValue(Math.max(n.MIN_WIDTH,o))}},n.prototype.pointsCount=function(){return 1},n.prototype.title=function(){return $.t("Text",{context:"tool"})},n.prototype.name=function(){return"Text"},n.prototype.setPriceScale=function(t){s.prototype.setPriceScale.call(this,t),t&&t.priceRange()&&(this._priceDencity=t.height()/t.priceRange().length(),this._isPriceDencityLog=t.isLog())},n.prototype.restoreSize=function(){this._barSpacing=this._model.timeScale().barSpacing(),this._priceDencity=this.priceScale().height()/this.priceScale().priceRange().length(),this.updateAllViews(),this._model.updateSource(this)},n.prototype.applyTemplate=function(t){delete t.locked,delete t.text,r.prototype.applyTemplate.call(this,t)},inherit(o,n),o.prototype.title=function(){return $.t("Anchored Text")},o.prototype.name=function(){return"Anchored Text"},n.prototype.state=function(t){
var e=r.prototype.state.call(this,t);return t&&(e.state.fixedSize=!1),e},n.prototype.getInputsPropertyPage=function(){return null},n.prototype.getStylesPropertyPage=function(){return c.LineToolTextStylesPropertyPage},e.LineToolText=n,e.LineToolTextAbsolute=o},function(t,e,i){"use strict";function n(t,e){return r.b(this,void 0,void 0,function(){var i,n,a,l,c,h,u,d,p;return r.d(this,function(r){switch(r.label){case 0:return i=NaN,(n=NaN,a="",l=t.proSymbol(),c=(t.symbolInfo()||{name:null}).name||l,h=t.priceScale(),e)?(u=t.firstValue(),i=null!=u?h.coordinateToPrice(e,u):null,[4,o(l,i)]):[3,2];case 1:i=r.sent(),a=t.formatter().format(i),r.label=2;case 2:return d=t.bars().last(),null!==d&&(n=Object(s.ensure)(d.value[TradingView.CLOSE_PLOT])),p=!!(t.symbolInfo()||{is_tradable:!1}).is_tradable,[2,{symbol:l,displaySymbol:c,value:i,formattedValue:a,last:n,symbolInfoTradable:p}]}})})}function o(t,e){return r.b(this,void 0,void 0,function(){var i,n,o,l,h,u;return r.d(this,function(r){switch(r.label){case 0:return null===e?[2,null]:null===(i=Object(s.ensureNotNull)(Object(a.tradingService)()).activeBroker())||1!==i.connectionStatus()?[2,e]:(o=i,o?[4,i.isTradable(t)]:[3,2]);case 1:o=r.sent(),r.label=2;case 2:if(!(n=o))return[2,e];r.label=3;case 3:return r.trys.push([3,5,,6]),[4,i.symbolInfo(t)];case 4:return l=r.sent(),h=l.minTick,[2,Math.round(e/h)*h];case 5:return u=r.sent(),c.logError("Unable to resolve symbol: "+t),[2,e];case 6:return[2]}})})}var r,s,a,l,c;Object.defineProperty(e,"__esModule",{value:!0}),e.createTradeContext=n,r=i(0),s=i(6),i.n(s),a=i(80),l=i(5),c=Object(l.getLogger)("Chart.TradeContext")},function(t,e,i){"use strict";var n,o,r,s,a,l,c,h,u,d;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"SeriesPriceAxisView",function(){return d}),n=i(0),o=i(6),i.n(o),r=i(23),s=i(54),a=i(4),i.n(a),l=i(43),c=a.enabled("countdown"),h=a.enabled("price_scale_always_last_bar_value"),u=[l.STYLE_BARS,l.STYLE_CANDLES,l.STYLE_LINE,l.STYLE_AREA,l.STYLE_HOLLOW_CANDLES,l.STYLE_HEIKEN_ASHI],d=function(t){function e(e,i){var n=t.call(this)||this;return n._source=e,n._data=i,n}return n.c(e,t),e.prototype._getSource=function(){return this._source},e.prototype._getData=function(){return this._data},e.prototype._isCountdownEnabled=function(){return c},e.prototype._countdownText=function(){var t,e,i,n,s,a,l,c,h,u,d;return this._source.isDWM()?"":(t=1e3*Object(o.ensure)(Object(o.ensureNotNull)(this._source.data().bars().last()).value[0]),e=1e3*this._source.serverTimeOffset(),i=r.Interval.parse(this._source.interval()),n=i.multiplier()||0,s=i.isSeconds()?n:60*n,a=t.valueOf()+1e3*s,l=(new Date).valueOf()+e,(c=Math.round((a-l)/1e3))<=0?"":(c=Math.min(c,s),h=null,c>=3600&&(h=this._addLeadingZero(Math.floor(c/3600))),c%=3600,u=this._addLeadingZero(Math.floor(c/60)),c%=60,d=this._addLeadingZero(Math.floor(c)),null!==h?h+":"+u+":"+d:u+":"+d))},e.prototype._updateRendererData=function(t){var e,i,n,o,r,s,a,d;t.visible=!1,e=this._source.properties(),i=this._data.model.properties().scalesProperties.showSeriesLastValue.value(),
n=c&&-1!==u.indexOf(e.style.value())&&e.showCountdown.value(),(i||n)&&(o=this._source.lastValueData(void 0,h),o.noData||e.style.value()===l.STYLE_HEIKEN_ASHI&&e.haStyle.showRealLastPrice.value()&&(r=this._source.lastValueData(void 0,!1),s=this._source.lastValueData(void 0,!0),!r.noData&&!s.noData&&r.index===s.index)||(a=i?o.text:"",d=n?this._countdownText():"",0===a.length?(t.text=d,t.secondLine=""):(t.text=a,t.secondLine=d),0===a.length&&0===d.length||(t.visible=!0,t.background=this._source.priceLineColor(o.color),t.color=this.generateTextColor(t.background),t.coordinate=o.coordinate,t.floatCoordinate=o.floatCoordinate)))},e.prototype._addLeadingZero=function(t){return("0"+t).slice(-2)},e}(s.a)},function(t,e,i){"use strict";var n,o,r,s,a,l,c,h,u,d,p,_;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"SeriesDataWindowView",function(){return _}),n=i(0),o=i(29),i.n(o),r=i(79),i.n(r),s=i(137),a=i(142),l=i(20),c=i(58),h=i(340),u=new c.PercentageFormatter,d=window.t("n/a"),p=d+" ("+d+"%)",_=function(t){function e(e,i){var n=t.call(this)||this;return n._invalidated=!0,n._series=e,n._model=i,n._items.push(new s.DataWindowItem(window.t("Open"),"")),n._items.push(new s.DataWindowItem(window.t("High"),"")),n._items.push(new s.DataWindowItem(window.t("Low"),"")),n._items.push(new s.DataWindowItem(window.t("Close"),"")),n._items.push(new s.DataWindowItem(window.t("Change"),"")),n.update(),n}return n.c(e,t),e.prototype.update=function(){this._invalidated=!0},e.prototype.items=function(){return this._invalidated&&(this._updateImpl(),this._invalidated=!1),this._items},e.prototype.dump=function(){return{header:this._header,items:this._items}},e.prototype._updateImpl=function(){var t,e,i,n,s,c,_,f,m,g,y,v,b,S,w,P,T,C,x,k,L,I,A=this._series.symbolInfo();if(A?(this._header=[A.name,Object(a.translatedIntervalString)(this._series.interval()),A.exchange].join(", "),this._title=A.description):this._header=this._series.symbol(),this._items[0].setValue(d),this._items[1].setValue(d),this._items[2].setValue(d),this._items[3].setValue(d),this._items[4].setValue(p),!this._model.timeScale().isEmpty()&&0!==this._series.bars().size()){if(t=this._model.crossHairSource().appliedIndex(),!Object(r.isNumber)(t)){if(null===(e=this._series.data().last()))return;t=e.index}if(void 0!==(i=this._series.nearestIndex(t,l.PlotRowSearchMode.NearestLeft))&&(n=this._series.data().valueAt(i),s=this._series.model().paneForSource(this._series),null!==n&&null!==s&&(c=n[1],_=n[2],f=n[3],m=n[4],null!=c&&null!=_&&null!=f&&null!=m&&(g=this._series.formatter(),this._items[0].setValue(g.format(c)),this._items[1].setValue(g.format(_)),this._items[2].setValue(g.format(f)),this._items[3].setValue(g.format(m)),y=Object(h.a)(c,m),v=g.format(m-c,!0)+" ("+u.format(y,!0)+")",this._items[4].setValue(v),b=this._series.barColorer(),S=b.barStyle(i,!1),w=null!=S.barBorderColor?S.barBorderColor:S.barColor,void 0!==(P=s.properties().child("background"))))))for(T=P.value(),C=Object(o.parseRgb)(w),x=Object(o.parseRgb)(T),
Object(o.distanceRgb)(C,x)<70&&(w=Object(o.rgbToHexString)(Object(o.invertRgb)(C))),k=0,L=this._items;k<L.length;k++)I=L[k],I.setColor(w)}},e}(s.DataWindowView)},function(t,e,i){"use strict";function n(t,e){return 100*(e-t)/t}e.a=n},function(t,e,i){"use strict";function n(t,e){this.m_series=t,this.m_model=e,this.m_bars=[],this._invalidated=!0,this._isMarkersEnabled=T.enabled("source_selection_markers")}function o(t,e){n.call(this,t,e)}function r(t,e){n.call(this,t,e)}function s(t,e){n.call(this,t,e)}function a(t,e){n.call(this,t,e)}function l(t,e){this.m_series=t,this.m_model=e,this.m_items=[]}function c(t,e){l.call(this,t,e),this._invaidated=!0}function h(t,e){l.call(this,t,e),this._invaidated=!0}function u(t,e){l.call(this,t,e),this._invaidated=!0,this._renderer=new v}var d=i(7).Point,p=i(149).SelectionRenderer,_=i(10).HitTestResult,f=i(199).PaneRendererBars,m=i(164).PaneRendererLine,g=i(326).PaneRendererArea,y=i(249).PaneRendererCandles,v=i(731).PaneRendererBaseline,b=i(66).CompositeRenderer,S=i(200),w=i(35),P=i(20).PlotRowSearchMode,T=i(4);n.prototype.update=function(){this._invalidated=!0},n.prototype._updateImpl=function(){var t,e,i,n,o,r,s,a,l,c,h,u,p,f,m=this;if(this.m_bars=[],!this.m_model.timeScale().isEmpty()&&!this.m_series.priceScale().isEmpty()&&null!==(t=this.m_model.timeScale().visibleBars())&&0!==this.m_series.bars().size()){for(e=this.m_series.nearestIndex(t.firstBar(),P.NearestRight),i=this.m_series.nearestIndex(t.lastBar(),P.NearestLeft);e<=i&&null===this.m_series.bars().valueAt(e);e++);if(!(e>i)&&(t=this.m_series.bars().range(e,i),n=this.m_series.priceScale(),o=this.m_series.barColorer(),r={},t.each(function(t,e){var i,n;void 0!==e[TradingView.OPEN_PLOT]&&void 0!==e[TradingView.HIGH_PLOT]&&void 0!==e[TradingView.LOW_PLOT]&&void 0!==e[TradingView.CLOSE_PLOT]&&(i={},i.time=Math.round(t),i.open=e[TradingView.OPEN_PLOT],i.high=e[TradingView.HIGH_PLOT],i.low=e[TradingView.LOW_PLOT],i.close=e[TradingView.CLOSE_PLOT],r.value=e,n=e[TradingView.STYLE_PLOT]?e[TradingView.STYLE_PLOT]:o.barStyle(t,!1,r),e[TradingView.STYLE_PLOT]=n,r.previousValue=e,i.color=n.barColor,i.borderColor=n.barBorderColor,i.wickColor=n.barWickColor,i.hollow=n.isBarHollow,m.m_bars.push(i))},this),0!==this.m_bars.length&&(s=this.m_bars[0].close,n.barPricesToCoordinates(this.m_bars,s)),this.m_model.timeScale().barIndexesToCoordinates(this.m_bars),this.m_series===this.m_model.selectedSource()))for(a=S(e,i),this._selectionData={points:[]},this._selectionData.hittestResult=_.REGULAR,l=0;l<a.length;l++)c=a[l],null!==(h=this.m_series.bars().valueAt(c))&&(u=.5*(h[TradingView.OPEN_PLOT]+h[TradingView.CLOSE_PLOT]),p=this.m_model.timeScale().indexToCoordinate(c),f=this.m_series.priceScale().priceToCoordinate(u,s),this._selectionData.points.push(new d(p,f)))}},n.prototype.items=function(){return this.m_bars},n.prototype.dump=function(){var t={};return t.bars=this.m_bars,t},inherit(o,n),o.prototype.renderer=function(){var t,e;return this._invalidated&&(this._updateImpl(),this._invalidated=!1),t={},t.bars=this.m_bars,
t.barSpacing=this.m_model.timeScale().barSpacing(),t.dontDrawOpen=this.m_series.properties().barStyle.dontDrawOpen.value(),e=new b,e.append(new f(t)),this.m_series===this.m_model.selectedSource()&&this._isMarkersEnabled&&e.append(new p(this._selectionData)),e},inherit(r,n),r.prototype.renderer=function(){var t,e;return this._invalidated&&(this._updateImpl(),this._invalidated=!1),t={},t.bars=this.m_bars,t.barSpacing=this.m_model.timeScale().barSpacing(),t.drawWick=this.m_series.properties().candleStyle.drawWick.value(),t.drawBorder=this.m_series.properties().candleStyle.drawBorder.value(),t.borderColor=this.m_series.properties().candleStyle.borderColor.value(),t.wickColor=this.m_series.properties().candleStyle.wickColor.value(),e=new b,e.append(new y(t)),this.m_series===this.m_model.selectedSource()&&this._isMarkersEnabled&&e.append(new p(this._selectionData)),e},inherit(s,n),s.prototype.renderer=function(){var t,e;return this._invalidated&&(this._updateImpl(),this._invalidated=!1),t={},t.bars=this.m_bars,t.barSpacing=this.m_model.timeScale().barSpacing(),t.drawWick=this.m_series.properties().haStyle.drawWick.value(),t.drawBorder=this.m_series.properties().haStyle.drawBorder.value(),t.borderColor=this.m_series.properties().haStyle.borderColor.value(),t.wickColor=this.m_series.properties().haStyle.wickColor.value(),e=new b,e.append(new y(t)),this.m_series===this.m_model.selectedSource()&&this._isMarkersEnabled&&e.append(new p(this._selectionData)),e},inherit(a,n),a.prototype.renderer=function(){var t,e;return this._invalidated&&(this._updateImpl(),this._invalidated=!1),t={},t.bars=this.m_bars,t.barSpacing=this.m_model.timeScale().barSpacing(),t.drawWick=this.m_series.properties().hollowCandleStyle.drawWick.value(),t.drawBorder=this.m_series.properties().hollowCandleStyle.drawBorder.value(),t.borderColor=this.m_series.properties().hollowCandleStyle.borderColor.value(),t.wickColor=this.m_series.properties().hollowCandleStyle.wickColor.value(),e=new b,e.append(new y(t)),this.m_series===this.m_model.selectedSource()&&this._isMarkersEnabled&&e.append(new p(this._selectionData)),e},l.prototype.update=function(){var t,e,i,n,o,r,s,a,l,c,h,u,p,f;if(this.m_items=[],!this.m_model.timeScale().isEmpty()&&this.m_series.priceScale()&&!this.m_series.priceScale().isEmpty()&&null!==(t=this.m_model.timeScale().visibleBars())&&0!==this.m_series.bars().size()&&(e=this.m_series.nearestIndex(t.firstBar(),P.NearestRight),i=this.m_series.nearestIndex(t.lastBar(),P.NearestLeft),t=this.m_series.bars().range(e,i),o=this.m_series.priceScale(),r={color:this.m_series.properties().lineStyle.color.value()},s=this.m_series.barFunction(),t.each(function(t,e){var i,o=s(e);return void 0!==o&&null!==o&&(void 0===n&&(n=o),i=new d(t,o),i.style=r,this.m_items.push(i),!1)}.bind(this)),o.pointsArrayToCoordinates(this.m_items,n),this.m_model.timeScale().indexesToCoordinates(this.m_items),this.m_series===this.m_model.selectedSource()))for(a=S(e,i),this._selectionData={points:[]},this._selectionData.hittestResult=_.REGULAR,l=0;l<a.length;l++)c=a[l],
h=this.m_series.data().valueAt(c),u=s(h),p=this.m_model.timeScale().indexToCoordinate(c),f=this.m_series.priceScale().priceToCoordinate(u,n),this._selectionData.points.push(new d(p,f))},inherit(c,l),c.prototype.update=function(){this._invalidated=!0},c.prototype.renderer=function(){var t,e,i,n;return this._invalidated&&(l.prototype.update.call(this),this._invalidated=!1),t=this.m_series.properties().lineStyle,e={barSpacing:this.m_model.timeScale().barSpacing(),items:this.m_items,lineColor:t.color.value(),lineStyle:t.linestyle.value(),withMarkers:t.styleType.value()===TradingView.Series.STYLE_LINE_TYPE_MARKERS,withSteps:t.styleType.value()===TradingView.Series.STYLE_LINE_TYPE_STEP,lineWidth:t.linewidth.value(),simpleMode:!0},i=new m(e),this.m_series===this.m_model.selectedSource()?(n=new b,n.append(i),this._isMarkersEnabled&&n.append(new p(this._selectionData))):n=i,n},inherit(h,l),h.prototype.update=function(){this._invalidated=!0},h.prototype.renderer=function(){var t,e,i;return this._invalidated&&(l.prototype.update.call(this),this._invalidated=!1),t={},t.simpleMode=!1,t.barSpacing=this.m_model.timeScale().barSpacing(),t.items=this.m_items,t.lineColor=this.m_series.properties().areaStyle.linecolor.value(),t.lineStyle=this.m_series.properties().areaStyle.linestyle.value(),t.lineWidth=this.m_series.properties().areaStyle.linewidth.value(),e=this.m_series.properties().areaStyle.transparency.value(),t.isSeries=!0,t.color1=w.generateColor(this.m_series.properties().areaStyle.color1.value(),e),t.color2=w.generateColor(this.m_series.properties().areaStyle.color2.value(),e),t.bottom=this.m_series.priceScale().height(),i=new b,i.append(new g(t)),this.m_series===this.m_model.selectedSource()&&this._isMarkersEnabled&&i.append(new p(this._selectionData)),i},inherit(u,l),u.prototype.update=function(){this._invalidated=!0},u.prototype._updateImpl=function(){var t,e;l.prototype.update.call(this),t=this.m_series.properties().baselineStyle,e=t.transparency.value(),this._topFillColor1=w.generateColor(t.topFillColor1.value(),e),this._topFillColor2=w.generateColor(t.topFillColor2.value(),e),this._bottomFillColor1=w.generateColor(t.bottomFillColor1.value(),e),this._bottomFillColor2=w.generateColor(t.bottomFillColor2.value(),e),this._topLineColor=t.topLineColor.value(),this._bottomLineColor=t.bottomLineColor.value(),this._topLineWidth=t.topLineWidth.value(),this._bottomLineWidth=t.bottomLineWidth.value(),this._barSpacing=this.m_model.timeScale().barSpacing(),this._bottom=this.m_series.priceScale().height(),this._baseLevelCoordinate=Math.round(this._bottom*(Math.abs(100-t.baseLevelPercentage.value())/100))},u.prototype.renderer=function(){this._invalidated&&(this._updateImpl(),this._invalidated=!1),this._renderer.setData({items:this.m_items,topFillColor1:this._topFillColor1,topFillColor2:this._topFillColor2,bottomFillColor1:this._bottomFillColor1,bottomFillColor2:this._bottomFillColor2,topLineColor:this._topLineColor,bottomLineColor:this._bottomLineColor,topLineWidth:this._topLineWidth,bottomLineWidth:this._bottomLineWidth,
lineStyle:CanvasEx.LINESTYLE_SOLID,barSpacing:this._barSpacing,baseLevelCoordinate:this._baseLevelCoordinate,bottom:this._bottom});var t=new b;return t.append(this._renderer),this.m_series===this.m_model.selectedSource()&&t.append(new p(this._selectionData)),t},e.SeriesBarsPaneView=o,e.SeriesCandlesPaneView=r,e.SeriesHollowCandlesPaneView=a,e.SeriesLinePaneView=c,e.SeriesAreaPaneView=h,e.SeriesHeikenAshiPaneView=s,e.SeriesBaselinePaneView=u},function(t,e,i){"use strict";var n,o,r,s,a,l,c;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"SeriesWaterlinePaneView",function(){return c}),n=i(0),o=i(7),i.n(o),r=i(143),s=i(343),a=i(10),l=i(83),c=function(t){function e(e){var i=t.call(this,e)||this,n={cursorType:s.PaneCursorType.VerticalResize,pressedMouseMoveHandler:function(t){var i=e.priceScale(),n=e.properties().baselineStyle,o=i.height(),r=100-t.y/o*100,s=r<0?0:Math.round(10*r)/10;n.baseLevelPercentage.setValue(Math.max(Math.min(s,100),0))}};return i._lineRenderer.setHitTest(new a.HitTestResult(a.HitTestResult.CUSTOM_MOVE,n)),i._lineRendererData.visible=!0,i._lineRendererData.linestyle=l.LINESTYLE_SPARSE_DOTTED,i}return n.c(e,t),e.prototype._updateImpl=function(){var t=this._series.properties().baselineStyle,e=Math.abs(100-t.baseLevelPercentage.value());this._lineRendererData.width=this._model.timeScale().width(),this._lineRendererData.height=this._series.priceScale().height(),this._lineRendererData.points=[new o.Point(0,Math.round(this._lineRendererData.height*(e/100)))],this._lineRendererData.color=t.baselineColor.value()},e}(r.a)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"PaneCursorType",function(){return n});var n;!function(t){t[t.Default=0]="Default",t[t.Pointer=1]="Pointer",t[t.Eraser=2]="Eraser",t[t.Dot=3]="Dot",t[t.Grabbing=4]="Grabbing",t[t.ZoomIn=5]="ZoomIn",t[t.VerticalResize=6]="VerticalResize"}(n||(n={}))},function(t,e,i){"use strict";function n(t){return t+"("+new Date(1e3*t).toUTCString()+")"}function o(t){var e,i,n,o;return t+="",e=t.slice(0),i=!1,n=e[e.length-1],-1==="DWM".indexOf(n)&&"S"!==n&&(i=!0,n=""),o=parseInt(i?e:e.length>1?e.slice(0,e.length-1):1),{resolution:n,interval:o}}var r,s=i(48),a=i(33),l=i(23).Interval,c=!1,h=null,u=0,d=function(t,e){this._session=new s.Session,this._session.init(t.timezone,t.session),this._symbolInfo=t,this._resolution=e,this._extrapolatedData=[],this._modelId=u++,this._valid=!!t.timezone&&!!t.session,c&&console.log('Created model "{0}", interval "{1}", session "{2}", tz "{3}"'.format(this._modelId,this._resolution,t.session,t.timezone))};d.prototype.uniqueId=function(){return this._modelId},d.prototype.isValid=function(){return this._valid},d.prototype._barBuilder=function(){if(!this._builderCache){var t=o(this._resolution);this._builderCache=s.newBarBuilder(t.resolution,t.interval,this._session,this._session)}return this._builderCache},d.prototype.distance=function(t,e){var i,o,r,a,l;return isNumber(t)&&isNumber(e)&&this.isValid()?(i=this._extrapolatedData.length>0?this._extrapolatedData[0]:null,
o=i&&this._extrapolatedData[this._extrapolatedData.length-1],1e3*t!==i&&(this._extrapolatedData=[1e3*t],i=null,o=null),(null===i||1e3*e>o)&&(r=500,a=s.extrapolateBarsFrontToTime(this._barBuilder(),o||1e3*t,1e3*e,r),this._extrapolatedData=this._extrapolatedData.concat(a)),(o=this._extrapolatedData[this._extrapolatedData.length-1])<1e3*e?{success:!1}:(l=this._extrapolatedData.indexOf(1e3*e),-1!==l?(c&&console.log('Model "{0}" "{1}", distance between "{2}" and "{3}" is "{4}"'.format(this._modelId,this._resolution,n(t),n(e),l)),{success:!0,result:l}):{success:!1})):{success:!1}},d.prototype.projectTime=function(t,e){var i,o,r,a;return isNumber(t)&&isNumber(e)&&this.isValid()?(i=this._extrapolatedData.length>0?this._extrapolatedData[0]:null,o=i&&this._extrapolatedData[this._extrapolatedData.length-1],1e3*t!==i&&(this._extrapolatedData=[1e3*t],i=null,o=null),(null===i||e>=this._extrapolatedData.length)&&(r=s.extrapolateBarsFrontByCount(this._barBuilder(),o||1e3*t,e-this._extrapolatedData.length+1),this._extrapolatedData=this._extrapolatedData.concat(r)),e<this._extrapolatedData.length?(a=this._extrapolatedData[e]/1e3,c&&console.log('Model "{0}" "{1}", proj.time from "{2}" offset "{3}" is "{4}"'.format(this._modelId,this._resolution,n(t),e,n(a))),a):t):t},r=function(t,e){this._source=t,this._target=e,this._isSessionTheSame=t._symbolInfo.timezone===e._symbolInfo.timezone&&t._symbolInfo.session===e._symbolInfo.session,this._isResolutionTheSame=t._resolution===e._resolution,this._shouldCorrectTradingDay=l.isDWM(t._resolution)&&!this._isSessionTheSame,this._cache={},null===h&&(h=new s.Session,h.init("Etc/UTC","24x7"))},r.prototype._sourceTargetBuilder=function(){var t,e;return this._sourceTargetBuilderCache||(t=o(this._target._resolution),e=this._isSessionTheSame?this._target._session:h,this._sourceTargetBuilderCache=s.newBarBuilder(t.resolution,t.interval,this._target._session,e)),this._sourceTargetBuilderCache},r.prototype.sourceTimeToTargetTime=function(t){var e,i,o,r,s,l;return this._isSessionTheSame&&this._isResolutionTheSame?t:isNumber(t)&&this._source.isValid()&&this._target.isValid()?(e=this._cache[t],e||(i=1e3*t,this._shouldCorrectTradingDay&&(o=a.utc_to_cal(this._source._session.timezone,i),o=this._source._session.spec.correctTradingDay(o,this._source._session.timezone),r=new Date(o),a.set_hms(r,0,0,0,0),i=r.valueOf()),s=this._sourceTargetBuilder(),s.moveTo(i),l=s.indexOfBar(i),e=s.startOfBar(Math.max(0,l))/1e3,this._cache[t]=e),c&&console.log('Model "{0}" "{1}" sourceTime "{2}" => model "{3}" "{4}" targetTime "{5}"'.format(this._source.uniqueId(),this._source._resolution,n(t),this._target.uniqueId(),this._target._resolution,n(e))),e):t},t.exports.SyncPoint=r,t.exports.SyncModel=d},function(t,e,i){"use strict";function n(t,e,i,n){var o;return o="study_"+(n.classId||n.shortId),new(o in d?d[o]:r.Study)(t,e,i,n)}var o,r,s,a,l,c,h,u,d,p;Object.defineProperty(e,"__esModule",{value:!0}),o=i(32),r=i(39),s=i(749),a=i(751),l=i(754),c=i(0),h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}
return c.c(e,t),e.prototype.hasContextMenu=function(){return!1},e.prototype.showInObjectTree=function(){return!1},e.prototype.isSavedInStudyTemplates=function(){return!1},e.prototype.isRemovedByStudyTemplates=function(){return!1},e.prototype.removeByRemoveAllStudies=function(){return!1},e.prototype.isUserDeletable=function(){return!1},e.prototype.statusView=function(){return null},e.prototype.isDraggable=function(){return!1},e.prototype.applyPreferences=function(t){this._properties.merge(t),void 0!==this._properties.graphics.vertlines&&this._properties.graphics.vertlines.sessBreaks.visible.listeners().fire(this._properties.graphics.vertlines.sessBreaks.visible),void 0!==this._properties.graphics.backgrounds&&(this._properties.graphics.backgrounds.inSession.visible.listeners().fire(this._properties.graphics.backgrounds.inSession.visible),this._properties.graphics.backgrounds.outOfSession.visible.listeners().fire(this._properties.graphics.backgrounds.outOfSession.visible))},e}(r.Study),h.prototype.superclass=r.Study,u=i(756),e.createStudy=n,d={study_PivotPointsStandard:s.study_PivotPointsStandard,study_Overlay:a.study_Overlay,study_Compare:l.study_Compare,study_Sessions:h,study_ScriptWithDataOffset:u.study_ScriptWithDataOffset};for(p in d)d.hasOwnProperty(p)&&(TradingView[p]=d[p])},function(t,e,i){"use strict";var n,o,r,s,a,l,c,h,u,d;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"OverlayDataWindowView",function(){return d}),n=i(0),o=i(137),r=i(43),s=i(58),a=i(20),l=i(340),c=new s.PercentageFormatter,h=window.t("n/a"),u=h+" ("+h+"%)",d=function(t){function e(e,i){var n=t.call(this)||this;return n._invalidated=!0,n._study=e,n._model=i,n._items.push(new o.DataWindowItem(window.t("Open"),"")),n._items.push(new o.DataWindowItem(window.t("High"),"")),n._items.push(new o.DataWindowItem(window.t("Low"),"")),n._items.push(new o.DataWindowItem(window.t("Close"),"")),n._items.push(new o.DataWindowItem(window.t("Change"),"")),n.update(),n}return n.c(e,t),e.prototype.items=function(){return this._invalidated&&(this._updateImpl(),this._invalidated=!1),this._items},e.prototype.update=function(){this._invalidated=!0},e.prototype._updateImpl=function(){var t,e,i,n,o,s,d,p,_,f,m,g,y,v,b,S,w,P,T,C,x,k,L;if(this._header=this._study.title(),!this._model.timeScale().isEmpty()){if(0===this._study.data().size())return this._items[0].setValue(h),this._items[1].setValue(h),this._items[2].setValue(h),this._items[3].setValue(h),void this._items[4].setValue(u);if(i=!1,n=this._study.properties().style.value(),n===r.STYLE_BARS?(t=this._study.properties().barStyle.upColor.value(),e=this._study.properties().barStyle.downColor.value(),i=this._study.properties().barStyle.barColorsOnPrevClose.value()):n===r.STYLE_CANDLES?(t=this._study.properties().candleStyle.upColor.value(),e=this._study.properties().candleStyle.downColor.value(),i=this._study.properties().candleStyle.barColorsOnPrevClose.value()):n===r.STYLE_HOLLOW_CANDLES?(t=this._study.properties().hollowCandleStyle.upColor.value(),
e=this._study.properties().hollowCandleStyle.downColor.value(),i=!0):n===r.STYLE_LINE?(t=this._study.properties().lineStyle.color.value(),e=t):n===r.STYLE_AREA&&(t=this._study.properties().areaStyle.linecolor.value(),e=t),o=this._study.series(),s=this._model.crossHairSource().appliedIndex(),void 0!==(d=o.nearestIndex(s,a.PlotRowSearchMode.NearestLeft))){if(null===(p=this._study.data().valueAt(d)))return;if(_=p[1],f=p[2],m=p[3],g=p[4],null==_||null==f||null==m||null==g)return;if(y=this._study.formatter(),this._items[0].setValue(y.format(_)),this._items[1].setValue(y.format(f)),this._items[2].setValue(y.format(m)),this._items[3].setValue(y.format(g)),v=Object(l.a)(_,g),b=y.format(g-_,!0)+" ("+c.format(v,!0)+")",this._items[4].setValue(b),S=void 0,n===r.STYLE_BASELINE)w=this._study.barColorer(),P=w.barStyle(d,!1),S=null!=P.barBorderColor?P.barBorderColor:P.barColor;else if(i&&d>=1){if(null===(T=this._study.data().valueAt(d-1)))return;if(null==(C=T[4]))return;S=C<=g?t:e}else S=_<=g?t:e;if(void 0!==S)for(x=0,k=this._items;x<k.length;x++)L=k[x],L.setColor(S)}}},e}(o.DataWindowView)},function(t,e,i){"use strict";var n,o,r;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"CompareDataWindowView",function(){return r}),n=i(0),o=i(136),r=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n._studyCompare=e,n}return n.c(e,t),e.prototype._updateImpl=function(){t.prototype._updateImpl.call(this),this._items[0].setTitle(this._studyCompare.guiPlotName(""))},e}(o.StudyDataWindowView)},function(t,e,i){"use strict";function n(t,e,i,o){var s,a;return void 0===e[t]?(S.logDebug("We haven't had this property "+o+"."+t+" yet, please, remove it from whiteList"),null):Object(r.isObject)(i[t])?(s=Object.keys(i[t]),a="",s.map(function(r){var s;return s={},s[r]=n(r,e[t],i[t],o+"."+t),s}).reduce(function(t,e){return a=Object.keys(e)[0],t[a]=e[a],t},{})):e[t].value()}function o(t,e,i){var o,r,s,a,l,c,h,u,d,p;return void 0===i&&(i=B),o={timezone:"",timeScale:{},mainSeries:{},paneProperties:{},scalesProperties:{},symbolWatermarkProperties:{},chartEventsSourceProperties:{},tradingProperties:{},alertsProperties:{},sessionsStudy:{},mainSeriesPriceScaleName:""},r=["timeScale","mainSeries","sessionsStudy","mainSeriesPriceScaleName"],s=i.mainSeries,a=Object.keys(i),l=Object.keys(s),c=e.properties(),h=t.properties(),l.forEach(function(t){o.mainSeries[t]=n(t,c,s,"mainSeries")}),a.forEach(function(t){r.includes(t)||(o[t]=n(t,h,i,"preferences"))}),u=e.sessionsStudy(),u&&(d=u.properties().state(),void 0===d.graphics.vertlines&&void 0===d.graphics.backgrounds||(o.sessionsStudy={},o.sessionsStudy.graphics={},void 0!==d.graphics.vertlines&&(o.sessionsStudy.graphics.vertlines={sessBreaks:d.graphics.vertlines.sessBreaks}),void 0!==d.graphics.backgrounds&&(o.sessionsStudy.graphics.backgrounds={outOfSession:d.graphics.backgrounds.outOfSession,inSession:d.graphics.backgrounds.inSession}))),p=t.mainSeriesPriceScaleName(),null!==p&&(o.mainSeriesPriceScaleName=p),o.timeScale.defaultRightOffset=t.timeScale().defaultRightOffsetProperty().value(),o}
var r,s,a,l,c,h,u,d,p,_,f,m,g,y,v,b,S,w,P,T,C,x,k,L,I,A,E,M,O,D,V,R,B;Object.defineProperty(e,"__esModule",{value:!0}),r=i(12),s={showPositions:!1,showOrders:!1,showExecutions:!1,extendLeft:!1,lineLength:0,lineWidth:0,lineStyle:0},a={color:"",style:0,width:0},l={upColor:"",downColor:"",drawWick:!1,drawBorder:!1,borderColor:"",borderUpColor:"",borderDownColor:"",wickColor:"",wickUpColor:"",wickDownColor:"",barColorsOnPrevClose:!1},c={upColor:"",downColor:"",drawWick:!1,drawBorder:!1,borderColor:"",borderUpColor:"",borderDownColor:"",wickColor:"",wickUpColor:"",wickDownColor:""},h={upColor:"",downColor:"",barColorsOnPrevClose:!1,dontDrawOpen:!1},u={color:"",linestyle:0,linewidth:0,styleType:0},d={color1:"",color2:"",linecolor:"",linestyle:0,linewidth:0,transparency:0},p={topFillColor1:"",topFillColor2:"",bottomFillColor1:"",bottomFillColor2:"",topLineColor:"",bottomLineColor:"",topLineWidth:0,bottomLineWidth:0,transparency:0,baseLevelPercentage:0},_={upColor:"",downColor:"",drawWick:!1,drawBorder:!1,borderColor:"",borderUpColor:"",borderDownColor:"",wickColor:"",wickUpColor:"",wickDownColor:"",showRealLastPrice:!1,barColorsOnPrevClose:!1,inputs:{},inputInfo:{}},f={upColor:"",downColor:"",borderUpColor:"",borderDownColor:"",upColorProjection:"",downColorProjection:"",borderUpColorProjection:"",borderDownColorProjection:"",wickUpColor:"",wickDownColor:"",inputs:{boxSize:0,style:"",atrLength:0,wicks:!1}},m={upColor:"",downColor:"",borderUpColor:"",borderDownColor:"",upColorProjection:"",downColorProjection:"",borderUpColorProjection:"",borderDownColorProjection:"",inputs:{source:"",lb:0}},g={upColor:"",downColor:"",upColorProjection:"",downColorProjection:"",inputs:{style:"",atrLength:0,reversalAmount:0}},y={upColor:"",downColor:"",upColorProjection:"",downColorProjection:"",inputs:{reversalAmount:0,boxSize:0,style:"",atrLength:0}},v={upColor:"",downColor:"",upColorProjection:"",downColorProjection:"",inputs:{range:0,phantomBars:!1}},b=i(5),i.d(e,"gridPreferencesDefault",function(){return w}),i.d(e,"crossHairPreferencesDefault",function(){return P}),i.d(e,"legendPreferencesDefault",function(){return T}),i.d(e,"panePreferencesDefault",function(){return C}),i.d(e,"scalesPreferencesDefault",function(){return x}),i.d(e,"symbolWatermarkPreferencesDefault",function(){return k}),i.d(e,"chartEventsSourceBreaksPreferencesDefault",function(){return L}),i.d(e,"chartEventsSourcePreferencesDefault",function(){return I}),i.d(e,"alertLabelLinePreferencesDefault",function(){return A}),i.d(e,"alertLabelPreferencesDefault",function(){return E}),i.d(e,"timeScalePreferencesDefault",function(){return M}),i.d(e,"alertsPreferencesDefault",function(){return O}),i.d(e,"sessionsStudyPreferencesDefault",function(){return D}),i.d(e,"priceScalePreferencesDefault",function(){return V}),i.d(e,"mainSeriesPreferencesDefault",function(){return R}),i.d(e,"chartPreferencesDefault",function(){return B}),e.createPreferencesObject=n,e.preferencesByWhiteList=o,S=Object(b.getLogger)("Chart.ApplyPreferencesToAllCharts"),w={color:"",style:""},P={color:"",style:0,
transparency:0,width:0},T={showStudyArguments:!1,showStudyTitles:!1,showStudyValues:!1,showSeriesTitle:!1,showSeriesOHLC:!1,showLegend:!1,showBarChange:!0},C={background:"",topMargin:0,bottomMargin:0,rightOffset:0,horzGridProperties:Object.assign({},w),vertGridProperties:Object.assign({},w),crossHairProperties:Object.assign({},P),legendProperties:Object.assign({},T)},x={lineColor:"",textColor:"",fontSize:0,scaleSeriesOnly:!1,showLeftScale:!1,showRightScale:!1,showSeriesLastValue:!1,showSeriesPrevCloseValue:!1,showStudyLastValue:!1,showSymbolLabels:!1,showStudyPlotLabels:!1},k={color:"",transparency:0},L={color:"",visible:!1,style:0,width:0},I={visible:!1,futureOnly:!1,breaks:Object.assign({},L)},A={visible:!1,style:0,width:0},E={visible:!1,color:"",highlightColor:"",hoverColor:"",line:Object.assign({},A)},M={defaultRightOffset:0},O={labels:Object.assign({},E)},D={graphics:{vertlines:{sessBreaks:{color:"",style:0,visible:!1,width:0}},backgrounds:{inSession:{color:"",transparency:0,visible:!1},outOfSession:{color:"",transparency:0,visible:!1}}}},V={autoScale:!1,autoScaleDisabled:!1,lockScale:!1,percentage:!1,percentageDisabled:!1,log:!1,logDisabled:!1,alignLabels:!1,indexedTo100:!1},R={style:0,minTick:0,showPriceLine:!1,priceLineWidth:0,priceLineColor:"",showPrevClosePriceLine:!1,prevClosePriceLineWidth:0,extendedHours:!1,prevClosePriceLineColor:"",esdShowDividends:!1,esdShowSplits:!1,esdShowEarnings:!1,esdShowBreaks:!1,dividendsAdjustment:!1,priceAxisProperties:Object.assign({},V),esdBreaksStyle:Object.assign({},a),candleStyle:Object.assign({},l),hollowCandleStyle:Object.assign({},c),barStyle:Object.assign({},h),lineStyle:Object.assign({},u),areaStyle:Object.assign({},d),baselineStyle:Object.assign({},p),haStyle:Object.assign({},_),renkoStyle:Object.assign({},f),pbStyle:Object.assign({},m),kagiStyle:Object.assign({},g),pnfStyle:Object.assign({},y),rangeStyle:Object.assign({},v)},B={timezone:"",timeScale:Object.assign({},M),mainSeries:Object.assign({},R),paneProperties:Object.assign({},C),scalesProperties:Object.assign({},x),symbolWatermarkProperties:Object.assign({},k),chartEventsSourceProperties:Object.assign({},I),tradingProperties:Object.assign({},s),alertsProperties:Object.assign({},O),sessionsStudy:Object.assign({},D),mainSeriesPriceScaleName:""}},function(t,e,i){"use strict";function n(){null===a&&i.e(2).then(function(t){if(null===a){var e=i(938).FavoriteDrawingToolbar;a=new e({left:window.innerWidth/2,top:r.HEADER_TOOLBAR_HEIGHT_EXPANDED+61})}}.bind(null,i)).catch(i.oe)}function o(){var t,e;return null===l&&null!==a&&(t=new s.Action({text:window.t("Favorite Drawings Toolbar"),checkable:!0,statName:"ToggleFavoriteDrawingsToolbar"}),e=a,e.canBeShown().subscribe(function(e){t.setEnabled(e)},{callWithLast:!0}),e.visibility().subscribe(function(e){t.setChecked(e)},{callWithLast:!0}),t.callbacks().subscribe(null,function(){e.isVisible()?e.hide():e.show()}),l=t),l}var r,s,a,l;Object.defineProperty(e,"__esModule",{value:!0}),e.createFavoriteDrawingToolbar=n,e.createToolbarAction=o,i(9),r=i(231),s=i(30),i.n(s),a=null,
l=null},function(t,e,i){"use strict";function n(t){"number"!=typeof t&&(t=TradingView.STUDY_COUNT_LIMIT),(0,o.showNoticeDialog)({title:$.t("Warning"),content:$.t("Studies limit exceeded: {0} studies per layout.<br>\nPlease, remove some studies.").format(t)})}Object.defineProperty(e,"__esModule",{value:!0}),e.showTooManyStudiesNotice=n;var o=i(237)},function(t,e,i){"use strict";var n,o,r,s,a,l;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"UndoStack",function(){return l}),n=i(45),o=i(8),r=i.n(o),s=i(5),a=Object(s.getLogger)("Common.UndoStack"),l=function(){function t(){this._commands=[],this._onChange=new r.a}return t.prototype.onChange=function(){return this._onChange},t.prototype.isEmpty=function(){return 0===this._commands.length},t.prototype.clear=function(){this._commands.length=0,this._onChange.fire()},t.prototype.push=function(t){if(!(t instanceof n.UndoCommand))throw new TypeError("argument must be an instance of UndoCommand");this._commands.push(t),this._onChange.fire()},t.prototype.pop=function(){if(this.isEmpty())return void a.logDebug("pop: undo stack is empty");var t=this._commands.pop();return this._onChange.fire(),t},t.prototype.head=function(){if(!this.isEmpty())return this._commands[this._commands.length-1]},t}()},function(t,e,i){"use strict";var n,o,r,s,a;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"RestoreDefaultsUndoCommand",function(){return r}),i.d(e,"RestoreUserDefaultsUndoCommand",function(){return s}),i.d(e,"RestoreFactoryDefaultsUndoCommand",function(){return a}),n=i(0),o=i(45),r=function(t){function e(e,i,n){var o=t.call(this,n)||this;return o._chartModel=e,o._defaultProperty=i,o._state=i.state(),o}return n.c(e,t),e.prototype.undo=function(){this._defaultProperty.mergeAndFire(this._state),this._chartModel.mainSeries().onChartStyleChanged()},e}(o.UndoCommand),s=function(t){function e(e,i,n){return void 0===n&&(n="Restore User Defaults"),t.call(this,e,i,n)||this}return n.c(e,t),e.prototype.redo=function(){this._chartModel.restoreDefaults(this._defaultProperty)},e}(r),a=function(t){function e(e,i,n){return void 0===n&&(n="Restore Defaults"),t.call(this,e,i,n)||this}return n.c(e,t),e.prototype.redo=function(){this._chartModel.restoreFactoryDefaults(this._defaultProperty)},e}(r)},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){var i=new Date(t+e),n=Math.round(Math.abs(e)/6e4),o="UTC";return 0!==n&&(o+=e>0?"+":"-",o+=Math.floor(n/60),n%60&&(o+=":"+n%60)),i.getUTCFullYear()+"-"+("0"+(i.getUTCMonth()+1)).slice(-2)+"-"+("0"+i.getUTCDate()).slice(-2)+" "+("0"+i.getUTCHours()).slice(-2)+":"+("0"+i.getUTCMinutes()).slice(-2)+" ("+o+")"}function r(t){return"string"==typeof t&&0!==t.trim().length}function s(t){var e,i,n,o,s;if(!t||0===t.length)return!0;for(e=0;e<t.length;e++){if(r(t[e])||t[e].id||r(t[e].title))return!1;if(t[e].lines)for(i=t[e].lines,n=i.length,o=0;o<n;o++)if(s=i[o],r(s)||r(s.line))return!1}return!0}function a(t,e){
var i,n,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return t.hasOwnProperty("text")?(i=r&&(0,d.forceLTRStr)(t.text)||t.text,t.hasOwnProperty("color")&&o?e.append($("<span>",{style:"color: "+t.color}).text(i)):e.text(i)):(n=r&&(0,d.forceLTRStr)(t)||t,e.text(n))}function l(t,e){if(Array.isArray(t)&&2===t.length)$("<dl>").append(a(t[0],$("<dt>")),a(t[1],$("<dd>"),!0,!0)).appendTo(e);else if(t.hasOwnProperty("br")&&t.br)$("<br>").appendTo(e);else{var i=$("<dl>").append(a(t,$("<dt>"))).appendTo(e);t.hasOwnProperty("listItem")&&i.addClass("list-item")}}function c(t,e){var i=(0,d.forceLTRStr)(t.text);$("<a>").attr("href",t.href).text(i).addClass(t.class).appendTo(e)}function h(t,e){var i,n,r,s,a,h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if("string"==typeof t)i=(0,d.forceLTRStr)(t),$("<h2>").text(i).appendTo(e);else if(t.hasOwnProperty("lines"))for(n=0;n<t.lines.length;n++)t.lines[n].hasOwnProperty("line")?0===n?t.lines[n].line.isEmpty||$("<h2>").text(t.lines[n].line).appendTo(e):l(t.lines[n].line,e):t.lines[n].hasOwnProperty("link")&&c(t.lines[n].link,e);else t.hasOwnProperty("title")&&$("<h2>").text(t.title).appendTo(e),t.hasOwnProperty("actual")&&(r=t.actual&&(0,d.forceLTRStr)(t.actual),$("<dl>").append($("<dt>").text($.t("Actual")+": "),$("<dd>").text(r||"—")).appendTo(e)),t.hasOwnProperty("forecast")&&(s=t.forecast&&(0,d.forceLTRStr)(t.forecast),$("<dl>").append($("<dt>").text($.t("Forecast")+": "),$("<dd>").text(s||"—")).appendTo(e)),t.hasOwnProperty("previous")&&(a=t.previous&&(0,d.forceLTRStr)(t.previous),$("<dl>").append($("<dt>").text($.t("Previous")+": "),$("<dd>").text(a||"—")).appendTo(e)),t.hasOwnProperty("timestamp")&&$("<dl>").append($("<dt>").text($.t("Date")+": "),$("<dd>").text(o(t.timestamp,h)||"—")).appendTo(e)}var u,d;Object.defineProperty(e,"__esModule",{value:!0}),e.Tooltip=void 0,u=function(){function t(t,e){var i,n;for(i=0;i<e.length;i++)n=e[i],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),i(783),d=i(36),e.Tooltip=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.direction,o=void 0===i?"top":i,r=e.clickable,s=void 0!==r&&r,a=e.wide,l=void 0!==a&&a;n(this,t),this._direction=o,this._tooltipShown=!1,this._tooltipX=void 0,this._tooltipY=void 0,this._tooltipItems=null,this._width=l?250:200,this._$tooltip=$("<div>").addClass("tv-chart-events-source__tooltip").css({position:"absolute",width:this._width+"px"}),this._$tooltipContent=$("<div>").addClass("tv-chart-events-source__tooltip__content").appendTo(this._$tooltip),s&&this._$tooltip.addClass("tv-chart-events-source__tooltip--clickable")}return u(t,[{key:"show",value:function(){
var t,e,i,n,o,r,a,l,c,u,d,p,_,f,m,g,y,v,b,S=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},w=S.items,P=void 0===w?[]:w,T=S.x,C=void 0===T?0:T,x=S.y,k=void 0===x?0:x,L=S.wrapElement,I=void 0===L?null:L,A=S.timeOffset,E=void 0===A?"":A,M=S.leftBorderColor,O=void 0===M?null:M;if(I&&!s(P)){if(t=$(I).width(),e=$(I).height(),i=!1,n=!1,this._tooltipShown||(this._$tooltip.appendTo(I),this._tooltipShown=!0,i=!0,n=!0),C===this._tooltipX&&k===this._tooltipY||(i=!0),i&&(o=Math.max(Math.min(C-this._width/2,t-this._width-10),0),this._$tooltip.css({left:Math.round(o),bottom:Math.round(e-k+10)})),this._tooltipItems||(n=!0),!n)for(r=P.length;r--;)if(this._tooltipItems[r]!==P[r]){n=!0;break}if(n){if(a=void 0,P.length<=1)a=P;else{for(l={},c=P.length;c--;)u=P[c].importance,null==u&&(u=-1),l[u]||(l[u]=[]),l[u].push(P[c]);if(d=Object.keys(l).sort(function(t,e){return t-e}),d.length<=1)a=l[d[0]];else for(a=[],p=d.length;p--;)for(_=l[d[p]],f=_.length;f--;)a.push(_[f])}for(this._$tooltipContent.empty(),m=a.length;m--;)g=a[m],y="",g.hasOwnProperty("importance")?("string"==typeof g.importance&&("earnings"===g.importance?y="--importance-earnings":"splits"===g.importance?y="--importance-splits":"dividends"===g.importance?y="--importance-dividends":"list"===g.importance&&(y="--importance-list")),0===g.importance?y="--importance-normal":g.importance>0&&(y="--importance-high")):O||(y="--importance-none"),v="tv-chart-events-source__tooltip__item",y&&(v+=" "+v+y),b=$("<div>").attr("class",v),O&&b.css("border-left-color",O),h(g,b,E),b.appendTo(this._$tooltipContent);this._tooltipItems=P}"bottom"===this._direction&&this._$tooltip.css({bottom:Math.round(e-k-this._$tooltipContent.height()+10)})}}},{key:"hide",value:function(){this._tooltipShown&&(this._$tooltip.detach(),this._tooltipShown=!1)}},{key:"isOpened",value:function(){return this._tooltipShown}}]),t}()},function(t,e,i){"use strict";i.d(e,"a",function(){return n});var n=function(){function t(){this.bar=null}return t.prototype.set=function(t,e){this.commit(t),this.bar=e,this._lastTime=e[0]},t.prototype.commit=function(t){return!!this.bar&&(t.bars.push(this.bar),this.bar=null,!0)},t.prototype.update=function(t){t.unshift(this._lastTime),this.bar=t},t}()},function(t,e,i){"use strict";i.d(e,"a",function(){return n});var n=function(){function t(t,e,i){this._isInitialized=!1,this._boxSize=t,this._atr=e,this._minTick=i}return t.prototype.size=function(){return this._boxSize},t.prototype.isInitialized=function(){return this._isInitialized},t.prototype.init=function(){if(null!==this._atr){if(this._boxSize=this._atr.get(),isNaN(this._boxSize))return!1;this._boxSize=Math.round(this._boxSize/this._minTick)*this._minTick}return this._boxSize=Math.max(this._boxSize,this._minTick),this._isInitialized=!0,!0},t}()},function(t,e,i){"use strict";(function(e){var n=i(48),o=i(23).Interval,r=i(8),s=i(4),a=function(t,e){this._server=t,this._session=e,this._timezone=null,this._timezoneId="",this._isDWM=!1,this._resolution=null,this.seriesCompleted=new r,this._lastBarTimes={}}
;a.prototype.lastBarTime=function(t){return this._lastBarTimes[t]},a.prototype._userTimezone=function(){return this._timezone},a.prototype.setTimezone=function(t){this._timezone="exchange"===t?"exchange":e.get_timezone(t),this._timezoneId=t},a.prototype.timezone=function(){return this._timezoneId},a.prototype.setResolution=function(t){this._isDWM=o.isDWM(t),this._resolution=t},a.prototype.onRequestMetadata=function(t,e){this._server.receiveLocalResponse({method:"studies_metadata",params:[this._session,t,{errors:[],hash:"",metainfo:e,migrations:[]}]})},a.prototype.onSymbolResolved=function(t,e){this._server.receiveLocalResponse({method:"symbol_resolved",params:[this._session,t,e]})},a.prototype.onSymbolError=function(t,e){this._server.receiveLocalResponse({method:"symbol_error",params:[this._session,t,e]})},a.prototype.onStudyError=function(t,e,i){this._server.receiveLocalResponse({method:"study_error",params:[this._session,t,e,i]})},a.prototype.onSeriesLoading=function(t,e){this._server.receiveLocalResponse({method:"series_loading",params:[this._session,t,e]})},a.prototype.onSeriesCompleted=function(t,e,i){this._server.receiveLocalResponse({method:"series_completed",params:[this._session,t,i,e]}),this.seriesCompleted.fire(t)},a.prototype.onSeriesError=function(t,e){this._server.receiveLocalResponse({method:"series_error",params:[this._session,t,e]})},a.prototype.onSeriesClearData=function(t,e){var i={};i[t]={series:[],turnaround:e},this._server.receiveLocalResponse({method:"timescale_update",params:[this._session,i,{index:0,zoffset:0,changes:[],marks:[],index_diff:[]}]})},a.prototype.onStudyCompleted=function(t,e){this._server.receiveLocalResponse({method:"study_completed",params:[this._session,t,e]})},a.prototype.onStudyLoading=function(t,e){this._server.receiveLocalResponse({method:"study_loading",params:[this._session,t,e]})},a.prototype._calcMarksTime=function(t,i,o,r,a){var l,c,h,u,d,p=e.get_timezone(i),_=this;if(this._isDWM&&!s.enabled("disable_resolution_rebuild"))for(d=new n.Session,d.init(p,o),u=0;u<t.length;u++)h=t[u],l=r(h),c=e.utc_to_cal(p,1e3*l),c=d.spec.correctTradingDay(c,p),e.set_hms(c,0,0,0,0),t[u]=a(h,parseInt(c.valueOf()/1e3));else for(u=0;u<t.length;u++)t[u]=a(t[u],_.timeInTimezone(r(t[u]),p))},a.prototype.onTickmarksUpdated=function(t,e,i,n){var r,s,a,l,c,h,u;if(o.isEqual(n,this._resolution)){for(r=e.slice(0),this._calcMarksTime(r,i.timezone,i.session,function(t){return t},function(t,e){return e}),s=[],a=[],c=0;c<r.length;++c)h=r[c],s.push([this._spanByTime(h,l),h,t+c]),a.push(h),l=h;u={method:"tickmark_update",params:[this._session,{index:t,zoffset:0,changes:a,marks:s,index_diff:[]}]},this._server.receiveLocalResponse(u)}},a.prototype.onTimescaleUpdate=function(t,e,i,n,o,r){var s,a,l,c,h,u,d,p,_=r&&r.slice(0);for(this._lastBarTimes[t]=_?_&&_[_.length-1]:i&&i[i.length-1].value[0],this._calcMarksTime(i,n.timezone,n.session,function(t){return t.value[0]},function(t,e){return t.exTime=e,t}),_&&this._calcMarksTime(_,n.timezone,n.session,function(t){return t},function(t,e){return{markTime:e,time:t}}),
s={},s[t]={series:i,turnaround:e},a=[],l=[],h=i.map(function(t){return{markTime:t.exTime,time:t.value[0]}}),_&&(h=h.concat(_)),u=0;u<h.length;++u)d=h[u].markTime,a.push([this._spanByTime(d,c),d,o+u]),l.push(h[u].time),c=d;p={method:"timescale_update",params:[this._session,s,{index:o,zoffset:0,changes:l,marks:a,index_diff:[]}]},this._server.receiveLocalResponse(p)},a.prototype.onSeriesTimeframeUpdate=function(t,e,i,n,o){var r={method:"series_timeframe",params:[this._session,t,e,i,n,o]};this._server.receiveLocalResponse(r)},a.prototype.onPointsetDataUpdate=function(t,e,i,n){this._onDataUpdate(t,e,i,null,n,1)},a.prototype.onDataUpdate=function(t,e,i,n,o){this._onDataUpdate(t,e,i,n,o,0)},a.prototype._onDataUpdate=function(t,e,i,n,o,r){var s,a={},l="",c=[];null!==n&&(l=JSON.stringify(n.data),c=n.indexes||[]),a[t]={s:i,ns:{d:l,indexes:c},turnaround:e},s={method:"data_update",params:[this._session,a]},this._server.receiveLocalResponse(s)},a.prototype.onQuotesData=function(t){this._server.receiveLocalResponse({method:"quote_symbol_data",params:t})},a.prototype.onDepthData=function(t){this._server.receiveLocalResponse({method:"dd",params:t})},a.prototype.onDepthUpdate=function(t){this._server.receiveLocalResponse({method:"dpu",params:t})},a.prototype.onProjectionUpdate=function(t,e,i,n){var o,r=i.data,s=r[r.length-1],a={data:{reversalAmount:i.reversalAmount,boxSize:i.boxSize,price:s?s[4]:i.price,bars:r.map(function(t,e){return{time:e,open:t[1],high:t[2],low:t[3],close:t[4],volume:t[5],factor:t[6],additionalPrice:t[6]}})}},l={};l[t]={s:n||[],ns:{d:JSON.stringify(a),indexes:r.map(function(t,e){return i.barsetSize+(t[0]||0)})},turnaround:e},o={method:"data_update",params:[this._session,l]},this._server.receiveLocalResponse(o)},a.prototype.timeInTimezone=function(t,i){return"exchange"===this._userTimezone()?parseInt(e.utc_to_cal(i,1e3*t).valueOf()/1e3):parseInt(e.utc_to_cal(this._userTimezone(),1e3*t).valueOf()/1e3)},a.prototype._spanByTime=function(t,e){function i(t){return 60*t*60*1e3}function n(t){return 60*t*1e3}function o(t){return 1e3*t}var r,s,a,l=[{divisor:1,span:20},{divisor:o(1),span:19},{divisor:n(5),span:21},{divisor:n(30),span:22},{divisor:i(1),span:30},{divisor:i(3),span:31},{divisor:i(6),span:32},{divisor:i(12),span:33}];if(!e)return 20;if(r=new Date(1e3*e),s=new Date(1e3*t),s.getYear()!==r.getYear())return 70;if(s.getUTCMonth()!==r.getUTCMonth())return 60;if(s.getUTCDate()!==r.getUTCDate())return 50;for(a=l.length-1;a>=0;--a)if(Math.floor(r/l[a].divisor)!==Math.floor(s/l[a].divisor))return l[a].span},TradingView.ChartapiMessagerInstances=[],t.exports=a}).call(e,i(33))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"supportedLineTools",function(){return n});var n={cursor:{name:"cursor",onlySelectable:!0},dot:{name:"dot",onlySelectable:!0},arrow_cursor:{name:"arrow",onlySelectable:!0},eraser:{name:"eraser",onlySelectable:!0},measure:{name:"measure",onlySelectable:!0},zoom:{name:"zoom",onlySelectable:!0},brush:{name:"LineToolBrush",onlySelectable:!0},text:{name:"LineToolText",
supportsText:!0},anchored_text:{name:"LineToolTextAbsolute",supportsText:!0},note:{name:"LineToolNote",supportsText:!0},anchored_note:{name:"LineToolNoteAbsolute",supportsText:!0},callout:{name:"LineToolCallout",supportsText:!0},balloon:{name:"LineToolBalloon",supportsText:!0},arrow_up:{name:"LineToolArrowMarkUp",supportsText:!0},arrow_down:{name:"LineToolArrowMarkDown",supportsText:!0},arrow_left:{name:"LineToolArrowMarkLeft",supportsText:!0},arrow_right:{name:"LineToolArrowMarkRight",supportsText:!0},price_label:{name:"LineToolPriceLabel"},flag:{name:"LineToolFlagMark"},vertical_line:{name:"LineToolVertLine"},horizontal_line:{name:"LineToolHorzLine"},cross_line:{name:"LineToolCrossLine"},horizontal_ray:{name:"LineToolHorzRay"},trend_line:{name:"LineToolTrendLine"},info_line:{name:"LineToolInfoLine"},trend_angle:{name:"LineToolTrendAngle"},arrow:{name:"LineToolArrow"},ray:{name:"LineToolRay"},extended:{name:"LineToolExtended"},parallel_channel:{name:"LineToolParallelChannel"},disjoint_angle:{name:"LineToolDisjointAngle"},flat_bottom:{name:"LineToolFlatBottom"},pitchfork:{name:"LineToolPitchfork"},schiff_pitchfork_modified:{name:"LineToolSchiffPitchfork"},schiff_pitchfork:{name:"LineToolSchiffPitchfork2"},inside_pitchfork:{name:"LineToolInsidePitchfork"},pitchfan:{name:"LineToolPitchfan"},gannbox:{name:"LineToolGannSquare"},gannbox_square:{name:"LineToolGannComplex"},gannbox_fixed:{name:"LineToolGannFixed"},gannbox_fan:{name:"LineToolGannFan"},fib_retracement:{name:"LineToolFibRetracement"},fib_trend_ext:{name:"LineToolTrendBasedFibExtension"},fib_speed_resist_fan:{name:"LineToolFibSpeedResistanceFan"},fib_timezone:{name:"LineToolFibTimeZone"},fib_trend_time:{name:"LineToolTrendBasedFibTime"},fib_circles:{name:"LineToolFibCircles"},fib_spiral:{name:"LineToolFibSpiral"},fib_speed_resist_arcs:{name:"LineToolFibSpeedResistanceArcs"},fib_wedge:{name:"LineToolFibWedge"},fib_channel:{name:"LineToolFibChannel"},xabcd_pattern:{name:"LineTool5PointsPattern"},cypher_pattern:{name:"LineToolCypherPattern"},abcd_pattern:{name:"LineToolABCD"},triangle_pattern:{name:"LineToolTrianglePattern"},"3divers_pattern":{name:"LineToolThreeDrivers"},head_and_shoulders:{name:"LineToolHeadAndShoulders"},elliott_impulse_wave:{name:"LineToolElliottImpulse"},elliott_triangle_wave:{name:"LineToolElliottTriangle"},elliott_triple_combo:{name:"LineToolElliottTripleCombo"},elliott_correction:{name:"LineToolElliottCorrection"},elliott_double_combo:{name:"LineToolElliottDoubleCombo"},cyclic_lines:{name:"LineToolCircleLines"},time_cycles:{name:"LineToolTimeCycles"},sine_line:{name:"LineToolSineLine"},long_position:{name:"LineToolRiskRewardLong"},short_position:{name:"LineToolRiskRewardShort"},forecast:{name:"LineToolPrediction"},date_range:{name:"LineToolDateRange"},price_range:{name:"LineToolPriceRange"},date_and_price_range:{name:"LineToolDateAndPriceRange"},bars_pattern:{name:"LineToolBarsPattern"},ghost_feed:{name:"LineToolGhostFeed"},projection:{name:"LineToolProjection"},rectangle:{name:"LineToolRectangle"},rotated_rectangle:{
name:"LineToolRotatedRectangle"},ellipse:{name:"LineToolEllipse"},triangle:{name:"LineToolTriangle"},polyline:{name:"LineToolPolyline"},curve:{name:"LineToolBezierQuadro"},double_curve:{name:"LineToolBezierCubic"},arc:{name:"LineToolArc"},icon:{name:"LineToolIcon"}}},function(t,e,i){"use strict";var n,o,r,s,a,l;i.d(e,"a",function(){return o}),i.d(e,"b",function(){return r}),i.d(e,"c",function(){return s}),i.d(e,"d",function(){return a}),i.d(e,"e",function(){return l}),n=i(21),i.n(n),o=function(){function t(){}return t.prototype.init=function(t,e){t.new_sym(e(1),n.Std.period(t),n.Std.period(t)),this._source=e(0),this._scaleFactor1=1,this._scaleFactor2=1},t.prototype.main=function(t,e){var i,o,r,s,a,l,c=t.symbol.time,h=n.Std[this._source](t);return t.select_sym(1),i=n.Std[this._source](t),o=t.new_unlimited_var(i),r=t.new_unlimited_var(t.symbol.time),t.select_sym(0),isNaN(c)?null:(s=r.indexOf(c),-1!==s&&r.get(s)!==c&&(s=-1),a=s<0?NaN:o.get(s),l=this._doCalculation(this._scaleFactor1,h,this._scaleFactor2,a),[l])},t}(),r={styles:{plot1:{linestyle:0,linewidth:2,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#800080"}},precision:2,inputs:{source:"close",symbol2:""}},s=[{defval:"close",id:"source",name:"Source",options:["open","high","low","close","hl2","hlc3","ohlc4"],type:"text"},{id:"symbol2",name:"Symbol",type:"symbol",confirm:!0}],a=[{id:"plot1",type:"line"}],l={plot1:{title:"Plot",histogramBase:0}}},function(t,e,i){"use strict";function n(t){var e=t.className,i=t.icon,n=void 0===i?"":i,r=t.onClick,s=t.title;return o.createElement("span",{title:s,className:e,dangerouslySetInnerHTML:{__html:n},onClick:r})}var o;e.a=n,o=i(19),i.n(o)},,function(t,e,i){"use strict";var n,o,r,s,a,l,c,h;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"RectangleRenderer",function(){return h}),n=i(10),o=i(37),i.n(o),r=i(57),i.n(r),s=i(7),i.n(s),a=i(35),l=i(6),i.n(l),c=i(49),i.n(c),h=function(){function t(t,e,i){this._data=null,this._hitTestResult=t||new n.HitTestResult(n.HitTestResult.MOVEPOINT),this._backHitTestResult=e||new n.HitTestResult(n.HitTestResult.MOVEPOINT_BACKGROUND),this._forceOverrideTransparency=!!i}return t.prototype.setData=function(t){this._data=t},t.prototype.draw=function(t){var e,i,n,o;null===this._data||this._data.points.length<2||(t.lineCap="butt",t.strokeStyle=this._data.color,t.lineWidth=this._data.linewidth,void 0!==this._data.linestyle&&Object(c.setLineStyle)(t,this._data.linestyle),e=this._data.points,i=e[0],n=e[1],o=n.subtract(i),t.beginPath(),t.rect(i.x,i.y,o.x,o.y),this._data.linewidth>0&&t.stroke(),this._data.fillBackground&&(t.fillStyle=this.getColor(),t.fill()))},t.prototype.hitTest=function(t){var e,i,n,a,l,c,h,u,d,p;return null===this._data||this._data.points.length<2||this._data.nohittest?null:(e=this._data.points,i=e[0],n=e[1],a=new s.Point(n.x,i.y),l=new s.Point(i.x,n.y),c=Object(o.distanceToSegment)(i,a,t),c.distance<=3?this._hitTestResult:(c=Object(o.distanceToSegment)(a,n,t),c.distance<=3?this._hitTestResult:(c=Object(o.distanceToSegment)(n,l,t),
c.distance<=3?this._hitTestResult:(c=Object(o.distanceToSegment)(l,i,t),c.distance<=3?this._hitTestResult:this._data.fillBackground&&(h=Math.min(i.x,n.x),u=Math.max(i.x,n.x),d=Math.min(i.y,n.y),p=Math.max(i.y,n.y),i=new s.Point(h,d),n=new s.Point(u,p),Object(r.pointInRectangle)(t,i,n))?this._backHitTestResult:null))))},t.prototype.getColor=function(){var t=Object(l.ensure)(this._data);return Object(a.generateColor)(t.backcolor,t.transparency,this._forceOverrideTransparency)},t}()},function(t,e,i){"use strict";function n(t){return Object(r.clean)(JSON.stringify(t))}function o(t){return JSON.parse(Object(r.clean)(t,!0))}var r;Object.defineProperty(e,"__esModule",{value:!0}),e.hotKeySerialize=n,e.hotKeyDeserialize=o,r=i(130),i.n(r)},function(t,e,i){"use strict";var n,o,r,s;i.d(e,"a",function(){return s}),n=i(0),o=i(19),i.n(o),r=i(67),i.n(r),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._handleOutsideEvent=function(t){e.props.handler&&!r.findDOMNode(e).contains(t.target)&&e.props.handler(t)},e}return n.c(e,t),e.prototype.componentDidMount=function(){this.props.click&&document.addEventListener("click",this._handleOutsideEvent,!1),this.props.mouseDown&&document.addEventListener("mousedown",this._handleOutsideEvent,!1),this.props.touchEnd&&document.addEventListener("touchend",this._handleOutsideEvent,!1),this.props.touchStart&&document.addEventListener("touchstart",this._handleOutsideEvent,!1)},e.prototype.componentWillUnmount=function(){this.props.click&&document.removeEventListener("click",this._handleOutsideEvent,!1),this.props.mouseDown&&document.removeEventListener("mousedown",this._handleOutsideEvent,!1),this.props.touchEnd&&document.removeEventListener("touchend",this._handleOutsideEvent,!1),this.props.touchStart&&document.removeEventListener("touchstart",this._handleOutsideEvent,!1)},e.prototype.render=function(){var t=this.props,e=(t.click,t.handler,t.mouseDown,t.touchEnd,t.touchStart,t.ctor),i=void 0===e?"span":e,r=n.e(t,["click","handler","mouseDown","touchEnd","touchStart","ctor"]);return o.createElement(i,n.a({},r))},e}(o.Component)},,,function(t,e,i){"use strict";function n(t){var e,i,n,o,r;return e=/^[,\s]*(\d*)\s*([hdwms]?)\s*$/i,i=e.exec(t)||[],n=~~i[1],o=i[2]&&i[2].toUpperCase()||null,r={qty:!n&&o?1:n,unit:o},r.error=!n&&!o,r.intraday=!(r.error||r.unit&&"H"!==r.unit),r}function o(t){var e,i,o;return l.enabled("allow_supported_resolutions_set_only")?null!==(e=r(t))&&Object(c.isAvailable)(""+e):(i=n(t),!i.error&&(i.intraday?h.linking.intraday.value():!(o=h.linking.supportedResolutions.value())||null!==i.unit&&!!~o.indexOf(i.unit)))}function r(t){var e=n(t),i=e.qty,o=e.unit;return e.error?null:("H"===o&&(i*=60,o=null),i&&!o?i+"":o&&(!i||1===i&&"S"!==o)?o:i+o)}function s(){var t=!1;return t}function a(t){return!t.ctrlKey&&(!t.metaKey&&(!!t.charCode&&(!(!t.which||t.which<=32)&&(null===t.target||!/^(input|textarea)$/i.test(t.target.tagName)))))}var l,c,h;Object.defineProperty(e,"__esModule",{value:!0}),e.parseIntervalValue=n,e.intervalIsSupported=o,e.sanitizeIntervalValue=r,
e.canShowSpreadActions=s,e.globalKeypressMatches=a,l=i(4),i.n(l),c=i(69),h=i(56)},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 9 9" width="9px" height="9px"><path d="M2 1L1 2l2.5 2.5L1 7l1 1 2.5-2.5L7 8l1-1-2.5-2.5L8 2 7 1 4.5 3.5z"/></svg>'},function(t,e,i){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),n=i(555),i.n(n),i.o(n,"TVModal")&&i.d(e,"TVModal",function(){return n.TVModal}),i.o(n,"isOpenedModals")&&i.d(e,"isOpenedModals",function(){return n.isOpenedModals})},function(t,e,i){"use strict";function n(t,e,i){this._cache=t,this._cacheRect=e,this._targetRect=i}var o=i(7).Point,r=i(57).pointInRectangle,s=i(10).HitTestResult;n.prototype.draw=function(t){t.translate(.5,.5),t.drawImage(this._cache,this._cacheRect.left,this._cacheRect.top,this._cacheRect.width,this._cacheRect.height,this._targetRect.left,this._targetRect.top,this._targetRect.width,this._targetRect.height),t.translate(-.5,-.5)},n.prototype.hitTest=function(t){var e=new o(this._targetRect.left,this._targetRect.top),i=e.add(new o(this._targetRect.width,this._targetRect.height));return r(t,e,i)?new s(s.REGULAR):null},t.exports=n},,function(t,e,i){"use strict";var n,o,r;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"PipFormatter",function(){return r}),n=i(0),o=i(13),r=function(t){function e(e,i,n,o){var r=this;return i||(i=1),"forex"!==n&&"cfd"!==n||!o?(r=t.call(this,1)||this,r._isForex=!1):(r=t.call(this,o)||this,r._isForex=!0),r._pipPriceScale=e,r._pipMinMove=i,r._pipMinMove2=o,r}return n.c(e,t),e.prototype.format=function(e,i,n){var o=this._isForex?this._pipMinMove2:this._pipMinMove;return void 0===o&&(o=NaN),t.prototype.format.call(this,e*this._pipPriceScale/o,i,n)},e}(o.PriceFormatter)},,,function(t,e,i){function n(t,e,i,n,r,s){if(!t)return void o.logDebug("Missing control");this._control=t,this._property=e,this._applyOnFly=i,this._undoModel=n,this._undoText=r,e&&(this._formatters=[],this._changed=!1,this.setValue(e.value()),e.listeners().subscribe(this,this.propertyChanged))}var o=i(5).getLogger("Chart.PropertyPage.Binding");n.prototype.addFormatter=function(t){this._formatters.push(t),this.setValue(this._property.value())},n.prototype._formatValue=function(t){return this._formatters.reduce(function(t,e){return e(t)},t)},n.prototype._setValueToProperty=function(t){this._setter?this._setter.call(this,t):this.setValueToProperty(t)},n.prototype._attachToControl=function(t,e){var i=this;e?t.on("keyup change input",function(t){var e=i.value();i._setValueToProperty(e),i.setValue(e)}):(t.keypress(function(t){if(i._changed=!0,13===t.which){var e=i.value();i._setValueToProperty(e),i.setValue(e)}}),t.focusout(function(t){var e=i.value();i.changed()&&(i._setValueToProperty(e),i.setValue(e))}),t.change(function(t){var e=i.value();$(t.target).is(".ticker")?(void 0!==i._changeTimerId&&clearTimeout(i._changeTimerId),i._changeTimerId=setTimeout(function(){i._setValueToProperty(e)},250)):i._setValueToProperty(e),i.setValue(e)}))},n.prototype.control=function(){return this._control},
n.prototype.changed=function(){return this._changed},n.prototype.setValueToProperty=function(t){this._undoModel.setProperty(this._property,t,this._undoText),this._changed=!1},n.prototype.property=function(){return this._property},n.prototype.propertyChanged=function(t){this.setValue(t.value())},n.prototype.destroy=function(){this._property&&this._property.listeners().unsubscribe(this,this.propertyChanged)},e.Binding=n},function(t,e,i){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"TimeSpanFormatter",function(){return n}),i(9),n=function(){function t(){}return t.prototype.format=function(t){var e,i,n,o,r=t<0;return t=Math.abs(t),e=Math.floor(t/86400),t-=86400*e,i=Math.floor(t/3600),t-=3600*i,n=Math.floor(t/60),t-=60*n,o="",e&&(o+=e+$.t("d",{context:"dates"})+" "),i&&(o+=i+$.t("h",{context:"dates"})+" "),n&&(o+=n+$.t("m",{context:"dates"})+" "),t&&(o+=t+$.t("s",{context:"dates"})+" "),r&&(o="-"+o),o.trim()},t}()},,function(t,e,i){"use strict";function n(){return[[1,0,0],[0,1,0],[0,0,1]]}function o(t,e){var i,n,o,r=[[0,0,0],[0,0,0],[0,0,0]];for(i=0;i<3;i++)for(n=0;n<3;n++)for(o=0;o<3;o++)r[i][n]+=t[i][o]*e[o][n];return r}function r(t){var e=Math.cos(t),i=Math.sin(t);return[[e,-i,0],[i,e,0],[0,0,1]]}function s(t,e){return[[t,0,0],[0,e,0],[0,0,1]]}function a(t,e){return[[1,0,t],[0,1,e],[0,0,1]]}function l(t,e){var i,n,o=[e.x,e.y,1],r=[0,0,0];for(i=0;i<3;i++)for(n=0;n<3;n++)r[i]+=o[n]*t[i][n];return new c.Point(r[0],r[1])}Object.defineProperty(e,"__esModule",{value:!0});var c=i(7);e.identityMatrix=n,e.multiplyMatrices=o,e.rotationMatrix=r,e.scalingMatrix=s,e.translationMatrix=a,e.transformPoint=l},function(t,e,i){"use strict";function n(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}Object.defineProperty(e,"__esModule",{value:!0}),e.regExpEscape=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"StatsPosition",function(){return n});var n;!function(t){t[t.Left=0]="Left",t[t.Center=1]="Center",t[t.Right=2]="Right"}(n||(n={}))},function(t,e,i){"use strict";var n,o;i.d(e,"a",function(){return o}),i(0),n=i(19),i.n(n),function(t){t[t.Enter=13]="Enter",t[t.Space=32]="Space",t[t.Backspace=8]="Backspace",t[t.DownArrow=40]="DownArrow",t[t.UpArrow=38]="UpArrow",t[t.RightArrow=39]="RightArrow",t[t.LeftArrow=37]="LeftArrow",t[t.Escape=27]="Escape",t[t.Tab=9]="Tab"}(o||(o={}))},function(t,e,i){"use strict";function n(t){var e,i;if(t&&t.__esModule)return t;if(e={},null!=t)for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r,s,a,l,c;Object.defineProperty(e,"__esModule",{value:!0}),e.ButtonLoader=void 0,r=function(){function t(t,e){var i,n;for(i=0;i<e.length;i++)n=e[i],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(225),a=i(77),l=n(a),$.fn.tvButtonLoader=(0,
s.createTvBlockWithInstance)("tv-button-loader",function(t,e){return new c(t,e)}),c=e.ButtonLoader=function(){function t(e,i){o(this,t),this.$btn=$(e).addClass("tv-button--loader"),0===this.$btn.find(".tv-button__loader").length&&this.$btn.html('<span class="tv-button__text">'+this.$btn.html()+'</span><span class="tv-button__loader"><span class="tv-button__loader-item"></span><span class="tv-button__loader-item"></span><span class="tv-button__loader-item"></span></span>'),this.loading=this.$btn.hasClass("i-loading")}return r(t,[{key:"_start",value:function(){var t=this;this.starting=!0,this.$btn.addClass("i-start-load"),this.$btn.trigger("tv-button-loader:start"),setTimeout(function(){t.loading=!0,t.starting=!1,t._startPromise=!1,t.$btn.addClass("i-loading"),t.$btn.removeClass("i-start-load"),t._stopPromise&&t._stop()},2*l.dur)}},{key:"start",value:function(){this.starting||(this.stopping?this._startPromise=!0:this._start())}},{key:"_stop",value:function(){var t=this;this.stopping=!0,this.$btn.addClass("i-stop-load"),this.$btn.trigger("tv-button-loader:stop"),setTimeout(function(){t.loading=!1,t.stopping=!1,t._stopPromise=!1,t.$btn.removeClass("i-loading i-start-load i-stop-load"),t._startPromise&&t._start()},l.dur)}},{key:"stop",value:function(){this.stopping||(this.starting?this._stopPromise=!0:this._stop())}},{key:"toggle",value:function(){this.loading?this.stop():this.start()}},{key:"contentHtml",value:function(t){return t?(this.$btn.find(".tv-button__text").html(t),t):this.$btn.find(".tv-button__text").html()}},{key:"contentNojQuery",value:function(){return this.$btn.get(0)}},{key:"disable",value:function(){this.stop(),this.$btn.addClass("i-disabled")}},{key:"enable",value:function(){this.$btn.removeClass("i-disabled")}}]),t}()},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 95.939 95.939" width="95.939" height="95.939"><path d="M62.82 47.97l32.53-32.534a2 2 0 0 0 0-2.828L83.332.586a2 2 0 0 0-2.827 0L47.97 33.12 15.435.587c-.75-.75-2.078-.75-2.828 0L.587 12.607a2 2 0 0 0 0 2.83L33.12 47.97.588 80.504a2 2 0 0 0 0 2.828l12.02 12.02a1.997 1.997 0 0 0 2.83 0L47.97 62.818l32.535 32.535a2 2 0 0 0 2.827 0l12.02-12.02c.78-.783.78-2.05 0-2.83L62.82 47.97z"/></svg>'},function(t,e,i){"use strict";function n(t){var e,i=t.className,n=t.icon,u=t.clearable,d=t.onClear,p=t.size,_=t.strictLeftDirectionInput,f=o.e(t,["className","icon","clearable","onClear","size","strictLeftDirectionInput"]),m=s(c.inputWrapper,(e={},e[i]=!!i,e[c.iconed]=!!n,e[c.clearable]=u,e));return r.createElement(h,o.a({theme:c,className:m,leftComponent:n?r.createElement(a.a,{key:"inputIcon",icon:n,className:c.inputIcon}):void 0,rightComponent:u?r.createElement(a.a,{className:c.clearIcon,icon:l,key:"clearIcon",onClick:d}):void 0,sizeMode:p,strictLeftDirectionInput:_},f))}var o,r,s,a,l,c,h;i.d(e,"a",function(){return h}),e.b=n,o=i(0),r=i(19),i.n(r),s=i(115),i.n(s),a=i(359),l=i(382),i.n(l),c=i(243),i.n(c),h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o.c(e,t),e.prototype.render=function(){
var t,e,i,n,a=this.props,l=a.theme,h=a.error,u=a.success,d=a.sizeMode,p=a.leftComponent,_=a.rightComponent,f=a.grouped,m=a.fontSize,g=a.reference,y=a.className,v=(a.strictLeftDirectionInput,o.e(a,["theme","error","success","sizeMode","leftComponent","rightComponent","grouped","fontSize","reference","className","strictLeftDirectionInput"])),b={fontSize:m},S=s(l.textInput,this.props.strictLeftDirectionInput&&c.textInputLeftDirection,(t={},t[l.error]=h,t[l.success]=u,t[l[d]]=!!d,t)),w=s(l.inputWrapper,(e={},e[y]=!!y,e[l.grouped]=f,e)),P=[],T=r.createElement("input",o.a({ref:g,className:S,key:"textInput",style:b},v));return p&&(i={className:s(l.leftComponent,p.props.className),key:"leftComponent"},P.push(r.cloneElement(p,i))),P.push(T),_&&(n={className:s(l.rightComponent,_.props.className),key:"rightComponent"},P.push(r.cloneElement(_,n))),r.createElement("div",{className:w},P)},e}(r.PureComponent)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"settingsKeys",function(){return n});var n={ACTIVE_BROKER:"trading.active_broker",FILTER_BROKER:"trading.filter_brokers_by_locale",PROPERTIES:"trading.chart.proterty",QTY:"trading.qty.",PROFIT_VIEW_TYPE:"trading.dom.profitViewType"}},function(t,e,i){"use strict";function n(t){var e,i,n;if(t<1)return o.NumericFormatter.formatNoE(t);if(e=0,i=+t,isFinite(i))for(;i>=1e3&&i%100==0;)e++,i/=1e3;return n=e<r.length?r[e]:"e"+3*e,i+n}var o,r;Object.defineProperty(e,"__esModule",{value:!0}),e.abbreviatedNumber=n,o=i(68),r=["","K","M","G","T","Y"]},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"LabelSettings",function(){return n});var n;!function(t){t.offset=8,t.font="Arial",t.fontSize=12,t.lineSpacing=10,t.bgColor="rgba(255,255,255,.8)",t.borderColor="#e3e3e3",t.padding=8}(n||(n={}))},function(t,e,i){"use strict";function n(t){i.e(11).then(function(e){i(428).showGoToDateDialog(t)}.bind(null,i)).catch(i.oe)}Object.defineProperty(e,"__esModule",{value:!0}),e.showGoToDateDialog=n},,,,function(t,e,i){"use strict";!function(t){t.fn.selectable=function(e){return this.each(function(){var i=t(this);i.css("user-select",e?"text":"none"),i.css("-moz-user-select",e?"text":"-moz-none"),i.css("-webkit-user-select",e?"auto":"none"),(t.browser.msie||t.browser.opera)&&i.attr("unselectable",e?"off":"on")})}}(jQuery)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(296);$.fn.lastCharSup=function(){for(var t=0;t<this.size();t++)Object(n.a)(this.get(t));return this}},function(t,e){
t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><g fill="currentColor" fill-rule="evenodd"><path fill-rule="nonzero" d="M14 17a3 3 0 1 1 0-6 3 3 0 0 1 0 6zm0-1a2 2 0 1 0 0-4 2 2 0 0 0 0 4z"/><path d="M5.005 16A1.003 1.003 0 0 1 4 14.992v-1.984A.998.998 0 0 1 5 12h1.252a7.87 7.87 0 0 1 .853-2.06l-.919-.925c-.356-.397-.348-1 .03-1.379l1.42-1.42a1 1 0 0 1 1.416.007l.889.882A7.96 7.96 0 0 1 12 6.253V5c0-.514.46-1 1-1h2c.557 0 1 .44 1 1v1.253a7.96 7.96 0 0 1 2.06.852l.888-.882a1 1 0 0 1 1.416-.006l1.42 1.42a.999.999 0 0 1 .029 1.377s-.4.406-.918.926a7.87 7.87 0 0 1 .853 2.06H23c.557 0 1 .447 1 1.008v1.984A.998.998 0 0 1 23 16h-1.252a7.87 7.87 0 0 1-.853 2.06l.882.888a1 1 0 0 1 .006 1.416l-1.42 1.42a1 1 0 0 1-1.415-.007l-.889-.882a7.96 7.96 0 0 1-2.059.852v1.248c0 .56-.45 1.005-1.008 1.005h-1.984A1.004 1.004 0 0 1 12 22.995v-1.248a7.96 7.96 0 0 1-2.06-.852l-.888.882a1 1 0 0 1-1.416.006l-1.42-1.42a1 1 0 0 1 .007-1.415l.882-.888A7.87 7.87 0 0 1 6.252 16H5.005zm3.378-6.193l-.227.34A6.884 6.884 0 0 0 7.14 12.6l-.082.4H5.005C5.002 13 5 13.664 5 14.992c0 .005.686.008 2.058.008l.082.4c.18.883.52 1.71 1.016 2.453l.227.34-1.45 1.46c-.004.003.466.477 1.41 1.422l1.464-1.458.34.227a6.959 6.959 0 0 0 2.454 1.016l.399.083v2.052c0 .003.664.005 1.992.005.005 0 .008-.686.008-2.057l.399-.083a6.959 6.959 0 0 0 2.454-1.016l.34-.227 1.46 1.45c.003.004.477-.466 1.422-1.41l-1.458-1.464.227-.34A6.884 6.884 0 0 0 20.86 15.4l.082-.4h2.053c.003 0 .005-.664.005-1.992 0-.005-.686-.008-2.058-.008l-.082-.4a6.884 6.884 0 0 0-1.016-2.453l-.227-.34 1.376-1.384.081-.082-1.416-1.416-1.465 1.458-.34-.227a6.959 6.959 0 0 0-2.454-1.016L15 7.057V5c0-.003-.664-.003-1.992 0-.005 0-.008.686-.008 2.057l-.399.083a6.959 6.959 0 0 0-2.454 1.016l-.34.227-1.46-1.45c-.003-.004-.477.466-1.421 1.408l1.457 1.466z"/></g></svg>'},,,function(t,e){},function(t,e,i){"use strict";var n,o;i.d(e,"b",function(){return n}),i.d(e,"a",function(){return o}),n=52,o=5},function(t,e,i){"use strict";function n(){var t,e,i=[];for(i=i.concat([61536,61537,61538,61539]),i=i.concat([61725,61726]),i=i.concat([61575,61576,61796,61797]),i=i.concat([61779,61780,61781,61782,61783,61784,61785,61786]),t=i.slice(0),e=61440;e<=61846;e++)-1===i.indexOf(e)&&(e%16==15&&61487!==e||e>=61620&&e<=61630||61718!==e&&61719!==e&&61472!==e&&61619!==e&&t.push(e));return t}Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"availableIcons",function(){return o});var o=n()},function(t,e){},function(t,e){},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o;Object.defineProperty(e,"__esModule",{value:!0}),o=function(){function t(t,e){var i,n;for(i=0;i<e.length;i++)n=e[i],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),e.KeyboardListener=function(){function t(){
var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"keydown",i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];n(this,t),this._event=e,this._preventDefault=i}return o(t,[{key:"regHandlers",value:function(t){this._handlers=t}},{key:"watchOn",value:function(t){this._listener=this._regListener(),this._watchingEl=t,t.addEventListener(this._event,this._listener)}},{key:"stopWatching",value:function(){this._watchingEl.removeEventListener(this._event,this._listener)}},{key:"_regListener",value:function(){var t=this;return function(e){var i=e.which,n=t._getHandler(i);e.stopPropagation(),n(e)}}},{key:"_getHandler",value:function(t){var e=this,i=e._handlers[t],n=function(){},o=function(t){e._preventDefault&&t.preventDefault(),i(t)};return i?o:n}}]),t}()},function(t,e,i){"use strict";var n,o;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"settingsKey",function(){return n}),i.d(e,"defaultHeight",function(){return o}),n="chart.bottom-widgetbar",o=320},function(t,e,i){"use strict";function n(t){var e=6e4;return e-t%e}function o(t){var e=36e5;return e-t%e}function r(t){var e=864e5;return e-t%e}function s(t){var e=200;if((t=Math.floor(t/6e4))<60)e+=n(t);else if(t<1440)e+=o(t);else{if(!(t<43200))return 0;e+=r(t)}return e}function a(t,e,i,n,o){var r,l,c,h,d,_,f,m;u.relativeTimeThreshold("h",24),"number"==typeof e&&(e=new Date(e)),r=36e5,l=u(new Date).diff(e),c=s(l),h=p[window.language],d="",_=0,f={L:"L",LL:"LL",LLL:"LLL"},h&&(f=h),d=i||Math.round(l/r)<24?u(e).fromNow():o?u(e).format(o):e.getFullYear()===(new Date).getFullYear()?u(e).format(f.L):u(e).format(f.LL),t.parent().toggleClass("just-now",l<45e3),t.attr("title",u(e).format(f.LLL)).text(d),c&&(m=t.data("ago-date-timer"),m&&clearTimeout(+m),_=setTimeout(function(){a(t,e)},c)),n&&t.closest(".js-visible-after-ago-formatter-inited").removeClass("i-invisible js-visible-after-ago-formatter-inited"),t.data("ago-date-timer",_)}function l(t){$(t).find("*").andSelf().filter("[data-ago-date-timer]").each(function(t,e){clearTimeout(+$(e).attr("data-ago-date-timer"))})}function c(t){var e=Math.floor(t/6e4),i="",s=0;return e<60?(i=(e<1?0:e)+$.t("m",{context:"date_diff_short"}),s=n(t)):e<1440?(e=Math.floor(e/60),i=e+$.t("h",{context:"date_diff_short"}),s=o(t)):e<43200?(e=Math.floor(e/1440),i=e+$.t("d",{context:"date_diff_short"}),s=r(t)):e<15768e3?(e=Math.floor(e/43200),i=e+$.t("mn",{context:"date_diff_short"})):(e=Math.floor(e/15768e3),i=e+$.t("y",{context:"date_diff_short"})),s&&(s+=200),{text:i,timeout:s}}var h,u,d,p;Object.defineProperty(e,"__esModule",{value:!0}),h=i(14),i(9),u=i(223),d={L:"MMM D",LL:"YYYY MMM D",LLL:"HH:mm - YYYY MMM D"},p={ja:d,ko:d},e.agoDateFormatter=a,e.destroy=l,e.shortFormat=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"footerWidgetHeight",function(){return n});var n=30},function(t,e,i){"use strict";var n,o;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"width",function(){return n}),i.d(e,"SETTINGS_KEY",function(){return o}),n=301,o="domepanel.visible"},function(t,e,i){"use strict"
;function n(){return{version:2,width:267,pages:[]}}var o,r,s,a;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"layoutKeyName",function(){return o}),e.getDefaultState=n,i.d(e,"tabsWidth",function(){return r}),i.d(e,"hiderGapWidth",function(){return s}),i.d(e,"borderWidth",function(){return a}),o="layout-settings",r=46,s=5,a=1},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={};e.default=n,t.exports=e.default},,,function(t,e,i){"use strict";function n(t){return t.replace(r,s)}function o(t){return void 0===t&&(t=""),t.replace(/(<([^>]+)>)/gi,"")}var r,s;Object.defineProperty(e,"__esModule",{value:!0}),e.htmlEscape=n,e.removeTags=o,r=/[<"'&>]/g,s=function(t){return"&#"+t.charCodeAt(0)+";"}},function(t,e,i){"use strict";function n(t){l.call(this,t),this.ch=t.char[0]||" ",this.fontFamily=t.fontFamily||"Arial",this._charCache=new a(this.ch,!1,!1,this.fontFamily,this.height)}var o=i(7).Point,r=i(27).selectionTolerance,s=i(10).HitTestResult,a=i(327),l=i(46).PaneRendererAbstractShape;inherit(n,l),n.prototype.drawShape=function(t){var e,i,n,o,r,s,a=this._vertOffset>0?1:-1;for(e=0,i=this.items.length;e<i;e++)n=this.items[e],o=n.x,r=n.y+this._vertOffset-a*Math.round(this.height/2),s=n.style&&null!=n.style.color?n.style.color:this._color,this._charCache.paintTo(t,s,o,r,"center",this._vertOffset>0?"middle":"bottom")},n.prototype.hitTest=function(t){var e,i,n,a=this._vertOffset,l=r(this.height);for(e=0;e<this.items.length;++e)if((i=this.items[e])&&(n=new o(i.x,i.y+a),n.subtract(t).length()<=l))return new s(s.REGULAR);return null},e.PaneRendererUnicodeChar=TradingView.PaneRendererUnicodeChar=n},function(t,e,i){"use strict";function n(t){var e,i=Object(o.get_timezone)(t).offset_utc(Date.now()),n="",r=i/1e3/60/60;return r%1&&(n=":"+r%1*60),e="",e=r>0?"+"+(r-r%1)+n:0===r?"":r-r%1+n+"",{offset:i,string:"UTC"+e}}var o;e.a=n,o=i(33),i.n(o)},,,,,,,,function(t,e,i){"use strict";function n(t,e,i){this._textSizeCache=e,this._data=t,this._fontSize=t.fontsize?t.fontsize:t.fontSize?t.fontSize:12,this._lineSpacing="number"==typeof this._data.lineSpacing&&this._data.lineSpacing?this._data.lineSpacing:0,t.lines=this._lines=l.prototype.wordWrap.call(this,t.text,t.wordWrapWidth),this._hittest=i||new c(c.MOVEPOINT)}function o(){var t=document.createElement("canvas");t.width=0,t.height=0,r=t.getContext("2d"),t=null}var r,s=i(7).Point,a=i(57).pointInRectangle,l=i(218).TextRenderer,c=i(10).HitTestResult,h=i(49).drawRoundRect,u={priceRange:{width:15,height:14,
data:[134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,134,134,138,255,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,134,134,138,255,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255]},barsRange:{width:16,height:15,
data:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,0,0,0,0,0,0,0,0,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,0,0,0,0,0,0,0,0,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,134,134,138,255,134,134,138,255,0,0,0,0,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,136,136,136,56,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,0,0,0,0,0,0,0,0,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,136,136,136,56,134,134,138,255,134,134,138,255,136,136,136,56,134,134,138,255,0,0,0,0,0,0,0,0,134,134,138,255,134,134,138,255,0,0,0,0,0,0,0,0,134,134,138,255,134,134,138,255,0,0,0,0,0,0,0,0,134,134,138,255,136,136,136,56,134,134,138,255,134,134,138,255,136,136,136,56,134,134,138,255,0,0,0,0,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,0,0,0,0,134,134,138,255,136,136,136,56,134,134,138,255,134,134,138,255,136,136,136,56,134,134,138,255,0,0,0,0,0,0,0,0,134,134,138,255,134,134,138,255,0,0,0,0,0,0,0,0,134,134,138,255,134,134,138,255,0,0,0,0,0,0,0,0,134,134,138,255,136,136,136,56,134,134,138,255,134,134,138,255,137,137,137,74,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,0,0,0,0,0,0,0,0,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,137,137,137,74,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,0,0,0,0,134,134,138,255,134,134,138,255,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,0,0,0,0,0,0,0,0,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,0,0,0,0,0,0,0,0,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},angle:{width:14,height:12,
data:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,130,130,134,76,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,130,130,134,76,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,130,130,134,76,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,130,130,134,76,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,130,130,134,76,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,130,130,134,76,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,130,130,134,76,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,130,130,134,76,0,0,0,0,0,0,0,0,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,130,130,134,76,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,130,130,134,76,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255,134,134,138,255]}};n.prototype._preRender=function(){var t,e,i,n,a,l,c,h,u,d,p,_,f,m,g,y,v,b,S,w,P,T,C;if(!this._preRendered){if(r||o(),t=this._data.points[0].x+(this._data.offsetX||0),e=t,i=this._data.points[0].y+(this._data.offsetY||0),n=i,a=this._fontSize,l=this._lineSpacing,c=a+l,h=c*this._lines.length-l,r.textBaseline="top",r.font=this.fontStyle(),u=[],this._data.wordWrapWidth)for(d=this._data.wordWrapWidth,p=0;p<this._lines.length;p++)u.push(this._data.wordWrapWidth);else for(d=0,p=0;p<this._lines.length;p++)_=r.measureText(this._lines[p]).width,u.push(_),d=Math.max(d,_);if(this._data.backgroundColor||this._data.borderColor||this._data.highlightBorder&&this._data.wordWrapWidth){f={top:this._data.paddingTop||0,right:this._data.paddingRight||0,bottom:this._data.paddingBottom||0,left:this._data.paddingLeft||0},m={x:0,y:0},this._data.backgroundHorzInflate&&(g=this._data.backgroundHorzInflate/2,f.left+=g,f.right+=g,m.x=-g),this._data.backgroundVertInflate&&(y=this._data.backgroundVertInflate/2,f.top+=y,f.bottom+=y,m.y=-y),v="number"==typeof this._data.padding?this._data.padding:~~(a/6);for(p in f)f[p]||(f[p]=v);b={x:Math.floor(t+m.x),y:Math.floor(i+m.y),w:Math.ceil(d+f.left+f.right),h:Math.ceil(h+f.top+f.bottom)},e+=f.left+m.x,n+=f.top+m.y,"bottom"!==this._data.vertAlign&&"middle"!==this._data.vertAlign||(S="middle"===this._data.vertAlign?i-b.h/2:i-b.h-(b.y-i),w=S-b.y,n+=w,b.y=S),
"right"!==this._data.horzAlign&&"center"!==this._data.horzAlign||(P="center"===this._data.horzAlign?t-b.w/2:t-b.w-(b.x-t),T=P-b.x,e+=T,b.x=P,!0!==this._data.doNotAlignText&&("right"===this._data.horzAlign?(r.textAlign="end",e+=d):(r.textAlign="center",e+=d/2))),b.w%2!=0&&b.w++,b.x+=.5,b.y+=.5,this._boundingRect=[new s(b.x,b.y),new s(b.x+b.w,b.y+b.h)],this._rect=b,this._padding=f,this._defaultPadding=v}else"bottom"!==this._data.vertAlign&&"middle"!==this._data.vertAlign||(n-=Math.round(h*("middle"===this._data.vertAlign?.5:1))),C=e,"right"!==this._data.horzAlign&&"center"!==this._data.horzAlign||(C-=Math.round(d*("center"===this._data.horzAlign?.5:1))),this._boundingRect=[new s(C,n),new s(C+d,n+h)];this._textPoint={x:e,y:n},this._textSizeCache&&(this._textSizeCache.widths=u),this._preRendered=!0,this._maxWidth=d}},n.prototype._drawIcon=function(t,e,i,n){var o,r,s,a;if(u.hasOwnProperty(n)){if(o=u[n],!o.src){for(o.src=document.createElement("canvas"),o.src.width=o.width,o.src.height=o.height,r=o.src.getContext("2d"),s=r.createImageData(o.width,o.height),a=0;a<o.data.length;a++)s.data[a]=o.data[a];r.putImageData(s,0,0)}t.drawImage(o.src,e,i)}},n.prototype.fontStyle=function(){return(this._data.bold?"bold ":"")+(this._data.italic?"italic ":"")+this._fontSize+"px "+this._data.font},n.prototype.draw=function(t){var e,i,n,o,r,s,a,l,c,u,d;if(0!==this._data.points.length){for(this._preRender(),e=this._fontSize,i=this._lineSpacing,n=e+i,t.textBaseline="top",t.font=this.fontStyle(),o=this._rect,(this._data.backgroundColor||this._data.borderColor||this._data.highlightBorder&&this._data.wordWrapWidth)&&this._rect?("right"!==this._data.horzAlign&&"center"!==this._data.horzAlign||!0!==this._data.doNotAlignText&&(t.textAlign="right"===this._data.horzAlign?"end":"center"),this._data.backgroundRoundRect?(h(t,o.x,o.y,o.w,o.h,this._data.backgroundRoundRect),this._data.backgroundColor&&(t.fillStyle=this._data.backgroundColor,t.globalAlpha=this._data.backgroundTransparency,t.fill(),t.globalAlpha=1),this._data.borderColor&&(r="number"==typeof this._data.borderWidth?this._data.borderWidth:~~Math.max(e/12,1),t.strokeStyle=this._data.borderColor,t.lineWidth=r,t.stroke())):(this._data.backgroundColor&&(t.fillStyle=this._data.backgroundColor,t.globalAlpha=this._data.backgroundTransparency,t.fillRect(o.x,o.y,o.w,o.h),t.globalAlpha=1),this._data.borderColor?(r="number"==typeof this._data.borderWidth?this._data.borderWidth:~~Math.max(e/12,1),t.strokeStyle=this._data.borderColor,t.lineWidth=r,t.strokeRect(o.x-r/2,o.y-r/2,o.w+r,o.h+r)):this._data.highlightBorder&&(t.strokeStyle=this._data.color,t.lineWidth=1,t.beginPath(),l=[3,1],t.dashedLineTo(o.x-.5,a=o.y-.5,s=o.x+o.w+.5,a,l),t.dashedLineTo(s,a,s,a=o.y+o.h+.5,l),t.dashedLineTo(s=o.x-.5,a,o.x+o.w+.5,a,l),t.dashedLineTo(s,o.y-.5,s,a,l),t.globalAlpha=.5,t.stroke(),t.globalAlpha=1)),this._data.icons&&this._data.icons.forEach(function(e,i){var r=o.x+this._defaultPadding,s=o.y+this._padding.top+n*i;this._drawIcon(t,r,s,e)
},this)):"right"===this._data.horzAlign?t.textAlign="end":"center"===this._data.horzAlign&&(t.textAlign="center"),c=this._textPoint.x,u=this._textPoint.y,t.fillStyle=this._data.color,this._data.forceTextAlign&&(t.textAlign=this._data.horzAlign?this._data.horzAlign:"left"),d=0;d<this._lines.length;d++)t.fillText(this._lines[d],c,u),u+=n;return{width:o.w+2}}},n.prototype.hitTest=function(t){return 0===this._data.points.length?null:(this._preRender(),this._boundingRect&&a(t,this._boundingRect[0],this._boundingRect[1])?this._hittest:null)},e.TrendLineStatsRenderer=n},,,function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"RiskRewardPointIndex",function(){return n});var n;!function(t){t[t.Entry=0]="Entry",t[t.Close=1]="Close",t[t.ActualEntry=2]="ActualEntry",t[t.ActualClose=3]="ActualClose"}(n||(n={}))},function(t,e,i){"use strict";var n,o;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"AlertStatus",function(){return n}),i.d(e,"Direction",function(){return o}),function(t){t[t.Waiting=0]="Waiting",t[t.Success=1]="Success",t[t.Failure=2]="Failure"}(n||(n={})),function(t){t[t.Up=1]="Up",t[t.Down=2]="Down"}(o||(o={}))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"CalloutConsts",function(){return n});var n;!function(t){t[t.RoundRadius=8]="RoundRadius",t[t.TextMargins=2]="TextMargins",t[t.MinWidth=100]="MinWidth"}(n||(n={}))},function(t,e,i){"use strict";function n(t,e){return t.compareTo(e)}function o(t){return Array.from(t).reduce(function(t,e){var i=+e;return-1===t.indexOf(i)&&t.push(i),t},[])}function r(t,e,i){var n=6e4,o=new Date(e.valueOf()+t*n);return t+(i.offset_loc(e)/n-i.offset_loc(o)/n)}var s,a,l,c,h,u,d,p;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"SessionEntry",function(){return d}),i.d(e,"ExchangeSession",function(){return p}),s=i(33),i.n(s),a=i(85),l=i(5),c=Object(l.getLogger)("Chart.Model.ExchangeSession"),h=[s.MONDAY,s.TUESDAY,s.WEDNESDAY,s.THURSDAY,s.FRIDAY],u=[s.SUNDAY,s.MONDAY,s.TUESDAY,s.WEDNESDAY,s.THURSDAY,s.FRIDAY,s.SATURDAY],d=function(){function t(t,e,i){this._dayOfWeek=t,this._start=e,this._length=i}return t.prototype.start=function(){return this._start},t.prototype.alignedStart=function(){return this._start<0?this._start+s.minutesPerDay:this._start},t.prototype.isOvernight=function(){return this._start<0},t.prototype.dayOfWeek=function(){return this._dayOfWeek},t.prototype.length=function(){return this._length},t.prototype.weight=function(){return this._dayOfWeek*s.minutesPerDay+this._start},t.prototype.compareTo=function(t){var e=this.weight(),i=e+this._length,n=t.weight();return e<=n&&n<i?0:e>n?1:-1},t}(),p=function(){function t(t){void 0===t&&(t="0000-0000");var e=this;this._entries=[],this._firstDayOfWeek=s.MONDAY,this._weekEndsCount=null,"24x7"===t.toLowerCase()?u.forEach(function(t){e.addSessionEntry(t,0,0)}):this._parseSpec(t),this._entries.sort(n)}return t.prototype.entries=function(){return this._entries},t.prototype.firstDayOfWeek=function(){return this._firstDayOfWeek},
t.prototype.addSessionEntry=function(t,e,i){i<=e&&0!==e&&(e-=s.minutesPerDay);var n=i===e?s.minutesPerDay:i-e;this._entries.push(new d(t,e,n))},t.prototype.isWeekEnd=function(t){var e=Object(a.lowerbound)(this._entries,new d(t,0,0),function(t,e){return t.dayOfWeek()<e.dayOfWeek()});return e>this._entries.length-1||this._entries[e].dayOfWeek()!==t},t.prototype.weekEndsCount=function(){if(null===this._weekEndsCount){var t={};this._entries.forEach(function(e){t[e.dayOfWeek()]=1}),this._weekEndsCount=7-Object.keys(t).reduce(function(e,i){return e+(t[+i]||0)},0)}return this._weekEndsCount},t.prototype.hasWeekEnds=function(){return this.weekEndsCount()>0},t.prototype.indexOfSessionEntry=function(t,e){var i=Object(a.lowerbound)(this._entries,new d(t,e,0),function(t,e){return t.compareTo(e)<0});return i>this._entries.length-1?0:i},t.prototype.findSessionEntry=function(t,e){return this._entries[this.indexOfSessionEntry(t,e)]},t.prototype.correctTradingDay=function(t,e){var i=s.get_day_of_week(t),n=60*s.get_hours(t)+s.get_minutes(t),o=this.findSessionEntry(i,n),r=o.dayOfWeek(),a=(r-i+7)%7;return 0!==a?s.add_days_considering_dst(e,t,a):t},t.prototype.alignToSessionStart=function(t,e){var i=s.get_day_of_week(t),n=s.get_minutes_from_midnight(t),o=this.findSessionEntry(i,n),a=o.alignedStart(),l=o.dayOfWeek(),c=o.isOvernight(),h=(l-i+7)%7-(c?1:0);return 0!==h&&s.add_date(t,h),s.set_hms(t,a/60|0,a%60,0,0),r(o.length(),t,e)},t.prototype._parseSpec=function(t){var e=this,i={},n=!1;t=this._parseFirstDayOfWeek(t),t.split("|").forEach(function(t){var e,r,s=t.split(":");if(1!==s.length&&2!==s.length)return void c.logError("Bad session section: "+t);if(e=1===s.length){if(n)return void c.logError("Duplicated default section: "+t);n=!0}r=e?h:o(s[1]),r.forEach(function(t){e&&i[t]||(i[t]=s[0])})}),u.forEach(function(n){var o=i[n];void 0!==o&&o.split(",").forEach(function(i){var o,r,a=i.split("-");2!==a.length&&(c.logError("Bad sessions spec: "+t),a=["0000","0000"]),o=a[0],r=a[1],e.addSessionEntry(n,s.get_minutes_from_hhmm(o),s.get_minutes_from_hhmm(r))})})},t.prototype._parseFirstDayOfWeek=function(t){var e,i,n,o=t.split(";");return o.length>2?(c.logError("Only one `first day` specification expected @ session "+t),t):1===o.length?t:(e=o[0].indexOf("-")>=0,i=e?NaN:parseInt(o[0]),n=1,isNaN(i)&&(n=0,i=parseInt(o[1])),i<s.SUNDAY||i>s.SATURDAY?(c.logError("Unexpected day index @ session: "+t+"; day index "+i),t):(this._firstDayOfWeek=i,o[n]))},t}()},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,i){"use strict";(function(t){function e(){var e=window.parent[window.urlParams.uid].settingsAdapter;null!=e?(TVSettings.setSettingsAdapter(e),TVSettings.sync()):t.enabled("use_localstorage_for_settings")&&TVSettings.sync()}function n(){var t,e,i,n,o=urlParams.theme;return o?(t=b.savedThemeName(),e=o.toLowerCase(),(i=b.themes[e])?(b.setTheme(i.name),b.syncTheme(),o===t?$.Deferred().resolve():(n=$.Deferred(),b.getStdTheme(i.name).then(function(t){n.resolve(t.content)}).catch(function(t){
console.warn("Cannot load theme {0}, reason: {1}".format(i.name,t)),n.resolve()}),n.promise())):$.Deferred().resolve()):$.Deferred().resolve()}function o(t){var e=/(\d+)(\w+)/;return t.map(function(t){var i=e.exec(t.text),n=i[2].toLowerCase(),o=parseInt(i[1]),r="y"===n?12*o+"m":o+n,s=gt.Symbol.parsePeriod(t.resolution);return{text:window.t(t.title)||o+window.t(n,{context:"dates",count:o}),description:t.description||"",value:r,targetResolution:t.resolution,requiresIntraday:s.isIntraday}})}function r(){JSON.parse(urlParams.disabledFeatures).forEach(function(e){t.setEnabled(e,!1)}),JSON.parse(urlParams.enabledFeatures).forEach(function(e){t.setEnabled(e,!0)})}function s(){t.enabled("saveload_storage_customization")&&(window.parent[urlParams.uid].saveLoadAdapter?S.setCustomAdapter(window.parent[urlParams.uid].saveLoadAdapter):void 0!==urlParams.chartsStorageUrl&&urlParams.chartsStorageUrl&&void 0!==urlParams.clientId&&urlParams.clientId?S.initialize(urlParams.clientId,urlParams.userId,urlParams.chartsStorageUrl,urlParams.chartsStorageVer||"1.0"):(t.setEnabled("saveload_storage_customization",!1),t.setEnabled("header_saveload",!1)))}function a(){kt.resolve()}function l(){return!(!(Pt.configFlags||{}).supportBottomWidget&&!window.urlParams.restConfig)}function c(e){var n,o,r,s,a,l;return t.enabled("header_widget")?(n=H.allocate({areaName:"top"}),o=i(302).ChartChangesWatcher,r=new o(e.chartWidgetCollection.undoHistory,window.saver,I),s=JSON.parse(urlParams.favorites),s.intervals=s.intervals.map(function(t){var e=""+t;return e.match(/1[DWMYdwmy]/)&&(e=e.slice(1)),e}),a=null,t.enabled("study_templates")&&(a=new k(D,TVSettings),window.studyTemplates=new x({chartWidgetCollection:e.chartWidgetCollection,favoriteStudyTemplatesService:a})),l=Modernizr.touch?["full"]:t.enabled("caption_buttons_text_if_possible")?void 0:["medium"],new g(new m,{chartSaver:window.saver,chartApiInstance:ChartApiInstance,chartWidgetCollection:e.chartWidgetCollection,defaultIntervals:Object.keys(ChartApiInstance.defaultResolutions()),defaultFavoriteStyles:s.chartTypes,defaultFavoriteIntervals:s.intervals,hideStudyTemplates:!0,resizerBridge:n,studyMarket:window.studyMarket,studyTemplates:window.studyTemplates,favoriteStudyTemplatesService:a,allowedModes:l,saveChartService:e.saveChartService,loadChartService:e.loadChartService,chartChangesWatcher:r})):null}function h(t){if(St){var e=urlParams.toolbarbg&&/^[0-9a-f]+$/i.test(urlParams.toolbarbg)?urlParams.toolbarbg+"":void 0;return e&&$("<style>").text("body,.chart-controls-bar,#footer-chart-panel{background-color:#"+e+" !important}").appendTo($("head")),new y({bgColor:e,chartWidgetCollection:t,drawingsAccess:urlParams.drawingsAccess?JSON.parse(urlParams.drawingsAccess):void 0,resizerBridge:H.allocate({areaName:"left"})})}return null}function u(e){var i=!0,n=null;return i=l(),t.enabled("open_account_manager")&&(n="paper_trading"),i?new U({resizerBridge:H.allocate({areaName:"bottom"}),chartWidgetCollection:e,widgets:["paper_trading"],defaultActiveWidget:n,configBootloader:new z}):null}function d(t){var e=!0
;return e=l(),e?new q({chartWidgetCollection:t.chartWidgetCollection,hidden:!t.supportBottomWidget,domePanelBootloader:t.domePanelBootloader,resizerBridge:H.allocate({areaName:"footer"}),bottomWidgetbarBootloader:t.bottomWidgetbarBootloader}):null}function p(){return t.enabled("dome_widget")?new Y({resizerBridge:H.allocate({areaName:"dompanel"})}):null}function _(t){var e=JSON.parse(urlParams.widgetbar);return ChartApiInstance.setWatchlistSettings(e.watchlist_settings),e.watchlist||e.detail||e.datawindow?new G({settingsPrefix:"widgetbar",resizerBridge:H.allocate({areaName:"right"}),showCloseButton:!0,chartWidgetCollection:t,customization:e,readonly:e.watchlist_settings&&e.watchlist_settings.readonly}):null}var f,m,g,y,v,b,S,w,P,T,C,x,k,L,I,A,E,M,O,D,V,R,B,F,N,W,j,H,U,z,q,Y,G,K,X,J,Z,Q,tt,et,it,nt,ot,rt,st,at,lt,ct,ht,ut,dt,pt,_t,ft,mt,gt,yt,vt,bt,St,wt,Pt,Tt,Ct,xt,kt,Lt;i(535),i(9),f=i(536).i18nReady,i(537),i(159),i(544),r(),m=i(545).RestrictedToolsetBootloader,g=i(546).HeaderToolbarBootloader,y=i(549).DrawingToolbarBootloader,v=i(242).isDrawingToolbarVisible,b=i(131),S=i(299),w=i(30).Action,P=i(552).ChartSaver,T=i(553).SaveChartService,C=i(560).LoadChartService,x=i(562).StudyTemplates,k=i(569).FavoriteStudyTemplateService,L=i(56).linking,I=i(42),A=i(13),E=A.formatterOptions,M=A.customFormatters,O=i(570).StudyMarket,D=i(99).TVXWindowEvents,V=i(572).createDeferredPromise,R=i(241),B=i(23).Interval,F=i(573).Root,N=i(575).ChartPage,W=i(44).destroyQuoteSessions,j=new F(window),H=new N(j.allocate()),U=i(578).BottomWidgetbarBootloader,z=i(579).TerminalConfigSetBootloder,q=i(584).FooterWidgetBootloader,Y=i(585).DomePanelBootloader,G=i(586).WidgetbarBootloader,K=i(587).Trading,X=i(80),J=X.TRADING_SERVICE,Z=i(595).TradingGuiAccessor,Q=i(308).migrateConfigFlags,tt=i(310).CHART_WIDGET_COLLECTION_SERVICE,et=i(191),it=i(407),nt=new K(new Z),et.registerService(J,nt),it.loadWidgetBarModules=function(t){t({Watchlist:i(601),NewsWidget:i(610),Detail:i(619)})},ot=i(118).CONNECTSTATUSES,rt=i(317).overrides,window.parent[urlParams.uid].newsProvider&&(rt.getNews=window.parent[urlParams.uid].newsProvider.get_news,rt.isNewsGeneric=!!window.parent[urlParams.uid].newsProvider.is_news_generic),st=i(306),at=i(625),lt=at.addRealtimeToBroker,ct=at.addDomeToBroker,i(626),ht=i(627),ut=i(349).createFavoriteDrawingToolbar,dt=i(785),pt=i(32),_t=i(799),i(216),i(807),ft=i(119).setSearchRequestDelay,mt=i(43),gt=i(21),yt=window.parent[urlParams.uid].customIndicatorsUrl,vt=$.Deferred(),bt=$.Deferred(),St=t.enabled("left_toolbar"),$.when(vt,bt).done(function(){window.ChartApiInstance.start()}),yt?$.getScript(yt).done(function(){void 0!==window.__customIndicators&&window.isArray(window.__customIndicators)&&(window.PineJS=i(21),JSServer.studyLibrary=JSServer.studyLibrary.concat(window.__customIndicators),console.log("{0} custom indicators loaded.".format(window.__customIndicators.length)),vt.resolve())}).fail(function(t){console.warn("Error loading custom indicators @ `{0}`: {1} ({2}) ".format(yt,t.statusText,t.status)),vt.resolve()}):vt.resolve(),
window.widgetReady=function(t){I.subscribe("onChartReady",t)},window.customizeUI=function(t){null!=t.studiesOverrides&&pt.setDefaultsOverrides(t.studiesOverrides),window.__defaultsOverrides=t.defaultsOverrides},window.applyStudiesOverrides=function(t){t&&window.chartWidgetCollection.applyStudiesOverrides(t)},window.applyOverrides=function(t){$.extend(!0,window.__defaultsOverrides,t),window.applyDefaultsOverrides(TradingView.defaultProperties.chartproperties),window.applyDefaultOverridesToLinetools(),window.chartWidgetCollection.applyOverrides(t)},window.changeTheme=function(t){var e=b.themes[t.toLowerCase()];e&&window.tradingViewApi.themes().setStdTheme(e.name).then(function(){window.applyOverrides(window.__defaultsOverrides)})},window.is_authenticated=!1,wt=window.parent[urlParams.uid].brokerFactory,Pt=JSON.parse(window.urlParams.brokerConfig),window.t("charts by TradingView"),window.t("powered by TradingView"),window.t("by TradingView"),Tt=null,Ct=V(),xt=function(e){function n(){k&&k.load(),A&&A.load().then(function(t){TradingView.bottomWidgetBar=t}),V&&V.load().then(function(t){window.footerWidget=t}),F&&F.load().then(function(t){window.widgetbar=t,null==window.tradingViewApi.watchlist()&&window.tradingViewApi.setWatchlistManager(null)})}var r,s,a,f,m,g,y,b,S,w,x,k,A,D,V,F;if(!Modernizr.canvas||!Modernizr.canvastext)throw Error("Charting library cannot be running under this browser");t.setEnabled("charting_library_debug_mode","true"===urlParams.debug),r=$("#library-container"),t.enabled("remove_library_container_border")&&(r.css("border","0px"),r.css("padding","1px")),t.enabled("no_min_chart_width")&&(window.document.body.style.minWidth="0px"),window.customizeUI({studiesOverrides:urlParams.studiesOverrides?JSON.parse(urlParams.studiesOverrides):void 0,defaultsOverrides:JSON.parse(urlParams.overrides)}),urlParams.numeric_formatting=urlParams.numeric_formatting&&JSON.parse(urlParams.numeric_formatting),urlParams.numeric_formatting&&"string"==typeof urlParams.numeric_formatting.decimal_sign&&(E.decimalSign=urlParams.numeric_formatting.decimal_sign[0]),window.ChartApiInstance=new dt(window.parent[urlParams.uid].datafeed),window.parent[urlParams.uid].customFormatters&&(window.parent[urlParams.uid].customFormatters.timeFormatter&&(M.timeFormatter=window.parent[urlParams.uid].customFormatters.timeFormatter),window.parent[urlParams.uid].customFormatters.dateFormatter&&(M.dateFormatter=window.parent[urlParams.uid].customFormatters.dateFormatter)),window.ChartApiInstance.setStudiesAccessController(window.ChartApiInstance.createStudiesAccessController(urlParams.studiesAccess)),s=urlParams.chartContent?JSON.parse(urlParams.chartContent).json:void 0,a=urlParams.interval||"D",f=o(JSON.parse(urlParams.timeFrames)),m=function(t,e){return t?e!==mt.STATUS_DELAYED&&e!==mt.STATUS_DELAYED_STREAMING&&e!==mt.STATUS_READY?[]:f.filter(function(e){return!(e.requiresIntraday&&!t.has_intraday)&&!(t.supported_resolutions&&t.supported_resolutions.indexOf(B.normalize(e.targetResolution))<0)}):[]},g={resizerBridge:H.allocate({areaName:"center"
}),padding:t.enabled("border_around_the_chart")?5:0,edge:t.enabled("border_around_the_chart")?4:0,content:s,widgetOptions:{hideIdeas:!0,addVolume:!0,handleSessionErrors:!0,muteSessionErrors:!0,timezone:urlParams.timezone,defSymbol:urlParams.symbol,defInterval:a,defTimeframe:urlParams.timeframe&&urlParams.timeframe.toLowerCase(),crossHairMenuEnabled:t.enabled("chart_crosshair_menu"),paneContextMenuEnabled:t.enabled("pane_context_menu"),priceScaleContextMenuEnabled:t.enabled("scales_context_menu"),timeScaleWidget:{contextMenuEnabled:t.enabled("scales_context_menu"),timezoneMenuEnabled:t.enabled("timezone_menu")},goToDateEnabled:t.enabled("go_to_date"),seriesControlBarEnabled:t.enabled("timeframes_toolbar"),seriesControlBar:{timeFramesWidgetEnabled:!0,timeFramesWidget:{goToDateEnabled:t.enabled("go_to_date"),availableTimeFrames:m},timeWidgetEnabled:!0,timeWidget:{timezoneMenuEnabled:t.enabled("timezone_menu")},adjustForDividendsButtonEnabled:!1,extendedHoursButtonEnabled:!1,percentageScaleButtonEnabled:!0,logScaleButtonEnabled:!0,autoScaleButtonEnabled:!0,scalePropertiesButtonEnabled:t.enabled("main_series_scale_menu"),fullscreenButtonEnabled:!0}},globalEvents:!0,snapshotUrl:urlParams.snapshotUrl},St&&(ut(),g.widgetOptions.isDrawingToolbarVisible=v),s&&void 0!==s.extendedData&&(y=s.extendedData,g.metaInfo={id:y.uid,name:y.name,description:y.description,uid:y.uid,username:"",tags:""}),b=window.chartWidgetCollection=new ht(g),window.studyMarket=new O(b),void 0!==et&&et.registerService(tt,b),b.activeChartWidget.subscribe(function(t){I.emit("activeChartChanged",b.getAll().indexOf(t))}),window.saver=new P(b),S=new T(b,window.saver),w=new C(b),window.chartWidget=b.activeChartWidget.value(),window.pro=new TradingView.Pro,(!t.enabled("trading_terminal")||window.tradingController&&window.tradingController.supportFloatingPanel()||wt||window.urlParams&&window.urlParams.restConfig)&&i.e(2).then(function(t){new(i(947))(nt)}.bind(null,i)).catch(i.oe),x=c({chartWidgetCollection:b,saveChartService:S,loadChartService:w}),null!==x?x.load().then(function(t){Tt=t,Ct.resolve()}):(Ct.promise.catch(function(){}),Ct.reject("header widget is not loaded")),k=h(b),A=u(b)||null,D=p()||null,V=d({chartWidgetCollection:b,bottomWidgetbarBootloader:A,domePanelBootloader:D,supportBottomWidget:l()})||null,F=_(b)||null,window.tradingViewApi=new _t(b,window.ChartApiInstance,S,w),L.bindToChartWidgetCollection(b),TradingView.isNaN(urlParams.studyCountLimit)||(TradingView.STUDY_COUNT_LIMIT=Math.max(2,+urlParams.studyCountLimit)),TradingView.isNaN(urlParams.ssreqdelay)||ft(Math.max(0,+urlParams.ssreqdelay)),window.ChartApiInstance.connect(),i.e(2).then(function(t){var e=i(948);window.lineToolPropertiesToolbar=new e(b)}.bind(null,i)).catch(i.oe),function(){var t,e,n=l();wt?(Pt.configFlags&&Q(Pt.configFlags),st.addBroker({id:"Broker",title:"Trading",description:"",icon:"",configFlags:Pt.configFlags||{},customNotificationFields:Pt.customNotificationFields||[],durations:Pt.durations||[]},function(t,e){var i=wt(t)
;void 0===i.connectionStatus&&(i.connectionStatus=function(){return ot.CONNECTED}),void 0===i.subscribeRealtime&&lt(i,t),void 0===i.subscribeDOME&&ct(i,t,window.ChartApiInstance),e(i)}),nt.selectBroker("Broker")):window.urlParams.restConfig&&(t="Trading",e=urlParams.clientId||"PAPERREST",st.addBroker({id:e,title:t,description:"",icon:""},function(n,o){var r=JSON.parse(window.urlParams.restConfig);i.e(35).then(function(s){var a=i(430).Broker;o(new a(n,r.url,{id:e,title:t},r.access_token))}.bind(null,i)).catch(i.oe)}),nt.selectBroker(e)),n||$("#bottom-area").addClass("js-hidden")}(),$(".tv-content").bind("contextmenu",function(t){var e=$(t.originalEvent.target);if(!e.is("input")&&!e.is("textarea"))return!1}),bt.resolve(),b.undoHistory.undoStack().onChange().subscribe(null,R(function(){I.emit("onAutoSaveNeeded")},1e3*(urlParams.autoSaveDelay||5),{leading:!0,trailing:!0})),chartWidget.withModel(null,function(){ChartApiInstance.on("realtime_tick",function(t){I.emit("onTick",t)}),e&&void 0===s&&(b.applyTheme(e),window.applyOverrides(window.__defaultsOverrides)),t.enabled("charting_library_debug_mode")&&I.subscribeToAll(function(){var t=Array.prototype.slice.call(arguments);console.log('Event "{0}", arguments: {1}'.format(t[0],JSON.stringify(t.slice(1))))})}),b.firstWidgetInitialized?n():chartWidget.chartWidgetInitialized.subscribe(null,n,!0),I.subscribe("chart_load_requested",function(t){window.tradingViewApi.loadChart({json:JSON.parse(t.content),extendedData:t})})},window.destroyChart=function(){window.chartWidgetCollection&&(window.chartWidgetCollection.destroy(),window.chartWidgetCollection=null),W(),window.ChartApiInstance&&(window.ChartApiInstance.destroy(),window.ChartApiInstance=null)},s(),kt=$.Deferred(),window.parent[urlParams.uid].loadLastChart&&t.enabled("saveload_storage_customization")?S.getCharts(function(t){if(0===t.length)return void a();var e=t.sort(function(t,e){return e.modified_iso-t.modified_iso})[0];S.getChartContent(e,function(t){var e=JSON.parse(t.content);e.extendedData=t,urlParams.chartContent=JSON.stringify({json:e}),a()},a)},a):a(),e(),Lt=$.Deferred(),$.when(n(),f,Lt,kt).done(function(e){if($(window).resize(),$(".loading-indicator").hide(),setTimeout(xt.bind(null,e),0),t.enabled("14851")&&(Math.random()<=.02||t.enabled("cqg_terminal")||t.enabled("amp_terminal"))){!function(t,e,i,n,o,r,s){t.GoogleAnalyticsObject=o,t[o]=t[o]||function(){(t[o].q=t[o].q||[]).push(arguments)},t[o].l=1*new Date,r=e.createElement(i),s=e.getElementsByTagName(i)[0],r.async=1,r.src=n,s.parentNode.insertBefore(r,s)}(window,document,"script","//www.google-analytics.com/analytics.js","ga");var i=document.URL.match(RegExp("(:?.*://)([^/]+)/.*"))[2];ga("create","UA-112910038-1","auto"),ga("set","anonymizeIp",!0),ga("set",{hostname:i,page:i,referrer:i}),ga("send","pageview")}}),function(){var t=!0;window.parent[urlParams.uid].datafeed.onReady(function(e){t&&console.warn("`onReady` should return result asynchronously. Use `setTimeout` with 0 interval to execute the callback function."),window.configurationData=e,Lt.resolve()}),
t=!1}(),window.getFunctionFromArguments=function(t){return window.parent[urlParams.uid][t]},window.createShortcutAction=function(){var t={};return function(e,i){void 0===t[e]&&(t[e]=new w({shortcut:e})),t[e].callbacks().subscribe(null,i)}}(),window.initializationFinished=function(){window.chartWidgetCollection.undoHistory.clearStack()},window.resizeWindow=function(){$(window).resize()},window.headerReady=function(){return Ct.promise},window.createButton=function(t){if(null===Tt)throw Error("Cannot create button: header widget is not ready or is not loaded - use `headerReady` to wait until header is ready");t=t||{};var e=t.align||"left";return Tt.addButton(e)},window._wrapPromiseWithDeferred=function(t){var e=$.Deferred();return t.then(function(t){e.resolve(t)}).catch(function(t){void 0===t||!0===t||!1===t?e.resolve(void 0!==t&&t):"string"==typeof t&&e.resolve(!1),e.reject(t)}),e.promise()}}).call(e,i(4))},function(t,e){t.exports={14851:{},custom_items_in_context_menu:{},websocket_connection:{},countdown:{},symbol_search_parser_mixin:{},show_pro_features:{},daily_timeframe_suffix:{},symbollist_context_menu:{},pay_attention_to_ticker_not_symbol:{},graying_disabled_tools_enabled:{},update_study_formatter_on_symbol_resolve:{},constraint_dialogs_movement:{},same_data_requery:{},phone_verification:{},show_trading_notifications_history:{},show_interval_dialog_on_key_press:{},header_interval_dialog_button:{subsets:["show_interval_dialog_on_key_press"]},header_fullscreen_button:{},header_symbol_search:{},symbol_search_hot_key:{},header_resolutions:{subsets:["header_interval_dialog_button"]},header_chart_type:{},header_settings:{},header_indicators:{},header_compare:{},header_undo_redo:{},header_screenshot:{},header_saveload:{},study_on_study:{},header_widget:{subsets:["header_widget_dom_node","header_symbol_search","header_resolutions","header_chart_type","header_settings","header_indicators","header_compare","header_undo_redo","header_fullscreen_button","compare_symbol","header_screenshot"]},compare_symbol:{subsets:["header_compare"]},property_pages:{subsets:["show_chart_property_page","chart_property_page"]},show_chart_property_page:{},chart_property_page:{subsets:["chart_property_page_style","chart_property_page_scales","chart_property_page_background","chart_property_page_timezone_sessions","chart_property_page_events_alerts","chart_property_page_trading","chart_property_page_template_button"]},disable_userlink_popup:{},left_toolbar:{},hide_left_toolbar_by_default:{},control_bar:{},widget_logo:{},timeframes_toolbar:{},edit_buttons_in_legend:{subsets:["show_hide_button_in_legend","format_button_in_legend","study_buttons_in_legend","delete_button_in_legend"]},hide_legend_by_default:{},show_hide_button_in_legend:{},format_button_in_legend:{},study_buttons_in_legend:{},delete_button_in_legend:{},pane_context_menu:{},scales_context_menu:{},legend_context_menu:{},context_menus:{subsets:["pane_context_menu","scales_context_menu","legend_context_menu","objects_tree_context_menu"]},items_favoriting:{},
save_chart_properties_to_local_storage:{},use_localstorage_for_settings:{subsets:["items_favoriting","save_chart_properties_to_local_storage"]},plain_studymarket:{},trading_watch_positions:{},disable_resolution_rebuild:{},border_around_the_chart:{},charting_library_debug_mode:{},cl_feed_return_all_data:{},log_data_request_time:{},saveload_requires_authentication:{},saveload_storage_customization:{},new_chart_creation_available:{},volume_force_overlay:{},create_volume_indicator_by_default:{},create_volume_indicator_by_default_once:{},saved_charts_count_restriction:{},lean_chart_load:{},stop_study_on_restart:{},star_some_intervals_by_default:{},predefined_items_only_may_be_starred:{},move_logo_to_main_pane:{},show_logo_on_all_charts:{},show_animated_logo:{},link_to_tradingview:{},logo_without_link:{},right_bar_stays_on_scroll:{},chart_content_overrides_by_defaults:{},show_dialog_on_snapshot_ready:{},snapshot_trading_drawings:{},allow_supported_resolutions_set_only:{},study_market_minimized:{},widgetbar_tabs:{},collapsible_header:{},show_extension_popup:{},study_templates:{},side_toolbar_in_fullscreen_mode:{},remove_library_container_border:{},whotrades_auth_only:{},support_multicharts:{},display_market_status:{},display_data_mode:{},show_chart_warn_message:{},datasource_copypaste:{},line_tool_templates:{},expand_symbolsearch_items:{},symbol_search_three_columns_exchanges:{},symbol_search_flags:{},symbol_search_limited_exchanges:{},footer_bugreport_button:{},footer_publish_idea_button:{},footer_showdom_button:{},text_notes:{},symbol_info:{},no_bars_status:{},clear_bars_on_series_error:{},hide_loading_screen_on_series_error:{},seconds_resolution:{},dont_show_boolean_study_arguments:{},hide_last_na_study_output:{},price_scale_always_last_bar_value:{},study_dialog_search_control:{},study_dialog_fundamentals_economy_addons:{},uppercase_instrument_names:{},cqg_trading_confirm_risks:{},trading_notifications:{},chart_crosshair_menu:{},japanese_chart_styles:{},hide_series_legend_item:{},hide_study_overlay_legend_item:{},hide_study_compare_legend_item:{},linetoolpropertieswidget_template_button:{},use_overrides_for_overlay:{},timezone_menu:{},main_series_scale_menu:{},show_login_dialog:{},remove_img_from_rss:{},bars_marks:{},chart_scroll:{},chart_zoom:{},source_selection_markers:{},high_density_bars:{},open_account_manager:{},multiple_watchlists:{},onchart_messages:{},custom_resolutions_box:{},referral_program_for_widget_owners:{},no_min_chart_width:{},referral_program_policy_aggressive:{subsets:["referral_program_policy_passive","referral_program_policy_normal"]},referral_program_policy_normal:{subsets:["referral_program_policy_passive","header_fake_features_buttons","custom_resolutions_box"]},tv_production:{
subsets:["show_pro_features","countdown","symbol_search_parser_mixin","symbollist_context_menu","websocket_connection","header_fullscreen_button","header_widget","dont_show_boolean_study_arguments","left_toolbar","control_bar","symbol_search_hot_key","context_menus","edit_buttons_in_legend","uppercase_instrument_names","use_localstorage_for_settings","saveload_requires_authentication","volume_force_overlay","new_chart_creation_available","saved_charts_count_restriction","create_volume_indicator_by_default","create_volume_indicator_by_default_once","charts_auto_save","right_bar_stays_on_scroll","save_old_chart_before_save_as","chart_content_overrides_by_defaults","alerts","show_dialog_on_snapshot_ready","show_extension_popup","header_saveload","header_layouttoggle","datasource_copypaste","show_saved_watchlists","watchlists_from_to_file","add_to_watchlist","property_pages","support_multicharts","display_market_status","display_data_mode","show_chart_warn_message","support_manage_drawings","widgetbar_tabs","study_templates","collapsible_header","line_tool_templates","caption_buttons_text_if_possible","footer_publish_idea_button","text_notes","trading_watch_positions","symbol_info","linetoolpropertieswidget_template_button","cqg_trading_confirm_risks","trading_notifications","symbol_search_three_columns_exchanges","symbol_search_flags","symbol_search_limited_exchanges","phone_verification","chart_events","onchart_messages","custom_resolutions_box","compare_symbol","study_on_study","japanese_chart_styles","show_login_dialog","dome_widget","bars_marks","chart_scroll","chart_zoom","show_trading_notifications_history","source_selection_markers","study_dialog_fundamentals_economy_addons","multiple_watchlists","marked_symbols"]},browser_extension:{subsets:["disable_userlink_popup","show_pro_features","show_saved_watchlists","display_market_status","display_data_mode","show_chart_warn_message","widgetbar_tabs","show_login_dialog"]},widget:{subsets:["show_pro_features","countdown","symbol_search_parser_mixin","symbollist_context_menu","websocket_connection","uppercase_instrument_names","left_toolbar","control_bar","symbol_search_hot_key","context_menus","edit_buttons_in_legend","use_localstorage_for_settings","saveload_requires_authentication","volume_force_overlay","create_volume_indicator_by_default","create_volume_indicator_by_default_once","right_bar_stays_on_scroll","show_dialog_on_snapshot_ready","dont_show_boolean_study_arguments","header_widget_dom_node","header_symbol_search","header_resolutions","header_chart_type","header_compare","header_indicators","star_some_intervals_by_default","display_market_status","display_data_mode","show_chart_warn_message","symbol_info","linetoolpropertieswidget_template_button","symbol_search_three_columns_exchanges","symbol_search_flags","symbol_search_limited_exchanges","widgetbar_tabs","compare_symbol","show_login_dialog","plain_studymarket","japanese_chart_styles","bars_marks","chart_scroll","chart_zoom","source_selection_markers","property_pages","show_animated_logo"]},
bovespa_widget:{subsets:["widget","header_settings","chart_property_page_timezone_sessions","linetoolpropertieswidget_template_button"]},charting_library_base:{subsets:["14851","allow_supported_resolutions_set_only","border_around_the_chart","collapsible_header","constraint_dialogs_movement","context_menus","control_bar","create_volume_indicator_by_default","custom_items_in_context_menu","datasource_copypaste","daily_timeframe_suffix","uppercase_instrument_names","display_market_status","edit_buttons_in_legend","graying_disabled_tools_enabled","header_widget","header_saveload","dont_show_boolean_study_arguments","lean_chart_load","left_toolbar","trading_watch_positions","link_to_tradingview","pay_attention_to_ticker_not_symbol","plain_studymarket","predefined_items_only_may_be_starred","refresh_saved_charts_list_on_dialog_show","right_bar_stays_on_scroll","saveload_storage_customization","show_dialog_on_snapshot_ready","stop_study_on_restart","study_market_minimized","timeframes_toolbar","symbol_search_hot_key","update_study_formatter_on_symbol_resolve","update_timeframes_set_on_symbol_resolve","use_localstorage_for_settings","volume_force_overlay","widget_logo","countdown","use_overrides_for_overlay","trading_notifications","compare_symbol","symbol_info","timezone_menu","main_series_scale_menu","study_dialog_search_control","chart_crosshair_menu","create_volume_indicator_by_default_once","bars_marks","chart_scroll","chart_zoom","source_selection_markers","property_pages","go_to_date","adaptive_logo","caption_buttons_text_if_possible"]},charting_library:{subsets:["charting_library_base"]},static_charts_service:{subsets:["charting_library","disable_resolution_rebuild","log_data_request_time","same_data_requery"]},trading_terminal:{subsets:["charting_library_base","footer_showdom_button","support_multicharts","header_layouttoggle","japanese_chart_styles","chart_property_page_trading","add_to_watchlist","open_account_manager","show_dom_first_time","multiple_watchlists","show_trading_notifications_history"]},cqg_terminal:{subsets:["charting_library_base","chart_property_page_trading","expand_symbolsearch_items","clear_bars_on_series_error","no_bars_status","hide_loading_screen_on_series_error","support_multicharts","header_layouttoggle","same_data_requery","footer_bugreport_button","footer_showdom_button","dome_widget","show_dom_first_time","japanese_chart_styles","remove_img_from_rss","add_to_watchlist","show_trading_notifications_history"]},amp_terminal:{subsets:["cqg_terminal"]}}},function(t,e){},function(t,e,i){"use strict";var n,o,r;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"i18nReady",function(){return o}),n=i(14),i.n(n),o=$.Deferred(),r=function(){o.resolve(),document.body.removeEventListener("tradingview-i18next-initialized",r)},window.__tradingviewI18nextInited?r():document.body.addEventListener("tradingview-i18next-initialized",r)},function(t,e,i){"use strict";function n(t){return t.keys().map(t)}window.TradingView=window.TradingView||{},window.requireAll=n,i(538),i(391),i(81),i(539),i(12),i(49),
i(31),i(392),i(187),i(130),i(540),i(26),i(95),i(295)},function(t,e,i){"use strict";!function(t){t.fn.contextMenu=function(e){t(this).bind("contextmenu",function(t){return e(t),!1})}}(jQuery)},function(t,e,i){"use strict";!function(t,e,i){"$:nomunge";function n(n,o){function r(e){t(s).each(function(){var i=t(this);this===e.target||i.has(e.target).length||i.triggerHandler(o,[e.target])})}o=o||n+i;var s=t(),a=n+"."+o+"-special-event";t.event.special[o]={setup:function(){s=s.add(this),delete s.prevObject,1===s.length&&t(e).bind(a,r)},teardown:function(){s=s.not(this),delete s.prevObject,0===s.length&&t(e).unbind(a)},add:function(t){var e=t.handler;t.handler=function(t,i){t.target=i,e.apply(this,arguments)}}}}t.map("click dblclick mousemove mousedown mouseup mouseover mouseout change select submit keydown keypress keyup".split(" "),function(t){n(t)}),n("focusin","focus"+i),n("focusout","blur"+i),Modernizr.touch&&(n("touchstart","mousedown"+i),n("touchmove","mousemove"+i),n("touchend","mouseup"+i)),t.addOutsideEvent=n}(jQuery,document,"outside")},function(module,exports,__webpack_require__){"use strict";(function(Delegate,_,Featuresets){function reloadPageOnSingOut(){var t=[/^\/chart\//],e=!0;t.forEach(function(t){t.test(window.location.pathname)&&(e=!1)}),e&&window.location.reload(!0)}function loginUser(t,e){window.TVDialogs&&window.TVDialogs.signModal&&window.TVDialogs.signModal.close(),user=$.extend(!0,{},t),TradingView.changeLoginState(!0),"function"==typeof e&&window.TVDialogs&&window.TVDialogs.signModal?window.TVDialogs.signModal.on("signinSuccess",function(){e()}):"function"==typeof e&&e()}function onLoginStateChange(is_initial){window.iframeAuthWidget&&user.is_first_login&&(window.iframeAuthWidget.preventClose=!0);var available_offers=user.available_offers;$("html").toggleClass("is-authenticated",is_authenticated).toggleClass("is-not-authenticated",!is_authenticated).toggleClass("is-pro",is_authenticated&&user&&!!user.is_pro).toggleClass("is-not-pro",!(is_authenticated&&user&&user.is_pro)).toggleClass("is-trial",is_authenticated&&user&&!!user.is_trial).toggleClass("is-not-trial",!(is_authenticated&&user&&user.is_trial)).toggleClass("is-not-trial-available",void 0===available_offers[OFFERS.trial]).toggleClass("is-trial-available",void 0!==available_offers[OFFERS.trial]).toggleClass("is-upsale-available",is_authenticated&&void 0!==available_offers[OFFERS.upsale]),window.TVSettings&&window.TVSettings.sync(user.settings),$(".js-header__gopro-button").attr("href",is_authenticated?"/gopro/":""),is_authenticated?($(".saved_charts_count").html(user.saved_charts),$(".treated_charts_count").html(user.treated_charts_count),$(".js-trial-days-left").html(user.trial_days_left_text||""),$(".js-header-gopro-button").attr("href","/gopro/"),user.fastpass_script&&eval(user.fastpass_script),user.is_first_login&&($(function(){}),trackEvent("Conversion","First login"),user.prort_trial_started&&delete user.prort_trial_started,delete user.is_first_login),
TradingView.setTrialAvailiable(void 0!==user.available_offers[OFFERS.trial])):(Object.keys(available_offers).forEach(function(t){available_offers[t].available_for_anons||delete available_offers[t]}),user={username:"Guest",following:"0",followers:"0",ignore_list:{},available_offers:available_offers},$(".user-info-username").html(user.username),TVLocalStorage.removeItem("trial_availiable"))}var loginStateChange,djangoLogoutFinished,TVXWindowEvents=__webpack_require__(99).TVXWindowEvents,trackEvent=__webpack_require__(28).trackEvent,OFFERS={};__webpack_require__(541),$(document).ajaxSend(function(t,e,i){"POST"!==i.type||i.crossDomain||e.setRequestHeader("X-CSRFToken",$.cookie("csrftoken")),i.crossDomain&&!i.forceLanguageHeader||(window.locale?e.setRequestHeader("X-Language",window.locale):console.warn("window.locale is not defined"))}),loginStateChange=window.loginStateChange?window.loginStateChange:window.loginStateChange=new Delegate,djangoLogoutFinished=window.djangoLogoutFinished?window.djangoLogoutFinished:window.djangoLogoutFinished=new Delegate,loginStateChange.subscribe(null,onLoginStateChange),TVXWindowEvents.on("loginStateChange",function(){var t=JSON.parse(this);window.user=t.user,window.is_authenticated=!!t.is_authenticated,loginStateChange.fire()}),TVXWindowEvents.on("signOut",function(){reloadPageOnSingOut()}),function(){var t="user-obj-changed",e={};window.crossTabSyncUserAttr=function(e){var i={};e instanceof Array?e.forEach(function(t){i[t]=window.user[t]}):i[e]=window.user[e],TVXWindowEvents.emit(t,JSON.stringify(i))},window.onChangeUserAttrInAnotherTab=function(t){var i=new Delegate;return e[t]||(e[t]=[]),e[t].push(i),i},TVXWindowEvents.on(t,function(t){var i,n;t=JSON.parse(t);for(i in t)if(window.user[i]=t[i],e[i])for(n=0;n<e[i].length;n++)e[i][n].fire(t[i])})}(),TradingView.changeLoginState=function(t){window.is_authenticated=!!t,TVXWindowEvents.emit("loginStateChange",JSON.stringify({is_authenticated:is_authenticated,user:user})),loginStateChange.fire()},window.loginUser=loginUser,TradingView.signOut=function(){var t=_.clone(window.user);TradingView.changeLoginState(!1),$.ajax({type:"POST",url:"/accounts/logout/",dataType:"html"}).done(function(){TVXWindowEvents.emit("djangoLogoutFinished"),djangoLogoutFinished.fire(),TVXWindowEvents.emit("signOut"),reloadPageOnSingOut()}).fail(function(){window.user=t,TradingView.changeLoginState(!0)})},window.loginRequiredDelegate=new Delegate,window.runOrSignIn=function(t,e){e||(e={}),e.verifiedPhoneRequired,(is_authenticated||Featuresets.enabled("charting_library_base"))&&t()},TradingView.runOrGoPro=function(t,e,i){isProductFeatureEnabled(e)&&t()},window.onLoginStateChange=onLoginStateChange,TradingView.isPro=function(){return is_authenticated&&user.is_pro},TradingView.setTrialAvailiable=function(t){TVLocalStorage.setItem("trial_availiable",t?1:0)},$.fn.reverse=[].reverse,$(window).load(function(){window.loaded=!0}),TradingView.notificationsChanged=new Delegate}).call(exports,__webpack_require__(8),__webpack_require__(100),__webpack_require__(4))
},function(t,e,i){"use strict";function n(t){$(t).attr("title")||t.offsetWidth+a>=t.scrollWidth||$(t).attr("title",$(t).text())}function o(t){return t.offsetWidth+a<t.scrollWidth}var r,s,a;Object.defineProperty(e,"__esModule",{value:!0}),r=i(14),i.n(r),s=i(157),a=$.browser.msie||/\btrident\b/i.test(navigator.userAgent)?1:0,$(function(){$(document).on("mouseenter",".apply-overflow-title",function(){n(this)}),$(document).on("mouseenter",".apply-overflow-tooltip",function(){function t(){Object(s.hide)(),a.off("mouseleave mousedown",t)}var e,i,n,r,a=$(this);if(a.is(".apply-overflow-tooltip--check-children")){for(e=!1,i=a.children(),n=0;n<i.length;n++)if(o(i[n])){e=!0;break}if(!e)return}else if(!o(a[0]))return;r="",r=a.is(".apply-overflow-tooltip--allow-text")?a.text():a.clone().children().remove().end().text().trim(),Object(s.showOnElement)(a[0],{text:r}),a.on("mouseleave mousedown",t)})})},function(t,e,i){"use strict";function n(t){l=t}function o(){if(l)return l;if(!a||!window.document.body)return"indeterminate";var t=window.document.createElement("div");return t.appendChild(document.createTextNode("ABCD")),t.dir="rtl",t.style.fontSize="14px",t.style.width="4px",t.style.height="1px",t.style.position="absolute",t.style.top="-1000px",t.style.overflow="scroll",document.body.appendChild(t),l="reverse",t.scrollLeft>0?l="default":(t.scrollLeft=1,0===t.scrollLeft&&(l="negative")),document.body.removeChild(t),l}function r(t,e){var i,n=t.scrollLeft;if("rtl"!==e)return n;if("indeterminate"===(i=o()))return Number.NaN;switch(i){case"negative":return t.scrollWidth-t.clientWidth+n;case"reverse":return t.scrollWidth-t.clientWidth-n}return n}function s(t,e,i){if("rtl"!==i)return void(t.scrollLeft=e);var n=o();if("indeterminate"!==n)switch(n){case"negative":t.scrollLeft=t.clientWidth-t.scrollWidth+e;break;case"reverse":t.scrollLeft=t.scrollWidth-t.clientWidth-e;break;default:t.scrollLeft=e}}var a,l;Object.defineProperty(e,"__esModule",{value:!0}),a=!("undefined"==typeof window||!window.document||!window.document.createElement),e._setScrollType=n,e.detectScrollType=o,e.getNormalizedScrollLeft=r,e.setNormalizedScrollLeft=s},function(t,e){t.exports={"common-tooltip":"common-tooltip-s2GEoMlT-","common-tooltip--hidden":"common-tooltip--hidden-Z0EAvXgv-","common-tooltip--horizontal":"common-tooltip--horizontal-13imOC5w-","common-tooltip--farther":"common-tooltip--farther-2yXMAkHF-","common-tooltip--vertical":"common-tooltip--vertical-mcRoucek-","common-tooltip-farther":"common-tooltip-farther-XoKytD99-","common-tooltip--no-pointer-events":"common-tooltip--no-pointer-events-3nL0Vygu-","common-tooltip--direction_normal":"common-tooltip--direction_normal-3u9ejKM2-","common-tooltip__body":"common-tooltip__body-356XFpBj-","common-tooltip__button-container":"common-tooltip__button-container-3EjyKV3s-","common-tooltip__body--no-buttons":"common-tooltip__body--no-buttons-3quqi1Sv-","common-tooltip__button":"common-tooltip__button-1rnQgujz-","common-tooltip--direction_reversed":"common-tooltip--direction_reversed-XN-JUTdr-",
"common-tooltip__ear-holder":"common-tooltip__ear-holder-yIJjpvgu-","common-tooltip__ear-holder--below":"common-tooltip__ear-holder--below-1rmzWejA-","common-tooltip__ear-holder--above":"common-tooltip__ear-holder--above-1D8FkNkw-","common-tooltip__ear-holder--before":"common-tooltip__ear-holder--before-oXq5sFXr-","common-tooltip__ear-holder--after":"common-tooltip__ear-holder--after-BnAcuW1N-","common-tooltip__body--with-hotkey":"common-tooltip__body--with-hotkey-2wXRtgYZ-","common-tooltip__body--width_wide":"common-tooltip__body--width_wide-3oG604Li-","common-tooltip__body--width_narrow":"common-tooltip__body--width_narrow-34hrFTFo-","common-tooltip__hotkey-block":"common-tooltip__hotkey-block-2gS_uAOl-","common-tooltip__hotkey-block--divider":"common-tooltip__hotkey-block--divider-rQ38KmpQ-","common-tooltip__hotkey-text":"common-tooltip__hotkey-text-1eb7dyCg-","common-tooltip__hotkey-button":"common-tooltip__hotkey-button-1XJ40e4D-","common-tooltip__plus-sign":"common-tooltip__plus-sign-3CKSupKp-"}},function(t,e,i){"use strict";TradingView.PublishedChartsTimeline=function(){},TradingView.LinearRegressionPaneView=function(){},TradingView.study_PivotPointsStandard=function(){},TradingView.study_PivotPointsHighLow=function(){},TradingView.study_ZigZag=function(){},TradingView.study_LinearRegression=function(){},TradingView.study_ElliottWave=function(){},TradingView.ESDStudyBase=function(){},TradingView.Pro=function(){this.hasPackage=function(){return!1}},window.user={is_pro:!1,settings:{}},TradingView.Pro.prototype.getStudies=function(){return[]},TradingView.Pro.prototype.getProduct=function(){return{}},TradingView.Pro.prototype.getStudiesOrder=function(){return[]},TradingView.AlertLabel=function(){},TradingView.getDataVendorString=function(){},TradingView.study_VbPVisible=function(){},TradingView.study_VbPSessions=function(){},TradingView.study_ESD$TV_DIVIDENDS=function(){},TradingView.study_ESD$TV_SPLITS=function(){},TradingView.study_ESD$TV_EARNINGS=function(){},TradingView.MockupRequestedCache=function(t){t&&t([])},TradingView.MockupRequestedCache.invalidate=function(){},TradingView.LinetoolTemplatesList=function(){},window.PublishedScript={suggest:function(){var t=$.Deferred();return t.resolve(null),t}}},function(t,e,i){"use strict";var n,o,r;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"RestrictedToolsetBootloader",function(){return r}),n=i(0),o=i(53),r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.c(e,t),e.prototype._startLoading=function(){return i.e(6).then(i.bind(null,818)).then(function(t){return t.getRestrictedToolSet()})},e}(o.a)},function(t,e,i){"use strict";var n,o,r,s,a,l,c;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"HeaderToolbarBootloader",function(){return c}),n=i(0),o=i(19),i.n(o),r=i(67),i.n(r),s=i(231),a=i(111),l=i(53),c=function(t){function e(e,i){var n=t.call(this)||this;return n._toolsBootloader=e,n._headerProps=i,n._headerProps.resizerBridge.negotiateHeight(s.HEADER_TOOLBAR_HEIGHT_EXPANDED),
n._headerProps.resizerBridge.body.value()[0].appendChild(Object(a.a)(["border-right","border-left"],["bottom-left-radius","bottom-right-radius"])),n}return n.c(e,t),e.prototype._startLoading=function(){var t=this;return Promise.all([this._toolsBootloader.load(),this._loadHeaderToolbar()]).then(function(e){var i=e[0],s=e[1];return r.render(o.createElement(s,n.a({},t._headerProps,{tools:i})),t._headerProps.resizerBridge.body.value()[0])})},e.prototype._loadHeaderToolbar=function(){return i.e(17).then(i.bind(null,820)).then(function(t){return t.HeaderToolbar})},e}(l.a)},function(t,e){t.exports={"css-value-header-toolbar-height":"38px"}},function(t,e){t.exports={container:"container-2BvS3Fpg-",inner:"inner-3YzQuyJx-","border-left":"border-left-LYAXTdyL-","border-right":"border-right-OzIcepiV-","border-top":"border-top-193CSDqN-","border-bottom":"border-bottom-2lZASSTD-","top-right-radius":"top-right-radius-FE25nrPp-","top-left-radius":"top-left-radius-1ELOZlIb-","bottom-right-radius":"bottom-right-radius-7zqIiaLN-","bottom-left-radius":"bottom-left-radius-xCxQ998i-"}},function(t,e,i){"use strict";var n,o,r,s,a,l,c,h;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"DrawingToolbarBootloader",function(){return h}),n=i(0),o=i(19),i.n(o),r=i(67),i.n(r),s=i(242),a=i(397),l=i(53),c=i(111),h=function(t){function e(e){var i=t.call(this)||this;return i._opts=e,s.isDrawingToolbarVisible.value()&&(i._opts.resizerBridge.negotiateWidth(a.b),i._opts.resizerBridge.body.value()[0].appendChild(Object(c.a)())),i}return n.c(e,t),e.prototype._startLoading=function(){var t=this;return i.e(5).then(i.bind(null,821)).then(function(e){return r.render(o.createElement(e.DrawingToolbar,n.a({},t._opts)),t._opts.resizerBridge.body.value()[0])})},e}(l.a)},function(t,e){t.exports={"color-active-hover-text":"color-gull-gray","color-alert-bg":"color-mirage-1","color-alert-text":"color-loblolly","color-border":"color-bright-gray","color-border-chat-fields":"color-bright-gray","color-border-hover":"color-trout-1","color-border-table":"color-bright-gray","color-brand":"color-picton-blue-1","color-brand-active":"color-curious-blue","color-brand-hover":"color-scooter","color-button-hover-bg":"color-mirage-3","color-chart-page-bg":"color-charade","color-common-tooltip-text":"color-loblolly","color-common-tooltip-bg":"color-trout-2","color-depthrenderer-fill-style":"color-catskill-white","color-depthrenderer-stroke-style":"color-trout-1","color-disabled-border-and-color":"color-ebony-clay","color-disabled-input":"color-bright-gray","color-empty-container-message":"color-slate-gray","color-footer-chart-panel-bg":"color-mirage-3","color-highlight-new":"color-dark-slate-blue","color-icons":"color-slate-gray","color-input-bg":"color-charade","color-input-textarea-readonly":"color-trout-1","color-input-publish-bg":"color-mirage-1","color-item-active-blue":"color-blue-dianne","color-item-hover-active-bg":"color-charade","color-item-hover-bg":"color-ebony-clay","color-item-hover-blue":"color-blue-dianne","color-item-selected-blue":"color-blue-dianne",
"color-link":"color-curious-blue","color-list-item":"color-slate-gray","color-list-nth-child-bg":"color-mirage-3","color-news-highlight":"color-charade","color-pane-bg":"color-mirage-1","color-placeholder":"color-trout-2","color-popup-bg":"color-mirage-3","color-popup-menu-item-hover-bg":"color-ebony-clay","color-popup-menu-separator":"color-bright-gray","color-row-hover-active-bg":"color-ebony-clay","color-sb-scrollbar-body-bg":"color-trout-2","color-screener-header-bg":"color-mirage-3","color-screener-header-bg-hover":"color-ebony-clay","color-screener-description":"color-loblolly","color-section-separator-border":"color-bright-gray","color-separator-table-chat":"color-bright-gray","color-tag-active-bg":"color-bright-gray","color-tag-hover-bg":"color-charade","color-text-regular":"color-loblolly","color-text-secondary":"color-trout-1","color-toolbar-button-text-active":"color-picton-blue-1","color-toolbar-interactive-element-text-normal":"color-slate-gray","color-toolbar-interactive-element-text-hover":"color-gull-gray","color-toolbar-opened-element-bg":"color-mirage-3","color-tooltip-bg":"color-bright-gray","color-tv-button-checked":"color-slate-gray","color-tv-dialog-caption":"color-athens-gray-2","color-tv-dropdown-item-hover-bg":"color-charade","color-underlined-text":"color-gull-gray","color-widget-pages-bg":"color-mirage-2","color-forex-icon":"color-white","color-list-item-active-bg":"color-medium-blue","color-list-item-hover-bg":"color-ebony-clay","color-list-item-text":"color-loblolly"}},function(t,e){t.exports={"color-aqua-spring":"#ebf9f5","color-army-green":"#3d2c12","color-army-green-2":"#31230d","color-athens-gray-1":"#f2f3f5","color-athens-gray-2":"#f7f8fa","color-athens-gray-3":"#eceff2","color-black":"#000000","color-blue-dianne":"#21384d","color-bright-gray":"#363c4e","color-carnation":"#f04561","color-catskill-white":"#e1ecf2","color-charade":"#2f3241","color-charcoal-grey":"#323337","color-curious-blue":"#299dcd","color-dark-blue-grey":"#123440","color-dark-grey":"#292a2d","color-dark-grey-blue":"#28415a","color-dark-sky-blue":"#37a6ef","color-dark-slate-blue":"#194453","color-deep-sea-blue":"#016087","color-medium-blue":"#2e7bb2","color-ebony-clay":"#262b3e","color-foam":"#d7f0fb","color-gull-gray":"#9db2bd","color-humming-bird":"#d3eef9","color-keppel-1":"#37bc9b","color-keppel-2":"#34b293","color-lavender-blush":"#ffedf0","color-loblolly":"#c5cbce","color-manatee":"#878ca8","color-mandy":"#eb4d5c","color-milk-chocolate":"#6f2626","color-mirage-1":"#131722","color-mirage-2":"#171b29","color-mirage-3":"#1c2030","color-mischka":"#d6d8e0","color-morning-glory":"#9addcc","color-oslo-gray":"#8b8e95","color-pale":"#fff2cf","color-pale-grey-2":"#e7ebee","color-pale-sky":"#6b7988","color-picton-blue-1":"#3bb3e4","color-picton-blue-2":"#41bef1","color-puerto-rico":"#3bc2a1","color-purple-brown":"#4e2934","color-purple-brown-2":"#3d2028","color-radical-red":"#ff4a68","color-regent-gray":"#8797a5","color-scooter":"#38acdb","color-silver-tree":"#53b987","color-slate-gray":"#758696",
"color-sundown":"#ffa4b3","color-sunglow":"#ffca3b","color-tan-hide":"#ff9850","color-trout-1":"#4c525e","color-trout-2":"#4f5966","color-violet-1":"#332738","color-violet-2":"#271d2b","color-water-blue":"#1592e6","color-white":"#ffffff","color-white-ice":"#ebf7fc","color-wild-watermelon":"#ff5773","color-brownish-grey":"#8d6e63","color-lightish-purple":"#a75ee8","color-active-hover-text":"color-black","color-alert-bg":"color-white","color-alert-text":"color-black","color-border-table":"color-athens-gray-3","color-brand":"color-picton-blue-1","color-brand-active":"color-curious-blue","color-brand-hover":"color-scooter","color-brand-light":"color-picton-blue-2","color-chart-page-bg":"color-pale-grey-2","color-common-tooltip-bg":"color-ebony-clay","color-common-tooltip-text":"color-athens-gray-1","color-danger":"color-radical-red","color-depthrenderer-stroke-style":"color-athens-gray-1","color-highlight-new":"color-pale","color-input-bg":"color-white","color-input-publish-bg":"color-white","color-link":"color-brand","color-list-nth-child-bg":"color-athens-gray-2","color-pane-bg":"color-white","color-popup-bg":"color-white","color-popup-menu-item-hover-bg":"color-white-ice","color-popup-menu-separator":"color-catskill-white","color-replay-data-mode":"color-radical-red","color-screener-header-bg":"color-athens-gray-2","color-screener-description":"color-trout-2","color-success":"color-keppel-1","color-toolbar-button-text-active":"color-water-blue","color-toolbar-interactive-element-text-normal":"color-trout-1","color-toolbar-interactive-element-text-hover":"color-mirage-1","color-toolbar-opened-element-bg":"color-athens-gray-2","color-tooltip-bg":"color-ebony-clay","color-tv-dialog-caption":"color-trout-2","color-tv-dropdown-item-hover-bg":"color-athens-gray-1","color-underlined-text":"color-slate-gray","color-widget-pages-bg":"color-white","color-growing":"color-keppel-1","color-falling":"color-radical-red","color-label-long":"color-success","color-label-short":"color-danger","color-label-education":"color-sunglow","color-label-neutral":"color-gull-gray","color-collapse-tabs-border":"color-athens-gray-3","color-forex-icon":"color-bright-gray","color-list-item-active-bg":"color-dark-sky-blue","color-list-item-hover-bg":"color-white-ice","color-list-item-text":"color-ebony-clay","color-border":"#dadde0","color-border-chat-fields":"#c9cbcd","color-border-hover":"#c8c8c8","color-button-hover-bg":"#f2f2f2","color-depthrenderer-fill-style":"#555555","color-disabled-border-and-color":"#ececec","color-disabled-input":"#ececec","color-readonly-input":"#b4b4b4","color-empty-container-message":"#8a8a8a","color-footer-chart-panel-bg":"#f1f3f6","color-icons":"#7d7d7d","color-input-textarea-readonly":"#555555","color-item-active-blue":"#eff9ff","color-item-hover-active-bg":"#f1f3f6","color-item-hover-bg":"#edf1f2","color-item-hover-blue":"#c6e9f8","color-item-selected-blue":"#eafafe","color-list-item":"#888989","color-news-highlight":"#f2f5f8","color-placeholder":"#adaeb0","color-row-hover-active-bg":"#f1f3f6",
"color-sb-scrollbar-body-bg":"#d8d8d8","color-screener-header-bg-hover":"#f1f3f6","color-section-separator-border":"#b5b7b9","color-separator-table-chat":"#eaecef","color-tag-active-bg":"#cfdce3","color-tag-hover-bg":"#dce6ea","color-text-regular":"#4a4a4a","color-text-secondary":"#b4b4b4","color-tv-button-checked":"#757575","color-white-theme-tooltip-text":"#333333","color-white-theme-tooltip-border":"#d6d6d6","color-seeking-alpha-brand":"#ff7200"}},function(t,e,i){"use strict";(function(t,n){function o(e){this._chartWidgetCollection=e,this._chartAboutToBeSavedDelegate=new t,this._chartSavedDelegate=new t,this._prevChartState=null,this._chartHasBeenModified=new t,this._chartSizeLimitExceededDelegate=new t}var r=i(12).deepEquals,s=i(75),a=window.t("The publication preview could not be loaded. Please disable your browser extensions and try again.");o.prototype.chartHasBeenModified=function(){return this._chartHasBeenModified},o.prototype.chartSizeLimitExceeded=function(){return this._chartSizeLimitExceededDelegate},o.prototype.chartAboutToBeSaved=function(){return this._chartAboutToBeSavedDelegate},o.prototype.chartSaved=function(){return this._chartSavedDelegate},o.prototype.whenReadyToSave=function(t){var e,i,n=this._chartWidgetCollection,o=n.activeChartWidget.value(),r=o.model().mainSeries();r.symbolInfo()&&!r.hasDelayedSymbolIntervalChange()?t():(e=null,i=null,e=function(){r.onSymbolError().unsubscribe(null,i,!0),t()},i=function(){r.onSymbolResolved().unsubscribe(null,e,!0)},r.onSymbolResolved().subscribe(null,e,!0),r.onSymbolError().subscribe(null,i,!0))},o.prototype.saveToJSON=function(){return this._fillSavingInfo(!1,!0)},o.prototype._fillAsyncInfo=function(t,e,i){function n(e){t.content=JSON.stringify($.extend(!0,r,e)),o.resolve(t)}var o,r=JSON.parse(t.content),s=this._chartWidgetCollection;return e||(i=!0),o=$.Deferred(),i?s.asyncState(!!e).then(n):s.activeChartWidget.value().asyncState(!!e).then(n),o.promise()},o.prototype._fillSavingInfo=function(t,e,i){var n,o,r,s,a,l,c,h,u,d,p,_;if(t||(e=!0),n={publish_request_id:Math.random().toString(36).substring(2)},o=this._chartWidgetCollection,r=o.activeChartWidget.value(),s=o.metaInfo,a=r.model().mainSeries(),l=a.properties(),c=a.symbolInfo(),s.id.value()&&(n.id=s.id.value()),n.name=s.name.value()||"",n.description=s.description.value()||"",n.resolution=a.properties().interval.value(),n.symbol_type=null!==c&&c.type||"",n.exchange=null!==c&&c.exchange||"",n.listed_exchange=null!==c&&c.listed_exchange||"",null!==c&&a.isSpread()?(h=c.legs[0],u=c.base_name[0],u=u.split(":")[1],n.symbol=h,n.short_name=u,n.expression=c.full_name):(n.symbol=null!==c&&c.ticker||l.symbol.value(),n.short_name=l.shortName.value()),null!==c){for(d=[],p=0,_=c.legs.length;p<_;p++)d.push({symbol:c.legs[p],pro_symbol:c.base_name[p]});n.legs=JSON.stringify(d)}else n.legs=JSON.stringify([]);return n.content=e?JSON.stringify(o.state(!!t,i)):JSON.stringify(r.state(!!t,i)),t&&(n.image=JSON.stringify(o.images({onlyActiveChart:!e}))),n.is_realtime=t?"0":"1",n},o.prototype.publishChart=function(t){},
o.prototype.publishScript=function(t,e,i){var n,o,r,s,l=this;l._scriptPublisher?l._scriptPublisher.openPublication(t,e):(n=i.ScriptPublisher,o=i.ScriptsProvider,r=i.CategoriesProvider,s=new o({publish:function(t){return new Promise(function(e,i){var n={closeForm:function(){if(t&&t.scriptPublication&&t.scriptPublication.updateScriptIdPart){var i=t.scriptPublication.updateScriptIdPart;publishedScripts.invalidateCache([i]),window.studyMarket&&(window.studyMarket.resetAllPages(),window.studyMarket.updateFavorites())}e()},showError:function(t){i(t)}};try{l.onPublish(t,n)}catch(t){i(a)}})}}),l._scriptPublisher=new n({scriptsProvider:s,categoriesProvider:new r}),l._scriptPublisher.openPublication(t,e))},o.prototype.onPublish=function(t,e){function i(t){return t.returnValue=$.t("Script may be not updated if you leave the page."),t.returnValue}function o(o){var r,s,a,c,h,u;window.removeEventListener("beforeunload",i),l.publishInProgress=!1,r=o.responseText||o,"ok:"===r.substr(0,3)?(s=!1,e.savePrivacySetting&&(s=!t.is_public,TVSettings.setValue("publishchart.private",s)),kmRecord("Chart","{0} Published".format(void 0===t.script_type?"Chart":"Script"),{is_private:s}),a=r.substr(3),c=JSON.parse(a),l._chartWidgetCollection.metaInfo.id.value()||l._chartWidgetCollection.metaInfo.id.setValue(c.id),e.closeForm&&e.closeForm(),l._lastPublishUrl=c.publishUrl,l.hWnd&&(h=c.publishUrl,e.ideaUrl&&(h=n.render(e.ideaUrl,{idea:c.idea})),l.hWnd.location=h)):(e.showError&&((413===o.status||/^[\d\s]*request.+large/i.test(r.trim()))&&(r=window.t("This Chart Layout has a lot of objects and can't be published. Please remove the unused objects (drawings/indicators) through the Object Tree to continue publishing.")),u={html:!0},e.showError(r||$.t("Error occurred while publishing"),u)),l.hWnd&&(l.hWnd.close(),l.hWnd=null))}var r,s,a,l=this;l.publishInProgress||(r=l._fillSavingInfo(!0,e&&e.publishAllLayout,!0),l._fillAsyncInfo(r,!0,e&&e.publishAllLayout).then(function(e){var n=t.scriptPublication,r=!(!n||!n.updateScriptIdPart),s=new Promise(function(t,e){if(n){var o;r?(window.addEventListener("beforeunload",i),o=ScriptLib.publishNext(n.scriptSource,n.updateScriptIdPart)):o=ScriptLib.publishNew(n.scriptSource,n.scriptProtection),o.done(function(e){r||n.scriptProtection!==TVScript.Access.ACCESS_CLOSED_NEEDS_AUTH||PinePerm.add(window.user.username,e.pineId),t(e.publishedstudyscript_id)}).fail(e)}else t()});r?s.then(function(i){var n={publishedstudyscript_id:i,description:t.description,tags:t.tags};$.ajax({url:"/script-update/",type:"post",dataType:"text",data:$.extend({},e,n),complete:o})},o):s.then(function(i){i&&(t.publishedstudyscript_id=i),$.ajax({url:"/publishchart/",type:"post",dataType:"text",data:$.extend({},e,t),complete:o})},o)}),l.publishInProgress=!0,e.onWidget&&!e.ideaUrl||""!==t.name&&""!==t.description&&t.description.length<=7e4&&t.name.length<=64&&($.cookie("publish_request_id",r.publish_request_id,{path:"/"}),s="/loading/",e.ideaUrl&&(a=urlParams.createUrlParams({ideaUrl:e.ideaUrl}),s="/loading?"+a),l.hWnd=window.open(s,"_blank")))},
o.prototype._saveChart=function(t,e,i,n,o){var r=i,a=n;return r=function(t){e.id.value()||(e.id.setValue(t),e.uid.setValue(t)),"function"==typeof i&&i()},s.saveChart(t.name,t.short_name,t.resolution,t,e,r.bind(this),a.bind(this))},o.prototype.saveChartSilently=function(t,e,i,n){var o,s;return r(this._prevChartState,this._chartWidgetCollection.state())[0]?void this._chartSavedDelegate.fire(!0):(o=this._chartWidgetCollection.metaInfo,s=this._fillSavingInfo(e),n=n||{},n.chartName&&(s.name=n.chartName),s.name&&0!==s.name.length||!n.defaultChartName||(s.name=n.defaultChartName),s.name?($(window).on("beforeunload.savechart",function(){return $.t("Your chart is being saved, please wait a moment before you leave this page.")}),this._isSaveInProcess=!0,this._chartAboutToBeSavedDelegate.fire(),this._saveChart(s,o,function(){this._chartWidgetCollection.metaInfo.name.setValue(s.name),this._prevChartState=this._chartWidgetCollection.state(),this._chartSavedDelegate.fire(!0),this._isSaveInProcess=!1,t&&t(o)}.bind(this),function(){this._chartSavedDelegate.fire(!1),this._isSaveInProcess=!1,i&&i.apply(null,arguments)}.bind(this),n),void $(window).off("beforeunload.savechart")):void console.warn("Saving chart with empty name is not allowed"))},o.prototype.isSaveInProcess=function(){return this._isSaveInProcess},e.ChartSaver=o}).call(e,i(8),i(93))},function(t,e,i){"use strict";function n(t,e,i,n){return c.b(this,void 0,void 0,function(){var o;return c.d(this,function(r){return o=new h.SaveRenameDialog({fields:[new u.InputField({name:w,label:t+":",error:e,maxLength:64})],title:i}),void 0!==n&&o.setField(w,n),[2,o.show().then(function(t){return t[w]})]})})}function o(t){return c.b(this,void 0,void 0,function(){return c.d(this,function(e){return[2,n(S.labelRename,S.error,S.titleRename,t)]})})}function r(t){return c.b(this,void 0,void 0,function(){return c.d(this,function(e){return[2,n(S.labelRename,S.error,S.titleCopy,S.valueCopy.format(t))]})})}function s(t){return c.b(this,void 0,void 0,function(){return c.d(this,function(e){return[2,n(S.labelRename,S.error,S.titleNew,t)]})})}function a(t){"/chart/"===location.pathname&&(location.href="/chart/"+t)}function l(){return c.b(this,void 0,void 0,function(){return c.d(this,function(t){return[2,new Promise(function(t){p.enabled("saved_charts_count_restriction")&&!window.user.is_pro?Object(d.getCharts)(function(e){t(e.length<5)}):t(!0)})]})})}var c,h,u,d,p,_,f,m,g,y,v,b,S,w,P,T;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"SaveChartService",function(){return T}),c=i(0),h=i(300),i.n(h),u=i(301),i.n(u),d=i(75),i.n(d),p=i(4),i.n(p),_=i(28),f=i(15),m=i.n(f),g=i(42),y=i(302),v=i(95),i.n(v),b=i(303),S={labelName:window.t("Chart layout name"),labelRename:window.t("Enter a new chart layout name"),error:window.t("Please enter chart layout name"),titleNew:window.t("Save New Chart Layout"),titleRename:window.t("Rename Chart Layout"),titleCopy:window.t("Copy Chart Layout"),valueCopy:window.t("{0} copy",{context:"ex: AAPL chart copy"})},w="chart-title",P=6e4,T=function(){function t(t,e){
this._autosaveTimer=null,this._watchedAutoSaveEnabled=new m.a,this._toggleAutoSaveEnabledHandler=this._toggleAutoSaveEnabled.bind(this),this._chartWidgetCollection=t,this._chartSaver=e,this._chartChangesWatcher=new y.ChartChangesWatcher(t.undoHistory,e,g),t.saveKeysPressed().subscribe(this,this.saveChartOrShowTitleDialog),this._chartChangesWatcher.getOnChange().subscribe(this,this._onStateChanged)}return t.prototype.autoSaveEnabled=function(){return this._watchedAutoSaveEnabled},t.prototype.destroy=function(){},t.prototype.cloneChart=function(){return c.b(this,void 0,void 0,function(){var t,e,i;return c.d(this,function(n){switch(n.label){case 0:return t=this._chartWidgetCollection,[4,l()];case 1:return e=n.sent(),e?[4,r(t.metaInfo.name.value())]:[3,3];case 2:return i=n.sent(),this._saveCurrentChartAsNewWithTitle(i),[3,5];case 3:return[3,5];case 4:n.sent().open(),n.label=5;case 5:return[2]}})})},t.prototype.saveChartAs=function(){Object(b.a)(this.cloneChart.bind(this),{source:"Clone chart"})},t.prototype.renameChart=function(){var t=this;Object(b.a)(function(){return c.b(t,void 0,void 0,function(){var t,e,i;return c.d(this,function(n){switch(n.label){case 0:return t=this._chartWidgetCollection,e=t.metaInfo.name.value(),[4,o(e)];case 1:return i=n.sent(),t.metaInfo.name.setValue(i),this._doSave(),[2]}})})},{source:"Rename chart"})},t.prototype.saveNewChart=function(t,e,i){return c.b(this,void 0,void 0,function(){var n,o,r,a;return c.d(this,function(c){switch(c.label){case 0:return n=this._chartWidgetCollection,o=n.metaInfo.name.value(),[4,l()];case 1:return r=c.sent(),r?[4,s(o)]:[3,3];case 2:return a=c.sent(),n.metaInfo.name.setValue(a),this._doSave(t,e,i),[3,5];case 3:return[3,5];case 4:c.sent().open(),c.label=5;case 5:return[2]}})})},t.prototype.saveExistentChart=function(t,e,i){this._doSave(t,e,i)},t.prototype.saveChartOrShowTitleDialog=function(t,e,i){var n=this,o=window.saver.isSaveInProcess(),r=this._chartChangesWatcher.hasChanges(),s=!!this._chartWidgetCollection.metaInfo.id.value();window.is_authenticated&&(o||!r&&s)||Object(b.a)(function(){null!==n._chartWidgetCollection.metaInfo.id.value()?n.saveExistentChart(t,e,i):n.saveNewChart(t,e,i)},{source:"Save chart",sourceMeta:"Chart"})},t.prototype.whenReadyToSave=function(t){this._chartSaver.whenReadyToSave(t)},t.prototype.saveToJSON=function(){return this._chartSaver.saveToJSON()},t.prototype.saveChartSilently=function(t,e,i,n){this._chartSaver.saveChartSilently(t,e,i,n)},t.prototype.setAutoSaveEnabled=function(t){var e=this;window.is_authenticated&&window.saver.isSaveInProcess()||Object(b.a)(function(){t?Object(_.trackEvent)("Autosave","On"):Object(_.trackEvent)("Autosave","Off"),e._watchedAutoSaveEnabled.setValue(t)},{source:"AutoSave chart"})},t.prototype._autoSaveEnabledSettingHandler=function(t){},t.prototype._toggleAutoSaveEnabled=function(t){},t.prototype._enableAutoSave=function(){},t.prototype._disableAutoSave=function(){},t.prototype._onStateChanged=function(t){
t?Object(v.isFeatureEnabled)("save_every_minute")?this._startAutosave():this._restartAutosave():this._stopAutosave()},t.prototype._saveCurrentChartAsNewWithTitle=function(t){var e=this._chartWidgetCollection;p.enabled("saveload_storage_customization")?(e.metaInfo.uid.deleteValue(),e.metaInfo.id.deleteValue(),e.metaInfo.name.setValue(t),this._doSave()):window.open("/chart/?clone="+e.metaInfo.uid.value()+"&name="+encodeURIComponent(t),"_blank")},t.prototype._doSave=function(t,e,i){var n=this._chartWidgetCollection;void 0!==t&&t(),this._chartSaver.saveChartSilently(function(t){Object(_.trackEvent)("GUI","Save Chart Layout"),a(n.metaInfo.uid.value()),void 0!==e&&e(t)},!1,function(){void 0!==i&&i()})},t.prototype._restartAutosave=function(){this._stopAutosave(),this._startAutosave()},t.prototype._startAutosave=function(){var t=this;p.enabled("charts_auto_save")&&null===this._autosaveTimer&&(this._autosaveTimer=setTimeout(function(){t._autosaveTimer=null,t._chartWidgetCollection.metaInfo.id.value()&&t._doSave()},P))},t.prototype._stopAutosave=function(){null!==this._autosaveTimer&&(clearInterval(this._autosaveTimer),this._autosaveTimer=null)},t}()},function(t,e){},function(t,e,i){"use strict";(function(t){function n(t){return t&&t.__esModule?t:{default:t}}function o(t){var e,i;if(t&&t.__esModule)return t;if(e={},null!=t)for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function l(){return 0!==S.length}var c,h,u,d,p,_,f,m,g,y,v,b,S,w;Object.defineProperty(e,"__esModule",{value:!0}),e.TVModal=void 0,c=Object.assign||function(t){var e,i,n;for(e=1;e<arguments.length;e++){i=arguments[e];for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},h=function(){function t(t,e){var i,n;for(i=0;i<e.length;i++)n=e[i],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),e.isOpenedModals=l,u=i(77),d=o(u),p=i(220),_=n(p),f=i(221),m=i(228),g=i(122),y=o(g),v=i(235),b=o(v),S=[],w={ajax:{},closingDuration:d.dur/2,overlayTemplate:'<div class="tv-dialog__overlay"></div>',containerTemplate:'<div class="tv-dialog__modal-wrap"><div class="tv-dialog__modal-container"><div class="tv-dialog__modal-body"></div></div></div>',ajaxErrorTemplate:'<div class="tv-dialog__error js-dialog__close">'+$.t("Error")+"</div>"},e.TVModal=function(e){function i(){
var t,e,n,o,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r(this,i),t=s(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,c({},w,a))),t.$overlay=$(t.options.overlayTemplate),t.$modalWrap=$(t.options.containerTemplate),t.$body=t.$modalWrap.find(".tv-dialog__modal-body").append(t.$el),t.options.closeOnOutsideClick&&t.$overlay.add(t.$modalWrap).click(function(e){t.isEventOut(e)&&t.close()}),t.on("change:zIndex",function(){t.$overlay.css("z-index",t.zIndex),t.$modalWrap.css("z-index",t.zIndex)}),t.on("destroy",function(){var e=function(){t.$overlay.remove(),t.$modalWrap.remove()};t.opened?(t.close(),setTimeout(e,t.options.closingDuration)):e()}),t.on("beforeOpen",function(){S.push(t)}),t.options.ajax.url&&(e=t.options.ajax.beforeSend||$.noop,n=t.options.ajax.success||!1,o=t.options.ajax.error||$.noop,$.extend(t.options.ajax,{beforeSend:function(){t.trigger("beforeLoading",[t]),t.startSpinner(),e(t)},success:function(e){t.trigger("afterLoading",[t]),t.renderContent(n?n(t,e):e).showContent(),t.trigger("afterLoadingShow",[t])},error:function(){t.renderContent(t.options.ajaxErrorTemplate),o(t),t.trigger("errorLoading",[t])}})),t.on("error",function(e,i){t.$modalWrap[0].getBoundingClientRect().height<t.$content[0].getBoundingClientRect().height&&i.addClass("i-fixed").css({width:t.$el.width()})}),t._shortCutsLockId=null,t._keyboardBinderLockId=null,t}return a(i,e),h(i,[{key:"open",value:function(){var t,e=this;if(!this.opened)return this.opened=!0,this._shortCutsLockId=y.disable(),this._keyboardBinderLockId=b.disable(),_.default.setFixedBodyState(!0),t=function(){e.focus(),e.toTop(),$("body").append(e.$overlay.addClass("i-hidden i-closed").css("z-index",e.zIndex)).append(e.$modalWrap.addClass("i-hidden i-closed").css("z-index",e.zIndex)),e.trigger("beforeOpen",[e]),e.$overlay.removeClass("i-hidden"),setTimeout(function(){e.$overlay.removeClass("i-closed")},20),e.options.ajax.url?e.ajaxRequest=$.ajax(e.options.ajax):e.showContent()},_.default.isMobileSafari?setTimeout(function(){return t()},50):t(),this}},{key:"close",value:function(){var e=this;if(this.opened)return this.opened=!1,this._shortCutsLockId&&y.enable(this._shortCutsLockId),this._keyboardBinderLockId&&b.enable(this._keyboardBinderLockId),this.trigger("beforeClose",[this]),this.ajaxRequest&&(this.ajaxRequest.abort(),delete this.ajaxRequest),this.hideContent(),this.$overlay.addClass("i-closed"),setTimeout(function(){e.$modalWrap.addClass("i-hidden").detach(),e.$overlay.addClass("i-hidden").detach(),S=t.without(S,e),_.default.setFixedBodyState(!1),e.trigger("afterClose",[e]),e.unfocus(),S.length>0&&S[S.length-1].focus(),e.options.destroyOnClose&&e.destroy()},this.options.closingDuration),this}},{key:"showContent",value:function(){var t=this;return this.$modalWrap.removeClass("i-hidden"),setTimeout(function(){t.$modalWrap.removeClass("i-closed")},20),setTimeout(function(){t.trigger("afterOpen",[t]),t.spinner&&t.stopSpinner()},.75*d.dur+20),this}},{key:"hideContent",value:function(){if(this.$el)return this.$modalWrap.addClass("i-closed"),
this.unfocus(),this}},{key:"startSpinner",value:function(){return this.spinner=new m.Spinner("large"),this.spinner.spin(this.$overlay[0]),this}},{key:"stopSpinner",value:function(){if(this.spinner)return this.spinner.stop(),delete this.spinner,this}}]),i}(f.TVDialogAbstract)}).call(e,i(100))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"breakpoints",function(){return n});var n={desktop:1/0,desktopHd:1919,phone:767,"phone-vertical":479,tablet:1019}},function(t,e,i){"use strict";(function(t,n){function o(t){return t&&t.__esModule?t:{default:t}}function r(t){var e,i;if(t&&t.__esModule)return t;if(e={},null!=t)for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function c(){v.forEach(function(t){return t.close()})}var h,u,d,p,_,f,m,g,y,v,b,S,w,P,T,C,x;Object.defineProperty(e,"__esModule",{value:!0}),e.TVDialogAbstract=void 0,h=Object.assign||function(t){var e,i,n;for(e=1;e<arguments.length;e++){i=arguments[e];for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},u=function(){function t(t,e){var i,n;for(i=0;i<e.length;i++)n=e[i],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),e.closeAllDialogs=c,d=i(77),p=r(d),i(381),_=i(154),f=o(_),i(558),i(559),i(400),m=i(152),g=o(m),y=0,v=[],b=void 0,S=110,w=$(document),P={closeOnEsc:!0,closeButton:!0,focusFirstControl:!0,closeOnOutsideClick:!0,closeButtonAddClass:"",focusClass:"i-focused",template:'<div class="tv-dialog">',errorTemplate:'<div class="tv-dialog__error i-slided{{# errorMod }} tv-dialog__error--{{ errorMod }}{{/ errorMod }}">{{{ error }}}</div>',titleTemplate:'<div class="tv-dialog__section tv-dialog__section--title js-dialog__drag"><div class="js-title-text tv-dialog__title">{{{ title }}}</div></div>',contentWrapTemplate:'<div class="tv-dialog__section tv-dialog__section--no-border">',actionsWrapTemplate:'<div class="tv-dialog__section tv-dialog__section--actions tv-dialog__section--no-border">',closeButtonTemplate:'<div class="tv-dialog__close js-dialog__close">'+i(226)+"</div>",helpButtonTemplate:'<a href="{{{ link }}}" target="_blank" class="tv-dialog__help apply-common-tooltip" title="{{{ title }}}"></a>',helpActionsMod:"tv-dialog__section--actions_with-help"},T={default:"tv-button tv-button--default",primary:"tv-button tv-button--primary",success:"tv-button tv-button--success",
danger:"tv-button tv-button--danger",warning:"tv-button tv-button--warning",link:"tv-button tv-button--link",checkbox:"tv-control-checkbox tv-control-checkbox--in-actions","default-ghost":"tv-button tv-button--default_ghost","primary-ghost":"tv-button tv-button--primary_ghost","success-ghost":"tv-button tv-button--success_ghost","danger-ghost":"tv-button tv-button--danger_ghost","warning-ghost":"tv-button tv-button--warning_ghost"},C={_default:'<div data-name="{{ name }}" class="js-dialog__action-click js-dialog__no-drag {{ class }}">{{ text }}</div>',"submit-success":'<button type="submit" class="tv-button tv-button--success">{{ text }}</button>'},$(function(){P.$wrap=$(document.all&&!document.querySelector?"html":"body")}),x=function(e){function i(){var e,n,o,r,l,c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(s(this,i),e=a(this,(i.__proto__||Object.getPrototypeOf(i)).call(this)),e._id=y++,e.loadingActions=[],e.disabledActions=[],e.firstFocusControl=null,e.options=h({},P,c),e.$el=$(t.render(e.options.template,{title:e.options.title,closeButton:e.options.closeButton})),e.$el.addClass("js-dialog"),e.el=e.$el[0],e.options.addClass&&e.$el.addClass(e.options.addClass),e.options.width&&e.$el.css({width:"100%","max-width":e.options.width}),e.options.title&&(e.$title=$(t.render(e.options.titleTemplate,{title:e.options.title})).appendTo(e.$el)),e.$content=$(e.options.contentWrapTemplate).appendTo(e.$el),e.$contentIn=e.$content;e.$contentIn.length;)e.$contentIn=e.$contentIn.children();if(e.$contentIn=e.$contentIn.end(),e.options.content&&e.renderContent(e.options.content),(e.options.actions||e.options.help)&&(e.$content.hasClass("tv-dialog__section")&&e.$content.addClass("tv-dialog__section--no-padding_bottom"),e.$actions=$(e.options.actionsWrapTemplate).appendTo(e.$el)),e.options.actions)for(e.actions={},e.$el.on("click touchend",".js-dialog__action-click",function(t){t.preventDefault(),e.actionDispatcher($(t.currentTarget).data("name"))}),n=function(i){var n,o,r,s,a,l,c=e.options.actions[i];c.type||(c.type="default"),c.class||(c.class=T[c.type]?T[c.type]:T.default),"checkbox"===c.type?(n=new f.default({labelRight:c.text,name:c.name,checked:c.checked}),e.actions[c.name]=n.$el.appendTo(e.$actions),e.actions[c.name].on("change",function(){setTimeout(function(){return e.actionDispatcher(c.name,n.checked)})})):e.actions[c.name]=$(t.render(c.template?c.template:C[c.type]||C._default,c,c)).appendTo(e.$actions),c.method&&"function"==typeof e[c.method]&&e.on("action:"+c.name,e[c.method].bind(e)),c.addClass&&e.actions[c.name].addClass(c.addClass),c.key&&(o=void 0,"string"==typeof c.key&&c.key.split("+").length>1?(r=[],s=c.key.split("+"),o=function(t){r=[]},a=function(t){var i=""+t.keyCode;-1!==s.indexOf(i)&&r.indexOf(i)&&r.push(i),e._focused&&r.length===s.length&&(r=[],e.actionDispatcher(c.name))},e.on("afterOpen",function(){w.on("keydown",a),w.on("keyup",o)}),e.on("beforeClose",function(){w.off("keydown",a),w.off("keyup",o)})):(l=$.isArray(c.key)?c.key:[c.key],o=function(t){
!t.isDefaultPrevented()&&e._focused&&-1!==l.indexOf(t.keyCode)&&e.actionDispatcher(c.name)},e.on("afterOpen",function(){return w.on("keyup",o)}),e.on("beforeClose",function(){return w.off("keyup",o)})))},o=e.options.actions.length-1;o>=0;o--)n(o);return e.options.help&&$(t.render(e.options.helpButtonTemplate,e.options.help)).prependTo(e.$actions.addClass(e.options.helpActionsMod)),e.options.closeButton&&(r=$(e.options.closeButtonTemplate),r.addClass(e.options.closeButtonAddClass||""),l=e.$el,1===e.$el.find(".js-close-button-place").length&&(l=e.$el.find(".js-close-button-place")),r.appendTo(l)),e.setZIndex(S+v.length),c.errorMod&&(e.errorMod=c.errorMod),e.on("afterOpen",function(){e.options.focusFirstControl&&!Modernizr.touch&&(e.firstFocusControl||e.$el.find('input:not([type="hidden"]), textarea').first()).focus()}),e.$el.on("click touchend",".js-dialog__close",e.close.bind(e)),e.$el.on("mousedown touchstart",e.focus.bind(e)),v.push(e),e}return l(i,e),u(i,[{key:"renderContent",value:function(t){return this.$contentIn.html("function"==typeof t?t(this):t),this}},{key:"setDestroyOnClose",value:function(t){this.options.destroyOnClose=t}},{key:"setZIndex",value:function(t){return this.zIndex=t,this.trigger("change:zIndex",[this]),this}},{key:"toTop",value:function(){for(var t=v.length-1;t>=0;t--)v[t].zIndex>this.zIndex&&v[t].setZIndex(v[t].zIndex-1);return this.setZIndex(S+v.length),this}},{key:"isEventOut",value:function(t){var e,i,n;return this.options.isClickOutFn&&void 0!==(e=this.options.isClickOutFn(t))?e:(i=!0,n=$(t.target),n.get(0)!==this.$el.get(0)&&($(">*",this.$el).each(function(){n.get(0)===$(this).get(0)&&(i=!1),0===n.closest("HTML",$(this).get(0)).length&&(i=!1)}),i))}},{key:"focus",value:function(){var t=this;b&&b!==this&&b.unfocus(),this._setFocused(),this._focused=!0,this.$el.addClass(this.options.focusClass),this.trigger("focus",[this]),setTimeout(function(){w.on("mousedown.tv-dialog-unfocus-"+t._id,function(e){t.isEventOut(e)&&(t.unfocus(),w.off("mousedown.tv-dialog-unfocus-"+t._id))})},20)}},{key:"_setFocused",value:function(){b!==this&&(b=this)}},{key:"_setUnfocused",value:function(){b===this&&(b=void 0)}},{key:"unfocus",value:function(){b===this&&(this._setUnfocused(),this._focused=!1,this.$el.removeClass(this.options.focusClass).find(":focus").blur(),this.trigger("unfocus",[this]))}},{key:"isFocused",value:function(){return this._focused}},{key:"setTitle",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.$title.toggleClass("tv-dialog__section--one-line apply-overflow-tooltip",e),this.$title.html(t),this}},{key:"setTitleText",value:function(t){this.$title.find(".js-title-text").text(t)}},{key:"actionDispatcher",value:function(t){if(!this.disabledActions.includes(t)&&!this.loadingActions.includes(t)){for(var e=arguments.length,i=Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];this.trigger("action:"+t,[this].concat(i))}}},{key:"toggleAction",value:function(t,e){
return!e&&this.disabledActions.includes(t)?this.disabledActions.push(t):e&&this.disabledActions.includes(t)&&(this.disabledActions=n.without(this.disabledActions,t)),this.actions[t].toggleClass("i-disabled",!e),this}},{key:"actionLoader",value:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"init";return this.actions[t].tvButtonLoader(i),"init"===i&&(this.actions[t].off("tv-button-loader:start.dialog-action").on("tv-button-loader:start.dialog-action",function(){e.loadingActions.push(t)}),this.actions[t].off("tv-button-loader:stop.dialog-action").on("tv-button-loader:stop.dialog-action",function(){e.loadingActions=n.without(e.loadingActions,t)})),this}},{key:"error",value:function(e){var i=$(t.render(this.options.errorTemplate,{error:e,errorMod:this.errorMod})).appendTo(this.$el),n=function(){i.addClass("i-slided"),setTimeout(function(){return i.remove()},.75*p.dur)};return setTimeout(function(){return i.removeClass("i-slided")},20),w.one("touchstart mousedown keydown",n),this.trigger("error",[this,i]),this}},{key:"destroy",value:function(){v=n.without(v,this);for(var t=0;t<v.length;t++)v[t].setZIndex(S+t);this.trigger("destroy",[this])}},{key:"isOpened",value:function(){return!!this.opened}}]),i}(g.default),e.TVDialogAbstract=x,w.on("keyup.tv-dialog-esc",function(t){b&&b.options.closeOnEsc&&!$(".tv-dropdown__body.i-opened").length&&!$(t.target).closest(".js-dialog-skip-escape").length&&27===t.keyCode&&b.close()})}).call(e,i(93),i(100))},function(t,e){},function(t,e){},function(t,e,i){"use strict";function n(){return new Promise(function(t){i.e(22).then(function(e){var n=i(1456).LoadChartDialog;t(new n)}.bind(null,i)).catch(i.oe)})}function o(){return r.enabled("saveload_requires_authentication")&&!window.is_authenticated?Promise.resolve([]):new Promise(function(t){Object(c.getCharts)(function(e){t(e)})})}var r,s,a,l,c,h,u,d,p,_;Object.defineProperty(e,"__esModule",{value:!0}),r=i(4),s=i(0),a=i(236),l=function(t){function e(e,i){return t.call(this,e,i,"FAVORITE_CHARTS_CHANGED","loadChartDialog.favorites",{})||this}return s.c(e,t),e}(a.b),c=i(75),h=i(561),u=i(99),d=i(26),p=i(303),i.d(e,"LoadChartService",function(){return _}),_=function(){function t(t){void 0===t&&(t=null);var e=this;this._favoriteChartsService=new l(u.TVXWindowEvents,d),this._chartWidgetCollection=null,this._dialogPromise=null,this._getChartEntry=function(t){return{id:t.id,url:t.url,title:t.name,symbol:t.short_symbol,interval:t.interval,toolsCount:0,modified:t.modified_iso,active:function(){return e._isActiveChart(t.id)},openAction:function(){return Object(c.loadChart)(t)},deleteAction:function(i,n){Object(h.deleteChart)(n,t.image_url,function(){e._deleteChart(t.id),i.resolve()},i.reject.bind(i))},favoriteAction:e._updateFavorites}},this._updateFavorites=function(t){return e._favoriteChartsService.set(t)},this._isActiveChart=function(t){return null!==e._chartWidgetCollection&&t===e._chartWidgetCollection.metaInfo.id.value()},this._deleteChart=function(t){
e._isActiveChart(t)&&(r.enabled("saveload_storage_customization")?null!==e._chartWidgetCollection&&e._chartWidgetCollection.clearChartMetaInfo():location.href="/chart/"+location.search)},this._chartWidgetCollection=t}return t.prototype.showLoadDialog=function(){Object(p.a)(this._showLoadDialog.bind(this),{source:"Load chart",sourceMeta:"Chart"})},t.prototype._showLoadDialog=function(){var t=this;o().then(function(e){return e.map(t._getChartEntry)}).then(function(e){null===t._dialogPromise&&(t._dialogPromise=n()),t._dialogPromise.then(function(i){return i.show(e,t._favoriteChartsService.get())})})},t}()},function(t,e,i){"use strict";function n(t,e,i,n){(0,o.createConfirmDialog)({type:"modal",content:document.createTextNode($.t("Do you really want to delete Chart Layout '{0}' ?").format(t)),addClass:"delete-chart-dialog"}).then(function(t){var o=function(){var t=n;n=null,t&&t()};t.on("action:yes",function(){n=null,r.removeChart(e,i),t.close()}),t.on("action:no",o),t.on("afterClose",o),t.open()})}var o,r;Object.defineProperty(e,"__esModule",{value:!0}),e.deleteChart=n,o=i(70),r=i(75)},function(t,e,i){"use strict";function n(t,e){Object(l.saveStudyTemplate)(t,function(i){i.error||(r.setValue("defaultStudyTemplate",t.name),Object(l.invalidateStudyTemplatesList)(),Object(l.getStudyTemplatesList)(e))})}var o,r,s,a,l,c,h,u,d,p,_,f,m,g,y,v,b;Object.defineProperty(e,"__esModule",{value:!0}),o=i(0),r=i(26),s=i(130),a=i(121),l=i(75),c="text",h="bool",u={saveRenameDialog:{dialogTitle:window.t("Save Indicator Template As"),titleFieldLabel:window.t("Template name"),titleFieldError:window.t("Please enter template name"),intervalFieldLabel:window.t("Save Interval"),intervalFieldHint:window.t("When selecting this checkbox the study template will set {0} interval on a chart")},confirmDialog:{message:window.t("Study Template '{0}' already exists. Do you really want to replace it?")}},d=function(){function t(t){var e=this;this._showSaveDialog=function(){return o.b(e,void 0,void 0,function(){var t,e;return o.d(this,function(i){switch(i.label){case 0:return t=this._chartWidget.model().model().mainSeries().interval(),[4,this._getActualTemplateList()];case 1:return e=i.sent(),[4,this._showTemplateSaveRenameDialog(e,t)];case 2:return i.sent(),[2]}})})},this._chartWidget=t.chartWidget,t.onSave&&(this._onSave=t.onSave)}return t.prototype.show=function(){window.runOrSignIn(this._showSaveDialog,{source:"Study templates save as",sourceMeta:"Chart"})},t.prototype._doSave=function(t,e){var i,o,r;t=Object(s.clean)(t),i=this._chartWidget.model().model().studyTemplate(e),o=JSON.stringify(i),r={name:t,content:o},n(r,this._onSave)},t.prototype._getActualTemplateList=function(){return Object(l.invalidateStudyTemplatesList)(),new Promise(function(t){Object(l.getStudyTemplatesList)(t)})},t.prototype._showTemplateSaveRenameDialog=function(t,e){var i=this;new a.SaveRenameDialog({fields:[new a.AutocompleteField({name:c,label:u.saveRenameDialog.titleFieldLabel+":",error:u.saveRenameDialog.titleFieldError,source:t,valueField:"name",textField:"name",maxLength:64
}),new a.CheckboxField({name:h,label:u.saveRenameDialog.intervalFieldLabel,hint:u.saveRenameDialog.intervalFieldHint.format(e)})],title:u.saveRenameDialog.dialogTitle,confirm:{shouldShowDialog:function(e){var i=Object(s.clean)(e[c]);return t.map(function(t){return t.name}).includes(i)},getMessage:function(t){return u.confirmDialog.message.format(Object(s.clean)(t[c]))}}}).show().then(function(t){var e=t[c],n=!!t[h];i._doSave(e,n)})},t}(),p=i(28),_=i(8),f=i.n(_),m=i(15),g=i.n(m),y=i(70),i.d(e,"StudyTemplates",function(){return b}),v={confirmDelete:window.t("Do you really want to delete Study Template '{0}' ?")},b=function(){function t(t){var e=this;this._chartWidgetCollection=t.chartWidgetCollection,this._favoriteStudyTemplatesService=t.favoriteStudyTemplatesService,window.loginStateChange.subscribe(null,l.invalidateStudyTemplatesList),this._list=new g.a([]),this._onChange=new f.a,this._list.subscribe(function(){return e._onChange.fire()})}return t.prototype.showSaveAsDialog=function(){var t=this,e=this._chartWidgetCollection.activeChartWidget.value();new d({chartWidget:e,onSave:function(e){t._list.setValue(e)}}).show()},t.prototype.applyTemplate=function(t){var e=this._chartWidgetCollection.activeChartWidget.value();r.setValue("defaultStudyTemplate",t),Object(l.getStudyTemplateContent)(t,function(i){Object(p.trackEvent)("GUI","Load Study Template"),e.model().model().restoreStudyTemplate(JSON.parse(i.content),t),e.updateSeriesControlUI()})},t.prototype.deleteStudyTemplate=function(t){var e=this;window.runOrSignIn(function(){Object(y.createConfirmDialog)({type:"modal",content:v.confirmDelete.format(t)}).then(function(i){i.on("action:yes",function(i){i.actionLoader("yes","start"),Object(l.invalidateStudyTemplatesList)(),Object(l.removeStudyTemplate)(t,function(){var n,o=e.list();e._list.setValue(o.filter(function(e){return e.name!==t})),e._favoriteStudyTemplatesService&&(n=e._favoriteStudyTemplatesService.get(),e._favoriteStudyTemplatesService.set(n.filter(function(e){return e!==t}))),setTimeout(function(){i.actionLoader("yes","stop"),i.close()},0)})}),i.open()})},{source:"Study templates delete"})},t.prototype.list=function(){return this._list.value()},t.prototype.plainList=function(t){var e,i=this.list();return e="default"===t?i.filter(function(t){return!!t.is_default}):i.filter(function(t){return!t.is_default}),e.map(function(t){return t.name})},t.prototype.getOnChange=function(){return this._onChange},t.prototype.refreshStudyTemplateList=function(t){var e=this;Object(l.getStudyTemplatesList)(function(i){e._list.setValue(i),void 0!==t&&t()})},t}()},function(t,e,i){"use strict";function n(t){var e,i;if(t&&t.__esModule)return t;if(e={},null!=t)for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r,s,a,l,c,h;Object.defineProperty(e,"__esModule",{value:!0}),e.AutocompleteField=void 0,r=function(){function t(t,e){var i,n;for(i=0;i<e.length;i++)n=e[i],n.enumerable=n.enumerable||!1,
n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(19),a=n(s),l=i(67),c=n(l),h=i(564),e.AutocompleteField=function(){function t(e){var i,n=this,r=e.label,s=e.name,l=(e.maxLength,e.error),u=void 0===l?"":l,d=e.source;o(this,t),this._name=s,this._error=u,this._$field=$('<label class="tv-rename-chart-dialog__field">\n\t\t\t\t<span class="tv-rename-chart-dialog__label">'+r+"</span>\n\t\t\t</label>"),this._autocompleteContainer=document.createElement("div"),this._$field[0].appendChild(this._autocompleteContainer),i=a.createElement(h.Autocomplete,{source:d.map(function(t){return t.name}),allowUserDefinedValues:!0,preventOnFocusOpen:!0,noEmptyText:!0,preventSearchOnEmptyQuery:!0,setupHTMLInput:function(t){n._autocompleteInput=t},filter:function(t,e){return""===t||t&&-1!==e.toLowerCase().indexOf(t.toLowerCase())}}),c.render(i,this._autocompleteContainer)}return r(t,[{key:"appendTo",value:function(t){t.append(this._$field)}},{key:"focus",value:function(){this._autocompleteInput.focus()}},{key:"select",value:function(){this._autocompleteInput.focus(),this._autocompleteInput.select()}},{key:"unmount",value:function(){c.unmountComponentAtNode(this._autocompleteContainer)}},{key:"value",get:function(){return this._autocompleteInput.value}},{key:"name",get:function(){return this._name}},{key:"valid",get:function(){return!!this._autocompleteInput.value}},{key:"error",get:function(){return this._error}}]),t}()},function(t,e,i){"use strict";function n(t){var e,i=t.dropped,n=void 0!==i&&i,o=t.small,r=void 0!==o&&o,c=t.colorTransition,h=void 0!==c&&c,u=t.style,d=void 0===u?{}:u,p=t.className,_=void 0===p?"":p,f=l(_,a.caret,(e={},e[a.caretRotate]=n,e[a.caretSmall]=r,e[a.caretColorTransition]=h,e));return s.createElement("i",{className:f,style:d})}function o(t,e){return""===t||-1!==e.toLowerCase().indexOf(t.toLowerCase())}var r,s,a,l,c,h,u,d,p,_,f;Object.defineProperty(e,"__esModule",{value:!0}),r=i(0),i(9),s=i(19),a=i(565),l=i(115),c=i(383),h=i(363),u=i(380),d=i(566),p=i(243),i.d(e,"Autocomplete",function(){return f}),_=function(t){return Array.isArray(t.source)||!t.allowUserDefinedValues},f=function(t){function e(e){var i=t.call(this,e)||this;if(i._setInputRef=function(t){t&&(i._inputElement=t,i.props.setupHTMLInput&&i.props.setupHTMLInput(t),i._inputElement.addEventListener("keyup",i._handleKeyUpEnter))},i._handleCaretClick=function(){i.state.isOpened?i._close():i.props.preventOnFocusOpen?i._open():i._focus()},i._handleOutsideClick=function(){var t=i.props,e=t.allowUserDefinedValues,n=t.value,o=t.onChange,r=i.state.queryValue;e&&r!==n?o&&o(r):i.setState(i._valueToQuery(n)),i._close()},i._handleFocus=function(t){i.props.preventOnFocusOpen||i._open(),i.props.onFocus&&i.props.onFocus(t)},i._handleChange=function(t){var e,n=t.currentTarget.value;i.props.preventSearchOnEmptyQuery&&""===n?i.setState({queryValue:n,isOpened:!1,active:void 0}):(e=i._suggestions(n),i.setState({queryValue:n,isOpened:Object.keys(e).length>0,
active:i.props.allowUserDefinedValues?void 0:i._getActiveKeyByValue(n)}))},i._handleItemClick=function(t){var e=t.currentTarget.id;i.setState({queryValue:i._source()[e]}),i._close(),i.props.onChange&&i.props.onChange(e)},i._handleKeyDown=function(t){var e,n,o,r,s,a,l,c,h,d,p,_,f,m;if(-1!==[u.a.DownArrow,u.a.UpArrow,u.a.Enter,u.a.Escape].indexOf(t.which))switch(t.preventDefault(),t.stopPropagation(),e=i.props,n=e.allowUserDefinedValues,o=e.value,r=e.onChange,s=i.state,a=s.active,l=s.isOpened,c=s.queryValue,h=i._suggestions(c),t.which){case u.a.DownArrow:case u.a.UpArrow:if(d=Object.keys(h),!l&&d.length&&t.which===u.a.DownArrow){i.setState({isOpened:!0,active:d[0]});break}if(p=void 0,void 0===a){if(t.which===u.a.UpArrow){i._close();break}p=0}else p=d.indexOf(a)+(t.which===u.a.UpArrow?-1:1);p<0&&(p=0),p>d.length-1&&(p=d.length-1),_=d[p],i.setState({active:_}),(f=document.getElementById(_))&&i._scrollIfNotVisible(f,i._suggestionsElement);break;case u.a.Escape:i._close(),l||i._blur();break;case u.a.Enter:m=a,n&&(l&&m?i.setState(i._valueToQuery(m)):m=c),void 0!==m&&(i._close(),l||i._blur(),m!==o?r&&r(m):i.setState(i._valueToQuery(m)))}},i._setSuggestionsRef=function(t){t&&(i._suggestionsElement=t)},i._scrollIfNotVisible=function(t,e){var i=e.scrollTop,n=e.scrollTop+e.clientHeight,o=t.offsetTop,r=t.clientHeight,s=o+r;return o<=i?void t.scrollIntoView(!0):s>=n?void t.scrollIntoView(!1):void 0},!_(e))throw Error("allowUserDefinedProps === true cay only be used if source is array");return i.state=r.a({isOpened:!1,active:e.value},i._valueToQuery(e.value)),i}return r.c(e,t),e.prototype.componentWillReceiveProps=function(t){this.setState({queryValue:""===t.value?"":this._source()[t.value]||this.state.queryValue,active:t.value})},e.prototype.componentWillUnmount=function(){this._inputElement&&this._inputElement.removeEventListener("keyup",this._handleKeyUpEnter)},e.prototype.render=function(){var t;return s.createElement(h.a,{ctor:"div",className:l(d.autocomplete,(t={},t[d.opened]=this.state.isOpened,t),"js-dialog-skip-escape"),handler:this._handleOutsideClick,click:!0},s.createElement(c.a,{rightComponent:Object.keys(this._suggestions(this.state.queryValue)).length?s.createElement("div",{className:d.caret,onClick:this._handleCaretClick},s.createElement(n,{className:d.icon,dropped:this.state.isOpened})):void 0,theme:p,reference:this._setInputRef,className:d.textInput,placeholder:this.props.placeholder,value:this.state.queryValue,error:this.props.error,onChange:this._handleChange,onFocus:this._handleFocus,onBlur:this.props.onBlur,onMouseOver:this.props.onMouseOver,onMouseOut:this.props.onMouseOut,onKeyDown:this._handleKeyDown}),this._renderSuggestions())},e.prototype._focus=function(){this._inputElement.focus()},e.prototype._blur=function(){this._inputElement.blur()},e.prototype._open=function(){this.setState({isOpened:!0})},e.prototype._close=function(){this.setState({isOpened:!1,active:void 0})},e.prototype._source=function(){var t={};return Array.isArray(this.props.source)?this.props.source.forEach(function(e){t[e]=e
}):t=this.props.source,t},e.prototype._suggestions=function(t){var e=this.props,i=e.value,n=e.filter,r=void 0===n?o:n,s=this._source(),a={},l=Object.keys(s);return t!==s[i]&&(l=l.filter(function(e){return r(t,s[e])})),l.forEach(function(t){return a[t]=s[t]}),a},e.prototype._renderSuggestions=function(){var t=this,e=this._suggestions(this.state.queryValue),i=Object.keys(e).map(function(i){var n,o=l(d.suggestion,(n={},n[d.selected]=t.state.active===i,n));return s.createElement("li",{id:i,key:i,className:o,onClick:t._handleItemClick},e[i])}),n=s.createElement("li",{className:d.noResults},window.t("No results found"));return!i.length&&this.props.noEmptyText?null:s.createElement("ul",{className:d.suggestions,ref:this._setSuggestionsRef},i.length?i:n)},e.prototype._handleKeyUpEnter=function(t){t.which===u.a.Enter&&t.stopImmediatePropagation()},e.prototype._getActiveKeyByValue=function(t){var e,i,n,r=this.props.filter,s=void 0===r?o:r,a=this._suggestions(t),l=Object.keys(a);for(e=0,i=l;e<i.length;e++)if(n=i[e],s(t,a[n]))return n;return l[0]},e.prototype._valueToQuery=function(t){return{queryValue:this._source()[t]||""}},e}(s.PureComponent)},function(t,e){t.exports={caret:"caret-3_GTxtct-",caretRotate:"caretRotate-98O6Gi4f-",caretSmall:"caretSmall-1vg6w8eZ-",caretColorTransition:"caretColorTransition-1y-c2tgp-"}},function(t,e){t.exports={autocomplete:"autocomplete-S6SpJGmW-",caret:"caret-3fqF_ykE-",icon:"icon-1POgzoN_-",textInput:"textInput-1mZnCCcA-",suggestions:"suggestions-NOVMFmSY-",suggestion:"suggestion-3xakscNf-",noResults:"noResults-1pgHgvGL-",selected:"selected-3wOAQHl8-",opened:"opened-2C-bn3cP-"}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r,s,a;Object.defineProperty(e,"__esModule",{value:!0}),e.CheckboxField=void 0,r=function(){function t(t,e){var i,n;for(i=0;i<e.length;i++)n=e[i],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(154),a=n(s),e.CheckboxField=function(){function t(e){var i=e.label,n=e.name,r=e.error,s=void 0===r?"":r,l=e.hint;o(this,t),this._name=n,this._error=s,this._checkboxView=new a.default({labelRight:i,name:n}),this._checkboxView.$el.addClass("tv-rename-chart-dialog__field"),l&&this._checkboxView.$el.append('<span class="tv-rename-chart-dialog__hint apply-common-tooltip" title=\''+l+"'></span>")}return r(t,[{key:"appendTo",value:function(t){t.append(this._checkboxView.$el)}},{key:"focus",value:function(){}},{key:"select",value:function(){}},{key:"value",set:function(t){this._checkboxView.checked=t},get:function(){return this._checkboxView.checked}},{key:"name",get:function(){return this._name}},{key:"valid",get:function(){return!0}},{key:"error",get:function(){return this._error}}]),t}()},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){
if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s,a;Object.defineProperty(e,"__esModule",{value:!0}),e.InputFieldRegExp=void 0,s=function(){function t(t,e){var i,n;for(i=0;i<e.length;i++)n=e[i],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=i(121),e.InputFieldRegExp=function(t){function e(t){var i,r;return n(this,e),i=t.regExp,delete t.regExp,r=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)),r._regExp=i,r}return r(e,t),s(e,[{key:"valid",get:function(){return this._regExp.test(this._$input.val())}}]),e}(a.InputField)},function(t,e,i){"use strict";var n,o,r;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"FavoriteStudyTemplateService",function(){return r}),n=i(0),o=i(236),r=function(t){function e(e,i){return t.call(this,e,i,"FAVORITE_STUDY_TEMPLATES_CHANGED","StudyTemplates.quicks",[])||this}return n.c(e,t),e}(o.b)},function(t,e,i){"use strict";var n,o,r,s;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"StudyMarket",function(){return s}),n=i(8),o=i.n(n),r=i(161),s=function(){function t(t,e){this.visibilityChanged=new o.a,this._dialogPromise=null,this._dialog=null,this._chartWidgetCollection=t,this._options=e}return t.prototype.isVisible=function(){return null!==this._dialog&&this._dialog.isVisible()},t.prototype.show=function(t){var e=this;if(null===this._dialog)return void this._requestDialog().then(function(){return e.show(t)});this._dialog.show(t)},t.prototype.hide=function(){null!==this._dialog&&this._dialog.hide()},t.prototype.onCustomScriptModified=function(){null!==this._dialog&&this._dialog.onCustomScriptModified()},t.prototype.resetAllPages=function(){null!==this._dialog&&this._dialog.resetAllPages()},t.prototype.updateFavorites=function(){null!==this._dialog&&this._dialog.updateFavorites()},t.prototype._requestDialog=function(){var t=this,e=function(e,n){i.e(21).then(function(n){var o=i(822).StudyMarketDialog;e(new o(t._chartWidgetCollection,t._options))}.bind(null,i)).catch(n)};return null===this._dialogPromise&&(this._dialogPromise=Object(r.retries)(function(){return new Promise(e)},2).then(function(e){t._dialogPromise=null,t._dialog=e,t._dialog.visibilityChanged.subscribe(null,function(e){t.visibilityChanged.fire(e)})})),this._dialogPromise},t}()},function(t,e){},function(t,e,i){"use strict";function n(){var t,e;return{promise:new Promise(function(i,n){t=i,e=n}),reject:e,resolve:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.createDeferredPromise=n},function(t,e,i){"use strict";var n,o,r,s,a,l,c;Object.defineProperty(e,"__esModule",{
value:!0}),n=i(14),i(9),o=i(15),r=i.n(o),s=i(162),a=function(){function t(t){var e,i,n,o,s=this;this._document=t,this.isFullscreen=new r.a,(e=function(){var t,e,i=["fullscreenElement","webkitFullscreenElement","mozFullscreenElement","mozFullScreenElement","msFullscreenElement"];for(t=0;t<i.length;t++)if((e=i[t])in s._document){s.isFullscreen.setValue(!!s._document[e]);break}})();for(i=0,n=["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"];i<n.length;i++)o=n[i],t.addEventListener(o,e,!1)}return t.prototype.enter=function(){var t,e,i,n=this._document.documentElement;for(t=0,e=["requestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","msRequestFullscreen"];t<e.length;t++)if(i=e[t],"function"==typeof n[i]){n[i]();break}this.isFullscreen.setValue(!0)},t.prototype.exit=function(){var t,e,i,n=this._document;for(t=0,e=["exitFullscreen","mozCancelFullScreen","mozExitFullscreen","webkitExitFullscreen","msExitFullscreen"];t<e.length;t++)if(i=e[t],"function"==typeof n[i]){n[i]();break}this.isFullscreen.setValue(!1)},t}(),l=function(){function t(t){var e,i,n,o,s,a,l=this;this.isVisible=new r.a(!0),i=null,n=function(n){var o=n?n+"Hidden":"hidden";if(o in t)return e=n+"visibilitychange",i=function(){l.isVisible.setValue(!t[o])},i(),t.addEventListener(e,i,!1),"break"};for(o=0,s=["","moz","ms","webkit"];o<s.length&&(a=s[o],"break"!==n(a));o++);this.destroy=function(){i&&(t.removeEventListener(e,i,!1),i=null)}}return t}(),i.d(e,"Root",function(){return c}),c=function(){function t(t){this._window=t,this._fullscreenApi=new a(t.document),this._initFullscreen()}return t.prototype.allocate=function(){var t,e,i,n=this;return this.free(),t=this._window.document,e=$("<div>",t).addClass("js-rootresizer__contents").css({position:"relative",width:"100%",height:"100%"}).prependTo(t.body),this._visibilityApi=new l(this._window.document),i={alive:new r.a(!0),fullscreenable:new r.a(!0),body:new r.a(e),width:new r.a,height:new r.a,availWidth:new r.a,availHeight:new r.a,visible:this._visibilityApi.isVisible,fullscreen:this._fullscreenApi.isFullscreen,remove:function(){i.alive.setValue(!1)},attach:function(){i.alive.setValue(!1),n._window.close()},requestFullscreen:function(){n._requestFullscreen()},exitFullscreen:function(){n._exitFullscreen()}},i.alive.subscribe(function(t){t||i!==n._area||n.free()}),this._area=i,this._resizeHandler=function(){var t=i.body.value()[0],e=t.clientWidth,n=t.clientHeight;i.availHeight.setValue(n),i.availWidth.setValue(e),i.height.setValue(n),i.width.setValue(e)},this._resizeHandler(),$(this._window).on("resize",this._resizeHandler),new s.ResizerDetacherState(i).bridge()},t.prototype.free=function(){if(this._resizeHandler&&($(this._window).off("resize",this._resizeHandler),this._resizeHandler=void 0),this._visibilityApi&&(this._visibilityApi.destroy(),this._visibilityApi=void 0),this._area){var t=this._area;this._area=void 0,t.alive.setValue(!1),t.body.value().remove()}},t.prototype._requestFullscreen=function(){this._fullscreenApi.enter()},
t.prototype._exitFullscreen=function(){this._fullscreenApi.exit()},t.prototype._initFullscreen=function(){var t=this,e=this._window.document;this._fullscreenApi.isFullscreen.subscribe(function(i){i?(t._$exitFullscreenButton=$("<div>",e).addClass("tv-exit-fullscreen-button").text($.t("Exit Full Screen (ESC)")).on("click",function(e){e.preventDefault(),t._exitFullscreen()}).appendTo(e.body),t._onExitFullscreenEsc=function(e){27===e.keyCode&&(e.preventDefault(),t._exitFullscreen())},$(e).on("keyup",t._onExitFullscreenEsc)):(t._$exitFullscreenButton&&(t._$exitFullscreenButton.remove(),t._$exitFullscreenButton=void 0),t._onExitFullscreenEsc&&($(e).off("keyup",t._onExitFullscreenEsc),t._onExitFullscreenEsc=void 0)),t._resizeHandler&&t._resizeHandler()})},t}()},function(t,e){},function(t,e,i){"use strict";function n(t,e){var i,n,o,r,s,a,l=0;for(i=0,n=e;i<n.length&&(o=n[i],r=o.min,s=o.max,t<r||s<r||(a=Math.min(t,s),l=Math.max(l,a),t!==l));i++);return l}function o(t){var e,i,n,o,r,s=[];if(void 0===t)return[];for(Array.isArray(t)||(t=[t]),e=0,i=t;e<i.length;e++)n=i[e],o=void 0,r=void 0,isFinite(n)?o=r=+n:(o=+n.min,r=+n.max),(o<0||isNaN(o))&&(o=0),isNaN(r)&&(r=1/0),o<=r&&r>0&&s.push({min:o,max:r});return s.sort(function(t,e){return t.min-e.min||t.max-e.max}),s}function r(t,e){if(t.length!==e.length)return!1;for(var i=t.length;i--;){if(t[i].min!==e[i].min)return!1;if(t[i].max!==e[i].max)return!1}return!0}function s(t){var e=u.enabled("side_toolbar_in_fullscreen_mode");return"center"===t||"left"===t&&e}var a,l,c,h,u,d,p;Object.defineProperty(e,"__esModule",{value:!0}),a=i(14),l=i(15),c=i.n(l),h=i(162),u=i(4),i.d(e,"ChartPage",function(){return p}),d=u.enabled("no_min_chart_width"),p=function(){function t(t){var e=this;if(this._$body=$(t.body.value()),0===this._$body.size())throw Error("bridge.body.value() must be an element or not empty jQuery object");this._availableAreas=["left","dompanel","right","top","footer","bottom","center"],this._areas={},this._bridge=t,this._width=t.width,this._height=t.height,this._width.subscribe(function(){return e.recalculate()}),this._height.subscribe(function(){return e.recalculate()}),this._bridge.visible.subscribe(function(){return e._updateVisibility()}),this._bridge.fullscreen.subscribe(function(){return e._onParentFullscreenChange()}),this.recalculate()}return t.prototype.allocate=function(t){var e,i,n=this,s=t&&t.areaName;if(-1===this._availableAreas.indexOf(s))throw Error("unknown options.areaName");return this.free(s),e=this._createDOM(s),i={canNegotiate:{width:"left"===s||"right"===s||"dompanel"===s,height:"top"===s||"bottom"===s||"footer"===s},negotiations:{width:[],height:[]},remove:function(){for(var t in n._areas)n._areas[t]===i&&n.free(t)},negotiateWidth:function(t){if(i.canNegotiate.width){var e=o(t);r(i.negotiations.width,e)||(i.negotiations.width=e,n.recalculate())}},negotiateHeight:function(t){if(i.canNegotiate.height){var e=o(t);r(i.negotiations.height,e)||(i.negotiations.height=e,n.recalculate())}},requestFullscreen:function(){
n._fullscreenArea||("right"!==s&&"center"!==s||(n._fullscreenArea=s),"center"===s&&n._bridge.requestFullscreen(),n._updateFullscreen())},exitFullscreen:function(){s===n._fullscreenArea&&(n._fullscreenArea=void 0,"center"===s&&n._bridge.exitFullscreen(),n._updateFullscreen())},width:new c.a,height:new c.a,availWidth:new c.a,availHeight:new c.a,alive:new c.a(!0),body:new c.a(e),visible:new c.a(!0),fullscreen:new c.a(!0),rdState:new h.ResizerDetacherState},i.rdState.pushOwner(i),this._areas[s]=i,i.rdState.owner.subscribe(function(t){var e,o,r,a=i.body.value();if(t!==i)a.empty().detach();else{for(e=null,o=n._availableAreas.indexOf(s);o--;)if(r=n._availableAreas[o],n._affectsLayout(r)){e=n._areas[r].body.value();break}e?a.insertAfter(e):a.appendTo(n._$body)}n.recalculate()},{callWithLast:!0}),i.rdState.bridge()},t.prototype.free=function(t){var e=this._areas[t];e&&(this._areas[t]=void 0,$(e.body.value()).remove(),e.alive.setValue(!1))},t.prototype.recalculate=function(){var t,e,i,o,r,s,a,l,c,h,u,p,_,f={};for(this._recalcSingleRunToken=f,t={width:this._width.value(),height:this._height.value()},e=0;e<this._availableAreas.length;e++)if(i=this._availableAreas[e],(o=this._areas[i])&&this._affectsLayout(i)){for("center"===i?(r=0,this._affectsLayout("left")&&(r+=this._areas.left.width.value()),s=0,this._affectsLayout("top")&&(s+=this._areas.top.height.value()),o.body.value().css({left:r,top:s})):"top"!==i&&"bottom"!==i&&"footer"!==i||(r=0,this._affectsLayout("left")&&(r+=this._areas.left.width.value()),o.body.value().css({left:r})),a=void 0,a=o.canNegotiate.width&&!o.canNegotiate.height?["height","width"]:["width","height"],l=0;l<2;l++){if(c=a[l],h=void 0,u=t[c],this._fullscreenArea===i)h=u;else{if("bottom"===i&&"height"===c&&(u-=5),d||"right"!==i&&"dompanel"!==i||"width"!==c||(u-=300),"width"===c?o.availWidth.setValue(u):"height"===c&&o.availHeight.setValue(u),f!==this._recalcSingleRunToken)return;o.canNegotiate[c]?(h=n(u,o.negotiations[c]),t[c]-=h):h=u}if(o.body.value().css(c,h),o[c].setValue(h),f!==this._recalcSingleRunToken)return}o.body.value().toggleClass("js-hidden",!1)}else o&&o.body.value().toggleClass("js-hidden",!0);this._affectsLayout("footer")&&(o=this._areas.footer,p=this._height.value()-o.height.value(),this._affectsLayout("bottom")&&(p-=this._areas.bottom.height.value()),o.body.value().css({top:p})),this._affectsLayout("dompanel")&&(o=this._areas.dompanel,_=0,this._affectsLayout("right")&&(_+=this._areas.right.width.value()),o.body.value().css({right:_}))},t.prototype._affectsLayout=function(t){var e,i=this._areas[t];return!!i&&(i.rdState.owner.value()===i&&(this._fullscreenArea&&this._fullscreenArea!==t?s(t):!((this._width.value()<=567||this._height.value()<=450)&&(e=["center","top","left"],!e.includes(t)))))},t.prototype._updateVisibility=function(){var t,e,i,n=this._bridge.visible.value();for(t=0;t<this._availableAreas.length;t++)e=this._availableAreas[t],(i=this._areas[e])&&(n&&this._affectsLayout(e)?i.visible.setValue(!0):i.visible.setValue(!1))},t.prototype._onParentFullscreenChange=function(){
this._bridge.fullscreen.value()||(this._fullscreenArea=void 0,this._updateFullscreen())},t.prototype._updateFullscreen=function(){var t,e,i,n=void 0!==this._fullscreenArea;for(t=0;t<this._availableAreas.length;t++)e=this._availableAreas[t],(i=this._areas[e])&&(e!==this._fullscreenArea?i.body.value().toggleClass("js-hidden",n&&!s(e)):i.fullscreen.setValue(!0));this._updateVisibility(),this.recalculate()},t.prototype._createDOM=function(t){var e=$("<div>").addClass("layout__area--"+t).css("position","absolute");return"bottom"===t?e.css("bottom",0):e.css("top",0),"right"===t||"dompanel"===t?e.css("right",0):e.css("left",0),e},t}()},function(t,e,i){"use strict";(function(t,e){function n(e,i){this.options=$.extend({throttleTimeout:125},i),this._connected=!1,this._symbol_data={},this._subscriptions={},this._delayed_subscriptions=[],this.fieldsSent=new $.Deferred,this.onConnect=new t,this.onDisconnect=new t,this._quoteApi=new o(window.ChartApiInstance),this._type=e||"full",this.fieldsSent=new $.Deferred,this._delayUpdateFastSymbols=s(this._updateFastSymbols,250),this._throttledSymbolData={},this._formatterValuesCache={},this._waitingForFormatters={},this._snapshotValuesCache={},this._waitingForSnapshot={},this.connect()}var o,r=i(13).PriceFormatter,s=i(123).debounce,a=i(241),l=i(160),c=i(22);o=i(577),n.prototype.destroy=function(){this._quoteApi.destroy(),this._quoteApi=null,this._connected=!1,this.onDisconnect.fire()},n.prototype.typeFields={},n.prototype.typeFields.simple=["ch","chp","current_session","description","local_description","language","exchange","fractional","is_tradable","lp","minmov","minmove2","original_name","pricescale","pro_name","short_name","type","update_mode","volume"],n.prototype.typeFields.simpleDetailed=[].concat(n.prototype.typeFields.simple,["ask","bid","fundamentals","high_price","is_tradable","low_price","open_price","prev_close_price","rch","rchp","rtc","status","basic_eps_net_income","beta_1_year","earnings_per_share_basic_ttm","industry","market_cap_basic","price_earnings_ttm","sector","volume","dividends_yield"]),n.prototype.typeFields.full=[],n.prototype.connect=function(t){this._quoteApi.connect(this.quoteHandler.bind(this))},n.prototype.quoteHandler=function(t){var e=t.method,i=t.params;switch(e){case"connected":this._connected||(this._connected=!0,this.onConnected());break;case"quote_list_fields":break;case"quote_symbol_data":this._connected&&this.onSymbolData(i[0]);break;case"disconnected":this._connected&&(this._connected=!1,this.onDisconnect.fire())}},n.prototype.onConnected=function(){this.setFields();var t=Object.keys(this._symbol_data);t.length&&this._quoteApi.quoteAddSymbols(t,{forcePermission:!0}),this._delayed_subscriptions.forEach(function(t){this.subscribe.apply(this,t)},this),this._delayed_subscriptions=[],this.onConnect.fire()},n.prototype.setFields=function(){var t=n.prototype.typeFields[this._type];t&&t.length&&this._quoteApi.quoteSetFields(t),this.fieldsSent.resolve()},n.prototype.onSymbolData=function(t){var e=t.symbolname,i=this._throttledSymbolData[e]
;i||(i=this._throttledSymbolData[e]={fnDispatch:a(this.dipatchSymbolData.bind(this),this.options.throttleTimeout)}),i.cache?$.extend(!0,i.cache,t):i.cache=t,i.fnDispatch(e)},n.prototype._parseUpdateMode=function(t){var e=t.update_mode;e&&(e=e.match(/(delayed_streaming){1}(?:_([\d]+))?/))&&e[1]&&(e[2]&&(t.update_mode_seconds=+e[2]),t.update_mode=e[1])},n.prototype.dipatchSymbolData=function(t){var e,i,n=this._symbol_data[t],o=this._throttledSymbolData[t].cache;if(delete this._throttledSymbolData[t].cache,this._symbol_data[t]){$.extend(!0,n,o),n.values&&this._parseUpdateMode(n.values);for(e in this._subscriptions)i=this._subscriptions[e],i[t]&&i[t].forEach(function(t){t(n,o)})}},n.prototype.subscribe=function(t,e,i){var n,o;if(!this._connected)return void this._delayed_subscriptions.push(arguments);this._subscriptions[t]=this._subscriptions[t]||{},n=this._subscriptions[t],e=[].concat(e),o=[],e.forEach(function(t){this._symbol_data[t]?n&&n[t]||this._symbol_data[t].subscribers_count++:(this._symbol_data[t]={subscribers_count:1},o.push(t)),n[t]=n[t]||[],n[t].push(i),n[t].fast=!0,this._symbol_data[t]&&this._symbol_data[t].values&&i(this._symbol_data[t],this._symbol_data[t])},this),o.length&&(this._quoteApi.quoteAddSymbols(o,{forcePermission:!0}),this._delayUpdateFastSymbols())},n.prototype.unsubscribe=function(t,e,i){var n,o=this._subscriptions[t];o&&(o[e]&&i?(n=o[e].indexOf(i),~n&&o[e].splice(n,1),o[e].length||delete o[e]):delete o[e]),o&&0===Object.keys(o).length&&delete this._subscriptions[t],this._symbol_data.hasOwnProperty(e)&&(o&&!o[e]&&this._symbol_data[e].subscribers_count--,this._symbol_data[e].subscribers_count||(delete this._symbol_data[e],this._quoteApi.quoteRemoveSymbols([e]),this._delayUpdateFastSymbols()))},n.prototype.setFastSymbols=function(t,e){var i,n;if(this._subscriptions[t]){i=this._subscriptions[t];for(n in i)i[n].fast=-1!==e.indexOf(n)}this._delayUpdateFastSymbols()},n.prototype._updateFastSymbols=function(){if(this._connected){var t=this._fastSymbols();0===t.length?this._quoteApi.quoteHibernateAll():this._quoteApi.quoteFastSymbols(t)}},n.prototype._delayUpdateFastSymbols=n.prototype._updateFastSymbols,n.prototype._fastSymbols=function(){var t,e,i,n=[];for(t in this._subscriptions){e=this._subscriptions[t];for(i in e)e[i].fast&&n.push(i)}return n=l(n)},n.prototype.formatter=function(t,e){function i(t){var i=e&&!t.fractional?1:t.minmov;return new r(t.pricescale,i,t.fractional,t.minmove2)}function n(t){return t&&null!=t.pricescale&&null!=t.minmov}var o,s=this;return this._waitingForFormatters[t]?this._waitingForFormatters[t]:(o=new Promise(function(e,o){if(s._formatterValuesCache[t])e(i(s._formatterValuesCache[t]));else{var r=c.guid();s.subscribe(r,[t],function(a){a.error&&(s._waitingForFormatters[t]=null,o(a.error)),n(a.values)&&(s._waitingForFormatters[t]=null,s._formatterValuesCache[t]=a.values,e(i(a.values)),s.unsubscribe(r,t))})}}),this._waitingForFormatters[t]=o,o)},n.prototype.snapshot=function(t){var e,i=this
;return this._waitingForSnapshot[t]?this._waitingForSnapshot[t]:(e=new Promise(function(e,n){if(i._snapshotValuesCache[t])e(i._snapshotValuesCache[t]);else{var o=c.guid();i.subscribe(o,[t],function(r){r.error&&(i._waitingForSnapshot[t]=null,n(r.error));var s=r.values;s&&s.minmov&&s.pricescale&&s.description&&(i._waitingForSnapshot[t]=null,i._snapshotValuesCache[t]=s,e(s),i.unsubscribe(o,t))})}}),this._waitingForSnapshot[t]=e,e)},TradingView.QuoteSessionMultiplexer=n,void 0!==e&&e&&e.exports&&(e.exports=n)}).call(e,i(8),i(50)(t))},function(t,e,i){"use strict";(function(t){function e(t){this._chartApi=t,this._sessionid="qs_"+n(),this._sessionstarted=!1}var n=i(22).randomHash;e.prototype.destroy=function(){this._sessionstarted&&(this._chartApi.quoteDeleteSession(this._sessionid),this._sessionid=null,this._sessionstarted=!1)},e.prototype.connected=function(){return this._chartApi.connected()},e.prototype.connect=function(t){this._globalHandler=t,this._chartApi.createSession(this._sessionid,this),this._chartApi.connect()},e.prototype.disconnect=function(){this._chartApi.disconnect()},e.prototype.quoteAddSymbols=function(t,e){t=[].concat(t),e&&e.forcePermission&&(t=t.concat({flags:["force_permission"]})),this._chartApi.quoteAddSymbols(this._sessionid,t)},e.prototype.quoteRemoveSymbols=function(t){this._chartApi.quoteRemoveSymbols(this._sessionid,t)},e.prototype.quoteFastSymbols=function(t){this._chartApi.quoteFastSymbols(this._sessionid,t)},e.prototype.quoteSetFields=function(t){this._chartApi.quoteSetFields(this._sessionid,t)},e.prototype.onMessage=function(t){switch(t.method){case"connected":this._sessionstarted||(this._chartApi.quoteCreateSession(this._sessionid),this._sessionstarted=!0);break;case"disconnected":this._sessionstarted=!1}this._globalHandler(t)},e.prototype.quoteHibernateAll=function(t){this._chartApi.quoteHibernateAll(this._sessionid)},TradingView.QuoteSession=e,void 0!==t&&t&&t.exports&&(t.exports=e)}).call(e,i(50)(t))},function(t,e,i){"use strict";var n,o,r,s,a,l,c;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"BottomWidgetbarBootloader",function(){return c}),n=i(0),o=i(402),r=i(26),s=i.n(r),a=i(111),l=i(53),c=function(t){function e(e){var i,n,r=t.call(this)||this;return r._opts=e,i=s.a.getJSON(o.settingsKey,{}),n=i.height||(e.defaultActiveWidget?o.defaultHeight:0),(r._opts.widgets.includes(i.activeWidget)||e.defaultActiveWidget)&&(r._opts.resizerBridge.negotiateHeight(n),r._opts.resizerBridge.body.value()[0].appendChild(Object(a.a)(["border-left","border-right"],["top-left-radius","top-right-radius"]))),r}return n.c(e,t),e.prototype._startLoading=function(){var t=this;return Promise.all([this._loadBottomWidgetbar(),this._opts.configBootloader.load()]).then(function(e){var i=e[0],n=e[1];return new i({resizerBridge:t._opts.resizerBridge,chartWidgetCollection:t._opts.chartWidgetCollection,backtestingStrategyDispatcher:t._opts.backtestingStrategyDispatcher,widgets:t._opts.widgets,defaultActiveWidget:t._opts.defaultActiveWidget,config:n})})},e.prototype._loadBottomWidgetbar=function(){
return i.e(29).then(i.bind(null,823)).then(function(t){return t.Bottomwidgetbar})},e}(l.a)},function(t,e,i){"use strict";var n,o,r;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"TerminalConfigSetBootloder",function(){return r}),n=i(0),o=i(53),r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.c(e,t),e.prototype._startLoading=function(){return i.e(26).then(i.bind(null,824)).then(function(t){return t.getTerminalConfigSet()})},e}(o.a)},function(t,e,i){var n=function(){return this}()||Function("return this")(),o=n.regeneratorRuntime&&Object.getOwnPropertyNames(n).indexOf("regeneratorRuntime")>=0,r=o&&n.regeneratorRuntime;if(n.regeneratorRuntime=void 0,t.exports=i(581),o)n.regeneratorRuntime=r;else try{delete n.regeneratorRuntime}catch(t){n.regeneratorRuntime=void 0}},function(t,e){!function(e){"use strict";function i(t,e,i,n){var r=e&&e.prototype instanceof o?e:o,s=Object.create(r.prototype),a=new p(n||[]);return s._invoke=c(t,i,a),s}function n(t,e,i){try{return{type:"normal",arg:t.call(e,i)}}catch(t){return{type:"throw",arg:t}}}function o(){}function r(){}function s(){}function a(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function l(t){function e(i,o,r,s){var a,l,c=n(t[i],t,o);if("throw"!==c.type)return a=c.arg,l=a.value,l&&"object"==typeof l&&k.call(l,"__await")?Promise.resolve(l.__await).then(function(t){e("next",t,r,s)},function(t){e("throw",t,r,s)}):Promise.resolve(l).then(function(t){a.value=t,r(a)},s);s(c.arg)}function i(t,i){function n(){return new Promise(function(n,o){e(t,i,n,o)})}return o=o?o.then(n,n):n()}var o;this._invoke=i}function c(t,e,i){var o=g;return function(r,s){var a,l,c;if(o===v)throw Error("Generator is already running");if(o===b){if("throw"===r)throw s;return f()}for(i.method=r,i.arg=s;;){if((a=i.delegate)&&(l=h(a,i))){if(l===S)continue;return l}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(o===g)throw o=b,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);if(o=v,c=n(t,e,i),"normal"===c.type){if(o=i.done?b:y,c.arg===S)continue;return{value:c.arg,done:i.done}}"throw"===c.type&&(o=b,i.method="throw",i.arg=c.arg)}}}function h(t,e){var i,o,r=t.iterator[e.method];if(r===m){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=m,h(t,e),"throw"===e.method))return S;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return S}return i=n(r,t.iterator,e.arg),"throw"===i.type?(e.method="throw",e.arg=i.arg,e.delegate=null,S):(o=i.arg)?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=m),e.delegate=null,S):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,S)}function u(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function d(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function p(t){this.tryEntries=[{tryLoc:"root"}],
t.forEach(u,this),this.reset(!0)}function _(t){var e,i,n;if(t){if(e=t[I])return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return i=-1,n=function e(){for(;++i<t.length;)if(k.call(t,i))return e.value=t[i],e.done=!1,e;return e.value=m,e.done=!0,e},n.next=n}return{next:f}}function f(){return{value:m,done:!0}}var m,g,y,v,b,S,w,P,T,C,x=Object.prototype,k=x.hasOwnProperty,L="function"==typeof Symbol?Symbol:{},I=L.iterator||"@@iterator",A=L.asyncIterator||"@@asyncIterator",E=L.toStringTag||"@@toStringTag",M="object"==typeof t,O=e.regeneratorRuntime;if(O)return void(M&&(t.exports=O));O=e.regeneratorRuntime=M?t.exports:{},O.wrap=i,g="suspendedStart",y="suspendedYield",v="executing",b="completed",S={},w={},w[I]=function(){return this},P=Object.getPrototypeOf,T=P&&P(P(_([]))),T&&T!==x&&k.call(T,I)&&(w=T),C=s.prototype=o.prototype=Object.create(w),r.prototype=C.constructor=s,s.constructor=r,s[E]=r.displayName="GeneratorFunction",O.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===r||"GeneratorFunction"===(e.displayName||e.name))},O.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,E in t||(t[E]="GeneratorFunction")),t.prototype=Object.create(C),t},O.awrap=function(t){return{__await:t}},a(l.prototype),l.prototype[A]=function(){return this},O.AsyncIterator=l,O.async=function(t,e,n,o){var r=new l(i(t,e,n,o));return O.isGeneratorFunction(e)?r:r.next().then(function(t){return t.done?t.value:r.next()})},a(C),C[E]="Generator",C[I]=function(){return this},C.toString=function(){return"[object Generator]"},O.keys=function(t){var e,i=[];for(e in t)i.push(e);return i.reverse(),function e(){for(;i.length;){var n=i.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},O.values=_,p.prototype={constructor:p,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=m,this.done=!1,this.delegate=null,this.method="next",this.arg=m,this.tryEntries.forEach(d),!t)for(var e in this)"t"===e.charAt(0)&&k.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=m)},stop:function(){var t,e;if(this.done=!0,t=this.tryEntries[0],e=t.completion,"throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){function e(e,n){return r.type="throw",r.arg=t,i.next=e,n&&(i.method="next",i.arg=m),!!n}var i,n,o,r,s,a;if(this.done)throw t;for(i=this,n=this.tryEntries.length-1;n>=0;--n){if(o=this.tryEntries[n],r=o.completion,"root"===o.tryLoc)return e("end");if(o.tryLoc<=this.prev)if(s=k.call(o,"catchLoc"),a=k.call(o,"finallyLoc"),s&&a){if(this.prev<o.catchLoc)return e(o.catchLoc,!0);if(this.prev<o.finallyLoc)return e(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return e(o.catchLoc,!0)}else{if(!a)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return e(o.finallyLoc)}}},abrupt:function(t,e){var i,n,o,r;for(i=this.tryEntries.length-1;i>=0;--i)if(n=this.tryEntries[i],n.tryLoc<=this.prev&&k.call(n,"finallyLoc")&&this.prev<n.finallyLoc){o=n;break}
return o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null),r=o?o.completion:{},r.type=t,r.arg=e,o?(this.method="next",this.next=o.finallyLoc,S):this.complete(r)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),S},finish:function(t){var e,i;for(e=this.tryEntries.length-1;e>=0;--e)if(i=this.tryEntries[e],i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),d(i),S},catch:function(t){var e,i,n,o;for(e=this.tryEntries.length-1;e>=0;--e)if(i=this.tryEntries[e],i.tryLoc===t)return n=i.completion,"throw"===n.type&&(o=n.arg,d(i)),o;throw Error("illegal catch attempt")},delegateYield:function(t,e,i){return this.delegate={iterator:_(t),resultName:e,nextLoc:i},"next"===this.method&&(this.arg=m),S}}}(function(){return this}()||Function("return this")())},function(t,e,i){"use strict";function n(t){return null==t._parentMenu?null:o(t._parentMenu)}function o(t){return null==t._parentMenuItem?t:n(t._parentMenuItem)}function r(t,e){this.action=t,this._parentMenu=e}function s(t,e){this.action=t,this._parentMenu=e}var a,l,c;i(97),a=i(305),l=i(244),c=i(36).IS_RTL,r.prototype._createIconTag=function(){var t=this._iconTagAttributes();return this.jqIcon=l.create(a.ICON_CELL_TAG,t),this.jqIcon.addClass("context-menu"),this.jqIcon},r.prototype._createDeleteButton=function(){var t,e,i;if(!this.action.deleteButton)return null;t=this,e=this.action.deleteButton.action,i=l.create("span",{class:"context-menu-delete-button"}),e&&i.click(function(){return e.call(t),!1}),this.jqSubmenu.addClass("delete-spacer"),this.jqSubmenu.append(i)},r.prototype._createTextTag=function(){var t=this._textTagAttributes();return this.jqText=l.create(a.TEXT_CELL_TAG,t),this.jqIcon.addClass("context-menu"),this.jqText},r.prototype._createRightTag=function(){var t=this._rightTagAttributes();return this.jqRight=l.create(a.RIGHT_CELL_TAG,t),this.jqIcon.addClass("context-menu"),this.jqRight},r.prototype._createSubmenuTag=function(){var t=this._submenuTagAttributes();return this.jqSubmenu=l.create(a.SUBMENU_CELL_TAG,t),this.jqIcon.addClass("context-menu"),this.jqSubmenu},r.prototype._iconTagAttributes=function(){var t={},e=[];return this.action&&(this.action.icon?(e.push("icon"),e.push(this.action.icon.replace(/\./,"_"))):this.action.checkable?(e.push("icon"),this.action.checked?(e.push("checked-icon"),t.html=i(224)):e.push("unchecked-icon")):e.push("spacer")),t.class=e.join(" "),t},r.prototype._textTagAttributes=function(){return{class:"text",html:this.action?this.action.text:""}},r.prototype.highlight=function(t){t?(this.jqRow.addClass("context-menu-hover"),this.jqIcon.addClass("context-menu-hover")):(this.jqRow.removeClass("context-menu-hover"),this.jqIcon.removeClass("context-menu-hover")),this.action&&this.action.hasSubActions()&&(t?this.jqSubmenu.addClass("expanded"):this.jqSubmenu.removeClass("expanded"))},r.prototype._rightTagAttributes=function(){
var t={},e=["right"];return this.action&&this.action.shortcut&&(e.push("shortcut"),t.class=e.join(" "),t.html=this.action.shortcut),t},r.prototype._submenuTagAttributes=function(){var t={};return this.action&&this.action.hasSubActions()?t.class="submenu-arrow":t.class="context-menu spacer",t},r.prototype.render=function(){var t,e;return this._createRow(),t=this._createIconTag(),this.jqRow.append(c?this._createSubmenuTag():t),this.jqRow.append(this._createTextTag()),this.jqRow.append(this._createRightTag()),this.jqRow.append(c?t:this._createSubmenuTag()),this._createDeleteButton(),this.appendCallback(),e=this,this.jqRow.mouseenter(function(t){e.showSubmenu(t),e.highlight(!0),e._parentMenu&&e._parentMenu._parentMenuItem&&e._parentMenu._parentMenuItem.highlight(!0)}),this.jqRow.mouseleave(function(){e.highlight(!1)}),this.jqRow},r.prototype._createRow=function(){var t,e,i=this._rowTagAttributes();this.jqRow=l.create(a.ITEM_ROW_TAG,i),this.jqRow.addClass("context-menu"),t=this,this.action&&!this.action.hasSubActions()&&(e=function(t){t.destroy(),t._parentMenuItem&&e(t._parentMenuItem._parentMenu)},this.jqRow.click(function(i){e(t._parentMenu)}))},r.prototype.showSubmenu=function(t){var e,n;this._parentMenu.closeOtherSubmenus(this),this.action&&!this.action.hasSubActions()||(this._menu||(e=i(84),n={},this._menu=e.createMenu(this.action.subActions,n,this)),t.pageX=this._parentMenu.jqMenu.width()-2,t.pageY=this.jqSubmenu.offset().top-this._parentMenu.jqMenu.offset().top-1,this._menu.show(t,this._parentMenu.jqMenu))},r.prototype._rowTagAttributes=function(){var t=[];return this.action&&(!1===this.action.enabled&&t.push("disabled"),!1===this.action.visible&&t.push("hidden"),this.action.font&&t.push("font_"+this.action.font),this.action.hasSubActions()&&t.push("has_submenu"),this.action.htmlclass&&t.push(this.action.htmlclass)),{class:t.join(" ")}},r.prototype.appendCallback=function(){var t=this;this.jqRow.click(function(e){t.action.enabled&&t.action.executeCallback(e)})},r.prototype.getTopLevelMenu=function(){return n(this)},s.prototype.render=function(t){this._createRow();var e=this;return this.action.deferred.then(function(n){var o,r,s,a=i(304);for(o in n)r=n[o],s=e._parentMenu.addItem(r),a.renderItem(t,s)}).always(function(){e.jqRow.hide()}),this.jqRow},s.prototype._createIconTag=function(){var t=this._iconTagAttributes();return this.jqIcon=l.create(a.ICON_CELL_TAG,t),this.jqIcon.addClass("context-menu"),this.jqIcon},s.prototype._createRow=function(){var t=this._rowTagAttributes();this.jqRow=l.create(a.ITEM_ROW_TAG,t),this.jqRow.append(this._createIconTag()),this.jqRow.addClass("context-menu")},s.prototype._rowTagAttributes=function(){var t=[];return this.action&&t.push("spinner"),{class:t.join(" ")}},s.prototype.highlight=function(t){},s.prototype._iconTagAttributes=function(){var t={},e=[];return e.push("spacer"),t.class=e.join(" "),t.colspan="10",t},e.Item=r,e.ItemPlaceholder=s},function(t,e,i){"use strict";function n(t){var e,i;return t.getClientRects().length?(e=t.getBoundingClientRect(),
"fixed"===getComputedStyle(t).position?{top:e.top,left:e.left}:(i=t.ownerDocument.defaultView,{top:e.top+i.pageYOffset,left:e.left+i.pageXOffset})):{top:0,left:0}}function o(t,e){var i,o,a,l,c,h,u=getComputedStyle(t),d=u.position;"static"===d&&(t.style.position="relative"),i=n(t),o=u.top,a=u.left,l=0,c=0,"absolute"!==d&&"fixed"!==d||"auto"!==o&&"auto"!==a?(o&&(l=parseFloat(o)),a&&(c=parseFloat(a))):(h=r(t),l=h.top,c=h.left),Object(s.isNumber)(e.top)&&(t.style.top=e.top-i.top+l+"px"),Object(s.isNumber)(e.left)&&(t.style.left=e.left-i.left+c+"px")}function r(t){var e=t.ownerDocument,i=t.offsetParent||e.documentElement,o=n(t),r=n(i);return{top:o.top-r.top,left:o.left-r.left}}var s;Object.defineProperty(e,"__esModule",{value:!0}),e.getOffset=n,e.setOffset=o,e.getPosition=r,s=i(79),i.n(s)},function(t,e,i){"use strict";var n,o,r,s;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"FooterWidgetBootloader",function(){return s}),n=i(0),o=i(404),r=i(53),s=function(t){function e(e){var i=t.call(this)||this;return i._opts=e,i._opts.resizerBridge.negotiateHeight(o.footerWidgetHeight),i}return n.c(e,t),e.prototype._startLoading=function(){var t=this;return Promise.all([this._opts.bottomWidgetbarBootloader.load(),this._opts.domePanelBootloader?this._opts.domePanelBootloader.load():Promise.resolve(void 0),this._loadFooterWidget()]).then(function(e){var i=e[0],n=e[1];return new(0,e[2])({resizerBridge:t._opts.resizerBridge,chartWidgetCollection:t._opts.chartWidgetCollection,domePanel:n,bottomWidgetBar:i,hidden:t._opts.hidden})})},e.prototype._loadFooterWidget=function(){return i.e(28).then(i.bind(null,825)).then(function(t){return t.Footerwidget})},e}(r.a)},function(t,e,i){"use strict";var n,o,r,s,a,l,c,h;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"DomePanelBootloader",function(){return h}),n=i(0),o=i(405),r=i(26),s=i.n(r),a=i(111),l=i(53),c=i(4),i.n(c),h=function(t){function e(e){var i,n=t.call(this)||this;return n._opts=e,i=s.a.getBool(o.SETTINGS_KEY,c.enabled("show_dom_first_time")),i&&(n._opts.resizerBridge.negotiateWidth(o.width),n._opts.resizerBridge.body.value()[0].appendChild(Object(a.a)(["border-right"]))),n}return n.c(e,t),e.prototype._startLoading=function(){var t=this;return i.e(13).then(i.bind(null,826)).then(function(e){return new e.DomePanel({resizerBridge:t._opts.resizerBridge})})},e}(l.a)},function(t,e,i){"use strict";var n,o,r,s,a,l,c,h;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"WidgetbarBootloader",function(){return h}),n=i(0),o=i(406),r=i(111),s=i(26),a=i.n(s),l=i(4),i.n(l),c=i(53),h=function(t){function e(e){var i=t.call(this)||this;return i._opts=e,i._opts.resizerBridge.negotiateWidth(i._calcWidgetBarWidth()),i._opts.resizerBridge.body.value()[0].appendChild(Object(r.a)()),i}return n.c(e,t),e.prototype._startLoading=function(){var t=this;return Promise.all([this._opts.domePanelBootloader?this._opts.domePanelBootloader.load():Promise.resolve(void 0),this._loadWidgetBar()]).then(function(e){var i=e[0];return new(0,e[1])({resizerBridge:t._opts.resizerBridge,
showCloseButton:t._opts.showCloseButton,showWizardFn:t._opts.showWizardFn,areShortcutsAvailable:t._opts.areShortcutsAvailable,chartWidgetCollection:t._opts.chartWidgetCollection,domPanel:i,settingsPrefix:t._opts.settingsPrefix,customization:t._opts.customization,widgetConfig:t._opts.widgetConfig})})},e.prototype._loadWidgetBar=function(){return i.e(14).then(i.bind(null,827)).then(function(t){return t.WidgetBar})},e.prototype._calcWidgetBarWidth=function(){var t=a.a.getJSON(this._opts.settingsPrefix+"."+o.layoutKeyName,{settings:Object(o.getDefaultState)()}),e=l.enabled("widgetbar_tabs")?o.tabsWidth:0;return t.settings.minimized?e:e+t.settings.width+o.borderWidth},e}(c.a)},function(t,e,i){"use strict";function n(t){var e=t.disconnectWarningMessage&&t.disconnectWarningMessage();return e?new Promise(function(t){Object(L.createConfirmDialog)({title:window.t("Disconnect Confirmation"),content:e,type:"modal",actions:[{name:"yes",type:"danger",text:window.t("Disconnect"),key:13},{name:"cancel",type:"default",text:window.t("Cancel"),method:"close"}]}).then(function(e){e.on("action:yes",function(e){e.close(),t(!0)}),e.on("action:cancel",function(e){e.close(),t(!1)}),e.open()})}):Promise.resolve(!0)}var o,r,s,a,l,c,h,u,d,p,_,f,m,g,y,v,b,S,w,P,T,C,x,k,L,I,A,E,M,O;Object.defineProperty(e,"__esModule",{value:!0}),o=i(0),r=i(588),s=i(79),a=i(6),l=i(306),c=i(384),h=i(309),u=i(8),d=i.n(u),p=i(5),_=i(192),f=Object(p.getLogger)("Trading.RealtimeProvider"),m=function(){function t(t){this._results={},this._getter=t}return t.prototype.get=function(t){return this._results[t]||(this._results[t]=this._getter(t)),this._results[t]},t}(),g=function(){function t(t,e,i,n,o){var r=this;this._stopped=!1,this._subscribed=!1,this._provider=null,this._formatters=null,this._symbol=t,this._type=o,this._callback=e,this._providersCache=i,this._formattersCache=n,"Realtime"===this._type?this._handler=function(t,i){r._stopped||e(t,i,r._formatters)}:this._handler=function(t,i){r._stopped||e(t,i)},this._start().catch(function(t){})}return t.prototype.symbol=function(){return this._symbol},t.prototype.type=function(){return this._type},t.prototype.callback=function(){return this._callback},t.prototype.destroy=function(){this._ensureNotStopped(),this._subscribed&&("Realtime"===this._type?Object(a.ensureNotNull)(this._provider).unsubscribeRealtime(this._symbol,this._handler):Object(a.ensureNotNull)(this._provider).unsubscribeDOME(this._symbol,this._handler)),this._stopped=!0},t.prototype._start=function(){return o.b(this,void 0,void 0,function(){var t,e;return o.d(this,function(i){switch(i.label){case 0:return t=this,[4,this._providersCache.get(this._symbol)];case 1:return t._provider=i.sent(),this._ensureNotStopped(),e=this,[4,this._formattersCache.get(this._symbol)];case 2:return e._formatters=i.sent(),Object(a.ensure)(this._formatters),this._ensureNotStopped(),this._subscribed=!0,"Realtime"===this._type?this._provider.subscribeRealtime(this._symbol,this._handler):this._provider.subscribeDOME(this._symbol,this._handler),[2]}})})},
t.prototype._ensureNotStopped=function(){Object(a.assert)(!this._stopped,"Should not be stopped")},t}(),y=function(){function t(t,e,i,n){this.onStatusChanged=new d.a,this._subscriptions=[],this._currentBroker=null,this._activeBrokerGetter=t,this._suggestedQty=n,this._createCaches(),e.subscribe(this,this._onBrokerChanged),i.subscribe(this,this._onBrokerChanged),this._tvProvider=new h.a("RealtimeProvider"),this._onBrokerChanged()}return t.prototype.isTradable=function(t){return this._tradableCache.get(t)},t.prototype.subscribeRealtime=function(t,e){this._subscriptions.some(function(i){return i.symbol()===t&&i.callback()===e&&"Realtime"===i.type()})||this._subscriptions.push(new g(t,e,this._providersCache,this._formattersCache,"Realtime"))},t.prototype.unsubscribeRealtime=function(t,e){var i,n=this._subscriptions.findIndex(function(i){return i.symbol()===t&&i.callback()===e&&"Realtime"===i.type()});if(-1===n)return void f.logWarn("Subscription not found");i=this._subscriptions[n],i.destroy(),this._subscriptions.splice(n,1)},t.prototype.subscribeDOME=function(t,e){this._subscriptions.some(function(i){return i.symbol()===t&&i.callback()===e&&"Dome"===i.type()})||this._subscriptions.push(new g(t,e,this._providersCache,this._formattersCache,"Dome"))},t.prototype.unsubscribeDOME=function(t,e){var i,n=this._subscriptions.findIndex(function(i){return i.symbol()===t&&i.callback()===e&&"Dome"===i.type()});if(-1===n)return void f.logWarn("Subscription not found");i=this._subscriptions[n],i.destroy(),this._subscriptions.splice(n,1)},t.prototype.formatter=function(t){return this._formattersCache.get(t).then(function(t){return t.formatter})},t.prototype.spreadFormatter=function(t){return this._formattersCache.get(t).then(function(t){return t.spreadFormatter})},t.prototype.quantityFormatter=function(t){return this._formattersCache.get(t).then(function(t){return t.quantityFormatter})},t.prototype.symbolInfo=function(t){var e,i=this;return t?this._providersCache.get(t).then(function(e){return e!==i._tvProvider?e.symbolInfo(t).then(function(e){return e||i._tvProvider.symbolInfo(t)}).catch(function(e){return i._tvProvider.symbolInfo(t)}):i._tvProvider.symbolInfo(t)}):(e={minTick:NaN,qty:{min:NaN,max:NaN,step:NaN},pipValue:NaN,pipSize:NaN,description:"no symbol"},Promise.resolve(e))},t.prototype.quotesSnapshot=function(t){return this._providersCache.get(t).then(function(e){return e.quotesSnapshot(t)})},t.prototype.activeBroker=function(t){return null!==this._currentBroker&&this._currentBroker!==this._tvProvider?this._currentBroker:null},t.prototype._isTradable=function(t){if(null===this._currentBroker||this._currentBroker===this._tvProvider)return Promise.resolve(!1);try{return Object(_.makeTimeLimited)(this._currentBroker.isTradable(t),6e4,"isTradable Promise Timeout")}catch(t){return Promise.resolve(!1)}},t.prototype._haveRealtime=function(t){return this._tradableCache.get(t)||Promise.resolve(null===this._currentBroker)},t.prototype._onBrokerChanged=function(){
var t,e=this,i=this._activeBrokerGetter(),n=this._currentBroker,o=i&&1===i.connectionStatus()?i:null;n!==o&&(this._createCaches(),t=this._subscriptions.map(function(t){return{symbol:t.symbol(),callback:t.callback(),type:t.type()}}),this._unsubscribeAll(),this._currentBroker=o,this._subscribeAll(t),this._allSymbols().forEach(function(t){e._suggestedQty.changed.fire(t)}),this.onStatusChanged.fire())},t.prototype._allSymbols=function(){var t=new Set;return this._subscriptions.forEach(function(e){return t.add(e.symbol())}),Array.from(t)},t.prototype._createCaches=function(){var t=this;this._providersCache=new m(function(e){return t._provider(e)}),this._tradableCache=new m(function(e){return t._isTradable(e)}),this._formattersCache=new m(function(e){return t._providersCache.get(e).then(function(t){return Promise.all([t.formatter(e),t.spreadFormatter(e),t.quantityFormatter(e)])}).then(function(t){return{formatter:t[0],spreadFormatter:t[1],quantityFormatter:t[2]}})})},t.prototype._provider=function(t){var e=this;return this._haveRealtime(t).then(function(t){return t&&e._currentBroker&&1===e._currentBroker.connectionStatus()?e._currentBroker:e._tvProvider})},t.prototype._unsubscribeAll=function(){this._subscriptions.forEach(function(t){t.destroy()}),this._subscriptions=[]},t.prototype._subscribeAll=function(t){var e=this;t.forEach(function(t){e._subscriptions.push(new g(t.symbol,t.callback,e._providersCache,e._formattersCache,t.type))})},t}(),v=i(194),b=function(t){function e(e){return t.call(this,e)||this}return o.c(e,t),e.prototype.trackOrderPlaced=function(){this._trackOrderEvent("Placed")},e.prototype.startService=function(){Object(a.ensure)(this.activeBroker()).orderUpdate.subscribe(this,this._orderUpdate),this._trackStat("Broker Connected")},e.prototype.stopService=function(){Object(a.ensure)(this.activeBroker()).orderUpdate.unsubscribe(this,this._orderUpdate)},e.prototype._orderUpdate=function(t,e){e||(5===t.status?this._trackOrderEvent("Rejected"):2===t.status?this._trackOrderEvent("Executed"):1===t.status&&this._trackOrderEvent("Canceled"))},e.prototype._trackOrderEvent=function(t){this._trackStat("Order "+t)},e.prototype._trackStat=function(t){if(window._kmq){var e=this.activeBroker();if(!e)throw Error("no active broker");"Paper"===e.metainfo().id||window._kmq.push(["record",t,{accType:e.currentAccountType(),broker:e.metainfo().id,login:e.currentAccount()}])}},e}(v.a),S=i(26),w=i(82),P=i(385),T=i(15),C=i.n(T),x=i(4),k=i(125),i(9),L=i(70),i.d(e,"Trading",function(){return O}),A=Object(p.getLogger)("Trading.Core"),I={},I[1]="Connected",I[2]="Connecting",I[3]="Disconnected",I[4]="Error",E=I,M={enabled:new C.a(!1),name:"alert/alarm_clock"},O=function(){function t(t){var e=this;this.accountType=new C.a,this.onBrokerChange=new d.a,this.onBrokerLoading=new d.a,this.onConnectionStatusChange=new d.a,this.onNewNotification=new d.a,this.onNeedSelectBroker=new d.a,this.onNotificationsChanged=new d.a,this.hideFloatingPanel=new C.a,this.domVisibility=new C.a,this.noConfirmEnabled=new C.a,
this.showOnlyRejectionNotifications=new C.a,this.showPricesWithZeroVolume=new C.a,this.orderExecutedSoundParams=M,this._activeBroker=null,this._offlineListener=this._offlineHandler.bind(this),this._onlineListener=this._onlineHandler.bind(this),this._notifications=[],this._account=null,this._realtimeProvider=new y(function(){return e.activeBroker()},this.onBrokerChange,this.onConnectionStatusChange,this.suggestedQty()),this.tradingStat=new b(this),t&&this._init(t)}return t.prototype.realtimeProvider=function(){return this._realtimeProvider},t.prototype.toggleTradingWidget=function(){return TradingView.bottomWidgetBar?TradingView.bottomWidgetBar.activateTradingTab():Promise.resolve()},t.prototype.showTradingProperties=function(){this._gui()&&this._gui().showTradingProperties()},t.prototype.availableBrokers=function(){return l.brokersList()},t.prototype.activeBroker=function(){return this._activeBroker},t.prototype.trackEvent=function(t,e,i){var n,o,r=t?"["+t+"] "+e:e;this._gui()&&(n=this._activeBroker?this._activeBroker.metainfo().id+" Trading":"Trading No Broker",o=this._activeBroker?this._activeBroker.currentAccountType():void 0,this._gui().trackEvent(n,r,i||o))},t.prototype.selectBrokerUI=function(t){var e=this;if(null==t)return void this.selectBroker(null);window.runOrSignIn(function(){e.selectBroker(t)},{source:"Trading select broker",sourceMeta:"Chart"})},t.prototype.selectBroker=function(t){this._selectBrokerInternal(t,!0)},t.prototype.registerChartWidget=function(t){this._gui().registerChartWidget(t,this)},t.prototype.unregisterChartWidget=function(t){this._gui().unregisterChartWidget(t)},t.prototype.pickDefaultBroker=function(){var t,e,i;this._activeBroker||(t=null,e=this.availableBrokers(),1===e.length?t=e[0].id:(i=S.getValue(c.settingsKeys.ACTIVE_BROKER))&&e.some(function(t){return t.id===i})&&(t=i),t&&this.selectBroker(t))},t.prototype.defaultContextMenuActions=function(t,e){var i=this,n=void 0===e?{}:e,o=n.onlyMainActions,r=void 0!==o&&o,s=n.gaOrigin,a=void 0===s?"Chart Context Menu":s;return this.suggestedQty().value(t.symbol).then(function(e){var n=[],o=+t.formattedValue||t.value||void 0,s=i.activeBroker(),l=s&&s.metainfo().configFlags||{},c=l.supportLimitOrders||null===s,h=l.supportStopOrders||null===s;return null!==t.value&&t.value<=t.last?(c&&n.push(i._makeSubAction(t,1,1,o,e)),h&&n.push(i._makeSubAction(t,-1,3,o,e))):null!==t.value&&t.value>=t.last&&(c&&n.push(i._makeSubAction(t,-1,1,o,e)),h&&n.push(i._makeSubAction(t,1,3,o,e))),r||(n.push({action:function(){i.trackEvent(a,"New Order"),i._checkAndPlaceOrder({limitPrice:o,qty:e,stopPrice:o,symbol:t.symbol},!1)},text:window.t("Create New Order..."),statName:"NewOrder"}),x.enabled("property_pages")&&(n.push({separator:!0}),n.push({action:function(){i.trackEvent(a,"Trading Properties"),i.showTradingProperties()},text:window.t("Trading Properties..."),statName:"Properties"}))),n})},t.prototype.defaultDropdownMenuActions=function(t){function e(t){return t.length&&t.push(r),t}function i(t){var e="https://www.tradingview.com/wiki/";switch(t){case"Paper":
return e+"Paper_Trading";case"FOREXCOM":return e+"FOREX.com";default:return e+t}}var r,s=this,a="Bottom Panel Dropdown",l=[],c=this.activeBroker(),h=t||{disconnect:!0,selectAnotherBroker:!x.enabled("trading_terminal"),showFloatingToolbar:!0,showDOM:x.enabled("dome_widget")&&c&&c.metainfo().configFlags.supportDOM,tradingProperties:!0,showHowToUse:!0};return x.enabled("property_pages")||(h.tradingProperties=!1),r={separator:!0},h.showFloatingToolbar&&l.push({action:function(){var t=s.hideFloatingPanel.value();s.trackEvent(a,"Show Floating Panel",t?"Check":"Uncheck"),s.hideFloatingPanel.setValue(!t)},checkable:!0,checked:!this.hideFloatingPanel.value(),text:window.t("Show Buy/Sell Panel")}),h.showDOM&&x.enabled("dome_widget")&&l.push({action:function(){var t=s.domVisibility.value();s.trackEvent(a,"Show DOM",t?"Check":"Uncheck"),s.domVisibility.setValue(!t)},checkable:!0,checked:this.domVisibility.value(),text:window.t("Show DOM")}),h.tradingProperties&&(e(l),l.push({action:function(){s.showTradingProperties(),s.trackEvent(a,"Trading Properties")},text:window.t("Trading Properties...")})),h.showHowToUse&&c&&l.push({action:function(){s.trackEvent(a,"How to use")},url:i(c.metainfo().id),target:"_blank",text:window.t("How to Use __brokerName__",{brokerName:c.metainfo().title}),externalLink:!0}),h.disconnect&&(e(l),l.push({action:function(){return o.b(s,void 0,void 0,function(){var t,e;return o.d(this,function(i){switch(i.label){case 0:return this.trackEvent(a,"Disconnect"),t=this.activeBroker(),e=t,e?[4,n(t)]:[3,2];case 1:e=i.sent(),i.label=2;case 2:return e&&(void 0!==t.metainfo().configFlags.authorizationType?t.disconnect():this.selectBroker(null)),[2]}})})},text:window.t("Disconnect")})),h.selectAnotherBroker&&(e(l),l.push({action:function(){return o.b(s,void 0,void 0,function(){var t,e;return o.d(this,function(i){switch(i.label){case 0:return t=this.activeBroker(),e=t,e?[4,n(t)]:[3,2];case 1:e=!i.sent(),i.label=2;case 2:return e?[2]:(this.selectBroker(null),this.trackEvent(a,"Select Broker"),[2])}})})},text:window.t("Select Another Broker")})),l},t.prototype.chartContextMenuActions=function(t,e){return(this._activeBroker&&1===this._activeBroker.connectionStatus()?this._activeBroker.chartContextMenuActions(t,e):this.defaultContextMenuActions(t,e)).then(function(t){return Object(w.convertActionDescriptionsToActions)(t)})},t.prototype.connectStatus=function(){return this._activeBroker?this._activeBroker.connectionStatus():3},t.prototype.bindShortcuts=function(){var t=this,e=function(e){return function(){var i=t._gui().proSymbol();t.suggestedQty().value(i).then(function(n){t.realtimeProvider().quotesSnapshot(i).then(function(o){var r=o.bid,s=o.ask,a={price:void 0!==r&&void 0!==s?(r+s)/2:NaN,qty:n,side:e,symbol:i,type:2},l=t.activeBroker();if(l){if(1!==l.connectionStatus())return void t.toggleTradingWidget();t.trackEvent("Shortcut",-1===e?"Sell":"Buy"),l.placeOrder(a,!0)}else t.toggleTradingWidget().then(function(){return t.onNeedSelectBroker.fire()})})})}},i={action:e(1),shortcut:"shift+b"},n={action:e(-1),
shortcut:"shift+s"};Object(w.convertActionDescriptionsToActions)([i,n])},t.prototype.suggestedQty=function(){var t,e=this;return this._suggestedQty||(t=new d.a,this._suggestedQty={changed:t,setValue:function(e,i){S.setValue(c.settingsKeys.QTY+e,i),t.fire(e)},value:function(t){return e.realtimeProvider().symbolInfo(t).then(function(e){var i=S.getValue(c.settingsKeys.QTY+t),n=void 0!==e.qty.default?e.qty.default:e.qty.min;return i?Object(s.alignTo)(Math.max(Math.min(e.qty.max,+i),e.qty.min),e.qty.step):n})}}),this._suggestedQty},t.prototype.formatter=function(t){return this.realtimeProvider().formatter(t)},t.prototype.showSuccessNotification=function(t,e,i){void 0===i&&(i=1e4),this.showOnlyRejectionNotifications.value()||this._showNotification(t,e,"success",i),x.enabled("show_trading_notifications_history")&&this._addNotificationRow(t,e,"success",i),this._log(t,e)},t.prototype.showErrorNotification=function(t,e,i){void 0===i&&(i=25e3),this._showNotification(t,e,"danger",i),x.enabled("show_trading_notifications_history")&&this._addNotificationRow(t,e,"danger",i),this._log(t,e)},t.prototype.getNotifications=function(){var t=this;return this._notifications.filter(function(e){return e.account===t._account&&e.broker===(t._activeBroker?t._activeBroker.metainfo().id:null)})},t.prototype._selectBrokerInternal=function(t,e){var i,n,o=this,r=this._activeBroker?this._activeBroker.metainfo().id:null;t!==r&&(this._activeBroker&&(this._activeBroker.connectionStatusUpdate.unsubscribe(this,this._connectionListener),e&&(this._activeBroker.disconnect(),this._activeBroker.destroy()),this._activeBroker=null,this._updateConnectionStatus(3,e)),null!=t?(i=function(t){o._activeBroker=t,S.setValue(c.settingsKeys.ACTIVE_BROKER,t.metainfo().id),o.onBrokerChange.fire(o._activeBroker),t.connectionStatusUpdate.subscribe(o,o._connectionListener),o._updateConnectionStatus(o.connectStatus())},n=l.createBrokerConnection(this,t),this.onBrokerLoading.fire({brokerId:t,promise:n}),n.then(i),n.catch(function(t){return A.logError(t)})):(e&&setTimeout(function(){return S.remove(c.settingsKeys.ACTIVE_BROKER)}),this.onBrokerChange.fire(null)))},t.prototype._gui=function(){return this._guiAccessor},t.prototype._addNotificationRow=function(t,e,i,n){var o={id:this._notifications.length,account:this._account,broker:this._activeBroker?this._activeBroker.metainfo().id:null,time:new Date,title:t,text:e,type:i};this._notifications.push(o),this.onNewNotification.fire(o)},t.prototype._init=function(t){var e,i,n=this;this._guiAccessor=t,this._guiAccessor.init(this),this._loadState(),S.onSync.subscribe(this,this._loadState),e=function(){n._save()},this.hideFloatingPanel.subscribe(e),this.domVisibility.subscribe(e),this.noConfirmEnabled.subscribe(e),this.showOnlyRejectionNotifications.subscribe(e),this.showPricesWithZeroVolume.subscribe(e),this.orderExecutedSoundParams.enabled.subscribe(e),window.addEventListener("offline",this._offlineListener),window.addEventListener("online",this._onlineListener),this._updateAccountIdBinded=this._updateAccountId.bind(this),
this.bindShortcuts(),i=function(){window.is_authenticated?n.pickDefaultBroker():n.activeBroker()&&n.selectBroker(null)},window.loginStateChange.subscribe(null,i),setTimeout(i)},t.prototype._offlineHandler=function(){this._selectBrokerInternal(null,!1),A.logNormal("The connection to the Internet was interrupted")},t.prototype._onlineHandler=function(){var t=S.getValue(c.settingsKeys.ACTIVE_BROKER);t&&(this._selectBrokerInternal(t,!1),A.logNormal("The connection to the Internet was restored"))},t.prototype._showNotification=function(t,e,i,n){this._gui()&&this._gui().showNotification(t,e,i,n)},t.prototype._connectionListener=function(){this._updateConnectionStatus(this.connectStatus())},t.prototype._updateConnectionStatus=function(t,e){if(void 0===e&&(e=!0),this.onConnectionStatusChange.fire(t),this._log("Connection status",E[t]),e){var i=this._activeBroker?this._activeBroker.metainfo().id:void 0;S.setValue(c.settingsKeys.ACTIVE_BROKER,i,{forceFlush:!0})}this._activeBroker&&(1===t?(this._info=this._activeBroker.accountManagerInfo(),this._info.account&&(this._account=this._info.account.value().id||this._info.account.value().name,this._info.account.subscribe(this._updateAccountIdBinded)),this._activeBroker.metainfo().configFlags.supportRealtimeDataCheck&&this._checkProvideRealtimeDataSubscription()):this._info&&this._info.account&&this._info.account.unsubscribe(this._updateAccountIdBinded))},t.prototype._checkProvideRealtimeDataSubscription=function(){return o.b(this,void 0,void 0,function(){var t,e,i,n,r,s,l;return o.d(this,function(o){switch(o.label){case 0:if(o.trys.push([0,3,,4]),t=Object(a.ensureNotNull)(this._activeBroker),1!==t.connectionStatus())throw Error("broker is not connected");return e=t.getRealtimeDataCheckParams?t.getRealtimeDataCheckParams():{},i={broker_id:t.metainfo().id,params:e},n={headers:{"Content-Type":"application/json"},method:"POST",credentials:"include",body:JSON.stringify(i)},[4,Object(k.fetch)("/trading/check-realtime/",n)];case 1:return r=o.sent(),[4,r.json()];case 2:if(s=o.sent(),"ok"===s.status)this._guiAccessor.reconnectChartApi(!0),this._log("Realtime data check","realtime data is enabled for the user.");else{if("skip"!==s.status)throw Error(s.message);this._log("Realtime data check","skip enable realtime data for the user - was already enabled.")}return[3,4];case 3:return l=o.sent(),this._log("Realtime data check failed",l.message),[3,4];case 4:return[2]}})})},t.prototype._updateAccountId=function(t){this._account=t.id,this.onNotificationsChanged.fire(this.getNotifications())},t.prototype._save=function(){S.setJSON(c.settingsKeys.PROPERTIES,{hideFloatingPanel:+!!this.hideFloatingPanel.value(),domVisibility:+!!this.domVisibility.value(),noConfirmEnabled:+!!this.noConfirmEnabled.value(),qweqrq:+!!this.showOnlyRejectionNotifications.value(),showPricesWithZeroVolume:+!!this.showPricesWithZeroVolume.value(),orderExecutedSoundParams:JSON.stringify({enabled:+!!this.orderExecutedSoundParams.enabled.value(),name:this.orderExecutedSoundParams.name})})},t.prototype._loadState=function(){
var t,e=S.getJSON(c.settingsKeys.PROPERTIES,{});this.hideFloatingPanel.setValue(!!e.hideFloatingPanel),this.domVisibility.setValue(e.hasOwnProperty("domVisibility")?!!e.domVisibility:x.enabled("show_dom_first_time")),this.noConfirmEnabled.setValue(!!e.noConfirmEnabled),this.showOnlyRejectionNotifications.setValue(!!e.qweqrq),e.hasOwnProperty("showPricesWithZeroVolume")?this.showPricesWithZeroVolume.setValue(!!e.showPricesWithZeroVolume):this.showPricesWithZeroVolume.setValue(!0),e.hasOwnProperty("orderExecutedSoundParams")&&(t=JSON.parse(e.orderExecutedSoundParams),this.orderExecutedSoundParams.enabled.setValue(!!t.enabled),this.orderExecutedSoundParams.name=t.name)},t.prototype._log=function(t,e){A.logNormal((this._activeBroker?this._activeBroker.metainfo().id+" Trading: ":"")+t+" - "+e)},t.prototype._checkAndPlaceOrder=function(t,e){var i=this,n=this.activeBroker();if(n){if(1!==n.connectionStatus())return void this.toggleTradingWidget();n.placeOrder(t,e)}else this.toggleTradingWidget().then(function(){return i.onNeedSelectBroker.fire()})},t.prototype._makeSubAction=function(t,e,i,n,o){var r=this,s=1===e?"Buy":"Sell",a=1===i?"Limit":"Stop",l=s+a,c={BuyLimit:window.t("Buy __symbol__ Limit __qty__ @ __value__",{symbol:t.displaySymbol,qty:Object(P.abbreviatedNumber)(o),value:t.formattedValue}),SellStop:window.t("Sell __symbol__ Stop __qty__ @ __value__",{symbol:t.displaySymbol,qty:Object(P.abbreviatedNumber)(o),value:t.formattedValue}),SellLimit:window.t("Sell __symbol__ Limit __qty__ @ __value__",{symbol:t.displaySymbol,qty:Object(P.abbreviatedNumber)(o),value:t.formattedValue}),BuyStop:window.t("Buy __symbol__ Stop __qty__ @ __value__",{symbol:t.displaySymbol,qty:Object(P.abbreviatedNumber)(o),value:t.formattedValue})};return{action:function(){var l,c;r.trackEvent("Chart Context Menu",s+" "+a),l=1===i?"limitPrice":"stopPrice",c={qty:o,side:e,symbol:t.symbol,type:i},c[l]=n,r._checkAndPlaceOrder(c,!0)},text:c[l],statName:l}},t}()},function(t,e,i){"use strict"},function(t,e,i){"use strict";function n(t){var e,i;if(t&&t.__esModule)return t;if(e={},null!=t)for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function o(t){return t&&t.__esModule?t:{default:t}}function r(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,i){function n(o,r){var s,a;try{s=e[o](r),a=s.value}catch(t){return void i(t)}if(!s.done)return Promise.resolve(a).then(function(t){n("next",t)},function(t){n("throw",t)});t(a)}return n("next")})}}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var a,l,c,h,u,d,p,_,f,m,g,y,v,b,S,w,P,T,C,x,k,L,I,A,E,M,O,D;Object.defineProperty(e,"__esModule",{value:!0}),e.BrokerConnectionAdapterHost=void 0,a=i(232),l=o(a),c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h=function(){function t(t,e){var i,n;for(i=0;i<e.length;i++)n=e[i],n.enumerable=n.enumerable||!1,
n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),u=i(82),d=n(u),p=i(118),_=i(590),f=i(591),m=i(592),g=i(593),y=i(8),v=o(y),b=i(15),S=o(b),w=i(26),P=o(w),T=i(5),C=i(33),x=n(C),k=i(68),L=i(193),I=i(12),A=i(307),E=i(44),M=i(13),O=function(){return new Promise(function(t){i.e(12).then(function(e){t(i(408))}.bind(null,i)).catch(i.oe)})},D=function(){return new Promise(function(t){i.e(15).then(function(e){t(i(409))}.bind(null,i)).catch(i.oe)})},e.BrokerConnectionAdapterHost=function(){function t(e,i){s(this,t),this._trading=e,this._adapter=null,this._orderUpdateTimes={},this._metainfo=i,this._setDefaultDropdownActionsBound=this._setDefaultDropdownActions.bind(this),this._defaultDropdownActions=!0,this.floatingTradingPanelVisibility().subscribe(this._setDefaultDropdownActionsBound),this.domVisibility().subscribe(this._setDefaultDropdownActionsBound),this._setDefaultDropdownActions()}return h(t,[{key:"getLogger",value:function(){return(0,T.getLogger)("Trading."+this._metainfo.id)}},{key:"translate",value:function(t){return $.t(t)}},{key:"setBrokerConnectionAdapter",value:function(t){this._adapter=t}},{key:"showOrderDialog",value:function(){function t(t,i,n,o){return e.apply(this,arguments)}var e=r(l.default.mark(function t(e,i,n,o){var r,s;return l.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O();case 2:return r=t.sent,s=r.Ticket,t.abrupt("return",s.get(this._trading).open(e,i,n,o));case 5:case"end":return t.stop()}},t,this)}));return t}()},{key:"patchConfig",value:function(t){this._adapter.patchConfig(t)}},{key:"showMessageDialog",value:function(t,e){A.MessageDialog.show(t,e)}},{key:"setDurations",value:function(t){this._adapter.setDurations(t)}},{key:"setSymbolSearchId",value:function(t){this._adapter.setSymbolSearchId(t)}},{key:"showCancelOrderDialog",value:function(t,e){var i=this;return _.ConfirmOrderCancelDialog.get().open(t).then(function(t){t&&i._adapter.processErrors(e(),!0,$.t("Failed to cancel order"))})}},{key:"showCancelMultipleOrdersDialog",value:function(t,e,i,n){var o=this;return _.ConfirmOrderCancelDialog.get().multiple(t,e,i).then(function(t){t&&o._adapter.processErrors(n(),!0,$.t("Failed to cancel one or more orders"))})}},{key:"showCancelBracketsDialog",value:function(t,e){var i=this;return f.ConfirmBracketsCancelDialog.get().open(t).then(function(t){t&&i._adapter.processErrors(e(),!0,$.t("Failed to cancel brackets"))})}},{key:"showCancelMultipleBracketsDialog",value:function(t,e){var i=this;return f.ConfirmBracketsCancelDialog.get().multiple(t).then(function(t){t&&i._adapter.processErrors(e(),!0,$.t("Failed to cancel brackets"))})}},{key:"showClosePositionDialog",value:function(t,e){return"object"===(void 0===t?"undefined":c(t))&&(t=t.id),(0,m.closePositionDialog)(this._trading,t,e)}},{key:"showReversePositionDialog",value:function(t,e){return(0,g.reversePositionDialog)(this._trading,t,e)}},{key:"showEditBracketsDialog",value:function(t,e){
var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n={};return i&&(n.focus=i),this.showPositionBracketsDialog(t,{stopLoss:t.stopLoss,takeProfit:t.takeProfit},n,function(t){return e(t.stopLoss,t.takeProfit)})}},{key:"showPositionBracketsDialog",value:function(){function t(t,i,n,o){return e.apply(this,arguments)}var e=r(l.default.mark(function t(e,i,n,o){var r,s;return l.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,D();case 2:return r=t.sent,s=r.PositionTicket,t.abrupt("return",s.get().open(e,i,n,o));case 5:case"end":return t.stop()}},t,this)}));return t}()},{key:"activateBottomWidget",value:function(){return this._trading.toggleTradingWidget()}},{key:"trackEvent",value:function(t,e,i){this._trading.trackEvent(t,e,i)}},{key:"trackOrderPlaced",value:function(){this._trading.tradingStat.trackOrderPlaced()}},{key:"defaultFormatter",value:function(t){return(0,E.getQuoteSessionInstance)("simple").formatter(t)}},{key:"numericFormatter",value:function(t){return Promise.resolve(new k.NumericFormatter(t))}},{key:"quantityFormatter",value:function(t){return Promise.resolve(new L.QuantityFormatter(t))}},{key:"selectBroker",value:function(){this._trading.selectBroker()}},{key:"showTradingProperties",value:function(){this._trading.showTradingProperties()}},{key:"symbolSnapshot",value:function(t){return(0,E.getQuoteSessionInstance)("full").snapshot(t)}},{key:"suggestedQty",value:function(){return this._trading.suggestedQty()}},{key:"silentOrdersPlacement",value:function(){return this._trading.noConfirmEnabled}},{key:"floatingTradingPanelVisibility",value:function(){return this._trading.hideFloatingPanel.opposite()}},{key:"domVisibility",value:function(){return this._trading.domVisibility}},{key:"showPricesWithZeroVolume",value:function(){return this._trading.showPricesWithZeroVolume}},{key:"showNotification",value:function(t,e){(arguments.length>2&&void 0!==arguments[2]?arguments[2]:p.NOTIFICATION.ERROR)===p.NOTIFICATION.ERROR?this._trading.showErrorNotification(t,e):this._trading.showSuccessNotification(t,e)}},{key:"connectionStatusUpdate",value:function(t,e){this._adapter.connectionStatusUpdate.fire(t,e),t===p.CONNECTSTATUSES.CONNECTED&&this._setDefaultDropdownActions()}},{key:"patchOrderUpdateTime",value:function(t){var e=this._orderUpdateTimes[t.id];return!e&&d.isOrderActive(t.status)&&(e=Date.now(),this._orderUpdateTimes[t.id]=e),void 0!==this._orderUpdateTimes[t.id]&&(t.updateTime=this._orderUpdateTimes[t.id]),t}},{key:"orderUpdate",value:function(t,e){e&&!d.isOrderActive(t.status)||(this._orderUpdateTimes[t.id]=Date.now(),this.patchOrderUpdateTime(t)),this._adapter.onOrderUpdate(t,e)}},{key:"positionUpdate",value:function(t,e){this._adapter.onPositionUpdate(t,e)}},{key:"tradeUpdate",value:function(t,e){this._adapter.onTradeUpdate(t,e)}},{key:"orderPartialUpdate",value:function(t,e){(0,I.isObject)(t)&&this.patchOrderUpdateTime(t),this._adapter.onOrderPartialUpdate(t,e)}},{key:"positionPartialUpdate",value:function(t,e){this._adapter.onPositionPartialUpdate(t,e)}},{
key:"tradePartialUpdate",value:function(t,e){this._adapter.onTradePartialUpdate(t,e)}},{key:"executionUpdate",value:function(t,e){this._adapter.executionUpdate.fire(t,e)}},{key:"fullUpdate",value:function(){this._adapter.onFullUpdate()}},{key:"realtimeUpdate",value:function(t,e){this._adapter.fireSubscription("Realtime",t,e)}},{key:"domeUpdate",value:function(t,e){this._adapter.fireSubscription("DOME",t,e)}},{key:"plUpdate",value:function(t,e,i){this._adapter.fireSubscription("PL",t,e,i)}},{key:"tradePLUpdate",value:function(t,e){this._adapter.fireSubscription("TradePL",t,e)}},{key:"equityUpdate",value:function(t){this._adapter.fireSubscription("Equity","Equity",t)}},{key:"setButtonDropdownActions",value:function(t){this._defaultDropdownActions&&(this._defaultDropdownActions=!1,this.floatingTradingPanelVisibility().unsubscribe(this._setDefaultDropdownActionsBound),this.domVisibility().unsubscribe(this._setDefaultDropdownActionsBound)),this._buttonDropdownActions=d.convertActionDescriptionsToPopupMenuDescriptions(t)}},{key:"buttonDropdownActions",value:function(){return this._buttonDropdownActions}},{key:"defaultContextMenuActions",value:function(){var t;return(t=this._trading).defaultContextMenuActions.apply(t,arguments)}},{key:"defaultDropdownMenuActions",value:function(){var t;return(t=this._trading).defaultDropdownMenuActions.apply(t,arguments)}},{key:"createMapper",value:function(t){return{tvToBroker:function(t){return t},brokerToTv:function(t){return t}}}},{key:"createMapperSync",value:function(t){var e=Promise.resolve();return{ready:function(){return e},tvToBroker:function(t){return t},brokerToTv:function(t){return t}}}},{key:"convertTimezone",value:function(t,e,i){var n=x.get_timezone(e),o=x.get_timezone(i),r=x.cal_to_utc(n,t);return x.utc_to_cal(o,r)}},{key:"language",value:function(){return window.language}},{key:"getUserSpecificHash",value:function(){return void 0!==window.user&&window.user.hasOwnProperty("private_channel")?window.user.private_channel:""}},{key:"_setDefaultDropdownActions",value:function(){this._defaultDropdownActions&&(this._buttonDropdownActions=d.convertActionDescriptionsToPopupMenuDescriptions(this.defaultDropdownMenuActions()))}},{key:"factory",get:function(){return{createDelegate:function(){return new v.default},createWatchedValue:function(t){return new S.default(t)},createPriceFormatter:function(t,e,i,n){return new M.PriceFormatter(t,e,i,n)}}}},{key:"settings",get:function(){var t=this;return{save:function(e,i){return P.default.setJSON(t._metainfo.id+"."+e,i)},load:function(e,i){return P.default.getJSON(t._metainfo.id+"."+e,i)}}}}]),t}()},function(t,e,i){"use strict";var n,o;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"ConfirmOrderCancelDialog",function(){return o}),i(31),i(9),n=i(132),o={get:function(){return this},open:function(t){var e=window.t("Cancel Order"),i="<p>"+window.t("Are you sure you want to cancel order %s?").replace(/%s/,t+"")+"</p>";return Object(n.a)(e,i)},multiple:function(t,e,i){var o,r,s=t;return void 0!==e&&(s+=" ",
s+=1===e?window.t("BUY"):window.t("SELL")),o=window.t("Cancel Orders"),r="<p>"+window.t("Are you sure you want to cancel {0} {1} orders?").format(i+"",s)+"</p>",Object(n.a)(o,r)}}},function(t,e,i){"use strict";var n,o;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"ConfirmBracketsCancelDialog",function(){return o}),i(31),i(9),n=i(132),o={get:function(){return this},open:function(t){var e=window.t("Cancel Bracket"),i="<p>"+window.t("Are you sure you want to cancel {0}bracket?").format(t?t+" ":"")+"</p>";return Object(n.a)(e,i)},multiple:function(t){var e=window.t("Cancel Brackets"),i="<p>"+window.t("Are you sure you want to cancel {0}brackets?").format(t?t+" ":"")+"</p>";return Object(n.a)(e,i)}}},function(t,e,i){"use strict";function n(t,e,i){return new Promise(function(n){var r=window.t("Close {0} position?").format(e+""),s="<p>"+window.t("Are you sure you want to close {0} position?").format(e+"")+"</p>",a=window.t("Close position"),l=window.t("Cancel");Object(o.a)(r,s,a,l).then(function(t){return!0===t?i():n(!1)}).then(function(){n(!0)}).catch(function(e){var i,o="";null!==e&&"object"==typeof e&&e.message?o=e.message:"string"==typeof e&&(o=e),i=window.t("Failed to close the position"),t.showErrorNotification(i,o),n(!1)})})}var o;Object.defineProperty(e,"__esModule",{value:!0}),e.closePositionDialog=n,i(31),i(9),o=i(132)},function(t,e,i){"use strict";function n(t,e,i){return new Promise(function(n){var r=window.t("Reverse {0} position?").format(e.id+""),s="<p>"+window.t("Are you sure you want to reverse {0} position?").format(e.id+"")+"</p>",a=window.t("Reverse position"),l=window.t("Cancel");Object(o.a)(r,s,a,l).then(function(t){return!0===t?i():n(!1)}).then(function(){n(!0)}).catch(function(e){var i,o="";null!==e&&"object"==typeof e&&e.message?o=e.message:"string"==typeof e&&(o=e),i=window.t("Failed to reverse position"),t.showErrorNotification(i,o),n(!1)})})}var o;Object.defineProperty(e,"__esModule",{value:!0}),e.reversePositionDialog=n,i(31),i(9),o=i(132)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"tzData",function(){return n});var n={"America/New_York":{
time:[-2717668562,-1633298400,-1615154400,-1601848800,-1583704800,-1570399200,-1551650400,-1536530400,-1523224800,-1504476e3,-1491775200,-1473026400,-1459720800,-1441576800,-1428271200,-1410127200,-1396821600,-1378677600,-1365372e3,-1347228e3,-1333922400,-1315173600,-1301868e3,-1283724e3,-1270418400,-1252274400,-1238968800,-1220824800,-1207519200,-1189375200,-1176069600,-1157320800,-114462e4,-1125871200,-1112565600,-1094421600,-1081116e3,-1062972e3,-1049666400,-1031522400,-1018216800,-1000072800,-986767200,-968018400,-955317600,-936568800,-923263200,-905119200,-891813600,-880236e3,-76941e4,-765410400,-747266400,-733960800,-715816800,-702511200,-684367200,-671061600,-652917600,-639612e3,-620863200,-608162400,-589413600,-576108e3,-557964e3,-544658400,-526514400,-513208800,-495064800,-481759200,-463615200,-447285600,-431560800,-415836e3,-400111200,-384386400,-368661600,-352936800,-337212e3,-321487200,-305762400,-289432800,-273708e3,-257983200,-242258400,-226533600,-210808800,-195084e3,-179359200,-163634400,-147909600,-13158e4,-11646e4,-100130400,-84405600,-68680800,-52956e3,-37231200,-21506400,-5781600,9943200,25668e3,41392800,57722400,73447200,89172e3,104896800,120621600,126669600,152071200,162352800,183520800,199245600,215575200,230695200,247024800,262749600,278474400,294199200,309924e3,325648800,341373600,357098400,372823200,388548e3,404877600,419997600,436327200,452052e3,467776800,483501600,499226400,514951200,530676e3,544586400,562125600,576036e3,59418e4,607485600,625629600,638935200,657079200,670989600,688528800,702439200,719978400,733888800,752032800,765338400,783482400,796788e3,814932e3,828842400,846381600,860292e3,877831200,891741600,909280800,923191200,941335200,954640800,972784800,986090400,1004234400,1018144800,1035684e3,1049594400,1067133600,1081044e3,1099188e3,1112493600,1130637600,1143943200,1162087200,1173578400,1194141600,1205028e3,1225591200,1236477600,1257040800,1268532e3,1289095200,1299981600,1320544800,1331431200,1351994400,1362880800,1383444e3,1394330400,1414893600,142578e4,1446343200,1457834400,1478397600,1489284e3,1509847200,1520733600,1541296800,1552183200,1572746400,1583632800,1604196e3,1615687200,1636250400,1647136800,16677e5,1678586400,1699149600,1710036e3,1730599200,1741485600,1762048800,1772935200,1793498400,1804989600,1825552800,1836439200,1857002400,1867888800,1888452e3,1899338400,1919901600,1930788e3],
offset:[-17762,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3]},"America/Los_Angeles":{
time:[-2717668378,-1633298400,-1615154400,-1601848800,-1583704800,-880236e3,-769420800,-765410400,-687995940,-662680800,-620866800,-608162400,-589417200,-576108e3,-557967600,-544658400,-526518e3,-513208800,-495068400,-481759200,-463618800,-450309600,-431564400,-418255200,-400114800,-386805600,-368665200,-355356e3,-337215600,-323906400,-305766e3,-292456800,-273711600,-261007200,-242262e3,-226533600,-210812400,-195084e3,-179362800,-163634400,-147913200,-13158e4,-116463600,-100130400,-84405600,-68680800,-52956e3,-37231200,-21506400,-5781600,9943200,25668e3,41392800,57722400,73447200,89172e3,104896800,120621600,126669600,152071200,162352800,183520800,199245600,215575200,230695200,247024800,262749600,278474400,294199200,309924e3,325648800,341373600,357098400,372823200,388548e3,404877600,419997600,436327200,452052e3,467776800,483501600,499226400,514951200,530676e3,544586400,562125600,576036e3,59418e4,607485600,625629600,638935200,657079200,670989600,688528800,702439200,719978400,733888800,752032800,765338400,783482400,796788e3,814932e3,828842400,846381600,860292e3,877831200,891741600,909280800,923191200,941335200,954640800,972784800,986090400,1004234400,1018144800,1035684e3,1049594400,1067133600,1081044e3,1099188e3,1112493600,1130637600,1143943200,1162087200,1173578400,1194141600,1205028e3,1225591200,1236477600,1257040800,1268532e3,1289095200,1299981600,1320544800,1331431200,1351994400,1362880800,1383444e3,1394330400,1414893600,142578e4,1446343200,1457834400,1478397600,1489284e3,1509847200,1520733600,1541296800,1552183200,1572746400,1583632800,1604196e3,1615687200,1636250400,1647136800,16677e5,1678586400,1699149600,1710036e3,1730599200,1741485600,1762048800,1772935200,1793498400,1804989600,1825552800,1836439200,1857002400,1867888800,1888452e3,1899338400,1919901600,1930788e3],offset:[-28378,-28800,-25200,-28800,-25200,-28800,-25200,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800]},"America/Chicago":{
time:[-2717668236,-1633298400,-1615154400,-1601848800,-1583704800,-1563746400,-1551650400,-1538949600,-1520200800,-1504476e3,-1491775200,-1473026400,-1459720800,-1441576800,-1428271200,-1410127200,-1396821600,-1378677600,-1365372e3,-1347228e3,-1333922400,-1315173600,-1301868e3,-1283724e3,-1270418400,-1252274400,-1238968800,-1220824800,-1207519200,-1189375200,-1176069600,-1157320800,-114462e4,-1125871200,-1112565600,-1094421600,-1081116e3,-1067810400,-1045432800,-1031522400,-1018216800,-1000072800,-986767200,-968018400,-955317600,-936568800,-923263200,-905119200,-891813600,-880236e3,-769413600,-765410400,-747266400,-733960800,-715816800,-702511200,-684367200,-671061600,-652917600,-639612e3,-620863200,-608162400,-589413600,-576108e3,-557964e3,-544658400,-526514400,-513208800,-495064800,-481759200,-463615200,-447285600,-431560800,-415836e3,-400111200,-384386400,-368661600,-352936800,-337212e3,-321487200,-305762400,-289432800,-273708e3,-257983200,-242258400,-226533600,-210808800,-195084e3,-179359200,-163634400,-147909600,-13158e4,-11646e4,-100130400,-84405600,-68680800,-52956e3,-37231200,-21506400,-5781600,9943200,25668e3,41392800,57722400,73447200,89172e3,104896800,120621600,126669600,152071200,162352800,183520800,199245600,215575200,230695200,247024800,262749600,278474400,294199200,309924e3,325648800,341373600,357098400,372823200,388548e3,404877600,419997600,436327200,452052e3,467776800,483501600,499226400,514951200,530676e3,544586400,562125600,576036e3,59418e4,607485600,625629600,638935200,657079200,670989600,688528800,702439200,719978400,733888800,752032800,765338400,783482400,796788e3,814932e3,828842400,846381600,860292e3,877831200,891741600,909280800,923191200,941335200,954640800,972784800,986090400,1004234400,1018144800,1035684e3,1049594400,1067133600,1081044e3,1099188e3,1112493600,1130637600,1143943200,1162087200,1173578400,1194141600,1205028e3,1225591200,1236477600,1257040800,1268532e3,1289095200,1299981600,1320544800,1331431200,1351994400,1362880800,1383444e3,1394330400,1414893600,142578e4,1446343200,1457834400,1478397600,1489284e3,1509847200,1520733600,1541296800,1552183200,1572746400,1583632800,1604196e3,1615687200,1636250400,1647136800,16677e5,1678586400,1699149600,1710036e3,1730599200,1741485600,1762048800,1772935200,1793498400,1804989600,1825552800,1836439200,1857002400,1867888800,1888452e3,1899338400,1919901600,1930788e3],
offset:[-21036,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600]},"America/Phoenix":{time:[-2717670498,-1633298400,-1615154400,-1601848800,-1583704800,-880236e3,-820540740,-812678340,-796867140,-84405600,-68680800,1924966800],offset:[-26898,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200]},"America/Toronto":{
time:[-2366755200,-1632088800,-1615154400,-1601771400,-1583712e3,-1567375200,-1554681600,-1534716e3,-1524088800,-1503266400,-149238e4,-1471816800,-1460930400,-1440972e3,-1428876e3,-1409522400,-1397426400,-1378072800,-1365976800,-1346623200,-1333922400,-1315173600,-1301868e3,-1283724e3,-1270418400,-1252274400,-1238968800,-1220824800,-1207519200,-1188770400,-1176069600,-1157320800,-1144015200,-1125871200,-1112565600,-1094421600,-1081116e3,-1062972e3,-1049666400,-1031522400,-1018216800,-1000072800,-986767200,-968018400,-955317600,-936568800,-880232400,-76941e4,-765410400,-747266400,-733960800,-715824e3,-702518400,-684374400,-671068800,-652924800,-634176e3,-620863200,-602719200,-589413600,-576108e3,-557964e3,-544658400,-526514400,-513208800,-495064800,-481759200,-463615200,-450309600,-431560800,-418255200,-400111200,-384386400,-368661600,-352936800,-337212e3,-321487200,-305762400,-289432800,-273708e3,-257983200,-242258400,-226533600,-210808800,-195084e3,-179359200,-163634400,-147909600,-13158e4,-11646e4,-100130400,-84405600,-68680800,-52956e3,-37231200,-21506400,-5781600,9943200,25668e3,41392800,57722400,73447200,89172e3,104896800,120621600,136346400,152071200,167796e3,183520800,199245600,215575200,230695200,247024800,262749600,278474400,294199200,309924e3,325648800,341373600,357098400,372823200,388548e3,404877600,419997600,436327200,452052e3,467776800,483501600,499226400,514951200,530676e3,544586400,562125600,576036e3,59418e4,607485600,625629600,638935200,657079200,670989600,688528800,702439200,719978400,733888800,752032800,765338400,783482400,796788e3,814932e3,828842400,846381600,860292e3,877831200,891741600,909280800,923191200,941335200,954640800,972784800,986090400,1004234400,1018144800,1035684e3,1049594400,1067133600,1081044e3,1099188e3,1112493600,1130637600,1143943200,1162087200,1173578400,1194141600,1205028e3,1225591200,1236477600,1257040800,1268532e3,1289095200,1299981600,1320544800,1331431200,1351994400,1362880800,1383444e3,1394330400,1414893600,142578e4,1446343200,1457834400,1478397600,1489284e3,1509847200,1520733600,1541296800,1552183200,1572746400,1583632800,1604196e3,1615687200,1636250400,1647136800,16677e5,1678586400,1699149600,1710036e3,1730599200,1741485600,1762048800,1772935200,1793498400,1804989600,1825552800,1836439200,1857002400,1867888800,1888452e3,1899338400,1919901600,1930788e3],
offset:[-19052,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-14400,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3]},"America/Vancouver":{
time:[-2713910400,-1632088800,-1615154400,-880236e3,-769420800,-765410400,-747266400,-732751200,-715816800,-702511200,-684367200,-671061600,-652917600,-639612e3,-620863200,-608162400,-589413600,-576108e3,-557964e3,-544658400,-526514400,-513208800,-495064800,-481759200,-463615200,-450309600,-431560800,-418255200,-400111200,-386805600,-368661600,-355356e3,-337212e3,-323906400,-305762400,-292456800,-273708e3,-261007200,-242258400,-226533600,-210808800,-195084e3,-179359200,-163634400,-147909600,-13158e4,-11646e4,-100130400,-84405600,-68680800,-52956e3,-37231200,-21506400,-5781600,9943200,25668e3,41392800,57722400,73447200,89172e3,104896800,120621600,136346400,152071200,167796e3,183520800,199245600,215575200,230695200,247024800,262749600,278474400,294199200,309924e3,325648800,341373600,357098400,372823200,388548e3,404877600,419997600,436327200,452052e3,467776800,483501600,499226400,514951200,530676e3,544586400,562125600,576036e3,59418e4,607485600,625629600,638935200,657079200,670989600,688528800,702439200,719978400,733888800,752032800,765338400,783482400,796788e3,814932e3,828842400,846381600,860292e3,877831200,891741600,909280800,923191200,941335200,954640800,972784800,986090400,1004234400,1018144800,1035684e3,1049594400,1067133600,1081044e3,1099188e3,1112493600,1130637600,1143943200,1162087200,1173578400,1194141600,1205028e3,1225591200,1236477600,1257040800,1268532e3,1289095200,1299981600,1320544800,1331431200,1351994400,1362880800,1383444e3,1394330400,1414893600,142578e4,1446343200,1457834400,1478397600,1489284e3,1509847200,1520733600,1541296800,1552183200,1572746400,1583632800,1604196e3,1615687200,1636250400,1647136800,16677e5,1678586400,1699149600,1710036e3,1730599200,1741485600,1762048800,1772935200,1793498400,1804989600,1825552800,1836439200,1857002400,1867888800,1888452e3,1899338400,1919901600,1930788e3],
offset:[-29548,-28800,-25200,-28800,-25200,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800]},"America/Argentina/Buenos_Aires":{time:[-2372112e3,-1567468800,-1233446400,-1222992e3,-1205971200,-1194048e3,-117288e4,-1162512e3,-1141344e3,-1130976e3,-1109808e3,-109944e4,-1078272e3,-1067817600,-1046649600,-1036281600,-1015113600,-1004745600,-983577600,-973209600,-952041600,-941587200,-931046400,-900892800,-890352e3,-83376e4,-82728e4,-752284800,-733795200,-197337600,-190857600,-184204800,-164505600,-152668800,-132969600,-121132800,-101433600,-86832e3,-71107200,-54777600,-39052800,-23328e3,-7603200,128131200,136598400,596937600,605059200,624412800,636508800,656467200,667958400,687916800,699408e3,719366400,731462400,938908800,952041600,1198972800,1205625600,1224374400,1237075200,1924981200],offset:[-14028,-15408,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-10800,-10800,-7200,-10800,-7200,-10800]},"America/El_Salvador":{time:[-1546300800,546998400,559699200,578448e3,591148800,1924970400],offset:[-21408,-21600,-18e3,-21600,-18e3,-21600]},"America/Sao_Paulo":{
time:[-1767225600,-1206968400,-1191369600,-1175385600,-1159833600,-633830400,-622076400,-602294400,-59184e4,-570758400,-560217600,-539136e3,-53136e4,-195436800,-184204800,-155174400,-150076800,-128908800,-121132800,-99964800,-89596800,-68428800,-57974400,499737600,511228800,530582400,540259200,562118400,571190400,592963200,602035200,624412800,634694400,656467200,666748800,687916800,697593600,719971200,728438400,750816e3,761702400,782265600,793152e3,813715200,823996800,84456e4,856051200,876096e3,888710400,908064e3,919555200,938908800,951609600,970963200,982454400,1003017600,1013904e3,1036281600,1045353600,1066521600,1076803200,1099353600,1108857600,1129420800,1140307200,1162684800,1172361600,119232e4,1203206400,1224374400,1234656e3,1255824e3,1266710400,1287273600,129816e4,1318723200,1330214400,1350777600,1361059200,1382227200,1392508800,1413676800,1424563200,1445126400,1456012800,1476576e3,1487462400,1508025600,1518912e3,1541289600,1550361600,1572739200,1581811200,1604188800,1613865600,1636243200,1645315200,1667692800,1677369600,1699142400,1708214400,1730592e3,1739664e3,1762041600,1771718400,1793491200,1803168e3,1825545600,1834617600,1856995200,1866067200,1888444800,1897516800,1919894400,1928966400],offset:[-11188,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200,-10800,-7200]},"America/Bogota":{time:[-2707689600,-1739059200,704851200,733881600,1924974e3],offset:[-17776,-17776,-18e3,-14400,-18e3]},"America/Caracas":{time:[-2524521600,-1826755200,-157766400,1197169200,1462069800,1924977600],offset:[-16064,-16060,-16200,-14400,-16200,-14400]},"Europe/Moscow":{
time:[-2840140800,-1688256e3,-165681e4,-1641340800,-1627956e3,-1618700400,-1596416400,-1593804521,-1589846400,-1542416400,-1539478800,-1525305600,-1522713600,-1491177600,-1247529600,354931200,370742400,386467200,402278400,418003200,433814400,449625600,465361200,481082400,496810800,512532e3,528260400,543981600,55971e4,575431200,591159600,606880800,622609200,638330400,654663600,670384800,686113200,695786400,701834400,717562800,733284e3,749012400,764733600,780462e3,796183200,811911600,828237600,846385200,859687200,877834800,891136800,909284400,922586400,941338800,954036e3,972788400,985485600,1004238e3,101754e4,1035687600,1048989600,1067137200,1080439200,1099191600,1111888800,1130641200,1143338400,1162090800,1174788e3,1193540400,1206842400,122499e4,1238292e3,1256439600,1269741600,1288494e3,1301191200,1414288800,1925002800],offset:[9017,9017,9079,12679,9079,16279,12679,16279,14400,10800,14400,18e3,14400,10800,7200,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,10800,7200,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800]},"Europe/Athens":{time:[-2344636800,-1686095940,-1182988800,-1178150400,-906854400,-904867200,-85725e4,-844473600,-828230400,-812419200,-552355200,-541641600,166492800,186195600,198036e3,213764400,228880800,244090800,260330400,275457600,291805200,307418400,323395200,338947200,354682800,370411200,386132400,401860800,417582e3,433310400,449031600,465364800,481086e3,496814400,512535600,528264e3,543985200,559713600,575434800,591163200,606884400,622612800,638334e3,654667200,670388400,686116800,701838e3,717566400,733287600,749016e3,764737200,780465600,796186800,811915200,828241200,846388800,859690800,877838400,891140400,909288e3,92259e4,941342400,954039600,972792e3,985489200,1004241600,1017543600,1035691200,1048993200,1067140800,1080442800,1099195200,1111892400,1130644800,1143342e3,1162094400,1174791600,1193544e3,1206846e3,1224993600,1238295600,1256443200,1269745200,1288497600,1301194800,1319947200,1332644400,1351396800,1364698800,1382846400,1396148400,1414296e3,1427598e3,1445745600,1459047600,14778e5,1490497200,1509249600,1521946800,1540699200,1554001200,1572148800,1585450800,1603598400,1616900400,1635652800,164835e4,1667102400,1679799600,1698552e3,1711854e3,1730001600,1743303600,1761451200,1774753200,1792900800,1806202800,1824955200,1837652400,1856404800,1869102e3,1887854400,1901156400,1919304e3,1932606e3],
offset:[5692,5692,7200,10800,7200,10800,7200,3600,7200,3600,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200]},"Europe/Belgrade":{time:[-2713910400,-905821200,-85725e4,-844552800,-828219600,-812498400,-79677e4,-777938400,-766616400,417578400,433306800,449028e3,465361200,481082400,496810800,512532e3,528260400,543981600,55971e4,575431200,591159600,606880800,622609200,638330400,654663600,670384800,686113200,701834400,717562800,733284e3,749012400,764733600,780462e3,796183200,811911600,828237600,846385200,859687200,877834800,891136800,909284400,922586400,941338800,954036e3,972788400,985485600,1004238e3,101754e4,1035687600,1048989600,1067137200,1080439200,1099191600,1111888800,1130641200,1143338400,1162090800,1174788e3,1193540400,1206842400,122499e4,1238292e3,1256439600,1269741600,1288494e3,1301191200,1319943600,1332640800,1351393200,1364695200,1382842800,1396144800,1414292400,1427594400,1445742e3,1459044e3,1477796400,1490493600,1509246e3,1521943200,1540695600,1553997600,1572145200,1585447200,1603594800,1616896800,1635649200,1648346400,1667098800,1679796e3,1698548400,1711850400,1729998e3,17433e5,1761447600,1774749600,1792897200,1806199200,1824951600,1837648800,1856401200,1869098400,1887850800,1901152800,1919300400,1932602400],offset:[4920,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600]},"Europe/Berlin":{
time:[-2422051200,-1693702800,-1680476400,-1663452e3,-1650142800,-1632002400,-1618693200,-938901600,-85725e4,-844552800,-828219600,-812498400,-79677e4,-781048800,-776556e3,-765925200,-761173200,-748476e3,-733266e3,-717627600,-714603600,-71037e4,-701902800,-684972e3,-670453200,-654127200,-639003600,323834400,338958e3,354679200,370407600,386128800,401857200,417578400,433306800,449028e3,465361200,481082400,496810800,512532e3,528260400,543981600,55971e4,575431200,591159600,606880800,622609200,638330400,654663600,670384800,686113200,701834400,717562800,733284e3,749012400,764733600,780462e3,796183200,811911600,828237600,846385200,859687200,877834800,891136800,909284400,922586400,941338800,954036e3,972788400,985485600,1004238e3,101754e4,1035687600,1048989600,1067137200,1080439200,1099191600,1111888800,1130641200,1143338400,1162090800,1174788e3,1193540400,1206842400,122499e4,1238292e3,1256439600,1269741600,1288494e3,1301191200,1319943600,1332640800,1351393200,1364695200,1382842800,1396144800,1414292400,1427594400,1445742e3,1459044e3,1477796400,1490493600,1509246e3,1521943200,1540695600,1553997600,1572145200,1585447200,1603594800,1616896800,1635649200,1648346400,1667098800,1679796e3,1698548400,1711850400,1729998e3,17433e5,1761447600,1774749600,1792897200,1806199200,1824951600,1837648800,1856401200,1869098400,1887850800,1901152800,1919300400,1932602400],offset:[3208,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,10800,7200,3600,7200,3600,7200,10800,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600]},"Europe/London":{
time:[-3852662400,-1691964e3,-1680469200,-1664143200,-1650142800,-1633903200,-1617483600,-1601848800,-1586034e3,-1570399200,-1552165200,-1538344800,-152253e4,-15075e5,-1490562e3,-1473631200,-1460926800,-1442786400,-1428872400,-1410732e3,-1396213200,-1379282400,-1364763600,-1348437600,-1333314e3,-1315778400,-1301259600,-1284328800,-126981e4,-1253484e3,-1238360400,-1221429600,-1206910800,-118998e4,-1175461200,-1159135200,-1143406800,-1126476e3,-1111957200,-1095631200,-1080507600,-1063576800,-1049058e3,-1032127200,-1017608400,-1001282400,-986158800,-969228e3,-950475600,-942012e3,-904514400,-896043600,-875484e3,-864594e3,-844034400,-832539600,-812584800,-798066e3,-781048800,-772059600,-764802e3,-748476e3,-733352400,-719445600,-717026400,-706741200,-699483600,-687996e3,-668034e3,-654732e3,-636584400,-622072800,-605739600,-590623200,-57429e4,-558568800,-542235600,-527119200,-512600400,-496274400,-481150800,-46422e4,-449701200,-432165600,-417646800,-401320800,-386197200,-369266400,-354747600,-337816800,-323298e3,-306972e3,-291848400,-276732e3,-257979600,-245282400,-22653e4,-213228e3,-195080400,-182383200,-163630800,-150933600,-132181200,-119484e3,-100731600,-88034400,-68677200,-59004e3,-37238400,57726e3,69818400,89175600,101268e3,120625200,132717600,152074800,164167200,183524400,196221600,214974e3,227671200,246423600,259120800,278478e3,290570400,309927600,32202e4,341377200,354675600,372823200,386125200,404272800,417574800,435722400,449024400,467776800,481078800,499226400,512528400,530676e3,543978e3,562125600,575427600,593575200,606877200,625629600,638326800,657079200,670381200,688528800,701830800,719978400,733280400,751428e3,76473e4,782877600,796179600,814327200,828234e3,846381600,859683600,877831200,891133200,909280800,922582800,941335200,954032400,972784800,985482e3,1004234400,1017536400,1035684e3,1048986e3,1067133600,1080435600,1099188e3,1111885200,1130637600,1143334800,1162087200,1174784400,1193536800,1206838800,1224986400,1238288400,1256436e3,1269738e3,1288490400,1301187600,131994e4,1332637200,1351389600,1364691600,1382839200,1396141200,1414288800,1427590800,1445738400,1459040400,1477792800,149049e4,1509242400,1521939600,1540692e3,1553994e3,1572141600,1585443600,1603591200,1616893200,1635645600,1648342800,1667095200,1679792400,1698544800,1711846800,1729994400,1743296400,1761444e3,1774746e3,1792893600,1806195600,1824948e3,1837645200,1856397600,1869094800,1887847200,1901149200,1919296800,1932598800],
offset:[-75,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,0,3600,0,3600,7200,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0]},"Europe/Luxembourg":{time:[-2069712e3,-1692493200,-1680476400,-1662339600,-165015e4,-1632002400,-1618693200,-1612656e3,-1604278800,-1585515600,-1574038800,-1552255200,-1539997200,-1520546400,-1507510800,-1490569200,-1473642e3,-1459116e3,-1444006800,-142767e4,-1411866e3,-1396220400,-1379293200,-1364770800,-1348448400,-1333321200,-1316394e3,-1301266800,-1284339600,-126981e4,-1253484e3,-1238360400,-1221429600,-1206910800,-1191189600,-1175461200,-1160344800,-1143406800,-1127685600,-1111957200,-1096840800,-1080507600,-1063576800,-1049058e3,-1033336800,-1017608400,-1002492e3,-986158800,-969228e3,-950475600,-942012e3,-935182800,-85725e4,-844552800,-828219600,-812498400,-797979600,-781048800,-766616400,-745452e3,-733266e3,228880800,244004400,260330400,276058800,29178e4,307508400,323834400,338958e3,354679200,370407600,386128800,401857200,417578400,433306800,449028e3,465361200,481082400,496810800,512532e3,528260400,543981600,55971e4,575431200,591159600,606880800,622609200,638330400,654663600,670384800,686113200,701834400,717562800,733284e3,749012400,764733600,780462e3,796183200,811911600,828237600,846385200,859687200,877834800,891136800,909284400,922586400,941338800,954036e3,972788400,985485600,1004238e3,101754e4,1035687600,1048989600,1067137200,1080439200,1099191600,1111888800,1130641200,1143338400,1162090800,1174788e3,1193540400,1206842400,122499e4,1238292e3,1256439600,1269741600,1288494e3,1301191200,1319943600,1332640800,1351393200,1364695200,1382842800,1396144800,1414292400,1427594400,1445742e3,1459044e3,1477796400,1490493600,1509246e3,1521943200,1540695600,1553997600,1572145200,1585447200,1603594800,1616896800,1635649200,1648346400,1667098800,1679796e3,1698548400,1711850400,1729998e3,17433e5,1761447600,1774749600,1792897200,1806199200,1824951600,1837648800,1856401200,1869098400,1887850800,1901152800,1919300400,1932602400],
offset:[1476,3600,7200,3600,7200,3600,7200,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600]},"Europe/Madrid":{time:[-2177453684,-1631926800,-1616972400,-1601168400,-1585436400,-1442451600,-1427756400,-1379293200,-1364857200,-1348448400,-1333407600,-1316390400,-1301353200,-1284339600,-1269903600,-1026954e3,-1017702e3,-1001898e3,-999478800,-986083200,-951519600,-940208400,-873075600,-862614e3,-842835600,-828313200,-811386e3,-796863600,-779936400,-765414e3,-748486800,-733964400,-652323600,-639010800,135126e3,150253200,166575600,181702800,196815600,212547600,22887e4,243997200,260330400,276058800,29178e4,307508400,323834400,338958e3,354679200,370407600,386128800,401857200,417578400,433306800,449028e3,465361200,481082400,496810800,512532e3,528260400,543981600,55971e4,575431200,591159600,606880800,622609200,638330400,654663600,670384800,686113200,701834400,717562800,733284e3,749012400,764733600,780462e3,796183200,811911600,828237600,846385200,859687200,877834800,891136800,909284400,922586400,941338800,954036e3,972788400,985485600,1004238e3,101754e4,1035687600,1048989600,1067137200,1080439200,1099191600,1111888800,1130641200,1143338400,1162090800,1174788e3,1193540400,1206842400,122499e4,1238292e3,1256439600,1269741600,1288494e3,1301191200,1319943600,1332640800,1351393200,1364695200,1382842800,1396144800,1414292400,1427594400,1445742e3,1459044e3,1477796400,1490493600,1509246e3,1521943200,1540695600,1553997600,1572145200,1585447200,1603594800,1616896800,1635649200,1648346400,1667098800,1679796e3,1698548400,1711850400,1729998e3,17433e5,1761447600,1774749600,1792897200,1806199200,1824951600,1837648800,1856401200,1869098400,1887850800,1901152800,1919300400,1932602400],
offset:[-884,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,7200,3600,0,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600]},"Europe/Paris":{time:[-2486678340,-1855958340,-1689814800,-1680393600,-1665363600,-1648339200,-1635123600,-1616889600,-1604278800,-158544e4,-1574038800,-1552262400,-1539997200,-1520553600,-1507510800,-1490572800,-1470618e3,-1459123200,-1444006800,-1427673600,-1411952400,-1396224e3,-1379293200,-1364774400,-1348448400,-1333324800,-1316394e3,-1301270400,-1284339600,-1269820800,-1253494800,-1238371200,-1221440400,-1206921600,-1191200400,-1175472e3,-1160355600,-1143417600,-1127696400,-1111968e3,-1096851600,-1080518400,-1063587600,-1049068800,-1033347600,-1017619200,-1002502800,-986169600,-969238800,-950486400,-942012e3,-932432400,-85725e4,-844552800,-828219600,-812498400,-800064e3,-796258800,-781048800,-766616400,196822800,212547600,228880800,244004400,260330400,276058800,29178e4,307508400,323834400,338958e3,354679200,370407600,386128800,401857200,417578400,433306800,449028e3,465361200,481082400,496810800,512532e3,528260400,543981600,55971e4,575431200,591159600,606880800,622609200,638330400,654663600,670384800,686113200,701834400,717562800,733284e3,749012400,764733600,780462e3,796183200,811911600,828237600,846385200,859687200,877834800,891136800,909284400,922586400,941338800,954036e3,972788400,985485600,1004238e3,101754e4,1035687600,1048989600,1067137200,1080439200,1099191600,1111888800,1130641200,1143338400,1162090800,1174788e3,1193540400,1206842400,122499e4,1238292e3,1256439600,1269741600,1288494e3,1301191200,1319943600,1332640800,1351393200,1364695200,1382842800,1396144800,1414292400,1427594400,1445742e3,1459044e3,1477796400,1490493600,1509246e3,1521943200,1540695600,1553997600,1572145200,1585447200,1603594800,1616896800,1635649200,1648346400,1667098800,1679796e3,1698548400,1711850400,1729998e3,17433e5,1761447600,1774749600,1792897200,1806199200,1824951600,1837648800,1856401200,1869098400,1887850800,1901152800,1919300400,1932602400],
offset:[561,561,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,0,3600,7200,3600,7200,3600,7200,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600]},"Europe/Rome":{time:[-3259094400,-2403562204,-1690761600,-168048e4,-1664755200,-1648944e3,-163512e4,-1616889600,-1604275200,-1585526400,-1571011200,-1555286400,-932428800,-85725e4,-844552800,-828219600,-812498400,-798066e3,-781048800,-76671e4,-750895200,-733352400,-719452800,-70191e4,-689205600,-670453200,-114048e3,-103161600,-81993600,-71708400,-50544e3,-40258800,-18489600,-8204400,1296e4,23245200,43804800,54694800,75859200,86749200,107913600,118198800,138758400,149648400,170812800,181098e3,202262400,212547600,233107200,243997200,265161600,276051600,296611200,307501200,323834400,338958e3,354679200,370407600,386128800,401857200,417578400,433306800,449028e3,465361200,481082400,496810800,512532e3,528260400,543981600,55971e4,575431200,591159600,606880800,622609200,638330400,654663600,670384800,686113200,701834400,717562800,733284e3,749012400,764733600,780462e3,796183200,811911600,828237600,846385200,859687200,877834800,891136800,909284400,922586400,941338800,954036e3,972788400,985485600,1004238e3,101754e4,1035687600,1048989600,1067137200,1080439200,1099191600,1111888800,1130641200,1143338400,1162090800,1174788e3,1193540400,1206842400,122499e4,1238292e3,1256439600,1269741600,1288494e3,1301191200,1319943600,1332640800,1351393200,1364695200,1382842800,1396144800,1414292400,1427594400,1445742e3,1459044e3,1477796400,1490493600,1509246e3,1521943200,1540695600,1553997600,1572145200,1585447200,1603594800,1616896800,1635649200,1648346400,1667098800,1679796e3,1698548400,1711850400,1729998e3,17433e5,1761447600,1774749600,1792897200,1806199200,1824951600,1837648800,1856401200,1869098400,1887850800,1901152800,1919300400,1932602400],
offset:[2996,2996,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600]},"Europe/Warsaw":{time:[-2840140800,-1717027200,-1693702800,-1680476400,-1663452e3,-1650142800,-1632002400,-1618693200,-1600466400,-1587157200,-1501718400,-931730400,-85725e4,-844552800,-828219600,-812498400,-796600800,-778723200,-762652800,-748483200,-733266e3,-715212e3,-701902800,-684972e3,-670453200,-654127200,-639003600,-397090800,-386805600,-371084400,-355356e3,-334191600,-323301600,-307580400,-291852e3,-271292400,-260402400,-239842800,-228952800,-208393200,-197503200,-176338800,-166053600,228877200,244000800,260326800,276055200,291776400,307504800,323830800,338954400,354675600,370404e3,386125200,401853600,417574800,433303200,449024400,465357600,481078800,496807200,512528400,528256800,543978e3,559706400,575431200,591159600,606880800,622609200,638330400,654663600,670384800,686113200,701834400,717562800,733284e3,749012400,764733600,780462e3,796183200,811911600,828237600,846385200,859687200,877834800,891136800,909284400,922586400,941338800,954036e3,972788400,985485600,1004238e3,101754e4,1035687600,1048989600,1067137200,1080439200,1099191600,1111888800,1130641200,1143338400,1162090800,1174788e3,1193540400,1206842400,122499e4,1238292e3,1256439600,1269741600,1288494e3,1301191200,1319943600,1332640800,1351393200,1364695200,1382842800,1396144800,1414292400,1427594400,1445742e3,1459044e3,1477796400,1490493600,1509246e3,1521943200,1540695600,1553997600,1572145200,1585447200,1603594800,1616896800,1635649200,1648346400,1667098800,1679796e3,1698548400,1711850400,1729998e3,17433e5,1761447600,1774749600,1792897200,1806199200,1824951600,1837648800,1856401200,1869098400,1887850800,1901152800,1919300400,1932602400],
offset:[5040,5040,3600,7200,3600,7200,3600,7200,7200,10800,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600]},"Europe/Istanbul":{time:[-2840140800,-1869868800,-1693699200,-168048e4,-1570406400,-1552176e3,-1538352e3,-1522540800,-1507507200,-1490572800,-1440201600,-1428019200,-1409702400,-1396483200,-931132800,-922752e3,-917827200,-892425600,-875836800,-857347200,-781056e3,-764726400,-744336e3,-733795200,-716428800,-701913600,-684979200,-670464e3,-654134400,-639014400,-621820800,-60696e4,-590025600,-575424e3,-235612800,-228268800,-177724800,-165715200,10540800,23846400,41990400,55296e3,74044800,87350400,107917200,12123e4,133927200,152686800,165369600,183513600,202435200,215568e3,228873600,245808e3,260323200,277257600,308793600,323838e3,340243200,354682800,371692800,386132400,403142400,428457600,433900800,482803200,496713600,512528400,528256800,543978e3,559706400,575427600,591156e3,606877200,622605600,638326800,65466e4,670381200,686109600,701830800,717559200,733280400,749008800,764125200,780458400,796179600,811908e3,828234e3,846381600,859683600,877831200,891133200,909280800,922582800,941335200,954032400,972784800,985482e3,1004234400,1017536400,1035684e3,1048986e3,1067133600,1080435600,1099188e3,1111885200,1130637600,1143334800,1162087200,1174791600,1193544e3,1206846e3,1224993600,1238295600,1256443200,1269745200,1288497600,1301281200,1319947200,1332644400,1351396800,1364698800,1382846400,1396234800,1414296e3,1427598e3,1446955200,1459047600,1473206400,1925002800],offset:[6952,7016,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,10800]},"Europe/Zurich":{
time:[-3675196800,-2385244800,-904431600,-891122400,-872982e3,-859672800,354679200,370407600,386128800,401857200,417578400,433306800,449028e3,465361200,481082400,496810800,512532e3,528260400,543981600,55971e4,575431200,591159600,606880800,622609200,638330400,654663600,670384800,686113200,701834400,717562800,733284e3,749012400,764733600,780462e3,796183200,811911600,828237600,846385200,859687200,877834800,891136800,909284400,922586400,941338800,954036e3,972788400,985485600,1004238e3,101754e4,1035687600,1048989600,1067137200,1080439200,1099191600,1111888800,1130641200,1143338400,1162090800,1174788e3,1193540400,1206842400,122499e4,1238292e3,1256439600,1269741600,1288494e3,1301191200,1319943600,1332640800,1351393200,1364695200,1382842800,1396144800,1414292400,1427594400,1445742e3,1459044e3,1477796400,1490493600,1509246e3,1521943200,1540695600,1553997600,1572145200,1585447200,1603594800,1616896800,1635649200,1648346400,1667098800,1679796e3,1698548400,1711850400,1729998e3,17433e5,1761447600,1774749600,1792897200,1806199200,1824951600,1837648800,1856401200,1869098400,1887850800,1901152800,1919300400,1932602400],offset:[2048,1786,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600]},"Australia/Sydney":{time:[-2364076800,-1672531140,-1665352800,-883605600,-876088800,-860364e3,-844639200,-828309600,-813189600,57722400,68007600,89172e3,100062e3,120621600,131511600,152071200,162961200,183520800,195015600,215575200,226465200,247024800,257914800,278474400,289364400,309924e3,320814e3,341373600,352263600,372823200,386737200,404877600,415767600,436327200,447217200,467776800,478666800,499226400,511326e3,530071200,542775600,562125600,57483e4,59418e4,606279600,625629600,636519600,657079200,667969200,688528800,699418800,719978400,731473200,752032800,762922800,783482400,794372400,814932e3,828241200,846381600,859690800,877831200,891140400,909280800,92259e4,941335200,954039600,967341600,985489200,1004234400,1017543600,1035684e3,1048993200,1067133600,1080442800,1099188e3,1111892400,1130637600,1143946800,1162087200,1174791600,1193536800,1207450800,1223172e3,1238900400,1254621600,127035e4,1286071200,1301799600,1317520800,1333249200,1349575200,1365303600,1381024800,1396753200,1412474400,1428202800,1443924e3,1459652400,1475373600,1491102e3,1506823200,1522551600,1538877600,1554606e3,1570327200,1586055600,1601776800,1617505200,1633226400,1648954800,1664676e3,1680404400,1696125600,1712458800,172818e4,1743908400,1759629600,1775358e3,1791079200,1806807600,1822528800,1838257200,1853978400,1869706800,1886032800,1901761200,1917482400,1933210800],
offset:[36292,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600]},"Australia/Brisbane":{time:[-2366755200,-1672531140,-1665352800,-883605600,-876088800,-860364e3,-844639200,-828309600,-813189600,57722400,68007600,625629600,636519600,657079200,667969200,688528800,699418800,1925028e3],offset:[36728,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3]},"Australia/Adelaide":{time:[-2364076800,-2230156800,-1672531140,-1665352800,-883605600,-876088800,-860364e3,-844639200,-828309600,-813189600,57722400,68007600,89172e3,100062e3,120621600,131511600,152071200,162961200,183520800,195015600,215575200,226465200,247024800,257914800,278474400,289364400,309924e3,320814e3,341373600,352263600,372823200,384318e3,404877600,415767600,436327200,447217200,467776800,478666800,499226400,511326e3,530071200,542775600,562125600,57483e4,59418e4,606279600,625629600,637729200,657079200,667969200,688528800,701233200,719978400,731473200,752032800,764132400,783482400,796186800,814932e3,828241200,846381600,859690800,877831200,891140400,909280800,92259e4,941335200,954039600,972784800,985489200,1004234400,1017543600,1035684e3,1048993200,1067133600,1080442800,1099188e3,1111892400,1130637600,1143946800,1162087200,1174791600,1193536800,1207450800,1223172e3,1238900400,1254621600,127035e4,1286071200,1301799600,1317520800,1333249200,1349575200,1365303600,1381024800,1396753200,1412474400,1428202800,1443924e3,1459652400,1475373600,1491102e3,1506823200,1522551600,1538877600,1554606e3,1570327200,1586055600,1601776800,1617505200,1633226400,1648954800,1664676e3,1680404400,1696125600,1712458800,172818e4,1743908400,1759629600,1775358e3,1791079200,1806807600,1822528800,1838257200,1853978400,1869706800,1886032800,1901761200,1917482400,1933210800],
offset:[33260,32400,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800,34200,37800]},"Australia/ACT":{time:[-2364076800,-1672531140,-1665352800,-883605600,-876088800,-860364e3,-844639200,-828309600,-813189600,57722400,68007600,89172e3,100062e3,120621600,131511600,152071200,162961200,183520800,195015600,215575200,226465200,247024800,257914800,278474400,289364400,309924e3,320814e3,341373600,352263600,372823200,386737200,404877600,415767600,436327200,447217200,467776800,478666800,499226400,511326e3,530071200,542775600,562125600,57483e4,59418e4,606279600,625629600,636519600,657079200,667969200,688528800,699418800,719978400,731473200,752032800,762922800,783482400,794372400,814932e3,828241200,846381600,859690800,877831200,891140400,909280800,92259e4,941335200,954039600,967341600,985489200,1004234400,1017543600,1035684e3,1048993200,1067133600,1080442800,1099188e3,1111892400,1130637600,1143946800,1162087200,1174791600,1193536800,1207450800,1223172e3,1238900400,1254621600,127035e4,1286071200,1301799600,1317520800,1333249200,1349575200,1365303600,1381024800,1396753200,1412474400,1428202800,1443924e3,1459652400,1475373600,1491102e3,1506823200,1522551600,1538877600,1554606e3,1570327200,1586055600,1601776800,1617505200,1633226400,1648954800,1664676e3,1680404400,1696125600,1712458800,172818e4,1743908400,1759629600,1775358e3,1791079200,1806807600,1822528800,1838257200,1853978400,1869706800,1886032800,1901761200,1917482400,1933210800],offset:[36292,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600,36e3,39600]},"Asia/Almaty":{
time:[-1441152e3,-1247529600,354931200,370742400,386467200,402278400,418003200,433814400,449625600,465361200,481082400,496810800,512532e3,528260400,543981600,55971e4,575431200,591159600,606880800,622609200,638330400,654663600,670384800,686113200,695786400,701834400,717562800,733284e3,749012400,764733600,780462e3,796183200,811911600,828237600,846385200,859687200,877834800,891136800,909284400,922586400,941338800,954036e3,972788400,985485600,1004238e3,101754e4,1035687600,1048989600,1067137200,1080439200,1099191600,1925013600],offset:[18468,18e3,21600,25200,21600,25200,21600,25200,21600,25200,21600,25200,21600,25200,21600,25200,21600,25200,21600,25200,21600,25200,21600,21600,18e3,21600,25200,21600,25200,21600,25200,21600,25200,21600,25200,21600,25200,21600,25200,21600,25200,21600,25200,21600,25200,21600,25200,21600,25200,21600,25200,21600]},"Asia/Ashkhabad":{time:[-1441152e3,-1247529600,354931200,370742400,386467200,402278400,418003200,433814400,449625600,465361200,481082400,496810800,512532e3,528260400,543981600,55971e4,575431200,591159600,606880800,622609200,638330400,654663600,670384800,686113200,695786400,192501e4],offset:[14012,14400,18e3,21600,18e3,21600,18e3,21600,18e3,21600,18e3,21600,18e3,21600,18e3,21600,18e3,21600,18e3,21600,18e3,21600,18e3,18e3,14400,18e3]},"Asia/Tokyo":{time:[-2587678861,-683769600,-672278400,-654739200,-640828800,-620265600,-609379200,-588816e3,-577929600,1925024400],offset:[33539,32400,36e3,32400,36e3,32400,36e3,32400,36e3,32400]},"Asia/Taipei":{time:[-2335219200,-1017792e3,-766191600,-745804800,-733795200,-716860800,-699580800,-683856e3,-670636800,-65232e4,-639100800,-620784e3,-607564800,-589248e3,-576028800,-562896e3,-541728e3,-528681600,-510192e3,-497145600,-478656e3,-465609600,-449798400,-433987200,-418176e3,-402451200,-38664e4,-370915200,-355104e3,-339379200,-323568e3,-302486400,-291945600,-270950400,-260409600,134006400,149817600,165542400,181353600,299635200,307584e3,1925020800],offset:[29160,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800]},"Asia/Singapore":{time:[-2177452800,-2038176e3,-1167609600,-1073001600,-894153600,-879638400,-766972800,378691200,1925020800],offset:[24925,24925,25200,26400,26400,27e3,32400,27e3,28800]},"Asia/Shanghai":{time:[-2177452800,-933465600,-923097600,-908755200,-891561600,515548800,52704e4,545184e3,558489600,576633600,589939200,608688e3,621993600,640137600,653443200,671587200,684892800,1925020800],offset:[29143,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800]},"Asia/Seoul":{time:[-1948752e3,-1830384e3,-767318400,-498096e3,-462672e3,-451699200,-429753600,-418262400,-399513600,-387417600,-368064e3,-355968e3,-336614400,-324518400,-305164800,-293068800,-264902400,547610400,560919600,57906e4,592369200,1925024400],
offset:[30472,30600,32400,32400,30600,34200,30600,34200,30600,34200,30600,34200,30600,34200,30600,34200,30600,32400,36e3,32400,36e3,32400]},"Asia/Tehran":{time:[-1704153600,-757382400,247190400,259286400,277776e3,283996800,290822400,306547200,322444800,338515200,673228800,685497600,701222400,71712e4,732758400,748656e3,764294400,780192e3,795830400,811728e3,827366400,843264e3,858988800,874886400,890524800,906422400,922060800,937958400,953596800,969494400,985219200,1001116800,1016755200,1032652800,1048291200,1064188800,1079827200,1095724800,1111449600,1127347200,1206057600,1221955200,123768e4,1253577600,1269216e3,1285113600,1300752e3,1316649600,1332288e3,1348185600,1363910400,1379808e3,1395446400,1411344e3,1426982400,144288e4,1458518400,1474416e3,1490140800,1506038400,1521676800,1537574400,1553212800,1569110400,1584748800,1600646400,1616371200,1632268800,1647907200,1663804800,1679443200,1695340800,1710979200,1726876800,1742601600,1758499200,1774137600,1790035200,1805673600,1821571200,1837209600,1853107200,1868745600,1884643200,1900368e3,1916265600,1931904e3],offset:[12344,12344,12600,14400,18e3,14400,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600,16200,12600]},"Asia/Dubai":{time:[-1577923200,1925006400],offset:[13272,14400]},"Asia/Kolkata":{time:[-3645216e3,-3155673600,-2019686400,-891561600,-872035200,-862617600,-764121600,1925011800],offset:[21208,21200,19270,19800,23400,19800,23400,19800]},"Asia/Hong_Kong":{time:[-2056665600,-907360200,-891635400,-884217600,-766713600,-747952200,-728512200,-717021e3,-694470600,-683757e3,-668032200,-654726600,-636582600,-623277e3,-605133e3,-591827400,-573683400,-559773e3,-542320200,-528323400,-510179400,-498083400,-478729800,-466633800,-446675400,-435184200,-415225800,-403129800,-383776200,-371680200,-352326600,-340230600,-320877e3,-308781e3,-288822600,-277331400,-257373e3,-245881800,-225923400,-213827400,-194473800,-182377800,-163024200,-148509e3,-132784200,-117059400,-101334600,-85609800,-69280200,-53555400,-37830600,-22105800,-6381e3,9343800,25068600,40793400,56518200,72243e3,88572600,104297400,120022200,126070200,151471800,167196600,182921400,198646200,214371e3,295414200,309324600,1925020800],offset:[27402,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800]},"Asia/Bangkok":{
time:[-2840140800,-1570060800,1925017200],offset:[24124,24124,25200]},"Asia/Chongqing":{time:[-2177452800,-933465600,-923097600,-908755200,-891561600,515548800,52704e4,545184e3,558489600,576633600,589939200,608688e3,621993600,640137600,653443200,671587200,684892800,1925020800],offset:[29143,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800,32400,28800]},"Asia/Jerusalem":{time:[-2840140800,-1640995200,-933638400,-857347200,-844293600,-825811200,-812678400,-794188800,-779846400,-762645600,-748303200,-731116800,-681955200,-673228800,-667951200,-65232e4,-636415200,-62208e4,-608936400,-59184e4,-572475600,-558568800,-542840400,-527724e3,-514414800,-490838400,-482976e3,-459468e3,-451526400,-428544e3,-418251600,-400024800,-387417600,142387200,150854400,167184e3,178675200,482284800,495590400,516758400,526435200,545443200,558489600,576633600,589334400,609897600,620784e3,638323200,651628800,669772800,683683200,701827200,715737600,733708800,747187200,765158400,778032e3,796608e3,810086400,826848e3,842832e3,858902400,874195200,890352e3,90504e4,923018400,936324e3,955677600,970794e3,986778e3,1001293200,1017363600,1033952400,1048813200,1065142800,1081299600,1095814800,1112320800,1128823200,1143770400,1159668e3,117522e4,1189908e3,1206669600,1223172e3,1238119200,1254016800,1269568800,1284256800,1301623200,1317520800,1333072800,1348365600,1364522400,1382839200,1395972e3,1414288800,1427421600,1445738400,1458871200,1477792800,1490320800,1509242400,1521770400,1540692e3,1553824800,1572141600,1585274400,1603591200,1616724e3,1635645600,1648173600,1667095200,1679623200,1698544800,1711677600,1729994400,1743127200,1761444e3,1774576800,1792893600,1806026400,1824948e3,1837476e3,1856397600,1868925600,1887847200,190098e4,1919296800,1932429600],offset:[8454,8440,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,14400,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200]},"Asia/Kuwait":{time:[-719625600,1925002800],offset:[11212,10800]},"Asia/Muscat":{time:[-1577923200,1925006400],offset:[13272,14400]},"Asia/Qatar":{time:[-1577923200,76204800,1925002800],offset:[12368,14400,10800]},"Asia/Riyadh":{time:[-719625600,1925002800],offset:[11212,10800]},"Pacific/Auckland":{
time:[-3192393600,-1330293600,-1320012e3,-1300658400,-1287352800,-1269208800,-1255903200,-1237759200,-1224453600,-1206309600,-1192399200,-117486e4,-1160949600,-1143410400,-1125871200,-1112565600,-1094421600,-1081116e3,-1062972e3,-1049666400,-1031522400,-1018216800,-1000072800,-986767200,-968018400,-955317600,-936568800,-923263200,-757382400,152676e3,162356400,183520800,195015600,215575200,226465200,247024800,257914800,278474400,289364400,309924e3,320814e3,341373600,352263600,372823200,384318e3,404877600,415767600,436327200,447217200,467776800,478666800,499226400,510116400,530676e3,541566e3,562125600,573620400,59418e4,60507e4,623815200,637729200,655264800,669178800,686714400,700628400,718164e3,732682800,749613600,764132400,781063200,795582e3,812512800,827031600,844567200,858481200,876016800,889930800,907466400,921985200,938916e3,953434800,970365600,984884400,100242e4,1016334e3,1033869600,1047783600,1065319200,1079838e3,1096768800,1111287600,1128218400,1142737200,1159668e3,1174186800,1191117600,1207450800,1222567200,1238900400,1254016800,127035e4,1285466400,1301799600,1316916e3,1333249200,1348970400,1365303600,138042e4,1396753200,1411869600,1428202800,1443319200,1459652400,1474768800,1491102e3,1506218400,1522551600,1538272800,1554606e3,1569722400,1586055600,1601172e3,1617505200,1632621600,1648954800,1664071200,1680404400,1695520800,1712458800,1727575200,1743908400,1759024800,1775358e3,1790474400,1806807600,1821924e3,1838257200,1853373600,1869706800,1885428e3,1901761200,1916877600,1933210800],offset:[41944,41400,45e3,41400,43200,41400,43200,41400,43200,41400,43200,41400,43200,41400,43200,41400,43200,41400,43200,41400,43200,41400,43200,41400,43200,41400,43200,41400,43200,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800,43200,46800]},"Pacific/Chatham":{
time:[-3192393600,-757382400,152678700,162359100,183523500,195018300,215577900,226467900,247027500,257917500,278477100,289367100,309926700,320816700,341376300,352266300,372825900,384320700,404880300,415770300,436329900,447219900,467779500,478669500,499229100,510119100,530678700,541568700,562128300,573623100,594182700,605072700,623817900,637731900,655267500,669181500,686717100,700631100,718166700,732685500,749616300,764135100,781065900,795584700,812515500,827034300,844569900,858483900,876019500,889933500,907469100,921987900,938918700,953437500,970368300,984887100,1002422700,1016336700,1033872300,1047786300,1065321900,1079840700,1096771500,1111290300,1128221100,1142739900,1159670700,1174189500,1191120300,1207453500,1222569900,1238903100,1254019500,1270352700,1285469100,1301802300,1316918700,1333251900,1348973100,1365306300,1380422700,1396755900,1411872300,1428205500,1443321900,1459655100,1474771500,1491104700,1506221100,1522554300,1538275500,1554608700,1569725100,1586058300,1601174700,1617507900,1632624300,1648957500,1664073900,1680407100,1695523500,1712461500,1727577900,1743911100,1759027500,1775360700,1790477100,1806810300,1821926700,1838259900,1853376300,1869709500,1885430700,1901763900,1916880300,1933213500],offset:[44028,44100,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500,45900,49500]},"Pacific/Fakaofo":{time:[-2177452800,1325203200,1925038800],offset:[-41096,-39600,46800]},"Pacific/Honolulu":{time:[-2334139200,-1157320800,-1155470400,-880236e3,-765410400,-712188e3,1924956e3],offset:[-37886,-37800,-34200,-37800,-34200,-37800,-36e3]},"America/Mexico_City":{
time:[-1514763396,-1343091600,-1234828800,-1220317200,-1207180800,-1191369600,-975283200,-963187200,-917136e3,-907372800,-821923200,-810086400,-627523200,-613008e3,828842400,846381600,860292e3,877831200,891741600,909280800,923191200,941335200,954640800,972784800,989114400,1001815200,1018144800,1035684e3,1049594400,1067133600,1081044e3,1099188e3,1112493600,1130637600,1143943200,1162087200,1175392800,1193536800,1207447200,1224986400,1238896800,1256436e3,1270346400,1288490400,1301796e3,131994e4,1333245600,1351389600,13653e5,1382839200,1396749600,1414288800,1428199200,1445738400,1459648800,1477792800,1491098400,1509242400,1522548e3,1540692e3,1554602400,1572141600,1586052e3,1603591200,1617501600,1635645600,1648951200,1667095200,1680400800,1698544800,1712455200,1729994400,1743904800,1761444e3,1775354400,1792893600,1806804e3,1824948e3,1838253600,1856397600,1869703200,1887847200,1901757600,1919296800,1933207200],offset:[-23796,-25200,-21600,-25200,-21600,-25200,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600,-18e3,-21600]},"Africa/Cairo":{time:[-2185401600,-929836800,-923097600,-906163200,-892857600,-875836800,-857779200,-844300800,-825811200,-812678400,-794188800,-779846400,-762652800,-399081600,-38664e4,-368323200,-355104e3,-336783600,-323643600,-305161200,-292021200,-273625200,-260485200,-242089200,-228949200,-210553200,-197413200,-178930800,-165790800,-147394800,-134254800,-115858800,-102632400,-84322800,-71096400,-52700400,-39474e3,-21164400,-7938e3,10371600,23598e3,41907600,55134e3,7353e4,86756400,105066e3,118292400,136602e3,149828400,168138e3,181364400,199760400,212986800,231296400,244522800,262832400,276058800,294368400,307594800,325990800,339217200,357526800,370753200,396406800,402289200,426819600,433825200,452221200,465447600,483757200,496983600,515293200,528519600,546829200,560055600,578451600,591678e3,610419600,623214e3,641523600,65475e4,673059600,686286e3,704682e3,717908400,736218e3,749444400,767754e3,780980400,799027200,812332800,830476800,843782400,861926400,875232e3,893376e3,906681600,925430400,938736e3,95688e4,970185600,988329600,1001635200,1019779200,1033084800,1051228800,1064534400,1083283200,1096588800,1114732800,1128038400,1146182400,1158883200,1177632e3,1189123200,1209081600,1219968e3,1240531200,1250812800,1272585600,1281484800,1284076800,1285891200,1400198400,1403827200,1406851200,1411689600,1924999200],
offset:[7509,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200]},"Africa/Johannesburg":{time:[-2458166400,-2109283200,-860968800,-845244e3,-829519200,-813794400,1924999200],offset:[6720,5400,7200,10800,7200,10800,7200]},"Asia/Kathmandu":{time:[-1577923200,504921600,1925012700],offset:[20476,19800,20700]},"US/Mountain":{time:[-2717668796,-1633298400,-1615154400,-1601848800,-1583704800,-1570399200,-1551650400,-1538949600,-1534111200,-880236e3,-769417200,-765410400,-147909600,-13158e4,-11646e4,-100130400,-84405600,-68680800,-52956e3,-37231200,-21506400,-5781600,9943200,25668e3,41392800,57722400,73447200,89172e3,104896800,120621600,126669600,152071200,162352800,183520800,199245600,215575200,230695200,247024800,262749600,278474400,294199200,309924e3,325648800,341373600,357098400,372823200,388548e3,404877600,419997600,436327200,452052e3,467776800,483501600,499226400,514951200,530676e3,544586400,562125600,576036e3,59418e4,607485600,625629600,638935200,657079200,670989600,688528800,702439200,719978400,733888800,752032800,765338400,783482400,796788e3,814932e3,828842400,846381600,860292e3,877831200,891741600,909280800,923191200,941335200,954640800,972784800,986090400,1004234400,1018144800,1035684e3,1049594400,1067133600,1081044e3,1099188e3,1112493600,1130637600,1143943200,1162087200,1173578400,1194141600,1205028e3,1225591200,1236477600,1257040800,1268532e3,1289095200,1299981600,1320544800,1331431200,1351994400,1362880800,1383444e3,1394330400,1414893600,142578e4,1446343200,1457834400,1478397600,1489284e3,1509847200,1520733600,1541296800,1552183200,1572746400,1583632800,1604196e3,1615687200,1636250400,1647136800,16677e5,1678586400,1699149600,1710036e3,1730599200,1741485600,1762048800,1772935200,1793498400,1804989600,1825552800,1836439200,1857002400,1867888800,1888452e3,1899338400,1919901600,1930788e3],
offset:[-25196,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200,-21600,-25200]},"Europe/Helsinki":{time:[-2890252800,-1535932800,-875664e3,-859762800,354679200,370407600,386128800,401857200,417582e3,433310400,449031600,465364800,481086e3,496814400,512535600,528264e3,543985200,559713600,575434800,591163200,606884400,622612800,638334e3,654667200,670388400,686116800,701838e3,717566400,733287600,749016e3,764737200,780465600,796186800,811915200,828241200,846388800,859690800,877838400,891140400,909288e3,92259e4,941342400,954039600,972792e3,985489200,1004241600,1017543600,1035691200,1048993200,1067140800,1080442800,1099195200,1111892400,1130644800,1143342e3,1162094400,1174791600,1193544e3,1206846e3,1224993600,1238295600,1256443200,1269745200,1288497600,1301194800,1319947200,1332644400,1351396800,1364698800,1382846400,1396148400,1414296e3,1427598e3,1445745600,1459047600,14778e5,1490497200,1509249600,1521946800,1540699200,1554001200,1572148800,1585450800,1603598400,1616900400,1635652800,164835e4,1667102400,1679799600,1698552e3,1711854e3,1730001600,1743303600,1761451200,1774753200,1792900800,1806202800,1824955200,1837652400,1856404800,1869102e3,1887854400,1901156400,1919304e3,1932606e3],offset:[5989,5989,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200]},"Europe/Stockholm":{
time:[-2871676800,-2208988800,-1692493200,-1680476400,323834400,338958e3,354679200,370407600,386128800,401857200,417578400,433306800,449028e3,465361200,481082400,496810800,512532e3,528260400,543981600,55971e4,575431200,591159600,606880800,622609200,638330400,654663600,670384800,686113200,701834400,717562800,733284e3,749012400,764733600,780462e3,796183200,811911600,828237600,846385200,859687200,877834800,891136800,909284400,922586400,941338800,954036e3,972788400,985485600,1004238e3,101754e4,1035687600,1048989600,1067137200,1080439200,1099191600,1111888800,1130641200,1143338400,1162090800,1174788e3,1193540400,1206842400,122499e4,1238292e3,1256439600,1269741600,1288494e3,1301191200,1319943600,1332640800,1351393200,1364695200,1382842800,1396144800,1414292400,1427594400,1445742e3,1459044e3,1477796400,1490493600,1509246e3,1521943200,1540695600,1553997600,1572145200,1585447200,1603594800,1616896800,1635649200,1648346400,1667098800,1679796e3,1698548400,1711850400,1729998e3,17433e5,1761447600,1774749600,1792897200,1806199200,1824951600,1837648800,1856401200,1869098400,1887850800,1901152800,1919300400,1932602400],offset:[4332,3614,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600]},"Europe/Copenhagen":{time:[-2524521600,-2398291200,-1692493200,-1680483600,-935107200,-85725e4,-844552800,-828219600,-812498400,-79677e4,-781048800,-769381200,-747007200,-736376400,-715212e3,-706741200,-683157600,-675291600,323834400,338958e3,354679200,370407600,386128800,401857200,417578400,433306800,449028e3,465361200,481082400,496810800,512532e3,528260400,543981600,55971e4,575431200,591159600,606880800,622609200,638330400,654663600,670384800,686113200,701834400,717562800,733284e3,749012400,764733600,780462e3,796183200,811911600,828237600,846385200,859687200,877834800,891136800,909284400,922586400,941338800,954036e3,972788400,985485600,1004238e3,101754e4,1035687600,1048989600,1067137200,1080439200,1099191600,1111888800,1130641200,1143338400,1162090800,1174788e3,1193540400,1206842400,122499e4,1238292e3,1256439600,1269741600,1288494e3,1301191200,1319943600,1332640800,1351393200,1364695200,1382842800,1396144800,1414292400,1427594400,1445742e3,1459044e3,1477796400,1490493600,1509246e3,1521943200,1540695600,1553997600,1572145200,1585447200,1603594800,1616896800,1635649200,1648346400,1667098800,1679796e3,1698548400,1711850400,1729998e3,17433e5,1761447600,1774749600,1792897200,1806199200,1824951600,1837648800,1856401200,1869098400,1887850800,1901152800,1919300400,1932602400],
offset:[3020,3020,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600,7200,3600]},"Atlantic/Reykjavik":{time:[-1956614400,-1668214800,-1647212400,-1636678800,-161343e4,-1605142800,-1581894e3,-1539565200,-153135e4,-968029200,-952293600,-942012e3,-920239200,-909961200,-888789600,-877906800,-857944800,-846457200,-826495200,-815007600,-795045600,-783558e3,-762991200,-752108400,-731541600,-717634800,-700092e3,-686185200,-668642400,-654735600,-636588e3,-623286e3,-605743200,-591836400,-573688800,-559782e3,-542239200,-528332400,-510789600,-496882800,-47934e4,-465433200,-447890400,-433983600,-415836e3,-401929200,-384386400,-370479600,-352936800,-33903e4,-321487200,-307580400,-290037600,-276130800,-258588e3,-244681200,-226533600,-212626800,-195084e3,-181177200,-163634400,-149727600,-132184800,-118278e3,-100735200,-86828400,-68680800,-54774e3,1924992e3],offset:[-5280,-3600,0,-3600,0,-3600,0,-3600,0,-3600,0,-3600,0,-3600,0,-3600,0,-3600,0,-3600,0,-3600,0,-3600,0,-3600,0,-3600,0,-3600,0,-3600,0,-3600,0,-3600,0,-3600,0,-3600,0,-3600,0,-3600,0,-3600,0,-3600,0,-3600,0,-3600,0,-3600,0,-3600,0,-3600,0,-3600,0,-3600,0,-3600,0,-3600,0,-3600,0]},"Europe/Tallinn":{time:[-2840140800,-1638316800,-1632002400,-1618693200,-1593820800,-1535932800,-927936e3,-892944e3,-85725e4,-844552800,-828219600,-812498400,-797644800,354931200,370742400,386467200,402278400,418003200,433814400,449625600,465361200,481082400,496810800,512532e3,528260400,543981600,55971e4,575431200,591159600,606880800,622609200,638330400,654663600,670384800,686113200,701834400,717562800,733284e3,749012400,764733600,780462e3,796183200,811911600,828237600,846385200,859687200,877834800,891136800,909288e3,92259e4,941342400,1017543600,1035691200,1048993200,1067140800,1080442800,1099195200,1111892400,1130644800,1143342e3,1162094400,1174791600,1193544e3,1206846e3,1224993600,1238295600,1256443200,1269745200,1288497600,1301194800,1319947200,1332644400,1351396800,1364698800,1382846400,1396148400,1414296e3,1427598e3,1445745600,1459047600,14778e5,1490497200,1509249600,1521946800,1540699200,1554001200,1572148800,1585450800,1603598400,1616900400,1635652800,164835e4,1667102400,1679799600,1698552e3,1711854e3,1730001600,1743303600,1761451200,1774753200,1792900800,1806202800,1824955200,1837652400,1856404800,1869102e3,1887854400,1901156400,1919304e3,1932606e3],
offset:[5940,5940,3600,7200,3600,5940,7200,10800,7200,3600,7200,3600,7200,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200]},"Europe/Riga":{time:[-2840140800,-1632002400,-1618693200,-1601676e3,-1597266e3,-1377302400,-928022400,-899510400,-85725e4,-844552800,-828219600,-812498400,-79677e4,-795830400,354931200,370742400,386467200,402278400,418003200,433814400,449625600,465361200,481082400,496810800,512532e3,528260400,543981600,55971e4,575431200,591159600,606880800,622609200,638330400,654663600,670384800,686113200,701834400,717562800,733284e3,749012400,764733600,780462e3,796183200,811911600,828237600,843966e3,859690800,877838400,891140400,909288e3,92259e4,941342400,985489200,1004241600,1017543600,1035691200,1048993200,1067140800,1080442800,1099195200,1111892400,1130644800,1143342e3,1162094400,1174791600,1193544e3,1206846e3,1224993600,1238295600,1256443200,1269745200,1288497600,1301194800,1319947200,1332644400,1351396800,1364698800,1382846400,1396148400,1414296e3,1427598e3,1445745600,1459047600,14778e5,1490497200,1509249600,1521946800,1540699200,1554001200,1572148800,1585450800,1603598400,1616900400,1635652800,164835e4,1667102400,1679799600,1698552e3,1711854e3,1730001600,1743303600,1761451200,1774753200,1792900800,1806202800,1824955200,1837652400,1856404800,1869102e3,1887854400,1901156400,1919304e3,1932606e3],offset:[5794,5794,9394,5794,9394,5794,7200,10800,7200,3600,7200,3600,7200,3600,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200]},"Europe/Vilnius":{
time:[-2840140800,-1672531200,-1585094400,-1561248e3,-1553558400,-928195200,-900115200,-85725e4,-844552800,-828219600,-812498400,-802137600,354931200,370742400,386467200,402278400,418003200,433814400,449625600,465361200,481082400,496810800,512532e3,528260400,543981600,55971e4,575431200,591159600,606880800,622609200,638330400,654663600,670384800,686113200,701834400,717562800,733284e3,749012400,764733600,780462e3,796183200,811911600,828237600,846385200,859687200,877834800,891140400,909284400,922586400,941338800,1048993200,1067140800,1080442800,1099195200,1111892400,1130644800,1143342e3,1162094400,1174791600,1193544e3,1206846e3,1224993600,1238295600,1256443200,1269745200,1288497600,1301194800,1319947200,1332644400,1351396800,1364698800,1382846400,1396148400,1414296e3,1427598e3,1445745600,1459047600,14778e5,1490497200,1509249600,1521946800,1540699200,1554001200,1572148800,1585450800,1603598400,1616900400,1635652800,164835e4,1667102400,1679799600,1698552e3,1711854e3,1730001600,1743303600,1761451200,1774753200,1792900800,1806202800,1824955200,1837652400,1856404800,1869102e3,1887854400,1901156400,1919304e3,1932606e3],offset:[6076,5040,5736,3600,7200,3600,10800,7200,3600,7200,3600,7200,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,14400,10800,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,7200,3600,7200,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200,10800,7200]},"America/Lima":{time:[-2524521600,-1938556800,-1009843200,-1002067200,-986774400,-971049600,-955324800,-9396e5,504921600,512697600,536457600,544233600,631152e3,638928e3,757382400,765158400,1924974e3],offset:[-18492,-18516,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3]},"America/Santiago":{
time:[-2524521600,-1892678400,-1688428800,-1619222400,-1593820800,-1336003200,-13176e5,-1304380800,-1286064e3,-1272844800,-1254528e3,-1241308800,-1222992e3,-1209772800,-1191369600,-1178150400,-870566400,-865296e3,-740534400,-736387200,-718070400,-713667600,-36633600,-23932800,-3369600,7516800,24451200,37756800,55900800,69206400,87955200,100656e3,118195200,132105600,150854400,163555200,182304e3,195609600,213753600,227059200,245203200,258508800,277257600,289958400,308707200,321408e3,340156800,353462400,371606400,384912e3,403056e3,416361600,434505600,447811200,46656e4,479260800,498009600,510710400,529459200,545184e3,560908800,574214400,592358400,605664e3,624412800,637113600,653443200,668563200,687312e3,700617600,718761600,732067200,750211200,763516800,781660800,794966400,813715200,826416e3,845164800,85968e4,876614400,88992e4,906854400,923184e3,939513600,952819200,971568e3,984268800,1003017600,1015718400,1034467200,1047168e3,1065916800,1079222400,1097366400,1110672e3,1128816e3,1142121600,1160870400,1173571200,119232e4,1206835200,1223769600,1237075200,1255219200,1270339200,1286668800,1304812800,1313884800,1335657600,1346544e3,1367107200,1378598400,1398556800,1410048e3,1463270400,1471132800,149472e4,1502582400,1526169600,1534032e3,1557619200,1565481600,1589068800,1596931200,1620518400,1628985600,1652572800,1660435200,1684022400,1691884800,1715472e3,1723334400,1746921600,1754784e3,1778371200,1786233600,1809820800,1818288e3,1841875200,1849737600,1873324800,1881187200,1904774400,1912636800,1936224e3],offset:[-16966,-16966,-18e3,-16966,-14400,-16966,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-18e3,-14400,-10800,-14400,-18e3,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800,-14400,-10800]},"Asia/Bahrain":{time:[-1577923200,76204800,1925002800],offset:[12368,14400,10800]},"Asia/Jakarta":{time:[-3231273600,-1451693568,-117288e4,-876614400,-766022400,-683856e3,-620784e3,-189388800,1925017200],offset:[25632,25632,26400,27e3,32400,27e3,28800,27e3,25200]},"Africa/Lagos":{time:[-1588464e3,1924995600],offset:[816,3600]},"Pacific/Norfolk":{time:[-2177452800,-599616e3,152071200,162957600,1443924e3,1925031600],offset:[40312,40320,41400,45e3,41400,39600]},"America/Juneau":{
time:[-3225169588,-2188987200,-880236e3,-769420800,-765410400,-21506400,-5781600,9943200,25668e3,41392800,57722400,73447200,89172e3,104896800,120621600,126669600,152071200,162352800,183520800,199245600,215575200,230695200,247024800,262749600,278474400,294199200,309924e3,325648800,341373600,357098400,372823200,388548e3,404877600,419997600,436327200,438998400,452052e3,467776800,483501600,499226400,514951200,530676e3,544586400,562125600,576036e3,59418e4,607485600,625629600,638935200,657079200,670989600,688528800,702439200,719978400,733888800,752032800,765338400,783482400,796788e3,814932e3,828842400,846381600,860292e3,877831200,891741600,909280800,923191200,941335200,954640800,972784800,986090400,1004234400,1018144800,1035684e3,1049594400,1067133600,1081044e3,1099188e3,1112493600,1130637600,1143943200,1162087200,1173578400,1194141600,1205028e3,1225591200,1236477600,1257040800,1268532e3,1289095200,1299981600,1320544800,1331431200,1351994400,1362880800,1383444e3,1394330400,1414893600,142578e4,1446343200,1457834400,1478397600,1489284e3,1509847200,1520733600,1541296800,1552183200,1572746400,1583632800,1604196e3,1615687200,1636250400,1647136800,16677e5,1678586400,1699149600,1710036e3,1730599200,1741485600,1762048800,1772935200,1793498400,1804989600,1825552800,1836439200,1857002400,1867888800,1888452e3,1899338400,1919901600,1930788e3],offset:[54139,-32261,-28800,-25200,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-25200,-28800,-28800,-28800,-25200,-28800,-25200,-28800,-25200,-32400,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400,-28800,-32400]},"Asia/Ho_Chi_Minh":{time:[-2004048e3,-1851552e3,-852080400,-782614800,-767836800,-718070400,-457747200,-315622800,171849600,1925017200],offset:[25600,25590,25200,28800,32400,25200,28800,25200,28800,25200]}}},function(t,e,i){"use strict";function n(t){var e,i,o,r;if("object"!=typeof t||null==t||"number"==typeof t.nodeType)e=t;else if(Array.isArray(t))for(e=[],i=0,o=t.length;i<o;i++)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=n(t[i]));else{e={};for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=n(t[r]))}return e}function o(t,e,i){var n,r;return void 0!==t&&void 0!==e&&(n=i.indexOf("."),-1!==n?(r=i.substring(0,n),o(t[r],e[r],i.substring(n+1))):t[i]===e[i])}function r(t){return(1===t?window.t("Bought"):window.t("Sold")).toUpperCase()}function s(t,e){
return t.enabled.value()&&(e.soundName=t.name),e}var a,l,c,h,u,d,p,_,f,m,g,y,v,b,S,w,P,T,C;Object.defineProperty(e,"__esModule",{value:!0}),a=i(56),l=i(596),c=i.n(l),h=i(597),u=i(28),d=i(0),i(9),p=i(6),i(31),_=i(82),f=i(194),m=i(4),g=i(150),y=i(600),v=i(123),b=i(44),S=["qty","stopPrice","limitPrice","filledQty","status"],w=function(t){function e(e){var i=t.call(this,e)||this;return i._orders=[],i._playSound=Object(v.debounce)(i._playSoundImpl,50),y.enableAlertSoundsForMobile(),i}return d.c(e,t),e.prototype.startService=function(){var t=this,e=Object(p.ensure)(this.activeBroker());e.orders().then(function(e){return t._orders=n(e)}),e.orderUpdate.subscribe(this,this._orderUpdate)},e.prototype.stopService=function(){Object(p.ensure)(this.activeBroker()).orderUpdate.unsubscribe(this,this._orderUpdate)},e.prototype._showNotification=function(t,e,i){m.enabled("trading_notifications")&&("error"===i?this.trading().showErrorNotification(t,e):this.trading().showSuccessNotification(t,e))},e.prototype._formatter=function(t){return Object(b.getQuoteSessionInstance)("simple").formatter(t)},e.prototype._checkOrderModified=function(t,e){var i=this.activeBroker(),n=i&&i.metainfo().customNotificationFields||[],r=S.concat(n),s=!1;return r.forEach(function(i){s||o(t,e,i)||(s=!0)}),s},e.prototype._generateNotificationsInfo=function(t,e){var i=[],n=t.statusMessage?": "+t.statusMessage:"",o=r(t.side),a=this.trading().orderExecutedSoundParams;return e?(this._checkOrderModified(t,e)&&(1===t.status?i.push({text:window.t("cancelled")}):6===t.status&&e.filledQty!==t.filledQty?i.push(s(a,{side:o,text:window.t("executed partially")})):6===t.status||3===t.status?i.push({text:window.t("modified")}):2===t.status&&i.push(s(a,{side:o,text:window.t("executed")}))),$.extend(e,t)):6===t.status?(this._orders.push(t),i.push({text:window.t("placed")}),this.trading().trackEvent("","Order placed symbol",t.symbol)):5===t.status?(this._orders.push(t),i.push({text:window.t("rejected")+n,type:"error"})):2===t.status&&(this._orders.push(t),i.push({text:window.t("placed")},s(a,{side:o,text:window.t("executed"),emptyOrderType:!0})),this.trading().trackEvent("","Order placed symbol",t.symbol)),i},e.prototype._orderUpdate=function(t,e){var i,o,r=this,s=n(t);e||(i=this._orders.find(function(t){return t.id===s.id}))&&_.isFinalOrderStatus(i.status)||(o=this._generateNotificationsInfo(s,i),0!==o.length&&this._formatter(s.symbol).then(function(t){var e,i=_.sideToText(s.side,!0),n="",a="",l=s.qty;switch(s.type){case 2:n=s.avgPrice?" ("+_.orderTypeToText(s.type)+")":"",a=s.avgPrice?t.format(s.avgPrice):_.orderTypeToText(s.type);break;case 4:n=" "+window.t("(Limit) after {0} (Stop) crossed").format(t.format(s.stopPrice)),a=t.format(s.avgPrice||s.limitPrice);break;default:n=" ("+_.orderTypeToText(s.type)+")",a=t.format(s.avgPrice||s.limitPrice||s.stopPrice)}s.hasOwnProperty("filledQty")&&void 0!==s.filledQty&&s.filledQty>0&&(l=s.filledQty),e=Object(g.splitThousands)(Math.abs(l))+" "+(s.brokerSymbol||s.symbol)+" "+window.t("at")+" "+a,o.forEach(function(t){
var o=t.side,a=t.text,l=t.type,c=t.emptyOrderType,h=t.soundName,u=window.t("Order")+" "+s.id+" "+a,d=(o||i)+" "+e+" "+(c?"":n);void 0!==h&&r._playSound(h),r._showNotification(u,d,l)})}))},e.prototype._playSoundImpl=function(t){var e=this;if(this._playingSound){if(this._playingSound===t)return;y.stop(this._playingSound)}y.play(t).then(function(){e._playingSound=t}),y.onStopped(t,function(){delete e._playingSound})},e}(f.a),P=i(310),T=i(26),i.d(e,"TradingGuiAccessor",function(){return C}),C=function(){function t(){this._registeredChartWidgets={}}return t.prototype.proSymbol=function(){return a.linking.proSymbol.value()},t.prototype.init=function(t){this._trading=t,new w(this._trading)},t.prototype.showTradingProperties=function(){var t=Object(P.chartWidgetCollectionService)();t&&(Object(T.setValue)("properties_dialog.active_tab.chart","Trading"),t.activeChartWidget.value().showChartProperties())},t.prototype.showNotification=function(t,e,i,n){var o="";"string"==typeof e&&(o=e),h.tvToasts.toast({text:o,time:n,title:t,type:i})},t.prototype.showMaintenance=function(t){},t.prototype.registerChartWidget=function(t){this._registeredChartWidgets[t.id()]=new c.a(t,this._trading)},t.prototype.unregisterChartWidget=function(t){this._registeredChartWidgets[t.id()].stop(),delete this._registeredChartWidgets[t.id()]},t.prototype.trackEvent=function(t,e,i){Object(u.trackEvent)(t,e,i)},t.prototype.showReplayConfirmationDialog=function(){return Promise.resolve()},t.prototype.reconnectChartApi=function(t){},t}()},function(t,e,i){"use strict";function n(t,e){var i,n;if(t.side===e.side)return!1;if(i=t.limitPrice||t.stopPrice,n=e.limitPrice||e.stopPrice,t.side===s.BUY){if(e.type===a.LIMIT&&n<i||e.type===a.STOP&&n>i)return!1}else if(e.type===a.LIMIT&&n>i||e.type===a.STOP&&n<i)return!1;return!0}var o=i(118),r=o.CONNECTSTATUSES,s=o.SIDE,a=o.ORDERTYPE,l=o.ORDERSTATUS,c=o.TICKETFOCUS,h=o.PARENTTYPE,u=i(13).PriceFormatter,d=i(193).QuantityFormatter,p=i(30).Action,_=i(82),f=i(5).getLogger("Trading.ChartWidgetController"),m=i(150).splitThousands,g=i(36),y=function(t,e){this._chartWidget=t,this._trading=e,this._updateExecutionsTimeout=null,this._positionProfitHandlerBinded=this._positionProfitHandler.bind(this),this._trading.onConnectionStatusChange.subscribe(this,this.onStatusChanged),this._formatter=new u,this._quantityFormatter=new d,this._ordersInModify={},this._tradesMode=!1,this._ordersMap={};var i=t.model().mainSeries();i.onSymbolResolved().subscribe(this,this.onSymbolChanged),i.onSymbolError().subscribe(this,this.onSymbolChanged),this.onStatusChanged(),this.onSymbolChanged()};y.prototype.stop=function(){this.reset(),this._trading.onConnectionStatusChange.unsubscribe(this,this.onStatusChanged);var t=this._chartWidget.model().mainSeries();t.onSymbolResolved().unsubscribe(this,this.onSymbolChanged),t.onSymbolError().unsubscribe(this,this.onSymbolChanged)},y.prototype.broker=function(){return this._trading.activeBroker()},y.prototype.removeObjects=function(){var t,e,i;for(t in this._executions)this._executions[t]._adapter.remove()
;for(e in this._orders)this._orders[e].mainTool._adapter.remove(),this._orders[e].addTool&&this._orders[e].addTool._adapter.remove();for(i in this._positions)this._positions[i]._adapter.remove(),this._tradesMode?this._broker.unsubscribeTradePL(i,this._positionProfitHandlerBinded):this._broker.unsubscribePL(i,this._positionProfitHandlerBinded);this._executions={},this._orders={},this._positions={}},y.prototype.updateAllWhenLoaded=function(){this._scheduledUpdate||(this._chartWidget.model().mainSeries().data().isEmpty()?(this._scheduledUpdate=!0,this._chartWidget.model().mainSeries().onCompleted().subscribe(this,this.updateAll,!0)):this.updateAll())},y.prototype.updateAll=function(){var t,e=this;this._updateExecutionsTimeout&&clearTimeout(this._updateExecutionsTimeout),this.removeObjects(),this._scheduledUpdate=!1,this._symbol&&this._broker&&this._broker.connectionStatus()===r.CONNECTED&&(t=this._tradesMode?this._broker.trades(this._symbol):this._broker.positions(this._symbol),t.then(function(t){t.forEach(function(t){e.onPositionUpdate(t)})}),this._broker.orders(this._symbol).then(function(t){t.forEach(function(t){e._ordersMap[t.id]=t}),t.forEach(function(t){e.onOrderUpdate(t)})}),this._broker.executions(this._symbol).then(function(t){function i(t){var i=e._chartWidget.model().model(),n=i.paneForSource(i.mainSeries());n.beginInsertManyLineDataSources(),t.forEach(function(t){e.onExecutionUpdate(t)}),n.endInsertManyLineDataSources()}function n(r){if(r>t.length)return void(e._updateExecutionsTimeout=null);var s=r+o;i(t.slice(r,s)),e._updateExecutionsTimeout=setTimeout(n.bind(null,s),1500)}var o=200;n(0)}))},y.prototype.onSymbolChanged=function(t){this._symbol=void 0!==t?t.pro_name||t.full_name:this._chartWidget.model().mainSeries().proSymbol(),this._updateAll()},y.prototype._updateAll=function(){this.removeObjects(),this._symbol&&this._broker&&this._broker.connectionStatus()===r.CONNECTED&&(this.updateAllWhenLoaded(),this.updateFormatters())},y.prototype._computeTradesMode=function(){if(!this._broker)return!1;var t=this._broker.metainfo().configFlags;return!!t.supportTrades&&(!t.supportPositionBrackets&&!!t.supportCloseTrade)},y.prototype.updateFormatters=function(){var t,e,i;this._symbol&&this._broker&&(t=this,e=this._broker.formatter(this._symbol),i=this._broker.quantityFormatter(this._symbol),Promise.all([e,i]).then(function(e){t._formatter=e[0],t._quantityFormatter=e[1],t.updateAllWhenLoaded()}))},y.prototype.onStatusChanged=function(){var t=this._trading.activeBroker()&&this._trading.activeBroker().connectionStatus()===r.CONNECTED;this._broker===this._trading.activeBroker()&&t||(this._broker&&this.reset(),t&&(this._broker=this._trading.activeBroker(),this._broker.fullUpdate.subscribe(this,this._updateAll),this._tradesMode=this._computeTradesMode(),this._tradesMode?this._broker.tradeUpdate.subscribe(this,y.prototype.onPositionUpdate):this._broker.positionUpdate.subscribe(this,y.prototype.onPositionUpdate),this._broker.orderUpdate.subscribe(this,y.prototype.onOrderUpdate),
this._broker.executionUpdate.subscribe(this,y.prototype.onExecutionUpdate),this.updateFormatters(),this._updateAll()))},y.prototype.reset=function(){this._updateExecutionsTimeout&&clearTimeout(this._updateExecutionsTimeout),this.removeObjects(),this._broker&&(this._broker.fullUpdate.unsubscribe(this,this._updateAll),this._tradesMode?this._broker.tradeUpdate.unsubscribe(this,y.prototype.onPositionUpdate):this._broker.positionUpdate.unsubscribe(this,y.prototype.onPositionUpdate),this._broker.orderUpdate.unsubscribe(this,y.prototype.onOrderUpdate),this._broker.executionUpdate.unsubscribe(this,y.prototype.onExecutionUpdate)),this._broker=null,this._formatter=new u},y.prototype.redraw=function(){var t=this._chartWidget.model().model(),e=t.paneForSource(t.mainSeries());t.updatePane(e)},y.prototype.positionSideColor=function(t){return t.side===s.BUY?"rgb(64,148,232)":"rgb(231,86,86)"},y.prototype.profitColor=function(t){var e=Math.round(100*t)/100;return e>0?"rgb(38,140,2)":e<0?"rgb(231,86,86)":"rgb(100,100,100)"},y.prototype._positionProfitFormatter=function(t){return isNumber(t)?m((Math.round(100*t)/100||0).toFixed(2)," "):$.t("n/a")},y.prototype._positionProfitHandler=function(t,e){this._positions[t]._adapter.setText(g.startWithLTR(this._positionProfitFormatter(e))).setBodyTextColor(this.profitColor(e))},y.prototype.onPositionUpdate=function(t){var e,i,n,o,r,a,l,c,h,u,d;t.symbol===this._symbol&&(e=t.id,i="Chart Position",this._positions[e]&&(t.qty||(this._positions[e]._adapter.remove(),this._tradesMode?this._broker.unsubscribeTradePL(t.id,this._positionProfitHandlerBinded):this._broker.unsubscribePL(t.id,this._positionProfitHandlerBinded),delete this._positions[e])),f.logDebug("TRADING. Update position. Symbol:"+t.symbol+" , qty:"+t.qty),t.qty&&(n=this,o=this._chartWidget,r=function(e){n._positions[t.id]&&e._adapter.unblock()},a=this._trading.activeBroker().metainfo().configFlags,l=this._tradesMode&&a.supportCloseTrade||!this._tradesMode&&a.supportClosePosition,this._positions[e]||(c=o.model().model(),h=c.paneForSource(o.model().model().mainSeries()),u=c.createLineTool(h,{price:Math.abs(this._tradesMode?t.price:t.avgPrice),index:0},"LineToolPosition"),u.position=t,l&&u._adapter.onClose(function(){n._trading.trackEvent(i,"Close Position"),u._adapter.block(),(n._tradesMode?n._broker.closeTrade(t.id,!0):n._broker.closePosition(t.id,!0)).then(function(){r(u)}).catch(function(){r(u)})}),!this._tradesMode&&a.supportReversePosition&&u._adapter.onReverse(function(){n._trading.trackEvent(i,"Reverse Position"),u._adapter.block(),n._broker.reversePosition(t.id).then(function(){r(u)}).catch(function(){r(u)})}),this._positions[e]=u,this._tradesMode?this._broker.subscribeTradePL(t.id,this._positionProfitHandlerBinded):this._broker.subscribePL(t.id,this._positionProfitHandlerBinded)),d=this.positionSideColor(t),Math.abs(t.qty)||f.logError("set position qty to 0!"),
this._positions[e]._adapter.setPrice(Math.abs(this._tradesMode?t.price:t.avgPrice)).setQuantity(Math.abs(t.qty)*(t.side===s.BUY?1:-1)).setQuantityBackgroundColor(d).setBodyBorderColor(d).setReverseButtonBorderColor(d).setReverseButtonIconColor(d).setCloseButtonIconColor(d).setCloseButtonBorderColor(d).setQuantityBorderColor(d).setLineColor(d).setCloseEnabled(!this._tradesMode||t.canBeClosed).onContextMenu(function(){var e,i,o,r=[],s="Chart Position Context Menu";return!n._tradesMode&&a.supportPositionBrackets?(e=new p({text:$.t("Protect Position...")}),e.callbacks().subscribe(null,function(){n._trading.trackEvent(s,"Edit Position"),n._broker.editPositionBrackets(t.id)}),r.push(e)):n._tradesMode&&a.supportTradeBrackets&&(e=new p({text:$.t("Protect Position...")}),e.callbacks().subscribe(null,function(){n._trading.trackEvent(s,"Edit Position"),n._broker.editTradeBrackets(t.id)}),r.push(e)),!l||n._tradesMode&&!t.canBeClosed||(i=new p({text:$.t("Close Position")}),i.callbacks().subscribe(null,function(){n._trading.trackEvent(s,"Close Position"),n._tradesMode?n._broker.closeTrade(t.id):n._broker.closePosition(t.id)}),r.push(i)),!n._tradesMode&&a.supportReversePosition&&(o=new p({text:$.t("Reverse Position")}),o.callbacks().subscribe(null,function(){n._trading.trackEvent(s,"Reverse Position"),n._broker.reversePosition(t.id)}),r.push(o)),r}),!this._tradesMode&&a.supportPositionBrackets?this._positions[e]._adapter.onModify(function(){n._trading.trackEvent(i,"Edit Position"),n._broker.editPositionBrackets(t.id)}):this._tradesMode&&a.supportTradeBrackets&&this._positions[e]._adapter.onModify(function(){n._trading.trackEvent(i,"Edit Position"),n._broker.editTradeBrackets(t.id)}),this._positions[e].updateAllViews(),this.redraw()))},y.prototype.orderTextColor=function(t,e){if(t.parentId){if(t.type===a.LIMIT)return e?"rgba(38,140,2,.5)":"rgb(38,140,2)";if(t.type===a.STOP)return e?"rgba(231,86,86,.5)":"rgb(231,86,86)"}return this.orderSideColor(t,e)},y.prototype.orderSideColor=function(t,e){return t.side===s.BUY?e?"rgba(64,148,232,.5)":"rgb(64,148,232)":e?"rgba(231,86,86,.5)":"rgb(231,86,86)"},y.prototype.sideToText=_.sideToText,y.prototype.orderText=function(t){if(t.parentId){var e=this._ordersMap[t.parentId];if(t.parentType!==h.ORDER||e&&n(e,t)){if(t.type===a.STOP)return $.t("STOP LOSS");if(t.type===a.LIMIT)return $.t("TAKE PROFIT")}}return(this.sideToText(t.side)+" "+_.orderTypeToText(t.type)).toUpperCase()},y.prototype.getNestedOrders=function(t){return this._broker.orders().then(function(e){var i,n=e.find(function(e){return e.id===t});return n.parentId?(i=e.find(function(t){return t.id===n.parentId}),e.filter(function(t){return t.parentId===n.parentId}).concat(i)):e.filter(function(t){return t.parentId===n.id}).concat(n)}).then(function(t){return t.filter(Boolean).map(function(t){return t.id})})},y.prototype._performNestedOrdersOperation=function(t,e){this.getNestedOrders(t).then(function(t){t.forEach(function(t){this._orders[t]&&(this._orders[t].mainTool._adapter[e](),
this._orders[t].addTool&&this._orders[t].addTool._adapter[e]())},this)}.bind(this))},y.prototype.blockNestedOrders=function(t){this._performNestedOrdersOperation(t,"block")},y.prototype.unblockNestedOrders=function(t){this._performNestedOrdersOperation(t,"unblock")},y.prototype.onOrderUpdate=function(t){var e,i,n,o,r,s,h,u,d,_,m,y,v,b,S;if(this._ordersMap[t.id]=t,this._ordersInModify[t.id])return void(this._ordersInModify[t.id]=t);if(t.symbol===this._symbol&&t.type!==a.MARKET)if(e=this,i=t.id,n=this._chartWidget,o="Chart Order",t.status!==l.WORKING&&t.status!==l.INACTIVE)this._orders[i]&&(this._orders[i].mainTool._adapter.remove(),this._orders[i].addTool&&this._orders[i].addTool._adapter.remove(),delete this._orders[i]);else{switch(r=0,t.type){case a.LIMIT:r=t.limitPrice;break;default:r=t.stopPrice}this._orders[i]||(s=n.model().model(),h=s.paneForSource(n.model().model().mainSeries()),isNumber(r)||f.logError("order price is not defined"),u=s.createLineTool(h,{price:r,index:0},"LineToolOrder"),this._orders[i]={mainTool:u},t.type===a.STOPLIMIT&&(d=t.limitPrice,_=s.createLineTool(h,{price:d,index:0},"LineToolOrder"),this._orders[i].addTool=_)),this._orders[i].addTool&&t.type!==a.STOPLIMIT&&(this._orders[i].mainTool._adapter.remove(),this._orders[i].mainTool=this._orders[i].addTool,delete this._orders[i].addTool),m=function(i,n,o){var o=o||{};e._ordersInModify[t.id]=t,e.blockNestedOrders(i.id),e._broker.modifyOrder(i,o.silent,o.limitPrice||t.type!==a.STOPLIMIT?null:c.STOPPRICE).catch(function(){}).then(function(){e.unblockNestedOrders(i.id);var n=e._ordersInModify[t.id];delete e._ordersInModify[t.id],e.onOrderUpdate(n)})},this._orders[i]&&(y=this._orders[i].mainTool._adapter,v=t.status!==l.WORKING,b=this.orderSideColor(t,v),y.setPrice(r).setText(this.orderText(t)).setQuantityBackgroundColor(b).setBodyTextColor(this.orderTextColor(t,v)).setBodyBorderColor(b).setQuantityBorderColor(b).setLineColor(b).setQuantity(g.forceLTRStr(this._quantityFormatter.format(t.qty-(t.filledQty||0)))).setEditable(!0).setCancelButtonBorderColor(b).setCancelButtonIconColor(b).onMove(function(i){var n,r;e._trading.trackEvent(o,"Move Order"),n=TradingView.clone(t),r=y.getPrice(),n.stopPrice?n.stopPrice=r:n.limitPrice&&(n.limitPrice=r),m(n,y,{silent:!0})}).onContextMenu(function(){var i,n,o="Chart Order Context Menu",r=[];return e._trading.activeBroker().metainfo().configFlags.supportModifyOrder&&(i=new p({text:$.t("Modify Order...")}),i.callbacks().subscribe(null,function(){e._trading.trackEvent(o,"Edit Order"),m(t,y)}),r.push(i)),n=new p({text:$.t("Cancel Order")}),n.callbacks().subscribe(null,function(){e._trading.trackEvent(o,"Cancel Order"),e._broker.cancelOrder(t.id)}),r.push(n),r}).onCancel(function(){e._trading.trackEvent(o,"Cancel Order"),e._broker.cancelOrder(t.id)}),this._trading.activeBroker().metainfo().configFlags.supportModifyOrder&&y.onModify(function(){e._trading.trackEvent(o,"Edit Order"),m(t,y)}),this._orders[i].addTool&&(d=t.limitPrice,S=this._orders[i].addTool._adapter,b=this.orderSideColor(t,!0),
S.setPrice(d).setQuantity(t.qty).setEditable(!0).setText(this.orderText(t)).setQuantityBackgroundColor(b).setBodyTextColor(b).setBodyBorderColor(this.orderTextColor(t,!0)).setQuantityBorderColor(b).setCancelButtonBorderColor(b).setCancelButtonIconColor(b).setLineColor(b).setQuantity(t.qty).onMove(function(i){e._trading.trackEvent(o,"Move Order");var n=TradingView.clone(t);n.limitPrice=S.getPrice(),m(n,S,{silent:!0,limitPrice:!0})}),this._trading.activeBroker().metainfo().configFlags.supportModifyOrder&&S.onModify(function(){e._trading.trackEvent(o,"Edit Order"),m(t,S,{limitPrice:!0})})))}},y.prototype.executionColor=function(t){return t.side===s.BUY?"#4094e8":"#e75656"},y.prototype.executionText=function(t){var e=this.sideToText(t.side)+" "+t.qty+" @ "+this._formatter.format(t.price);return e.substr(0,1).toUpperCase()+e.substr(1).toLowerCase()},y.prototype.onExecutionUpdate=function(t){var e,i,n,o,r,a,l,c;t.symbol===this._symbol&&(e=this._chartWidget,i=t.id,n=Math.round(t.time.valueOf()/1e3),this._executions[i]||(o=e.model().model(),r=o.paneForSource(o.mainSeries()),a=o.createLineTool(r,{price:t.price,index:void 0},"LineToolExecution"),this._executions[i]=a),l=this.executionText(t),c=this._executions[i],c._adapter.setTime(n),c._adapter.setPrice(t.price),c._adapter.setDirection(t.side===s.BUY?"buy":"sell"),c._adapter.setTooltip(l),c._adapter.setArrowColor(this.executionColor(t)),c.updateAllViews(),this.redraw())},t.exports=y},function(t,e,i){"use strict";(function(t){function n(t){var e,i;if(t&&t.__esModule)return t;if(e={},null!=t)for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function o(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s,a,l,c,h,u,d,p,_,f;Object.defineProperty(e,"__esModule",{value:!0}),e.tvToasts=void 0,s=function(){function t(t,e){var i,n;for(i=0;i<e.length;i++)n=e[i],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=i(220),l=o(a),c=i(77),h=n(c),u=i(598),d=n(u),p=i(599),_=i(247),i(154),f=function(){function e(){r(this,e),
this.template='<div class="'+d.toast+' {{ typeClass }}">\n\t\t\t\t<div class="'+d.body+"{{#preview}} "+d.preview+'{{/preview}}">\n\t\t\t\t\t<div class="'+d.main+'">\n\t\t\t\t\t\t<div class="'+d.textInfo+'">\n\t\t\t\t\t\t\t<div class="'+d.closeButton+' js-toast__close">'+i(367)+'</div>\n\t\t\t\t\t\t\t{{# title }}\n\t\t\t\t\t\t\t\t<div class="'+d.title+'">\n\t\t\t\t\t\t\t\t\t{{{ title }}}\n\t\t\t\t\t\t\t\t\t{{# badge }}\n\t\t\t\t\t\t\t\t\t\t<div class="'+d.badge+'">\n\t\t\t\t\t\t\t\t\t\t\t{{{ titleLastWord }}} {{{ badge }}}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t{{/ badge }}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{{/ title }}\n\t\t\t\t\t\t\t{{# text }}\n\t\t\t\t\t\t\t\t<div class="'+d.text+'">{{{ text }}}</div>\n\t\t\t\t\t\t\t{{/ text }}\n\t\t\t\t\t\t\t{{# actions.length }}\n\t\t\t\t\t\t\t\t<div class="'+d.actions+'">\n\t\t\t\t\t\t\t\t\t{{# actions}}\n\t\t\t\t\t\t\t\t\t\t{{#isCheckbox}}\n\t\t\t\t\t\t\t\t\t\t<label class="js-toast__action" data-index="{{ index }}">\n\t\t\t\t\t\t\t\t\t\t\t<input type="checkbox" class="js-control-checkbox">\n\t\t\t\t\t\t\t\t\t\t\t<span class="'+d.checkboxLabel+'">{{{ text }}}</span>\n\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t\t{{/isCheckbox}}\n\t\t\t\t\t\t\t\t\t\t{{^isCheckbox}}\n\t\t\t\t\t\t\t\t\t\t<a class="'+d.link+' {{#align}}i-align_{{ align }}{{/align}} js-toast__action" href="{{ url }}{{^ url }}#{{/ url }}" {{# url }} target="blank"{{/ url }} {{# noFollow }}rel="nofollow"{{/ noFollow }} data-index="{{ index }}">{{{ text }}}</a>\n\t\t\t\t\t\t\t\t\t\t{{/isCheckbox}}\n\t\t\t\t\t\t\t\t\t{{/ actions }}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{{/ actions.length }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{{# image }}\n\t\t\t\t\t\t\t<span class="'+d.floatingImage+' js-toast__logo-wr">\n\t\t\t\t\t\t\t{{# link }}<a href="{{ link }}" target="blank" rel="nofollow">{{/ link }}\n\t\t\t\t\t\t\t\t{{#src}}<img src="{{ src }}">{{/src}}\n\t\t\t\t\t\t\t{{# link }}</a>{{/ link }}\t\t\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t{{/ image }}\n\t\t\t\t\t</div>\n\t\t\t\t\t{{# footerInfo }}\n\t\t\t\t\t\t<div class="'+d.footerContainer+'">\n\t\t\t\t\t\t\t<div class="'+d.footerContent+'">{{ footerInfo }}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{{/ footerInfo }}\n\t\t\t\t</div>\n\t\t\t</div>',this.$container=$("#tv-toasts"),this.$container.length||(this.$container=$('<div id="tv-toasts">').appendTo($("body")),this.bindPositionListeners()),this.RESULTS=p.RESULTS}return s(e,[{key:"bindPositionListeners",value:function(){var t=this,e={};$(document).on("chart-rect-update",function(i,n){"phone-vertical"!==l.default.device&&"phone"!==l.default.device?e.bottom===n.bottom&&e.left===n.left||(t.$container.css({left:n.left+18,bottom:document.documentElement.clientHeight-n.bottom+60}),e=n):e.bottom&&(e={},t.$container.css({left:"",bottom:""}))})}},{key:"escapeOptions",value:function(t){if(t.title&&(t.title=TradingView.clean(t.title)),t.text&&(t.text=TradingView.clean(t.text)),t.actions&&t.actions.length)for(var e=0;e<t.actions.length;e+=1)t.actions[e].text=TradingView.clean(t.actions[e].text);return t}},{key:"render",
value:function(e){var i,n;return e.actions&&(e.actions=e.actions.map(function(t,e){return t.index=e,t}),e.typeClass=d["type_"+e.type]),e.title&&e.badge&&(i=e.title.trim().split(" "),e.titleLastWord=i.pop(),e.title=i.join(" ")||" "),n=$(t.render(this.template,e)),n.find(".js-control-checkbox").tvControlCheckbox({tag:"span"}),n}},{key:"toast",value:function(t){function e(t){t===p.RESULTS.BUTTON_ACTION?y.resolve({result:t,goalReached:!0,resultMsg:t}):y.reject({result:t,resultMsg:t,goalReached:!1})}var i=this,n=t.title,o=t.badge,r=t.text,s=t.time,a=void 0===s?1e4:s,c=t.type,h=void 0===c?"default":c,u=t.actions,_=void 0===u?[]:u,f=t.image,m=t.footerInfo,g=t.prerender,y=$.Deferred(),v={$el:this.render({title:n,badge:o,text:r,type:h,actions:_,image:f,footerInfo:m}),dismiss:function(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p.RESULTS.EXTERNAL,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=$.Deferred();return v.$el?(t=v.$el,delete v.$el,t.trigger("mouseout"),t.find(d.body).addClass(d.isDismissing),t.velocity({height:0},{queue:!1,easing:"easeInOutCubic",duration:125,delay:n?0:125,complete:function(){t.remove(),o.resolve()}}),e(i),o.promise()):(window.clearTimeout(v.dismissTimeout),o.resolve().promise())},dfd:y.promise()};return"phone-vertical"!==l.default.device&&v.$el.css("opacity",0),!1!==a&&(v.dismissTimeout=setTimeout(v.dismiss.bind(this,p.RESULTS.TIMEOUT),a)),v.$el.on("click",".js-toast__close",v.dismiss.bind(this,p.RESULTS.MANUAL_CLOSE)),v.$el.on("click",".js-toast__action",function(t){var e=_[+t.currentTarget.getAttribute("data-index")];if(e.action)e.action.call(e,t),e.doNotPrevent&&t.preventDefault();else if(e.dismissButton)v.dismiss(p.RESULTS.BUTTON_DISMISS,!0);else if(!e.url)throw Error("Toast: action is missed for button.");e.doNotDismiss||v.dismiss(p.RESULTS.BUTTON_ACTION,!0)}),g?g(v.$el).then(function(){i._displayAnimated(v)}):this._displayAnimated(v),v}},{key:"_displayAnimated",value:function(t){var e,i,n=this;this.$container.append(t.$el),e=t.$el.height(),this.$container.css({"-webkit-transform":"translateY("+e+"px)","-moz-transform":"translateY("+e+"px)","-ms-transform":"translateY("+e+"px)","-o-transform":"translateY("+e+"px)",transform:"translateY("+e+"px)"}),setTimeout(function(){n.$container.addClass(d.isShifting),setTimeout(function(){if(n.$container.css({"-webkit-transform":"","-moz-transform":"","-ms-transform":"","-o-transform":"",transform:""}),"phone-vertical"!==l.default.device){var e=t.$el;e&&e.velocity({opacity:1},{queue:!1,easing:"easeOutCubic",duration:350,complete:function(){e.prop("style","")}})}setTimeout(function(){n.$container.removeClass(d.isShifting)},h.dur/2)},20)},20),Modernizr.touch&&(i=new _.HammerJSLoader,i.load().then(function(e){var i=new e(t.$el[0],{prevent_default:!1}),n=80;i.on("pan",function(e){var i=1-Math.abs(e.deltaX/n);t.$el.velocity({left:e.deltaX,opacity:i>=0?i:0},{duration:50,queue:!1,easing:"easeOutQuad"})}),i.on("panend",function(e){Math.abs(e.deltaX)>n?t.dismiss(!0):t.$el.velocity({left:0,opacity:1},{duration:300,
easing:"easeOutExpo",queue:!1})})}))}}]),e}(),e.tvToasts=new f}).call(e,i(93))},function(t,e){t.exports={toast:"toast-12K1jRDo-",isShifting:"isShifting-2UjSKZ__-",body:"body-2o_Wje8v-",isDismissing:"isDismissing-3RjjQJ5U-",main:"main-ia8PV28N-",textInfo:"textInfo-39tIOCnC-",preview:"preview-3XtYuf9S-",closeButton:"closeButton-10VUlhi4-",badge:"badge-2HLZCdqj-",title:"title-3HdyG5Ws-",checkboxLabel:"checkboxLabel-3AbDosEb-",link:"link-20I_3GI5-",text:"text-28Tbt8W--",actions:"actions-1tBSFr16-",footerContainer:"footerContainer-8tPgC5Yv-",footerContent:"footerContent-2XyjdIBm-",floatingImage:"floatingImage-2CZdTbfe-",logoBottomOffset:"logoBottomOffset-1JhCy_p1-",logoPng:"logoPng-3IoORapI-",resizableLogo:"resizableLogo-3e68w7Ik-",frameBorder:"frameBorder-2o1NHAY4-",overflowOpaquer:"overflowOpaquer-2eMts1pQ-",resizeControl:"resizeControl-1Tyht26U-",type_info:"type_info-24ZpAIdB-",type_danger:"type_danger-ibonUDCI-",type_success:"type_success-3PT-YsXU-",type_attention:"type_attention-tAvOWRQd-",type_da:"type_da-2mw7g5Rq-"}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"RESULTS",function(){return n});var n={EXTERNAL:"Program Close",TIMEOUT:"Timeout Close",MANUAL_CLOSE:"User Close",BUTTON_DISMISS:"Button Dismiss",BUTTON_ACTION:"Button Action"}},function(t,e,i){"use strict";(function(e){var i={_sounds:{},alertSounds:function(){return $.grep(this.availableSounds(),function(t){return!!t.soundForAlerts})},defaults:function(){return{sound:"notification/notification",alert:"alert/fired"}},soundIsAvailable:function(t){return!!$.grep(this.availableSounds(),function(e){return e.path===t}).length},availableSounds:function(){return[{path:this.defaults().sound,title:$.t("Default"),common:!0},{title:$.t("Chat Message"),path:"chat/message",common:!0},{title:$.t("Chat Popup"),path:"chat/popup",common:!0},{title:$.t("Chat Call"),path:"chat/call"},{title:$.t("Chat Calling"),path:"chat/calling"},{title:$.t("Chat Hangup"),path:"chat/hangup"},{title:$.t("Thin"),path:"alert/fired",soundForAlerts:!0},{title:$.t("3 Notes Reverb"),path:"alert/3_notes_reverb",soundForAlerts:!0},{title:$.t("Alarm Clock"),path:"alert/alarm_clock",soundForAlerts:!0},{title:$.t("Beep-beep"),path:"alert/beep_beep",soundForAlerts:!0},{title:$.t("Calling"),path:"alert/calling",soundForAlerts:!0},{title:$.t("Chirpy"),path:"alert/chirpy",soundForAlerts:!0},{title:$.t("Fault"),path:"alert/fault",soundForAlerts:!0},{title:$.t("Hand Bell"),path:"alert/hand_bell",soundForAlerts:!0}]},_get:function(t){return t in this._sounds||(this._sounds[t]={el:$(('<audio><source src="'+TradingView.wrapUrl("/static/sounds/%s.mp3")+'" type="audio/mp3"></audio>').replace(/%s/g,t)).get(0),playing:new e(!1),_onended:null,play:function(){try{var t=this.el.play();return t&&t.then?t:Promise.resolve()}catch(t){return Promise.reject(t)}}}),this._sounds[t]},load:function(){$.map(this.availableSounds(),function(t){return t.path}).forEach(function(t){this._get(t)},this)},play:function(t,e,i){var n,o
;return e&&i&&(console.warn("Can't use 'loop' and 'duration' params at the same time, choosing 'loop'"),i=null),t=this._get(t||this.defaults().sound),i*=1e3,n=i>0,t._onended=function(){n?t.el.play():(t.playing.setValue(!1),t.el.removeEventListener("ended",t._onended),t._onended=null)},t.el.load(),t.playing.setValue(!0),e?t.el.loop=!0:t.el.addEventListener("ended",t._onended),o=t.play(),n&&setTimeout(function(){n=!1},i),o},stop:function(t){function e(t){t=i._get(t),t.el.pause(),t.playing.setValue(!1),t.el.removeEventListener("ended",t._onended),t._onended=null}var i=this;t?e(t):$.each(Object.keys(this._sounds),function(t,i){e(i)})},onStopped:function(t,e){"function"==typeof e&&this._get(t).playing.subscribe(function(t){t||e()},{once:!0})},isPlaying:function(t){return this._get(t).playing.value()},enableForMobile:function(t){function e(o){var r=[];t.forEach(function(t){var e,n=i._get(t);n.el.load(),e=n.play().catch(function(t){if("AbortError"!==t.name)throw t}),n.el.pause(),r.push(e)}),Promise.all(r).then(function(){n.forEach(function(t){document.removeEventListener(t,e,!0)})})}var n;/iPhone|iPad|iPod|Android|BlackBerry|BB10|Silk|Mobi/i.test(window.navigator.userAgent)&&(t&&!Array.isArray(t)&&(t=[t]),t=t.filter(function(t){var e=i._get(t);return!(!e||!e.el.load||e._mobilePreloadActive||(e._mobilePreloadActive=!0,0))}),0!==t.length&&(n=["click","touchend","keydown"],n.forEach(function(t){document.addEventListener(t,e,!0)})))},enableAlertSoundsForMobile:function(){this.enableForMobile(this.alertSounds().map(function(t){return t.path}))}};i.enableForMobile(i.availableSounds().filter(function(t){return!!t.common}).map(function(t){return t.path})),t.exports=i}).call(e,i(15))},function(t,e,i){"use strict";(function(e,n){function o(t){this._properties=t.properties,this._onActiveListChanged=new n,this.options=$.extend({},this.defaults),this.options.hideTitleButton=!(!t.data||!t.data.hideTitleButton),t.readonly&&$.extend(this.options,{readonly:!0,deletable:!1,sortable:!1,contextMenu:!1,hideTitleButton:!0}),r.call(this,t),this._initSaveLoad(),this._initSymbolEdit(),this._initList(),this._initAlertHighlighter()}var r,s,a,l,c,h,u,d,p,_,f,m,g,y,v,b,S,w;i(97),r=i(602),s=i(30),a=s.Action,l=s.ActionSeparator,c=i(119).bindToInput,h=i(148).bindPopupMenu,u=i(160),d=i(121),p=d.SaveRenameDialog,_=d.InputField,f=i(70).createConfirmDialog,m=i(315),g=m.WatchListManager,y=i(22),v=i(410).htmlEscape,b="",S=e.enabled("multiple_watchlists"),w=!1,window.inherit(o,r),o.prototype.defaults=$.extend({},r.prototype.defaults,{sortable:!0,deletable:!0,hotkeys:!0,autoDelete:!0,keyboardEventsRoot:TradingView.onChartPage||!e.enabled("tv_production")?document.documentElement:void 0}),o.prototype.getActiveListId=function(){return this._listId},o.prototype.onActiveListChanged=function(){return this._onActiveListChanged},o.prototype._initSorter=function(){Object.getPrototypeOf(Object.getPrototypeOf(this))._initSorter.call(this),this.$sorter.addClass("sortable"),
this.$sortByName.addClass("sorter").attr("title",$.t("Sort by symbol")).on("click",this._sorter("name")),this.$sortByLast.addClass("sorter").attr("title",$.t("Sort by last price")).on("click",this._sorter("last")),this.$sortByChange.addClass("sorter").attr("title",$.t("Sort by price change")).on("click",this._sorter("change")),this.$sortByChangePt.addClass("sorter").attr("title",$.t("Sort by price change percent")).on("click",this._sorter("change_percent"))},o.prototype._sorter=function(t){var e=!1;return function(){this.list.sort(t,e),e=!e}.bind(this)},o.prototype._initSaveLoad=function(){var t={onchange:function(t){this.onSyncSavedList(t)}.bind(this),canDelete:function(t){return this._listId!==t}.bind(this)};this._watchlistManager=this._createListManager(t),this.onListChanged().subscribe(this,this.save)},o.prototype.getWatchListManager=function(){return this._watchlistManager},o.prototype._createListManager=function(t){return new g(t)},o.prototype.save=function(t){var e,i,n;this.options.readonly||(e=this._properties.value()||{},i=t||this.list.getSaveSymbols(!0),n=null,this._listId&&(n=this._watchlistManager.getList(this._listId)),n?(n.symbols=i,this._watchlistManager.saveList(n),delete e.list,e.listId=this._listId):(delete e.listId,e.list=i),this._properties.setValue(e,{forceFlush:!0}))},o.prototype._initList=function(){var t,e,i,n,o=this._properties.value()||{};if(this.options.readonly&&o.list)return t=u(o.list),void this.addList(t);o.listId&&(e=this._watchlistManager.getList(o.listId)),e||(e=this._watchlistManager.getFirstList()),e||(i=o.list?o.list:ChartApiInstance.defaultWatchlistSymbols(),n=y.randomHash(),e={id:n,symbols:i,title:o.title||m.pickTitle(),auto:!0},this._watchlistManager.saveList(e),delete o.list,o.listId=n),e&&(t=e.symbols,this._listId=e.id,this._setTitle(e.title||"")),!t&&o.list&&(t=o.list),t||window.user.is_pro||o.list||!o.listId||(t=(this._watchlistManager.getList(o.listId)||{}).symbols),t||(t=ChartApiInstance.defaultWatchlistSymbols()),t=u(t),this.addList(t)},o.prototype._initSymbolEdit=function(){var t,e;this.options.readonly||(t=this._bridge.$headerspace,e=$('<input type="text" class="wl-symbol-edit" placeholder="'+$.t("Add Symbol",{context:"watchlist_dialog"})+'" maxlength="1000" style="text-transform: none; font-weight: normal;" autocomplete="off">').appendTo(t),c(e,{callback:this.addHighlight.bind(this),clearAfterAccept:!0,keepFocus:!0,allowMultipleSymbols:!0,ignoreInterval:!0})),this.options.hideTitleButton||(this._listPopup=$('<a class="button"></a>').append($(i(316)).attr({width:17,height:17})).on("click",function(t){this._listPopup.hasClass("active")||(this._listPopup.trigger("button-popup",[this.popupMenuActions(),!0]),t.preventDefault())}.bind(this)).appendTo(t),h(this._listPopup,null,{direction:"down",event:"button-popup",reverse:!0,notCloseOnButtons:!0}))},o.prototype.addHighlight=function(t){var e=this.list.get(t);e?(this.list.scrollTo(e.eq(0)),this.list._highlight(e)):this.list.getFullSymbolName(t,function(t){this.add(t,{highlight:!0,scroll:!0})}.bind(this.list))},
o.prototype.getActionFunc=function(t,e){return function(){var i=new a({text:t});return e&&i.callbacks().subscribe(this,e),i}},o.prototype.getRenameListAction=function(){if(this._watchlistManager.canRename(this._listId)){var t=new a({text:$.t("Rename List...")});return t.callbacks().subscribe(this,this.contextMenuActions.renameListHandler),[t]}return[]},o.prototype.contextMenuActions={createNewListHandler:function(){function t(){n.show().then(function(t){e.createNewList(t[i])})}var e=this,i="text",n=new p({fields:[new _({name:i,label:$.t("Symbol list name")+":",maxLength:128,error:$.t("Please enter list name")})],title:$.t("Create New List")});t()},saveListAsHandler:function(){this.saveAs()},renameListHandler:function(){function t(){var t=e._watchlistManager.getList(e._listId).title;n.setField(i,t),n.show().then(function(t){e.renameList(t[i])})}var e=this,i="text",n=new p({fields:[new _({name:i,label:$.t("Symbol list name")+":",maxLength:128,error:$.t("Please enter list name")})],title:$.t("Rename List")});t()},clearSymbolsHandler:function(){if(this.list.getSymbols().length){var t=$.t("Do you really want to clear all symbols?");f({type:"modal",content:t}).then(function(t){t.on("action:yes",function(t){this.clearList(),t.close()}.bind(this)),t.open()}.bind(this))}},getWatchListActionArray:function(){var t=[new l],e=this._watchlistManager.getOrderedList(),i=this;return e.forEach(function(e){var n=new a({text:e.title,htmlclass:i.returnClassIfListActive(e.id,"backlight")});n.callbacks().subscribe(i,function(){i.loadSavedList(e.id)}),t.push(n)}),t}},o.prototype.returnClassIfListActive=function(t,e){return this._listId===t?e:null},o.prototype.getDeleteActionFunc=function(t,e){var i=this;return function(n,o){function r(){var n=$.t("Do you really want to delete Watchlist '{0}' ?").format(t.title);n=v(n),f({type:"modal",content:n}).then(function(t){t.on("action:yes",function(t){s instanceof $&&s.remove(),i.deleteSavedList(e),t.close()}),t.open()})}var s=this;r()}},o.prototype.popupMenuActions=function(){var t,i,n,o=this,r=[];return!S||w&&!e.enabled("show_pro_features")||(r.push({title:$.t("Create New List..."),action:o.contextMenuActions.createNewListHandler.bind(o),addClass:"special"}),r.push({title:$.t("Save List As..."),action:o.contextMenuActions.saveListAsHandler.bind(o),addClass:"special"}),this._watchlistManager.canRename(this._listId)&&r.push({title:$.t("Rename List..."),action:o.contextMenuActions.renameListHandler.bind(o),addClass:"special"})),r.push({title:$.t("Clear Symbols"),action:o.contextMenuActions.clearSymbolsHandler.bind(o),addClass:"special",disabled:this.list.count()<=0}),S&&(!w||window.user&&e.enabled("show_saved_watchlists"))&&(r.push({separator:!0}),t=h.TabGroup({onChange:function(t){t&&TVSettings.setValue("watchlist.active_tab",t)}}),i=t.appendTab($.t("My Lists")),n=this._watchlistManager.getOrderedList(),n.forEach(function(t){var e={title:t.title||$.t("Watchlist"),action:function(){t.id!==o._listId&&o.loadSavedList(t.id)},addClass:o.returnClassIfListActive.call(o,t.id,"active-item-backlight"),
html:b&&b[t.id]?b[t.id](t.title):void 0};o._watchlistManager.canDelete(t.id)&&(e.deleteAction=o.getDeleteActionFunc(t,t.id)),i.push(e)}),r.push(t)),r},o.prototype._popupMenuItem=function(t){var e=this;return{title:t.title,action:function(){e.load(t.list)}}},o.prototype.syncSavedList=function(t){var e=this._watchlistManager.getList(t);if(!e)return void this.deleteSavedList(t);this.load(e.symbols,{silent:!0}),this._listId!==t&&(this._listId=t,this.list.resize(),this._onActiveListChanged.fire()),this._setTitle(e.title||"")},o.prototype.loadSavedList=function(t){this.syncSavedList(t),this.save()},o.prototype.deleteSavedList=function(t){this._watchlistManager.deleteList(t),t===this._listId&&(delete this._listId,this.save(),this._setTitle(""))},o.prototype.onSyncSavedList=function(t){t&&this._listId===t&&this.syncSavedList(t)},o.prototype.createNewList=function(t,e){function i(){var i=n._watchlistManager.createList(t,e);i&&(n._setTitle(i.title||""),n._listId=i.id,n.list.clearSymbols(),n.save(e||[]),n.loadSavedList(i.id))}var n=this;if(this._canUseMultipleLists()){if(!n.isListName(t))return;n._watchlistManager||(n._watchlistManager=this._createListManager()),i()}},o.prototype.renameList=function(t){if(this._canUseMultipleLists()){if(!this.isListName(t))return;this._watchlistManager.renameList(this._listId,t),this._setTitle(t)}},o.prototype.saveAs=function(t){if(this._canUseMultipleLists()){var e=this;return r.prototype.saveAs.call(this,t).done(function(t){e._listId=t.id,e._setTitle(t.title||""),e.save(),e._onActiveListChanged.fire()})}},o.prototype._canUseMultipleLists=function(){return S&&(!w||window.user&&window.user.is_pro)},o.prototype._initAlertHighlighter=function(){this._bridge.onMessage(function(t,e){if("alert_event"===t){var i=this.list.get(e.symbol);i&&i.length&&i.highlight(1)}}.bind(this))},o.prototype._initContextMenu=function(){var t=[];TradingView.onWidget()||(!S||w&&!e.enabled("show_pro_features")||(t=t.concat([this.getActionFunc($.t("Create New List..."),this.contextMenuActions.createNewListHandler.bind(this)),this.getActionFunc($.t("Save List As..."),this.contextMenuActions.saveListAsHandler.bind(this)),this.getRenameListAction.bind(this)])),t.push(this.getActionFunc($.t("Clear Symbols"),this.contextMenuActions.clearSymbolsHandler.bind(this))),t=t.concat(this.list.beforeAppendContextMenuItems.bind(this.list,"top")),S&&(!w||window.user&&window.user.is_pro&&e.enabled("show_saved_watchlists"))&&(t=t.concat(this.contextMenuActions.getWatchListActionArray.bind(this))))},o.prototype._setTitle=function(t){var e=b[this._listId];e?this._bridge.setTitleHtml(e(t)):this._bridge.setTitle(t)},o.prototype.destroy=function(){Object.getPrototypeOf(o.prototype).destroy.call(this)},t.exports.Widget=o}).call(e,i(4),i(8))},function(t,e,i){"use strict";(function(e,n){function o(t){this._bridge=t,this._$container=t.$body,this._$header=$(),this.options=$.extend({},this.defaults,this.options||{}),this.$sorter=$(),this.list=null,this._dScrolled=null,this.visibleAreaChanged=new n,
this._windowStateChanged=this._windowStateChanged.bind(this),this._initSorter(),this._initSymbolList(),this._initVisibleArea(),t.height.subscribe(this.resize.bind(this),{callWithLast:!0})}var r=i(123).debounce,s=i(121),a=s.SaveRenameDialog,l=s.InputField,c=i(22),h=i(5).getLogger("Watch.BaseWatchWidget"),u=i(44).getQuoteSessionInstance,d=e.enabled("multiple_watchlists");o.prototype.defaults={hibernate:!0,contextMenu:!0},o.prototype._initSorter=function(){var t,e;this.$sorter=$("<div>").addClass("symbol-list-header").appendTo(this._$container),t=$('<div class="header-symbol"></div>').appendTo(this.$sorter),this.$sortByName=$("<span>"+$.t("Symbol")+"</span>").appendTo(t),e=$('<div class="header-last"></div>').appendTo(this.$sorter),this.$sortByLast=$("<span>"+$.t("Last")+"</span>").appendTo(e),this.$chng=$('<div class="header-change"></div>').appendTo(this.$sorter),this.$sortByChange=$("<div>"+$.t("Chng")+"</div>").appendTo(this.$chng),this.$sortByChangePt=$("<div>(%)</div>").appendTo(this.$chng)},o.prototype._initSymbolList=function(){var t=i(603);this.list=new t(u("simple"),this.options),this.list.appendTo(this._$container),this.list.connectToSymbolLinking(this._bridge)},o.prototype._initVisibleArea=function(){this._dScrolled=r(this._scrolled.bind(this),1e3),this.list.scrollbar.scrolled.subscribe(this,this._dScrolled),this._bridge.visible.subscribe(this._windowStateChanged,{callWithLast:!0})},o.prototype._scrolled=function(){this.list&&this._bridge.visible.value()&&this._visibleAreaChanged(this.list.visibleSymbols())},o.prototype._windowStateChanged=function(t){t?this._visibleAreaChanged(this.list.visibleSymbols()):this._visibleAreaChanged([])},o.prototype._visibleAreaChanged=function(t){this.visibleAreaChanged.fire(t),this.options.hibernate&&this.list.setFastSymbols(t)},o.prototype.resize=function(){var t=Math.max(0,this._$container.height()-this.$sorter.outerHeight());this.list.$element.height(t),this.list.resize()},o.prototype._resolveId=function t(){return t.id=t.id||0,"symbol-list-resolve-"+ ++t.id},o.prototype.popupMenuAppendPredefined=function(t,e,n){function o(t){var e=TVSettings.getJSON(r,{});t?delete e[this.title]:e[this.title]=!0,TVSettings.setJSON(r,e)}var r,s,a,l;n=n||{},r=n.expandedGroupSettingsName||"watchlist.expanded_groups",s=n.activeTabSettingsName||"watchlist.active_tab",a=TVSettings.getJSON(r,{}),l=TVSettings.getValue(s,""),(e||[]).forEach(function(e){var n=t.appendTab(e.title,void 0,{active:l&&e.title===l});(e.groups||[{list:e.list||[]}]).forEach(function(t){var e,r=n;t.title&&(e=i(148).bindPopupMenu,r=new e.Group({title:t.title,collapsible:!0,collapsed:!a[t.title],onChange:o}),n.push(r)),(t.list||[]).forEach(function(t){r.push(this._popupMenuItem(t))},this)},this)},this)},o.prototype._popupMenuItem=function(){return{title:"item",action:function(t){t.preventDefault()}}},o.prototype.isListName=function(t){return!!t||(h.logWarn("No list name supplied."),!1)},o.prototype.save=function(){},o.prototype.saveAs=function(t){var e,n,o,r,s
;return window.user&&window.user.is_pro||d?(e=i(315).WatchListManager,n=$.Deferred(),o=function(t){var i,o;this.isListName(t)&&(i=this.list.getSaveSymbols(!0),this._watchlistManager||(this._watchlistManager=new e),o={id:c.randomHash(),title:t,symbols:i},this._watchlistManager.saveList(o),n.resolve(o))}.bind(this),r="name",s=new a({fields:[new l({name:r,label:$.t("Symbol list name")+":",maxLength:128,error:$.t("Please enter list name")})],title:$.t("Save List As")}),runOrSignIn(function(){t?o(t):s.show().then(function(t){o(t[r])})},{source:"Watchlist save as"}),n):$.Deferred().resolve([])},o.prototype.load=function(t,e){this.clearList({silent:!0}),this.addList(t,e)},o.prototype.addList=function(t,e){this.list.add(t,e)},o.prototype.clearList=function(t){this.list.clear(t)},o.prototype.destroy=function(){this._bridge.visible.unsubscribe(this._windowStateChanged),this.list.scrollbar.scrolled.unsubscribe(this,this._dScrolled),this.clearList({silent:!0}),this._watchlistManager&&this._watchlistManager.destroy(),this.list.destroy(),delete this.list},o.prototype.onListChanged=function(){return this.list.changed},t.exports=o}).call(e,i(4),i(8))},function(t,e,i){"use strict";function n(t,e){o.call(this,e),this._qs=t,this.constructor.clients++,this.clientName=this.clientName+"-"+this.constructor.clients,this._readyToSubscribe=$.when(this._qs.fieldsSent),this._marketIndicators={},this._dataModeIndicators={}}var o=i(604),r=i(313).MarketStatusIndicator,s=i(195).DataModeIndicator;inherit(n,o),n.prototype._defaults=$.extend({},o.prototype._defaults,{autoDowngrade:!1,slightDowngrade:!0}),n.prototype.clientName="symbol-list",n.clients=0,n.prototype._item=function(t,e){var i=o.prototype._item.call(this,t,e),n=i.find(".js-market-status")[0],a=i.find(".js-data-mode")[0];return this._marketIndicators[t]=new r({classSuffix:"--for-symbol-list",el:n,quoteSession:this._qs,short:!0,symbol:t,manualUpdate:!0,tooltipType:"browser"}),this._dataModeIndicators[t]=new s({classSuffix:"--for-symbol-list",el:a,quoteSession:this._qs,short:!0,symbol:t,manualUpdate:!0,tooltipType:"browser"}),i},n.prototype._create=function(t){var e=t.filter(function(t){return!t[1]}).map(function(t){return t[0]});return this._subscribe(e),o.prototype._create.call(this,t)},n.prototype._subscribe=function(t){this._readyToSubscribe.done(function(){setTimeout(function(){this._qs.subscribe(this.clientName,t,this._onData.bind(this))}.bind(this),0)}.bind(this))},n.prototype._onData=function(t){var e=t.symbolname;switch(t.status){case"error":case"permission_denied":this._onSymbolError(t);break;case"ok":this._onRealtimeData(t)}this._dataModeIndicators[e].update(t),this._marketIndicators[e].update(t)},n.prototype._onSymbolError=function(t){var e=t.symbolname;this.checkSF(t)?this.setSFWarning(e):this.setError(e)},n.prototype._onRealtimeData=function(t){var e=t.symbolname,i=t.values;if(this.checkSF(t)&&!this.isSFAvailable())return this.setSFWarning(e),void this._unsubscribe(e);this.update(e,i)},n.prototype.remove=function(t,e){return setTimeout(function(){this._unsubscribe(t)
}.bind(this),0),o.prototype.remove.call(this,t,e)},n.prototype._unsubscribe=function(t){this._qs.unsubscribe(this.clientName,t)},n.prototype.clear=function(t){var e=this.getSymbols();setTimeout(function(){e.forEach(this._unsubscribe.bind(this))}.bind(this),0),o.prototype.clear.call(this,t)},n.prototype.setFastSymbols=function(t){this._qs.setFastSymbols(this.clientName,t)},n.prototype.getFullSymbolName=function(t,e){var i=this._qs,n=this.clientName,o=function(r){e(r&&r.values&&r.values.pro_name||t),i.unsubscribe(n,t,o)};i.subscribe(n,t,o)},t.exports=n},function(t,e,i){"use strict";(function(e){function n(t){this._options=$.extend({},this._defaults,t||{}),this._lifecycleHooks=new w,this._activeElem=null,this._markableSymbols=null,this._onSymbolChange=this._onSymbolChange.bind(this),this.$element=$('<div tabindex="0">').addClass("symbol-list-container"),this.$list=$("<div>").addClass("symbol-list").appendTo(this.$element),this._symbols={},this._fullSymbols={},this.symboltextnotes={},this._percentageFormatter=new u(100),this.changed=new e,this._lastData={},this.itemDblClicked=new e,v.enabled("text_notes")&&y("text_notes")&&this._initTextnotes(),this._initPositions(),this._initSortable(),this._initDelete(),this._initScroll()}function o(t){var e=$(t.currentTarget).parents(".symbol-list-item:first");a(e,"title",e.attr("title")),e.removeAttr("title")}function r(t){var e=$(t.currentTarget).parents(".symbol-list-item:first"),i=s(e,"title");i&&e.attr("title",i)}function s(t,e){var i=t.data(e);if(i)return""+i}function a(t,e,i){t.data(e,i)}var l,c,h,u,d,p,_,f,m,g,y,v,b,S,w;i(97),l=i(163),c=i(147).SidebarCustomScroll,h=i(13).PriceFormatter,u=i(58).PercentageFormatter,d=i(80).tradingService,p=i(118),_=p.SIDE,f=i(605).PositionsWatcher,m=i(219).lazyJqueryUI,g=i(133).getTranslatedSymbolDescription,y=i(95).isFeatureEnabled,v=i(4),b=i(158).parseHtmlElement,S=i(606).createSelectableList,w=i(607).ListViewHooks,n.prototype._defaults={sortable:!1,deletable:!1,hotkeys:!1,autoDelete:!0},n.prototype._initMarkableSymbols=function(){this._markableSymbols=new MarkableSymbols({symbolsView:this,markerContainerSelector:".addition",activeMarkerClass:"marker--active",additionalMarkerClass:"marker",markerTooltipType:"browser"})},n.prototype._onItemDblClicked=function(t){var e,i;t.defaultPrevented||(e=$(t.currentTarget),i=this._chooseItemSymbol(e),this.itemDblClicked.fire([i,s(e,"symbol-short"),s(e,"symbol-full")]),t.preventDefault())},n.prototype._chooseItemSymbol=function(t){return s(t,"symbol-orig")},n.prototype._initSelectable=function(){var t=this._options.keyboardEventsRoot||this.$element.get(0);this._makeFocusable(),this._selectableList=S({list:this.$element.get(0),keyboardEventsRoot:t,listItemClass:"symbol-list-item",selectedListItemClass:"selected",focusedListItemClass:"focused",deletable:this._options.deletable,onSelect:function(t){t.cursor&&this.scrollTo($(t.cursor))}.bind(this),onNavigate:this._onSymbolsNavigate.bind(this),onDelete:this._onDelPress.bind(this),getNodeKey:function(t){return s($(t),"symbol-full")}})},
n.prototype.toggleSelectableList=function(t){this._selectableList&&(t?this._selectableList.activate():this._selectableList.deactivate())},n.prototype._makeFocusable=function(){this.$element.on("mousedown",function(){this.$element.focus()}.bind(this))},n.prototype._onSymbolsNavigate=function(t){var e,i,n=t.cursor;n&&(e=$(n),i=s(e,"symbol-full")||this._chooseItemSymbol(e),this.setSymbol(i),this.scrollTo(e))},n.prototype._initSortable=function(){this._options.sortable&&(m(this.$list).sortable({axis:"y",containment:"parent",cancel:".controls, .addition",helper:"clone",update:function(t,e){this.changed.fire()}.bind(this),handle:!!Modernizr.touch&&".symbol-list-item .symbol"}),this.$list.on("mousedown",function(){document.activeElement.blur()}))},n.prototype._initPositions=function(){var t,e=d();e&&(this._positions=new f(e),this._positions.positionsUpdate.subscribe(this,this._updateSymbolPositions),t=this,this.changed.subscribe(null,function(){t._positions.setSymbols(t.getSymbols()),t._updateAllPositions()}))},n.prototype._initTextnotes=function(){},n.prototype._initDelete=function(){this._options.deletable&&this.$list.addClass("deletable")},n.prototype._onDeleteClicked=function(t){var e,i;t.stopPropagation(),t.defaultPrevented||(e=$(t.currentTarget).closest(".symbol-list-item"),i=s(e,"symbol-full"),this._deleteSymbol(i),t.preventDefault())},n.prototype._onDelPress=function(t){t.items.forEach(function(t){var e=t.dataset.symbolFull;e&&this._deleteSymbol(e)}.bind(this))},n.prototype._deleteSymbol=function(t){var e=this.getSelectedSymbols(),i=this;this._options.autoDelete&&(e.includes(t)?i.removeSymbols(e):this.remove(t))},n.prototype.getActive=function(){return this._getItems().filter(".active").eq(0)},n.prototype.getFirst=function(){return this._getItems().first()},n.prototype.getLast=function(){return this._getItems().last()},n.prototype._getItems=function(){return this.$list.find(".symbol-list-item")},n.prototype.setSymbol=function(t){this._symbolLink&&this._symbolLink.setValue(t)},n.prototype._initScroll=function(){this.scrollbar=new c(this.$element,this.$list),this.scrollbar._$shadowTop&&(this.scrollbar._$shadowTop.css("z-index",0),this.scrollbar._$shadowBottom.css("z-index",0)),this.changed.subscribe(this.scrollbar,this.scrollbar.resize)},n.prototype.connectToSymbolLinking=function(t){if(this._symbolLink)throw Error("symbolLink has already been set.");var e=t.symbol;this._symbolLink=e,e.subscribe(this._onSymbolChange,{callWithLast:!0}),t&&t.getChartWidgetCollection&&this.itemDblClicked.subscribe(this,function(e){var i=t.getChartWidgetCollection();i&&i.setSymbolAll(e[2]||e[0])})},n.prototype._onSymbolChange=function(t){var e=this.find(t);this._removeActiveElem(),e&&this._setActiveElem(e)},n.prototype._setActiveElem=function(t){var e=t.get(0);e.classList.add("active"),this._selectableList.focusItem(e),this._activeElem=e},n.prototype._removeActiveElem=function(){this._activeElem&&(this._activeElem.classList.remove("active"),this._selectableList.clear(),this._activeElem=null)},n.prototype._recreateActiveState=function(){
if(this._symbolLink){var t=this.find(this._symbolLink.value());t&&(this._removeActiveElem(),this._setActiveElem(t))}},n.prototype.setError=function(t){var e=this.get(t);e&&e.addClass("error")},n.prototype.setSFWarning=function(t){},n.prototype.checkSF=function(t){},n.prototype.isSFAvailable=function(){},n.prototype.add=function(t,e){var i,n;if(e=e||{},i=this._getOrCreate(t),e.after){if(!(n=this.get(e.after)))throw new ReferenceError("Wrong after position");n.after(i)}else this.$list.append(i);return e.silent||this.changed.fire(),e.highlight&&this._highlight(i),e.scroll&&this.scrollTo(i.eq(i.size()-1)),this._recreateActiveState(),i},n.prototype._highlight=function(t){t.highlight(1),a(t,"symbol-highlight",!0)},n.prototype.remove=function(t,e){var i,n=this.get(t);n&&(delete this._symbols[t],i=s(n,"symbol-orig"),i&&delete this._fullSymbols[i],n.remove(),e&&e.silent||this.changed.fire())},n.prototype.removeSymbols=function(t,e){t.forEach(function(t){this.remove(t,{silent:!0})}.bind(this)),e&&e.silent||this.changed.fire(),this.resize()},n.prototype.replace=function(t,e,i){var n=s(this.get(e),"symbol-highlight"),o=this.add(t,{after:e,silent:!0,highlight:n});return this.remove(e,{silent:!0}),i=i||{},i.silent||this.changed.fire(),i.origin&&a(o,"symbol-replaced-name",e),o},n.prototype.clear=function(t){this._symbols={},this._fullSymbols={},this.$list.empty(),t&&t.silent||this.changed.fire()},n.prototype.scrollTo=function(t){var e=this.get(t);e&&this.scrollbar.scrollTo(e)},n.prototype.getSymbols=function(){return Object.keys(this._symbols)},n.prototype.getSaveSymbols=function(){var t=[];return this.$list.children().each(function(e,i){var n=$(i),o=s(n,"symbol-pro")||s(n,"symbol-full");t.push(o)}),t},n.prototype.clearSymbols=function(){this.$list.empty()},n.prototype._getOrCreate=function(t){var e=[].concat(t),i=e.map(function(t){return[t,this.get(t)]},this);return this._create(i)},n.prototype._create=function(t){var e,i,n,o,r=[];for(e=0;e<t.length;e++)i=t[e][1],i||(n=t[e][0],o=l.shortName(n),i=this._item(n,o),this._symbols[n]=i,this._lifecycleHooks.beforeAppendSymbol(n,i.get(0))),r.push(i[0]);return $(r)},n.prototype.get=function(t){if(t instanceof jQuery)for(var e in this._symbols)if(t.is(this._symbols[e]))return t;return this._symbols[t]||("string"==typeof t?this._symbols[l.shortName(t)]:null)||null},n.prototype.find=function(t){var e=this.get(t);return e||((e=this._fullSymbols[t])||null)},n.prototype._item=function(t,e){var i,n=b('<div class="symbol-list-item"><div class="addition"></div><div class="symbol"><span class="name"></span><span class="tv-market-status--symbol-list js-market-status"></span></div><div class="last-block i-invisible"><span class="last"></span><span class="tv-data-mode--symbol-list js-data-mode"></span></div><div class="change"><span class="ratio"></span> <span class="percent"></span></div><div class="controls"></div><div>');return n.setAttribute("title",t),n.querySelector(".name").textContent=e,n.setAttribute("data-symbol-full",t),n.setAttribute("symbol-short",e),
n.addEventListener("dblclick",this._onItemDblClicked.bind(this),!1),this._options.deletable&&(i=document.createElement("span"),i.className="controls-delete",i.setAttribute("title",window.t("Delete")),i.addEventListener("click",this._onDeleteClicked.bind(this),!1),n.querySelector(".controls").appendChild(i)),$(n)},n.prototype.sort=function(t,e){var i=this.getSymbols(),n=this._sortFunction(t,e).bind(this);i.sort(n),i.forEach(function(t){this._symbols[t].appendTo(this.$list)},this),this.changed.fire()},n.prototype._sortFunction=function(t,e){var i=e?-1:1,n=e?-1/0:1/0;switch(t){case"name":return function(t,e){return t=this._symbols[t].find(".name").text(),e=this._symbols[e].find(".name").text(),i*(t===e?0:t<e?-1:1)};case"ern":return function(t,e){return t=0===this._symbols[t].has(".estimate .value").length?-42:+this._symbols[t].find(".estimate .value").text(),e=0===this._symbols[e].has(".estimate .value").length?-42:+this._symbols[e].find(".estimate .value").text(),i*(t===e?0:t<e?-1:1)};case"last":return function(t,e){var o=+this._symbols[t].find(".last").text(),r=+this._symbols[e].find(".last").text();return t=isNaN(o)?n:o,e=isNaN(r)?n:r,i*(t-e)};case"change":return function(t,e){var o=+this._symbols[t].find(".change .ratio").text(),r=+this._symbols[e].find(".change .ratio").text();return t=isNaN(o)?n:o,e=isNaN(r)?n:r,i*(t-e)};case"change_percent":return function(t,e){var o=parseFloat(this._symbols[t].find(".change .percent").text()),r=parseFloat(this._symbols[e].find(".change .percent").text());return t=isNaN(o)?n:o,e=isNaN(r)?n:r,i*(t-e)}}},n.prototype.resize=function(){this.scrollbar.resize()},n.prototype.update=function(t,e){var i,n,o=this.get(t);o&&(o.addClass("success").removeClass("error"),i=this._lastData[t]||{},n=i.pricescale!==e.pricescale||i.minmov!==e.minmov||i.fractional!==e.fractional||i.minmove2!==e.minmove2,this._lastData[t]=e,n&&this._positions&&this._updateSymbolPositions(t,this._positions.positions(t)),v.enabled("text_notes")&&y("text_notes")&&this._updateTextNotes(),this._updateTitle(o,e),this._updateLast(o,e),this._updateChange(o,e),this._updatePro(o,t,e))},n.prototype.addTextNote=function(t){this.symboltextnotes[t]=!0,this._updateTextNotes()},n.prototype.removeTextNote=function(t){this.symboltextnotes[t]=!1,this._updateTextNotes()},n.prototype._getTextNoteTitleBySymbol=function(t){return""},n.prototype._updateTextNotes=function(){},n.prototype._composePositionsTooltip=function(t){var e="",i=this;return t.forEach(function(t){var n=i._lastData[t.symbol]||{},o=new h(n.pricescale||100,n.minmov||1,n.fractional,n.minmove2);""!==e&&(e+="\n"),e+=(t.side===_.BUY?$.t("Long"):$.t("Short"))+" "+Math.abs(t.qty)+" @ "+o.format(t.avgPrice)}),e},n.prototype._updateSymbolPositions=function(t,e){var n,s,a,l,c,h,u=this;v.enabled("trading_watch_positions")&&(n=u.get(t))&&(s=n.find(".positions"),e.length?(a=e[0].side===_.BUY,s.length?(s.attr("title",u._composePositionsTooltip(e)),l=s.hasClass("buy"),a!==l&&(s.removeClass(a?"sell":"buy"),s.addClass(a?"buy":"sell"),s.find("svg").remove(),
s.append($(i(a?311:312))))):(c=$("<div>").addClass("positions apply-common-tooltip symbol-status").addClass(a?"buy":"sell").attr("title",u._composePositionsTooltip(e)).on("mouseenter",o).on("mouseleave",r).append($(i(a?311:312))),h=n.find(".textnote"),h.length?c.insertBefore(h):c.appendTo(n.find(".symbol")))):s&&s.remove())},n.prototype._updateAllPositions=function(){var t=this;this.getSymbols().forEach(function(e){var i=t._positions.positions(e);t._updateSymbolPositions(e,i)})},n.prototype._updateTitle=function(t,e){var i=[],n=g(e);n&&i.push(n),e.exchange&&i.push(e.exchange),e.update_mode&&i.push(this._status(e.update_mode)),e.current_session&&i.push(this._sessions[e.current_session]),t.attr("title",i.join(", "))},n.prototype._status=function t(e){return t.statuses[e]},n.prototype._status.statuses={delayed_streaming:$.t("Delayed"),pulsed:$.t("Delayed"),streaming:$.t("Real-time"),endofday:$.t("End of Day")},n.prototype._sessions={market:$.t("Market Open"),pre_market:$.t("Pre-Market"),post_market:$.t("Post-Market"),out_of_session:$.t("Closed"),holiday:$.t("Holiday")},n.prototype._updateLast=function(t,e){var i,n,o,r,l,c;e.last_price&&(i=t.find(".last"),n=new h(e.pricescale||100,e.minmov||1,e.fractional,e.minmove2),o=n.format(e.last_price),r=null,l=n.hasForexAdditionalPrecision(),c=s(t,"quote-last"),c&&c!==o&&(r=o>c?"plus":"minus"),a(t,"quote-last",o),i.text(o).toggleClass("plus-bg","plus"===r).toggleClass("minus-bg","minus"===r),i.parent(".i-invisible").removeClass("i-invisible"),l&&i.lastCharSup(),clearTimeout(s(t,"quote-clear-highlight")),a(t,"quote-clear-highlight",setTimeout(this._updateLastClear.bind(this,i,c,o,r,l),500)))},n.prototype._updateLastClear=function(t,e,i,n,o){t.removeClass("plus-bg minus-bg"),this._updateLastDiff(t,e,i,n,o)},n.prototype._updateLastDiff=function(t,e,i,n,o){var r,s,a,l;if(null!=e){for(e=""+e,i=""+i,r=0,s=Math.min(e.length,i.length);r<s&&e.charAt(r)===i.charAt(r);r++);a=i.slice(0,r),l=i.slice(r),l.length&&n?t.html(a+'<span class="'+n+'">'+l+"</span>"):t.text(i),o&&t.lastCharSup()}},n.prototype._updateChange=function(t,e){var i,n,o,r,s=t.find(".change"),a=s.find(".percent"),l=new h(e.pricescale||100,e.minmov||1,e.fractional,e.minmove2),c=s.find(".ratio");s.addClass("success"),i=e.change||0,n=e.change_percent||0,o=null,r="",i&&(o=i>0?"plus":"minus",r=i>0?"+":""),s.toggleClass("plus","plus"===o).toggleClass("minus","minus"===o),a.text(r+this._percentageFormatter.format(n)),c.text(r+l.format(i))},n.prototype._updatePro=function(t,e,i){var n=i.pro_name,o=i.original_name;!s(t,"symbol-pro")&&n&&(a(t,"symbol-pro",n),e!==n&&this.changed.fire()),!s(t,"symbol-orig")&&o&&(a(t,"symbol-orig",o),this._fullSymbols[o]?setTimeout(this.remove.bind(this,e)):(this._fullSymbols[o]=t,this._recreateActiveState()))},n.prototype.visibleSymbols=function(){var t=[],e=this.$element.offset().top,i=e+this.$element.height();return this.$list.children().each(function(n,o){var r=$(o),a=r.offset().top;a+r.outerHeight()>e&&a<i&&t.push(s(r,"symbol-full"))}),t},n.prototype.count=function(){
return Object.keys(this._symbols).length},n.prototype.getSelectedItemsCount=function(){return this._selectableList.getSelectedKeys().length},n.prototype.getSelectedSymbols=function(){return this._selectableList.getSelectedKeys()},n.prototype.getFocusedSymbol=function(){return this._selectableList.getFocusedKey()},n.prototype.focusItem=function(t){return this._selectableList.focusItem(t)},n.prototype.removeFocus=function(){return this._selectableList.removeFocus()},n.prototype.registerHooksHandlers=function(t){this._lifecycleHooks.registerHandlers(t)},n.prototype.beforeAppendContextMenuItems=function(t){return this._lifecycleHooks.beforeAppendContextMenuItems(t)},n.prototype.appendTo=function(t){this.$element.appendTo(t),this._initSelectable()},n.prototype.destroy=function(){this._symbolLink.unsubscribe(this._onSymbolChange),this._selectableList&&this._selectableList.destroy()},t.exports=n}).call(e,i(8))},function(t,e,i){"use strict";var n,o,r,s,a,l;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"PositionsWatcher",function(){return l}),n=i(0),o=i(6),i.n(o),r=i(194),s=i(8),a=i.n(s),l=function(t){function e(e){var i=t.call(this,e)||this;return i.positionsUpdate=new a.a,i._symbols=[],i._symbolPositions={},i}return n.c(e,t),e.prototype.positions=function(t){return-1!==this._symbols.indexOf(t)?this._symbolPositions[t]:[]},e.prototype.setSymbols=function(t){var e,i=this,n=Object.keys(this._symbolPositions);this._symbols.forEach(function(e){-1===t.indexOf(e)&&-1!==n.indexOf(e)&&delete i._symbolPositions[e]}),e=[],t.forEach(function(t){-1===i._symbols.indexOf(t)&&(e.push(t),i._symbolPositions[t]=[])}),this._symbols=t,e.length&&this._requestPositions(e)},e.prototype.stopService=function(){this._clearPositions();var t=Object(o.ensure)(this.activeBroker());t.fullUpdate.unsubscribe(this,this._accountUpdate),t.positionUpdate.unsubscribe(this,this._positionUpdate)},e.prototype.startService=function(){this._symbols&&this._requestPositions(this._symbols);var t=Object(o.ensure)(this.activeBroker());t.positionUpdate.subscribe(this,this._positionUpdate),t.fullUpdate.subscribe(this,this._accountUpdate)},e.prototype._clearPositions=function(){var t=this;Object.keys(this._symbolPositions).forEach(function(e){t._symbolPositions[e].length&&(t._symbolPositions[e]=[],t.positionsUpdate.fire(e,[]))})},e.prototype._accountUpdate=function(){this._clearPositions(),this._requestPositions(this._symbols)},e.prototype._positionUpdate=function(t){var e,i,n,o=t.symbol;-1!==this._symbols.indexOf(o)&&(e=this._symbolPositions[o],i=e.reduce(function(e,i,n){return i.id===t.id?n:e},-1),n=0===t.qty,-1!==i&&n?e.splice(i,1):-1!==i||n?e[i]=t:e.push(t),this.positionsUpdate.fire(o,e))},e.prototype._requestPositions=function(t){var e=this,i=this.activeBroker();i&&t.length&&i.positions().then(function(i){i.forEach(function(i){-1!==t.indexOf(i.symbol)&&e._positionUpdate(i)})})},e}(r.a)},function(t,e,i){"use strict";function n(){return/mac/i.test(navigator.platform)}function o(t){return new f(Object.assign({},{modes:[h,u,_,p,d]},t))}var r,s,a,l,c,h,u,d,p,_,f
;Object.defineProperty(e,"__esModule",{value:!0}),r=i(122),s=function(){function t(t){this._coll=t}return t.prototype.getItemByIdx=function(t){return this._coll.item(t)},t.prototype.getItems=function(){return Array.from(this._coll)},t.prototype.getFirstItem=function(){return this.getItemByIdx(0)},t.prototype.getLastItem=function(){var t=this._coll.length;return this.getItemByIdx(t-1)},t.prototype.getItemIdx=function(t){return Array.prototype.findIndex.call(this._coll,function(e){return e===t})},t.prototype.getLength=function(){return this._coll.length},t.prototype.contains=function(t){return-1!==this.getItemIdx(t)},t}(),function(t){t[t.Prev=-1]="Prev",t[t.Next=1]="Next"}(a||(a={})),l="cursor",c=function(){function t(t){var e=this;this._list=t.list,this._items=new s(this._list.getElementsByClassName(t.listItemClass)),this._focused=new s(this._list.getElementsByClassName(t.focusedListItemClass)),this._selected=new s(this._list.getElementsByClassName(t.selectedListItemClass)),this._cursor=new s(this._list.getElementsByClassName(l)),this._selectedListItemClass=t.selectedListItemClass,this._focusedListItemClass=t.focusedListItemClass,this._onSelect=t.onSelect,this._onNavigate=t.onNavigate,this._onConfirm=t.onConfirm,this._onDelete=t.onDelete,this._keyboardActions=new Map,this._mouseActions=new Map,t.modes&&t.modes.forEach(function(t){return new t({selection:e})})}return t.prototype.selectItem=function(t){t.classList.add(this._selectedListItemClass)},t.prototype.unselectItem=function(t){t.classList.remove(this._selectedListItemClass)},t.prototype.focusItem=function(t){this.removeFocus(),t.classList.add(this._focusedListItemClass),this.setCursor(t)},t.prototype.getFocusedItemIdx=function(){var t=this._focused.getFirstItem();return t?this._items.getItemIdx(t):-1},t.prototype.getFocusedItem=function(){return this._focused.getFirstItem()},t.prototype.isSelected=function(t){return this._selected.contains(t)},t.prototype.isFocused=function(t){return this._focused.contains(t)},t.prototype.isListItem=function(t){return this._items.contains(t)},t.prototype.removeSelections=function(){var t=this;this._selected.getItems().forEach(function(e){return e.classList.remove(t._selectedListItemClass)})},t.prototype.removeFocus=function(){var t=this;this._focused.getItems().forEach(function(e){return e.classList.remove(t._focusedListItemClass)})},t.prototype.move=function(t,e,i){var n,o=t?this._items.getItemIdx(t):-1;(n="number"==typeof e?this._items.getItemByIdx(this._calcNextItemIdx(o,e)):e)&&(i(n,t),this._scrollIfNotVisible(n))},t.prototype.getSelectedItems=function(){return this._selected.getItems()},t.prototype.getList=function(){return this._list},t.prototype.getItemsCollection=function(){return this._items},t.prototype.getSelectedCollection=function(){return this._selected},t.prototype.setCursor=function(t){this.removeCursor(),t.classList.add(l)},t.prototype.removeCursor=function(){this._cursor.getItems().forEach(function(t){return t.classList.remove(l)})},t.prototype.getCursorItem=function(){return this._cursor.getFirstItem()},
t.prototype.getCursorItemIdx=function(){var t=this.getCursorItem();return t?this._items.getItemIdx(t):-1},t.prototype.onSelect=function(t,e){this._onSelect&&this._onSelect({cursor:e,items:this.getSelectedItems(),action:t})},t.prototype.onNavigate=function(t,e){this._onNavigate&&this._onNavigate({cursor:t,cursorIdx:this.getCursorItemIdx(),items:[t],action:e})},t.prototype.onConfirm=function(t,e){this._onConfirm&&this._onConfirm({cursor:t,items:[t],action:e})},t.prototype.onDelete=function(t,e,i){this._onDelete&&this._onDelete({cursor:i,items:t,action:e})},t.prototype.registerKeyboardAction=function(t,e){this._keyboardActions.set(t,e)},t.prototype.registerMouseAction=function(t,e){this._mouseActions.set(t,e)},t.prototype.dispatchKeyboardEvent=function(t,e){var i=this._keyboardActions.get(t);i&&i(e)},t.prototype.dispatchMouseEvent=function(t,e){var i=this._mouseActions.get(t);i&&i(e)},t.prototype.delegateClick=function(t){var e=this;return function(i){var n,o;if(!i.defaultPrevented)for(n=e._list.contains(i.target),o=i.target;n&&o!==e._list;){if(o&&e.isListItem(o))return void t(o);o=o&&o.parentElement}}},t.prototype.clear=function(){this.removeSelections(),this.removeFocus(),this.removeCursor()},t.prototype.destroy=function(){delete this._list,delete this._items,delete this._selected,delete this._focused,delete this._cursor,delete this._mouseActions,delete this._keyboardActions},t.prototype._scrollIfNotVisible=function(t){var e=this._list.getBoundingClientRect(),i=t.getBoundingClientRect(),n=e.top,o=e.bottom,r=i.top,s=i.bottom;return r<n?void(this._list.scrollTop-=n-r):s>o?void(this._list.scrollTop+=s-o):void 0},t.prototype._calcNextItemIdx=function(t,e){var i=0,n=this._items.getLength()-1,o=t+e;return o<i&&(o=n),o>n&&(o=i),o},t}(),h=function(){function t(t){var e=this;this._focusNext=function(t){t.preventDefault(),t.stopPropagation();var i=e._selection.getCursorItem();e._selection.move(i,a.Next,e._focusItem.bind(e,"down"))},this._focusPrev=function(t){t.preventDefault(),t.stopPropagation();var i=e._selection.getCursorItem();e._selection.move(i,a.Prev,e._focusItem.bind(e,"up"))},this._focusFirst=function(t){var i,n,o;t.preventDefault(),t.stopPropagation(),i=e._selection.getItemsCollection(),n=i.getFirstItem(),o=e._selection.getFocusedItem(),e._selection.move(o,n,e._focusItem.bind(e,"home"))},this._focusLast=function(t){var i,n,o;t.preventDefault(),t.stopPropagation(),i=e._selection.getItemsCollection(),n=i.getLastItem(),o=e._selection.getFocusedItem(),e._selection.move(o,n,e._focusItem.bind(e,"end"))},this._selection=t.selection,this._selection.registerMouseAction("click",this._selection.delegateClick(this._focusItem.bind(this,"click"))),this._selection.registerKeyboardAction("up",this._focusPrev),this._selection.registerKeyboardAction("down",this._focusNext),this._selection.registerKeyboardAction("shift+space",this._focusPrev),this._selection.registerKeyboardAction("space",this._focusNext),this._selection.registerKeyboardAction("home",this._focusFirst),this._selection.registerKeyboardAction("end",this._focusLast)}
return t.prototype._focusItem=function(t,e){this._selection.removeSelections(),this._selection.focusItem(e),this._selection.setCursor(e),this._selection.onNavigate(e,t)},t}(),u=function(){function t(t){this._selection=t.selection,this._selection.registerKeyboardAction("alt+return",this._onItemKeyDown.bind(this,"alt+return")),this._selection.registerKeyboardAction("alt+shift+return",this._onItemKeyDown.bind(this,"alt+shift+return"))}return t.prototype._onItemKeyDown=function(t,e){e.preventDefault(),e.stopPropagation();var i=this._selection.getCursorItem();i&&this._selection.onConfirm(i,t)},t}(),d=function(){function t(t){this._selection=t.selection,this._selection.registerMouseAction("shift+click",this._selection.delegateClick(this._onItemClick.bind(this,"shift+click"))),this._selection.registerKeyboardAction("shift+down",this._nextRangeItem.bind(this,"shift+down")),this._selection.registerKeyboardAction("shift+up",this._prevRangeItem.bind(this,"shift+up"))}return t.prototype._nextRangeItem=function(t,e){var i,n,o,r;e.stopPropagation(),e.preventDefault(),i=this._selection.getItemsCollection(),n=this._selection.getCursorItem(),o=this._selection.getCursorItemIdx(),r=i.getLength()-1,o!==r&&this._selection.move(n,a.Next,this._addItemToRange(t,function(t,e){return t<e}))},t.prototype._prevRangeItem=function(t,e){var i,n,o;e.stopPropagation(),e.preventDefault(),i=this._selection.getCursorItem(),n=this._selection.getCursorItemIdx(),o=0,n!==o&&this._selection.move(i,a.Prev,this._addItemToRange(t,function(t,e){return t>e}))},t.prototype._onItemClick=function(t,e){var i,n=this._selection.getItemsCollection().getItems(),o=this._getRangeInfo(e);for(this._selection.removeSelections(),i=o.start;i<=o.end;i++)this._selection.isSelected(n[i])||this._selection.selectItem(n[i]);this._selection.setCursor(e),this._selection.onSelect(t,e)},t.prototype._getRangeInfo=function(t){var e=this._selection.getItemsCollection(),i=e.getItemIdx(t),n=this._selection.getFocusedItemIdx(),o=-1!==n?n:0;return i>o?{start:o,end:i}:{start:i,end:o}},t.prototype._addItemToRange=function(t,e){var i=this;return function(n,o){var r=i._selection.getItemsCollection(),s=r.getItemIdx(n),a=i._selection.getFocusedItemIdx();0===i._selection.getSelectedCollection().getLength()&&o&&i._selection.selectItem(o),e(a,s)?i._selection.selectItem(n):o&&i._selection.unselectItem(o),i._selection.setCursor(n),i._selection.onSelect(t,n)}},t}(),p=function(){function t(t){this._selection=t.selection,this._selection.registerMouseAction("ctrl+click",this._selection.delegateClick(this._onItemClick.bind(this,"ctrl+click"))),this._selection.registerMouseAction("meta+click",this._selection.delegateClick(this._onItemClick.bind(this,"meta+click"))),this._selection.registerKeyboardAction("ctrl+a",this._selectAll.bind(this,"ctrl+a")),this._selection.registerKeyboardAction("meta+a",this._selectAll.bind(this,"meta+a")),this._selection.registerKeyboardAction("esc",this._unselectAll.bind(this,"esc"))}return t.prototype._onItemClick=function(t,e){
var i=this._selection.getFocusedItem(),n=this._selection.getSelectedCollection().getLength();i&&0===n&&this._selection.selectItem(i),this._toggleSelection(e),this._selection.onSelect(t,e)},t.prototype._toggleSelection=function(t){this._selection.isSelected(t)?this._selection.unselectItem(t):this._selection.selectItem(t),this._selection.setCursor(t)},t.prototype._selectAll=function(t,e){var i,n=this;e.preventDefault(),e.stopPropagation(),i=this._selection.getItemsCollection(),i.getItems().forEach(function(t){return n._selection.selectItem(t)}),this._selection.onSelect(t)},t.prototype._unselectAll=function(t,e){e.preventDefault(),e.stopPropagation(),this._selection.removeSelections();var i=this._selection.getFocusedItem();i&&this._selection.setCursor(i),this._selection.onSelect(t)},t}(),_=function(){function t(t){this._selection=t.selection,this._selection.registerKeyboardAction("del",this._delete.bind(this,"del"))}return t.prototype._delete=function(t,e){var i,n;e.preventDefault(),e.stopPropagation(),i=this._selection.getSelectedItems(),n=this._selection.getCursorItem(),n&&i.length>0?this._selection.onDelete(i,t,n):n&&this._selection.onDelete([n],t,n)},t}(),i.d(e,"SelectableList",function(){return f}),e.createSelectableList=o,f=function(){function t(t){var e=this;this._dispatchClick=function(t){t.ctrlKey&&!n()?e._selection.dispatchMouseEvent("ctrl+click",t):t.shiftKey?e._selection.dispatchMouseEvent("shift+click",t):t.metaKey&&n()?e._selection.dispatchMouseEvent("meta+click",t):e._selection.dispatchMouseEvent("click",t)},this._onSelect=function(t){e._collectKeys(),e._opts.onSelect&&e._opts.onSelect(t)},this._onNavigate=function(t){e._collectKeys(),e._opts.onNavigate&&e._opts.onNavigate(t)},this._disableSelection=function(){e._list.onselectstart=function(){return!1}},this._enableSelection=function(){e._list.onselectstart=function(){return null}},this._preventKeyUp=function(t){t&&t.preventDefault()},this._opts=t,this._list=t.list,this._keyboardEventsRoot=t.keyboardEventsRoot||t.list,this._selection=new c({list:t.list,listItemClass:t.listItemClass,selectedListItemClass:t.selectedListItemClass,focusedListItemClass:t.focusedListItemClass,onSelect:this._onSelect,onNavigate:this._onNavigate,onConfirm:t.onConfirm,onDelete:t.onDelete,modes:t.modes}),this._selectedKeys=[],this._focusedKey=null,this._cursorKey=null,this.activate(),this._collectKeys()}return t.prototype.activate=function(){this._list.addEventListener("click",this._dispatchClick),this._list.addEventListener("keydown",this._disableSelection),this._list.addEventListener("keyup",this._enableSelection),n()?Object(r.bind)("meta+a",this._selection.dispatchKeyboardEvent.bind(this._selection,"meta+a"),"keydown",this._opts.list):Object(r.bind)("ctrl+a",this._selection.dispatchKeyboardEvent.bind(this._selection,"ctrl+a"),"keydown",this._opts.list),Object(r.bind)("alt+return",this._selection.dispatchKeyboardEvent.bind(this._selection,"alt+return"),"keydown",this._opts.list),
Object(r.bind)("alt+shift+return",this._selection.dispatchKeyboardEvent.bind(this._selection,"alt+shift+return"),"keydown",this._opts.list),Object(r.bind)("shift+down",this._selection.dispatchKeyboardEvent.bind(this._selection,"shift+down"),"keydown",this._opts.list),Object(r.bind)("shift+up",this._selection.dispatchKeyboardEvent.bind(this._selection,"shift+up"),"keydown",this._opts.list),Object(r.bind)("up",this._selection.dispatchKeyboardEvent.bind(this._selection,"up"),"keydown",this._keyboardEventsRoot),Object(r.bind)("down",this._selection.dispatchKeyboardEvent.bind(this._selection,"down"),"keydown",this._keyboardEventsRoot),Object(r.bind)("home",this._selection.dispatchKeyboardEvent.bind(this._selection,"home"),"keydown",this._keyboardEventsRoot),Object(r.bind)("end",this._selection.dispatchKeyboardEvent.bind(this._selection,"end"),"keydown",this._keyboardEventsRoot),Object(r.bind)("esc",this._selection.dispatchKeyboardEvent.bind(this._selection,"esc"),"keydown",this._opts.list),Object(r.bind)("space",this._selection.dispatchKeyboardEvent.bind(this._selection,"space"),"keydown",this._keyboardEventsRoot),Object(r.bind)("shift+space",this._selection.dispatchKeyboardEvent.bind(this._selection,"shift+space"),"keydown",this._keyboardEventsRoot),this._opts.deletable&&Object(r.bind)("del",this._selection.dispatchKeyboardEvent.bind(this._selection,"del"),"keydown",this._opts.list),Object(r.bind)("alt+return",this._preventKeyUp,"keyup",this._keyboardEventsRoot),Object(r.bind)("alt+shift+return",this._preventKeyUp,"keyup",this._keyboardEventsRoot)},t.prototype.deactivate=function(){this._list.removeEventListener("click",this._dispatchClick),this._list.removeEventListener("keydown",this._disableSelection),this._list.removeEventListener("keyup",this._enableSelection),Object(r.unbind)("alt+return","keydown",this._opts.list),Object(r.unbind)("alt+shift+return","keydown",this._opts.list),Object(r.unbind)("ctrl+a","keydown",this._opts.list),Object(r.unbind)("meta+a","keydown",this._opts.list),Object(r.unbind)("shift+down","keydown",this._opts.list),Object(r.unbind)("shift+up","keydown",this._opts.list),Object(r.unbind)("up","keydown",this._keyboardEventsRoot),Object(r.unbind)("down","keydown",this._keyboardEventsRoot),Object(r.unbind)("home","keydown",this._keyboardEventsRoot),Object(r.unbind)("end","keydown",this._keyboardEventsRoot),Object(r.unbind)("esc","keydown",this._opts.list),Object(r.unbind)("space","keydown",this._keyboardEventsRoot),Object(r.unbind)("shift+space","keydown",this._keyboardEventsRoot),Object(r.unbind)("del","keydown",this._opts.list),Object(r.unbind)("alt+return","keyup",this._keyboardEventsRoot),Object(r.unbind)("alt+shift+return","keyup",this._keyboardEventsRoot)},t.prototype.focusItem=function(t){this._selection.isSelected(t)||this._selection.isFocused(t)||(this._selection.removeSelections(),this._selection.focusItem(t))},t.prototype.removeFocus=function(){this._selection.removeFocus()},t.prototype.restore=function(){var t,e,i=this
;this._opts.getNodeKey&&(t=this._selection.getItemsCollection().getItems(),e=this._opts.getNodeKey,t.forEach(function(t){var n=e(t);i._focusedKey===n&&i._selection.focusItem(t),i._cursorKey===n&&i._selection.setCursor(t),i._selectedKeys.includes(n)&&i._selection.selectItem(t)}))},t.prototype.getSelectedKeys=function(){return this._collectKeys(),this._selectedKeys},t.prototype.getFocusedKey=function(){return this._collectKeys(),this._focusedKey||null},t.prototype.clear=function(){this._selection.clear()},t.prototype.destroy=function(){this.deactivate(),this._selection.destroy(),delete this._selection,delete this._list,delete this._keyboardEventsRoot,delete this._opts},t.prototype._collectKeys=function(){var t,e,i,n;this._opts.getNodeKey&&(t=this._opts.getNodeKey,e=this._selection.getSelectedItems(),i=this._selection.getFocusedItem(),n=this._selection.getCursorItem(),this._selectedKeys=e.map(function(e){return t(e)}),this._focusedKey=i?t(i):null,this._cursorKey=n?t(n):null)},t}()},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"ListViewHooks",function(){return n});var n=function(){function t(){this._handlers=[]}return t.prototype.registerHandlers=function(t){this._handlers.push(t)},t.prototype.beforeAppendSymbol=function(t,e){this._handlers.forEach(function(i){i.beforeAppendSymbol&&i.beforeAppendSymbol(t,e)})},t.prototype.beforeAppendContextMenuItems=function(t){return this._handlers.reduce(function(e,i){return i.beforeAppendContextMenuItems?e.concat(i.beforeAppendContextMenuItems(t)):e},[])},t.prototype.afterSymbolConfirm=function(t,e){this._handlers.forEach(function(i){i.afterSymbolConfirm&&i.afterSymbolConfirm(t,e)})},t.prototype.beforeAppendSymbolsHeader=function(t){this._handlers.forEach(function(e){e.beforeAppendSymbolsHeader&&e.beforeAppendSymbolsHeader(t)})},t}()},function(t,e){},function(t,e){},function(t,e,i){"use strict";(function(e){function n(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r,s,a,l,c,h,u,d,p,_,f,m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},g=function(){function t(t,e){var i,n;for(i=0;i<e.length;i++)n=e[i],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();i(97),r=i(163),s=n(r),a=i(147),l=i(148),c=i(611),h=n(c),u=i(617),d=n(u),p=i(403),_=i(44),i(618),f=function(){function t(i){var n,r,s;o(this,t),this._bridge=i,this._properties=i.properties,this.widgetName="widgetbar",this.isEmbedWidgetNews=i.options&&i.options.embedWidgetNews||!1,this.$delayedIconContainer=this._bridge.$header.find(".widgetbar-widgettitle"),n=e.enabled("charting_library_base")?"libraryProvider":"stocktwits",this._$container=i.$body,s=this.normalizeProvider((this._properties.value()||{}).provider),
r=s||(i.options&&i.options.provider&&i.options.provider[window.locale]||n),this._prepareLayout(this._$container),this.setProvider(r,!0),this.lastDigest=null,this._onSymbolChange=this.onSymbolChange.bind(this),i.symbol.subscribe(this._onSymbolChange,{callWithLast:!0}),window.djangoLogoutFinished.subscribe(this,this.update)}return g(t,[{key:"normalizeProvider",value:function(t){var e;if("object"===(void 0===t?"undefined":m(t))&&(e=t.base,t=t[window.locale]||e,-1===this.providers.indexOf(t)&&(t=e)),t in h.default)return t}},{key:"setProvider",value:function(t,e){if(this._provider=t,this._dataProvider&&this._dataProvider.destroy(),this._dataProvider=new h.default[t],this._dataProvider.init({newsWidget:this,onData:this.updateData.bind(this)}),this._readonlyProvider=!this._dataProvider.options(),this.lastDigest=null,this._$categoriesSelector.toggleClass("js-hidden",this._readonlyProvider),!e){this.updateProperties(this._properties.value());var i=-1!==this._bridge.symbol.listeners().map(function(t){return t.cb}).indexOf(this._onSymbolChange);i&&this._dataProvider.noUpdateOnSymbolChange&&this._bridge.symbol.unsubscribe(this._onSymbolChange),i||this._dataProvider.noUpdateOnSymbolChange||this._bridge.symbol.subscribe(this._onSymbolChange)}}},{key:"updateProperties",value:function(t){var e={provider:{}};e.provider[window.locale]=this._provider,this._properties.setValue($.extend(!0,t||{},e))}},{key:"_prepareLayout",value:function(t){var n=this;this._$container=t,this._$widget=$('<div class="tv-news">').appendTo(t),this._$data=$('<div class="ns-data">').appendTo(this._$widget),this._scroll=new a.SidebarCustomScroll(this._$widget,this._$data),this._bridge.height.subscribe(this.resize.bind(this)),this._bridge.visible.subscribe(this.resize.bind(this)),this._bridge.visible.subscribe(function(t){t&&n._update_skipped&&(n._update_skipped=!1,n.update())}),this._$categoriesSelector=$('<a class="button"></a>').append($(i(393)).attr({width:17,height:17})).appendTo(this._bridge.$headerspace),this._$categoriesSelector.on("click",this._showCategoriesMenu.bind(this)),(0,l.bindPopupMenu)(this._$categoriesSelector,null,{event:"show-popup",hideEvent:"hide-popup",addClass:"ch-popup ch-settings-popup",careBottomBorder:!0,careRightBorder:!0,viewportSpacing:2,reverse:!0}),this._bridge.options&&this._bridge.options.permanentProvider||e.enabled("charting_library_base")||(this._$providerSelector=$('<a class="button"></a>').append($(i(316)).attr({width:17,height:17})).appendTo(this._bridge.$headerspace),this._$providerSelector.on("click",this._showProviderMenu.bind(this)),(0,l.bindPopupMenu)(this._$providerSelector,null,{event:"show-popup",hideEvent:"hide-popup",addClass:"ch-popup ch-settings-popup",careBottomBorder:!0,careRightBorder:!0,viewportSpacing:2,reverse:!0}))}},{key:"_showProviderMenu",value:function(t){var e=this,i=this,n=[];this.providers.forEach(function(t){t in h.default&&n.push({title:h.default[t].title,action:function(){i.setProvider(t),i.update()},active:t===e._provider})}),$(t.target).trigger("show-popup",[n]),t.stopPropagation()}},{
key:"_showCategoriesMenu",value:function(t){var e=this._dataProvider.options();$(t.target).trigger("show-popup",[e]),t.stopPropagation()}},{key:"getUpdateTimeout",value:function(){return h.default[this._provider].timeout}},{key:"update",value:function(){var t,e,i,n,o,r=this;return this._bridge.visible.value()?(t=this._quoteMetaInfo)?(e=t.name,this._need_show_screen=e!==this._symbol||this._provider!==this._prevProvider,this._symbol=e,this._prevProvider=this._provider,this._need_show_screen&&(this._startLoading(),this.lastDigest=null,clearInterval(this._update_interval),(i=this.getUpdateTimeout())&&(this._update_interval=setInterval(this.update.bind(this),i))),n="spread"===t.type?t.legs:s.default.shortName(t.pro_name),o=this.symbolTypeToCategory(t.type),this._dataProvider.updateTitle(n),void this._dataProvider.getNews("widgetbar",n,t.type,t.exchange,o).then(function(t){r.updateData(t)}).catch(function(t){throw r._stopLoading(),t})):(this._clearListUI(),void this._stopLoading()):void(this._update_skipped=!0)}},{key:"symbolTypeToCategory",value:function(t){var e={stock:"stocks",forex:"currencies",futures:"futures",bitcoin:"bitcoin",index:"indices"};return e[t]?e[t]:"all"}},{key:"updateData",value:function(t,e){e=e||{},this._stopLoading(),e.incremental||this._clearListUI(),t&&t.length&&(this._need_scroll_top=this._need_show_screen||t[0].published>this._last_news_time||e.incremental,this._last_news_time=t[0].published,this._need_scroll_top&&(this._$data.css("top",0),this._scroll.resize()),e.incremental&&t.reverse(),t.forEach(this.renderItem.bind(this,e)),this.lastDigest=this._getDigest(e.incremental?t[t.length-1]:t[0]))}},{key:"_startLoading",value:function(){this._$data.addClass("loading")}},{key:"_stopLoading",value:function(){this._$data.removeClass("loading")}},{key:"_clearListUI",value:function(){(0,p.destroy)(this._$data),this._$data.empty()}},{key:"_getDigest",value:function(t){return(0,d.default)(t.title+t.published)}},{key:"resize",value:function(t){this._scroll.resize()}},{key:"renderItem",value:function(t,e){var i,n;t=t||{},i=this._getDigest(e),n=this._dataProvider.renderItem(e),n.data("digest",i),(0,p.agoDateFormatter)(n.find(".ns-item-date time"),e.published),this.lastDigest&&(this.lastDigest===this._getDigest(e)?this.lastDigest=null:this.newItem(n)),t.incremental?n.prependTo(this._$data):n.appendTo(this._$data)}},{key:"highlight",value:function(t){new Promise(function(t){t()}).then(function(e){var n=i(131).setThemedColor,o=n("color-news-highlight");t.css("background-color",o),t.highlight(5)}.bind(null,i)).catch(i.oe)}},{key:"newItem",value:function(t){var e,i=this;if(this._bridge.visible.value())return void this.highlight(t);e=!!this._digestsToHighlight,this._digestsToHighlight=(this._digestsToHighlight||[]).concat(t.data("digest")).slice(-20),e||this._bridge.visible.when(function(){var t=i._digestsToHighlight;delete i._digestsToHighlight,t&&i._$data.children().each(function(e,n){var o=$(n);-1!==t.indexOf(o.data("digest"))&&i.highlight(o)})})}},{key:"onSymbolChange",value:function(t){var e,i,n
;if(t!==this._symbol&&t!==this._altSymbol){if(e=(0,_.getQuoteSessionInstance)("full"),i=this,i._quoteSymbol&&e.unsubscribe(i._bridge.id,i._quoteSymbol),i._quoteMetaInfo=null,!t)return void(i._quoteSymbol=void 0);i._quoteSymbol=t,i._altSymbol=void 0,i.update(),this._bridge.clearNotifications(),n=!1,e.subscribe(i._bridge.id,t,function(o){var r,a,l;if(!n)return"permission_denied"===o.status&&o.values&&o.values.alternative?void i.onSymbolChange(o.values.alternative):void(o.values&&o.values.short_name&&("CHXEUR"===o.values.listed_exchange&&o.values.pro_name===o.values.original_name?(l=o.values.pro_name[o.values.pro_name.length-1],r=i.lastCharacterToExchange[l],a=o.values.pro_name.substring(0,o.values.pro_name.length-1)):(r=o.values.listed_exchange,a=o.values.pro_name||o.values.original_name||o.values.short_name),i._altSymbol=a,i._quoteMetaInfo={name:s.default.shortName(a),exchange:r,type:o.values.type,legs:o.values.base_name,pro_name:a,original_name:o.values.original_name},"spread"===o.values.type&&Array.isArray(o.values.base_name)&&(i._quoteMetaInfo.legs=o.values.base_name.map(function(t){return s.default.shortName(t)}),i._quoteMetaInfo.exchange=o.values.base_name.map(function(t){return s.default.getExchange(t)})),i.update(),n=!0,setTimeout(function(){e.unsubscribe(i._bridge.id,t),i._dataProvider.noUpdateOnSymbolChange&&i._bridge.symbol.unsubscribe(i._onSymbolChange)},0)))})}}},{key:"destroy",value:function(){this._quoteSymbol&&(0,_.getQuoteSessionInstance)("full").unsubscribe(this._bridge.id,this._quoteSymbol),(0,p.destroy)(this._$data),this._update_interval&&clearInterval(this._update_interval)}},{key:"lastCharacterToExchange",get:function(){return{A:"EURONEXT",B:"EURONEXT",P:"EURONEXT",U:"EURONEXT",C:"OMX",H:"OMX",S:"OMX",D:"FRA",E:"MAC",I:"DUB",L:"LSE",M:"MIL",O:"OSL",V:"VIE",Y:"IST",Z:"SWX"}}},{key:"providers",get:function(){var t={base:["yahoo","stocktwits","futuresmag","dailyfx"],en:["yahoo","dailyfx","futuresmag","fxstreet","kiplinger","stocktwits"],ru:["djforex","yahoo","stocktwits","futuresmag","dailyfx"],pl:["yahoo","moneypl","stocktwits","futuresmag","dailyfx"],tr:["bloomberght","fxstreet","yahoo","stocktwits","futuresmag","dailyfx"],kr:["edali","yahoo","stocktwits","futuresmag","dailyfx"],es:["yahoo","fxstreet","stocktwits","futuresmag","dailyfx"]};return window.locale in t?t[window.locale]:t.base}}]),t}(),t.exports=f}).call(e,i(4))},function(t,e,i){"use strict";var n,o;Object.defineProperty(e,"__esModule",{value:!0}),n=i(317),o={libraryProvider:n.LibraryNewsProvider},e.default=o,t.exports=e.default},function(t,e,i){"use strict";(function(n){function o(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e)
;t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var l,c,h,u,d,p,_;Object.defineProperty(e,"__esModule",{value:!0}),l=function(){function t(t,e){var i,n;for(i=0;i<e.length;i++)n=e[i],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),c=function t(e,i,n){var o,r,s;return null===e&&(e=Function.prototype),void 0===(o=Object.getOwnPropertyDescriptor(e,i))?(r=Object.getPrototypeOf(e),null===r?void 0:t(r,i,n)):"value"in o?o.value:void 0!==(s=o.get)?s.call(n):void 0},h=i(613),u=o(h),d=i(614),p=o(d),_=function(t){function e(){r(this,e);var t=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,"yahoo"));return t.symbology=new p.default,t}return a(e,t),l(e,[{key:"getURLforSymbol",value:function(t,i,n){return"MTGOX"===n?this.getURLforCategory("bitcoin"):"futures"!==i&&"cfd"!==i||t in this.symbology.specialCases?c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getURLforSymbol",this).call(this,t,i,n):this.getURLforCategory("futures")}},{key:"getURLforSpread",value:function(t,i,n){return"MTGOX"===n?this.getByCategory("bitcoin"):"futures"===i||"cfd"===i?this.getByCategory("futures"):c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"getURLforSpread",this).call(this,t)}},{key:"itemTransform",value:function(t){var i,n,o;return"it"===window.language?t.shortDescription=t.shortDescription.replace(/<img[^>]*>/g,""):"pt"===window.language&&(t.shortDescription=this._hackForBrasilianFeed(t.shortDescription)),i=c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"prepareShortDescriptionToMainNewsWidget",this).call(this,t.shortDescription),n=this.getSource(t),"CoinDesk"!==n&&"n-tv"!==n||(i=i.replace(/<img[^>]*>/g,""),""===i.trim()&&(i="")),o=this.correctLink(t.link),{id:t.id,link:o,published:t.published,publishedTimestamp:t.publishedTimestamp,shortDescription:i,title:t.title,source:n}}},{key:"_hackForBrasilianFeed",value:function(t){var e,i,n,o,r,s,a,l,c=document.createElement("div");for(c.innerHTML=t,e="field--name-field-conteudo",i=["field--type-created","field--name-uid"],n=c.getElementsByClassName(e),o=0;o<i.length;o++)(r=c.getElementsByClassName(i[o])[0])&&r.parentNode.removeChild(r);if(!n.length)return c.innerHTML;for(c.innerHTML=n[0].innerHTML,s=document.createElement("div"),a=0;a<c.children.length&&s.textContent.length+c.children[a].textContent.length<1e3;a++)s.appendChild(c.children[a]);return a&&a<c.children.length&&(l=document.createElement("p"),l.innerHTML="...",s.appendChild(l)),s.innerHTML}},{key:"correctLink",value:function(t){var e=t.split("*");return 2===e.length&&e[1].match(/^https?:\/\//)&&(t=e[1]),t}},{key:"getSource",value:function(t){var e,i=t.summary&&t.summary.match(/\[[^\-]+\]/g);if(i)return i[0].replace(/\[(at )?|\]/g,"");for(e in this.newsSources)if(~t.link.indexOf(e))return this.newsSources[e];return"Yahoo Finance"}},{
key:"renderItem",value:function(t){var i,n=document.createElement("div");return t.shortDescription&&(t.shortDescription=t.shortDescription.replace(/<img[^>]*>/g,"")),n.innerHTML=t.shortDescription||t.contentSnippet||t.content||"",i=n.getElementsByTagName("a")[0],i&&i.parentNode.removeChild(i),t.shortDescription=n.innerHTML,c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"renderItem",this).call(this,t)}},{key:"updateWidgetBarTitle",value:function(t){var e=this.constructor.title;this._newsWidget._quoteMetaInfo&&this._newsWidget._quoteMetaInfo.name&&this.needAppendSymbolToTitle()&&(e+=" "+$.t("for")+" "+this._newsWidget._quoteMetaInfo.name),this._newsWidget._bridge.setTitle(e)}},{key:"needAppendSymbolToTitle",value:function(){return"ja"!==window.locale}},{key:"newsSources",get:function(){return{"4-traders":"4-traders","advfn.com":"ADVFN","allthingsd.com":"AllThingsD","ap.org":"AP",atlantic:"The Atlantic","bankrate.com":"Bankrate.com","barrons.com":"Barrons.com","bithub.pl":"Bithub","bizjournals.com":"Business Journals","bloomberg.com":"Bloomberg","businessinsider.com":"Business Insider","businesswire.com":"Business Wire","businessweek.com":"BusinessWeek","cnbc.com":"CNBC","cnnmoney.com":"CNNMoney.com",coindesk:"CoinDesk","cointelegraph.com":"Cointelegraph",consumerreports:"Consumer Reports",creditcards:"CreditCards.com","dailyfx.com":"DailyFX","entrepreneur.com":"Entrepreneur",etfdb:"ETF Database",etftrends:"ETF Trends",etfguide:"ETFguide",etfzone:"ETFZone","exame.abril.com":"Exame","feedburner.com":"FeedBurner","ft.com":"Financial Times","fool.com":"Motley Fool","forbes.com":"Forbes","fortune.cnn.com":"Fortune","foxbusiness.com":"Fox Business","futuresmag.com":"Futuresmag.com",fxempire:"FXEmpire",fxstreet:"FXStreet","fxmag.pl":"FXMag",gftforex:"GFT Forex","globenewswire.com":"GlobeNewswire",indieresearch:"IndieResearch",indexuniverse:"IndexUniverse.com","infomoney.com":"InfoMoney","investopedia.com":"Investopedia","investors.com":"Investor's Business Daily",kiplinger:"Kiplinger","marketrealist.com":"MarketRealist","marketwatch.com":"MarketWatch",marketwire:"Marketwire",minyanville:"Minyanville","money.cnn.com":"Money",moneydj:"MoneyDJ","moneytimes.com":"Money Times",morningstar:"Morningstar","newsbtc.com":"NewsBTC",newswire:"PR Newswire","newswire.ca":"CNW Group","nytimes.com":"New York Times","oilprice.com":"Oilprice.com",optionetics:"Optionetics",optionmonster:"optionMONSTER","paidcontent.org":"paidContent.org","proiezionidiborsa.it":"Proiezioni di Borsa","reuters.com":"Reuters","seekingalpha.com":"Seeking Alpha","smallcapinvestor.com":"SmallCapInvestor.com",smartmoney:"SmartMoney","stockwatch.pl":"Stockwatch","theflyonthewall.com":"Theflyonthewall.com","thestreet.com":"TheStreet",thomsonreuters:"Thomson Reuters ONE",transcript:"Wall Street Transcript","wallstcheatsheet.com":"Wall St. Cheat Sheet","wsj.com":"The Wall Street Journal",usnews:"US News & World Report",zacks:"Zacks",zonebourse:"Zonebourse","4investors.de":"4investors","boersengefluester.de":"Boersengefluester",
"finanznachrichten.de":"FinanzNachrichten","n-tv.de":"n-tv","wallstreet-online.de":"wallstreet:online","sii.org.pl":"SII","comparic.pl":"Comparic","biznes.pap.pl":"PAP","moshed.com":"Moshed","ms.investing.com":"Investing","sina.com.cn":"Sina","finance.qq.com":"QQ",".fx168.com":"来自 FX168财经网","lesechos.fr":"Les Echos","lefigaro.fr":"Le Figaro","zonebourse.com":"Zonebourse","mk.co.kr":"매일경제","hankyung.com":"한국경제","vneconomy.vn":"VnEconomy","cafef.vn":"CafeF","vietnamfinance.vn":"Vietnam Finance","vietnambiz.vn":"VietnamBiz","arabictrader.com":"ArabicTrader","cnbcarabia.com":"CNBC Arabic","tradecaptain.com":"TradeCaptain","di.se":"Dagens Industri","va.se":"Veckans Affarer","kapasita.com":"Kapasita","koinbulteni.com":"Koin Bulteni","cafedelabourse.com":"Cafedelabourse","sludgefeed.com":"SludgeFeed","globalcoinreport.com":"Global Coin Report","coingape.com":"Coingape","cryptoglobe.com":"Cryptoglobe","nulltx.com":"Nulltx","cryptopotato.com":"Сryptopotato","forexindonesia.org":"Forexindonesia","benzinga.com":"Benzinga","globes.co.il":"Globes","cryptodaily.co.uk":"Cryptodaily","ccn.com":"CCN","keuangan.kontan.co.id":"Keuangan"}}}],[{key:"title",get:function(){return"ru"!==window.locale||n.enabled("charting_library_base")?$.t("Headlines"):$.t("Yahoo! Finance")}},{key:"timeout",get:function(){return 3e5}}]),e}(u.default),e.default=_,t.exports=e.default}).call(e,i(4))},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o,r,s,a,l;Object.defineProperty(e,"__esModule",{value:!0}),o=function(){function t(t,e){var i,n;for(i=0;i<e.length;i++)n=e[i],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=i(368),i(28),s=i(125),a=i(5).getLogger("NewsProvider"),l=function(){function t(e){n(this,t),this._baseUrl=window.NEWS_SERVICE_URL+"/headlines/",this.providerName=e,this._providerUrl=this._baseUrl+this.providerName+"/"}return o(t,[{key:"init",value:function(t){this._newsWidget=t.newsWidget;var e=window.user&&window.user.is_pro;this.hasProFeed&&!e&&"main"===this._newsWidget.widgetName&&this.appendDelayedInfoIcon()}},{key:"updateTitle",value:function(t){this._newsWidget&&("widgetbar"===this._newsWidget.widgetName&&this.updateWidgetBarTitle(t),this.checkAppendIcon())}},{key:"updateWidgetBarTitle",value:function(){this._newsWidget._bridge.setTitle(this.constructor.title)}},{key:"checkAppendIcon",value:function(){var t=window.user&&window.user.is_pro,e=this.$delayedIcon&&this.$delayedIcon.parent().length,i=this._newsWidget._bridge&&this._newsWidget._bridge.options&&this._newsWidget._bridge.options.embedWidgetNews||!1;!this.hasProFeed||t||e||this.appendDelayedInfoIcon({isWidgetEmbedNews:i}),this.hasProFeed&&t&&e&&this.$delayedIcon.remove()}},{key:"appendDelayedInfoIcon",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.isWidgetEmbedNews||(this._newsWidget.$delayedIconContainer,t.title||this.delayedIconText,
t.class)||this._newsWidget.widgetName}},{key:"getNews",value:function(t,e,i,n,o){return this.widget=t,this.type=i,this.category=o,"bitcoin"===i?this.getByCategory("bitcoin"):e?"spread"===i?this.getBySpread(e,i,n):this.getBySymbol(e,i,n):this.getByCategory(o)}},{key:"getURLforSymbol",value:function(t,e,i){if(!this.symbology)return this._providerUrl;var n=this.convertSymbol(t,e,i);return this.addParamsToUrl(this._providerUrl+"symbol/",{q:n,locale:window.locale})}},{key:"getURLforCategory",value:function(t){return this.addParamsToUrl(this._providerUrl+"category/"+t+"/")}},{key:"getURLforSpread",value:function(t,e,i){return t=t.join(","),this.addParamsToUrl(this._providerUrl+"spread/"+t+"/")}},{key:"addParamsToUrl",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{locale:window.locale},i="";return Object.keys(e).length&&(i+="?"+Object.keys(e).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])}).join("&")),t+i}},{key:"convertSymbol",value:function(t,e,i){return this.symbology?this.symbology.convertTo(t,e,i):t}},{key:"getBySymbol",value:function(t,e,i){var n=this.getURLforSymbol(t,e,i);return this.type=e,this.fetch(n,"getBySymbol")}},{key:"getBySpread",value:function(t,e,i){var n,o,r,s=this;return Array.isArray(t)&&Array.isArray(i)?(n=t[0],o=i[0],r=new Promise(function(t,e){s._symbolSearch.searchSymbols(n,o,"",!1,void 0,function(e){var i=e[0]?e[0].type:void 0;t(s.getURLforSymbol(n,i,o))})}),r.then(function(t){return s.type=e,s.fetch(t,"getBySpread")})):Promise.reject()}},{key:"getByCategory",value:function(t){var e=this.getURLforCategory(t);return this.category=t,this.fetch(e,"getByCategory")}},{key:"fetch",value:function(t,e){var i=this;return(0,s.fetch)(t,{credentials:"include"}).then(function(t){return t.ok?t.json():t.text().then(function(e){throw Error("Error while fetch "+t.url+". Response status "+t.status+" "+t.statusText+". Response text: '"+e+"'")})}).then(function(t){return i._onReceived(t,e)}).catch(function(t){throw a.logError(t.message),t})}},{key:"prepareShortDescriptionToMainNewsWidget",value:function(t){function e(t){return Array.prototype.slice.call(r.getElementsByTagName(t))}function i(t){t.parentNode.removeChild(t)}var n,o,r=document.createElement("div");return r.innerHTML=t.replace(/\b(src\s*=\s*['"]*)http:\/\/l(\d*\.yimg.com\/)/g,"$1https://s$2").replace(/\bsrc\s*=\s*['"]\/[^'"]*['"]/gi,""),n=!1,e("img").forEach(function(t){if(n||!t.getAttribute("src"))return void i(t);var e=t.getAttribute("src").startsWith("/");if(!t.getAttribute("src")||e)return void i(t);t.className="tv-widget-news__image",t.removeAttribute("style"),t.removeAttribute("width"),t.removeAttribute("height"),r.insertBefore(t,r.firstChild),n=!0}),o=["a","audio","embed","figure","iframe","object","script","video"],o.map(e).forEach(function(t){return t.forEach(i)}),e("p").forEach(function(t){var e=""===t.innerHTML.replace("&nbsp;",""),n=1===t.children.length&&"BR"===t.children[0].tagName;e||n?i(t):t.className="tv-widget-news__description-text"}),r.innerHTML}},{key:"filterLastThirtyDays",
value:function(t){var e=(new Date).getTime()/1e3;return t.filter(function(t){return e-t.published<2592e3})}},{key:"_onReceived",value:function(t,e){if(t&&Array.isArray(t)){if("widget"===this.widget&&"getByCategory"===e&&"all"===this.category&&(t=this.filterLastThirtyDays(t)),!t.length)switch(e){case"getBySymbol":return this.getByCategory(this.category);case"getByCategory":if("all"!==this.category)return this.getByCategory("all");break;default:return[]}return t.forEach(function(t){t.publishedTimestamp=t.published,t.published=new Date(1e3*t.publishedTimestamp)}),t.map(this.itemTransform,this)}}},{key:"itemTransform",value:function(t){var e=t.shortDescription||t.summary;return e&&(t.shortDescription=this.prepareShortDescriptionToMainNewsWidget(e)),t}},{key:"renderItem",value:function(t){var e='\n\t\t\t<div class="ns-item">\n\t\t\t\t<div class="ns-item-title">\n\t\t\t\t\t<a href="'+t.link+'" target="_blank">'+t.title+"</a>\n\t\t\t\t</div>\n\t\t\t\t"+(t.shortDescription?'<div class="ns-item-content">'+t.shortDescription+"</div>":"")+'\n\t\t\t\t<div class="ns-item-desc">\n\t\t\t\t\t'+(t.source?$.t("at")+' <span class="source">'+t.source+"</span> ":"")+'\n\t\t\t\t</div>\n\t\t\t\t<div class="ns-item-date">\n\t\t\t\t\t<time></time>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t';return $(e)}},{key:"destroy",value:function(){this.$message instanceof $&&this.$message.remove()}},{key:"options",value:function(t){return!1}},{key:"showPopup",value:function(t){return!!t.content&&new r.TVModal({title:t.title,width:800,destroyOnClose:!0,addClass:"tv-popup-news",titleTemplate:'<div class="tv-dialog__section tv-dialog__section--title js-dialog__drag"><div class="tv-dialog__title"><div class="tv-popup-news__title">{{{ title }}}</div></div></div>',contentWrapTemplate:'<div class="tv-dialog__section tv-dialog__section--no-border"><div class="tv-popup-news__content"></div></div>',content:t.content}).open()}}],[{key:"title",get:function(){return $.t("News")}},{key:"timeout",get:function(){return!1}}]),t}(),e.default=l,t.exports=e.default},function(t,e,i){"use strict";function n(){var t;this.specialFromCases={};for(t in this.specialCases)this.specialFromCases[this.specialCases[t]]=t;this.exchangeFromMap={};for(t in this.exchangeMap)this.exchangeFromMap[this.exchangeMap[t]]=t}var o=i(615);inherit(n,o),n.prototype.convertTo=function(t,e,i){if(t in this.specialCases)return this.specialCases[t];if("forex"===e)return t+"=X";switch(i){case"TSX":return t+".TO";case"TSXV":return t+".V";case"MICEX":return t+".ME";case"COMEX":return t+".CMX";case"CME":return t+".CME";case"CBOT":return t+".CBT";case"MOEX":return t+".ME";case"LSE":return t+".L";case"LSIN":return t+".IL";case"BSE":return t+".BO";case"EURONEXT":return[t+".PA",t+".AS",t+".ls",t+".br"].join(",");case"NSE":return t+".NS";case"BMFBOVESPA":return t+".SA";case"BME":return t+".MA";case"VIE":return t+".VI";case"FRA":return t+".F";case"DUB":return t+".IR";case"MIL":return t+".MI";case"OSL":return t+".OL";case"SWX":return t+".SW";case"IST":return t+".IS";case"ASX":return t+".AX";case"NZX":return t+".NZ"
;case"OMX":return t+".CO";case"BCBA":return t+".BA"}return"index"===e?"^"+t:t},n.prototype.convertFrom=function(t){var e,i,n;return t in this.specialFromCases?this.specialFromCases[t]:(e=t.split("."),i=e[1],i?(n=this.exchangeFromMap["."+i],n?n+":"+e[0]:null):t)},n.prototype.exchangeFromMap={},n.prototype.exchangeMap={TSX:".TO",TSXV:".V",MICEX:".ME",COMEX:".CMX",CME:".CME",CBOT:".CBT",MOEX:".ME",LSE:".L",BSE:".BO",EURONEXT:".PA",NSE:".NS",BMFBOVESBA:".SA",BME:".MA",VIE:".VI",FRA:".F",DUB:".IR",MIL:".MI",OSL:".OL",SWX:".SW",IST:".IS"},n.prototype.specialFromCases={},n.prototype.specialCases={AU200AUD:"^AXJO",AUS200:"^AXJO",AXY:"FXA",BXY:"FXB",CAC40:"^FCHI",CH20CHF:"^SSMI",CXY:"FXC",DAX:"^GDAXI",DE02:"^GDAXI",DE02Y:"^GDAXI",DE10:"^GDAXI",DE10Y:"^GDAXI",DE30EUR:"^GDAXI",DJI:"^DJI",DJY0:"^DJI",DOWI:"^DJI",DOWT:"^DJT",DOWU:"^DJU","DX1!":"^USDOLLAR",DXY:"^USDOLLAR","DY1!":"^GDAXI","ES1!":"^GSPC",ES02:"^IBEX",ES02Y:"^IBEX",ES10:"^IBEX",ES10Y:"^IBEX",ESP35:"^IBEX",EU50EUR:"^STOXX50E",EUSTX50:"^STOXX50E",EXY:"FXE",FR02:"^FCHI",FR02Y:"^FCHI",FR10:"^FCHI",FR10Y:"^FCHI",FR40EUR:"^FCHI",FRA40:"^FCHI",FTSE:"^FTSE",GB02:"200725.SZ",GB02Y:"200725.SZ",GB10:"200725.SZ","GC1!":"XAUUSD=X","GC2!":"XAUUSD=X","GD1!":"XAUUSD=X","GD2!":"XAUUSD=X",GER30:"^GDAXI",GOLD:"XAUUSD=X","GR1!":"XAUUSD=X","GR2!":"XAUUSD=X","GW1!":"XAUUSD=X","GW2!":"XAUUSD=X",HK33HKD:"^HSI",HKG33:"^HSI",HSI:"^HSI",IBC:"^IBEX",IBEX35:"^IBEX",IUX:"^RUT",IUXX:"^NDC",IXIC:"^IXIC",JP02:"^N225",JP02Y:"^N225",JP10:"^N225",JP10Y:"^N225",JP225USD:"^N225",JPN225:"^N225",JXY:"FXY","KR1!":"XAUUSD=X","KR2!":"XAUUSD=X","KV1!":"XAGUSD=X","KV2!":"XAGUSD=X",MOY0:"^STOXX50E",NAS100:"^NDX",NAS100USD:"^NDX",NASX:"^NDX",NATGASUSD:"NG=F",NDX:"^NDX","NG1!":"NG=F",NGAS:"NG=F",NI225:"^N225",NKY:"^N225","NQ1!":"^NDX",NY1:"^N225",NYA:"^NYA","OZ11!":"XAUUSD=X","QI1!":"XAGUSD=X","QI2!":"XAGUSD=X","QO1!":"XAUUSD=X",RUI:"^RUI",RUT:"^RUT",SHCOMP:"000001.SS","SI1!":"XAGUSD=X","SI2!":"XAGUSD=X",SILVER:"XAGUSD=X","SP1!":"^GSPC","SP2!":"^GSPC",SPX:"^GSPC",SPX500:"^GSPC",SPX500USD:"^GSPC",SPY:"^GSPC",SSMI:"^SSMI","SV1!":"XAGUSD=X",SX5E:"^STOXX50E",SXY:"FXF",TNX:"^TNX",TRAN:"^DJT",TYX:"^TYX",UK100:"^FTSE",UK100GBP:"^FTSE",UKX:"^FTSE",US30:"^DJI",US30USD:"^DJI",US2000USD:"^RUT",USDOLLAR:"^USDOLLAR",VIX:"^VIX",XAGUSD:"XAGUSD=X",XAUUSD:"XAUUSD=X",XJO:"^AXJO","YG1!":"XAUUSD=X","YG2!":"XAUUSD=X","YI1!":"XAGUSD=X","YI2!":"XAGUSD=X","ZG1!":"XAUUSD=X",ZXY:"NZDUSD=X"},t.exports=n},function(t,e,i){"use strict";function n(){}n.prototype.convertTo=function(t,e,i){return t},n.prototype.convertFrom=function(t){return t},t.exports=n},function(t,e,i){"use strict"},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e,i=0,n=void 0;if(0===t.length)return i;for(e=0;e<t.length;e++)n=t.charCodeAt(e),i=(i<<5)-i+n,i&=i;return i},t.exports=e.default},function(t,e){},function(t,e,i){"use strict";(function(t){function n(t){this._bridge=t,this._symbol="",this._data={};var e=u("full");this._quoteMultiplexer=e,this._updateAvailable=!0,this._prev_price=0,this._prev_extended_price=0,
this._invalidate=!0,this._noDepthSymbols=[],this._volumeFormatter=new p,this._numericFormatter=new _(4),this._defaultPriceFormatter=new c(100,1,!1),this._priceFormatter=new h(this._defaultPriceFormatter),this._percentageFormatter=new l,this.prepareLayout(t.$body),this._$dl.on("contextmenu",function(t){t.preventDefault()}),this._depthScale=+(t.properties.value()||{}).depthScale,this._depthScale>=1&&this._depthScale<=100||delete this._depthScale,t.symbol.subscribe(this.setSymbol.bind(this),{callWithLast:!0}),t.height.subscribe(this.resize.bind(this)),t.width.subscribe(this.resize.bind(this)),t.visible.subscribe(this.resize.bind(this))}var o,r,s,a,l,c,h,u,d,p,_,f,m,g,y=i(130).stripTags;i(318),o=i(620),r=i(195).DataModeIndicator,s=i(621).createDaysRange,a=i(320),l=i(58).PercentageFormatter,c=i(13).PriceFormatter,h=i(319).QuoteSessionPriceFormater,u=i(44).getQuoteSessionInstance,d=i(147).SidebarCustomScroll,p=i(246).VolumeFormatter,_=i(68).NumericFormatter,f=i(133).getTranslatedSymbolDescription,i(28).trackEvent,i(624),m=["volume","average_volume","open_price","prev_close_price","market_cap_basic","earnings_per_share_basic_ttm","price_earnings_ttm","total_shares_outstanding_fundamental","number_of_employees","dividends_yield"],g=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],n.prototype.DEPTH_CHART_MIN_HEIGHT=50,n.prototype._depthScale=50,n.prototype._width=267,n.prototype._depthChartIsVisible=!0,n.prototype.depthScale=function(t){var e,i;if(arguments.length<1)return this._depthScale;if("number"!=typeof t)throw new TypeError("value must be a number");if(!isFinite(t)&&t<=0)throw new RangeError("value must be positive finite number");this._depthScale=t,this._depthSession&&this._depthSession.depthSetScale(t),e=this._bridge.properties,i=e.value()||{},i.depthScale=this._depthScale,e.setValue(i)},n.prototype.sessionStatusText=function(){var t,e,i,n={forex:1,index:1,cfd:1,bitcoin:1};return this._data.values&&(this._data.values.type in n||"pulsed"===this._data.values.update_mode)?"":(t={market:'<i class="market-status-marker open"></i>'+window.t("market open"),out_of_session:'<i class="market-status-marker closed"></i>'+window.t("market closed"),holiday:'<i class="market-status-marker closed"></i>'+window.t("holiday")},this._data.values&&this._data.values.current_session in t?t[this._data.values.current_session]:(e=window.t("previous close"),this._data.values&&this._data.values.open_time&&(i=new Date(1e3*this._data.values.open_time),e+=" ("+i.getDate()+" "+g[i.getMonth()]+")"),e))},n.prototype.extendedSessionStatusText=function(){switch(this._data.values&&this._data.values.current_session){case"pre_market":return'<i class="market-status-marker pre-market"></i>'+window.t("pre-market");case"post_market":return'<i class="market-status-marker post-market"></i>'+window.t("post-market");default:return""}},n.prototype.onData=function(t,e){var i,n,o,r,s,a,l,c,h,u,d,p,_,m,g,v,b,S,w,P,T,C=!1,x=!1;if(this._data.values||(C=!0,this._tableShown=!1,this._spreadBlockShown=!1,this._$headerSymbolWrap.attr("href",""),
this._$headerSymbolDesc.empty(),this._$headerIndustry.empty(),this._$headerPrice.empty(),this._$headerPriceExtended.empty(),this._$headerChange.empty(),this._$headerChangeExtended.empty(),this._$headerSessionStatus.empty(),this._daysRange.hide(),this._$headerDataModeContainer.hide(),this._$detailLink.empty()),"ok"!==t.status)C&&(i=window.t("Invalid symbol"),this._$headerSymbolDesc.text(this._symbol),this._$headerIndustry.text(i));else{if(this._data=t,n=t.values,o=e.values,this._dataModeIndicator.update(t),this._priceFormatter.update(n,o),r=null!=o.bid||null!=o.ask,s=n.bid&&n.ask,a=null!=o.last_price,l=null!=o.rtc,c=null!=o.current_session,h=("pre_market"===n.current_session||"post_market"===n.current_session)&&!!n.rtc,u=this._priceFormatter.hasForexAdditionalPrecision(),d=this._daysRange.render(n,o),x=d||x,o.fundamental_data&&n.type&&"bitcoin"!==n.type)this._$headerIndustry.empty().append($(document.createElement("span")).attr("title",window.t("Industry")).text(window.t(o.industry)),document.createTextNode(": "),$(document.createElement("span")).attr("title",window.t("Sector")).text(window.t(o.sector)));else if(o.type&&!n.fundamental_data)switch(p=o.type,_={bitcoin:window.t("Crypto"),equity:window.t("Equity"),futures:window.t("Futures"),index:window.t("Index"),spread:window.t("Composite Symbols")},p){case"bitcoin":case"equity":case"futures":case"index":case"spread":this._$headerIndustry.text(_[p]);break;case"forex":m={Minor:window.t("Minor",{context:"currency"}),Major:window.t("Major",{context:"currency"}),Exotic:window.t("Exotic")},g=m[n.sector]||n.sector,v=n.country,g&&this._$headerIndustry.text(window.t("Forex {sector}: {country}").replace("{sector}",g).replace("{country}",window.t(v)||""));break;default:this._$headerIndustry.empty(),this._$data.css("top",0)}a&&(this._$headerDataMode.is(":hidden")&&this._$headerDataModeContainer.show(),this._$headerPrice.html(this.highlightPrice(o.last_price,this._prev_price)),u&&this._$headerPrice.lastCharSup(),this._prev_price=o.last_price),(c||l)&&this._toggleExtendedData(h,n.exchange),l&&(this._$headerPriceExtended.html(this.highlightPrice(o.rtc,this._prev_extended_price)),this._prev_extended_price=o.rtc),null==o.change&&null==o.change_percent||(null==n.change?this._$headerChange.empty():(b=this._priceFormatter.format(n.change),null!=n.change_percent&&(b+=" ("+this._percentageFormatter.format(n.change_percent)+")"),S=this._$headerChange.text(b),n.change>0?S.removeClass("minus").addClass("plus"):n.change<0?S.removeClass("plus").addClass("minus"):S.removeClass("plus").removeClass("minus"))),null==o.rch&&null==o.rchp||(null==n.rch?this._$headerChangeExtended.empty():(w=this._priceFormatter.format(n.rch),null!=n.rchp&&(w+=" ("+n.rchp+"%)"),P=this._$headerChangeExtended.text(w),n.rch>0?P.removeClass("minus").addClass("plus"):n.rch<0?P.removeClass("plus").addClass("minus"):P.removeClass("plus").removeClass("minus"))),T=f(o),T&&this._$headerSymbolDesc.text(T.replace(/[+*\(\/]/g,"$&​")),
null!==o.details_link&&void 0!==o.details_link&&(this._$detailLink.html('<a href="'+y(o.details_link)+'" target="_blank">'+window.t("Key Market Information")+"</a>"),this._$detailLink.show()),null!=o.update_mode&&this._$headerDelayed.toggle("pulsed"===o.update_mode),s&&r&&(this._spreadBlockShown||(this._$spreadBlock.show(),this._spreadBlockShown=!0,x=!0),this._$bid.text(this._priceFormatter.format(n.bid)),this._$ask.text(this._priceFormatter.format(n.ask)),u&&(this._$bid.lastCharSup(),this._$ask.lastCharSup()),n.bid_size&&this._$bid.append(document.createTextNode("×"+n.bid_size)),n.ask_size&&this._$ask.append(document.createTextNode("×"+n.ask_size)))}C&&(x=!0,this._spreadBlockShown||this._$spreadBlock.hide()),x&&this.resize()},n.prototype.showDialog=function(){},n.prototype.prepareLayout=function(e){var i;this._$dl=$('<div class="tv-detail">').appendTo(e),this._$data=$('<div class="dl-data">').appendTo(this._$dl),this._$header=$('<div class="dl-header"></div>').appendTo(this._$data),i=$("<div>").appendTo(this._$header),this._$headerSymbolWrap=(t.enabled("charting_library_base")?$("<span>"):$('<a target="_blank">')).appendTo(this._$header),this._$headerSymbolDesc=$('<span class="dl-header-symbol-desc"></span>').appendTo(this._$headerSymbolWrap),this._$headerDelayed=$('<span class="dl-delayed" title="Quotes are delayed by 10 min and updated every 30 seconds">D</span>').appendTo(this._$headerSymbolWrap).hide(),this._$headerSymbolWrap.appendTo(i),this._$headerIndustry=$('<div class="dl-header-industry"></div>').appendTo(this._$header),this._$headerFigures=$('<div class="dl-header-figures">').appendTo(this._$header),this._$headerPrice=$('<span class="dl-header-price"></span>').appendTo(this._$headerFigures),this._$headerDataModeContainer=$("<span/>").appendTo(this._$headerFigures),this._$headerDataMode=$('<span class="tv-data-mode--symbol-info"></span>').appendTo(this._$headerDataModeContainer),this._$headerChange=$('<span class="dl-header-change"></span>').appendTo(this._$headerFigures),this._$headerSessionStatus=$('<div class="dl-header-session-status"></div>').appendTo(this._$headerFigures),this._$headerExtendedSessionData=$('<div class="dl-header-extended-data"></div>').appendTo(this._$header),this._$headerPriceExtended=$('<span class="dl-header-price-extended"></span>').appendTo(this._$headerExtendedSessionData),this._$headerChangeExtended=$('<span class="dl-header-change-extended"></span>').appendTo(this._$headerExtendedSessionData),this._$headerSessionStatusExtended=$('<div class="dl-header-session-status"></div>').appendTo(this._$headerExtendedSessionData),this._$spreadBlock=$('<div class="dl-bidoffer-spread">').hide().appendTo(this._$header),this._$bid=$('<span class="dl-bid" title="'+window.t("Bid")+'"></span>').appendTo(this._$spreadBlock),this._$ask=$('<span class="dl-ask" title="'+window.t("Ask")+'"></span>').appendTo(this._$spreadBlock),this._$headerTime=$('<div class="dl-header-time"></div>').appendTo(this._$header),this._$daysRange=$('<div class="first-child">').appendTo(this._$data),
this._daysRange=s(this._$daysRange.get(0),{title:window.t("Day's Range")}),this._daysRange.hide(),this._dataModeIndicator=new r({classSuffix:"--for-symbol-info",el:this._$headerDataMode[0],short:!0,manualUpdate:!0}),this._$detailLink=$('<div class="dl-header-link"></div>').appendTo(this._$data),this._$depthChart=$(document.createElement("div")).addClass("dl-depthchart").appendTo(this._$dl),this._scroll=new d(this._$dl,this._$data),this._$headerExtendedSessionData.hide()},n.prototype.resetLayout=function(){this._$headerDelayed.hide(),this._tableShown=!1,this._$headerSymbolWrap.attr("href",""),this._$headerSymbolDesc.empty(),this._$headerIndustry.empty(),this._$headerPrice.empty(),this._$headerPriceExtended.empty(),this._$headerChange.empty(),this._$headerChangeExtended.empty(),this._daysRange.hide(),this._$headerDataModeContainer.hide(),this._$detailLink.hide(),this._$spreadBlock.hide(),this._spreadBlockShown=!1,this.resize()},n.prototype.resize=function(){var t,e;this._bridge.visible.value()&&(this._scroll.resize(),t=this._$dl.height()-this._$data.outerHeight(),e=this._depthChartIsVisible,this._depthChartIsVisible=t>=this.DEPTH_CHART_MIN_HEIGHT,this._depthChartIsVisible?(this._$depthChart.height(t),e||this._$depthChart.show()):e&&(this._$depthChart.hide(),this._depthChart&&(this._depthChart.destroy(),delete this._depthChart))),this.updateDepthSymbol(),this._depthChart&&this._depthChart.resize()},n.prototype.setSymbol=function(t){t!==this._symbol&&(t&&this._data&&(this._data.original_name===t||this._data.pro_name===t)||(this._symbol&&this._quoteMultiplexer.unsubscribe(this._bridge.id,this._symbol),this._toggleExtendedDataTimeout&&(clearTimeout(this._toggleExtendedDataTimeout),this._toggleExtendedDataTimeout=null),this._symbol=t,this._prev_price=0,this._prev_extended_price=0,this._data={},this._priceFormatter.reset(this._defaultPriceFormatter),this.onData({}),this._depthChart?(this._depthChart.destroy(),delete this._depthChart):this._$depthChart.empty(),t&&this._quoteMultiplexer.subscribe(this._bridge.id,this._symbol,this.onData.bind(this)),this.updateDepthSymbol()))},n.prototype.updateDepthSymbol=function(){var t=this._symbol;t&&this._depthChartIsVisible&&this._bridge.visible.value()&&-1===this._noDepthSymbols.indexOf(t)||(t=void 0),t!==this._depthSymbol&&(this._depthSymbol=t,!this._depthSession&&t?(this._depthSession=new a(ChartApiInstance,this._depthScale,this._width),this._depthSession.connect(this.onDepthData.bind(this))):t?this._depthSession.depthSetSymbol(t):this._depthSession.depthClearSymbol())},n.prototype.onDepthData=function(t){if(this._depthSymbol)switch(t.method){case"connected":this._depthSymbol&&this._depthSession.depthSetSymbol(this._depthSymbol);break;case"depth_symbol_error":this._depthSymbol=void 0,-1===this._noDepthSymbols.indexOf(this._symbol)&&(this._noDepthSymbols.push(this._symbol),this._noDepthSymbols.length>16&&this._noDepthSymbols.shift()),delete this._depthLast;break;case"depth_symbol_success":
this._depthChart||this._$depthChart.html('<div class="depth-widget-notice"><p>'+window.t("Loading market depth data&hellip;")+"</p></div>"),delete this._depthLast;break;case"dd":this._depthChart||(this._depthChart=new o({wrap:this._$depthChart,xAxisFormatter:this._priceFormatter})),this._depthChart.update(t.params[0]),"_depthLast"in this&&(this._depthChart.updateLast(this._depthLast),delete this._depthLast);break;case"dpu":this._depthChart&&this._depthChart.updateDelta(t.params[0]);break;case"depth_bar_last_value":this._depthChart?this._depthChart.updateLast(t.params[1]):this._depthLast=t.params[1]}},n.prototype.format=function(t,e,i){var n=parseFloat(t),o=Math.pow(10,6);return TradingView.isNaN(n)?t:"percent"===e?this._percentageFormatter.format(100*n):TradingView.isInteger(n)||isNumber(n)&&Math.abs(n)>o?this._volumeFormatter.format(n):isNumber(n)?this._numericFormatter.format(n):n},n.prototype.highlightPrice=function(t,e){var i,n,o,r,s,a;if(!e)return this._priceFormatter.format(t);for(i=t-e>0?"plus":"minus",n=this._priceFormatter.format(t),o=""+e,r="",s=!1,a=0;a<n.length;a++)n[a]===o[a]||s||(r+='<span class="'+i+'">',s=!0),r+=n[a];return s&&(r+="</span>"),r},n.prototype.destroy=function(){this._depthChart&&this._depthChart.destroy(),this._depthSession&&this._depthSession.stopSession(),this._quoteMultiplexer.unsubscribe(this._bridge.id,this._symbol)},n.prototype._toggleExtendedData=function(t,e){var i,n;this._toggleExtendedDataTimeout&&clearTimeout(this._toggleExtendedDataTimeout),i=e&&this._toggleExtendedDataExhcange!==e,n=t||i?0:1e3,this._toggleExtendedDataTimeout=setTimeout(function(){this._$headerExtendedSessionData.toggle(t),this._$headerSessionStatus.html(this.sessionStatusText()),this._$headerSessionStatusExtended.html(this.extendedSessionStatusText())}.bind(this),n),e&&(this._toggleExtendedDataExhcange=e)},e.Widget=n,e.DefaultFields=m}).call(e,i(4))},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function o(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,i){function n(o,r){var s,a;try{s=e[o](r),a=s.value}catch(t){return void i(t)}if(!s.done)return Promise.resolve(a).then(function(t){n("next",t)},function(t){n("throw",t)});t(a)}return n("next")})}}function r(t){this.init(t)}var s,a,l,c,h,u,d,p,_,f,m,g,y,v,b,S,w,P,T,C=i(232),x=n(C);i(318),s=i(36).IS_RTL,a=16,l=6,c=3,h=3,u="#555555",d="10px Arial, sans-serif",p=15,_=4,f="rgb(91,133,191)",m="rgba(91,133,191,.2)",g="rgb(179,91,70)",y="rgba(179,91,70,.2)",v="#AAAAAA",b=5,S=5,w=u,P=void 0,T=void 0,r.prototype.init=function(){var t=o(x.default.mark(function t(e){var i,n,o;return x.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e||(e={}),i=this,this.wrap=$(e.wrap).eq(0),this.wrap.empty(),this.element=$(document.createElement("div")).css({height:"100%",position:"relative"}).addClass("depth-widget-wrap").appendTo(this.wrap),this.mainCanvas=$(document.createElement("canvas")).attr("class","depth-main-canvas").appendTo(this.element),this.initLastIndicator(),
this.infoCanvas=$(document.createElement("canvas")).attr("class","depth-info-canvas").appendTo(this.element),this.mainCanvas.add(this.infoCanvas).css({display:"block",position:"absolute",top:"0",left:"0",width:"100%",height:"100%"}),this.infoCanvas.hide(),this.eventShield=$(document.createElement("div")).css({position:"absolute",left:0,top:0,width:"100%",height:"100%",background:"rgba(255, 255, 255, 0)",overflow:"hidden","-ms-touch-action":"none"}).addClass("depth-widget-eventshield").appendTo(this.element),this.eventShield.on("mouseover",function(){i.infoCanvas.show(),i.infoShown=!0}),this.eventShield.on("mouseout",function(){i.infoCanvas.hide(),i.infoShown=!1}),"function"==typeof e.scaleFn&&this.initZoom(e.scaleFn),o=this.onMouseMove.bind(this),this.eventShield.on("mousemove",function(t){i.mousemoveEvent=t,n||(n=setTimeout(function(){o(),n=void 0},10))}),e.xAxisFormatter&&(this.xAxisFormatter=e.xAxisFormatter),this.resize(),t.next=20,this.initTheme();case 20:P.subscribe(this.resize.bind(this));case 21:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),r.prototype.initTheme=function(){return new Promise(function(t){t()}).then(i.bind(null,131)).then(function(t){T=t.setThemedColor,P=t.watchedTheme})},r.prototype.initLastIndicator=function(){var t,e=document.createElement("canvas");this.lastIndicator=$(e).attr({class:"depth-last-indicator",width:b,height:S}).css({position:"absolute",bottom:a-S+"px",display:"none"}).appendTo(this.element),t=e.getContext("2d"),t.fillStyle=w,t.beginPath(),t.moveTo(0,S),t.lineTo(b/2,0),t.lineTo(b,S),t.closePath(),t.fill()},r.prototype.initZoom=function(t){function e(t){return Math.max(h,Math.min(u,Math.exp((p-t)*_)))}function i(t){return Math.max(0,Math.min(p,Math.round(p-Math.log(t)/_)))}function n(t){t>=p?(t=p,r||(r=!0,g.addClass("disabled"))):r&&(r=!1,g.removeClass("disabled")),t<=0?(t=0,a||(a=!0,y.addClass("disabled"))):a&&(a=!1,y.removeClass("disabled")),v.css(s?"right":"left",t)}function o(o){var r=t(),s=Math.max(0,Math.min(u,i(r)+o)),a=e(s);a!==r&&a===a&&(t(a),n(s))}var r,a,l=this,c=4,h=1,u=100,d=150,p=99,_=Math.log(u)/p,f=this.element,m=$(document.createElement("div")).attr("class","depth-zoom-wrapper").appendTo(this.element),g=$(document.createElement("div")).attr("class","depth-zoom-plus").appendTo(m),y=$(document.createElement("div")).attr("class","depth-zoom-minus").appendTo(m),v=$(document.createElement("div")).attr("class","depth-zoom-handle").appendTo(m);this.syncScale=function(){n(i(t()))},this.syncScale(),g.on("click",function(t){t.preventDefault(),o(+c)}),y.on("click",function(t){t.preventDefault(),o(-c)}),v.on("mousedown",function(i){function o(){_=void 0;var i=e(u);u!==h&&(h=i,t(i))}function r(t){var e=s?l-t.pageX:t.pageX-l,i=c+e;if(i>p)i=p;else if(i<0)i=0;else if(i!==i)return;u=i,_||(_=setTimeout(o,d)),n(i)}function a(){$(document.documentElement).off("mousemove",r),$(document.documentElement).off("mouseup",a),f.removeClass("dragging"),_&&(clearTimeout(_),_=void 0),o()}var l,c,h,u,_;i.preventDefault(),l=i.pageX,
c=s?v.css("right"):v.css("left"),c=parseFloat(c),h=t(),u=h,f.addClass("dragging"),$(document.documentElement).on("mousemove",r),$(document.documentElement).on("mouseup",a)}),this.eventShield.on("mousewheel",function(t,e){t.preventDefault(),e<0?o(-c):e>0&&o(+c)}),function(){var e,o,r,s=function(){var s=Math.max(h,Math.min(u,e/o));t(s),n(i(s)),r=void 0};l.eventShield.on("gesturestart",function(i){e=t(),o=1}),l.eventShield.on("gesturechange",function(t){t.preventDefault();var e=+t.originalEvent.scale;0!==e&&isFinite(e)&&(o=e,r||(r=setTimeout(s,d)))})}(),function(){var e,o,r,s,a,c;window.navigator.msPointerEnabled&&"function"==typeof MSGesture&&(e=l.eventShield.get(0),o=new MSGesture,o.target=e,e.addEventListener("MSPointerDown",function(t){o.addPointer(t.pointerId)},!1),c=function(){var e=Math.max(h,Math.min(u,r/s));isFinite(e)&&(t(e),n(i(e)),a=void 0)},e.addEventListener("MSGestureStart",function(e){r=t(),s=1},!1),e.addEventListener("MSGestureChange",function(t){var e=+t.scale;0!==e&&1!==e&&isFinite(e)&&(s*=e,a||(a=setTimeout(c,d)))},!1))}()},r.prototype.resize=function(){this.width=this.wrap.width(),this.height=this.wrap.height(),this.mainCanvas.attr({width:this.width,height:this.height}),this.infoCanvas.attr({width:this.width,height:this.height}),this.plotWidth=this.width,this.plotYofsset=.05*this.height,this.plotHeight=this.height-this.plotYofsset-a,this.XpixelPerPrice=this.plotWidth/(this.pmax-this.pmin),this.YpixelPerPrice=this.plotHeight/(this.cmax-this.cmin),this.render()},r.prototype.calcData=function(){var t,e,i,n,o,r,s;for(this.cmin=0,this.cmax=0,t=0,i=this.bids,n=i.length;n--;)i[n].c=t+=i[n].v;for(e=t,t=0,o=this.asks,n=0;n<o.length;n++)o[n].c=t+=o[n].v;this.cmax=Math.max(e,t),isFinite(this.pmin)||(r=i.length&&i||o.length&&o||[{}],this.pmin=r[0].p),isFinite(this.pmax)||(s=o.length&&o||i.length&&i||[{}],this.pmax=s[s.length-1].p),this.maxbid=i.length?i[i.length-1].p:void 0,this.minask=o.length?o[0].p:void 0,this.XpixelPerPrice=this.plotWidth/(this.pmax-this.pmin),this.YpixelPerPrice=this.plotHeight/(this.cmax-this.cmin),this.render()},r.prototype.update=function(t){this.bids=t.bids||[],this.asks=t.asks||[],this.pmax=t.right,this.pmin=t.left,this.calcData()},r.prototype.updateDelta=function(t){var e,i,n,o,r,s;if(this.bids&&this.asks){if(e=t.t,i=t.v,n=t.p,o=null,"a"===e)o=this.asks;else{if("b"!==e)return;o=this.bids}r=this.indexBetween(o,n),void 0===r.min||void 0===r.max?i&&o.push({p:n,v:i}):r.min===r.max?(s=o[r.min],s.p===n?i?s.v=i:o.splice(r.min,1):n<s.p&&i?o.unshift({p:n,v:i}):n>s.p&&i&&o.push({p:n,v:i})):i&&o.splice(r.max,0,{p:n,v:i}),this.calcData()}},r.prototype.updateLast=function(t){this.lastValue=t,this.renderLast()},r.prototype.renderLast=function(){if(null!=this.lastValue&&this.plotWidth){var t=this.p2x(this.lastValue);isFinite(t)&&this.lastIndicator.css({display:"block",left:Math.round(t-b/2)})}},r.prototype.onMouseMove=function(t){var e,i,n,o,r,s,u,p,_,m,y,b,S,w,P,T,C,x;this.infoShown&&(e=this.infoCanvas.get(0).getContext("2d"),e.clearRect(0,0,this.width,this.height),
(t=t||this.mousemoveEvent)&&(i=+t.offsetX,i!==i&&(i=+t.originalEvent.layerX),n=i/this.XpixelPerPrice+this.pmin,isFinite(n)&&(o=(this.maxbid+this.minask)/2,isFinite(o)||(isFinite(this.maxbid)?o=this.maxbid:isFinite(this.minask)&&(o=this.minask)),r=null,s=null,u=null,n<=o?(u=this.bids,p="bid"):n>=o&&(u=this.asks,p="ask"),_=this.indexBetween(u,n),void 0!==_.min&&(r=u[_.min],s=u[_.max],m=n<(r.p+s.p)/2?r:s,y=this.plotYofsset+this.plotHeight,b=this.p2x(m.p),S=Math.floor(b)+.5,e.lineStyle=CanvasEx.LINESTYLE_DASHED,e.strokeStyle=v,CanvasEx.drawLine(e,S,0,S,y),e.font=d,e.textBaseline="top",e.textAlign="center",e.font=d,w=this.xAxisFormatter.format(m.p),P=Math.ceil(e.measureText(w).width/2)+3,e.fillStyle="bid"===p?f:g,e.fillRect(Math.round(b)-P,y+1,2*P,a),e.fillStyle="#fff",e.fillText(w,S,y+4),e.strokeStyle="#fff",e.beginPath(),e.moveTo(S,y+1),e.lineTo(S,y+c),e.stroke(),T=this.s2y(m.c),C=Math.floor(T)+.5,w=this.yAxisFormatter.format(m.c),x=Math.ceil(e.measureText(w).width)+l+4,e.fillStyle="bid"===p?f:g,e.fillRect(0,Math.floor(T)-5,x,11),e.fillStyle="#fff",e.textBaseline="middle",e.textAlign="left",e.fillText(w,l,C),e.beginPath(),e.moveTo(0,C),e.lineTo(h,C),e.stroke()))))},r.prototype.indexBetween=function(t,e){var i,n,o,r,s,a;if(!t||!t.length)return{};if((e=+e)!==e)return{};if(i=t.length-1,n=t[i].p,e>=n)return{min:i,max:i};if(o=0,r=t[o].p,e<=r)return{min:o,max:o};for(;i>o+1;)if(s=o+i>>1,(a=t[s].p)>e)i=s;else{if(!(a<e))return a===e?{min:s,max:s}:{};o=s}return{min:o,max:i}},r.prototype.p2x=function(t){return(t-this.pmin)*this.XpixelPerPrice},r.prototype.s2y=function(t){return this.plotYofsset+this.plotHeight-t*this.YpixelPerPrice},r.prototype.yAxisFormatter={format:function(t){return Math.round(t)}},r.prototype.xAxisFormatter={format:function(t){return t}},r.prototype.sizeFormatter={format:function(t){return t.toFixed(4)}},r.prototype.calculateTickmarks=function(t,e,i,n){var o,r=(e-t)*n/i,s=Math.pow(10,Math.ceil(Math.log(r)/Math.LN10));return s/5>=r&&(s/=5),s/2>=r&&(s/=2),o=Math.ceil(t/s)*s,{tick:s,start:o}},r.prototype.render=o(x.default.mark(function t(){var e,i,n,o,r,s,a,h,v,b,S,w,P,C,k,L;return x.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(this.plotHeight<=0||this.plotWidth<=0)){t.next=2;break}return t.abrupt("return");case 2:if(e=this.asks,i=this.bids,n=this.mainCanvas.get(0).getContext("2d"),n.clearRect(0,0,this.width,this.height),this.asks&&this.bids&&(0!==this.asks.length||0!==this.bids.length)){t.next=8;break}return t.abrupt("return");case 8:return t.next=10,this.initTheme();case 10:if(o=this.calculateTickmarks(this.cmin,this.cmax,this.plotHeight,p),r=[],!(o.tick>0&&isFinite(o.start))){t.next=28;break}n.strokeStyle=T("color-depthrenderer-stroke-style"),n.strokeWidth=1,s=1;case 16:if(!((a=o.start+o.tick*s)>this.cmax)){t.next=19;break}return t.abrupt("break",28);case 19:h=Math.floor(this.s2y(a))+.5,n.beginPath(),n.moveTo(0,h),n.lineTo(this.plotWidth,h),n.stroke(),r.push({c:a,y:h});case 25:s++,t.next=16;break;case 28:if(n.font=d,v=n.measureText(this.xAxisFormatter.format(this.pmax)).width+_,
b=this.calculateTickmarks(this.pmin,this.pmax,this.width,v),S=[],!(b.tick>0&&isFinite(b.start))){t.next=48;break}n.strokeStyle=T("color-depthrenderer-stroke-style"),n.strokeWidth=1,s=0;case 36:if(w=b.start+b.tick*s,P=Math.floor(this.p2x(w))+.5,n.beginPath(),n.moveTo(P,this.plotHeight+this.plotYofsset+.5),n.lineTo(P,0),n.stroke(),S.push({p:w,x:P}),!(w>this.pmax)){t.next=45;break}return t.abrupt("break",48);case 45:s++,t.next=36;break;case 48:if(i.length){for(n.beginPath(),C=this.p2x(i[i.length-1].p),k=this.plotHeight+this.plotYofsset,n.moveTo(C,k),s=i.length;s--;)P=this.p2x(i[s].p),h=this.s2y(i[s].c),n.lineTo(C,h),n.lineTo(P,h),C=P;n.lineTo(0,this.s2y(i[0].c)),n.strokeStyle=f,n.stroke(),n.lineTo(0,this.plotHeight+this.plotYofsset),n.fillStyle=m,n.fill()}if(e.length){for(n.beginPath(),C=this.p2x(e[0].p),k=this.plotHeight+this.plotYofsset,n.moveTo(C,k),s=0;s<e.length;s++)P=this.p2x(e[s].p),h=this.s2y(e[s].c),n.lineTo(C,h),n.lineTo(P,h),C=P;n.lineTo(this.width,this.s2y(e[e.length-1].c)),n.strokeStyle=g,n.stroke(),n.lineTo(this.width,this.plotHeight+this.plotYofsset),n.fillStyle=y,n.fill()}for(n.save(),n.strokeStyle=u,L=this.plotYofsset+this.plotHeight,n.beginPath(),n.moveTo(0,L+.5),n.lineTo(this.plotWidth,L+.5),n.stroke(),s=0;s<S.length;s++)n.beginPath(),n.moveTo(S[s].x,L+1),n.lineTo(S[s].x,L+c),n.stroke();for(n.shadowColor=T("color-widget-pages-bg"),n.shadowOffsetX=0,n.shadowOffsetY=0,n.shadowBlur=3,n.fillStyle=T("color-depthrenderer-fill-style"),n.textBaseline="top",n.textAlign="center",n.font=d,s=0;s<S.length;s++)n.fillText(this.xAxisFormatter.format(S[s].p),S[s].x,L+4);for(n.textBaseline="middle",n.textAlign="left",s=0;s<r.length;s++)n.fillText(this.yAxisFormatter.format(r[s].c),l,r[s].y);n.restore(),this.onMouseMove(),this.renderLast();case 73:case"end":return t.stop()}},t,this)})),r.prototype.destroy=function(){this.element.remove()},t.exports=r},function(t,e,i){"use strict";function n(t,e){var i=new h(t,e);return new d(i)}var o,r,s,a,l,c,h,u,d;Object.defineProperty(e,"__esModule",{value:!0}),i(9),o=i(0),r=i(622),s=i(319),a=i(296),l=function(){function t(t,e){this._bidAskRendered=!1,this._lastRendered=!1,this._options=e||{},this._elements=this._initLayout(t),this._priceFormatter=new s.QuoteSessionPriceFormater}return t.prototype.render=function(t,e){var i,n;return this._priceFormatter.update(t,e),i=this._renderHighLow(t.high,t.low,e.high,e.low),n=this._renderRange(t,e),i||n},t.prototype.hide=function(){!1!==this._isVisible&&(this._hideElement(this._elements.container),this._isVisible=!1)},t.prototype.show=function(){!0!==this._isVisible&&(this._showElement(this._elements.container),this._isVisible=!0)},t.prototype._initLayout=function(t){return{container:t,priceL:this._options.elPriceL||null,priceR:this._options.elPriceR||null,bar:null,bid:null,ask:null,last:null}},t.prototype._renderHighLow=function(t,e,i,n){var o,r,s;return!(!this._elements.priceL&&!this._elements.priceR)&&(o=null!=t||null!=e,r=null!=i||null!=n,!(!o||!r)&&(this._elements.priceL.textContent=e?this._priceFormatter.format(e):"",
this._elements.priceR.textContent=t?this._priceFormatter.format(t):"",s=this._priceFormatter.hasForexAdditionalPrecision(),s&&(Object(a.a)(this._elements.priceL),Object(a.a)(this._elements.priceR)),this.show(),!0))},t.prototype._renderRange=function(t,e){var i,n,o,r,s,a=!1;return null!=t.open&&null!=t.high&&null!=t.last&&null!=t.high&&(a=this._renderBar(t.open,t.high,t.low,t.close)||a),i=null!=e.bid||null!=e.ask,n=t.bid&&t.ask&&null!=t.last&&null!=t.high,o=this._elements.bid&&this._elements.ask,r=!this._options.hideBidAsk&&o&&n,!r||!i&&this._bidAskRendered||(a=this._renderBidAsk(t.bid,t.ask,t.low,t.high)||a),s=null!=t.open&&null!=t.high&&null!=t.low&&null!=t.close&&null!=t.last,r||!s||!e.last&&this._lastRendered||(a=this._renderLast(t.open,t.high,t.low,t.close,t.last)||a),a},t.prototype._renderBar=function(t,e,i,n){var o,r,s,a,l,c;return!!this._elements.bar&&(o=e-i,r=Math.min(n,t),s=Math.max(n,t),a=(r-i)/o*100,l=(s-i)/o*100,c=n<t,this._elements.bar.style.left=a+"%",this._elements.bar.style.width=l-a+"%",this._barClassFalling&&this._elements.bar.classList.toggle(this._barClassFalling,c),this.show(),!0)},t.prototype._renderLast=function(t,e,i,n,o){var r,s,a;return!!this._elements.last&&(r=e-i,s=100*(o-i)/r,this._elements.last.style.left=s+"%",this._showElement(this._elements.last),this._lastClassFalling&&(a=n<t,this._elements.last.classList.toggle(this._lastClassFalling,a)),this._hideElement(this._elements.bid),this._hideElement(this._elements.ask),this.show(),!0)},t.prototype._renderBidAsk=function(t,e,i,n){var o,r,s;return!(!this._elements.bid||!this._elements.ask)&&(o=n-i,r=100*(t-i)/o,s=100*(e-i)/o,this._toggleElement(this._elements.bid,0<=r&&r<=100),this._elements.bid.style.left=r+"%",this._toggleElement(this._elements.ask,0<=s&&s<=100),this._elements.ask.style.left=s+"%",this._hideElement(this._elements.last),this._bidAskRendered=!0,!0)},t.prototype._showElement=function(t){t&&t.classList.remove("i-hidden")},t.prototype._hideElement=function(t){t&&t.classList.add("i-hidden")},t.prototype._toggleElement=function(t,e){e?this._showElement(t):this._hideElement(t)},t}(),c=i(623),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._barClassFalling="low",e._lastClassFalling="low",e}return o.c(e,t),e.prototype._initLayout=function(e){var i,n,o,r,s,a;return e.classList.add("dl-range"),i=t.prototype._initLayout.call(this,e),n=function(){var t,i,n,o=[];for(t=0;t<arguments.length;t++)o[t]=arguments[t];return n=document.createElement("span"),n.innerHTML=c,(i=n.classList).add.apply(i,o),e.appendChild(n),n},o=function(){var t,i,n,o=[];for(t=0;t<arguments.length;t++)o[t]=arguments[t];return n=document.createElement("div"),(i=n.classList).add.apply(i,o),e.appendChild(n),n},i.bid=n("dl-range-mark","bid"),i.ask=n("dl-range-mark","ask"),i.last=n("dl-range-mark","last"),r=o("dl-range-bar-bg"),s=document.createElement("div"),s.classList.add("dl-range-bar"),r.appendChild(s),i.bar=s,null===i.priceL&&(i.priceL=o("dl-range-price-l")),null===i.priceR&&(i.priceR=o("dl-range-price-r")),
this._options.title&&(a=o("dl-range-caption"),a.innerText=this._options.title),i},e}(l),u=function(){function t(t){this._renderer=t}return t.prototype.render=function(t,e){return this._renderer.render(this._prepareQuoteData(t),this._prepareQuoteData(e))},t.prototype.hide=function(){this._renderer.hide()},t.prototype.show=function(){this._renderer.show()},t}(),d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o.c(e,t),e.prototype._prepareQuoteData=function(t){var e,i;return"MOEX"!==t.exchange&&"MOEX"!==t.listed_exchange?(e=t.bid||null,i=t.ask||null):(e=null,i=null),{open:null==t.open_price?null:t.open_price,high:null==t.high_price?null:t.high_price,low:null==t.low_price?null:t.low_price,last:null==t.last_price?null:t.last_price,close:null==t.last_price?null:t.last_price,bid:e,ask:i,pricescale:t.pricescale,minmov:t.minmov,fractional:t.fractional,minmove2:t.minmove2}},e}(u),e.createDaysRange=n},function(t,e){},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 9 13" width="9" height="13"><path d="M9 4.5c0 .528-.138 1.02-.258 1.505C8 9 4.5 13 4.5 13S1 9 .26 6.007C.137 5.522 0 5.03 0 4.5a4.5 4.5 0 0 1 9 0z"/></svg>'},function(t,e){},function(t,e,i){"use strict";function n(t,e){var i,n,o=t;return void 0!==o.subscribeRealtime&&void 0!==o.unsubscribeRealtime||(i={},n=new r.a("bwr_"+l++),o.subscribeRealtime=function(t){i[t]=e.realtimeUpdate.bind(e),n.subscribeRealtime(t,i[t])},o.unsubscribeRealtime=function(t){n.unsubscribeRealtime(t,i[t]),delete i[t]}),o}function o(t,e,i){if(void 0===t.subscribeDOME&&void 0===t.unsubscribeDOME){var n={};t.subscribeDOME=function(t){n[t]=new a.a(i,0,0);var o=function(i){function n(t){return t.map(function(t){return{price:t.p,volume:t.v}})}var o,r;"dd"!==i.method&&"dpu"!==i.method||(o="dd"===i.method,r=i.params[0],e.domeUpdate(t,{snapshot:o,asks:n(r.asks),bids:n(r.bids)}))};n[t].connect(o),n[t].depthSetSymbol(t)},t.unsubscribeDOME=function(t){n[t]&&(n[t].stopSession(),delete n[t])}}return t}var r,s,a,l;Object.defineProperty(e,"__esModule",{value:!0}),e.addRealtimeToBroker=n,e.addDomeToBroker=o,r=i(309),s=i(320),a=i.n(s),l=0},function(t,e,i){"use strict";var n=i(4);window.onload=function(){function t(){var t=0;return JSON.parse(urlParams.logo).image&&(t="C",n.enabled("link_to_tradingview")||(t="D")),t}function e(){try{return/^(192|172|10)\.[0-9][0-9][0-9]\.[0-9][0-9][0-9]\.[0-9][0-9][0-9]/.test(location.hostname)||/^.*((?:\.local)|localhost)$/.test(location.hostname)}catch(t){return!1}}location.hostname.indexOf(".")>=0&&!e()&&setTimeout(function(){try{var e=t();window.ga&&0!==e&&window.ga("send","event","s",e)}catch(t){}},3e4)}},function(t,e,i){"use strict";(function(e){function n(t){function n(t,e){var i,n,r=[],s=o[ge].count;for(i=0;i<s;i++)r.push(he[i].chartWidget.state(t,e));return n={layout:ge,charts:r},be.value()&&(n.symbolLock=1),Se.value()&&(n.intervalLock=1),we.value()&&(n.trackTimeLock=1),n}function C(t){var e,i=$.Deferred(),n=[],r=o[ge].count;for(e=0;e<r;e++)n.push(he[e].chartWidget.asyncState(t))
;return $.when.apply($,n).then(function(){var t,e={charts:[]};for(t=0;t<arguments.length;t++)e.charts.push(arguments[t]);i.resolve(e)}),i}function x(){var t,e;for(t=Bt?[Bt]:he.slice(0,me.count).filter(function(t){return!t.hiddenInLayout.value()}),e=0;e<t.length;e++)k(t[e],e,t.length);Ut.trigger("chart-rect-update",Ut[0].getBoundingClientRect())}function k(t,e,i){var n=me.sizer(e,{width:Vt.value(),height:Rt.value()},re,se,i),o={width:Math.max(Math.round(n.width||0)-2*ae,0),height:Math.max(Math.round(n.height||0)-2*ae,0),top:Math.max(Math.round(n.top||0),0),left:Math.max(Math.round(n.left||0),0)};t.metrics=o,t.body.value().css(o),t.width.setValue(o.width),t.height.setValue(o.height)}function L(){for(var t=0;t<he.length;t++)he[t].chartWidget.resizeSeriesControlUI()}function I(){for(var t=0;t<he.length;t++)he[t].chartWidget.tickSeriesControlClock()}function A(t){return t.rdState.owner.value()!==t}function E(t){var e,i=0,n=0;for(e=0;e<me.count;e++)he[e]&&A(he[e])||(he[e]===t&&(n=i),i++);k(t,n,i)}function M(t){function e(){o.visible.setValue(!o.hiddenInLayout.value()&&oe.resizerBridge.visible.value())}var i,n,o;return t=Object.assign({chartWidgetCollection:ne,isActive:0===he.length,barsMarksContainersFactory:O,undoHistory:jt,readOnly:ce},t||{}),n=$(document.createElement("div")).addClass("chart-container").appendTo(Ut).css({position:"absolute",overflow:"hidden"}),o={alive:new _(!0),body:new _(n),width:new _,height:new _,hiddenInLayout:new _(!1),visible:new _,rdState:new f,requestFullscreen:function(){_e.value()&&(le.setValue(o.chartWidget),D(o))},exitFullscreen:function(){le.value()===o.chartWidget&&D(null)},detachable:_e,fullscreenable:_e,fullscreen:new _},o.rdState.pushOwner(o),he.push(o),o.hiddenInLayout.subscribe(e),oe.resizerBridge.visible.subscribe(e),e(),E(o),Object.assign(t,o.rdState.bridge()),o.chartWidget=i=new r.ChartWidget(t),ne.firstWidgetInitialized||i.chartWidgetInitialized.subscribe(null,function(){ne.firstWidgetInitialized=!0,L()},!0),(1===he.length||d.enabled("show_logo_on_all_charts"))&&i.createBranding(),t.containsData?i.finishInitWithoutConnect():i.connect(),B(),N(),$t.fire(i),i}function O(t){var e,i,n=[];return d.enabled("charting_library_base")&&(e=new b(t),n.push(e),i=new S(t),n.push(i)),n}function D(t){Bt!==t&&(Bt=t,ue=W(),R(ge))}function V(){D(null);for(var t=0;t<he.length;t++)he[t].rdState.bridge().attach()}function R(t){function e(){0===u&&(B(),h.emit("layout_changed"))}function i(){u--,e()}var n,r,s,a,l,c,u=0;t in o||(t="s"),n=o[t].count,h.emit("layout_about_to_be_changed",t),ge=t,me=o[t];for(r=n;r<he.length;r++)s=he[r],A(s)&&s.rdState.bridge().attach();for(r=0;r<n||r<he.length;r++)s=he[r],a=Bt?Bt===s:r<n&&(!s||!A(s)),a?(s?(Ut.append(s.body.value()),s.hiddenInLayout.setValue(!1),(l=ye.shift())&&(ve=!0,s.chartWidget.loadContent(l.content),ve=!1)):(u++,c=M(Object.assign({},Ft,ye.shift()||(le.value()?{content:le.value().state()}:null)||{},0===r||be.value()?{}:{defSymbol:null})),s=he[r],c.modelCreated().subscribe(null,i,!0)),s.body.value().toggleClass("multiple",n>1),
s.fullscreen.setValue(Bt===s)):s&&(s.hiddenInLayout.setValue(!0),s.body.value().detach(),s.fullscreen.setValue(!1));return x(),B(),F(),e(),fe.value()<1&&n>0&&he[n-1].rdState.bridge().attach(),!0}function B(){var t,e=Math.min(me.count,he.length)-1;if(e<0)return void le.deleteValue();t=pe,t<0&&(t=0),t>e&&(t=e),le.setValue(he[t].chartWidget)}function F(){var t,e=me.count,i=e;for(t=0;t<e;t++)he[t]&&A(he[t])&&i--;fe.setValue(i),_e.setValue(i>1)}function N(){var t,e;for(t=he.length;t--;)e=t===pe,he[t].body.value().toggleClass("active",e).toggleClass("inactive",!e)}function W(){return he.filter(function(t){return!t.hiddenInLayout.value()}).sort(function(t,e){return t.metrics.top-e.metrics.top||t.metrics.left-e.metrics.left})}function j(){var t,e,i,n=Dt.value();"s"!==n&&(t=o[n].count,Bt||(ue=W()),e=de+1,i=ue[e],!i||e>t?(i=ue[0],de=0):de=e,le.setValue(i.chartWidget),Bt&&R(n))}function H(){return qt}function U(){P("GUI","Save"),qt.fire()}function z(){var t,e=le.value();e&&(t=e.model())&&t.model().setSelectedSource(null)}function q(t){var e=le.value();return!!e&&e.trySetChartStyle(t)}function Y(t){var e,i,n,o;Kt!==t&&(Kt&&(Kt.modelCreated().unsubscribe(null,G),(e=Kt.model())&&(i=e.mainSeries().properties(),i.style.unsubscribe(null,K),n=e.model(),n.onSelectedSourceChanged().unsubscribe(null,X),Kt=null)),t&&(o=t.model(),o?G(o):t.modelCreated().subscribe(null,G),Kt=t))}function G(t){var e,i=t.mainSeries().properties();i.style.subscribe(null,K),K(i.style),e=t.model(),e.onSelectedSourceChanged().subscribe(null,X),X(t.selectedSource())}function K(t){Yt.setValue(t.value())}function X(t){Gt.setValue(t)}function J(t){var e,i,n,o;if(t!==be.value()){if(jt.beginUndoMacro("Symbol Lock"),t)for(e=le.value(),i=e.getSymbol(),n=0;n<he.length;n++)(o=he[n].chartWidget)!==e&&o.getSymbol()!==i&&o.setSymbol(i);jt.setWatchedValue(be,t,"Symbol Lock"),jt.endUndoMacro()}}function Z(t){var e,i,n,o;if(t!==Se.value()){if(jt.beginUndoMacro("Interval Lock"),t)for(e=le.value(),i=e.getResolution(),n=0;n<he.length;n++)(o=he[n].chartWidget)!==e&&o.getResolution()!==i&&o.setResolution(i);jt.setWatchedValue(Se,t,"Resolution Lock"),jt.endUndoMacro()}}function Q(t){we.value()!==t&&jt.setWatchedValue(we,t,"Track Time")}function tt(t){return t=It(t),Dt.value()!==t&&(jt.pushUndoCommand(new p(ne,t)),!0)}function et(t){be.value()?it(t):le.value().setSymbol(t)}function it(t){var e,i,n=!1;for(e=0;e<he.length;e++)i=he[e].chartWidget,(i.model().mainSeries().properties().symbol.value()!==t||d.enabled("same_data_requery"))&&(n||(jt.beginUndoMacro("Change Symbol"),n=!0),i.setSymbol(t));n&&jt.endUndoMacro()}function nt(t){var e,i,n;if(!ve)if(Se.value()){for(e=!1,i=0;i<he.length;i++)n=he[i].chartWidget,n.model().mainSeries().properties().interval.value()!==t&&(e||(jt.beginUndoMacro("Change Resolution"),e=!0),n.setResolution(t));e&&jt.endUndoMacro()}else le.value().setResolution(t)}function ot(t){var e,i,n;if(t&&t.onlyActiveChart||Bt)return{layout:"s",hidpiRatio:window.hidpiCanvasRatio||1,charts:[le.value().images()]};for(e=[],i=me.count,
n=0;n<he.length&&n<i;n++)e.push(he[n].chartWidget.images());return{layout:ge,hidpiRatio:window.hidpiCanvasRatio||1,charts:e}}function rt(){var t,e=[];for(t=0;t<he.length&&t<me.count;t++)e=e.concat(he[t].chartWidget.tags());return e=$.unique(e),e=$.map(e,function(t){return t.toLowerCase().replace(/\W+/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"")})}function st(t,e,i,n){var o,r,s,a;if(i||Te)for(o=me.count,r=0;r<he.length&&r<o;r++)(s=he[r].chartWidget)!==e&&he[r].rdState.bridge().visible.value()&&(a=s.model())&&a.model().setExternalPosition(t,n)}function at(t,e){var i,n,o,r;if(we.value()){for(i=me.count,jt.beginUndoMacro("Sync Time"),n=0;n<he.length&&n<i;n++)if(o=he[n].chartWidget,r=o.model()){if(r.model()===e)continue;r.gotoTime(t,{centerIfVisible:!1,model:e})}jt.endUndoMacro()}}function lt(){Ct(!1),he.forEach(function(t){void 0!==t.timingsMeter&&t.timingsMeter.destroy(),t.chartWidget.destroy()}),oe.resizerBridge.remove(),te&&clearInterval(te),$(window).off("resize",x),$(document).off("onUpdate",x),zt.resolve(),Ut.remove(),Qt=null}function ct(){return zt.promise()}function ht(){return $t}function ut(){Wt.id.setValue(void 0),Wt.uid.setValue(void 0),Wt.name.setValue(void 0)}function dt(){var t={snapshotUrl:oe.snapshotUrl};(d.enabled("show_dialog_on_snapshot_ready")?u.getImageOfChart:u.getImageOfChartSilently)(ne,t,function(t){h.emit("onScreenshotReady",t)})}function pt(){for(var t=o[ge].count;t<he.length;t++)he[t].chartWidget.destroy();he.splice(o[ge].count)}function _t(t){for(var e=0;e<he.length;e++)he[e].chartWidget.applyOverrides(t)}function ft(t){for(var e=0;e<he.length;e++)he[e].chartWidget.applyStudiesOverrides(t)}function mt(){oe.resizerBridge.requestFullscreen()}function gt(){oe.resizerBridge.exitFullscreen()}function yt(){return Ut}function vt(t){var e=t.model().preferences();he.forEach(function(i){i.chartWidget._model!==t&&i.chartWidget._model.applyPreferences(e)})}function bt(t,e){(e?[{chartWidget:le.value()}]:he).forEach(function(e){e.chartWidget._model.model().restoreTheme(t)})}function St(t,e){g.bind(t,function(t){t.preventDefault(),e()})}function wt(){for(var t in Jt)St(t,Jt[t]);Qt.watchOn(window)}function Pt(){for(var t in Jt)g.unbind(t);Qt.stopWatching(window)}function Tt(t){Ft.onWidget||Xt===t||(Xt=t,t?wt():Pt())}function Ct(t){if(Tt(t),0!==he.length){for(var e=he.length;e--;)he[e].chartWidget.setActive(!1);he[pe].chartWidget.setActive(t)}}function xt(){return he.map(function(t){return t.chartWidget.getMarketStatusTooltip()})}function kt(){return he.map(function(t){var e=t.chartWidget.model(),i=e?e.mainSeries().status():null;return(null===i?"":t.chartWidget.getDataTextStatus(i))+" ("+i+")"})}function Lt(){var t=this;return new Promise(function(e){i.e(16).then(function(){var n=i(945).AddCompareDialog,o=new n(t);e(o.show())}.bind(null,i)).catch(i.oe)})}function It(t){return d.enabled("charting_library_base")?t:"s"===t||isProductFeatureEnabled(ProductFeatures.MULTIPLE_CHARTS)&&getProductFeatureConfig(ProductFeatures.MULTIPLE_CHARTS).layout.indexOf(t)>=0||Ft.containsData||ce?t:"s"}function At(t){if(ye=[],
t){t.charts||(t={layout:"s",charts:[t]}),ge=It(t.layout||"s");for(var e=0;e<t.charts.length;e++)ye.push({content:t.charts[e]});t.symbolLock&&be.setValue(!0),t.intervalLock&&Se.setValue(!0),t.trackTimeLock&&we.setValue(!0)}Dt.setValue(ge),R(ge)&&(l.init(),ye.splice(0,ye.length))}function Et(){0===--ee&&h.emitOnce("onChartReady")}function Mt(){return Promise.all(he.map(function(t){return m(t.chartWidget.modelCreated())}))}function Ot(){return Promise.all(he.map(function(t){return m(t.chartWidget.model().mainSeries().onSymbolResolved())}))}var Dt,Vt,Rt,Bt,Ft,Nt,Wt,jt,Ht,Ut,zt,$t,qt,Yt,Gt,Kt,Xt,Jt,Zt,Qt,te,ee,ie,ne=this,oe=Object.assign({},T,t),re=2,se=0,ae=0,le=new _,ce=oe.readOnly||!1,he=[],ue=[],de=0,pe=0,_e=new _,fe=new _,me=null,ge="s",ye=[],ve=!1,be=new _(!1),Se=new _(!1),we=new _(!1),Pe=new _(TVSettings.getBool("chart.syncCrosshair",!0)),Te=Pe.value();Pe.subscribe(function(t){t=!!t,Te=t,TVSettings.setValue("chart.syncCrosshair",t)}),Dt=new _(ge),Vt=oe.resizerBridge.width,Rt=oe.resizerBridge.height,Bt=null,"padding"in oe&&(re=oe.padding),"edge"in oe&&(se=oe.edge),"border"in oe&&(ae=oe.border),Ft=oe.widgetOptions||{},Nt=oe.metaInfo||{},Wt={id:new _(Nt.id||null),name:new _(Nt.name),description:new _(Nt.description),username:new _(Nt.username),uid:new _(Nt.uid),lastModified:new _(Nt.lastModified)},jt=a(),Ht=function(t){h.emit("undo_redo_state_changed",t)},jt.onChange().subscribe(null,Ht),Ut=$(oe.resizerBridge.body.value()).eq(0),zt=$.Deferred(),$t=new e,Vt.subscribe(x),Rt.subscribe(x),this.updateLayout=x,qt=new e,Yt=new _,Gt=new _,Kt=null,le.subscribe(function(t){var e,i;if(t){for(i=he.length;i--;)if(he[i].chartWidget===t){e=i;break}if(!isFinite(e))throw Error("Cannot make detached ChartWidget active");if(pe!==e){for(Bt&&(A(he[e])||(Bt=he[e])),pe=e,N(),ue.length&&(de=ue.indexOf(he[pe])),i=he.length;i--;)he[i].chartWidget.setActive(!1);t.setActive(!0)}Y(t)}},{callWithLast:!0}),Xt=!1,Jt={Tab:j},oe.takeScreenshotEnabled&&(Jt["Alt+s"]=dt),oe.saveChartEnabled&&(Jt["Ctrl+s"]=U),Zt={},Zt[v]=z,Qt=new y("keydown",!1),Qt.regHandlers(Zt),Tt(!0),Object.assign(this,{createChartWidget:M,getAll:function(){return he.map(function(t){return t.chartWidget})},destroy:lt,layout:Dt,activeChartWidget:le,activeChartStyle:Yt.readonly(),trySetChartStyleToActiveWidget:q,selectedSource:Gt.readonly(),metaInfo:Wt,state:n,asyncState:C,readOnly:function(){return ce},lock:{symbol:be,setSymbolLockWithUndo:J,interval:Se,setIntervalLockWithUndo:Z,crosshair:Pe,trackTime:we,setTrackTimeWithUndo:Q},setSymbol:et,setResolution:nt,updateLayout:x,setChartLayoutWithUndo:tt,resizeWidgetsUI:L,images:ot,tags:rt,syncCrosshair:st,syncScroll:at,setSymbolAll:it,clearChartMetaInfo:ut,onfeatures:oe.onfeatures,takeScreenshot:dt,loadContent:At,purgeUnusedWidgets:pt,applyOverrides:_t,applyStudiesOverrides:ft,switchChart:j,startFullscreen:mt,exitFullscreen:gt,destroyPromise:ct,chartWidgetCreated:ht,saveKeysPressed:H,getContainer:yt,onWidget:Ft.onWidget,applyTheme:bt,setActive:Ct,inlineChartsCount:fe.readonly(),revertToInline:V,chartMarketStatuses:xt,chartSeriesStatuses:kt,
undoHistory:jt,showAddCompareDialog:Lt,applyPreferencesToAllCharts:vt}),At(oe.onfeatures?void 0:oe.content),Dt.subscribe(function(t){N(),R(t,!1)&&(ue=W(),de=ue.indexOf(he[pe]))}),Dt.hook=function(t){return t===this.value()?t:It(t)},ce&&(Dt.writeLock=!0),te=setInterval(I,1e3),$(window).on("resize",x),$(document).on("onUpdate",x),d.enabled("datasource_copypaste")&&(c.init(),oe.globalEvents&&($(window).on("appclip:paste",function(t){le.value().onAppClipboardPaste(),t.preventDefault()}),$(window).on("appclip:copy",function(t){le.value().onAppClipboardCopy(),t.preventDefault()}),$(window).on("appclip:cut",function(t){le.value().onAppClipboardCut(),t.preventDefault()}))),ee=0,he.forEach(function(t){if(t){ee++;var e=t.chartWidget;e.withModel(null,function(){if(e.model().mainSeries().bars().size()>0)Et();else{var t=function(){Et(),e.model().mainSeries().onBarReceived().unsubscribe(null,t),e.model().mainSeries().onCompleted().unsubscribe(null,t)};e.model().mainSeries().onBarReceived().subscribe(null,t),e.model().mainSeries().onCompleted().subscribe(null,t)}})}}),s()&&(ie=l.tool.setValue,l.tool.setValue=function(){ne.selectedSource.value()&&ne.activeChartWidget.value().model().lineBeingCreated()&&ne.activeChartWidget.value().model().cancelCreatingLine(),ie.apply(l.tool,arguments)}),Mt().then(Ot).then(function(){window.saver&&window.is_authenticated&&oe.widgetOptions.justCloned&&window.saver.saveChartSilently()}).catch(w.logError.bind(w))}var o=i(120).layouts,r=i(628),s=i(81).supportTouch,a=i(776).createUndoHistory,l=i(38),c=i(214),h=i(42),u=i(777),d=i(4),p=i(778).SetChartLayoutCommand,_=i(15),f=i(162).ResizerDetacherState,m=i(779).delegateToPromise,g=i(122),y=i(401).KeyboardListener,v=i(151).ESC,b=i(780),S=i(781),w=i(5).getLogger("Chart.ChartWidgetCollection"),P=i(28).trackEvent,T={publishChartEnabled:!0,saveChartEnabled:!0,takeScreenshotEnabled:!0};t.exports=n}).call(e,i(8))},function(t,e,i){"use strict";(function(e){function n(t){var i,n,o,r,s,a,l,c,h,u,d,p,_,f,m,g,y,v,b,S;this._options=Object.assign({},at,t),i=this,this._guid=X(),this._startSpinner(this._options.body.value()),n=this._options.content,o=this._options.readOnly,o||(k.init(),k.tool.subscribe(function(){i._updateCrossHairPositionIfNeeded()}),r=function(t,e,i){var n,o=e.mainSeries().syncModel(),r=t.mainSeries().syncModel(),s=i;return o&&r&&(n=t._createSyncPoint(o,r),s=n.sourceTimeToTargetTime(i)),t.timeScale().points().roughIndex(s,r&&r.distance.bind(r))},k.createdLineTool.subscribe(null,function(t){var e,n,o;i._model&&(e=i._model.model(),t.model!==e&&(n=e.paneForSource(i._model.model().mainSeries()),o={index:r(e,t.model,t.point.timeStamp),price:t.point.price},i._model.createLineTool(n,o,t.linetool,t.properties,t.linkKey)))}),k.continuedLineTool.subscribe(null,function(t){var e,n,o;i._model&&(e=i._model.model(),t.model!==e&&(n={index:r(e,t.model,t.point.timeStamp),price:t.point.price},(o=i._model.lineBeingCreated())&&i._model.model().coninueCreatingLine(n,t.envState,!!t.finalState)&&t.finalState&&o.restoreExternalPoints(t.finalState)))}),
k.cancelledLineTool.subscribe(null,function(t){if(i._model){var e=i._model.model();t.model!==e&&i._model.model().cancelCreatingLine()}}),k.startedMovingLineTool.subscribe(null,function(t){var e,n,o;i._model&&(e=i._model.model(),t.model!==e&&(n=e.dataSources().filter(function(e){return e.linkKey===t.linkKey})[0])&&(o={index:r(e,t.model,t.point.timeStamp),price:t.point.price},i._model.model().startMovingSource(n,o)))}),k.movedLineTool.subscribe(null,function(t){var e,n;i._model&&(e=i._model.model(),t.model!==e&&e.sourceBeingMoved()&&e.sourceBeingMoved().linkKey===t.linkKey&&(n={index:r(e,t.model,t.point.timeStamp),price:t.point.price},i._model.model().moveSource(n)))}),k.finishedMovingLineTool.subscribe(null,function(t){var e,n;i._model&&(e=i._model.model(),t.model!==e&&(n=e.sourceBeingMoved())&&(i._model.model().endMovingSource(!!t.finalState),t.finalState&&n.restoreExternalPoints(t.finalState)))}),k.startedChangingLineTool.subscribe(null,function(t){var e,n,o;i._model&&(e=i._model.model(),t.model!==e&&(n=e.dataSources().filter(function(e){return e.linkKey===t.linkKey})[0])&&(o={index:r(e,t.model,t.point.timeStamp),price:t.point.price},i._model.model().startChangingLinetool(n,o,t.pointIndex,t.envState)))}),k.changedLineTool.subscribe(null,function(t){var e,n;i._model&&(e=i._model.model(),t.model!==e&&e.lineBeingEdited()&&e.lineBeingEdited().linkKey===t.linkKey&&(n={index:r(e,t.model,t.point.timeStamp),price:t.point.price},i._model.model().changeLinePoint(n,t.envState)))}),k.finishedChangingLineTool.subscribe(null,function(t){var e,n;i._model&&(e=i._model.model(),t.model!==e&&(n=e.dataSources().filter(function(e){return e.linkKey===t.linkKey})[0],e.lineBeingEdited()&&i._model.model().endChangingLinetool(!!t.finalState),n&&t.finalState&&n.restoreExternalPoints(t.finalState)))}),k.removedLineTool.subscribe(null,function(t){var e,n;i._model&&(e=i._model.model(),t.model!==e&&(n=e.dataSources().filter(function(e){return e.linkKey===t.linkKey})[0])&&i._model.model().removeSource(n))}),k.finishedLineTool.subscribe(null,function(t){var e;i._model&&(e=i._model.model(),t.model!==e&&e.dataSources().filter(function(e){return e.linkKey===t.linkKey})[0]&&i._model.model().finishLineTool())}),k.changedLineStyle.subscribe(null,function(t){var e,n;i._model&&(e=i._model.model(),t.model!==e&&(n=e.dataSources().filter(function(e){return e.linkKey===t.linkKey})[0])&&(n.properties().merge(t.state),n.propertiesChanged()))}),k.restoredLineToolState.subscribe(null,function(t){var e,n,o;i._model&&(e=i._model.model(),t.model!==e&&(n=e.dataSources().filter(function(e){return e.linkKey===t.linkKey})[0])&&(o=$.extend({},t.state),o.indexes=o.points.map(function(i){return{index:r(e,t.model,i.time_t),price:i.price}}),e.restoreLineToolState(n,o)))}),k.restoredLineTool.subscribe(null,function(t){if(i._model){var e=i._model.model();t.model!==e&&e.restoreSource(t.state.restorePane,t.state.paneIndex,t.state.paneState,t.state.sourceState,t.state.priceScaleName)}}),k.copiedLineTool.subscribe(null,function(t){var e,n,o,s,a,l;if(i._model&&(e=i._model.model(),
t.model!==e)){if(n=e.paneForSource(e.mainSeries()),o=t.points.map(function(i){return{index:r(e,t.model,i.timeStamp),price:i.price}}),s=o[0],a=e.createLineTool(n,s,t.linetool,null,t.linkKey),e.lineBeingCreated())for(l=1;l<o.length;l++)l!==o.length-1||"LineToolBrush"!==t.linetool&&"LineToolGhostFeed"!==t.linetool||e.finishLineTool(!0),e.coninueCreatingLine(o[l],{},l<o.length-1,!0);a.properties().interval.setValue(t.state.interval),a.properties().merge(t.state),a.restoreData&&a.restoreData(t),a.propertiesChanged(),a&&t.finalState&&(a.calcIsActualSymbol(),a.restoreExternalPoints(t.finalState))}})),s=this._options.containsData,a=this._options.onWidget,l=this._options.onCmeWidget,l&&it.logWarn("[ChartWidget] 'onCmeWidget' option is depricated"),c=this._options.widgetCustomer,h=this._options.timezone,u=this._options.hideSymbolSearch,d=this._options.defSymbol,p=L.isValid(this._options.defInterval)?this._options.defInterval:void 0,_=parseInt(this._options.defStyle),f=M.isValidStyle(_)?_:void 0,m=this._options.defExtendedHours,g=this._options.defTimeframe,this._chartWidgetCollection=this._options.chartWidgetCollection||null,this._setContent(n),this._readOnly=o,this._containsData=s,this._showChartEvents=!s&&this._options.chartEventsEnabled,this._defSymbol=d,this._defInterval=p,this._defTimeframe=g,this._defStyle=f,this._onWidget=!!a,this._onWidget&&(l?this._widgetCustomer="cme":c&&(this._widgetCustomer=c)),this.controlBarHeight=33,this._hideSymbolSearch=u,this._paneWidgets=[],this._paneSeparators=[],this._timeAxisWidget=null,this._frameTime=30,this._model=null,this._metaInfo={},this._drawRafId=0,y=this._contentSeriesProperties(),y&&(d=y.symbol,p=y.interval),void 0===this._options.useUserChartPreferences&&(this._options.useUserChartPreferences=!0),this._properties=new j("chartproperties",void 0,void 0,this._options.useUserChartPreferences),v="chartproperties.mainSeriesProperties",b=this._options.useUserChartPreferences?et.defaults(v):et.factoryDefaults(v),this._properties.mainSeriesProperties.merge(b),p=p||b.interval||"D",f=f||b.style||D(L.isRange(p)),this._properties.mainSeriesProperties.merge({visible:!0,symbol:d||DEFAULT_SYMBOL,shortName:"",timeframe:"",onWidget:this._onWidget,interval:p,style:f,extendedHours:m,lineStyle:{styleType:et.factoryDefaults("chartproperties.mainSeriesProperties.lineStyle.styleType")}}),this._containsData&&this._properties.mainSeriesProperties.merge({showCountdown:!1}),h&&z(h)&&this._properties.timezone.setValue(h),this._tagsChanged=new e,this._modelCreated=new e,this._disconnected=new e,this._reconnectBailout=new e,this._connected=new e,this._redrawPanes=new e,this._onScroll=new e,this.chartWidgetInitialized=new e,this._chartSession=new q(ChartApiInstance),this._metaInfoRepository=new ot(this._chartSession),this.lhsPriceAxisWidthChanged=new e,this.rhsPriceAxisWidthChanged=new e,this._timingsMeter=null,this._isActive=this._options.isActive,this._options.body.subscribe(function(t){i._setElement(t)},{callWithLast:!0}),S=function(){i.resize()},this._options.width.subscribe(S),
this._options.height.subscribe(S),this._options.visible.subscribe(this._updateTimingsMeterState.bind(this))}function o(t){return{UTC:"Etc/UTC",EST:"America/New_York",CST:"America/Chicago",PST:"America/Los_Angeles"}[t]||"exchange"}var r,s,a,l,c,h,u,d,p,_,f,m,g,y,v,b,S,w,P,T,C,x,k,L,I,A,E,M,O,D,V,R,B,F,N,W,j,H,U,z,q,Y,G,K,X,J,Z,Q,tt,et,it,nt,ot,rt,st,at;i(9),r=i(6).assert,s=i(629),a=i(762),l=i(764),c=i(145).PriceAxisWidget,h=i(770).TimeAxisWidget,u=i(101).BarsMarksContainer,d=i(71).Series,p=i(4),_=i(95).isFeatureEnabled,f=i(213).ActionBinder,m=i(233).showEditObjectDialog,g=i(387).showGoToDateDialog,y=i(279).CustomEvent,v=i(39).Study,b=i(144),S=i(1).LineDataSource,w=i(86).isLineToolName,P=i(80).tradingService,T=i(30),C=T.Action,x=T.ActionSeparator,k=i(38),L=i(23).Interval,I=i(69),A=I.setLastUsedResolution,E=I.getDefaultResolution,M=i(51),O=M.isRangeStyle,D=M.getDefaultStyle,V=i(772).showSymbolInfoDialog,R=i(17),B=i(56).linking,F=i(298).showChangeIntervalDialog,N=i(119).showDialog,W=i(119).activateKeyPressHandler,j=i(3).DefaultProperty,H=i(239),U=H.availableTimezones,z=H.timezoneIsAvailable,q=i(773).ChartSession,Y=i(32),G=i(228).Spinner,K=i(28).trackEvent,X=i(22).guid,J=i(94).Size,Z=i(70).createConfirmDialog,Q=i(313).MarketStatusIndicator,tt=i(195).DataModeIndicator,et=i(159),it=i(5).getLogger("ChartWidget",{color:"#606"}),nt=i(36).IS_RTL,ot=i(774).StudyMetaInfoRepository,rt=i(120).isMultipleLayout,st=i(775).addPerfMark,at={addToWatchlistEnabled:!0,sourceSelectionEnabled:!0,propertyPagesEnabled:!0,paneContextMenuEnabled:!0,priceScaleContextMenuEnabled:!0,verticalTouchScroll:!1,seriesControlBarEnabled:!0,goToDateEnabled:!1,marketStatusWidgetEnabled:!0,chartWarningWidgetEnabled:!0,isSymbolAvailable:function(t){return Promise.resolve(!0)},legendWidgetEnabled:!0,chartEventsEnabled:!0,esdEnabled:!1,noMouseWheelScroll:!1},n.prototype._updateCrossHairPositionIfNeeded=function(){var t,e,i,n;this._model&&(t=k.tool.value(),this._model.model().setCurrentTool(t),TradingView.isMobile.any()&&(e=this._maximizedPaneWidget||this._paneWidgets[0],w(t)&&"LineToolBrush"!==t&&!this.selectBarMode().value()?(i=.5*this._model.model().timeScale().width(),n=.5*e._state.defaultPriceScale().height(),this._model.model().setAndSaveCurrentPosition(i,n,e._state),e._updateTooltip(i,n)):e._hideTooltip()),this._model&&TradingView.isMobile.any()&&this._model.model().crossHairSource().updateAllViews())},n.prototype._setElement=function(t){var e,n;this._jqMainDiv&&(this._jqMainDiv.remove(),this._jqParent.empty()),this._controlBarNavigation&&this._controlBarNavigation.destroy(),this._seriesControlWidget&&this._seriesControlWidget.destroy(),e=t.prop("ownerDocument"),this._jqParent=$(e.createElement("div")).addClass("chart-container-border").prependTo(t),this._jqMainDiv=$('<div class="chart-widget"/>',e),this._elTooltipDiv=e.createElement("div"),this._elTooltipDiv.className="tooltip-wrapper",this._jqMainDiv.append(this._elTooltipDiv),this._elMainTable=e.createElement("table"),this._elMainTable.className="chart-markup-table",
this._elMainTable.setAttribute("cellpading","0"),this._elMainTable.setAttribute("cellspacing","0"),this._jqMainDiv.append(this._elMainTable),n=this._options.seriesControlBarEnabled&&(!p.enabled("lean_chart_load")||!this._chartControlsBar),n&&(this._chartControlsBar=e.createElement("div"),this._chartControlsBar.className="chart-controls-bar",this._chartControlsBar.classList.toggle("chart-controls-bar--inactive",!this._isActive),this._jqParent.append(this._chartControlsBar),i.e(10).then(function(t){var e=i(941).BottomToolbarRenderer;this._isDestroyed||(this._seriesControlWidget=new e(this._chartControlsBar,this,this._chartWidgetCollection,ChartApiInstance,this._options,this._options.seriesControlBar))}.bind(this).bind(null,i)).catch(i.oe)),(this._options.controlBar||p.enabled("control_bar"))&&i.e(3).then(function(t){if(!this._isDestroyed){this._controlBarNavigation&&this._controlBarNavigation.destroy();var e=i(942).ControlBarNavigation;this._controlBarNavigation=new e(this,this._jqMainDiv[0]),this._model&&this._adjustSize()}}.bind(this).bind(null,i)).catch(i.oe),this._containsData||this.createIndicatorImage(),this._options.noMouseWheelScroll||this._jqMainDiv.mousewheel(this._onMousewheel.bind(this)),this.resize(),this.withModel(this,function(){this._jqParent.append(this._jqMainDiv),this._jqMainDiv.on("mousedown",this._requestActive.bind(this)),this._jqMainDiv.on("touchstart",this._requestActive.bind(this))}),this._inited&&(null!==this._timeAxisWidget&&(this._timeAxisWidget.destroy(),this._timeAxisWidget=null),this._paneWidgets.length=0,this._update(new R(R.FULL_UPDATE)))},n.prototype._requestActive=function(){this._chartWidgetCollection&&this._chartWidgetCollection.activeChartWidget.setValue(this)},n.prototype._onMousewheel=function(t,e,i,n){var o,r,s,a,l;if((TradingView.onWidget()||!parent||parent===window||!parent.IS_DEMO_PAGE)&&this.model()&&!this.noScroll&&!this.model().timeScale().isEmpty())return o=t.pageX-5,r=this._paneWidgets[0].lhsPriceAxisWidget.size.w,s=this._timeAxisWidget.size.w,r&&(o=Math.max(0,o-r)),o=Math.min(o,s),a=p.enabled("right_bar_stays_on_scroll")?1:2*(o/s-.5),l=Math.min(1,Math.abs(n)),n>0?this.model().zoomIn(a,l):n<0&&this.model().zoomOut(a,l),i&&this.model().scrollChart(-80*i),!1},n.prototype.getStudyScriptingPkgVers=function(t){return this._metaInfoRepository.getStudyScriptingPkgVers()},n.prototype.setTimezone=function(t){t&&z(t)?this._properties.timezone.setValue(t):console.warn("Incorrect timezone: "+JSON.stringify(t))},n.prototype.refreshMarks=function(){this.model().barsMarksSources().forEach(function(t){t.refreshData()})},n.prototype.clearMarks=function(){this.model().barsMarksSources().forEach(function(t){t.clearMarks()})},n.prototype._init=function(){var t,e,i=this;this.model()&&this.model().mainSeries().clearData(),this.initColors(),this._makeDefaultGui(),t=function(){i._checkObsoleteTimezone(),i._chartSession&&i._chartSession.connected()&&this._model.restart(),this._content&&(this.initColors(),this._updateGui(),this.update());var t=i._model.mainSeries()
;t.marketStatus.subscribe(function(e){i.indicatorImage&&i._updateDataAndMarketStatus(e,t.status(),t.quoteData.update_mode_seconds)},{callWithLast:!0}),this._resizeHandler=function(){this._adjustSize(),this._model&&this._model.mainSeries().requestMoreData(),this.paint(),this.resizeSeriesControlUI(),this.checkCompactMode(),this.resizeIndicator()}.bind(this),this._resizeHandler(),this._jqParent.append(this._jqMainDiv),this._spinner&&(this._spinner.stop(),delete this._spinner),_("chrome_canvas_fix")&&navigator.userAgent.match(/windows.+chrome/i)&&$(window).on("visibilitychange:chart_"+this._guid,function(t,e){if(e){for(var n=0;n<i._paneWidgets.length;n++)i._paneWidgets[n].hardResetCanvas();i._timeaxiswidget&&i._timeaxiswidget.hardResetCanvas(),i.paint(new R(R.LIGHT_UPDATE))}}),$(window).on("keydown:chart_"+this._guid,function(t){27===t.which&&t.preventDefault()}),this._initBarsMarksSources(),this._activateSymbolSearchHotkeys(),this.model().timeScale().onScroll().subscribe(this,function(){this._onScroll.fire()}),this._inited=!0}.bind(this),e=this._makeDefaultModel(),void 0===e?t():e.then(t)},n.prototype._activateSymbolSearchHotkeys=function(){this.readOnly()||this._hideSymbolSearch||W()},n.prototype._checkObsoleteTimezone=function(){var t=this._properties.timezone.value();z(t)||this._properties.timezone.setValue(o(t))},n.prototype._initBarsMarksSources=function(){var t=this;this.withModel(this,function(){this.model().barsMarksSources().forEach(function(e){e.onNeedRepaint.subscribe(t,t.paint)})})},n.prototype.initESDTimelineWidget=function(){new ESDTimelineWidget(this)},n.prototype.initColors=function(){this._properties.paneProperties.background.listeners().subscribe(this,n.prototype.setBackgroundColor),this._properties.paneProperties.vertGridProperties.color.listeners().subscribe(this,n.prototype.redrawPanes),this._properties.paneProperties.horzGridProperties.color.listeners().subscribe(this,n.prototype.redrawPanes),this._properties.scalesProperties.lineColor.listeners().subscribe(this,n.prototype.setScaleLineColor),this._properties.scalesProperties.textColor.listeners().subscribe(this,n.prototype.setScaleTextColor)},n.prototype.paneWidgets=function(){return this._paneWidgets},n.prototype.paneByCanvas=function(t){for(var e=0;e<this._paneWidgets.length;e++)if(this._paneWidgets[e].canvas===t||this._paneWidgets[e].top_canvas===t)return this._paneWidgets[e];return null},n.prototype.paneByState=function(t){for(var e=0;e<this._paneWidgets.length;e++)if(this._paneWidgets[e]._state===t)return this._paneWidgets[e];return null},n.prototype.priceAxisByCanvas=function(t){var e,i,n;for(e=0;e<this._paneWidgets.length;e++)if(i=this._paneWidgets[e],n=i.priceAxisByCanvas(t))return n;return null},n.prototype.timeAxisByCanvas=function(t){return t===this._timeAxisWidget.canvas||t===this._timeAxisWidget.top_canvas?this._timeAxisWidget:null},n.prototype.properties=function(){return this._properties},n.prototype.emulateCriticalError=function(){this._chartSession.removeSeries("-1",null)},n.prototype.readOnly=function(){return this._readOnly},
n.prototype.onDisconnected=function(){return this._disconnected},n.prototype.onReconnectBailout=function(){return this._reconnectBailout},n.prototype.onConnected=function(){return this._connected},n.prototype.onRedrawPanes=function(){return this._redrawPanes},n.prototype.onScroll=function(){return this._onScroll},n.prototype.modelCreated=function(){return this._modelCreated},n.prototype.setResolution=function(t){var e,i;if(!this._model)return void this._properties.mainSeriesProperties.merge({interval:t});e=this._model.mainSeries().properties(),i=window.t("Change Resolution"),this._model.setResolutionProperty(e.interval,t,this,i)},n.prototype.getResolution=function(){return this._model?this._model.mainSeries().properties().interval.value():this._properties.mainSeriesProperties.interval.value()},n.prototype._addSymbol=function(t,e){var i=this.model(),n=i.studiesMetaData(),o="study_Overlay@tv-basicstudies",r=p.enabled("use_overrides_for_overlay")&&TradingView.defaultProperties[o]&&TradingView.defaultProperties[o].style,s=r||(i.mainSeries().properties().style.value()===d.STYLE_CANDLES?d.STYLE_BARS:d.STYLE_CANDLES),a={inputs:{symbol:t},style:s},l=n.filter(function(t){return"Overlay@tv-basicstudies"===t.id})[0];i.insertStudy(l,a,e)},n.prototype.addSymbol=function(t,e){var i=Array.prototype.slice.call(arguments),n=function(){this._addSymbol.apply(this,i)}.bind(this);this._options.isSymbolAvailable(t).then(function(t){t&&n()})},n.prototype.updateActions=function(){function t(){var t,e,i=studyTemplates.plainList("custom"),n=studyTemplates.plainList("default");l.applyStudyTemplate.subActions||(l.applyStudyTemplate.subActions=[]),t=l.applyStudyTemplate.subActions,t.splice(0,t.length),e=new C({text:$.t("Save Indicator Template As..."),statName:"Save"}),e.callbacks().subscribe(studyTemplates,studyTemplates.showSaveAsDialog),t.push(e,new x),i.length||n.length?(i.length&&($.each(i,function(e,i){function n(t){return function(){return studyTemplates.deleteStudyTemplate(t),this._parentMenu._parentMenuItem._parentMenu.destroy(),!1}}var o=new C({text:i,statName:"SetStudyTemplate"});o.callbacks().subscribe(studyTemplates,function(){this.applyTemplate(i)}),o.deleteButton={action:n(o.text)},t.push(o)}),n.length&&t.push(new x)),$.each(n,function(e,i){var n=new C({text:i,statName:"SetStudyTemplateFromDefaults"});n.callbacks().subscribe(studyTemplates,function(){this.applyTemplate(i)}),t.push(n)})):t.push(new C({text:window.t("No study templates saved"),enabled:!1}))}var e,i,n,o,r,s,a,l=this.actions(),c=this._model.dataSources(),h=!1,u=!1;for(e=0,i=c.length;e<i;e++)n=c[e],TradingView.isInherited(n.constructor,S)&&n.isUserDeletable()&&(h=!0),TradingView.isInherited(n.constructor,v)&&n.removeByRemoveAllStudies()&&(u=!0),TradingView.isInherited(n.constructor,b)&&(u=!0);this._readOnly||(l.paneRemoveAllStudies&&l.paneRemoveAllStudies.setEnabled(u),l.paneRemoveAllDrawingTools&&l.paneRemoveAllDrawingTools.setEnabled(h),l.paneRemoveAllStudiesDrawingTools&&l.paneRemoveAllStudiesDrawingTools.setEnabled(u||h)),window.studyTemplates&&(t(),
studyTemplates.refreshStudyTemplateList(t)),o=this,r=[],s=U,a=function(t){return t.id===o.model().model().properties().timezone.value()},s.forEach(function(t){if(!t.separator){var e=new C({text:t.title,checkable:!0,checked:a(t),statName:"SetTimeZone"});e.callbacks().subscribe(this,function(){o.model().setProperty(o.model().model().properties().timezone,t.id,"Changed Time Zone")}),r.push(e)}},this),l.applyTimeZone.subActions=r,l.addToWatchlist&&(l.addToWatchlist.text=window.t("Add {0} to Watchlist").format(this.getSymbol(!0))),l.addToTextNotes&&(l.addToTextNotes.text=window.t("Add Text Note for {0}").format(this.getSymbol(!0))),this.updateActionForIntradayOnly(l.sessionBreaks)},n.prototype.actions=function(){return this._actions||this._setActions(),this._actions},n.prototype._setActions=function(){var t,e,i,o,r,s,a,l,c,h,u,d,m,y,v,b,S,w,P,T,L,I,E,M,O,D,W,j,H,U,z,$,q,Y,G,X,J,Z,Q,tt,et,it,nt,ot,rt,st,at,lt,ct,ht,ut,dt,pt,_t,ft,mt=this,gt=[];if(!this._readOnly){for(gt=[new C({text:window.t("Eraser"),callbackContext:"eraser",statName:"Eraser"}),new x,new C({text:window.t("Trend Line"),callbackContext:"LineToolTrendLine",statName:"LineToolTrendLine"}),new C({text:window.t("Horizontal Line"),callbackContext:"LineToolHorzLine",statName:"LineToolHorzLine"}),new C({text:window.t("Vertical Line"),callbackContext:"LineToolVertLine",statName:"LineToolVertLine"}),new C({text:window.t("Arrow"),callbackContext:"LineToolArrow",statName:"LineToolArrow"}),new C({text:window.t("Ray"),callbackContext:"LineToolRay",statName:"LineToolRay"}),new C({text:window.t("Extended"),callbackContext:"LineToolExtended",statName:"LineToolExtended"}),new C({text:window.t("Parallel Channel"),callbackContext:"LineToolParallelChannel",statName:"LineToolParallelChannel"}),new x,new C({text:window.t("Pitchfork"),callbackContext:"LineToolPitchfork",statName:"LineToolPitchfork"}),new C({text:window.t("Schiff Pitchfork"),callbackContext:"LineToolSchiffPitchfork",statName:"LineToolSchiffPitchfork"}),new C({text:window.t("Pitchfan"),callbackContext:"LineToolPitchfan",statName:"LineToolPitchfan"}),new C({text:window.t("Gann Square"),callbackContext:"LineToolGannSquare",statName:"LineToolGannSquare"}),new C({text:window.t("Gann Fan"),callbackContext:"LineToolGannFan",statName:"LineToolGannFan"}),new C({text:window.t("Fib Retracement"),callbackContext:"LineToolFibRetracement",statName:"LineToolFibRetracement"}),new C({text:window.t("Trend-Based Fib Extension"),callbackContext:"LineToolTrendBasedFibExtension",statName:"LineToolTrendBasedFibExtension"}),new C({text:window.t("Fib Speed Resistance Fan"),callbackContext:"LineToolFibSpeedResistanceFan",statName:"LineToolFibSpeedResistanceFan"}),new C({text:window.t("Fib Time Zone"),callbackContext:"LineToolFibTimeZone",statName:"LineToolFibTimeZone"}),new C({text:window.t("Circle Lines"),callbackContext:"LineToolCircleLines",statName:"LineToolCircleLines"}),new C({text:window.t("Fib Circles"),callbackContext:"LineToolFibCircles",statName:"LineToolFibCircles"}),new C({text:window.t("Fib Speed Resistance Arcs"),
callbackContext:"LineToolFibSpeedResistanceArcs",statName:"LineToolFibSpeedResistanceArcs"}),new x,new C({text:window.t("Rectangle"),callbackContext:"LineToolRectangle",statName:"LineToolRectangle"}),new C({text:window.t("Ellipse"),callbackContext:"LineToolEllipse",statName:"LineToolEllipse"}),new C({text:window.t("Triangle"),callbackContext:"LineToolTriangle",statName:"LineToolTriangle"}),new C({text:window.t("Polyline"),callbackContext:"LineToolPolyline",statName:"LineToolPolyline"}),new C({text:window.t("Arc"),callbackContext:"LineToolArc",statName:"LineToolArc"}),new x,new C({text:window.t("Text",{context:"tool"}),callbackContext:"LineToolText",statName:"LineToolText"}),new C({text:window.t("Anchored Text"),callbackContext:"LineToolTextAbsolute",statName:"LineToolTextAbsolute"}),new C({text:window.t("Balloon"),callbackContext:"LineToolBalloon",statName:"LineToolBalloon"}),new C({text:window.t("Price Label"),callbackContext:"LineToolPriceLabel",statName:"LineToolPriceLabel"}),new x,new C({text:window.t("Elliott Wave Subminuette"),callbackContext:"LineToolElliottSubminuette",statName:"LineToolElliottSubminuette"}),new C({text:window.t("Elliott Wave Minor"),callbackContext:"LineToolElliottMinor",statName:"LineToolElliottMinor"}),new C({text:window.t("Elliott Wave Circle"),callbackContext:"LineToolElliottCircle",statName:"LineToolElliottCircle"}),new C({text:window.t("Elliott Minor Retracement"),callbackContext:"LineToolElliottMinorRetr",statName:"LineToolElliottMinorRetr"}),new C({text:window.t("Elliott Major Retracement"),callbackContext:"LineToolElliottMajorRetr",statName:"LineToolElliottMajorRetr"}),new x,new C({text:window.t("Brush"),callbackContext:"LineToolBrush",statName:"LineToolBrush"}),new x,new C({text:window.t("Forecast"),callbackContext:"LineToolPrediction",statName:"LineToolPrediction"})],mt=this,i=function(t){k.tool.setValue(t.callbackContext())},o=0;o<gt.length;o++)gt[o].callbacks().subscribe(null,i);t=new C({text:window.t("Scales Properties..."),statName:"ScalesProperties"}),e=new C({text:window.t("Timezone/Sessions Properties..."),statName:"TimezoneSessionsProperties"})}r=new C({text:window.t("Reset Chart"),shortcut:"Alt+R",statName:"ResetChart"}),r.callbacks().subscribe(this,this.GUIResetScales),s=new C({text:window.t("Undo"),shortcut:"ctrl+z"}),s.callbacks().subscribe(null,function(){K("GUI","Undo"),mt._model.undoHistory.undo()}),s.disable(),a=new C({text:window.t("Redo"),shortcut:"ctrl+y"}),a.callbacks().subscribe(null,function(){K("GUI","Redo"),mt._model.undoHistory.redo()}),a.disable(),mt.withModel(null,function(){mt._model.undoHistory.undoStack().onChange().subscribe(mt,mt.updateUndoRedo),mt._model.undoHistory.redoStack().onChange().subscribe(mt,mt.updateUndoRedo)}),l=new C({text:window.t("Loading")}),c=[l],h=new C({text:window.t("Color Theme"),subActions:c,statName:"ColorTheme"}),u=new C({text:window.t("TimeZone"),statName:"TimeZone"}),d=new C({text:window.t("Change Symbol..."),shortcut:window.t("Any Symbol"),doNotBindShortcut:!0,statName:"ChangeSymbol"}),
TVSettings.setValue("symboledit.dialog_last_entry",""),d.callbacks().subscribe(this,function(){N({callback:this.setSymbol.bind(this),ownerDocument:this._jqParent.prop("ownerDocument")})}),m=new C({text:window.t("Change Interval..."),shortcut:window.t("Any Number"),doNotBindShortcut:!0,statName:"ChangeInterval"}),m.callbacks().subscribe(this,function(){F({callback:function(t){A(t),B.interval.setValue(t)},ownerDocument:this._jqParent.prop("ownerDocument")})}),TradingView.onWidget()||(this._options.addToWatchlistEnabled&&(y=new C({text:window.t("Add To Watchlist"),shortcut:"Alt+W",statName:"AddToWatchlist"}),y.callbacks().subscribe(this,function(){var t,e,i;if(window.widgetbar){for(t=window.widgetbar.setPage("base"),i=0;i<t.widgets.length;i++)if("watchlist"===t.widgets[i].type){e=t.widgets[i].widgetObject;break}if(!e)return;e.addHighlight(this.getSymbol())}})),_("text_notes")&&(v=new C({text:window.t("Add To Text Notes"),shortcut:"Alt+N",statName:"AddToTextNotes"}),v.callbacks().subscribe(this,function(){var t=this;runOrSignIn(function(){TradingView.bottomWidgetBar&&(TradingView.bottomWidgetBar.toggleWidget("text_notes",!0),TradingView.bottomWidgetBar._widgets.text_notes.addNote(null,t.getSymbol(!0),t.getSymbol()))},{source:"Add text note in chart context menu"})}))),b=new C({text:window.t("Insert Study Template"),statName:"InserStudyTemplate"}),S=new C({shortcut:"Ctrl+Alt+Q",text:window.t("Reset Scale"),statName:"ResetScale"}),S.callbacks().subscribe(null,function(t){mt.model().resetTimeScale()}),w=new C({text:window.t("Insert Drawing Tool"),subActions:gt,statName:"InsertDravingTool"}),P=new C({text:window.t("Remove All Indicators"),statName:"RemoveAllIndicators"}),T=new C({text:window.t("Remove All Drawing Tools"),statName:"RemoveAllDrawingTools"}),L=new C({text:window.t("All Indicators And Drawing Tools"),statName:"RemoveAllIndicatorsAndDrawingTools"}),I=new C({text:window.t("Insert Indicator..."),shortcut:"/",statName:"InsertIndicator"}),E=new C({text:window.t("Script Editor..."),statName:"ScriptEditor"}),M=new C({text:window.t("Compare or Add Symbol..."),statName:"CompareOrAddSymbol"}),O=new C({text:window.t("Compare..."),statName:"Compare"}),D=new C({text:window.t("Objects Tree..."),statName:"ObjectsTree"}),W=new C({text:window.t("Properties..."),statName:"ChartProperties",callback:function(t,e){mt.showChartProperties()}}),j=new C({text:window.t("Lock/Unlock"),statName:"ToggleLockSelectedObject"}),j.callbacks().subscribe(this,n.prototype.toggleLockSelectedObject),H=new C({text:window.t("Hide"),statName:"HideSelectedObject"}),H.callbacks().subscribe(this,n.prototype.hideSelectedObject),p.enabled("property_pages")&&(U=new C({text:window.t("Format..."),statName:"EditSelectedObject"}),U.callbacks().subscribe(this,n.prototype.editSelectedObject)),z=new C({text:window.t("Source Code..."),statName:"OpenSelectedObjectSource"}),z.callbacks().subscribe(this,this.openSelectedObjectSource),$=new C({text:window.t("Left Axis"),checkable:!0,statName:"ToggleLeftAxis"}),
$.binder=new f($,this._properties.scalesProperties.showLeftScale,this.model(),window.t("Show Left Scale")),q=new C({text:window.t("Right Axis"),checkable:!0,statName:"ToggleRightAxis"}),q.binder=new f(q,this._properties.scalesProperties.showRightScale,this.model(),window.t("Show Right Scale")),this._properties.scalesProperties.showLeftScale.listeners().subscribe(this,n.prototype._updateScalesActions),this._properties.scalesProperties.showRightScale.listeners().subscribe(this,n.prototype._updateScalesActions),Y=new C({text:window.t("Scale Price Chart Only"),checkable:!0,statName:"ScalePriceChartOnly"}),Y.binder=new f(Y,this._properties.scalesProperties.scaleSeriesOnly,this.model(),window.t("Scale Price Chart Only")),G=this.model().model(),this._properties.scalesProperties.scaleSeriesOnly.listeners().subscribe(null,function(){G.recalculateAllPanes(),G.invalidate(new R(R.FULL_UPDATE))}),X=new C({text:window.t("Drawings Toolbar"),checkable:!0,statName:"ToggleDrawingToolbar"}),J=this._options.isDrawingToolbarVisible,J&&(J.subscribe(function(t){X.setChecked(t)},{callWithLast:!0}),X.callbacks().subscribe(null,function(){J.setValue(!J.value())})),Z=new C({text:window.t("Magnet Mode"),checkable:!0,statName:"ToggleMagnetMode"}),Z.binder=new f(Z,k.properties().magnet,this.model(),"Magnet"),Q=new C({text:window.t("Stay in Drawing Mode"),checkable:!0,statName:"ToggleStayInDrawingMode"}),Q.binder=new f(Q,k.properties().stayInDrawingMode,this.model(),window.t("Stay In Drawing Mode")),tt=new C({text:window.t("Sync drawings to all charts"),checkable:!0,statName:"ToggleSyncDrawings"}),tt.binder=new f(tt,k.properties().drawOnAllCharts,this.model(),"SyncDrawings"),et=new C({text:window.t("Lock All Drawing Tools"),checkable:!0,statName:"ToggleLockDrawings"}),et.binder=new f(et,k.lockDrawings(),this.model(),window.t("Lock drawings"),function(t){t||this.binder.setValue(!this.binder.value()),k.lockDrawings().setValue(this.binder.value())}.bind(et)),it=new C({text:window.t("Hide All Drawing Tools"),checkable:!0,statName:"ToggleHideAllDrawingTools"}),it.binder=new f(it,k.hideAllDrawings(),this.model(),window.t("Hide All Drawing Tools"),function(t){t||this.binder.setValue(!this.binder.value()),k.hideAllDrawings().setValue(this.binder.value())}.bind(it)),nt=new C({text:window.t("Hide Marks On Bars"),checkable:!0,statName:"ToggleHideMarksOnBars"}),nt.binder=new f(nt,k.hideMarksOnBars(),this.model(),window.t("Hide Marks On Bars"),function(t){t||this.binder.setValue(!this.binder.value()),k.hideMarksOnBars().setValue(this.binder.value())}.bind(nt)),ot=new C({text:window.t("Extended Hours"),checkable:!0,statName:"ToggleExtendedHours"}),ot.binder=new f(ot,this.model().mainSeries().properties().extendedHours,this.model(),window.t("Change Extended Hours")),rt=new C({text:window.t("Symbol Last Value"),checkable:!0,checked:!1,statName:"ToggleSymbolLastValue"}),rt.binder=new f(rt,this.properties().scalesProperties.showSeriesLastValue,this.model(),window.t("Show Symbol Last Value")),st=new C({text:window.t("Symbol Prev. Close Value"),checkable:!0,
checked:!1,statName:"ToggleSymbolPrevCloseValue"}),st.binder=new f(st,this.properties().scalesProperties.showSeriesPrevCloseValue,this.model(),window.t("Show Symbol Previous Close Value")),this.model().mainSeries().onRestarted().subscribe(this,function(){this.updateActionForIntradayOnly(st)}),at=new C({text:window.t("Symbol Labels"),checkable:!0,checked:!1,statName:"ToggleSymbolLabels"}),at.binding=new f(at,this.properties().scalesProperties.showSymbolLabels,this.model(),"Undo Show Symbol Labels"),lt=new C({text:window.t("Indicator Last Value"),checkable:!0,checked:!1,statName:"ToggleStudyLastValue"}),lt.binder=new f(lt,this.properties().scalesProperties.showStudyLastValue,this.model(),window.t("Show Indicator Last Value")),ct=new C({text:window.t("Indicator Labels"),checkable:!0,checked:!1,statName:"ToggleIndicatorsLabels"}),ct.binding=new f(ct,this.properties().scalesProperties.showStudyPlotLabels,this.model(),"Undo Show Indicator Labels"),ht=new C({text:window.t("Countdown"),checkable:!0,checked:!1,statName:"ToggleCountdown"}),ht.binder=new f(ht,this.model().mainSeries().properties().showCountdown,this.model(),window.t("Show Countdown")),ut=null,this._options.goToDateEnabled&&(ut=new C({text:window.t("Go to Date..."),shortcut:"Alt+G",statName:"GoToDate"}),ut.callbacks().subscribe(null,function(){var t=mt._chartWidgetCollection.activeChartWidget.value();g(t.model())})),dt=new C({text:window.t("Symbol Info..."),checkable:!1,statName:"SymbolInfo"}),dt.callbacks().subscribe(null,function(){var t=mt.model().mainSeries().symbol(),e=mt.model().mainSeries().symbolInfo();V(t,{symbolInfo:e})}),this._actions={chartProperties:W,timeScaleReset:S,chartReset:r,compareOrAdd:M,compare:O,paneObjectTree:D,insertIndicator:I,insertDrawingTool:w,applyColorTheme:h,applyStudyTemplate:b,symbolSearch:d,showSymbolInfoDialog:dt,changeInterval:m,seriesHide:H,studyHide:H,lineToggleLock:j,lineHide:H,showLeftAxis:$,showRightAxis:q,scaleSeriesOnly:Y,drawingToolbarAction:X,magnetAction:Z,stayInDrawingModeAction:Q,syncModeAction:tt,lockDrawingsAction:et,hideAllDrawingsAction:it,hideAllMarks:nt,applyTimeZone:u,extendedHours:ot,showCountdown:ht,showSeriesLastValue:rt,showSeriesPrevCloseValue:st,showSymbolLabelsAction:at,showStudyLastValue:lt,showStudyPlotNamesAction:ct,undo:s,redo:a,viewSourceCode:z},t&&(this._actions.scalesProperties=t),e&&(this._actions.tmzProperties=e),y&&(this._actions.addToWatchlist=y),!TradingView.onWidget()&&p.enabled("text_notes")&&_("text_notes")&&(this._actions.addToTextNotes=v),null!==ut&&(this._actions.gotoDate=ut),p.enabled("charting_library_base")||(this._actions.scriptEditor=E),this.createSessionBreaksActions(),this.readOnly()||(pt=new C({text:window.t("Remove"),shortcut:"Del",statName:"RemoveSelectedObject"}),pt.callbacks().subscribe(this,function(){var t;this._chartWidgetCollection&&(t=this._chartWidgetCollection.activeChartWidget.value()),t||(t=this),t.removeSelectedSource()}),_t=new C({text:window.t("Stop syncing drawing"),statName:"StopSyncingDrawing"}),_t.callbacks().subscribe(this,function(){var t
;this._chartWidgetCollection&&(t=this._chartWidgetCollection.activeChartWidget.value()),t||(t=this),t.unlinkSelectedLine()}),ft=new C({text:window.t("Sync drawing to all charts"),statName:"SyncDrawingToAllCharts"}),ft.callbacks().subscribe(this,function(){var t;this._chartWidgetCollection&&(t=this._chartWidgetCollection.activeChartWidget.value()),t||(t=this),t.copyLineToOtherCharts()}),this._actions.insertDrawingTool=w,this._actions.paneRemoveAllStudies=P,this._actions.paneRemoveAllDrawingTools=T,this._actions.paneRemoveAllStudiesDrawingTools=L,this._actions.seriesRemove=pt,this._actions.studyRemove=pt,this._actions.lineRemove=pt,this._actions.lineUnlink=_t,this._actions.lineCopyToCharts=ft,p.enabled("property_pages")&&(this._actions.format=U),this._actions.lockDrawingsAction=et,this._actions.hideAllDrawingsAction=it,this._actions.hideAllMarks=nt,this._actions.paneRemoveAllStudies.callbacks().subscribe(this,n.prototype.removeAllStudies),this._actions.paneRemoveAllDrawingTools.callbacks().subscribe(this,n.prototype.removeAllDrawingTools),this._actions.paneRemoveAllStudiesDrawingTools.callbacks().subscribe(this,n.prototype.removeAllStudiesDrawingTools)),this._actions.paneObjectTree.callbacks().subscribe(this,n.prototype.showObjectsTreeDialog),this._actions.chartProperties.callbacks().subscribe(this,n.prototype.showChartProperties),this._actions.insertIndicator.callbacks().subscribe(this,n.prototype.showIndicators),this._actions.scriptEditor&&this._actions.scriptEditor.callbacks().subscribe(this,n.prototype.showScriptEditor),this._actions.compareOrAdd.callbacks().subscribe(this,n.prototype.showCompareOrAdd),this._actions.compare.callbacks().subscribe(this,n.prototype.showCompareOrAdd),this._actions.scalesProperties&&this._actions.scalesProperties.callbacks().subscribe(this,n.prototype.showScalesProperties),this._actions.tmzProperties&&this._actions.tmzProperties.callbacks().subscribe(this,n.prototype.showTimezoneProperties),this._updateScalesActions()},n.prototype.executeActionById=function(t){if("takeScreenshot"===t)return console.warn('Action "takeScreenshot" is deprecated. Use method "takeScreenshot" instead'),void this._chartWidgetCollection.takeScreenshot();if("lockDrawingsAction"===t&&console.warn('Action "lockDrawingsAction" is deprecated. Use method "lockAllDrawingTools" instead'),"hideAllDrawingsAction"===t&&console.warn('Action "hideAllDrawingsAction" is deprecated. Use method "hideAllDrawingTools" instead'),t in this._actions){var e=this._actions[t];e.checkable&&e.setChecked(!e.checked),this._actions[t].callbacks().fire(e)}else console.warn("Unknown action id: "+t)},n.prototype.getCheckableActionState=function(t){if("lockDrawingsAction"===t)return console.warn('Action "lockDrawingsAction" is deprecated. Use method "lockAllDrawingTools" instead'),null;if("hideAllDrawingsAction"===t)return console.warn('Action "hideAllDrawingsAction" is deprecated. Use method "hideAllDrawingTools" instead'),null;if(t in this._actions){var e=this._actions[t];if(e.checkable)return e.checked
;console.warn("Action "+t+" has no state")}else console.warn("Unknown action id: "+t);return null},n.prototype._updateScalesActions=function(){if(this._actions){for(var t=0;t<this._paneWidgets.length;t++)this._paneWidgets[t].updateScalesVisibility();this._timeAxisWidget.updatePriceScalesVisibility()}},n.prototype.removeAllStudies=function(){this._model.removeAllStudies()},n.prototype.removeAllDrawingTools=function(){this._model.removeAllDrawingTools()},n.prototype.removeAllStudiesDrawingTools=function(){this._model.removeAllStudies(),this._model.removeAllDrawingTools()},n.prototype.model=function(){return this._model},n.prototype.defaultSymbol=function(){return this._defSymbol},n.prototype.connect=function(){this._handler=function(t){this._onData(t)}.bind(this),this._boundOnChartSessionIsConnectedChanged=this._onChartSessionIsConnectedChanged.bind(this),this._chartSession.isConnected().subscribe(this._boundOnChartSessionIsConnectedChanged),this._chartSession.criticalError().subscribe(this,this._onChartSessionCriticalError),this._chartSession.connect(this._handler)},n.prototype.finishInitWithoutConnect=function(){this._chartSession.disable(),this._init(),this.chartWidgetInitialized.fire()},n.prototype.reconnect=function(){this._chartSession.disconnect(),this._chartSession.connect()},n.prototype.update=function(){if(this._model){for(var t=0;t<this._paneWidgets.length;t++)this._paneWidgets[t].update();this._timeAxisWidget.update()}},n.prototype.paint=function(t){t||(t=new R(R.FULL_UPDATE));for(var e=0;e<this._paneWidgets.length;e++)this._paneWidgets[e].paint(t.invalidateForPane(e),!1);this._timeAxisWidget&&this._timeAxisWidget.paint(t.fullInvalidation()),this._redrawPanes.fire()},n.prototype._makeDefaultGui=function(){this._makeChartWidget(),this._makeLoadingScreen(),this._model&&this._makePaneWidgetsAndSeparators(),this._makeTimeAxisWidget(),this._adjustSize(),this._updateScalesActions(),$(this._elMainTable).selectable(!1),this.update(),this.paint()},n.prototype.widget=function(){return this._jqMainDiv},n.prototype.restoreState=function(t,e){this._adjustSize();this._model.restoreState(this._content,e);this._setActions()},n.prototype.redrawPanes=function(t){for(var e=0;e<this._paneWidgets.length;e++)this._paneWidgets[e].paint();this._redrawPanes.fire()},n.prototype.setBackgroundColor=function(t){this.scaleBackgroundColor=t.value();for(var e=0;e<this._paneWidgets.length;e++)this._paneWidgets[e].paint(),this._paneWidgets[e].setCursorForTool();this.update(),this.paint()},n.prototype.setScaleLineColor=function(t){this.scaleLineColor=t.value(),$.each(this._paneSeparators,function(){this.update()}),this.update(),this.paint()},n.prototype.setScaleTextColor=function(t){this.scaleTextColor=t.value(),this.update(),this.paint()},n.prototype.setTimingsMeter=function(t){this._timingsMeter=t,this._updateTimingsMeterState()},n.prototype._updateTimingsMeterState=function(){var t=this._options.visible.value();null!==this._timingsMeter&&(t?this._timingsMeter.startCollect():this._timingsMeter.stopCollect())},
n.prototype._update=function(t){var e,i=t?t.fullInvalidation():R.FULL_UPDATE;if(null!==this._timingsMeter&&this._timingsMeter.startDraw(i),i===R.FULL_UPDATE){for(this._model?this._updateGui():this._adjustSize(),this._timeAxisWidget.update(),e=0;e<this._paneWidgets.length;e++)this._paneWidgets[e]._state=this._model.panes()[e],null!==this._paneWidgets[e].statusWidget()&&this._paneWidgets[e].statusWidget().updateLayout();this._dataWindowWidget&&this._dataWindowWidget.fullUpdate()}else if(i===R.LIGHT_UPDATE){for(this._timeAxisWidget.update(),e=0;e<this._paneWidgets.length;e++)null!==this._paneWidgets[e].statusWidget()&&this._paneWidgets[e].statusWidget().update();this._dataWindowWidget&&this._dataWindowWidget.update()}else if(i===R.UPDATE_CURSOR_ONLY){for(e=0;e<this._paneWidgets.length;e++)null!==this._paneWidgets[e].statusWidget()&&this._paneWidgets[e].statusWidget().update();this._dataWindowWidget&&this._dataWindowWidget.update()}this.paint(t),null!==this._timingsMeter&&this._timingsMeter.stopDraw()},n.prototype._createVolumeIfNeeded=function(){var t=p.enabled("create_volume_indicator_by_default")&&this._options.addVolume,e=!this._content,i=p.enabled("charting_library_base"),n=p.enabled("create_volume_indicator_by_default_once"),o=this._content&&!this._content.loading;t&&(e||i&&o&&!n)&&this._model.mainSeries().onSymbolResolved().subscribe(this,function(){var t=this;setTimeout(function(){var e,i,n,o,r=t._model.model().mainSeries().symbolInfo();r&&(e=!r.has_no_volume,!t.containsVolume()&&e?(i=et.factoryDefaults("chartproperties.volumePaneSize"),n={paneSize:i},p.enabled("hide_volume_ma")&&(n.styles={vol_ma:{visible:!1}}),t.insertStudy("Volume@tv-basicstudies",!1,p.enabled("volume_force_overlay"),void 0,n)):!e&&t.containsVolume()&&(o=t.model().dataSources().filter(function(t){return t instanceof v&&"Volume"===t.metaInfo().shortId})[0],t._model.model().removeSource(o)))},0)},n)},n.prototype._makeDefaultModel=function(){function t(){var t={readOnly:c.readOnly(),isSnapshot:!!c._containsData,preserveBarSpacing:c._onWidget};return void 0!==c._options.watermarkEnabled&&(t.watermarkEnabled=c._options.watermarkEnabled),void 0!==c._options.crossHairMenuEnabled&&(t.crossHairMenuEnabled=c._options.crossHairMenuEnabled),l(c._chartSession,function(t){if(!(t instanceof R))throw Error("Invalid mask");c._invalidateMask?c._invalidateMask.merge(t):c._invalidateMask=t,c._draw_planned||(c._draw_planned=!0,c._options.visible.when(function(){var t=!document.hidden,i=c.screen&&c.screen.isShown();null!==c._timingsMeter&&t&&!i&&c._timingsMeter.startWaitingDraw(),c._drawRafId=c._jqParent.prop("ownerDocument").defaultView.requestAnimationFrame(e)}))},c._properties,o,c._metaInfoRepository,c,c._options.undoHistory,c._options.barsMarksContainersFactory,t)}function e(){c._draw_planned=!1,c._drawRafId=0,c._inLoadingState||c._invalidateMask&&(c._invalidateMask=c._update(c._invalidateMask))}var i,o,r,s,a,c=this;if(this._content&&this._content.timeScale.points&&(i=this._content.timeScale.points.items[0],o={startDate:i}),
!this._metaInfoRepository.getInternalMetaInfoArray())throw Error("Cannot create chart model: studies metainfo is absent");if(p.enabled("lean_chart_load")?this._model=this._model||t():this._model=t(),this._createVolumeIfNeeded(),r=function(){var t,e,i;this._model.onTagsChanged().subscribe(this,n.prototype.onModelTagsChanged),this._updateGui(),this._modelCreated.fire(this._model),this._tagsChanged.fire(),t=this._model.mainSeries(),this._defTimeframe&&t.setDefaultTimeframe(this._defTimeframe),this._model.lineCancelled().subscribe(this,this.onLineCancelled),t.onSymbolNotPermitted().subscribe(null,function(e){t.properties().symbol.setValue(e)}),t.properties().style.unsubscribe(this,this._onChartStyleChanged),t.properties().style.subscribe(this,this._onChartStyleChanged),t.onCompleted().subscribe(this,function(){this._addPerfMark("SeriesCompleted")},!0),t.onBarReceived().subscribe(this,function(){this._addPerfMark("SeriesFirstDataReceived")},!0),e=this._options,e.handleSessionErrors&&(t.chartTypeNotPermitted.subscribe(null,function(){t.properties().interval.setValue("D")}),t.intradaySpreadNotPermitted.subscribe(null,function(){t.properties().interval.setValue("D")}),t.customIntervalNotPermitted.subscribe(null,function(){t.properties().interval.setValue(E(O(t.properties().style.value())))}),t.intradayExchangeNotPermitted.subscribe(null,function(){t.properties().interval.setValue("D")}),c._options.muteSessionErrors||t.onExtendedHoursNotPermitted().subscribe(null,function(){})),this._options.handleSessionErrors&&(t.requestingIntradayWhenNotSupported.subscribe(null,function(){t.properties().interval.setValue("D"),c._options.muteSessionErrors}),t.requestingResolutionWhenNotSupported.subscribe(null,function(e){t.properties().interval.setValue(e)})),this._readOnly||this._onWidget||!(p.enabled("tv_production")||p.enabled("cqg_terminal")||p.enabled("trading_terminal"))||(i=P())&&i.registerChartWidget(c)}.bind(this),this._content){if(this.restoreState(this._content,this._containsData),p.enabled("chart_content_overrides_by_defaults"))return this._defSymbol&&(s=this.setSymbol(this._defSymbol),this.model().model().setPriceAutoScaleForAllMainSources()),a=function(){return this._defInterval&&this.setResolution(this._defInterval),void 0!==this._defStyle&&this.setSeriesStyle(this._model.mainSeries(),this._defStyle),r()}.bind(this),void 0===s?a():s.then(a)}else this._setActions();return r()},n.prototype._onChartStyleChanged=function(){K("Chart","Chart Style "+this._model.mainSeries().getStyleShortName().toUpperCase())},n.prototype._updateGui=function(){this._model&&(this._makePaneWidgetsAndSeparators(),this._makeTimeAxisWidget(),$(this._elMainTable).selectable(!1),this._adjustSize())},n.prototype.setVisibleTimeRange=function(t,e,i){this._chartSession.setVisibleTimeRange(this._model.mainSeries(),t,e,i)},n.prototype._makeChartWidget=function(){},n.prototype._makeLoadingScreen=function(){if(p.enabled("lean_chart_load")){if(this.screen)return;this.screen=new n.LoadingScreen(this,this._jqParent)
}else this.screen=new n.LoadingScreen(this,this._jqMainDiv)},n.prototype._setSymbol=function(t,e){if(this._model){var i=this._model.mainSeries();if(!e&&i.symbolSameAsCurrent(t)&&!p.enabled("same_data_requery"))return;this._model.setSelectedSource(null),this._model.setScreenChartProperty(i.properties().symbol,t,this,"Change Symbol",p.enabled("same_data_requery"))}else this._properties.mainSeriesProperties.merge({symbol:t})},n.prototype.setSymbol=function(t,e){return this._setSymbol.apply(this,arguments)},n.prototype.getSymbol=function(t){var e;return e=this._model?this._model.mainSeries().properties():this._properties.mainSeriesProperties,e?t&&e.shortName&&e.shortName.value()?e.shortName.value():e.symbol.value():""},n.LoadingScreen=function(t,e){this._cw=t,this.$element=$('<div class="chart-loading-screen">'),this.$shield=$('<div class="chart-loading-screen-shield">').appendTo(this.$element),this.$element.appendTo(e),this._showed=!1,this._cw.withModel(this,this._connectToModel)},n.LoadingScreen.prototype._connectToModel=function(){this._cw.model().mainSeries().onDataLoaded().subscribe(this,function(t){switch(t.method){case"symbol_error":t.params[1]!==d.PERMISSION_DENIED&&this.hide();break;case"series_error":p.enabled("hide_loading_screen_on_series_error")&&this.hide();break;case"series_completed":this.hide()}})},n.LoadingScreen.prototype.show=function(){this._cw._inLoadingState=!0,this._showed||(this._showed=!0,this._show())},n.LoadingScreen.prototype._show=function(){var t=this._cw.properties().paneProperties.background.value();this.$shield.css("background",t),this.$element.addClass("fade")},n.LoadingScreen.prototype.hide=function(){delete this._cw._inLoadingState,this._showed&&this._hide()},n.LoadingScreen.prototype._hide=function(){this._showed=!1,this.$element.removeClass("fade")},n.LoadingScreen.prototype.$canvas=null,n.LoadingScreen.prototype.context=null,n.LoadingScreen.prototype.isShown=function(){return this._showed},n.prototype.unsetActivePaneWidget=function(){this.activePaneWidget=!1},n.prototype.setActivePaneWidget=function(t){this.activePaneWidget=t},n.prototype.isMaximizedPane=function(){return!!this._maximizedPaneWidget},n.prototype.toggleMaximizePane=function(t){if(!(this._paneWidgets.length<2)){this._maximizedPaneWidget?(this._maximizedPaneWidget.state().setMaximized(!1),this._maximizedPaneWidget=null,this._paneSeparators.forEach(function(t){t.show()})):(this._maximizedPaneWidget=t,this._maximizedPaneWidget.state().setMaximized(!0),this._paneSeparators.forEach(function(t){t.hide()}));for(var e=this._paneWidgets.length;e--;)this._paneWidgets[e].updateControls();this._adjustSize(),this.updateIndicatorImagePosition(),this._updateCrossHairPositionIfNeeded()}},n.prototype._makePaneWidgetsAndSeparators=function(){var t,e,i,n,o=this._model.panes(),r=o.length,l=this._paneWidgets.length;for(t=r;t<l;t++)e=this._paneWidgets.pop(),e.destroy(),(i=this._paneSeparators.pop())&&i.destroy();for(t=l;t<r;t++)e=new s(this,o[t],{contextMenuEnabled:this._options.paneContextMenuEnabled,
verticalTouchScroll:this._options.verticalTouchScroll,priceScaleContextMenuEnabled:this._options.priceScaleContextMenuEnabled,symbolMarkerEnabled:this._options.symbolMarkerEnabled,legendWidgetEnabled:this._options.legendWidgetEnabled,legendWidget:this._options.legendWidget,propertyPagesEnabled:this._options.propertyPagesEnabled,sourceSelectionEnabled:this._options.sourceSelectionEnabled}),e.onMouseLeave=this.unsetActivePaneWidget.bind(this),e.onMouseEnter=this.setActivePaneWidget.bind(this),this._paneWidgets.push(e),t>0&&(i=new a(this,t-1,t),this._paneSeparators.push(i),this._timeAxisWidget?i.jqRow.insertBefore(this._timeAxisWidget.jqRow):i.jqRow.appendTo(this._elMainTable)),this._timeAxisWidget?e.jqRow.insertBefore(this._timeAxisWidget.jqRow):e.jqRow.appendTo(this._elMainTable);for(t=0;t<r;t++)n=o[t],e=this._paneWidgets[t],e.state()!==n&&e.setState(n);for(t=r;t--;)this._paneWidgets[t].updateControls()},n.prototype._makeTimeAxisWidget=function(){this._timeAxisWidget||(this._timeAxisWidget=new h(this,this._options.timeScaleWidget),this._timeAxisWidget.jqRow.appendTo(this._elMainTable))},n.prototype.insertStudyOrShowDialog=function(t,e,n){var o,r,s,a;this.isSymbolicStudy(t)?(o=et.defaults("study_"+t.id).description,r=this.model(),i.e(27).then(function(s){(0,i(943).showConfirmSymbolInputDialog)(function(i){var n={inputs:{}};n.inputs[t.symbolInputId()]=i,r.insertStudy(t,n,!1,e)},o,n)}.bind(null,i)).catch(i.oe)):this.hasConfirmInputs(t)?(o=et.defaults("study_"+t.id).description,i.e(23).then(function(){i(815).show(this,t,{title:o,callback:function(i){this.model().insertStudy(t,i,!1,e)}.bind(this)})}.bind(this).bind(null,i)).catch(i.oe)):v.isPointsBasedStudy(t.id)?(s=v.lineToolNameForPointsBasedStudy(t.id),k.tool.setValue(s)):(a="Volume@tv-basicstudies"===t.id,this.insertStudy(t.id,!0,a,null,null,e))},n.prototype.hasConfirmInputs=function(t){var e,i,n=t.inputs;if(void 0===n)return!1;for(e=0;e<n.length;++e)if(i=n[e],void 0!==i.confirm&&i.confirm)return!0;return!1},n.prototype.isSymbolicStudy=function(t){switch(t.id){case"Overlay@tv-basicstudies":case"CorrelationCoefficient@tv-basicstudies":case"Correlation Coeff@tv-basicstudies":return!0;default:return!1}},n.prototype.isPointsBasedStudy=function(t){return v.isPointsBasedStudy(t.id)},n.prototype.insertStudy=function(t,e,i,n,o,s){var a,l=Y.findStudyMetaInfo(this._metaInfoRepository.getInternalMetaInfoArray(),t);l=TradingView.clone(l),r(!l.isTVScriptStubToCompile,"MetaInfo stub is unexpected here!"),a=n?{inputs:n}:{},o&&(a=$.extend(a,o)),e?this._model.insertStudy(l,a,i,s):this._model.model().insertStudy(l,a,i,s)},n.prototype.insertStudyStub=function(t){return this.model().insertStudyStub(t)},n.prototype.removeStudyStub=function(t){return this.model().removeStudyStub(t)},n.prototype.getPriceAxisMaxWidthByName=function(t){return"left"===t?this.maxLhsPriceAxisWidth:this.maxRhsPriceAxisWidth},n.prototype.getPriceAxisWidthChangedByName=function(t){return"left"===t?this.lhsPriceAxisWidthChanged:this.rhsPriceAxisWidthChanged},n.prototype._adjustSize=function(){
var t,e,i,n,o,r,s,l,h=this,u=0,d=0,p=0;$.each(this._paneWidgets,function(){h._maximizedPaneWidget&&h._maximizedPaneWidget!==this||(u=Math.max(this.lhsPriceAxisWidget.optimalWidth(),u),d=Math.max(this.rhsPriceAxisWidget.optimalWidth(),d),p+=this.stretchFactor())}),t=this._width(),e=this._height(),i=t-u-d,n=this._paneSeparators.length,o=a.HEIGHT,r=this._timeAxisWidget.optimalHeight(),s=e-o*n-r,l=s/p,$.each(this._paneWidgets,function(t){h._model&&(this._state=h._model.panes()[t]);var e=h._maximizedPaneWidget?h._maximizedPaneWidget===this?s:0:Math.max(Math.round(this.stretchFactor()*l),2);this.setPriceAxisSize(c.LHS,new J(u,e)),this.setPriceAxisSize(c.RHS,new J(d,e)),this.setSize(new J(i,e)),h._model&&this.state()&&h._model.setPaneHeight(this.state(),e)}),this._timeAxisWidget.setSize(new J(i,r),new J(u,r),new J(d,r)),this._model&&this._model.setWidth(i),this._controlBarNavigation&&this._controlBarNavigation.updatePosition(i),this.maxLhsPriceAxisWidth!==u&&(this.maxLhsPriceAxisWidth=u,this.lhsPriceAxisWidthChanged.fire(u)),this.maxRhsPriceAxisWidth!==d&&(this.maxRhsPriceAxisWidth=d,this.rhsPriceAxisWidthChanged.fire(d))},n.prototype._onChartSessionIsConnectedChanged=function(t){t?this._onConnection():this._onDisconnect()},n.prototype._onChartSessionCriticalError=function(t,e){this._disconnected.fire(!0)},n.prototype._onData=function(t){switch(t.method){case"reconnect_bailout":this._reconnectBailout.fire();break;default:this._model.onData(t)}},n.prototype._onConnection=function(){this._online=!0,this._model?(this._model.restart(),this._updateGui(),this.update(),this.paint(),this._connected.fire()):this.requestMetadata()},n.prototype._onDisconnect=function(){this._model&&this._model.disconnect(),this._online=!1,this.update(),this.paint(),this._disconnected.fire()},n.prototype._applyStudiesOverrides=function(){Y.overrideDefaults(this._metaInfoRepository.getInternalMetaInfoArray())},n.prototype.requestMetadata=function(){this._addPerfMark("RequestMetadataStart"),this._metaInfoRepository.requestMetaInfo().then(function(){this._addPerfMark("RequestMetadataEnd"),this._inited?this.model().model().setStudiesMetaData(this._metaInfoRepository.getInternalMetaInfoArray(),this._metaInfoRepository.getMigrations()):(this._init(),this.chartWidgetInitialized.fire(),p.enabled("charting_library_base")||it.logDebug("initialized"))}.bind(this))},n.prototype.studiesMetaData=function(){return this._model.studiesMetaData()},n.prototype.getTimeScale=function(){return this._timeAxisWidget},n.prototype.chartWidgetCollection=function(){return this._chartWidgetCollection},n.prototype.setSeriesStyle=function(t,e){this._model.setProperty(t.properties().style,e)},n.prototype.showObjectsTreeDialog=function(t){var e=this;i.e(8).then(function(n){new(0,i(944).ObjectTreeDialog)({chartWidget:e,activeTab:t},e._model).show()}.bind(null,i)).catch(i.oe)},n.prototype.showChartProperties=function(t){if(!p.enabled("show_chart_property_page"))return Promise.resolve()
;t&&t.text===window.t("Properties...")&&TVSettings.setValue("properties_dialog.active_tab.chart",window.t("Style"));var e=this;return new Promise(function(t){m(e._model.mainSeries(),e._model,{doNotCloseOnBgClick:!0}).then(function(e){return t(e.isVisible()?e._dialog:null),e}).then(function(t){if(t.isVisible()){var i=function(){t.hide(),e._chartWidgetCollection.activeChartWidget.unsubscribe(i)};e._chartWidgetCollection.activeChartWidget.subscribe(i)}})})},n.prototype.showScriptEditor=function(){TradingView.bottomWidgetBar&&TradingView.bottomWidgetBar.activateScriptEditorTab()},n.prototype.showCompareOrAdd=function(){this._chartWidgetCollection.showAddCompareDialog()},n.prototype.showIndicators=function(t){if(window.studyMarket)return window.studyMarket.isVisible()?void window.studyMarket.hide():(window.studyMarket.show(t),window.studyMarket)},n.prototype.showScalesProperties=function(t){m(this._model.mainSeries(),this._model,{selectScales:!0})},n.prototype.showTimezoneProperties=function(){m(this._model.mainSeries(),this._model,{selectTmz:!0})},n.prototype.removeSelectedSource=function(){var t=this,e=t._model.selectedSource();!e||e===t._model.mainSeries()||e===t._model.lineBeingCreated()||e instanceof u||(e.hasAlert.value()&&e.isUserDeletable()?Z({type:"modal",content:window.t("This drawing is used in alert. If you remove the drawing, the alert will be also removed. Do you want to remove the drawing anyway?")}).then(function(e){e.on("action:yes",function(e){t._model.removeSelectedSource(),e.close()}),e.open()}):e instanceof v&&e.hasChildren()?showDeleteStudyTreeConfirm(t._model.removeSelectedSource.bind(t._model)):t._model.removeSelectedSource())},n.prototype.unlinkSelectedLine=function(){var t=this._model.selectedSource();t instanceof S&&this._model.unlinkLine(t)},n.prototype.copyLineToOtherCharts=function(){var t=this._model.selectedSource();t instanceof S&&this._model.copyToOtherCharts(t)},n.prototype.hideSelectedObject=function(){var t=this._model.selectedSource();t&&this._model.setProperty(t.properties().visible,!1,"Hide "+t.title())},n.prototype.toggleLockSelectedObject=function(){var t,e=this._model.selectedSource();e&&(t=e.properties().frozen.value(),this._model.setProperty(e.properties().frozen,!t,(t?window.t("Unlock"):window.t("Lock"))+" "+e.title()))},n.prototype.editSelectedObject=function(t){var e=this._model.selectedSource();e&&m(e,this._model)},n.prototype.openSelectedObjectSource=function(t){},n.prototype.resetPriceAxisOptimalWidth=function(t){$.each(this._paneWidgets,function(){this.resetPriceAxisOptimalWidth(t)}),this._redrawPanes.fire()},n.prototype.adjustPriceAxisWidth=function(t){this.resetPriceAxisOptimalWidth(t),this._adjustSize()},n.prototype.setPriceAxisVisible=function(t,e){$.each(this._paneWidgets,function(){this.setPriceAxisVisible(t,e)}),this._timeAxisWidget.setStubVisible(t,e),this._adjustSize(),this._redrawPanes.fire()},n.prototype.setTimeAxisVisible=function(t){this._timeAxisWidget.setVisible(t),this._adjustSize()},n.prototype.isTextTool=function(t){switch(t){case"LineToolBalloon":
case"LineToolText":case"LineToolTextAbsolute":case"LineToolCallout":case"LineToolNote":case"LineToolNoteAbsolute":return!0}return!1},n.prototype.tags=function(){return this._model?this._model.calculateDefaultTags():[]},n.prototype.state=function(t,e){return this._model.state(t,e)},n.prototype.asyncState=function(t){return this._model.asyncState(t)},n.prototype.metaInfo=function(){var t=this._metaInfo;return this._model&&(t.systemTags=this._model.calculateDefaultTags()),t},n.prototype.image=function(){var t,e,i,n,o,r,s,a,l,c=document.createElement("canvas"),h=c.getContext("2d"),u=0,d=this._timeAxisWidget.size.h,p=this.properties().scalesProperties.lineColor.value();for(e=0;e<this._paneWidgets.length;e++)(t=this._paneWidgets[e])&&t.state()&&(t.state().recalculate(!0),0===e&&(u=t.lhsPriceAxisWidget.size.w+t.size.w+t.rhsPriceAxisWidget.size.w),d+=t.size.h);for(d+=this._paneWidgets.length-1,this._update(),i=25,n=5,c.width=u+2*n,c.height=d+i+2*n,h.fillStyle="#F2F5F8",h.fillRect(0,0,c.width,c.height),o=i+n,r=n,s=this.mainSeriesQuotesAndMetainfo(),s.ohlc&&(a="{0} O:{1} H:{2} L:{3} C:{4}".format(s.meta.symbol,s.ohlc[0],s.ohlc[1],s.ohlc[2],s.ohlc[3]),h.fillStyle="#000",h.font="12px Verdana, Arial",h.fillText(a,r,n+15)),e=0;e<this._paneWidgets.length;e++)t=this._paneWidgets[e],h.drawImage(t.lhsPriceAxisWidget.canvas,r,o),h.drawImage(t.canvas,r+t.lhsPriceAxisWidget.size.w,o),l=t.statusWidget(),null!==l&&l.renderTo(h,r+5,o+5),h.drawImage(t.rhsPriceAxisWidget.canvas,r+t.lhsPriceAxisWidget.size.w+t.size.w,o),o+=t.size.h,e<this._paneWidgets.length-1&&(h.fillStyle=p,h.fillRect(r,o,u,1),o++);return h.drawImage(this._timeAxisWidget.lhsCanvas,r,o),h.drawImage(this._timeAxisWidget.canvas,r+t.lhsPriceAxisWidget.size.w,o),h.drawImage(this._timeAxisWidget.rhsCanvas,r+t.lhsPriceAxisWidget.size.w+t.size.w,o),h.lineWidth=1,h.strokeStyle="#000",h.strokeRect(n+.5,i+n+.5,u-1,d-1),c},n.prototype.images=function(){function t(t){var e,n,o,r,s,a;for(t.paint(R.LIGHT_UPDATE,i._onWidget),e=t.image(i._onWidget),e.containsMainSeries=t.containsMainSeries(),e.studies=[],n=t.state().dataSources(),o=0;o<n.length;o++)r=n[o],s=i.properties().paneProperties.legendProperties,a=r.statusView(),r instanceof v?r.properties().visible.value()&&a&&s.showStudyTitles.value()&&s.showLegend.value()&&e.studies.push(r.statusView().text()):r instanceof d&&a&&s.showLegend.value()&&s.showSeriesTitle.value()&&(e.mainSeriesText=r.statusView().text());return e}var e,i,n,o,r,s,a;if(TradingView.printing=!0,e=this._model&&this._model.selectedSource(),this._model&&this._model.setSelectedSource(null),i=this,n=[],this.isMaximizedPane())n.push(t(this._maximizedPaneWidget));else for(o=0;o<this._paneWidgets.length;o++)r=this._paneWidgets[o],n.push(t(r)),o<this._paneWidgets.length-1&&n.push(this._paneSeparators[o].image());return s=null,this._timeAxisWidget&&(this._timeAxisWidget.paint(R.LIGHT_UPDATE),s=this._timeAxisWidget.image()),TradingView.printing=!1,this._model&&(this._model.setSelectedSource(e),this._model.invalidate(new R(R.LIGHT_UPDATE))),a=this.mainSeriesQuotesAndMetainfo(),{
panes:n,timeAxis:s,colors:{text:this.properties().scalesProperties.textColor.value(),bg:this.properties().paneProperties.background.value(),scales:this.properties().scalesProperties.lineColor.value()},meta:a.meta,ohlc:a.ohlc,quotes:a.quotes}},n.prototype.mainSeriesQuotesAndMetainfo=function(){var t,e,i,n,o,r,s,a=this._model&&this._model.mainSeries();return a&&(n=function(t){return null==t?"":a.formatter().format(t)+""},o=function(t){return null==t?"":t+""},t={resolution:a.interval(),symbol:a.symbol()},r=a.symbolInfo(),r&&(t.symbol=r.full_name,t.description=r.description,t.exchange=r.exchange),s=a.bars().last(),null!==s&&(e=s.value.slice(1,5).map(n)),a.quoteData&&(i={change:n(a.quoteData.change),changePercent:o(a.quoteData.change_percent),last:n(a.quoteData.last_price)})),{meta:t,ohlc:e,quotes:i}},n.prototype.onTagsChanged=function(){return this._tagsChanged},n.prototype.onModelTagsChanged=function(){this._tagsChanged.fire()},n.prototype.destroy=function(){var t,e,i;for(0!==this._drawRafId&&this._jqParent.prop("ownerDocument").defaultView.cancelAnimationFrame(this._drawRafId),this._model.model().destroy(),null!==this._timingsMeter&&(this._timingsMeter.stopCollect(),this._timingsMeter=null),this._chartSession.criticalError().unsubscribe(this,this._onChartSessionCriticalError),this._chartSession.isConnected().unsubscribe(this._boundOnChartSessionIsConnectedChanged),this._chartSession.destroy(),t=0;t<this._paneWidgets.length;t++)this._paneWidgets[t].destroy();this._paneWidgets.length=0,this._controlBarNavigation&&(this._controlBarNavigation.destroy(),this._controlBarNavigation=void 0),this._seriesControlWidget&&(this._seriesControlWidget.destroy(),this._seriesControlWidget=null),$(window).off("visibilitychange:chart_"+this._guid),$(window).off("keydown:chart_"+this._guid),this._jqMainDiv&&this._jqMainDiv.remove();for(e in this._actions)i=this._actions[e],i.setActive(!1),i.binder&&i.binder.destroy();null!==this._timeAxisWidget&&(this._timeAxisWidget.destroy(),this._timeAxisWidget=null),this._isDestroyed=!0},n.prototype.title=function(){return window.t("Chart Properties")},n.prototype.symbolProperty=function(){return this._model.mainSeries().properties().shortName?this._model.mainSeries().properties().shortName:this._model.mainSeries().properties().symbol},n.prototype.loadContent=function(t,e){var i,n,o,r,s,a,l;for(this.screen.show(),i=this,this.isMaximizedPane()&&this.toggleMaximizePane(),n=i._model.model().dataSources(),o=0;o<n.length;o++)(r=n[o])!==i._model.mainSeries()&&i._model.model().removeSource(r,!0);for(this._model.disconnect(),i.activePaneWidget=!1,i._model.mainSeries().purgeSymbolInfo(),s=P(),null!==s&&s.unregisterChartWidget(this),t.loading=!0,i._setContent(t),o=0;o<t.panes.length;++o)for(l=0;l<t.panes[o].sources.length;++l)if(t.panes[o].sources[l].state.symbol){a=t.panes[o].sources[l].state;break}if(!a)throw Error("An error occured while determining main series ion the chart");i._properties.mainSeriesProperties.merge({visible:!0,symbol:a.symbol,timeframe:"",onWidget:i._onWidget,interval:a.interval||"D",
style:a.style}),i._init(),B.interval.setValue(a.interval),i._model.undoHistory.clearStack(),i.updateSeriesControlUI()},n.prototype._setContent=function(t){t&&t.panes.forEach(function(t){t.sources=t.sources.filter(function(t){return!!t&&("MainSeries"===t.type||(!t.points||!t.points.some(function(t){return null===t.time_t||!isFinite(t.time_t)})||(it.logNormal("Dropped invalid "+t.type+". Reason: non-numeric point time"),!1)))});var e=function(e){return t.sources&&t.sources.some(function(t){return t.id===e})};t.leftAxisSources&&(t.leftAxisSources=t.leftAxisSources.filter(e)),t.rightAxisSources&&(t.rightAxisSources=t.rightAxisSources.filter(e))}),this._content=t},n.prototype._contentSeriesProperties=function(){var t,e,i;if(this._content)for(t=this._content.panes.length;t-- >0;)for(e=this._content.panes[t].sources,i=e.length;i-- >0;)if("MainSeries"===e[i].type)return e[i].state},n.prototype.updateSeriesControlUI=function(){this._seriesControlWidget&&this._seriesControlWidget.updateUI()},n.prototype.tickSeriesControlClock=function(){this._seriesControlWidget&&this._seriesControlWidget.tickClock()},n.prototype.resizeSeriesControlUI=function(){this._seriesControlWidget&&this._seriesControlWidget.resizeUI()},n.prototype.updateUndoRedo=function(){this._model&&(this.actions().undo.setEnabled(!this._model.undoHistory.undoStack().isEmpty()),this.actions().redo.setEnabled(!this._model.undoHistory.redoStack().isEmpty()))},n.prototype.createSessionBreaksActions=function(t){var e,i=this,n=function(){e=new C({text:window.t("Session Breaks"),checkable:!0,statName:"ToggleSessionBreaks"}),e.binder=new f(e,i.model().mainSeries().sessionsStudy().properties().graphics.vertlines.sessBreaks.visible,i.model(),"Session Breaks"),i._actions.sessionBreaks=e};i.model().mainSeries().sessionsStudy()?n():i.model().mainSeries().onSessionsStudyCreated().subscribe(i,function(){n()})};n.prototype.updateActionForIntradayOnly=function(t){!t||!t instanceof C||t.setEnabled(!!this.model().mainSeries().isIntradayInterval())},n.prototype.withModel=function(t,e){this.model()?e.call(t):this.modelCreated().subscribe(t,e,!0)},n.prototype.containsVolume=function(){return this.model().dataSources().some(function(t){return t instanceof v&&"Volume"===t.metaInfo().shortId})},n.prototype.containsStudyByPredicate=function(t){return!!this._model&&this._model.dataSources().some(function(e){if(!(e instanceof v))return!1;var i=e.metaInfo();return t(i)})},n.prototype.containsStudy=function(t){return this.containsStudyByPredicate(function(e){return e.id===t||e.fullId===t})},n.prototype.containsSessions=function(){return this.model().dataSources().some(function(t){return t instanceof v&&"Sessions"===t.metaInfo().shortId})},n.prototype.isSmall=function(){return this._width()<550||this._height()<300},n.prototype.onWidget=function(){return this._onWidget},n.prototype.onCmeWidget=function(){return"cme"===this.widgetCustomer()},n.prototype.widgetCustomer=function(){return this._widgetCustomer},n.prototype._width=function(){return this._options.width.value()},
n.prototype._height=function(){var t=this._options.height.value();return this._chartControlsBar&&(t=Math.max(t-this.controlBarHeight,0)),t},n.prototype.resize=function(){var t={height:this._height()+"px",width:this._width()+"px"};this._jqMainDiv.css(t),this._elMainTable.style.height=t.height,this._elMainTable.style.width=t.width,this._resizeHandler&&this._jqMainDiv&&this._resizeHandler()},n.prototype.chartSession=function(){return this._chartSession},n.prototype.maxLhsPriceAxisWidth=0,n.prototype.maxRhsPriceAxisWidth=0,n.prototype.GUIResetScales=function(){K("GUI","Reset Scales");var t=this.model();t&&t.resetScales()},n.prototype.onLineCancelled=function(){k.resetToCursor()},n.prototype.createIndicatorImage=function(){var t=this;this._indicatorBindingPriceAxisName="right",this._indicatorImageMargin="marginRight",this.indicatorImage=this._jqParent[0].getElementsByClassName("chart-status-picture")[0],this.indicatorImage?this.indicatorImage.innerHTML="":(this.indicatorImage=this._jqParent.prop("ownerDocument").createElement("span"),this.indicatorImage.className="chart-status-picture",this._jqParent.append(this.indicatorImage)),this._options.marketStatusWidgetEnabled&&(this.indicatorText=$('<span class="series-status-text apply-common-tooltip"><span class="js-market-status tv-market-status--series-status"></span></span>'),this.indicatorText.appendTo(this.indicatorImage),this.indicatorDot&&this.indicatorDot.stop(),this.indicatorDot=new Q({el:this.indicatorText.find(".js-market-status")[0],classSuffix:"--for-chart"}),this.indicatorDot.start(),p.enabled("display_data_mode")&&($('<span class="js-data-mode tv-data-mode--series-status"></span>').appendTo(this.indicatorText),this.dataModeIndicator&&this.dataModeIndicator.stop(),this.dataModeIndicator=new tt({el:this.indicatorText.find(".js-data-mode")[0],classSuffix:"--for-chart"}),this.dataModeIndicator.start())),t.withModel(null,function(){var e=t._model.mainSeries();e.onStatusChanged().subscribe(null,t.updateIndicatorImage.bind(t)),e.marketStatus.subscribe(t.updateIndicatorImage.bind(t)),t.updateIndicatorImage(),t.checkCompactMode(),t._model.onRearrangePanes().subscribe(null,function(){t.resetIndicatorSize(),t.resizeIndicator()})}),this._indicatorPriceAxisWidthChanged=this.getPriceAxisWidthChangedByName(this._indicatorBindingPriceAxisName),this._indicatorPriceAxisWidthChanged.subscribe(this,this.updateIndicatorImagePosition),this.updateIndicatorImagePosition()},n.prototype.updateIndicatorImage=function(){var t,e,i,n=this,o=this._model;o&&(t=o.mainSeries(),e=t.status(),i=t.quoteData?t.quoteData.update_mode_seconds:null,n._updateDataAndMarketStatus(t.marketStatus.value(),e,i))},n.prototype.checkCompactMode=function(){this._jqMainDiv.toggleClass("i-compact",this._width()<=400),this.indicatorImage&&(this._indicatorWidth=this.indicatorImage.clientWidth)},n.prototype.getDataTextStatus=function(t){var e;switch(t){case d.STATUS_LOADING:case d.STATUS_RESOLVING:e="loading";break;case d.STATUS_INVALID_SYMBOL:e="invalid";break;case d.STATUS_NO_BARS:e="forbidden";break
;case d.STATUS_DELAYED:e="delayed";break;case d.STATUS_DELAYED_STREAMING:e="delayed_streaming";break;case d.STATUS_EOD:case d.STATUS_PULSE:e="endofday";break;case d.STATUS_OFFLINE:e="connecting";break;case d.STATUS_SNAPSHOT:e="snapshot";break;case d.STATUS_READY:e="realtime";break;case d.STATUS_REPLAY:e="replay";break;default:e=t}return e},n.prototype._updateDataAndMarketStatus=function(t,e){var i,n;void 0!==this.indicatorText&&(i=this.getDataTextStatus(e),e===d.STATUS_LOADING||e===d.STATUS_RESOLVING?this.indicatorDot.setStatus("loading"):e===d.STATUS_INVALID_SYMBOL?this.indicatorDot.reset():i===e&&it.logWarn("unhandled data mode "+i),p.enabled("display_data_mode")&&this.dataModeIndicator.setMode(i),n=["loading","invalid","replay"],!n.includes(i)&&t?this.indicatorDot.setStatus(t,!0):"invalid"===i?this.indicatorDot.setStatus("invalid",!0):"replay"===i&&this.indicatorDot.setStatus("replay"),this.resizeIndicator())},n.prototype.resetIndicatorSize=function(){var t,e;if(this._paneWidgets[0]&&this._paneWidgets[0].statusWidget()&&nt)for(t=0;t<this._paneWidgets.length;t++)null!==(e=this._paneWidgets[t].statusWidget())&&e.firstTitle().css("padding-right","")},n.prototype.resizeIndicator=function(){var t,e,i,n,o=this._getMainSeriesPaneWidget();null!==o&&null!==(t=o.statusWidget())&&t.firstTitle().css("padding-right",this._indicatorWidth+10),this._options.marketStatusWidgetEnabled&&p.enabled("display_data_mode")&&this.indicatorDot&&this.dataModeIndicator&&(this.indicatorDot.isShortModeEnabled()&&this.dataModeIndicator.isShortModeEnabled()?(e=[this.indicatorDot.getTooltipText(),this.dataModeIndicator.getTooltipText()],e=e.filter(function(t){return t}),i=e.join(", "),this.indicatorText.attr("title",i)):this.indicatorText.attr("title",""),this.indicatorText.get(0).dispatchEvent(new y("common-tooltip-update"))),this.indicatorImage&&(this._indicatorWidth=this.indicatorImage.clientWidth),n=this._width(),this._options.marketStatusWidgetEnabled&&this.indicatorDot&&(n>650?(this.indicatorDot.setTooltipEnabled(!1),this.indicatorDot.disableShortMode()):n>550?(this.indicatorDot.setTooltipEnabled(!1),this.indicatorDot.disableShortMode()):(this.indicatorDot.setTooltipEnabled(!1),this.indicatorDot.enableShortMode())),p.enabled("display_data_mode")&&this.dataModeIndicator&&(n>650?(this.dataModeIndicator.setTooltipEnabled(!1),this.dataModeIndicator.disableShortMode()):n>550?(this.dataModeIndicator.setTooltipEnabled(!0),this.dataModeIndicator.enableShortMode()):(this.dataModeIndicator.setTooltipEnabled(!1),this.dataModeIndicator.enableShortMode()))},n.prototype.updateIndicatorImagePosition=function(){this.indicatorImage&&(this.indicatorImage.style[this._indicatorImageMargin]=this.getPriceAxisMaxWidthByName(this._indicatorBindingPriceAxisName)+"px")},n.prototype._getMainSeriesPaneWidget=function(){for(var t=0;t<this._paneWidgets.length;t++)if(this._paneWidgets[t].containsMainSeries())return this._paneWidgets[t];return null},n.prototype.getMarketStatusTooltip=function(){
return this._options.marketStatusWidgetEnabled&&this.indicatorDot?this.indicatorDot.getTooltipText():"-"},n.prototype._startSpinner=function(t){if(!this._spinner){var e=$(t).get(0);e&&(this._spinner=(new G).spin(e))}},n.prototype.isJustClonedChart=function(){return!!(this._options||{}).justCloned},n.prototype.getLastPaneLeftBottom=function(){var t=this._paneWidgets[this._paneWidgets.length-1].jqPane,e=t.offset();return{left:e.left,bottom:$(document.body).height()-e.top-t.height()}},n.prototype.setDataWindowWidget=function(t){this._dataWindowWidget=t},n.prototype.removeDataWindowWidget=function(){this._dataWindowWidget=null},p.enabled("datasource_copypaste")&&(n.prototype.onAppClipboardPaste=function(t,e){it.logDebug("[[paste]]"),this._model&&this._model.pasteSourceFromClip(t,e)},n.prototype.onAppClipboardCopy=function(t){if(t||(t=this._model.selectedSource()),t instanceof v&&t.isChildStudy())return void it.logDebug("Can not copy child study");it.logDebug("[[copy]]"),this._model&&this._model.copySourceToClip(t)},n.prototype.onAppClipboardCut=function(t){it.logDebug("[[cut]]"),this._model&&this._model.cutSourceToClip(t||this._model.selectedSource())}),n.prototype.applyOverrides=function(t){applyPropertiesOverrides(this.properties(),null,!1,t),this._model&&(applyPropertiesOverrides(this._model.model().properties(),null,!1,t),applyPropertiesOverrides(this._model.mainSeries().properties(),null,!1,t,"mainSeriesProperties"))},n.prototype.applyStudiesOverrides=function(t){Y.setDefaultsOverrides(t),this._applyStudiesOverrides()},n.prototype._setActionsActive=function(t){var e,i=this.actions();for(e in i)i.hasOwnProperty(e)&&this.actions()[e].setActive(t)},n.prototype.setActive=function(t){this._setActionsActive(t),this._isActive=t,this._paneWidgets.forEach(function(t){t.update()}),this._chartControlsBar&&this._chartControlsBar.classList.toggle("chart-controls-bar--inactive",!t)},n.prototype.isActive=function(){return this._isActive},n.prototype.trackTime=function(){return this._chartWidgetCollection.lock.trackTime},n.prototype.isMultipleLayout=function(){return rt(this._chartWidgetCollection.layout.value())},n.prototype.id=function(){return this._guid},n.prototype.createBranding=function(){this._modelCreated.subscribe(this,function(){this._model.model().createBrandingSource()},!0)},n.prototype.selectBarMode=function(){return this._model.model().selectBarMode()},n.prototype.toggleSelectBarMode=function(){this._model.model().toggleSelectBarMode()},n.prototype.onBarSelected=function(){return this._model.model().onBarSelected()},n.prototype.trySetChartStyle=function(t){var e=this.model();return!!e&&(e.mainSeries().properties().style.value()===t||!!p.enabled("charting_library_base")&&(this._setChartStyle(t),!0))},n.prototype._setChartStyle=function(t){var e=this.model(),i=e.mainSeries().properties().style;e.setChartStyleProperty(i,t,"Change Series Style")},n.prototype.showReplayOrderConfirmationDialog=function(){if(!this.model().isInReplay())return Promise.resolve()},n.prototype._addPerfMark=function(t){
st("ChartWidget."+this._guid+"."+t)},t.exports.ChartWidget=n}).call(e,i(8))},function(t,e,i){"use strict";(function(e){function n(t,e,o){this._options=Object.assign({},X,o),this._chart=t,this.dialog=t.dialog,this._state=e,this._state&&this._state.onDestroyed().subscribe(this,n.prototype._onStateDestroyed,!0);var r={contextMenuEnabled:this._options.priceScaleContextMenuEnabled};this.lhsPriceAxisWidget=new l(this,l.LHS,r),this.rhsPriceAxisWidget=new l(this,l.RHS,r),this.jqPane=$(document.createElement("td")),this.jqPane.addClass("chart-markup-table"),this.jqPane.addClass("pane"),this._dv=$("<div>"),this._dv.css("width","100%"),this._dv.css("height","100%"),this._dv.css("position","relative"),this._dv.css("overflow","hidden"),this._dv.appendTo(this.jqPane),this.canvas=j(this._dv,new H(16,16)),$(this.canvas).css("position","absolute"),$(this.canvas).css("z-order","2"),$(this.canvas).css("left",0),$(this.canvas).css("top",0),this.ctx=this.canvas.getContext("2d"),this.top_canvas=j(this._dv,new H(16,16)),$(this.top_canvas).css("position","absolute"),$(this.top_canvas).css("z-order","1"),$(this.top_canvas).css("left",0),$(this.top_canvas).css("top",0),this.top_ctx=this.top_canvas.getContext("2d"),this._zoomSelector=$("<div>"),this._zoomSelector.addClass("zoom-selector"),this._zoomSelector.css("display","none"),this._zoomSelector.appendTo(this._dv),this._tooltipSelector=$("<div>"),this._tooltipSelector.addClass("tooltip tooltip-selector tooltip-selector-hidden"),this._tooltipSelector.appendTo(this._dv),this.jqRow=$(document.createElement("tr")),this.lhsPriceAxisWidget.jqCell.appendTo(this.jqRow),this.jqPane.appendTo(this.jqRow),this._legendWidget=null,this._options.legendWidgetEnabled&&i.e(3).then(function(t){if(!this._isDestroyed){var e=i(939).LegendWidget;this._legendWidget=new e(this,this._chart.model(),this._chart._jqMainDiv,this._options.legendWidget),this._legendWidget.$el.appendTo(this._dv),this._legendWidget.update()}}.bind(this).bind(null,i)).catch(i.oe),this.rhsPriceAxisWidget.jqCell.appendTo(this.jqRow),this.setCursorForTool(),this._mouseEventHandler=new U($(this.top_canvas),this,!0,this._options.verticalTouchScroll),this._paneControls=null,e&&!this._chart.readOnly()&&i.e(3).then(function(t){if(!this._isDestroyed){var e=i(940);this._paneControls=new e(this,this._chart.model(),this._dv),this.updateControls()}}.bind(this).bind(null,i)).catch(i.oe),this.updateScalesVisibility(),this.actions=[],this.readonlyActions=[],this._onKeyUpListener=this._onKeyUpListener.bind(this),this._lineCancelledCallback=this._lineCancelledCallback.bind(this),$(window).on("keyup.panewidget",this._onKeyUpListener),this._chart.withModel(this,this._lineCancelledCallback),this._overlays={},this._contextMenuX=0,this._contextMenuY=0,this._lockDrawingsProperty=O.lockDrawings(),this._prevHoveredHittest=null,this._chart.withModel(this,function(){var t=this._chart.model();t.onSimpleZoomIn().subscribe(this,this._updateCrosshairOnZoom),t.onSimpleZoomOut().subscribe(this,this._updateCrosshairOnZoom)}),this._isDestroyed=!1}
var o,r,s,a,l,c,h,u,d,p,_,f,m,g,y,v,b,S,w,P,T,C,x,k,L,I,A,E,M,O,D,V,R,B,F,N,W,j,H,U,z,q,Y,G,K,X;i(630),i(9),o=i(7).Point,r=i(321).UndoMacroCommand,s=i(39).Study,a=i(212).NonSeriesStudy,l=i(145).PriceAxisWidget,c=i(145).scaleRatioForContextMenuTransformer(7),h=i(47).LineToolOrder,u=i(47).LineToolPosition,d=i(1).LineDataSource,p=i(47).LineToolBrush,_=i(86),f=_.isLineToolName,m=_.isStudyLineToolName,g=i(101).BarsMarksContainer,y=i(28).trackEvent,v=i(95).isFeatureEnabled,b=i(233).showEditObjectDialog,S=i(213).ActionBinder,w=i(192).makeTimeLimited,P=i(349).createToolbarAction,T=i(6).ensureNotNull,C=i(80).tradingService,x=i(337).createTradeContext,k=i(34).PriceDataSource,L=i(30),I=L.Action,A=L.ActionPlaceholder,E=L.ActionSeparator,M=i(84),O=i(38),D=i(10).HitTestResult,V=i(17),R=i(42),B=i(94),F=B.resizeCanvas,N=B.hardResizeCanvas,W=B.clearRect,j=B.addCanvasTo,H=B.Size,U=i(126).MouseEventHandler,z=i(214),q=i(157),Y=i(343).PaneCursorType,G=i(5).getLogger("Chart.PaneWidget"),K=["LineToolOrder","LineToolPosition","AlertLabel"],X={contextMenuEnabled:!0,priceScaleContextMenuEnabled:!0,legendWidgetEnabled:!0,legendWidget:{},verticalTouchScroll:!1,propertyPagesEnabled:!0,sourceSelectionEnabled:!0},n.prototype.destroy=function(){$(window).off("keyup.panewidget",this._onKeyUpListener),this._legendWidget&&(this._legendWidget.destroy(),this._legendWidget.$el.remove(),delete this._legendWidget),null!==this._paneControls&&(this._paneControls.destroy(),delete this._paneControls),this.lhsPriceAxisWidget.destroy(),this.rhsPriceAxisWidget.destroy(),this._chart.withModel({chart:this._chart,instance:this,callback:this._hideTooltip},function(){this.chart.model().lineCancelled().unsubscribe(this.instance,this.callback)}),this.jqRow.remove(),this.jqRow.find("*").remove(),this._prevHoveredHittest=null,this._state&&this._state.onDestroyed().unsubscribe(this,n.prototype._onStateDestroyed),this._mouseEventHandler.destroy();for(var t in this)delete this[t];this._isDestroyed=!0},n.prototype.cancelZoom=function(){this._zoomSelector.css("display","none"),delete this._firstZoomPoint},n.prototype._onKeyUpListener=function(t){if(27===t.keyCode){this._chart.model().lineBeingCreated()&&this._chart.model().cancelCreatingLine(),this._firstZoomPoint&&this.cancelZoom();this._chart.model().model().crossHairSource().clearMeasure(),this.setCursorForTool(),this._hideTooltip()}},n.prototype._lineCancelledCallback=function(){try{this._chart.model().lineCancelled().subscribe(this,this._hideTooltip)}catch(t){}},n.prototype.backgroundColor=function(){return this._chart.properties().paneProperties.background.value()},n.prototype.priceAxisByCanvas=function(t){return t===this.lhsPriceAxisWidget.canvas||t===this.lhsPriceAxisWidget.top_canvas?this.lhsPriceAxisWidget:t===this.rhsPriceAxisWidget.canvas||t===this.rhsPriceAxisWidget.top_canvas?this.rhsPriceAxisWidget:null},n.prototype.updateScalesVisibility=function(){this.lhsPriceAxisWidget.setVisible(this._chart.properties().scalesProperties.showLeftScale.value()),
this.rhsPriceAxisWidget.setVisible(this._chart.properties().scalesProperties.showRightScale.value())},n.prototype.chart=function(){return this._chart},n.prototype._chartModel=function(){return this._chart.model().model()},n.prototype.state=function(){return this._state},n.prototype.setState=function(t){this._state&&this._state.onDestroyed().unsubscribe(this,n.prototype._onStateDestroyed),this._state=t,this._state&&this._state.onDestroyed().subscribe(this,n.prototype._onStateDestroyed,!0)},n.prototype._onStateDestroyed=function(){this._state&&this._state.onDestroyed().unsubscribe(this,n.prototype._onStateDestroyed),this._state=null},n.prototype.stretchFactor=function(){return this._state?this._state._stretchFactor:0},n.prototype.setStretchFactor=function(t){this._state&&(this._state._stretchFactor=t)},n.prototype.mouseEnterEvent=function(t){var e=this._chart.model();e&&(e.crossHairSource().visible=!0,"function"==typeof this.onMouseEnter&&this.onMouseEnter(this))},n.prototype.hideInplaceEditor=function(){return!!this._inplaceEditor&&(this._inplaceEditor.remove(),this._inplaceEditor=void 0,!0)},n.prototype._processMouseMoveWhileZoom=function(t){var e=Math.floor(this._chart.model().timeScale().coordinateToIndex(t.localX)),i=this._chart.model().timeScale().indexToCoordinate(e)-.5*this._chart.model().timeScale().barSpacing(),n=t.localY,o=Math.abs(i-this._firstZoomPoint.x),r=Math.abs(n-this._firstZoomPoint.y);i<this._firstZoomPoint.x?this._zoomSelector.css("left",i):this._zoomSelector.css("left",this._firstZoomPoint.x),t.localY<this._firstZoomPoint.y?this._zoomSelector.css("top",t.localY):this._zoomSelector.css("top",this._firstZoomPoint.y),this._zoomSelector.width(o),this._zoomSelector.height(r)},n.prototype._finishZoom=function(t){var e=T(this._state),i=e.defaultPriceScale(),n=e.mainDataSource().firstValue(),o=i.coordinateToPrice(t.localY,n),r=Math.round(this._chart.model().timeScale().coordinateToIndex(t.localX));r!==this._firstZoomPoint.index&&this._chart.model().zoomToViewport(this._firstZoomPoint.index,r,this._firstZoomPoint.price,o,e),this._zoomSelector.css("display","none"),this._firstZoomPoint=null,O.resetToCursor()},n.EvironmentState=function(t){t.shiftKey&&(this.shift=!0),t.ctrlKey&&(this.control=!0)},n.prototype.checkMovepoint=function(t){return t===D.MOVEPOINT||t===D.MOVEPOINT_BACKGROUND&&TradingView.isMobile.any()},n.prototype.mouseDownEvent=function(t){var i,r,a,l,c,h,u,p,_,m,g,y,v,b,S;if(this._state&&(document.activeElement!==document.body&&document.activeElement!==document.documentElement?document.activeElement&&document.activeElement.blur?document.activeElement.blur():document.body.focus():document.getSelection?document.getSelection().removeAllRanges():document.selection&&document.selection.clear(),R.emit("mouse_down",{clientX:t.clientX,clientY:t.clientY,pageX:t.pageX,pageY:t.pageY,screenX:t.screenX,screenY:t.screenY}),this._updateCommonTooltip(null),i=this._chart.model(),r=new n.EvironmentState(t),i.mainSeries().clearGotoDateResult(),this.hideInplaceEditor(),a=this._state.defaultPriceScale(),
!a.isEmpty()&&!i.timeScale().isEmpty())){if(l=i.crossHairSource(),TradingView.supportTouch()&&"LineToolBrush"!==O.tool.value()||i.setAndSaveCurrentPosition(t.localX,t.localY,this._state),c=l.price,h=l.index,l.startMeasurePoint()&&l.endMeasurePoint()&&l.clearMeasure(),r.shift&&O.toolIsCursor(O.tool.value())&&O.tool.setValue("measure"),"measure"===O.tool.value()&&!l.startMeasurePoint())return void l.startMeasuring({price:c,index:h,x:t.localX,y:t.localY},this._state);if(l.startMeasurePoint()&&!l.endMeasurePoint())return l.finishMeasure({price:c,index:h,x:t.localX,y:t.localY}),void O.resetToCursor();if(this._firstZoomPoint)return void this._finishZoom(t);if("zoom"===O.tool.value()&&e.enabled("chart_zoom"))return u=i.timeScale().indexToCoordinate(h)-.5*i.timeScale().barSpacing(),this._firstZoomPoint={price:c,index:h,x:u,y:t.localY},this._zoomSelector.css("display","block"),this._zoomSelector.css("left",u),this._zoomSelector.css("top",t.localY),this._zoomSelector.width(0),void this._zoomSelector.height(0);if(!this._isSelectBarModeEnabled()&&(f(O.tool.value())||i.lineBeingCreated()))return void((!e.enabled("charting_library_base")||h>=0)&&this._mouseDownEventForLineTool(t,r,h,c));if(p=this.dataSourceAtPoint(t.localX,t.localY),_=p&&p.source&&p.source.customization?p.source.customization:{},p.hittest&&p.hittest.result()===D.CUSTOM&&(m=p.hittest.data().mouseDownHandler)&&m(t),!this._chart.readOnly()){if(p&&p.hittest&&p.hittest.result()===D.CUSTOM_MOVE&&(m=p.hittest.data().pressedMouseMoveHandler))return void i.startCustomMoving(p.source,new o(t.localX,t.localY),m);if(p&&!_.disableSelection&&(g=p.hittest&&p.hittest.result()>D.MOVEPOINT_BACKGROUND,g=g||p.hittest&&p.hittest.result()===D.MOVEPOINT_BACKGROUND&&TradingView.isMobile.any(),g?i.setSelectedSource(p.source,p.hittest&&p.hittest.data()):i.setSelectedSource(null)),p.source&&"eraser"===O.tool.value()&&!_.disableErasing&&(TradingView.isInherited(p.source.constructor,d)||TradingView.isInherited(p.source.constructor,s)))return y=p.hittest.eraseMarker(),void(t.ctrlKey&&void 0!==y&&p.source.processErase?p.source.processErase(i,y):i.removeSource(p.source));if(v=p.source&&TradingView.isInherited(p.source.constructor,d)&&p.source.isLocked(),!(this._lockDrawingsProperty.value()||v)){if(p.source&&p.source.userEditEnabled&&!p.source.userEditEnabled())return;if(p.hittest&&p.hittest.result()===D.CHANGEPOINT)return b=this._state.mainDataSource().firstValue(),a=p.source.priceScale(),c=a.coordinateToPrice(t.localY,b),i.startChangingLinetool(p.source,{index:h,price:c},p.hittest.data(),r),void this._updateTooltip(t.localX,t.localY);if(p.hittest&&this.checkMovepoint(p.hittest.result()))return S=p.source.properties(),r.control&&S.clonable&&S.clonable.value()?void(this._clonningAtMoveLineTool=p.source):void(p.source.isFixed&&p.source.isFixed()?i.startMovingSource(p.source,new o(t.localX,t.localY),p.hittest.data()):(b=this._state.mainDataSource().firstValue(),a=p.source.priceScale(),c=a.coordinateToPrice(t.localY,b),i.startMovingSource(p.source,{index:h,price:c},p.hittest.data())))}
if(p.source&&TradingView.isInherited(p.source.constructor,k)&&p.source.isDraggable())return void(this._chart.draggingSource=p.source)}p.hittest&&p.hittest.result()===D.REGULAR||(this._processing=!0)}},n.prototype.drawRightThere=function(t){var e,i;f(t)&&(e=this._chart.model(),i=e.crossHairSource(),e.createLineTool(T(this._state),{index:i.index,price:i.price},t))},n.prototype._finishTool=function(t){var e,i=this._chart.model(),n=O.tool.value();O.resetToCursor(),this._hideTooltip(),i.setSelectedSource(t),this._chart.isTextTool(n)&&(e=i.createUndoCheckpoint(),b(t,i,null,e).then(function(t){t.focusOnText()}))},n.prototype._mouseDownEventForLineTool=function(t,e,i,n){var r,s,a,l,c,h,u,d,_,m,g,y,v,b,S,w,P;if(this._state){if(r=this._chart.model(),s=!1,a=null,l=t.localX,c=t.localY,h=this._chart.model().model().crossHairSource(),u=O.tool.value(),O.hideAllDrawings().setValue(!1),O.lockDrawings().setValue(!1),TradingView.supportTouch()&&f(u)&&"LineToolBrush"!==u&&!r.lineBeingCreated()&&(this._startTouchPoint=new o(l,c),this._initCrossHairPosition=h.currentPoint()),!r.lineBeingCreated()||r.lineBeingCreated()instanceof p)TradingView.supportTouch()&&"LineToolBrush"!==u||(P={index:i,price:n},a=r.createLineTool(this._state,P,u),r.lineBeingCreated()||(s=!0));else if(d=r.lineBeingCreated().ownerSource().firstValue(),TradingView.supportTouch()){if(!this._startTouchPoint)return this._startTouchPoint=new o(l,c),_=r.lineBeingCreated().points(),m=_[_.length-1],g=r.timeScale().indexToCoordinate(m.index),n=m.price,y=r.lineBeingCreated().priceScale(),v=y.priceToCoordinate(n,d),void(this._lastDrawingPoint=new o(g,v))}else a=r.lineBeingCreated(),b=r.paneForSource(a),b!==this._state?(S=this._dv.offset(),l=t.localX+S.left,c=t.localY+S.top,w=this._chart.paneByState(b),S=w._dv.offset(),l-=S.left,c-=S.top,n=a.priceScale().coordinateToPrice(c,d),i=Math.round(r.timeScale().coordinateToIndex(l)),s=r.coninueCreatingLine({index:i,price:n},e)):s=r.coninueCreatingLine({index:i,price:n},e);r.setSelectedSource(a),s?this._finishTool(a):TradingView.supportTouch()&&"LineToolBrush"!==u||this._updateTooltip(t.localX,t.localY)}},n.prototype._equalsCursorCache=function(t,e){return O.toolIsCursor(t.tool)?t.tool===e.tool&&t.theme===e.theme&&t.crosshair===e.crosshair:t.tool===e.tool&&t.theme===e.theme},n.prototype._setCursorClassName=function(t){var e="";t&&(e="pane--cursor-"+t),this._currentCursorClassName!==e&&(this._currentCursorClassName&&this.jqPane.removeClass(this._currentCursorClassName),e&&this.jqPane.addClass(e),this._currentCursorClassName=e,this.jqPane.css("cursor"))},n.prototype.setCursorForTool=function(t,e){var i,n=O.tool.value();if(O.toolIsCursor(n)){if(this._chart.draggingSource||this._isScrolling||this._chart.model()&&this._chart.model().sourceBeingMoved())return void this._setCursorClassName("grabbing");if(t&&this._options.sourceSelectionEnabled)return void this._setCursorClassName("pointer")}
return"eraser"===n?void this._setCursorClassName("eraser"):"zoom"===n?void this._setCursorClassName("zoom-in"):"dot"===(i=O.cursorTool.value())?void this._setCursorClassName("dot"):"arrow"===i?void this._setCursorClassName("default"):void this._setCursorClassName("")},n.prototype.setDragToAnotherPaneCursor=function(){this._setCursorClassName("grabbing")},n.prototype.gestureStartEvent=function(t){this._prev_pinch_scale=1,this._pinching=!0},n.prototype.gestureChangeEvent=function(t){var e,i,n=t.center.x-5,o=this._chart.paneWidgets()[0].lhsPriceAxisWidget.size.w,r=this._chart.model().timeScale().width();o&&(n=Math.max(0,n-o)),n=Math.min(n,r),e=2*(n/r-.5),i=5*(t.scale-this._prev_pinch_scale),i>0?this._chart.model().zoomIn(e,i):i<0&&this._chart.model().zoomOut(e,-i),this._prev_pinch_scale=t.scale},n.prototype.gestureEndEvent=function(t){this._pinching=!1},n.prototype._updateCommonTooltip=function(t){var e,i,n,o=this._lastCommonTooltipData,r=null;if(t&&t.hittest&&t.hittest.result()===D.CUSTOM&&(e=t.hittest.data())&&(r=e.tooltip||null),null!=o||null!=r)return null==r?(this._lastCommonTooltipData=null,void q.hide()):void(o&&r.text===o.text&&r.rect.x===o.rect.x&&r.rect.y===o.rect.y&&r.rect.w===o.rect.w&&r.rect.h===o.rect.h||(this._lastCommonTooltipData=r,i=TradingView.clone(r),n=this.jqPane.offset(),i.rect.x+=n.left,i.rect.y+=n.top,q.show(i)))},n.prototype._processMouseMoveForCustomHandler=function(t){var e,i,n,o=this.dataSourceAtPoint(t.localX,t.localY),r=o.hittest&&o.hittest.result()===D.CUSTOM;!r||null!==this._prevHoveredHittest&&this._prevHoveredHittest.renderer===o.renderer||(e=o.hittest.data().mouseEnterHandler,e&&e(t),this._prevHoveredHittest=o),r&&(i=o.hittest.data().mouseMoveHandler)&&i(t),null!==this._prevHoveredHittest&&this._prevHoveredHittest.renderer!==o.renderer&&(n=this._prevHoveredHittest.hittest.data().mouseLeaveHandler,n&&n(t),this._prevHoveredHittest=null)},n.prototype.mouseMoveEvent=function(t){var e,i,o,r,s,a,l,c,h,u,d,p,_,m,g;if(this._state&&(this._processMouseMoveForCustomHandler(t),e=this._chart.model())){if(i=t.localX,o=t.localY,r=new n.EvironmentState(t),this._firstZoomPoint)return void this._processMouseMoveWhileZoom(t);if(s=!1,!(this._chart.readOnly()||this._editDialog&&this._editDialog.isVisible())&&(a=O.tool.value(),l=null,c=null,h=null,this._processing||!O.toolIsCursor(a)&&"eraser"!==a||(l=this.dataSourceAtPoint(t.localX,t.localY),u=l&&l.source,s=!!u&&-1!==K.indexOf(u.toolname),l.hittest&&l.hittest.result()>D.MOVEPOINT_BACKGROUND?(c=l.source,h=l.hittest.result(),!l.source||"eraser"===a&&l.source.constructor===TradingView.Series?e.setHoveredSource(null):e.setHoveredSource(l.source,l.hittest.data())):e.setHoveredSource(null)),this._options.sourceSelectionEnabled&&(this._isSelectBarModeEnabled()?this._setCursorClassName("pointer"):this.setCursorForTool(c,h)),this._updateCommonTooltip(l),null!==l&&null!==l.hittest&&l.hittest.result()===D.CUSTOM_MOVE))switch(d=l.hittest.data()||{},d.cursorType){case Y.VerticalResize:this._setCursorClassName("ns-resize")}
if(this._chart.model().crossHairSource().setLinesShouldBeHidden(s),this._chart.readOnly()&&this._options.sourceSelectionEnabled&&(l=this.dataSourceAtPoint(t.localX,t.localY),null!==l.source?e.setHoveredSource(l.source,l.hittest.data()):e.setHoveredSource(null,null)),this._chart.model().lineBeingCreated()&&(p=this._chart.model().lineBeingCreated(),(_=this._chart.model().paneForSource(p))!==this._state))return m=this._dv.offset(),i+=m.left,o+=m.top,g=this._chart.paneByState(_),m=g._dv.offset(),i-=m.left,o-=m.top,void e.setAndSaveCurrentPosition(i,o,_);a=O.tool.value(),TradingView.supportTouch()&&f(a)||(e.setAndSaveCurrentPosition(i,o,this._state,r),this._updateTooltip(i,o))}},n.prototype.pressedMouseMoveEvent=function(t){var i,r,s,a,l,c,h,u,_,m,g,y,v,b,S,w,P,T,C,x,k,L,I,A,E,M,D,V,R,B,F;if(this._state&&!this._pinching){if(this._touchMove=!0,i=new n.EvironmentState(t),r=this._chart.model(),s=t.localX,a=t.localY,this._firstZoomPoint)return this._processMouseMoveWhileZoom(t),void(this._firstZoomPoint.draggingMode=!0);if(l=O.tool.value(),TradingView.supportTouch()&&this._startTouchPoint&&f(l)&&"LineToolBrush"!==l&&!r.lineBeingCreated()&&!this._isSelectBarModeEnabled())return c=this._initCrossHairPosition,h=new o(s,a),u=h.subtract(this._startTouchPoint),_=c.add(u),this._chart.model().setAndSaveCurrentPosition(_.x,_.y,this._state),void this._updateTooltip(_.x,_.y);if(TradingView.supportTouch()&&r.lineBeingCreated()&&!(r.lineBeingCreated()instanceof p))return void(this._startTouchPoint&&(m=r.lineBeingCreated(),g=t.localX-this._startTouchPoint.x,y=t.localY-this._startTouchPoint.y,v=this._lastDrawingPoint.x+g,b=this._lastDrawingPoint.y+y,S=this._chart.model().paneForSource(m),r.setAndSaveCurrentPosition(v,b,S),this._updateTooltip(v,b)));if(r.setAndSaveCurrentPosition(s,a,this._state,i),this._updateTooltip(s,a),w=O.tool.value(),P=this._isSelectBarModeEnabled(),(!f(w)||"LineToolBrush"===l||P)&&(0===t.button||Modernizr.touch)){if("LineToolBrush"===w&&!P){if(T=this._state.defaultPriceScale(),T.isEmpty())return;if(!(C=this._chart.model().lineBeingCreated()))return;return x=C.ownerSource().firstValue(),k=T.coordinateToPrice(t.localY,x),L=Math.round(this._chart.model().timeScale().coordinateToIndex(t.localX)),void((!e.enabled("charting_library_base")||L>=0)&&this._chart.model().coninueCreatingLine({index:L,price:k}))}if(this._chart.draggingSource&&(I=t.target,A=this._chart.paneByCanvas(I),A&&(A!==this?A.setDragToAnotherPaneCursor():A.setCursorForTool()),E=this._chart.priceAxisByCanvas(I),E&&E.setCursor("grabbing"),(M=this._chart.timeAxisByCanvas(I))&&M.setCursor("grabbing")),r.timeScale().isEmpty())return;if(r.customMoveBeingProcessed())return void r.processCustomMove(new o(s,a));if(r.lineBeingEdited())return L=Math.round(this._chart.model().timeScale().coordinateToIndex(s)),(!e.enabled("charting_library_base")||L>=0)&&r.changeLinePoint({x:s,y:a},i),this._updateTooltip(s,a),void this.setCursorForTool();if(r.sourceBeingMoved()){if(D=r.sourceBeingMoved(),T=D.priceScale(),T.isEmpty())return;if(V=D.ownerSource(),
x=(V||this._state.mainDataSource()).firstValue(),L=this._chart.model().timeScale().coordinateToIndex(t.localX),k=T.coordinateToPrice(t.localY,x),this.setCursorForTool(),e.enabled("charting_library_base")&&!D.onlyYMoving()&&(R=D.points(),0!==R.length&&R.reduce(function(t,e){return e.index<t.index?e:t}).index-((D._currentMovingPoint||D._startMovingPoint).index-L)<0))return;return TradingView.isInherited(D.constructor,d)&&D.isFixed()?void r.moveSource(new o(s,a)):void r.moveSource({index:L,price:k},i)}if(i.control&&this._clonningAtMoveLineTool)return m=this._clonningAtMoveLineTool,B=this.cloneLineTool(m,!0),F=this._chart.model().model().dataSourceForId(B),this._chart.model().setSelectedSource(F),x=this._state.mainDataSource().firstValue(),r.startMovingSource(F,{index:this._chart.model().timeScale().coordinateToIndex(t.localX),price:m.priceScale().coordinateToPrice(t.localY,x)}),void(this._clonningAtMoveLineTool=null);T=this._state.defaultPriceScale(),!this._startScrollingPos&&e.enabled("chart_scroll")&&(this._startScrollingPos={x:t.clientX,y:t.clientY}),this._startScrollingPos&&(this._startScrollingPos.x===t.clientX&&this._startScrollingPos.y===t.clientY||this._isScrolling||(r.beginUndoMacro("scroll").setCustomFlag("doesnt_affect_save",!0),T.isEmpty()||r.startScrollPrice(this._state,T,t.localY),r.startScrollTime(t.localX),this._isScrolling=!0,this.setCursorForTool())),this._isScrolling&&(T.isEmpty()||r.scrollPriceTo(this._state,T,t.localY),r.scrollTimeTo(t.localX))}}},n.prototype._processMouseUpForCustomHandler=function(t){var e,i=this.dataSourceAtPoint(t.localX,t.localY);i.hittest&&i.hittest.result()===D.CUSTOM&&(e=i.hittest.data().mouseUpHandler)&&e(t)},n.prototype.mouseUpEvent=function(t){var e,i,n,o,s,a,l,c,h,u,d,_,m,g,y,v,b,S,w,P,T,C,x,k,L,I,A,E,M,D,B,F,N;if(this._state){if(this._processMouseUpForCustomHandler(t),this._clonningAtMoveLineTool=null,e=this,R.emit("mouse_up",{clientX:t.clientX,clientY:t.clientY,pageX:t.pageX,pageY:t.pageY,screenX:t.screenX,screenY:t.screenY}),i=this._chart.model(),n=this._touchMove,delete this._touchMove,o=O.tool.value(),TradingView.supportTouch()&&!n&&"LineToolBrush"!==o&&f(o)&&!i.lineBeingCreated())return s=i.crossHairSource().currentPoint(),a=this._state.defaultPriceScale(),l=this._state.mainDataSource().firstValue(),c=a.coordinateToPrice(s.y,l),h=Math.round(i.timeScale().coordinateToIndex(s.x)),u={index:h,price:c},d=i.createLineTool(this._state,u,o),i.setSelectedSource(d),i.lineBeingCreated()||this._finishTool(d),this._updateTooltip(s.x,s.y),void delete this._startTouchPoint;if(i.lineBeingCreated()&&!(i.lineBeingCreated()instanceof p)&&this._startTouchPoint)return _=!1,delete this._startTouchPoint,n||(d=i.lineBeingCreated(),m=d.points()[d.points().length-1],c=m.price,_=i.coninueCreatingLine({index:m.index,price:c},{}),delete this._lastDrawingPoint),void(_&&this._finishTool(d));if(this._firstZoomPoint&&this._firstZoomPoint.draggingMode)return void this._finishZoom(t);if(0===t.button||TradingView.supportTouch()){if(this._processing=!1,i=this._chart.model(),
i.customMoveBeingProcessed()&&i.endCustomMoving(),i.lineBeingEdited())return i.endChangingLinetool(),void this._hideTooltip();if("LineToolBrush"===o&&!this._isSelectBarModeEnabled()){if(i.finishLineTool(),a=this._state.defaultPriceScale(),a.isEmpty())return;if(!(g=this._chart.model().lineBeingCreated()))return;return l=g.ownerSource().firstValue(),c=a.coordinateToPrice(t.localY,l),h=Math.round(this._chart.model().timeScale().coordinateToIndex(t.localX)),void this._chart.model().coninueCreatingLine({index:h,price:c})}if(y=i.sourceBeingMoved())return i.endMovingSource(),this._hideTooltip(),this.setCursorForTool(y),void i.invalidate(new V(V.UPDATE_CURSOR_ONLY));if(this._chart.readOnly()||(v=this.dataSourceAtPoint(t.localX,t.localY),b=this._chart.model().crossHairSource(),S=t.localX>=0&&t.localX<this.size.w,v&&v.source===b||!S||(w=e._chart.model().timeScale().coordinateToIndex(t.localX),e._chart.model().model().onSyncScrollNeeded(w))),P=this._isScrolling&&this._chart.model().undoHistory.undoStack().head()instanceof r,this._isScrolling&&(a=this._state.defaultPriceScale(),i.endScrollPrice(this._state,a),e=this,T=function(){i.endScrollTime(),i.endUndoMacro(),e._startScrollingPos=void 0,e._isScrolling=!1,e.setCursorForTool()},TradingView.supportTouch()?(C=i.timeScale().m_scrollStartPoint,x=.05*(t.localX-C),k=null,L=function(e){var n,o;null===k&&(k=e),n=.01*Math.min(100,3*(e-k)),n=Math.sqrt(n),o=t.localX+x*n,i.scrollTimeTo(o),n>=1?T():requestAnimationFrame(L)},requestAnimationFrame(L)):T()),this._chart.draggingSource)for(I=t.target,A=this._chart.paneByCanvas(I),A&&A!==this&&(E=A._state.findSuitableScale(this._chart.draggingSource),P&&(P=!1,this._chart.model().undoHistory.undo()),this._chart.model().move(this._chart.draggingSource,A._state,E)),M=this._chart.timeAxisByCanvas(I),M&&(P&&(P=!1,this._chart.model().undoHistory.undo()),this._chart.model().move(this._chart.draggingSource,null,null)),this._chart.draggingSource=null,D=this._chart.getTimeScale(),D&&D.restoreDefaultCursor(),v=this.dataSourceAtPoint(t.localX,t.localY),B=this._chart.paneWidgets(),F=0;F<B.length;F++)N=B[F],N===this&&v?N.setCursorForTool(v.source,v.hittest||null):N.setCursorForTool(),N.lhsPriceAxisWidget.restoreDefaultCursor(),N.rhsPriceAxisWidget.restoreDefaultCursor()}delete this._touchMove}},n.prototype.mouseLeaveEvent=function(t){var e,i;this._state&&(e=this._chart.model())&&(TradingView.isMobile.any()||e.model().clearCurrentPosition(),e.setHoveredSource(null),null!==this._prevHoveredHittest&&(i=this._prevHoveredHittest.hittest.data().mouseLeaveHandler,i&&i(t),this._prevHoveredHittest=null),this._updateCommonTooltip(null),"function"==typeof this.onMouseLeave&&this.onMouseLeave(this))},n.prototype.mouseClickEvent=function(t){var e,i,n,o;this._state&&(e=this.dataSourceAtPoint(t.localX,t.localY),i=this._chart.model(),n=e.source,this._lastClickedSource!==n&&(this._lastClickedSource&&(this._lastClickedSource.onClickOutside(t),i.chartModel().updateSource(this._lastClickedSource)),this._lastClickedSource=n),
e.hittest&&e.hittest.result()===D.CUSTOM&&(o=e.hittest.data().mouseClickHandler)&&(o(t),i.chartModel().updateSource(n)),i.hoveredSource()instanceof g&&i.hoveredSource().onClicked())},n.prototype.showEditDialogForSource=function(t){if(this._options.propertyPagesEnabled&&(!t.userEditEnabled||t.userEditEnabled())){var e=this;b(t,this._chart.model()).then(function(t){e._editDialog=t})}},n.prototype.mouseDoubleClickEvent=function(t){var e,i,n;this._state&&(e=!this._chart.readOnly()&&!f(O.tool.value())&&this.dataSourceAtPoint(t.localX,t.localY),i=e&&e.hittest&&e.source,i&&e.hittest.result()<=D.MOVEPOINT_BACKGROUND&&!TradingView.isMobile.any()&&(i=null),i&&i.customization&&i.customization.disableSelection&&(i=null),i&&i._metaInfo&&"Sessions@tv-basicstudies"===i._metaInfo.id&&(i=this._chart.model().mainSeries()),i?(n=!1,n?TradingView.alertsDispatcher.openEditDialog(e.source.alert()):this.showEditDialogForSource(i)):this._chart.readOnly()||f(O.tool.value())||this._chart.model().lineBeingCreated()||this._chart.model().selectedSource()||this._chart.toggleMaximizePane(this))},n.prototype.showContextMenuForSource=function(t,e){t.hasContextMenu()&&(this._chart.model().setSelectedSource(t),t.constructor===TradingView.Series?this._seriesContextMenu(t).show(e):TradingView.isInherited(t.constructor,s)?this._studyContextMenu(t).show(e):TradingView.isInherited(t.constructor,h)||TradingView.isInherited(t.constructor,u)?this._tradingDrawingsContextMenu(t).show(e):TradingView.isInherited(t.constructor,d)?this._lineContextMenu(t).then(function(t){t.show(e)}):t===this._chart.model().crossHairSource()&&t.handleContextMenuEvent(e))},n.prototype.contextMenuEvent=function(t,e){var i,n,o,r;if(this._chart.model().crossHairSource().startMeasurePoint())return void this._chart.model().crossHairSource().clearMeasure();if(!this._pinching&&(this._firstZoomPoint&&this.cancelZoom(),!this.hideInplaceEditor())){if(!O.toolIsCursor(O.tool.value())&&!this._isSelectBarModeEnabled()){if(TradingView.isMobile.any())return;return O.resetToCursor(!0),this.setCursorForTool(),this._hideTooltip(),void(this._chart.model().lineBeingCreated()&&this._chart.model().cancelCreatingLine())}this._options.contextMenuEnabled&&(this._chart.model().mainSeries().createSessStudy(),this._contextMenuX=t.localX,this._contextMenuY=t.localY,i=this.dataSourceAtPoint(t.localX,t.localY),n=i?i.source:null,o=i&&i.hittest?i.hittest.result():0,r=o>=D.REGULAR||o>=D.MOVEPOINT_BACKGROUND&&TradingView.isMobile.any(),this._chart.updateActions(),null!==n&&r?this.showContextMenuForSource(n,t):(this._contextMenu(t).then(function(e){return e.show(t)}),this._chart.model().setSelectedSource(null)),this.paint())}},n.prototype._contextMenu=function(t){function e(t){return null===t.text}var i=this;return Promise.all(this._initActions(t)).then(function(t){var n,o,r=i._customActions();for(t=t.filter(function(t){return null!==t}),r.remove.forEach(function(e){for(var i=0;i<t.length;i++)if(t[i].text===e){t.splice(i,1);break}}),n=r.top.concat(t).concat(r.bottom),
o=n.length-1;o>0;o--)e(n[o])&&e(n[o-1])&&n.splice(o,1);return n.length&&e(n[0])&&n.splice(0,1),n.length&&e(n[n.length-1])&&n.splice(n.length-1,1),M.createMenu(n,{statName:"ChartContextMenu"})})},n.prototype.createRemoveMenu=function(){var t,e=this._chart.actions(),i=new I({text:window.t("Remove"),statName:"Remove"});return i.subActions||(i.subActions=[]),t=i.subActions,t.push(e.paneRemoveAllStudies,e.paneRemoveAllDrawingTools,e.paneRemoveAllStudiesDrawingTools),i},n.prototype.createDrawingMenu=function(){var t,i,n=this._chart.actions(),o=new I({text:window.t("Drawing Tools"),statName:"DrawingTools"});return o.subActions||(o.subActions=[]),t=o.subActions,e.enabled("left_toolbar")&&t.push(n.drawingToolbarAction),e.enabled("items_favoriting")&&null!==(i=P())&&t.push(i),0!==o.subActions.length&&t.push(new E),t.push(n.magnetAction,n.stayInDrawingModeAction),this._chart.isMultipleLayout()&&t.push(n.syncModeAction),t.push(new E,n.lockDrawingsAction,n.hideAllDrawingsAction,n.paneRemoveAllDrawingTools),o},n.prototype._initActions=function(t){var i,n,o,r,s,a=this,l=this._chart.actions(),c=[];return e.enabled("datasource_copypaste")&&(!(i=z.get())||"study"!==i.type&&"drawing"!==i.type||(n=new I({text:window.t("Paste %s").replace("%s",window.t(i.title||i.type)),shortcut:"Ctrl-V",statName:"Paste"}),n.callbacks().subscribe(null,function(){a._chart.onAppClipboardPaste(a.state())}),c.push(n))),this.chart().onWidget()||c.push(this.createActionTrade(t).catch(function(){return null})),l.gotoDate&&c.push(l.gotoDate),c.length&&c.push(new E),c.push(l.chartReset,l.symbolSearch,l.changeInterval),o=window.widgetbar&&(!window.widgetbar._customization||window.widgetbar._customization.watchlist),o&&l.addToWatchlist&&c.push(l.addToWatchlist),e.enabled("text_notes")&&v("text_notes")&&c.push(l.addToTextNotes),e.enabled("symbol_info")&&c.push(l.showSymbolInfoDialog),c.push(new E,this._createLockTimeAxisAction(t),new E,l.paneObjectTree,l.insertIndicator),e.enabled("charting_library_base")||c.push(l.applyStudyTemplate),e.enabled("compare_symbol")&&c.push(l.compareOrAdd),c.push(this.createDrawingMenu()),e.enabled("charting_library_base")&&c.push(l.hideAllMarks),c.push(this.createRemoveMenu(),new E),r=this._priceAxisMenu(),r&&c.push(r),s=this._timeAxisMenu(),s&&c.push(s),e.enabled("charting_library_base")||c.push(l.applyColorTheme),e.enabled("show_chart_property_page")&&c.push(l.chartProperties),pro.hasPackage("mtp-mtpredictor")&&T(this._state).containsMainSeries()&&c.push(new E,this._createMTPredictorActions()),c},n.prototype._customActions=function(){var t,i,n,o={top:[],bottom:[],remove:[]},r=this._chart.model(),s=r.timeScale(),a=this._state&&this._state.defaultPriceScale();return e.enabled("custom_items_in_context_menu")?(t=s.isEmpty()?void 0:s.indexToUserTime(s.coordinateToIndex(this._contextMenuX)),a&&!a.isEmpty()&&(n=this._state.mainDataSource().firstValue(),i=a.coordinateToPrice(this._contextMenuY,n)),R.emit("onContextMenu",{unixtime:t?t/1e3:void 0,price:i,callback:function(t){[].concat(t).forEach(function(t){
if(t.text)if(t.text.length>1&&"-"===t.text[0])o.remove.push(t.text.slice(1));else{var e;"-"===t.text?e=new E:(e=new I({text:t.text}),e.callbacks().subscribe(null,t.click)),t.position&&"top"===t.position?o.top.push(e):o.bottom.push(e)}})}}),o):o},n.prototype._timeAxisMenu=function(){if(this._chart.model().timeScale().isEmpty())return null;var t=this._chart.getTimeScale();return new I({text:window.t("Time Scale"),subActions:t.getContextMenuActions(),statName:"TimeScale"})},n.prototype.getDefaultPriceAxisWidget=function(){if(!this._state)return null;var t=this._state.defaultPriceScale();return t.isEmpty()?null:t===this._state.leftPriceScale?this.leftPriceAxisWidget():this.rightPriceAxisWidget()},n.prototype._priceAxisMenu=function(){var t=this.getDefaultPriceAxisWidget();return t?new I({text:window.t("Price Scale"),subActions:t.getContextMenuActions(),statName:"PriceScale"}):null},n.prototype._seriesContextMenu=function(t){var i,n,o,r,s,a=this._chart.actions(),l=t.properties().visible.value(),c=null;if(this._chart.readOnly())i=[l?a.seriesHide:this.createActionShow(t),new E,this.createActionShowCountdown(t),new E,this.createActionScaleLeft(t),this.createActionScaleRight(t),this.createActionNoScale(t)],e.enabled("countdown")||i.splice(3,1),c=M.createMenu(i);else{if(n=this._mergeContentMenuItems(t),o=[a.showSymbolInfoDialog,a.compare,l?a.seriesHide:this.createActionShow(t),this.createVisualOrderAction(t),new E,this.createActionShowCountdown(t),new E],e.enabled("countdown")||o.splice(5,2),e.enabled("compare_symbol")||o.splice(1,1),e.enabled("symbol_info")||o.splice(0,1),!this.chart().onWidget()&&e.enabled("show_chart_property_page")&&o.unshift(a.format),r=this.createActionLockScale(t),r&&o.push(r,new E),n.length>0){for(s=0;s<n.length;s++)o.push(n[s]);o.push(new E)}o.push(this.createActionScaleLeft(t),this.createActionScaleRight(t),this.createActionNoScale(t)),pro.hasPackage("mtp-mtpredictor")&&o.push(new E,this._createMTPredictorActions()),c=M.createMenu(o)}return c},n.prototype.toggleLockTimeAxis=function(t,e){var i,n,o;"boolean"!=typeof e&&(e=!O.lockTimeAxis().value()),e&&(i=this._chart.model().timeScale(),n=i.coordinateToIndex(t),o=i.points().roughTime(n),O.lockTimeAxisTime.setValue(o)),O.lockTimeAxis().setValue(e)},n.prototype._createLockTimeAxisAction=function(t){var e=new I({text:window.t("Lock Cursor in Time"),checkable:!0,statName:"ToggleLockCursorInTime"}),i=O.lockTimeAxis().value();return e.setChecked(i),e.callbacks().subscribe(null,this.toggleLockTimeAxis.bind(this,t.localX,!i)),e},n.prototype._createHVLineAction=function(t,e){e="vertical"===e&&"vertical"||"horizontal";var i=new I({text:"vertical"===e?window.t("Create Vertical Line"):window.t("Create Horizontal Line"),statName:"vertical"===e?"CreateVerticalLine":"CreateHorizontalLine"});return i.callbacks().subscribe(this,function(){var i=T(this._state),n=i.mainDataSource().firstValue(),o=this._chart.model().timeScale().coordinateToIndex(t.localX),r=i.defaultPriceScale().coordinateToPrice(t.localY,n),s=this._chart.model().createLineTool(i,{index:o,price:r
},"vertical"===e&&"LineToolVertLine"||"LineToolHorzLine");this._finishTool(s)}),i},n.prototype._createMTPredictorActions=function(){var t=this,e=function(e,i,n){var o=new I({text:e});return o.callbacks().subscribe(t,function(){var t,e,o,r=this._chart.model(),s=r.timeScale(),a=T(this._state),l=a.defaultPriceScale();s.isEmpty()||l.isEmpty()||(n?(t=a.mainDataSource().firstValue(),e=l.coordinateToPrice(this._contextMenuY,t),o=Math.round(s.coordinateToIndex(this._contextMenuX)),r.createLineTool(a,{index:o,price:e},i)):O.tool.setValue(i))}),o};return new I({text:window.t("MTPredictor"),subActions:[e(window.t("Apply Manual Risk/Reward"),"LineStudyMtpRiskReward",!1),e(window.t("Apply Manual Decision Point"),"LineStudyMtpDecisionPoint",!0),e(window.t("Analyze Trade Setup"),"LineStudyMtpAnalysis",!0),new I({text:window.t("Apply Elliot Wave"),subActions:[e(window.t("Apply Elliot Wave Intermediate"),"LineStudyMtpElliotWaveMain",!0),e(window.t("Apply Elliot Wave Major"),"LineStudyMtpElliotWaveMajor",!0),e(window.t("Apply Elliot Wave Minor"),"LineStudyMtpElliotWaveMinor",!0)]}),new I({text:window.t("Apply WPT Up Wave"),subActions:[e(window.t("Up Wave 1 or A"),"LineStudyMtpUpWave1OrA",!1),e(window.t("Up Wave 2 or B"),"LineStudyMtpUpWave2OrB",!1),e(window.t("Up Wave C"),"LineStudyMtpUpWaveC",!1),e(window.t("Up Wave 3"),"LineStudyMtpUpWave3",!1),e(window.t("Up Wave 4"),"LineStudyMtpUpWave4",!1),e(window.t("Up Wave 5"),"LineStudyMtpUpWave5",!1)]}),new I({text:window.t("Apply WPT Down Wave"),subActions:[e(window.t("Down Wave 1 or A"),"LineStudyMtpDownWave1OrA",!1),e(window.t("Down Wave 2 or B"),"LineStudyMtpDownWave2OrB",!1),e(window.t("Down Wave C"),"LineStudyMtpDownWaveC",!1),e(window.t("Down Wave 3"),"LineStudyMtpDownWave3",!1),e(window.t("Down Wave 4"),"LineStudyMtpDownWave4",!1),e(window.t("Down Wave 5"),"LineStudyMtpDownWave5",!1)]})]})},n.prototype.createEarningsShow=function(t){var e=this._chart.model().mainSeries().properties().esdShowEarnings,i=new I({checkable:!0,text:window.t("Show Earnings"),enabled:!0,checked:e.value(),statName:"ToggleShowEarnings"});return i.callbacks().subscribe(this,function(t){this._chart.model().setProperty(e,t.checked,"Show Earnings")}),i},n.prototype.createDividendsShow=function(t){var e=this._chart.model().mainSeries().properties().esdShowDividends,i=new I({checkable:!0,text:window.t("Show Dividends"),enabled:!0,checked:e.value(),statName:"ToggleShowDividends"});return i.callbacks().subscribe(this,function(t){this._chart.model().setProperty(e,t.checked,"Show Dividends")}),i},n.prototype.createSplitsShow=function(t){var e=this._chart.model().mainSeries().properties().esdShowSplits,i=new I({checkable:!0,text:window.t("Show Splits"),enabled:!0,checked:e.value(),statName:"ToggleShowSplits"});return i.callbacks().subscribe(this,function(t){this._chart.model().setProperty(e,t.checked,"Show Splits")}),i},n.prototype._studyEsdContextMenu=function(t){var e=[];return this._chart.readOnly()||e.push(this.createDividendsShow(t),this.createSplitsShow(t),this.createEarningsShow(t)),M.createMenu(e)},
n.prototype._studyContextMenu=function(t){var i,n,o,r,s,l=this._chart.actions(),c=t.properties().visible.value(),h=[];return t.userEditEnabled()?(i=this._chart,this._chart.readOnly()?(h=[c?l.studyHide:this.createActionShow(t),new E],TradingView.isInherited(t.constructor,a)||(h.push(this.createActionScaleLeft(t)),h.push(this.createActionScaleRight(t)),h.push(this.createActionNoScale(t)))):(n=[],o=t.metaInfo(),o.pine&&(n=[l.viewSourceCode],l.viewSourceCode.setEnabled(!0),ScriptLib.isAuthToGetPineSourceCode(o.scriptIdPart,o.pine.version).done(function(t){t||l.viewSourceCode.setEnabled(!1)}).fail(function(t){G.logError("Failed isAuthToGetPineSourceCode, reason: "+t)})),h=[],e.enabled("study_on_study")&&t.canHaveChildren()&&h.push(this.createActionAddChildStudy(t)),e.enabled("property_pages")&&h.push(l.format),h=h.concat(n),h=h.concat([c?l.studyHide:this.createActionShow(t),this.createVisualOrderAction(t),new E]),TradingView.isInherited(t.constructor,a)||(r=this._mergeContentMenuItems(t),!r.length||t.properties().linkedToSeries&&t.properties().linkedToSeries.value()||(r.push(new E),h=h.concat(r)),h.push(this.createActionScaleLeft(t),this.createActionScaleRight(t),this.createActionNoScale(t),new E)),e.enabled("datasource_copypaste")&&!t.isChildStudy()&&(s=new I({text:window.t("Copy"),shortcut:"Ctrl-C",statName:"Copy"}),s.callbacks().subscribe(null,function(){i.onAppClipboardCopy(t)}),h.push(s)),h.push(l.studyRemove)),M.createMenu(h)):M.createMenu(h)},n.prototype.createLineToolTemplateAction=function(t){var e,i,n,o,r,s,a;return window.lineToolPropertiesToolbar?(e=window.lineToolPropertiesToolbar.templatesList(),i=new I({text:window.t("Templates"),statName:"Templates"}),i.subActions||(i.subActions=[]),n=i.subActions,o=new I({text:window.t("Save As..."),statName:"SaveAs"}),o.callbacks().subscribe(this,function(){e.showSaveDialog(function(i){var n=JSON.stringify(t.template());e.saveTemplate(i,n)})}),n.push(o),r=new I({text:window.t("Apply Default"),statName:"ApplyDefault"}),r.callbacks().subscribe(this,function(){this._chart.model().restoreLineToolFactoryDefaults(t,"Load default drawing template"),window.lineToolPropertiesToolbar.onSourceChanged(t)}),n.push(r),s=$.Deferred(),e.templatesLoaded().then(function(){var t=e.getData(),i=[];0!==t.length&&i.push(new E),$.each(t,function(t,n){function o(t){return function(){var i=this.getTopLevelMenu();return i&&i.hide(),e.deleteAction(t),!0}}var r=new I({text:n,statName:"ApplyTemplate"});r.callbacks().subscribe(this,function(){e.loadTemplate(n)}),r.deleteButton={action:o(r.text)},i.push(r)}),s.resolve(i)}),a=new A(s),n.push(a),i):null},n.prototype._lineContextMenu=function(t){var o=[],r=this._chart,s=r.actions(),a=this;return new Promise(function(l){i.e(36).then(function(c){var h,u,d,p,_,f,m=i(813).hasStylesPropertyPage;if(r.readOnly())o.push(s.lineHide);else if(t.userEditEnabled()&&(e.enabled("alerts")&&!a.chart().onWidget()&&t.hasAlert.value()&&o.push(a._createEditAlertDrawingAction(t)),e.enabled("property_pages")&&m(t,r.model())&&o.push(s.format),o.push(s.paneObjectTree),
e.enabled("charting_library_base")||null!==(h=a.createLineToolTemplateAction(t))&&o.push(h),o.push(a.createVisualOrderAction(t),new E,s.lineHide,s.lineToggleLock),t.properties().clonable&&t.properties().clonable.value()&&(u=new I({text:window.t("Clone"),callbackContext:{target:t},shortcut:"Ctrl+Drag",doNotBindShortcut:!0,statName:"Clone"}),u.callbacks().subscribe(a,n.prototype.cloneLineTool.bind(a,t,!1)),o.push(u)),e.enabled("datasource_copypaste")&&!t.properties().blockCopying&&(d=new I({text:window.t("Copy"),shortcut:"Ctrl-C",statName:"Copy"}),d.callbacks().subscribe(null,function(){r.onAppClipboardCopy(t)}),o.push(d)),e.enabled("support_multicharts")&&(t.linkKey?a.chart().isMultipleLayout()&&o.push(s.lineUnlink):a.chart().isMultipleLayout()&&o.push(s.lineCopyToCharts)),o.push(s.lineRemove),t.additionalActions))for(o.push(new E),p=t.additionalActions(r.model()),_=0;_<p.length;_++)o.push(p[_]);f=M.createMenu(o),l(f)}.bind(null,i)).catch(i.oe)})},n.prototype._tradingDrawingsContextMenu=function(t){return M.createMenu(t.contextMenuItems())},n.prototype._chartEventsContextMenu=function(t){var i,n,o,r=[];return e.enabled("property_pages")&&(i=this._chart,n=new I({text:window.t("Format..."),enabled:!0,statName:"Format"}),n.callbacks().subscribe(this,function(t){TVSettings.setValue("properties_dialog.active_tab.chart",window.t("Events & Alerts")),i.showChartProperties()}),r.push(n)),o=new I({text:window.t("Hide Events on Chart"),enabled:!0,statName:"HideEvents"}),o.callbacks().subscribe(this,function(e){t.properties().visible.setValue(!1)}),r.push(o),M.createMenu(r)},n.prototype._createAlertToggleHorzLineLabelAction=function(t){var e=t.properties().line.visible,i=new I({checkable:!0,text:window.t("Extend Alert Line"),enabled:!0,checked:e.value(),statName:"ToggleExtendAlertLine"});return i.callbacks().subscribe(this,function(t){var i=t.checked,n=i?window.t("Show alert label line"):window.t("Hide alert label line");this._chart.model().setProperty(e,i,n)}),i.setEnabled(t.globalProperties().line.visible.value()),i},n.prototype._createShowGlobalAlertPropertiesLabelAction=function(t){var e=this.chart(),i=new I({text:window.t("Visual settings..."),statName:"VisualSettings"});return i.callbacks().subscribe(this,function(t){e.showChartProperties({selectAlertEvent:!0})}),i},n.prototype._createEditAlertDrawingAction=function(t){if(t.hasAlert.value()){var e=new I({text:window.t("Edit {0} Alert...").format(t.title()),statName:"EditAlert"});return e.callbacks().subscribe(null,function(){runOrSignIn(function(){t.editAlert()},{source:"Alert edit from pane context menu"})}),e}},n.prototype.cloneLineTool=function(t,e){return this._chart.model().cloneLineTool(t,e)},n.prototype.setPriceAxisSize=function(t,e){this._priceAxisWidget(t).setSize(e)},n.prototype.setPriceAxisVisible=function(t,e){this._priceAxisWidget(t).setVisible(e),this._cachedStatus=null},n.prototype.resetPriceAxisOptimalWidth=function(t){this._priceAxisWidget(t).resetOptimalWidth(),this._cachedStatus=null},n.prototype.setSize=function(t){
this.size&&this.size.equals(t)||(this.size=t,F(this.canvas,t),F(this.top_canvas,t),this.ctx=this.canvas.getContext("2d"),this.jqPane.width(t.w),this.jqPane.height(t.h),this._cachedStatus=null,this.jqRow.toggleClass("js-hidden",0===t.h))},n.prototype.dataSourceAtPoint=function(t,e){var i,n,r,s,a,l,c,h,u,d,p,_,f,m,g,y,v,b=null,S=null,w=null;if(!this._state)return null;for(i=this._state.hitTestSources(),n=new o(t,e),r=i.length;0<r--;)if(s=i[r],a=s.paneViews(this._state))for(l=a.length;0<l--;)(c=a[l].renderer(e))&&c.hitTest&&(h=c.hitTest(n))&&(u=w?w.result():0,h.result()>u&&(w=h,b=s,S=c));if(this.containsMainSeries()){for(d=this._chart.model().barsMarksSources(),r=0;r<d.length;++r)for(s=d[r],a=s.paneViews(),l=0;l<a.length;l++)if(c=a[l].renderer(e),p=c.hitTest(n)){w=p,b=s,S=c;break}_=this._chart.model().activeStrategySource().value(),f=_&&_._strategyOrdersPaneView,f&&(m=f.renderer())&&(g=m.hitTest(n))&&(w=g,b=_,S=m)}return null===b&&null!==this._legendWidget&&(b=this._legendWidget.dataSourceAtPoint(t,e)),y=this._chart.model().brandingSource(),y&&(v=y.paneViews(this._state),v.forEach(function(t){var e=t.renderer().hitTest(n);e&&(w=e,b=y,S=t.renderer())})),{source:b,hittest:w,renderer:S}},n.prototype.update=function(){this.lhsPriceAxisWidget.update(),this.rhsPriceAxisWidget.update(),null!==this._legendWidget&&this._legendWidget.update(),this.updateControls()},n.prototype.updateControls=function(){null!==this._paneControls&&this._paneControls.update()},n.prototype.drawBackground=function(t,e){W(t,0,0,this.size.w,this.size.h,e)},n.prototype.drawGrid=function(t){var e,i,n=T(this._state),o=this._chart.model().gridSource(),r=o.paneViews(n),s=n.height(),a=n.width();for(e=0;e<r.length;e++)t.save(),i=r[e].renderer(s,a),i&&i.draw(t),t.restore()},n.prototype.drawWatermark=function(t){var e,i,n,o,r,s,a=this._chart.model().watermarkSource();if(null!==a)for(e=T(this._state),i=a.paneViews(e),n=e.height(),o=e.width(),r=0;r<i.length;r++)t.save(),s=i[r].renderer(n,o),s&&s.draw(t),t.restore()},n.prototype.drawBranding=function(t){var e,i,n,o,r,s,a=this._chart.model().brandingSource();if(a)for(e=T(this._state),i=a.paneViews(e),n=e.height(),o=e.width(),r=0;r<i.length;r++)(s=i[r].renderer(n,o))&&(t.save(),s.draw(t),t.restore())},n.prototype.drawCrossHair=function(t){var e=this._chart.model().crossHairSource();e.linesShouldBeHidden()||(!e.visible&&O.lockTimeAxis().value()&&(e.setLockedPosition(T(this._state)),e.updateAllViews()),this._drawSource(e,t))},n.prototype._drawSource=function(t,e){var i,n,o,r,s=T(this._state),a=t.paneViews(s);if(a)for(i=s.height(),n=s.width(),o=0;o<a.length;o++)(r=a[o].renderer(i,n))&&(e.save(),r.draw(e),e.restore())},n.prototype._drawSourceStrategyOrders=function(t,e){var i,n=t._strategyOrdersPaneView;n&&(i=n.renderer())&&(e.save(),i.draw(e),e.restore())},n.prototype._drawSourceBackground=function(t,e){var i,n,o,r,s=T(this._state),a=t.paneViews(s);if(a)for(i=s.height(),n=s.width(),o=0;o<a.length;o++)(r=a[o].renderer(i,n))&&r.drawBackground&&(e.save(),r.drawBackground(e),e.restore())},
n.prototype.drawActiveLineTool=function(t){var e,i,n=[this._chart.model().lineBeingCreated(),this._chart.model().sourceBeingMoved(),this._chart.model().lineBeingEdited()];for(e=0;e<n.length;e++)(i=n[e])&&this._chart.model().paneForSource(i)===T(this._state)&&this._drawSource(i,t)},n.prototype.disableDrawOnTop=function(t){return t&&t.hasOwnProperty("_metaInfo")&&"Volume@tv-basicstudies"===t._metaInfo.id},n.prototype.drawSources=function(t){var e,i,n,o,r,s=T(this._state),a=s.orderedSources(),l=s.model(),c=this._chart.model().selectedSource(),h=this._chart.model().hoveredSource(),u=l.crossHairSource(),d=[this._chart.model().lineBeingCreated(),this._chart.model().sourceBeingMoved(),this._chart.model().lineBeingEdited()];for(this.disableDrawOnTop(c)&&(c=void 0),this.disableDrawOnTop(h)&&(h=void 0),e=this._chart.model().model().panes(),i=e.length-1;i>=0;i--)e[i].createDrawingsCaches();for(i=0;i<a.length;i++)this._drawSourceBackground(a[i],t);for(i=0;i<a.length;i++)(n=a[i])!==u&&n!==c&&n!==h&&-1===d.indexOf(n)&&this._drawSource(n,t);for(o=null,c&&-1===d.indexOf(c)&&-1!==a.indexOf(c)&&(o=c,this._drawSource(c,t)),h&&h!==o&&-1===d.indexOf(h)&&-1!==a.indexOf(h)&&this._drawSource(h,t),r=this._chart.model().activeStrategySource().value(),r&&this.containsMainSeries()&&this._drawSourceStrategyOrders(r,t),i=e.length-1;i>=0;i--)e[i].clearDrawingCaches()},n.prototype.recalculatePriceScale=function(){var t,e,i,n=T(this._state);for(n.recalculatePriceScale(n.m_rightPriceScale),n.recalculatePriceScale(n.m_leftPriceScale),t=n.dataSources(),e=0;e<t.length;++e)i=t[e],n.isOverlay(i)&&(i instanceof d||n.recalculatePriceScale(i.priceScale()),i.updateAllViews())},n.prototype.containsMainSeries=function(){return T(this._state).containsMainSeries()},n.prototype.drawBarsMarks=function(t,e){var i,n;this.containsMainSeries()&&!e&&(i=this._chart.model().barsMarksSources(),n=this,i.forEach(function(e){n._drawSource(e,t)}))},n.prototype._syncOverlays=function(){var t,e,i=T(this._state).orderedSources(),n={},o=this;$.each(i,function(){var t,e,i=this.paneViews(o._state);if(i)for(t=0;t<i.length;t++)e=i[t],e.uid&&(n[e.uid()]=e)});for(t in this._overlays)n[t]||(this._dv.remove(this._overlays[t]),this._overlays[t]=void 0);for(t in n)this._overlays[t]||(e=n[t].overlay(),this._dv.append(e),this._overlays[t]=e)},n.prototype.hardResetCanvas=function(){this.size&&(N(this.canvas,this.size),N(this.top_canvas,this.size),this.lhsPriceAxisWidget.hardResetCanvas(),this.rhsPriceAxisWidget.hardResetCanvas())},n.prototype.paint=function(t,e){if(t&&this._chart.model()&&this._state)if(this.lhsPriceAxisWidget.paint(t),this.rhsPriceAxisWidget.paint(t),t===V.FULL_UPDATE&&(this._cachedStatus=null),t===V.UPDATE_CURSOR_ONLY)this.top_ctx.clearRect(-.5,-.5,this.size.w,this.size.h),this.drawCrossHair(this.top_ctx),this.drawActiveLineTool(this.top_ctx);else{var i=this.ctx;this.top_ctx.clearRect(-.5,-.5,this.size.w,this.size.h),this.drawBackground(i,this.backgroundColor()),this._state&&(this.recalculatePriceScale(),this.drawGrid(i),this.drawWatermark(i),this.drawSources(i),
this.drawBarsMarks(i,e),this.drawCrossHair(this.top_ctx),this.drawActiveLineTool(this.top_ctx),this.drawBranding(i))}},n.prototype.leftPriceAxisWidget=function(){return this.lhsPriceAxisWidget},n.prototype.rightPriceAxisWidget=function(){return this.rhsPriceAxisWidget},n.prototype._priceAxisWidget=function(t){return l.isLeft(t)?this.lhsPriceAxisWidget:this.rhsPriceAxisWidget},n.prototype.statusWidget=function(){return this._legendWidget},n.prototype.onScaleLeft=function(t){var e=T(this._state),i=t.callbackContext();-1===e.leftPriceScale().dataSources().indexOf(i)&&this.chart().model().move(i,e,e.leftPriceScale())},n.prototype.onScaleRight=function(t){var e=T(this._state),i=t.callbackContext();-1===e.rightPriceScale().dataSources().indexOf(i)&&this.chart().model().move(i,e,e.rightPriceScale())},n.prototype.onNoScale=function(t){var e=T(this._state),i=t.callbackContext();e.isOverlay(i)||this.chart().model().move(i,e,null)},n.prototype.onRiskReward=function(t){},n.prototype.createActionTrade=function(t){var e=this,i=new Promise(function(i,n){var o,r,s=C();if(!s||!s.availableBrokers().length)return i(null);o=e._state,r=o.dataSources().filter(function(t){return t instanceof TradingView.Series})[0]||e._chart.model().mainSeries(),x(r,t.localY).then(function(t){try{return s.chartContextMenuActions(t)}catch(t){G.logError(t.message)}}).then(function(t){if(!t)return void i(null);i(new I({text:window.t("Trading"),subActions:t,statName:"Trading"}))}).catch(function(){n("Unable to get Trade Context")})});return w(i,2e3,"Action trade not received")},n.prototype.createActionRiskReward=function(t){var e=new I({checkable:!1,text:window.t("Risk/Reward"),enabled:!0,statName:"RiskReward"});return e.setCallbackContext(t),e.callbacks().subscribe(this,n.prototype.onRiskReward),e},n.prototype.createActionScaleLeft=function(t){var e=new I({checkable:!0,text:window.t("Scale Left"),enabled:!0,statName:"ToggleScaleLeft"});return e.setCallbackContext(t),e.setChecked(-1!==T(this._state).leftPriceScale().dataSources().indexOf(t)),e.callbacks().subscribe(this,n.prototype.onScaleLeft),e},n.prototype.createActionScaleRight=function(t){var e=new I({checkable:!0,text:window.t("Scale Right"),enabled:!0,statName:"ToggleScaleRight"});return e.setCallbackContext(t),e.setChecked(-1!==T(this._state).rightPriceScale().dataSources().indexOf(t)),e.callbacks().subscribe(this,n.prototype.onScaleRight),e},n.prototype.createActionNoScale=function(t){var e=this._chart.model().paneForSource(t),i=e.actionNoScaleIsEnabled(t),o=new I({checkable:!0,text:window.t("Screen (No Scale)"),enabled:i,statName:"ToggleNoScale"});return o.setCallbackContext(t),o.setChecked(T(this._state).isOverlay(t)),o.callbacks().subscribe(this,n.prototype.onNoScale),o},n.prototype.createActionShowCountdown=function(t){var e=new I({checkable:!0,text:window.t("Show Countdown"),enabled:!0,statName:"ToggleShowCountdown"}),i=this._chart.model().mainSeries().properties();return e._binding=new S(e,i.showCountdown,this._chart.model(),e.text),e._binding.setValue(i.showCountdown.value()),e},
n.prototype.createActionLockScale=function(t){var e,i,n;return t instanceof TradingView.Series?(e=c(t.priceScale(),this._chart.model().model().mainSeriesScaleRatio()),i=new I({checkable:t.priceScale().isLockScale(),text:window.t("Lock Scale")+" "+e,enabled:!0,statName:"LockScale"}),n=function(e){var i={lockScale:e.checked};this._undoModel.setPriceScaleMode(i,t.priceScale(),this._undoText)},i._binding=new S(i,t.priceScale().properties().lockScale,this._chart.model(),"Lock Scale",n),i):null},n.prototype.createActionMergeUp=function(t){if(!this._chart.model().model().isMergeUpAvailableForSource(t))return null;var e=new I({checkable:!1,text:window.t("Merge Up"),enabled:!0,statName:"MergeUp"});return e.setCallbackContext(t),e.callbacks().subscribe(this,n.prototype.onMergeUp),e},n.prototype.onMergeUp=function(t){var e=t.callbackContext();this._chart.model().mergeSourceUp(e)},n.prototype.createActionUnmergeUp=function(t){if(!this._chart.model().model().isUnmergeAvailableForSource(t))return null;var e=new I({checkable:!1,text:window.t("Unmerge Up"),enabled:!0,statName:"UnmergeUp"});return e.setCallbackContext(t),e.callbacks().subscribe(this,n.prototype.onUnmergeUp),e},n.prototype.onUnmergeUp=function(t){var e=t.callbackContext();this._chart.model().unmergeSourceUp(e)},n.prototype.createActionMergeDown=function(t){if(!this._chart.model().model().isMergeDownAvailableForSource(t))return null;var e=new I({checkable:!1,text:window.t("Merge Down"),enabled:!0,statName:"MergeDown"});return e.setCallbackContext(t),e.callbacks().subscribe(this,n.prototype.onMergeDown),e},n.prototype.onMergeDown=function(t){var e=t.callbackContext();this._chart.model().mergeSourceDown(e)},n.prototype.createActionUnmergeDown=function(t){if(!this._chart.model().model().isUnmergeAvailableForSource(t))return null;var e=new I({checkable:!1,text:window.t("Unmerge Down"),enabled:!0,statName:"UnmergeDown"});return e.setCallbackContext(t),e.callbacks().subscribe(this,n.prototype.onUnmergeDown),e},n.prototype.onUnmergeDown=function(t){var e=t.callbackContext();this._chart.model().unmergeSourceDown(e)},n.prototype._mergeContentMenuItems=function(t){var e=[],i=this.createActionMergeUp(t);return i&&e.push(i),i=this.createActionUnmergeUp(t),i&&e.push(i),i=this.createActionMergeDown(t),i&&e.push(i),i=this.createActionUnmergeDown(t),i&&e.push(i),e},n.prototype.createActionShow=function(t){var e=new I({checkable:!0,text:window.t("Show"),enabled:!0,statName:"ToggleShow"});return e._binding=new S(e,t.properties().visible,this._chart.model(),e.text),e._binding.setValue(t.properties().visible.value()),e},n.prototype.createActionAddChildStudy=function(t){var e=new I({text:window.t("Apply Indicator on {0} ...").format(t.title(!0)),enabled:!0,statName:"ApplyIndicator"});return e.callbacks().subscribe(this,function(){var e,i,n=this._chart.showIndicators(t);n&&(e=function(){y("SOS","Apply SOS","Apply by RC menu")},i=this._chart.model().model().studyInserted(),i.subscribe(this,e),n.visibilityChanged.subscribe(this,function(t){t||i.unsubscribe(this,e)},!0))}),e},
n.prototype.bringObjectForward=function(t){var e=this._chart.model().selectedSource();e&&this._chart.model().changeZOrder(e,1)},n.prototype.sendObjectToBack=function(t){var e=this._chart.model().selectedSource();e&&this._chart.model().sendToBack(e)},n.prototype.bringObjectToFront=function(t){var e=this._chart.model().selectedSource();e&&this._chart.model().bringToFront(e)},n.prototype.sendObjectBackward=function(t){var e=this._chart.model().selectedSource();e&&this._chart.model().changeZOrder(e,-1)},n.prototype.createVisualOrderAction=function(t){var e,i,o,r,s,a,l=new I({text:window.t("Visual Order"),statName:"VisualOrder"});return l.subActions||(l.subActions=[]),e=new I({text:window.t("Bring to Front"),statName:"BringToFront"}),e.callbacks().subscribe(this,n.prototype.bringObjectToFront),l.subActions.push(e),i=new I({text:window.t("Send to Back"),statName:"SendToBack"}),i.callbacks().subscribe(this,n.prototype.sendObjectToBack),l.subActions.push(i),o=new I({text:window.t("Bring Forward"),statName:"BringForward"}),o.callbacks().subscribe(this,n.prototype.bringObjectForward),l.subActions.push(o),r=new I({text:window.t("Send Backward"),statName:"SendBackward"}),r.callbacks().subscribe(this,n.prototype.sendObjectBackward),l.subActions.push(r),s=this._chart.model().paneForSource(t),a=s.getZOrderMinMax(),i.setEnabled(!0),o.setEnabled(!0),r.setEnabled(!0),e.setEnabled(!0),t.zorder()===a.minZOrder&&(i.setEnabled(!1),r.setEnabled(!1)),t.zorder()===a.maxZOrder&&(o.setEnabled(!1),e.setEnabled(!1)),l},n.prototype.image=function(){var t={};return t.leftAxis=this.leftPriceAxisWidget().image(),t.rightAxis=this.rightPriceAxisWidget().image(),t.content=this.canvas.toDataURL(),t.contentWidth=this.size.w,t.contentHeight=this.size.h,t},n.prototype._updateTooltip=function(t,e){if(!this._rafSet){var i=this;requestAnimationFrame(function(){i._state&&(i._updateTooltipImpl(t,e),i._rafSet=!1)}),this._rafSet=!0}},n.prototype._updateTooltipImpl=function(t,e){function i(i){function o(){return TradingView.isMobile.any()?{left:t-n._tooltipSelector.outerWidth()-16,top:e-n._tooltipSelector.outerHeight()-16}:{left:t+16,top:e+16}}TradingView[r].getTooltipText&&(i=TradingView[r].getTooltipText(a)||i),n._tooltipSelector.html(i).removeClass("tooltip-selector-hidden").css(o())}var n,o,r,s,a,l;if(this._chart){for(n=this,o=this._chart.paneWidgets(),r=O.tool.value(),s=T(this._state).model(),a=s.lineBeingCreated(),l=o.length-1;l>=0;l--)o[l]._hideTooltip();this._isSelectBarModeEnabled()||(m(r)&&!TradingView.isMobile.any()?i(window.t("Click to set a point")):TradingView.isMobile.any()&&"LineToolBrush"!==r&&f(r)&&!n._chart.model().lineBeingCreated()?i(window.t("1. Slide your finger to select location for first anchor<br>2. Tap anywhere to place the first anchor")):TradingView.isMobile.any()&&"LineToolBrush"!==r&&f(r)&&i(window.t("1. Slide your finger to select location for next anchor<br>2. Tap anywhere to place the next anchor")))}},n.prototype._hideTooltip=function(){this._tooltipSelector.addClass("tooltip-selector-hidden")},
n.prototype._updateCrosshairOnZoom=function(){var t,e;O.lockTimeAxis().value()&&(t=this._chart.model(),e=t.crossHairSource(),e.setPosition(e.index,e.price,T(this._state)))},n.prototype._isSelectBarModeEnabled=function(){return this._chart.model().crossHairSource().selectBarMode().value()},t.exports=n}).call(e,i(4))},function(t,e){},function(t,e,i){"use strict";function n(t,e){this._source=e,this._properties=t,this._points=[new l(-1,-1)],this._invalidated=!0,this._lineRenderer=new h}function o(){this._data=null}function r(t){this._source=t,this._points=[],this._bandBgRenderer=new o}function s(t,e,i){this._source=t,this._points=[],a(e.type===u.FilledArea.TYPE_HLINES,"Wrong filledArea type: "+e.type),this._initBandIndexes(e.objAId,e.objBId),this._fillStyleProps=i,this._bandBgRenderer=new o}var a=i(6).assert,l=i(7).Point,c=i(55).clamp,h=i(124).HorizontalLineRenderer,u=i(32),d=i(35);n.prototype.update=function(){this._invalidated=!0},n.prototype.updateImpl=function(){var t,e,i=this._source.priceScale();if(!i||i.isEmpty())return void(this._points[0]=new l(-1,-1));t=this._properties.value.value(),isNumber(t)?(e=this._source.firstValue(),this._points[0]=new l(-1,i.priceToCoordinate(t,e))):this._points[0]=new l(-1,NaN)},n.prototype.renderer=function(){this._invalidated&&(this.updateImpl(),this._invalidated=!1);var t={};return t.width=this._source.model().timeScale().width(),t.height=this._source.priceScale().height(),t.points=this._points,t.color=this._properties.color.value(),t.linewidth=this._properties.linewidth.value(),t.linestyle=this._properties.linestyle.value(),this._lineRenderer.setData(t),this._lineRenderer},o.prototype.setData=function(t){this._data=t},o.prototype.draw=function(t){var e,i,n;null!==this._data&&0!==this._data.points.length&&(e=t.canvas.width,t.fillStyle=d.generateColor(this._data.backcolor,this._data.transparency),i=Math.min(this._data.points[0],this._data.points[1]),n=Math.max(this._data.points[0],this._data.points[1]),t.fillRect(0,i,e,n-i))},o.prototype.hitTest=function(t){return null},r.prototype.update=function(){var t,e,i,n,o;this._points=[],t=this._source.properties().bandsBackground,t.fillBackground.value()&&(e=this._source.properties().bands[0],i=this._source.properties().bands[1],(n=this._source.priceScale())&&!n.isEmpty()&&(o=this._source.firstValue(),this._points.push(n.priceToCoordinate(e.value.value(),o)),this._points.push(n.priceToCoordinate(i.value.value(),o))))},r.prototype.renderer=function(){var t={};return t.points=this._points,t.backcolor=this._source.properties().bandsBackground.backgroundColor.value(),t.transparency=this._source.properties().bandsBackground.transparency.value(),this._bandBgRenderer.setData(t),this._bandBgRenderer},s.prototype._initBandIndexes=function(t,e){var i,n;for(this._bandAKey=null,this._bandBKey=null,i=0;i<this._source.metaInfo().bands.length;++i)n=this._source.metaInfo().bands[i],null!==this._bandAKey||n.id!==t?null!==this._bandBKey||n.id!==e||(this._bandBKey=i):this._bandAKey=i},s.prototype.update=function(){var t,e,i,n;this._points=[],
this._fillStyleProps.visible.value()&&(t=this._source.properties().bands[this._bandAKey],e=this._source.properties().bands[this._bandBKey],(i=this._source.priceScale())&&!i.isEmpty()&&(n=this._source.firstValue(),this._points.push(i.priceToCoordinate(t.value.value(),n)),this._points.push(i.priceToCoordinate(e.value.value(),n))))},s.prototype.renderer=function(){var t,e=this._fillStyleProps.transparency.value();return e=c(e,0,100),t={},t.points=this._points,t.backcolor=d.generateColor(this._fillStyleProps.color.value(),e),t.transparency=this._fillStyleProps.transparency.value(),this._bandBgRenderer.setData(t),this._bandBgRenderer},e.BandPaneView=n,e.BandBackgroundPaneView=r,e.HlineFillPaneView=s},function(t,e,i){"use strict";var n,o,r;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"StudyPriceAxisView",function(){return r}),n=i(0),o=i(54),r=function(t){function e(e,i){var n=t.call(this)||this;return n._source=e,n._data=i,n}return n.c(e,t),e.prototype._updateRendererData=function(t){t.visible=!1;var e=this._source.lastValueData(this._data.plotIndex,!1);e.noData||(t.background=e.color,t.color=this.generateTextColor(e.color),t.coordinate=e.coordinate,t.floatCoordinate=e.floatCoordinate,t.text=e.text,t.visible=!0)},e}(o.a)},function(t,e,i){"use strict";function n(t,e,i,n){var o,r;for(this.m_study=t,this.m_series=e,this.m_model=i,this._plotName=n,this.m_items=[],this._invalidated=!0,this._isMarkersEnabled=K.enabled("source_selection_markers"),o=this.m_study.metaInfo().plots,this._colorer=null,this._palette=null,this._paletterProps=null,this._plotIndex=0,r=0;r<o.length;r++)o[r].id===this._plotName&&(this._plotIndex=r),this.m_study.isSelfColorerPlot(r)&&o[r].target===this._plotName&&(this._colorer=r,this._palette=this.m_study.metaInfo().palettes[o[r].palette],this._paletterProps=this.m_study.properties().palettes[o[r].palette])}function o(t,e,i,n){var o,r;for(this._study=t,this._series=e,this._model=i,this._plotName=n,this._items=[],this._invalidated=!0,this._isMarkersEnabled=K.enabled("source_selection_markers"),o=this._study.metaInfo().plots,r=0;r<o.length;r++)o[r].id===this._plotName&&(this._plotIndex=r,d(this._study.isBgColorerPlot(r),"Plot '"+this._plotName+"' is not a background colorer!"))}function r(t,e,i,n){var o,r;for(this.m_study=t,this.m_series=e,this.m_model=i,this.m_plotName=n,this.m_items=[],this.m_invalidated=!0,this._isMarkersEnabled=K.enabled("source_selection_markers"),this.m_selectionData=null,this.m_plotIndex=null,o=this.m_study.metaInfo().plots,r=0;r<o.length;r++)if(o[r].id===this.m_plotName){this.m_plotIndex=r;break}for(o=this.m_study.metaInfo().plots,this._colorer=null,this._textColorer=null,this._palette=null,this._textPalette=null,this._paletterProps=null,this._textPaletterProps=null,this._plotIndex=0,r=0;r<o.length;r++)o[r].id===this.m_plotName&&(this._plotIndex=r),this.m_study.isSelfColorerPlot(r)&&o[r].target===this.m_plotName&&(this._colorer=r,this._palette=this.m_study.metaInfo().palettes[o[r].palette],this._paletterProps=this.m_study.properties().palettes[o[r].palette]),
this.m_study.isTextColorerPlot(r)&&o[r].target===this.m_plotName&&(this._textColorer=r,this._textPalette=this.m_study.metaInfo().palettes[o[r].palette],this._textPaletterProps=this.m_study.properties().palettes[o[r].palette])}function s(t,e,i,n){r.call(this,t,e,i,n)}function a(t,e,i,n){s.call(this,t,e,i,n)}function l(t,e,i,n){r.call(this,t,e,i,n),this._maxAbsValue=0}function c(t,e,i,n){var o,r;for(this.m_study=t,this.m_series=e,this.m_model=i,this.m_plotName=n,this.m_bars=[],this._invalidated=!0,this._isMarkersEnabled=K.enabled("source_selection_markers"),o=this.m_study.metaInfo().plots,this._colorer=null,this._palette=null,this._paletterProps=null,this._ohlcPlotIndexes={},r=0;r<o.length;r++)o[r].target===this.m_plotName&&(this.m_study.isOHLCOpenPlot(r)&&(this._ohlcPlotIndexes[TradingView.OPEN_PLOT]=r),this.m_study.isOHLCHighPlot(r)&&(this._ohlcPlotIndexes[TradingView.HIGH_PLOT]=r),this.m_study.isOHLCLowPlot(r)&&(this._ohlcPlotIndexes[TradingView.LOW_PLOT]=r),this.m_study.isOHLCClosePlot(r)&&(this._ohlcPlotIndexes[TradingView.CLOSE_PLOT]=r),this.m_study.isOHLCColorerPlot(r)&&(this._colorer=r,this._palette=this.m_study.metaInfo().palettes[o[r].palette],this._paletterProps=this.m_study.properties().palettes[o[r].palette]))}function h(t,e,i,n){c.call(this,t,e,i,n)}function u(t,e,i,n){c.call(this,t,e,i,n)}var d=i(6).assert,p=i(7).Point,_=i(29),f=_.rgbToHsl,m=_.hslToRgb,g=_.rgbToHexString,y=_.parseRgb,v=_.parseRgba,b=i(10).HitTestResult,S=i(149),w=S.SelectionRenderer,P=S.SelectionRendererArrowsUpDown,T=i(199).PaneRendererBars,C=i(634).PaneRendererHistogram,x=i(635).PaneRendererColumns,k=i(164).PaneRendererLine,L=i(326).PaneRendererArea,I=i(249).PaneRendererCandles,A=i(636).PaneRendererCross,E=i(637).PaneRendererCircles,M=i(198).PaneRendererArrowsUpDownItem,O=i(198).PaneRendererArrowsUpDown,D=i(411).PaneRendererUnicodeChar,V=i(638).PaneRendererBackground,R=i(639).PaneRendererStepLine,B=i(327),F=i(66).CompositeRenderer,N=i(200),W=i(55).clamp,j=i(250),H=i(96),U=H.PlotType,z=H.PlotSymbolSize,$=i(251).MarkLocation,q=i(640),Y=i(35),G=i(20).PlotRowSearchMode,K=i(4);i(641),i(642),i(643),i(644),i(645),i(646),i(647),i(648),i(649),n.isIndexValid=function(t,e){return null!==t&&t>=0&&t<e._length()},n.prototype.items=function(){return this.m_items},n.prototype.update=function(){this._invalidated=!0},n.prototype._updateImpl=function(){var t,e,i,o,r,s,a,l,c,h,u,d,_,f,m,g,y,v,S,w,P,T,C,x,k,L;if(this._histogramBase=null,this.m_items=[],!(this.m_model.timeScale().isEmpty()||this.m_study.priceScale().isEmpty()||null===(t=this.m_model.timeScale().visibleBars())||(e=this.m_series.nearestIndex(t.firstBar(),G.NearestRight),i=this.m_series.nearestIndex(t.lastBar(),G.NearestLeft),o=this.m_study.offset(this._plotName),o>0?(e-=o,i+=o):(e+=o,i-=o),(r=this.m_study.getMinFirstBarIndexForPlot(this._plotName))>i))){if(e=Math.max(r,e),s=this.m_study.properties().styles[this._plotName],a=s.plottype.value(),l=[U.Line,U.Area,U.Circles,U.Cross].indexOf(a)>=0,c=this.m_study.data(),h=this.m_study.firstValue(),l&&c._length()>0){
for(u=c._bsearch(e);n.isIndexValid(u,c)&&void 0===c._valueAt(u)[this._plotIndex+1];)u-=1;for(e=n.isIndexValid(u,c)?c._indexAt(u):e,d=c._bsearch(i);n.isIndexValid(d,c)&&void 0===c._valueAt(d)[this._plotIndex+1];)d+=1;i=n.isIndexValid(d,c)?c._indexAt(d):i}if(_=c.range(e,i),f=this.m_study.priceScale(),m=W(this._getTranspValue(),0,100),g={},y=function(t,e){var i=t+"@"+e;return g[i]||(this._plotName&&"vol"===this._plotName?g[i]=Y.generateColor(t,e):g[i]=Y.generateColor(t,e,!0)),g[i]}.bind(this),_.each(function(t,e){var i,n,r,a,c,h,u,d,_;return t+=o,t=Math.floor(t),i=e[this._plotIndex+1],n=void 0===i||null===i,i=n?NaN:i,(!l||!n)&&(r=new p(t,i),a=void 0!==e[this._colorer+1]||this._palette&&this._palette.addDefaultColor,this._colorer&&a&&(i=e[this._colorer+1],r.style={},null!=i?(c=this._palette.valToIndex?this._palette.valToIndex[i]:i,h=this._paletterProps.colors[c],u=h.color.value(),r.style.color=Y.isHexColor(u)?y(u,m):u):(u=s.color.value(),r.style.color=y(u,100)),d=void 0!==c?h.width.value():s.linewidth.value(),_=void 0!==c?h.style.value():s.linestyle.value(),r.style.width=d,r.style.style=_),this.m_items.push(r),!1)}.bind(this)),f.pointsArrayToCoordinates(this.m_items,h),this.m_model.timeScale().indexesToCoordinates(this.m_items),s.histogramBase&&(this._histogramBase=this.m_study.priceScale().priceToCoordinate(s.histogramBase.value(),h)),this.m_study===this.m_model.selectedSource())for(v=N(e,i),this._selectionData={points:[]},this._selectionData.hittestResult=b.REGULAR,S=0;S<v.length;S++)w=v[S],P=this.m_study.data().valueAt(w),w+=o,null!==P&&(T=P[this._plotIndex+1],C=this.m_model.timeScale().indexToCoordinate(Math.floor(w)),x=this.m_study.priceScale().priceToCoordinate(T,h),this._selectionData.points.push(new p(C,x)));k=s,this._lineColor=Y.generateColor(k.color.value(),m),this._lineWidth=k.linewidth.value(),L=k.color.value(),this._colorer&&null!=(T=this._paletterProps.colors[0])&&(L=T.color.value(),this._lineWidth=T.width.value(),this._lineColor=Y.generateColor(T.color.value(),m)),this._color2=Y.generateColor(L,m),this._color1=Y.generateColor(n.addHueForColor(L),m)}},n.addHueForColor=q(function(t){var e=f(y(t)),i=e[0]+.05;return e[0]=i-Math.floor(i),g(m(e))}),n.prototype._getTranspValue=function(){var t=this.m_study.properties(),e=t.styles[this._plotName],i=0,n=0,o=this.m_study.metaInfo();return"Volume@tv-basicstudies"===o.id&&o.version<=46&&"transparency"in t?(i=t.transparency.value(),i=isNumber(i)?i:n):(e.transparency&&(i=e.transparency.value(),i=isNumber(i)?i:n),i)},n.prototype.renderer=function(){var t,e,i,n,o,r=this.m_study.properties().styles[this._plotName];if(r.visible.value()&&this.m_study.priceScale()){switch(this._invalidated&&(this._updateImpl(),this._invalidated=!1),t={},t.barSpacing=this.m_model.timeScale().barSpacing(),t.items=this.m_items,t.histogramBase=this._histogramBase?this._histogramBase:this.m_study.priceScale().height(),t.lineIndex=0,t.lineStyle=r.linestyle.value(),t.lineColor=this._lineColor,t.lineWidth=this._lineWidth,t.lineWidth=isNumber(t.lineWidth)?t.lineWidth:1,t.color1=this._color1,
t.color2=this._color2,t.bottom=t.histogramBase,this._colorer||(t.simpleMode=!0),e=new F,i=!!r.joinPoints&&r.joinPoints.value(),r.plottype.value()){case U.Line:case U.LineWithBreaks:e.append(new k(t));break;case U.Area:case U.AreaWithBreaks:e.append(new L(t));break;case U.Histogram:e.append(new C(t));break;case U.Columns:e.append(new x(t));break;case U.Cross:e.append(new A(t)),i&&(n=TradingView.merge({},t),n.lineWidth=1,n.forceLineWidth=!0,e.append(new k(n)));break;case U.Circles:e.append(new E(t)),i&&(n=TradingView.merge({},t),n.lineWidth=1,n.ignorePaletteLineWidth=!0,e.append(new k(n)));break;case U.StepLine:o=new R,o.setData(t),e.append(o);break;default:e.append(new k(t))}return this.m_study===this.m_model.selectedSource()&&this._isMarkersEnabled&&e.append(new w(this._selectionData)),e}},o.prototype.items=function(){return this._items},o.prototype.update=function(){this._invalidated=!0},o.prototype._scalesReady=function(){var t=this._model.timeScale(),e=this._study.priceScale();return t&&e&&!t.isEmpty()&&!e.isEmpty()},o.prototype._getTranspValue=function(){var t=this._study.properties(),e=t.styles[this._plotName],i=0;return e.transparency&&(i=e.transparency.value(),i=isNumber(i)?i:40),i},o.prototype._updateImpl=function(){var t,e,i,n,o,r,s,a,l,c,h,u,_;this._items=[],d(this._scalesReady(),"Scales must be ready!"),null!==(t=this._model.timeScale().visibleBars())&&(e=this._study.metaInfo().plots,i=e[this._plotIndex].palette,n=this._study.properties().palettes[i],o=n.colors,r=this._study.metaInfo().palettes[i],s=this._getTranspValue(),a=this._series.nearestIndex(t.firstBar(),G.NearestRight),l=this._series.nearestIndex(t.lastBar(),G.NearestLeft),c=this._study.offset(this._plotName),c>0?(a-=c,l+=c):(a+=c,l-=c),(h=this._study.getMinFirstBarIndexForPlot(this._plotName))>l||(a=Math.max(h,a),u=this._study.data(),_=u.range(a,l),_.each(function(t,e){var i,n,a,l;return t+=c,i=e[this._plotIndex+1],n=new p(Math.floor(t)-.5),a=isNumber(s)?s:50,a=Math.min(a,100),a=Math.max(a,0),null!=i?(l=r.valToIndex?r.valToIndex[i]:i,n.color=Y.generateColor(o[l].color.value(),a)):n.color=null,this._items.push(n),!1}.bind(this)),this._model.timeScale().indexesToCoordinates(this._items)))},o.prototype.renderer=function(){var t,e;if(this._study.properties().styles[this._plotName].visible&&this._study.properties().styles[this._plotName].visible.value()&&this._scalesReady())return this._invalidated&&(this._updateImpl(),this._invalidated=!1),t={items:this._items,y:0,h:this._study.priceScale().height(),w:Math.ceil(this._model.timeScale().barSpacing())},e=new F,e.append(new V(t)),e},r.prototype.items=function(){return this.m_items},r.prototype.update=function(){this.m_invalidated=!0},r.prototype._scalesReady=function(){var t=this.m_model.timeScale(),e=this.m_study.priceScale();return t&&e&&!t.isEmpty()&&!e.isEmpty()},r.prototype._updateImpl=function(){var t,e,i,n,o,r,s,a,l,c,h,u,d,p,_,f,m;this.m_items=[],this._scalesReady()&&(t=this.m_model.timeScale(),e=this.m_study.priceScale(),
null!==(i=t.visibleBars())&&(n=this.m_series.nearestIndex(i.firstBar(),G.NearestRight),o=this.m_series.nearestIndex(i.lastBar(),G.NearestLeft),r=this.m_study.offset(this.m_plotName),r>0?(n-=r,o+=r):(n+=r,o-=r),(s=this.m_study.getMinFirstBarIndexForPlot(this.m_plotName))>o||(n=Math.max(s,n),a=this.m_study.data(),l=this.m_study.firstValue(),c=a.range(n,o),h=this._getTranspValue(),u=N(n,o),d=this.m_study===this.m_model.selectedSource(),this.m_selectionData=d?{points:[],hittestResult:b.REGULAR,vertOffset:0}:null,p=this.m_series.properties().style.value(),_=p===TradingView.Series.STYLE_LINE?"lineStyle":p===TradingView.Series.STYLE_AREA?"areaStyle":null,_?(f=this.m_series.properties()[_].priceSource.value(),m=f):(f="high",m="low"),this._topCoord=e.coordinateToPrice(e.height()*e.topMargin(),l),this._bottomCoord=e.coordinateToPrice(e.height()*(1-e.bottomMargin()),l),c.each(function(t,e){var i,n,o,s,a,l,c,p=Math.floor(t+r),_=e[this.m_plotIndex+1];return null!==_&&void 0!==_&&(i=this._createItem(p,_,f,m),void 0!==i&&null!==i?(n=void 0!==e[this._colorer+1]||this._palette&&this._palette.addDefaultColor,this._colorer&&n&&(_=e[this._colorer+1],i.style={},null!=_?(s=this._palette.valToIndex?this._palette.valToIndex[_]:_,o=this._paletterProps.colors[s].color.value(),i.style.color=Y.generateColor(o,h)):(o=this.m_study.properties().styles[this.m_plotName].color.value(),i.style.color=Y.generateColor(o,100)),a=h>9?h-10:0,i.style.borderColor=Y.generateColor(o,a)),l=void 0!==e[this._textColorer+1]||this._textPalette&&this._textPalette.addDefaultColor,this._textColorer&&l&&(_=e[this._textColorer+1],i.style||(i.style={}),null!=_?(s=this._textPalette.valToIndex?this._textPalette.valToIndex[_]:_,c=this._textPaletterProps.colors[s].color.value(),i.style.textColor=Y.generateColor(c,h)):(c=this.m_study.properties().styles[this.m_plotName].textColor.value(),i.style.textColor=Y.generateColor(c,100))),d&&-1!==u.indexOf(t)&&this.m_selectionData.points.push(i),this.m_items.push(i),!1):void 0)}.bind(this)),this._convertItemsToCoordinates())))},r.prototype._getSeriesVal=function(t,e){var i;t=t||"close",i=null;try{i=this.m_series[t](e)}catch(t){}return i},r.prototype._getTranspValue=function(){var t,e=0;return this.m_study.properties().transparency&&(e=this.m_study.properties().transparency.value(),e=isNumber(e)?e:50),t=this.m_study.properties().styles[this.m_plotName],t.transparency&&(e=t.transparency.value(),e=isNumber(e)?e:50),W(e,0,100)},r.prototype._createItem=function(t,e,i,n){var o,r,s,a=this.m_study.properties().styles[this.m_plotName].location.value();if(!e&&a!==$.Absolute)return null;switch(a){case $.AboveBar:if(void 0===(o=this._getSeriesVal(i,t))||null==o)return null;r=o;break;case $.BelowBar:if(void 0===(s=this._getSeriesVal(n,t))||null==s)return null;r=s;break;case $.Top:r=this._topCoord;break;case $.Bottom:r=this._bottomCoord;break;case $.Absolute:r=e;break;default:throw Error("Bad value: "+a)}return new p(t,r)},r.prototype._convertItemsToCoordinates=function(){var t=this.m_model.timeScale(),e=this.m_study.priceScale()
;t.indexesToCoordinates(this.m_items),e.pointsArrayToCoordinates(this.m_items,this.m_study.firstValue())},r.prototype._calculateVerticalOffset=function(t,e){var i=0;switch(t){case $.AboveBar:case $.Bottom:i=-e;break;case $.BelowBar:case $.Top:i=e}return i},r.prototype._calculateShapeHeight=function(t,e){var i=t;switch(e){case z.Tiny:i=.3*t;break;case z.Small:i=.6*t;break;case z.Normal:i=t;break;case z.Large:i=1.5*t;break;case z.Huge:i=2*t}return i},r.prototype.renderer=function(){var t,e,i,n,o,r,s,a,l,c;if(this.m_study.properties().styles[this.m_plotName].visible&&this.m_study.properties().styles[this.m_plotName].visible.value()&&this._scalesReady())return t=this.m_model.timeScale(),this.m_invalidated&&(this._updateImpl(),this.m_invalidated=!1),e={},i=this._getTranspValue(),n=t.barSpacing(),o=this._calculateShapeHeight(n),r=this.m_study.properties().styles[this.m_plotName].location.value(),s=this._calculateVerticalOffset(r,o+o/2),e.barSpacing=n,e.items=this.m_items,e.color=Y.generateColor(this.m_study.properties().styles[this.m_plotName].color.value(),i),e.height=o,e.vertOffset=s,a=this.m_study.properties().styles[this.m_plotName].plottype.value(),l=j.plotShapesData[a],c=new F,l&&c.append(new TradingView[l.paneRendererClass](e)),this.m_study===this.m_model.selectedSource()&&this._isMarkersEnabled&&null!==this.m_selectionData&&(this.m_selectionData.vertOffset=s,c.append(new w(this.m_selectionData))),c},inherit(s,r),s.prototype.renderer=function(){var t,e,i,n,o,r,s,a,l,c,h,u,d,p,_,f,m,g,y,v,b=this.m_study.properties().styles[this.m_plotName];if(b.visible&&b.visible.value()&&this._scalesReady())return t=this.m_model.timeScale(),this.m_invalidated&&(this._updateImpl(),this.m_invalidated=!1),e={},i=this._getTranspValue(),n=t.barSpacing(),b.size?(r=b.size.value(),o=this._calculateShapeHeight(25,r)):o=Math.round(n/2),s=b.location.value(),a=Y.generateColor(b.color.value(),i),l=i>19?i-10:0,c=this._calculateVerticalOffset(s,Math.round(1.5*o)),e.barSpacing=n,e.items=this.items(),e.color=a,e.borderColor=Y.generateColor(b.color.value(),l),e.height=o,e.vertOffset=c,h=b.plottype.value(),u=j.plotShapesData[h],d=new F,p=b.text?b.text.value():void 0,void 0!==p&&""!==p.trim()&&(_=p.trim().replace(/\\n/gm,"\n"),_=TradingView.cleanButAmpersand(_,!0),f=!1,m=!1,g="Arial",y=12,e.textCache=new B(_,f,m,g,y),v=b.textColor?b.textColor.value():void 0,e.textColor=v?Y.generateColor(v,i):a),null!=u&&d.append(new TradingView[u.paneRendererClass](e)),this.m_study===this.m_model.selectedSource()&&this._isMarkersEnabled&&null!==this.m_selectionData&&(this.m_selectionData.vertOffset=c,d.append(new w(this.m_selectionData))),d},inherit(a,s),a.prototype.renderer=function(){var t,e,i,n,o,r,s,a,l,c,h,u,d,p,_,f,m,g=this.m_study.properties().styles[this.m_plotName];if(g.visible&&g.visible.value()&&this._scalesReady())return t=this.m_model.timeScale(),this.m_invalidated&&(this._updateImpl(),this.m_invalidated=!1),e={},i=this._getTranspValue(),n=t.barSpacing(),g.size?(r=g.size.value(),o=this._calculateShapeHeight(50,r)):o=Math.round(n),s=g.location.value(),
a=Y.generateColor(g.color.value(),i),l=this._calculateVerticalOffset(s,o),e.items=this.items(),e.char=g.char.value(),e.height=o,e.vertOffset=l,e.color=a,c=new F,h=g.text?g.text.value():void 0,void 0!==h&&""!==h.trim()&&(u=h.trim().replace(/\\n/gm,"\n"),u=TradingView.cleanButAmpersand(u,!0),d=!1,p=!1,_="Arial",f=12,e.textCache=new B(u,d,p,_,f),m=g.textColor?g.textColor.value():void 0,e.textColor=m?Y.generateColor(m,i):a),c.append(new D(e)),this.m_study===this.m_model.selectedSource()&&this._isMarkersEnabled&&null!==this.m_selectionData&&(this.m_selectionData.vertOffset=l,c.append(new w(this.m_selectionData))),c},inherit(l,r),l.prototype.renderer=function(){var t,e,i,n,o,r,s,a,l;if(this.m_study.properties().styles[this.m_plotName].visible&&this.m_study.properties().styles[this.m_plotName].visible.value()&&this._scalesReady())return this.m_invalidated&&(this._updateImpl(),this.m_invalidated=!1),t={},e=W(this._getTranspValue(),0,100),i=this.m_model.timeScale().barSpacing(),t.items=this.m_items,t.barSpacing=i,t.colorup=Y.generateColor(this.m_study.properties().styles[this.m_plotName].colorup.value(),e),t.colordown=Y.generateColor(this.m_study.properties().styles[this.m_plotName].colordown.value(),e),n=v(t.colorup),o=n?100*(1-n[3]):0,r=v(t.colordown),s=r?100*(1-r[3]):0,t.colorBorderUp=Y.generateColor("#000000",o),t.colorBorderDown=Y.generateColor("#000000",s),t.minHeight=this.m_study.properties().styles[this.m_plotName].minHeight.value(),t.maxHeight=this.m_study.properties().styles[this.m_plotName].maxHeight.value(),a=new F,a.append(new O(t)),this.m_study===this.m_model.selectedSource()&&null!==this.m_selectionData&&(l=this.m_selectionData,l.barSpacing=i,a.append(new P(l))),a},l.prototype._createItem=function(t,e,i,n){var o,r,s,a;if(0!==e){if(Math.abs(e)>this._maxAbsValue&&(this._maxAbsValue=Math.abs(e)),o=e>0){if(void 0===(s=this._getSeriesVal(n,t))||null==s)return null;r=s}else{if(void 0===(a=this._getSeriesVal(i,t))||null==a)return null;r=a}return new M(t,r,e,o)}},l.prototype._convertItemsToCoordinates=function(){var t,e,i,n,o,r,s,a,l,c=this.m_model.timeScale(),h=this.m_study.priceScale();for(c.indexesToCoordinates(this.m_items),h.pointsArrayToCoordinates(this.m_items,this.m_study.firstValue()),t=Math.abs(this.m_study.properties().styles[this.m_plotName].minHeight.value()),e=Math.abs(this.m_study.properties().styles[this.m_plotName].maxHeight.value()),t>e&&(i=t,t=e,e=i),n=e-t,o=n/this._maxAbsValue,r=this.m_items,s=0;s<r.length;s++)a=r[s],l=Math.abs(a.height),a.height=l*o+t},c.prototype.update=function(){this._invalidated=!0},c.prototype._updateImpl=function(){var t,e,i,n,o,r,s,a,l,c,h,u,d,_,v,S,w,P,T;if(this.m_bars.length=0,!(this.m_model.timeScale().isEmpty()||this.m_study.priceScale().isEmpty()||null===(t=this.m_model.timeScale().visibleBars())||(e=this.m_series.nearestIndex(t.firstBar(),G.NearestRight),i=this.m_series.nearestIndex(t.lastBar(),G.NearestLeft),(n=this.m_study.getMinFirstBarIndexForPlot(this.m_plotName))>i||(e=Math.max(n,e),o=this.m_study.data(),r=this.m_study.firstValue(),s=o.range(e,i),a=0,
l=this.m_study.properties().ohlcPlots[this.m_plotName],c={},h=function(t,e){var i=t+"@"+e;return c[i]||(c[i]=Y.generateColor(t,e)),c[i]},s.each(function(t,e){var i,n,o,r,s,c,u,d,p,_,v,b,S,w,P,T;for(t=Math.floor(t),i=!0,n={},o=TradingView.OPEN_PLOT;o<=TradingView.CLOSE_PLOT;++o){if(void 0===(r=e[this._ohlcPlotIndexes[o]+1])||null===r){i=!1;break}n[o]=r}return!!i&&(s=n[TradingView.OPEN_PLOT],c=n[TradingView.CLOSE_PLOT],u=Math.max(s,n[TradingView.HIGH_PLOT],n[TradingView.LOW_PLOT],c),d=Math.min(s,n[TradingView.HIGH_PLOT],n[TradingView.LOW_PLOT],c),p={},p.time=Math.round(t),p.open=s,p.high=u,p.low=d,p.close=c,_=l.color.value(),v=void 0!==e[this._colorer+1]||this._palette&&this._palette.addDefaultColor,this._colorer&&v&&null!=(r=e[this._colorer+1])&&(b=this._palette.valToIndex?this._palette.valToIndex[r]:r,S=this._paletterProps.colors[b],_=S.color.value()),p.color=h(_,a),w=f(y(_)),P=w[2]>.25?w[2]-.26:w[2]+.75,T=m(w[0],w[1],P),p.borderColor=h(g(T),a),p.hollow=null,this.m_bars.push(p),!1)}.bind(this)),u=this.m_study.priceScale(),u.barPricesToCoordinates(this.m_bars,r),this.m_model.timeScale().barIndexesToCoordinates(this.m_bars),this.m_study!==this.m_model.selectedSource()))))for(d=N(e,i),this._selectionData={points:[],hittestResult:b.REGULAR},_=0;_<d.length;_++)v=d[_],null!==(S=this.m_study.data().valueAt(v))&&(w=S[this._plotIndex+1],P=this.m_model.timeScale().indexToCoordinate(Math.floor(v)),T=this.m_study.priceScale().priceToCoordinate(w,r),this._selectionData.points.push(new p(P,T)))},c.prototype.items=function(){return this.m_bars},inherit(h,c),h.prototype.renderer=function(){var t,e;if(this.m_study.properties().ohlcPlots[this.m_plotName].visible.value())return this._invalidated&&(this._updateImpl(),this._invalidated=!1),t={},t.bars=this.m_bars,t.barSpacing=this.m_model.timeScale().barSpacing(),t.dontDrawOpen=this.m_series.properties().barStyle.dontDrawOpen.value(),e=new F,e.append(new T(t)),this.m_series===this.m_model.selectedSource()&&this._isMarkersEnabled&&e.append(new w(this._selectionData)),e},inherit(u,c),u.prototype.renderer=function(){var t,e,i,n=this.m_study.properties().ohlcPlots[this.m_plotName];if(n.visible.value())return this._invalidated&&(this._updateImpl(),this._invalidated=!1),t={},t.bars=this.m_bars,t.barSpacing=this.m_model.timeScale().barSpacing(),t.drawWick=n.drawWick.value(),t.drawBorder=n.drawBorder.value(),e=n.wickColor.value(),t.borderColor=e,t.wickColor=e,i=new F,i.append(new I(t)),this.m_series===this.m_model.selectedSource()&&this._isMarkersEnabled&&i.append(new w(this._selectionData)),i},e.StudyPaneView=n,e.StudyBackgroundPaneView=o,e.StudyPlotShapesPaneView=s,e.StudyPlotCharsPaneView=a,e.StudyPlotArrowsPaneView=l,e.StudyPlotCandlesPaneView=u,e.StudyPlotBarsPaneView=h},function(t,e,i){"use strict";function n(t){this.items=t.items,this.barSpacing=t.barSpacing,this.histogramBase=t.histogramBase,this.lineColor=t.lineColor,this.lineWidth=t.lineWidth}var o=i(7).Point,r=i(37).distanceToSegment,s=i(27).selectionTolerance,a=i(10).HitTestResult;n.prototype.draw=function(t){var e,i,n,o,r
;for(t.translate(.5,.5),t.fillStyle=this.lineColor,e=this.lineWidth,i=0;i<this.items.length;++i)n=this.items[i],o=n.x,r=n.y,n.style&&(t.fillStyle=n.style.color,e=n.style.width),t.fillRect(Math.round(o-.5*e),r,e,this.histogramBase-r)},n.prototype.hitTest=function(t){var e,i,n,l,c,h=s(this.lineWidth);for(c=0;c<this.items.length;++c)if(e=this.items[c],i=e.x,n=e.y,l=r(new o(i,n),new o(i,this.histogramBase),new o(t.x,t.y)),l.distance<=h)return new a(a.REGULAR);return null},e.PaneRendererHistogram=TradingView.PaneRendererHistogram=n},function(t,e,i){"use strict";function n(t){this.items=t.items,this.barSpacing=t.barSpacing,this.histogramBase=t.histogramBase,this.lineColor=t.lineColor,this.lineWidth=t.lineWidth}var o=i(10).HitTestResult;n.prototype.draw=function(t){var e,i,n,o,r,s,a,l,c,h,u,d,p,_,f,m;if(0!==this.items.length){for(e=this.barSpacing,i=this.lineColor,n=this.histogramBase,t.translate(.5,.5),o={},r=this.items,s=null,a=0;a<r.length;++a)l=r[a],c=0===a?null:r[a-1],h=l.style?l.style.color:i,u=o[h]||[],d=Math.floor(l.x-.5*e),p=Math.ceil(d+e),s&&(_=p-d>5?1:0,s.right=d-_),f={item:l,prev:c,left:d,right:p},u.push(f),s=f,o[h]=u;for(h in o){for(u=o[h],t.fillStyle=h,t.strokeStyle=h,t.lineWidth=1,t.beginPath(),a=0;a<u.length;a++)l=u[a],m=l.item.y,d=l.left,p=l.right,t.rect(d,m,p-d,n-m);t.fill()}}},n.prototype.hitTest=function(t){var e,i,n,r=.5*this.barSpacing+this.lineWidth,s=t.x-r,a=t.x+r,l=this.items;for(e=l.length;e--;)if((i=l[e].x)>=s&&i<=a&&(n=l[e].y,t.y>=Math.min(n,this.histogramBase)&&t.y<=Math.max(n,this.histogramBase)))return new o(o.REGULAR);return null},e.PaneRendererColumns=TradingView.PaneRendererColumns=n},function(t,e,i){"use strict";function n(t){this.items=t.items,this.barSpacing=t.barSpacing,this.lineColor=t.lineColor,this.lineWidth=t.lineWidth,this.lineStyle=t.lineStyle}var o=i(7).Point,r=i(37).distanceToSegment,s=i(27).selectionTolerance,a=i(10).HitTestResult;n.prototype.draw=function(t){var e,i,n,o,r,s,a,l,c=!1;for(n=0;n<this.items.length;++n)o=this.items[n],r=o.x,s=o.y,TradingView.isNaN(r)||TradingView.isNaN(s)||(null!=o.style?(a=o.style.color,e=o.style.width):(a=this.lineColor,e=this.lineWidth),a!==i&&(i=a,c&&t.fill(),t.beginPath(),t.fillStyle=a),l=3*e,t.rect(r-l/2,s-e/2,l,e),t.rect(r-e/2,s-l/2,e,l),c=!0);c&&t.fill()},n.prototype.hitTest=function(t){var e,i,n,l,c,h,u=s(this.lineWidth);for(h=1;h<this.items.length;++h)if(e=this.items[h-1],i=this.items[h],n=e.x,l=i.x,c=r(new o(n,e.y),new o(l,i.y),new o(t.x,t.y)),c.distance<=u)return new a(a.REGULAR);return null},e.PaneRendererCross=TradingView.PaneRendererCross=n},function(t,e,i){"use strict";function n(t){this.items=t.items,this.barSpacing=t.barSpacing,this.lineColor=t.lineColor||t.color,this.radius=t.lineWidth||t.height/2,this.vertOffset=t.vertOffset||0}var o=i(7).Point,r=i(27).selectionTolerance,s=i(10).HitTestResult;n.prototype.draw=function(t){var e,i,n,o,r,s,a,l=2*Math.PI,c=!1;for(n=0;n<this.items.length;++n)o=this.items[n],r=o.x,s=o.y+this.vertOffset,TradingView.isNaN(r)||TradingView.isNaN(s)||(null!=o.style?(a=o.style.color,
e=o.style.width):(a=this.lineColor,e=this.radius),a!==i&&(i=a,c&&t.fill(),t.beginPath(),t.fillStyle=a),t.moveTo(r+e,s),t.arc(r,s,e,0,l,!1),c=!0);c&&t.fill()},n.prototype.hitTest=function(t){var e,i,n,a=2*this.radius,l=this.vertOffset,c=r(a);for(e=0;e<this.items.length;++e)if((i=this.items[e])&&(n=new o(i.x,i.y+l),n.subtract(t).length()+this.radius<=c))return new s(s.REGULAR);return null},e.PaneRendererCircles=TradingView.PaneRendererCircles=n},function(t,e,i){"use strict";function n(t){this._items=t.items,this._y=t.y,this._h=t.h,this._w=t.w}n.prototype.draw=function(t){},n.prototype.drawBackground=function(t){var e,i,n;for(t.save(),t.translate(-.5,-.5),e=0;e<this._items.length;++e)i=this._items[e],null!=i.color&&(t.fillStyle=i.color,n=e===this._items.length-1?this._w:this._items[e+1].x-i.x,t.fillRect(i.x,this._y,n,this._h));t.restore()},n.prototype.hitTest=function(t){return null},e.PaneRendererBackground=TradingView.PaneRendererBackground=n},function(t,e,i){"use strict";var n,o,r,s,a,l,c;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"PaneRendererStepLine",function(){return c}),n=i(10),o=i(7),i.n(o),r=i(49),i.n(r),s=i(85),a=i(37),i.n(a),l=i(27),c=function(){function t(){this._data=null}return t.prototype.setData=function(t){this._data=t},t.prototype.draw=function(t){var e,i,n,o,s,a,l,c,h,u;if(null!==this._data&&0!==this._data.items.length){for(e=this._data,i=e.lineWidth,n=e.lineStyle,o=e.lineColor,s=e.items,t.save(),t.lineCap="square",t.strokeStyle=o,t.lineWidth=i,i%2==0&&t.translate(-.5,-.5),void 0!==n&&Object(r.setLineStyle)(t,n),t.beginPath(),t.moveTo(s[0].x,s[0].y),a=s.length,l=0;l<a;l++)c=s[l],t.lineTo(c.x,c.y),(h=s[l+1])&&(u=Math.round((c.x+h.x)/2),t.lineTo(u,c.y),t.lineTo(u,h.y));t.stroke(),t.restore()}},t.prototype.hitTest=function(t){var e,i,r,c,h,u,d,p,_,f,m,g,y;if(null===this._data||0===this._data.items.length)return null;for(e=this._data,i=e.items,r=e.lineWidth,c=Object(l.selectionTolerance)(r),h=Object(s.lowerbound)(i,t,function(t,e){return t.x<=e.x}),u=Math.max(0,h-1),d=Math.min(i.length-1,h+1),p=u;p<d;p++)if(_=i[p],(f=i[p+1])&&(m=Math.round((_.x+f.x)/2),g=new o.Point(m,_.y),y=new o.Point(m,f.y),Math.min(Object(a.distanceToSegment)(_,g,t).distance,Object(a.distanceToSegment)(g,y,t).distance,Object(a.distanceToSegment)(y,f,t).distance)<=c))return new n.HitTestResult(n.HitTestResult.REGULAR);return null},t}()},function(t,e,i){"use strict";function n(t,e){var i=function i(n){var o=i.cache,r=""+(e?e.apply(this,arguments):n);return o.hasOwnProperty(r)||(o[r]=t.apply(this,arguments)),o[r]};return i.cache={},i}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n,t.exports=e.default},function(t,e,i){"use strict";function n(t){s.call(this,t),this.width=this._calculateWidth(t.barSpacing),this._isUp=!1}function o(t){n.call(this,t),this._isUp=!0}function r(t){n.call(this,t),this._isUp=!1}var s=i(46).PaneRendererAbstractShape;inherit(n,s),n.prototype._calculateWidth=function(t){return t=t||this.barSpacing,Math.round(t/4)},n.prototype.drawShape=function(t){
var e,i,n,o,r,s,a,l,c=!1,h=this.width,u=Math.abs(this.height),d=h<4,p=Math.max(parseInt(h/2),1),_=Math.round(this.width/2),f=Math.round(this.width),m=this._isUp?-1:1;for(i=0,n=this.items.length;i<n;i++)o=this.items[i],r=o.x,s=o.y+this._vertOffset+m*Math.round(u/2),o.style&&null!=o.style.color?(a=o.style.color,l=o.style.borderColor):(a=this._color,l=this._borderColor),a!==e&&(e=a,c&&(t.fill(),t.stroke()),t.beginPath(),t.fillStyle=a,t.strokeStyle=l),t.translate(r,s),d?(t.moveTo(0,0),t.lineTo(-_,-_*m),t.moveTo(0,0),t.lineTo(_,-_*m),t.moveTo(0,0),t.lineTo(0,-u*m),t.moveTo(-_,-u*m),t.lineTo(_,-u*m),t.lineWidth=p):(t.moveTo(0,0),u<f?(t.lineTo(h,-u*m),t.lineTo(-h,-u*m)):(t.lineTo(h,-f*m),t.lineTo(_,-f*m),t.lineTo(_,-u*m),t.lineTo(-_,-u*m),t.lineTo(-_,-f*m),t.lineTo(-h,-f*m)),t.lineTo(0,0)),t.translate(-r,-s),c=!0;c&&(t.fill(),t.stroke())},inherit(o,n),inherit(r,n),e.PaneRendererArrowBase=TradingView.PaneRendererArrowBase=n,e.PaneRendererArrowUp=TradingView.PaneRendererArrowUp=o,e.PaneRendererArrowDown=TradingView.PaneRendererArrowDown=r},function(t,e,i){"use strict";function n(t){o.call(this,t)}var o=i(46).PaneRendererAbstractShape;inherit(n,o),n.prototype.drawShape=function(t){var e,i,n,o,r,s,a,l,c=Math.max(this.width,this.height)/2,h=this._vertOffset,u=2*Math.PI,d=!1;for(i=0,n=this.items.length;i<n;i++)o=this.items[i],o.style&&null!=o.style.color?(r=o.style.color,s=o.style.borderColor):(r=this._color,s=this._borderColor),r!==e&&(e=r,d&&(t.fill(),t.stroke()),t.beginPath(),t.fillStyle=r,t.strokeStyle=s),a=o.x,l=o.y+h,t.moveTo(a+c,l),t.arc(a,l,c,0,u,!1),d=!0;d&&(t.fill(),t.stroke())},e.PaneRendererCircleShape=TradingView.PaneRendererCircleShape=n},function(t,e,i){"use strict";function n(t){o.call(this,t)}var o=i(46).PaneRendererAbstractShape;inherit(n,o),n.prototype.drawShape=function(t){var e,i,n,o,r,s,a,l,c,h,u;for(t.lineWidth=2,e=this.width,i=this.height,n=this._vertOffset,r=!1,s=0,a=this.items.length;s<a;s++)l=this.items[s],c=l.style&&null!=l.style.color?l.style.color:this._color,c!==o&&(o=c,r&&t.stroke(),t.beginPath(),t.strokeStyle=c),h=l.x-e/2,u=l.y-i/2+n,t.moveTo(h+e/2,u),t.lineTo(h+e/2,u+i),t.moveTo(h,u+i/2),t.lineTo(h+e,u+i/2),r=!0;r&&t.stroke()},e.PaneRendererCrossShape=TradingView.PaneRendererCrossShape=n},function(t,e,i){"use strict";function n(t){o.call(this,t)}var o=i(46).PaneRendererAbstractShape;inherit(n,o),n.prototype.drawShape=function(t){var e,i,n,o,r,s,a,l,c=!1,h=Math.round(this.height/2);for(i=0,n=this.items.length;i<n;i++)o=this.items[i],o.style&&null!=o.style.color?(r=o.style.color,s=o.style.borderColor):(r=this._color,s=this._borderColor),r!==e&&(e=r,c&&(t.fill(),t.stroke()),t.beginPath(),t.fillStyle=r,t.strokeStyle=s),a=o.x,l=o.y+this._vertOffset,t.moveTo(a,l-h),t.lineTo(a+h,l),t.lineTo(a,l+h),t.lineTo(a-h,l),t.lineTo(a,l-h),c=!0;c&&(t.fill(),t.stroke())},e.PaneRendererDiamond=TradingView.PaneRendererDiamond=n},function(t,e,i){"use strict";function n(t){o.call(this,t)}var o=i(46).PaneRendererAbstractShape;inherit(n,o),n.prototype.drawShape=function(t){
var e,i,n,o,r,s,a,l,c=this.width,h=this.height,u=h/2,d=this._vertOffset,p=3,_=(c-p)/3,f=!1;for(i=0,n=this.items.length;i<n;i++)o=this.items[i],o.style&&null!=o.style.color?(r=o.style.color,s=o.style.borderColor):(r=this._color,s=this._borderColor),r!==e&&(e=r,f&&(t.fill(),t.stroke()),t.beginPath(),t.fillStyle=r,t.strokeStyle=s),a=o.x-c/2,l=o.y-u+d,t.moveTo(a,l),t.lineTo(a+p,l),t.bezierCurveTo(a+_,l-_,a+2*_,l+_,a+c,l),t.lineTo(a+c,l+u),t.bezierCurveTo(a+c-_,l+u+_,a+c-2*_,l+u-_,a+p,l+u),t.lineTo(a+p,l+h),t.lineTo(a,l+h),t.lineTo(a,l),f=!0;f&&(t.fill(),t.stroke())},e.PaneRendererFlagShape=TradingView.PaneRendererFlagShape=n},function(t,e,i){"use strict";function n(t,e){l.call(this,t),this._isUp=e,this._stepX=Math.round(this.height/2*.65)+.5,this._stepY=Math.round(this.height/2)+.5,this._textCache?(this._padding=this._stepX/2,this._shapeWidth=this._textImageWidth+2*this._stepX,this._shapeHeight=this._textImageHeight+2*this._padding+this._stepY,0===this._vertOffset?this._isUp?this._textVertOffset=this._stepY+this._padding+this._textImageHeight:this._textVertOffset=-this._stepY-this._padding:this._textVertOffset=this._vertOffset>0?this._stepY+this._padding:-this._stepY-this._padding):(this._padding=0,this._shapeWidth=2*this._stepX,this._shapeHeight=2.5*this._stepY)}function o(t){n.call(this,t,!0)}function r(t){n.call(this,t,!1)}var s=i(7).Point,a=i(10).HitTestResult,l=i(46).PaneRendererAbstractShape;inherit(n,l),n.prototype.drawShape=function(t){var e,i,n,o,r,s,a,l,c=!1,h=this._isUp?1:-1,u=Math.round(this._shapeWidth/2)-.5,d=Math.round(this._shapeHeight)-.5,p=0;for(0!==this._vertOffset&&this._vertOffset<0===this._isUp&&(p=-h*Math.round(d+this._stepY)),i=0,n=this.items.length;i<n;i++)o=this.items[i],r=o.x+.5,s=o.y+this._vertOffset+p+.5,o.style&&null!=o.style.color?(a=o.style.color,l=o.style.borderColor):(a=this._color,l=this._borderColor),a!==e&&(e=a,c&&(t.fill(),t.stroke()),t.beginPath(),t.fillStyle=a,t.strokeStyle=l),t.translate(r,s),t.moveTo(0,0),t.lineTo(this._stepX,this._stepY*h),t.lineTo(u,this._stepY*h),t.lineTo(u,d*h),t.lineTo(-u,d*h),t.lineTo(-u,this._stepY*h),t.lineTo(-this._stepX,this._stepY*h),t.lineTo(0,0),t.translate(-r,-s),c=!0;c&&(t.fill(),t.stroke())},n.prototype.hitTest=function(t,e){var i,n,o,r,l,c,h,u,d,p,_,f,m,g,y=this._stepY/2,v=this._vertOffset,b=this._isUp?1:-1;for(n=0;n<this.items.length;++n)if(o=this.items[n]){if(r=b*y,0!==this._vertOffset&&this._vertOffset<0===this._isUp&&(r=-b*(this._shapeHeight+y)),i=new s(o.x,o.y+v+r),i.subtract(t).length()<=y)return new a(a.REGULAR);if(l=this._shapeWidth/2,r=0,0!==this._vertOffset&&this._vertOffset<0===this._isUp&&(r=-b*(this._shapeHeight+this._stepY)),c=o.y+v+r,h=this._isUp?this._stepY:-this._shapeHeight,u=this._isUp?this._shapeHeight:-this._stepY,d=t.x,p=t.y,_=o.x-l,f=c+h,m=o.x+l,g=c+u,d>_&&d<m&&p>f&&p<g)return new a(a.REGULAR)}return null},inherit(o,n),inherit(r,n),e.PaneRendererLabelBase=TradingView.PaneRendererLabelBase=n,e.PaneRendererLabelUp=TradingView.PaneRendererLabelUp=o,e.PaneRendererLabelDown=TradingView.PaneRendererLabelDown=r},function(t,e,i){
"use strict";function n(t){o.call(this,t)}var o=i(46).PaneRendererAbstractShape;inherit(n,o),n.prototype.drawShape=function(t){var e,i,n,o,r,s,a,l,c=!1,h=Math.round(this.height/2);for(i=0,n=this.items.length;i<n;i++)o=this.items[i],o.style&&null!=o.style.color?(r=o.style.color,s=o.style.borderColor):(r=this._color,s=this._borderColor),r!==e&&(e=r,c&&(t.fill(),t.stroke()),t.beginPath(),t.fillStyle=r,t.strokeStyle=s),a=o.x-h,l=o.y+this._vertOffset-h,t.rect(a,l,this.height,this.height),c=!0;c&&(t.fill(),t.stroke())},e.PaneRendererSquare=TradingView.PaneRendererSquare=n},function(t,e,i){"use strict";function n(t){s.call(this,t)}function o(t){s.call(this,t)}function r(t){s.call(this,t)}var s=i(46).PaneRendererAbstractShape;inherit(n,s),n.prototype.drawShape=function(t){var e,i,n,o,r,s,a,l,c=this.width,h=this.height,u=Math.round(h/3),d=this._vertOffset-2*u,p=!1;for(i=0,n=this.items.length;i<n;i++)o=this.items[i],o.style&&null!=o.style.color?(r=o.style.color,s=o.style.borderColor):(r=this._color,s=this._borderColor),r!==e&&(e=r,p&&(t.fill(),t.stroke()),t.beginPath(),t.fillStyle=r,t.strokeStyle=s),a=o.x,l=o.y+d,t.moveTo(a,l),t.lineTo(a+c/2,l+h),t.lineTo(a-c/2,l+h),t.lineTo(a,l),p=!0;p&&(t.fill(),t.stroke())},inherit(o,s),o.prototype.drawShape=function(t){var e,i,n,o,r,s,a,l,c=this.width,h=this.height,u=Math.round(h/3),d=this._vertOffset-u,p=!1;for(i=0,n=this.items.length;i<n;i++)o=this.items[i],o.style&&null!=o.style.color?(r=o.style.color,s=o.style.borderColor):(r=this._color,s=this._borderColor),r!==e&&(e=r,p&&(t.fill(),t.stroke()),t.beginPath(),t.fillStyle=r,t.strokeStyle=s),a=o.x-c/2,l=o.y+d,t.moveTo(a,l),t.lineTo(a+c,l),t.lineTo(a+c/2,l+h),t.lineTo(a,l),p=!0;p&&(t.fill(),t.stroke())},inherit(r,s),r.prototype.drawShape=function(t){var e,i,n,o,r,s,a,l=this.width,c=this.height,h=this._vertOffset,u=!1;for(i=0,n=this.items.length;i<n;i++)o=this.items[i],r=o.style&&null!=o.style.color?o.style.color:this._color,r!==e&&(e=r,u&&t.fill(),t.beginPath(),t.fillStyle=r),s=o.x+l/2,a=o.y-c/2+h,t.moveTo(s,a),t.lineTo(s,a+c),t.lineTo(s-l,a+c/2),t.lineTo(s,a),u=!0;u&&t.fill()},e.PaneRendererTriangleApexUp=TradingView.PaneRendererTriangleApexUp=n,e.PaneRendererTriangleApexDown=TradingView.PaneRendererTriangleApexDown=o,e.PaneRendererTriangleApexLeft=TradingView.PaneRendererTriangleApexLeft=r},function(t,e,i){"use strict";function n(t){o.call(this,t)}var o=i(46).PaneRendererAbstractShape;inherit(n,o),n.prototype.drawShape=function(t){var e,i,n,o,r,s,a,l,c,h,u;for(t.lineWidth=2,e=this.width,i=this.height,n=this._vertOffset,r=!1,s=0,a=this.items.length;s<a;s++)l=this.items[s],c=l.style&&null!=l.style.color?l.style.color:this._color,c!==o&&(o=c,r&&t.stroke(),t.beginPath(),t.strokeStyle=c),h=l.x-e/2,u=l.y-i/2+n,t.moveTo(h,u),t.lineTo(h+e,u+i),t.moveTo(h,u+i),t.lineTo(h+e,u),r=!0;r&&t.stroke()},e.PaneRendererXCross=TradingView.PaneRendererXCross=n},function(t,e,i){"use strict";function n(){this._data=null}function o(t){this._source=t,this._points1=[],this._points2=[],this._timePoints=[],
this._getBarSpacing=t.model().timeScale().barSpacing.bind(t.model().timeScale()),this._invalidated=!0,this._areaRenderer=new n}function r(t){o.call(this,t)}function s(t,e,i){var n,r;if(o.call(this,t),this._isHlineFill=e.type===h.FilledArea.TYPE_HLINES,a(this._isHlineFill||e.type===h.FilledArea.TYPE_PLOTS,"Wrong filledArea type: "+e.type),this._isHlineFill&&this._initBandIndexes(e.objAId,e.objBId),this._fillMetaInfo=e,this._fillStyleProps=i,n=t._metaInfo,e.palette)for(r in n.plots)if(n.plots[r].palette===e.palette){this._colorPlotOffset=parseInt(r),this._colorsMap=n.palettes[e.palette].valToIndex,this._colorValues=t.properties().palettes[e.palette].colors;break}}var a=i(6).assert,l=i(10).HitTestResult,c=i(27).coordinateIsValid,h=i(32),u=i(35),d=i(55).clamp,p=i(20).PlotRowSearchMode;n.prototype.setData=function(t){this._data=t},n.prototype.hitTest=function(t){var e,i,n;if(null===this._data)return null;for(n=1;n<this._data.points1.length;++n)if(e=this._data.points1[n],i=this._data.points2[n],this._data.timePoints[n]===t.x&&(t.y>=e&&t.y<=i||t.y<=e&&t.y>=i))return new l(l.REGULAR);return null},n.prototype.draw=function(t){var e,i,n,o,r,s,a,l,h,d,p,_,f,m,g,y,v,b;if(null!==this._data&&((e=this._data.isHlineFill)||0!==this._data.points1.length&&0!==this._data.points2.length)){for(i=this._data.timePoints,n=this._data.points1,o=this._data.points2,r=this._data.colors,s=isNumber(this._data.transparency)?this._data.transparency:50,s=Math.min(s,100),s=Math.max(s,0),a={},l=[],d=0;d<this._data.timePoints.length;d++)p={point1:e?this._data.level1:n[d],point2:e?this._data.level2:o[d],timePoint:i[d]},_=c(p.point1)&&c(p.point2),_&&(h=r&&r[d]?r[d]:this._data.backcolor,l.push(p)),(d===this._data.timePoints.length-1||r&&h!==r[d+1]||!_)&&(l.length>0&&(f=a[h]||[],f.push(l),a[h]=f),l=_?[p]:[]);for(m in a){for(g=a[m],t.beginPath(),y=0;y<g.length;y++){for(v=g[y],t.moveTo(v[0].timePoint,v[0].point1),b=1;b<v.length;b++)t.lineTo(v[b].timePoint,v[b].point1);for(b=v.length-1;b>=0;b--)t.lineTo(v[b].timePoint,v[b].point2)}t.closePath(),t.fillStyle=u.generateColor(m,s),t.fill()}}},o.prototype.update=function(){this._invalidated=!0},o.prototype._updateImpl=function(){var t,e,i,n,o,r,s,a,l,c,h,u,d,_,f,m,g,y,v,b,S,w,P,T,C,x,k,L;if(this._points1=[],this._points2=[],this._colorsMap&&(this._colors=[]),this._timePoints=[],this._visible()&&(t=this._source.priceScale(),e=this._source._model.timeScale(),t&&!t.isEmpty()&&!this._source._model.timeScale().isEmpty()&&!(this._source._series.bars().isEmpty()||(this._isHlineFill&&(i=this._source.firstValue(),n=this._source.properties().bands[this._bandAKey],o=this._source.properties().bands[this._bandBKey],this._level1=t.priceToCoordinate(n.value.value(),i),this._level2=t.priceToCoordinate(o.value.value(),i)),r=this._source.data().plotNames().indexOf(this._plotAId())+1,s=this._source.data().plotNames().indexOf(this._plotBId())+1,null===(a=this._source._model.timeScale().visibleBars())||(l=this._source._series.nearestIndex(a.firstBar(),p.NearestRight),c=this._source._series.nearestIndex(a.lastBar(),p.NearestLeft),
(l=this._correctStartBarIndex(l))>c))))){if(h=this._source.data().range(l,c),h.size()>0)for(u=h.firstIndex(),d=h.lastIndex(),_=this._source.offset(this._plotAId()),f=this._source.offset(this._plotBId()),m=Math.max(_,f),g=Math.min(_,f),y=u+m,v=this._source.data().firstIndex(),u>v&&(y=u<m+v?m+v:u),b=d+g,S=this._source.data().lastIndex(),d>S+g&&d<S&&(b=S+g),g<0&&d<=S+g&&(b=d),w=y<u?u+m:y>d?u+m:y,P=y;P<=b;++P)this._timePoints.push(e.indexToCoordinate(w++)),this._colors&&null!=(T=this._source.data().valueAt(P-g)[this._colorPlotOffset+1])&&this._colors.push(this._colorValues[this._colorsMap[T]].color.value()),this._isHlineFill||(C=this._source.data().valueAt(P-_),x=this._source.data().valueAt(P-f),k=C[r],L=x[s],this._points1.push(k),this._points2.push(L));i=this._source.firstValue(),t.pricesArrayToCoordinates(this._points1,i),t.pricesArrayToCoordinates(this._points2,i)}},o.prototype.renderer=function(){this._invalidated&&(this._updateImpl(),this._invalidated=!1);var t={};return t.points1=this._points1,t.points2=this._points2,t.timePoints=this._timePoints,t.getBarSpacing=this._getBarSpacing,t.backcolor=this._color(),t.transparency=this._transparency(),t.isHlineFill=this._isHlineFill,t.level1=this._level1,t.level2=this._level2,this._colors&&(t.colors=this._colors),this._areaRenderer.setData(t),this._areaRenderer},o.prototype._plotAId=function(){a(!1,"Pure virtual call!")},o.prototype._plotBId=function(){a(!1,"Pure virtual call!")},o.prototype._color=function(){a(!1,"Pure virtual call!")},o.prototype._transparency=function(){a(!1,"Pure virtual call!")},o.prototype._visible=function(){a(!1,"Pure virtual call!")},o.prototype._correctStartBarIndex=function(t){return t},inherit(r,o),r.prototype._plotAId=function(){return this._source.properties().area[0].name.value()},r.prototype._plotBId=function(){return this._source.properties().area[1].name.value()},r.prototype._color=function(){return this._source.properties().areaBackground.backgroundColor.value()},r.prototype._transparency=function(){var t=this._source.properties().areaBackground.transparency.value();return d(t,0,100)},r.prototype._visible=function(){return this._source.properties().areaBackground.fillBackground.value()},inherit(s,o),s.prototype._initBandIndexes=function(t,e){var i,n;for(this._bandAKey=null,this._bandBKey=null,i=0;i<this._source.metaInfo().bands.length;++i)n=this._source.metaInfo().bands[i],null!==this._bandAKey||n.id!==t?null!==this._bandBKey||n.id!==e||(this._bandBKey=i):this._bandAKey=i},s.prototype._plotAId=function(){return this._fillMetaInfo.objAId},s.prototype._plotBId=function(){return this._fillMetaInfo.objBId},s.prototype._color=function(){return this._fillStyleProps.color.value()},s.prototype._transparency=function(){return this._fillStyleProps.transparency.value()},s.prototype._visible=function(){return this._fillStyleProps.visible.value()},s.prototype._correctStartBarIndex=function(t){var e=this._source.getMinFirstBarIndexForPlot(this._fillMetaInfo.id);return Math.max(e,t)},e.PlotFillPaneView=s,e.AreaBackgroundPaneView=r},function(t,e,i){
"use strict";var n,o,r;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"StudyLegendView",function(){return r}),n=i(0),o=i(136),r=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n._showStudyValues=i.properties().paneProperties.legendProperties.showStudyValues,n._showStudyValues.subscribe(n,n.update),n}return n.c(e,t),e.prototype.isValuesVisible=function(){return this._showStudyValues.value()},e.prototype.additional=function(){return null},e.prototype.destroy=function(){this._showStudyValues.unsubscribeAll(this)},e}(o.StudyDataWindowView)},function(t,e,i){"use strict";function n(t){return new Promise(function(e){i.e(32).then(function(n){var r=Object.keys(t.metaInfo().graphics);r.sort(function(t,e){return o(t)-o(e)}),e(r.map(function(e){var n,o,r=i(829).VertLinePaneView;return n={backgrounds:null,hhists:null,horizlines:null,hlines:null,lines:null,polygons:null,shapemarks:null,textmarks:null,trendchannels:null,vertlines:r},o=n[e],null===o?(h.logWarn(e+" is not supported by this build of graphics subsystem, skipping"),null):new o(t,t.model())}).filter(function(t){return null!==t}))}.bind(null,i)).catch(i.oe)})}function o(t){switch(t){case"polygons":return-100;case"trendchannels":return-90;default:return 0}}function r(t){var e,i,n,o=Object.keys(t.metaInfo().graphics),r=[],s=function(t){return h.logWarn(t+" is not supported by this build of graphics subsystem, skipping"),"continue"};for(e=0,i=o;e<i.length;e++)n=i[e],s(n);return r}var s,a,l,c,h;Object.defineProperty(e,"__esModule",{value:!0}),e.createGraphicsPaneViews=n,e.createGraphicsPriceAxisViews=r,s=i(5),a=i(196),i.d(e,"isStudyGraphicsEmpty",function(){return a.c}),l=i(325),i.d(e,"StaticStudyGraphics",function(){return l.a}),i.d(e,"emptyStudyGraphics",function(){return l.b}),i.d(e,"loadStudyGraphics",function(){return l.c}),i.d(e,"saveStudyGraphics",function(){return l.d}),c=i(324),i.d(e,"LiveStudyGraphics",function(){return c.a}),h=Object(s.getLogger)("Chart.StudyGraphics")},function(t,e,i){"use strict";function n(t){this._studyId=t,this._maxToVers=o.ZERO,this._maxFromVers=o.ZERO,this._migrs=[]}var o=i(190).Version,r=i(5).getLogger("Chart.StudyMigration");n.prototype.addMigration=function(t,e,i){var n=o.parse(t),r=o.parse(e);n.isGreater(this._maxFromVers)&&(this._maxFromVers=n),r.isGreater(this._maxToVers)&&(this._maxToVers=r),this._migrs.push({fromVers:n,toVers:r,rules:i})},n.prototype.updateInputs=function(t,e,i){var n,o,s;if(!i)return i;for(n=TradingView.clone(i),o=t;o.isLess(e)&&null!=(s=this._findMigration(o));){if(r.logNormal("Migrating study inputs from "+s.fromVers+" to "+s.toVers+" version, studyId: "+this._studyId+", migration: "+JSON.stringify(s)+", inputs: "+JSON.stringify(i)),n=this._applyMigration(n,s),!o.isLess(s.toVers))throw Error("Problems in study migration process... Possible infinite cycle has been detected and stopped.");o=s.toVers}return o>t&&r.logNormal("Study inputs migration is done, studyId: "+this._studyId+", inputs: "+JSON.stringify(n)),n},n.prototype._findMigration=function(t){var e,i,n=-1,o=this._maxFromVers
;for(e=0;e<this._migrs.length;e++)i=this._migrs[e],i.fromVers.isLess(t)||i.fromVers.isLessOrEqual(o)&&(o=i.fromVers,n=e);return n<0?null:this._migrs[n]},n.prototype._applyMigration=function(t,e){var i,n,o,r=t;for(i=0;i<e.rules.length;i++)n=e.rules[i],o=this._getApplyRuleFun(n.type),r=o(r,n);return r},n.prototype._getApplyRuleFun=function(t){if("inputRemoved"===t)return n._applyInputRemovedRule;if("inputChangedType"===t)return n._applyInputChangedTypeRule;if("inputChangedMinMax"===t)return n._applyInputChangedMinMaxRule;if("inputChangedOptions"===t)return n._applyInputChangedOptionsRule;throw Error("Unknown migration rule type: "+t)},n._applyInputRemovedRule=function(t,e){if(!(e.inputId in t))return t;if("removeVal"!==e.action)throw Error("Unexpected rule.action="+e.action+" in rule.type="+e.type);var i=t[e.inputId];return delete t[e.inputId],r.logNormal("Input "+e.inputId+"="+i+" removed"),t},n._applyInputChangedTypeRule=function(t,e){var i=t[e.inputId];if("resetToDefVal"===e.action)return t[e.inputId]=e.defVal,r.logNormal("Input "+e.inputId+"="+i+" reset to default value "+e.defVal),t;if("convertVal"===e.action){if(null==i)return t;if("float"===e.inputTypeFrom&&"integer"===e.inputType)return t[e.inputId]=Math.round(t[e.inputId]),r.logNormal("Input "+e.inputId+"="+i+" converted to value "+t[e.inputId]),t;if("integer"===e.inputTypeFrom&&"float"===e.inputType)return t;if("text"===e.inputTypeFrom&&"source"===e.inputType)return n._isValidSource(i,e.options)?t:(t[e.inputId]=e.defVal,t);throw Error("Cannot convertVal from "+e.inputTypeFrom+" to "+e.inputType)}throw Error("Unknown action "+e.action+" for rule with type "+e.type)},n._isValidSource=function(t,e){return t.indexOf("$")>=0||e.indexOf(t)>=0},n._applyInputChangedMinMaxRule=function(t,e){if("adjustValIfNeeded"!==e.action)throw Error("Unknown action "+e.action+" for rule with type "+e.type);var i=t[e.inputId];return i<e.minVal?t[e.inputId]=e.minVal:i>e.maxVal&&(t[e.inputId]=e.maxVal),r.logNormal("Input "+e.inputId+"="+i+" adjusted to value "+t[e.inputId]),t},n._applyInputChangedOptionsRule=function(t,e){if(!(["text"].indexOf(e.inputType)>=0&&"resetToDefValIfNeeded"===e.action))throw Error("Unexpected rule.inputType="+e.inputType+" in rule.action="+e.action);var i=t[e.inputId];return e.options.indexOf(i)<0&&(t[e.inputId]=e.defVal,r.logNormal("Input "+e.inputId+"="+i+" reset to default value "+e.defVal)),t},t.exports=n},function(t,e,i){"use strict";(function(e,n,o,r){function s(t){return t instanceof M}function a(t){return t.isNoScale()?null:t.priceScale()}function l(t,e,i,n,o){if(void 0!==o)switch(o){case"right":return t.rightPriceScale();case"left":return t.leftPriceScale();case"no-scale":return null;case"as-series":if(!t.isMainPane()){Y.logWarn('BEWARE: Attempt to set "as-series" price scale to study, but series and study are on different panes');break}return a(e);default:Y.logWarn("Unknown override for priceScale type - "+o+", default will be used")}var r=i.priceScale
;return n?null:(s(e)||t.isMainPane()&&void 0===r)&&i.is_price_study?a(e):r===F.None?i.is_price_study?null:(Y.logWarn("Cannot add study "+i.id+" with 'No Scale' setting, because study is not a price study. Using right price scale."),t.rightPriceScale()):r===F.Left?t.leftPriceScale():t.rightPriceScale()}function c(t,i,o,r,s,a,l,h){var u,d,p;for(h=Object.assign({},X,h),this._version=c.version,this._readOnly=h.readOnly,this._undoModel=a,this._studiesMetaInfoRepository=s,this._properties=o,this._modelIntervals=[],this._isSnapshot=h.isSnapshot,this.setStudiesMetaData(this._studiesMetaInfoRepository.getInternalMetaInfoArray(),this._studiesMetaInfoRepository.getMigrations()),this.m_timeScale=new C(this,{preserveBarSpacing:h.preserveBarSpacing}),j.init(),u=this,this.m_panes=[],this.m_gridSource=new P,this.m_crossHairSource=new b(this,j.properties(),{additionalMenuEnabled:h.crossHairMenuEnabled}),this.m_crossHairSource.selectBarMode().subscribe(function(t){if(t&&u.lineBeingCreated()){var e=j.tool.value();u.cancelCreatingLine(),j.tool.setValue(e)}}),this.m_width=0,this._tagsChanged=new e,this._lineCancelled=new e,this._magnet=new T(j.properties().magnet,this.m_timeScale,o.paneProperties.magnetSensivity),d=new H("chartproperties.mainSeriesProperties"),d.addExclusion("minTick"),d.addExclusion("priceAxisProperties.lockScale"),d.addExclusion("priceAxisProperties.percentage"),d.addExclusion("priceAxisProperties.log"),this.createPane(void 0,{rightAxisProperties:d.priceAxisProperties.state(["autoScale"])}),this.m_panes[0]._stretchFactor=2*S.DEFAULT_STRETCH_FACTOR,this.m_panes[0]._isMainPane=!0,this.m_selectedSource=null,this._selectedSourceChanged=new e,this._chartApi=t,this._invalidateHandler=i,this.m_hoveredSource=null,this._properties.listeners().subscribe(this,c.prototype.propertyChangeHandler),this._properties.timezone.listeners().subscribe(null,function(){u._chartApi&&u._chartApi.connected()&&u._chartApi.switchTimezone(u.timezone())}),this.m_timeScale.defaultRightOffsetProperty().listeners().subscribe(null,function(){u.recalculateAllPanes()}),d.merge(o.mainSeriesProperties.state()),this.m_mainSeries=new W(this,d,r),this.m_panes[0].addDataSource(this.m_mainSeries,this.m_panes[0].rightPriceScale()),this._mainSeriesPriceScaleNameChanged=new e,this._mainSeriesPriceScaleNameProperty=new K(this),this._mainSeriesScaleRatioProperty=new G(this),this.m_mainSeries.onCompleted().subscribe(this,function(){u.clearCurrentPosition(),u._scrollingState&&u.gotoTime()}),this.m_mainSeries.onIntervalChanged().subscribe(this,function(){this._oldStartVisibleIndex=-1,this._oldEndVisibleIndex=-1}),this.m_mainSeries.onBarReceived().subscribe(this,c.prototype.updateTimeScaleBaseIndex),this.m_mainSeries.properties().symbol.listeners().subscribe(this,this.setPriceAutoScaleForAllMainSources),this._readOnly||(d.addChild("priceAxisProperties",this.m_mainSeries.m_priceScale.properties()),this._properties.paneProperties.legendProperties.showStudyTitles.listeners().subscribe(this,function(t){
t.value()||u._properties.paneProperties.legendProperties.showStudyArguments.setValue(!1)})),this._barsMarksSources=l(this),p=0;p<this._barsMarksSources.length;p++)this._barsMarksSources[p].setOwnerSource(this.m_mainSeries);this._syncPointCache={},this.m_watermarkSource=h.watermarkEnabled?new w(this.m_mainSeries):null,this._brandingSource=null,this.strategySources=[],this.strategySources.change=new e,this._activeStrategySource=new n(null),this._oldStartVisibleIndex=-1,this._oldEndVisibleIndex=-1,this._currentTool="",j.hideAllDrawings().subscribe(this,this.visibilityChangeHandler),this._properties.scalesProperties.listeners().subscribe(this,c.prototype.fullUpdate),this._id=q.guid(),this._studyInserted=new e,this._chartThemeLoaded=new e,this._resetScales=new e,this._isScalesResetAvailableChanged=new e,this._isScalesResetAvailable=!1,this._studyShiftColorStartOffset=void 0}var h=i(6).ensureNotNull,u=i(7).Point,d=i(29),p=d.parseRgb,_=d.rgbToBlackWhiteString,f=i(86),m=f.createLineTool,g=f.isLineToolName,y=f.isLineTool,v=f.isStudyLineTool,b=i(719).CrossHair,S=i(209).Pane,w=i(739).Watermark,P=i(740).Grid,T=i(741),C=i(742).TimeScale,x=i(210).PriceScale,k=i(101).BarsMarksContainer,L=i(747).Branding,I=i(34).PriceDataSource,A=i(17),E=i(39),M=E.Study,O=i(212).NonSeriesStudy,D=i(345).createStudy,V=E.prepareStudyProperties,R=i(201),B=i(144),F=i(250).ScaleType,N=i(20).PlotRowSearchMode,W=i(71).Series,j=i(38),H=i(3).DefaultProperty,U=i(344).SyncPoint,z=i(28).trackEvent,q=i(22),Y=i(5).getLogger("Chart.ChartModel"),G=i(757).MainSeriesScaleRatioProperty,K=i(758).MainSeriesPriceScaleNameProperty,X={isSnapshot:!1,readOnly:!1,watermarkEnabled:!0,crossHairMenuEnabled:!1,preserveBarSpacing:!1};c.prototype.applyPreferences=function(t){var e,i;for(e in t)void 0!==this._properties[e]&&"m_mainSeries"!==this._properties[e]&&this._properties[e].mergeAndFire(t[e]);void 0!==t.mainSeriesPriceScaleName&&this.setMainSeriesPriceScaleName(this.mainSeriesPriceScaleName(),t.mainSeriesPriceScaleName),this.m_timeScale.defaultRightOffsetProperty().setValue(t.timeScale.defaultRightOffset),this._properties.saveDefaults(),this.m_mainSeries.checkSessStudy(),i=this.m_mainSeries.sessionsStudy(),i&&i.applyPreferences(t.sessionsStudy),this.m_mainSeries.applyPreferences(t.mainSeries),this.recalculateAllPanes(),this.invalidate(new A(A.FULL_UPDATE))},c.prototype.setStudiesMetaData=function(t,e){this._studiesMetaData=t,this._studyVersioning=new R(this._studiesMetaData,e)},c.prototype.isSnapshot=function(){return this._isSnapshot},c.prototype.currentTool=function(){return this._currentTool},c.prototype.setCurrentTool=function(t){this._currentTool=t},c.prototype.timezone=function(){return this._properties.timezone.value()},c.prototype.version=function(){return this._version},c.prototype.initConnection=function(){this._chartApi.switchTimezone(this.timezone())},c.prototype.dumpViews=function(){var t,e,i,n,o={};for(o.panes=[],t=0;t<this.m_panes.length;t++)o.panes.push(this.m_panes[t].dumpViews());for(o.dataWindow=[],e=this.dataSources(),t=0;t<e.length;t++)i=e[t],
(n=i.dataWindowView())&&o.dataWindow.push(n.dump());return o},c.prototype._paneInvalidationMask=function(t,e){var i=new A,n=this.m_panes.indexOf(t);return void 0===e&&(e=A.LIGHT_UPDATE),i.invalidatePane(n,e),i},c.prototype.updatePane=function(t){var e=this._paneInvalidationMask(t);this.invalidate(e)},c.prototype.fullUpdate=function(){this.invalidate(new A(A.FULL_UPDATE))},c.prototype.lightUpdate=function(){this.invalidate(new A(A.LIGHT_UPDATE))},c.prototype.updateSource=function(t){var e=this.paneForSource(t),i=this._paneInvalidationMask(e);this.invalidate(i)},c.prototype.studiesMetaData=function(){return this._studiesMetaData},c.prototype.studyVersioning=function(){return this._studyVersioning},c.prototype.disconnect=function(){var t,e,i=this.dataSources();for(e=0;e<i.length;e++)t=i[e],t.disconnect&&t.disconnect()},c.prototype.restart=function(){var t,e,i;for(this.initConnection(),this.m_timeScale.reset(),this.m_mainSeries.restart(),t=this.dataSources(),e=0;e<t.length;e++)i=t[e],i.restart&&i!==this.m_mainSeries&&i.restart()},c.prototype.startNotStartedStudies=function(){var t,e;if(!this.m_mainSeries.isStarted())throw Error("Cannot start studies: main series is not started");for(t=this.dataSources(),e=0;e<t.length;e++)s(t[e])&&!t[e].isStarted()&&t[e].restart&&t[e]!==this.m_mainSeries&&t[e].restart()},c.prototype.updateLineTools=function(){var t,e,i=this.dataSources();for(t=0;t<i.length;t++)y(i[t])&&(e=i[t],e.tryCreateServerPoints(),e.checkAlert&&e.checkAlert())},c.prototype.realignLineTools=function(){var t,e,i=this.dataSources();for(t=0;t<i.length;t++)y(i[t])&&(e=i[t],e.calcIsActualSymbol());for(t=0;t<this.m_panes.length;t++)this.m_panes[t].invalidateSourcesCache()},c.prototype.readOnly=function(){return this._readOnly},c.prototype.properties=function(){return this._properties},c.prototype.lineCancelled=function(){return this._lineCancelled},c.prototype.crossHairMoved=function(){return this.m_crossHairSource.moved()},c.prototype.chartApi=function(){return this._chartApi},c.prototype.propertyChangeHandler=function(){this.invalidate(new A(A.LIGHT_UPDATE))},c.prototype.visibilityChangeHandler=function(){this.setSelectedSource(),this.invalidate(new A(A.LIGHT_UPDATE))},c.prototype.updateAllPaneViews=function(){var t,e;for(t=0;t<this.m_panes.length;t++)e=this.m_panes[t],e.updateAllViews()},c.prototype.mainSeries=function(){return this.m_mainSeries},c.prototype.timeScale=function(){return this.m_timeScale},c.prototype.panes=function(){return this.m_panes},c.prototype.gridSource=function(){return this.m_gridSource},c.prototype.watermarkSource=function(){return this.m_watermarkSource},c.prototype.brandingSource=function(){return this._brandingSource},c.prototype.crossHairSource=function(){return this.m_crossHairSource},c.prototype.publishedChartsTimelineSource=function(){return null},c.prototype.barsMarksSources=function(){return this._barsMarksSources},c.prototype.width=function(){return this.m_width},c.prototype.setPaneHeight=function(t,e){t.setHeight(e),this.recalculateAllPanes(),this.invalidate(new A(A.LIGHT_UPDATE))},
c.prototype.setWidth=function(t){var e,i;for(this.m_width=t,this.m_timeScale.setWidth(this.m_width),e=0;e<this.m_panes.length;++e)i=this.m_panes[e],i.setWidth(t);this.recalculateAllPanes(),this.recalcVisibleRangeStudy(this.dataSources())},c.prototype.createPane=function(t,e){var i,n;if(this._undoModel._chartWidget.isMaximizedPane()&&this._undoModel._chartWidget.toggleMaximizePane(),i=this._properties.paneProperties,e&&i.merge(e),n=new S(this.m_timeScale,i,this),"number"==typeof t&&isFinite(t)){if(t<0||t>this.m_panes.length)return void Y.logDebug("ChartModel.createPane: invalid index: "+t);this.m_panes.splice(t,0,n)}else this.m_panes.push(n);return n.onTagsChanged().subscribe(this,c.prototype.onPaneTagsChanged),n},c.prototype.removePane=function(t){var e,i;this._undoModel._chartWidget.isMaximizedPane()&&this._undoModel._chartWidget.toggleMaximizePane(),t.destroy(),e=this.m_panes.indexOf(t),-1!==e&&this.m_panes.splice(e,1),i=this.crossHairSource(),i.pane===t&&this.clearCurrentPosition(),this.invalidate(new A(A.FULL_UPDATE))},c.prototype.startScalePrice=function(t,e,i){t.startScalePrice(e,i)},c.prototype.scalePriceTo=function(t,e,i){t.scalePriceTo(e,i),this.mainSeries().priceScale().isLockScale()?this.invalidate(new A(A.LIGHT_UPDATE)):this.invalidate(this._paneInvalidationMask(t,A.LIGHT_UPDATE)),this._setScalesResetAvailable(!0)},c.prototype.endScalePrice=function(t,e){t.endScalePrice(e),this.invalidate(this._paneInvalidationMask(t,A.LIGHT_UPDATE))},c.prototype.startScrollPrice=function(t,e,i){t.startScrollPrice(e,i)},c.prototype.scrollPriceTo=function(t,e,i){t.scrollPriceTo(e,i),this.invalidate(this._paneInvalidationMask(t,A.LIGHT_UPDATE))},c.prototype.endScrollPrice=function(t,e){t.endScrollPrice(e),this.invalidate(this._paneInvalidationMask(t,A.LIGHT_UPDATE))},c.prototype.setPriceAutoScale=function(t,e,i){t.setPriceAutoScale(e,i),this.invalidate(this._paneInvalidationMask(t,A.LIGHT_UPDATE))},c.prototype.restorePriceScaleState=function(t,e,i){t.restorePriceScaleState(e,i),this.invalidate(this._paneInvalidationMask(t,A.LIGHT_UPDATE))},c.prototype.resetPriceScale=function(t,e){this._setScalesResetAvailable(!1),t.resetPriceScale(e),this.invalidate(this._paneInvalidationMask(t,A.LIGHT_UPDATE))},c.prototype.updateScales=function(t,e){this._undoModel._chartWidget._updateScalesActions()},c.prototype.startScaleTime=function(t){this.m_timeScale.startScale(t)},c.prototype.mainSeriesPriceScaleNameProperty=function(){return this._mainSeriesPriceScaleNameProperty},c.prototype.mainSeriesPriceScaleName=function(){var t=this.paneForSource(this.m_mainSeries),e=this._mainSeriesPriceScaleName(),i=null;return"left"===e||"right"===e?i=e:t.isOverlay(this.m_mainSeries)&&(i="none"),i},c.prototype.setMainSeriesPriceScaleName=function(t,e){var i,n=this.paneForSource(this.m_mainSeries);t===e||"none"===e&&!n.actionNoScaleIsEnabled(this.m_mainSeries)||(i=n.priceScaleByName(e),this.move(this.m_mainSeries,n,i))},c.prototype.mainSeriesPriceScaleNameChanged=function(){return this._mainSeriesPriceScaleNameChanged},
c.prototype.onMainSeriesPriceScaleNameChanged=function(){this._mainSeriesPriceScaleNameChanged.fire()},c.prototype.mainSeriesScaleRatioProperty=function(){return this._mainSeriesScaleRatioProperty},c.prototype.mainSeriesScaleRatioPropertyOnChanged=function(){this._mainSeriesScaleRatioProperty.listeners().fire(this._mainSeriesScaleRatioProperty)},c.prototype._mainSeriesPriceScaleName=function(){var t=this.paneForSource(this.m_mainSeries);return t.priceScaleName(t.priceScaleForSource(this.m_mainSeries))},c.prototype.mainSeriesScaleRatio=function(){var t=this.paneForSource(this.m_mainSeries);return"left"===this._mainSeriesPriceScaleName()?t.leftPriceScaleRatio():t.rightPriceScaleRatio()},c.prototype.setMainSeriesScaleRatio=function(t){var e=this.paneForSource(this.m_mainSeries);"left"===this._mainSeriesPriceScaleName()?e.applyLeftPriceScaleRatio(t):e.applyRightPriceScaleRatio(t)},c.prototype.scaleTimeTo=function(t){this.m_timeScale.scaleTo(t),this.recalculateAllPanes(),this.invalidate(new A(A.LIGHT_UPDATE)),this._setScalesResetAvailable(!0)},c.prototype.endScaleTime=function(){this.m_timeScale.endScale(),this.invalidate(new A(A.LIGHT_UPDATE)),this.mainSeries().requestMoreData(),this.recalcVisibleRangeStudy(this.dataSources())},c.prototype.startScrollTime=function(t){this.m_timeScale.startScroll(t),this._isTimeScrolling=!0},c.prototype.scrollTimeTo=function(t){this.m_timeScale.scrollTo(t),this.recalculateAllPanes(),this.updateCrossHair(),this.invalidate(new A(A.LIGHT_UPDATE)),this._setScalesResetAvailable(!0)},c.prototype.endScrollTime=function(){this.m_timeScale.endScroll(),this.invalidate(new A(A.LIGHT_UPDATE)),this.mainSeries().requestMoreData(),this.recalcVisibleRangeStudy(this.dataSources()),this._isTimeScrolling=!1},c.prototype.recalcStudyBasedLineTools=function(){this.dataSources().forEach(function(t){v(t)&&t.recalcStudyIfNeeded&&t.recalcStudyIfNeeded()})},c.prototype.recalcVisibleRangeStudy=function(t,e){void 0!==this._recalcVRTimerId&&clearTimeout(this._recalcVRTimerId);var i=this;this._recalcVRTimerId=setTimeout(function(){i._recalcVisibleRangeStudy(t,e)},500)},c.prototype._recalcVisibleRangeStudy=function(t,e){var i,n,o,r,a,l,c,h,u,d,p,_,f,m,g,y;if(!this.timeScale().isEmpty()&&(i=this.timeScale().visibleBars(),n=this.mainSeries().nearestData(i.firstBar(),N.NearestRight),o=this.mainSeries().nearestData(i.lastBar(),N.NearestLeft),r=this.mainSeries().bars().lastIndex(),a=n?n.index:void 0,l=o?o.index:void 0,c=a===this._oldStartVisibleIndex,h=l===this._oldEndVisibleIndex,!c||!h||e))for(this._oldStartVisibleIndex=a,this._oldEndVisibleIndex=l,u={first_visible_bar_time:1e3*Math.floor(n&&n.value?n.value[TradingView.TIME_PLOT]:0),last_visible_bar_time:1e3*Math.floor(o&&o.value?o.value[TradingView.TIME_PLOT]:0),subscribeRealtime:o&&o.index===r},d=0;d<t.length;d++)if(s(t[d])){for(p=t[d],_=p.metaInfo().inputs,f=[],m=0;m<_.length;m++)u.hasOwnProperty(_[m].id)&&f.push(_[m].id);for(g=p.properties().inputs,m=0;m<f.length;m++)y=f[m],g[y].setValueSilently(u[y]);f.length>0&&g.listeners().fire(g)}},
c.prototype.onResetScales=function(){return this._resetScales},c.prototype.resetTimeScale=function(){this.m_timeScale.restoreDefault(),this.recalculateAllPanes(),this.mainSeries().requestMoreData(),this.recalcVisibleRangeStudy(this.dataSources()),this.updateCrossHair(),this.invalidate(new A(A.LIGHT_UPDATE)),this._resetScales.fire(),this._setScalesResetAvailable(!1)},c.prototype.restoreTimeScaleState=function(t){this.m_timeScale.restoreState(t),this.recalculateAllPanes(),this.updateCrossHair(),this.invalidate(new A(A.LIGHT_UPDATE)),this._setScalesResetAvailable(!0)},c.prototype.restoreFactoryDefaults=function(t){t.restoreFactoryDefaults(),this.recalcVisibleRangeStudy(this.dataSources(),!0),this.mainSeries().onChartStyleChanged()},c.prototype.restoreDefaults=function(t){t.restoreDefaults(this._studyVersioning),this.recalcVisibleRangeStudy(this.dataSources(),!0),this.mainSeries().onChartStyleChanged()},c.prototype.setSelectedSource=function(t,e){if(!(this.m_selectedSource===t&&this._lastHittestData===e||t&&t.customization&&t.customization.disableSelection)){this._lastHittestData=e;var i=new A;this.m_selectedSource&&(this.m_selectedSource.updateAllViews(),TradingView.alertsDispatcher&&this.m_selectedSource.hasAlert.value()&&this.m_selectedSource.getAlert({fromCache:!0}).done(function(t){t&&t.set("selected",!1)})),this.m_selectedSource=t,this._selectedSourceChanged.fire(t),t&&(t.updateAllViews(),TradingView.alertsDispatcher&&t.hasAlert.value()&&t.getAlert({fromCache:!0}).done(function(t){t&&t.set("selected",!0)})),i.force=!0,this.invalidate(new A(A.LIGHT_UPDATE)),this.setHoveredSource(t,e)}},c.prototype.checkLineToolSelection=function(){this.m_selectedSource&&y(this.m_selectedSource)&&(this.m_selectedSource.calcIsActualSymbol(),this.m_selectedSource.isActualSymbol()||this.setSelectedSource(null))},c.prototype.onSelectedSourceChanged=function(){return this._selectedSourceChanged},c.prototype.setHoveredSource=function(t,e){if(this.m_hoveredSource!==t||this._lastHittestData!==e){this._lastHittestData=e;var i=null;this.m_hoveredSource&&(this.m_hoveredSource.updateAllViews(),i||(i=new A),TradingView.alertsDispatcher&&this.m_hoveredSource.hasAlert.value()&&this.m_hoveredSource.getAlert({fromCache:!0}).done(function(t){t&&t.set("hovered",!1)}),i.merge(this._paneInvalidationMask(this.paneForSource(this.m_hoveredSource),A.LIGHT_UPDATE))),this.m_hoveredSource=t,t&&(t.updateAllViews(),i||(i=new A),i.merge(this._paneInvalidationMask(this.paneForSource(t),A.LIGHT_UPDATE)),TradingView.alertsDispatcher&&t.hasAlert.value()&&t.getAlert({fromCache:!0}).done(function(t){t&&t.set("hovered",!0)})),i&&this.invalidate(i)}},c.prototype.selectedSource=function(){return this.m_selectedSource},c.prototype.hoveredSource=function(){return this.m_hoveredSource},c.prototype.lastHittestData=function(){return this._lastHittestData},c.prototype.invalidate=function(t){this._invalidateHandler&&this._invalidateHandler(t)},c.prototype.dataSources=function(){var t,e,i,n=[];for(n.push(this.m_crossHairSource),
t=0;t<this.m_panes.length;++t)for(e=this.m_panes[t].dataSources(),i=0;i<e.length;i++)n.push(e[i]);return n},c.prototype.orderedDataSources=function(t){var e,i,n=[];for(n.push(this.m_crossHairSource),e=0;e<this.m_panes.length;e++)i=this.m_panes[e].orderedSources().slice(),t&&i.reverse(),n=n.concat(i);return n},c.prototype.dataSourceForId=function(t){var e,i;for(i=0;i<this.m_panes.length;++i)if(e=this.m_panes[i].dataSourceForId(t))return e;return null},c.prototype.children=function(t,e){return this.dataSources().filter(function(i){return(!0!==e||!s(i)||!i.isChildStudy())&&i.ownerSource()===t})},c.prototype.setAndSaveCurrentPosition=function(t,e,i,n){this.m_crossHairSource.saveOriginCoord(t,e),this.setCurrentPosition(t,e,i,n)},c.prototype.setCurrentPosition=function(t,e,i,n){var o,r,s,a,l,c,h,u,d,p,_,f,m,y,v,b=NaN,S=Math.round(this.m_timeScale.coordinateToIndex(t));if(i&&(o=i.defaultPriceScale(),o.isEmpty()||(r=i.mainDataSource().firstValue(),b=o.coordinateToPrice(e,r))),(this._lineBeingCreated||g(this.currentTool()))&&(b=this._magnet.align(b,S,i)),this._isTimeScrolling)return void this.m_crossHairSource.setPosition(this.m_crossHairSource.index,b,i);for(this.m_crossHairSource.setOnHoveredChartWidget(!0),this.m_crossHairSource.setPosition(S,b,i),this.m_crossHairSource.dataWindowView().update(),s=this.m_panes,a=s.length;a--;)for(l=s[a].dataSources(),c=l.length;c--;)h=l[c].dataWindowView(),h&&h.update(),(u=l[c].legendView())&&u.update();this._lineBeingCreated?(this._lineBeingCreated.setLastPoint({index:S,price:b},n),this._lineBeingCreated.updateAllViews(),this.invalidate(new A(A.LIGHT_UPDATE))):this.crossHairSource().startMeasurePoint()?this.invalidate(new A(A.LIGHT_UPDATE)):this.invalidate(new A(A.UPDATE_CURSOR_ONLY)),this._isSettingsExternalPosition||(d=this._undoModel._chartWidget,d._chartWidgetCollection&&(p=this.mainSeries(),(_=p.syncModel())&&(f=this.m_timeScale.points().roughTime(S,_.projectTime.bind(_)),m={timeStamp:f},y=i.mainDataSource(),y instanceof W&&(m.price=b,m.symbol=y.symbol()),m.syncModel=_,v=this._lineBeingCreated||this._linePointBeingEdited||this._sourceBeingMoved,v=v&&j.drawOnAllCharts().value(),d._chartWidgetCollection.syncCrosshair(m,d,v,n))))},c.prototype.clearCurrentPosition=function(){var t,e,i,n,o,r,s,a=this.crossHairSource();for(a.clearPosition(),a.dataWindowView().update(),t=this.m_panes,e=t.length;e--;)for(i=t[e].dataSources(),n=i.length;n--;)o=i[n].dataWindowView(),o&&o.update(),(r=i[n].legendView())&&r.update();this.invalidate(new A(A.UPDATE_CURSOR_ONLY)),s=this._undoModel._chartWidget,s._chartWidgetCollection&&s._chartWidgetCollection.syncCrosshair(NaN,s)},c.prototype.onSyncScrollNeeded=function(t){var e,i,n,o=this._undoModel._chartWidget;o._chartWidgetCollection&&(e=this.mainSeries(),(i=e.syncModel())&&(n=1e3*this.m_timeScale.points().roughTime(t,i.projectTime.bind(i)),o._chartWidgetCollection.syncScroll(n,this)))},c.prototype.gotoTime=function(t,e){function i(){return p.tickMarks().indexToTime(p.tickMarks().minIndex).valueOf()-t}function n(e){var n,o,r,s,a;if(i()<0){
for(n=p.tickMarks().nearestIndex(t),o=h(_.bars().lastIndex()),n=Math.min(n,o),r=p.tickMarks().indexToTime(n).valueOf();r<t&&n<o;)n++,r=p.tickMarks().indexToTime(n).valueOf();return s=p.visibleBars(),a=s.lastBar()-s.firstBar(),!e&&s.contains(n)||(p.zoomToBarsRange(n-a/2,n+a/2),_.requestMoreData()),{timestamp:p.indexToTimePoint(n)}}}var o,r,s,a,l,c,u,d,p=this.timeScale(),_=this.mainSeries();if(e&&e.model&&(o=_.syncModel())&&(r=this._createSyncPoint(e.model.mainSeries().syncModel(),o),t=1e3*r.sourceTimeToTargetTime(t/1e3)),e=e||{centerIfVisible:!0},t)this._scrollingState&&this._scrollingState.deferred.reject(),s=$.Deferred(),this._scrollingState={targetDate:t,deferred:s,centerIfVisible:e.centerIfVisible};else{if(!this._scrollingState)return Y.logError("scrollTo called without an argument"),$.Deferred().reject().promise();t=this._scrollingState.targetDate,s=this._scrollingState.deferred}return a=n(this._scrollingState.centerIfVisible),a||(l=p.tickMarks().minIndex,c=p.visibleBars(),u=c.lastBar()-c.firstBar(),_.endOfData()?(p.zoomToBarsRange(l-u/2,l+u/2),a={timestamp:p.indexToTimePoint(l),eod:!0}):(d=this.timeScale().tickMarks().estimateLeft(t),_.requestMoreData(Math.ceil(d+u/2)))),a&&(this.fullUpdate(),this._scrollingState=null,s.resolve(a)),s.promise()},c.prototype._createSyncPoint=function(t,e){var i,n,o=this._syncPointCache[t.uniqueId()];if(o){if(i=o[e.uniqueId()])return i}else this._syncPointCache[t.uniqueId()]={};return n=new U(t,e),this._syncPointCache[t.uniqueId()][e.uniqueId()]=n,n},c.prototype.setExternalPosition=function(t,e){var i,n,o,r,s,a,l,c,h,u,d,p,_,f=this.crossHairSource();if(f.setOnHoveredChartWidget(!1),!Number.isNaN(t)&&isNumber(t.timeStamp)&&(n=this.mainSeries(),(o=n.syncModel())&&(r=this._createSyncPoint(t.syncModel,o),s=r.sourceTimeToTargetTime(t.timeStamp),i=this.m_timeScale.points().roughIndex(s,o.distance.bind(o)))),this.mainSeries().symbol()===t.symbol)return this._isSettingsExternalPosition=!0,a=this.paneForSource(this.mainSeries()),l=this.m_timeScale.indexToCoordinate(i),c=a.mainDataSource().firstValue(),h=this.mainSeries().priceScale().priceToCoordinate(t.price,c,!0),this.setCurrentPosition(l,h,a,e||{}),f.setOnHoveredChartWidget(!1),void delete this._isSettingsExternalPosition;for(isFinite(i)?f.setPosition(i,NaN,null):(f.clearPosition(),f.dataWindowView().update()),u=this.dataSources(),d=u.length;d--;)p=u[d].dataWindowView(),p&&p.update(),(_=u[d].legendView())&&_.update();this.invalidate(new A(A.UPDATE_CURSOR_ONLY))},c.prototype.updateCrossHair=function(){this.m_crossHairSource.update()},c.prototype.updateTimeScale=function(t,e,i,n,o,r){var s,a,l;if(r)for(this.m_timeScale.reset(),s=this.dataSources(),a=0;a<s.length;a++)s[a].clearData&&s[a].clearData();if(n.length>0)for(s=this.dataSources(),a=0;a<s.length;a++)s[a].moveData&&s[a].moveData(n);this.m_timeScale.update(t,e,i,o),l="ChartModel.prototype.updateTimeScale("+t+","+e+","+i.length+","+n.length+","+o.length+","+r+")",l+="TimeScale: {first:"+this.m_timeScale.m_points.firstIndex()+",last:"+this.m_timeScale.m_points.lastIndex()+"}",
Y.logDebug(l),this.recalculateAllPanes(),this.invalidate(new A(A.LIGHT_UPDATE))},c.prototype.updateTimeScaleBaseIndex=function(t){var e,i,n,o,r,s,a=this.mainSeries().bars();a.isEmpty()||(e=this.timeScale(),i=e.baseIndex(),n=h(a.lastIndex()),o=e.visibleBars(),null!==o&&(r=o.contains(i),t&&t.index>0&&!r&&(s=n-i,e.setRightOffset(e.rightOffset()-s))),e.setBaseIndex(n))},c.prototype.recalculatePane=function(t){t&&t.recalculate()},c.prototype.paneForSource=function(t){for(var e=this.m_panes.length-1;e>=0;e--)if(-1!==this.m_panes[e].dataSources().indexOf(t))return this.m_panes[e];return t instanceof k?this.paneForSource(this.m_mainSeries):null},c.prototype.recalculateAllPanes=function(){for(var t=0;t<this.m_panes.length;++t)this.m_panes[t].recalculate();this.updateAllPaneViews()},c.prototype._invalidateBarColorerCaches=function(){var t,e,i=this.dataSources();for(t=0;t<i.length;++t)(e=i[t])instanceof W&&e.invalidateBarColorerCache()},c.prototype.addStrategySource=function(t){~this.strategySources.indexOf(t)||(this.strategySources.push(t),this.strategySources.change.fire())},c.prototype.removeStrategySource=function(t){var e,i,n=this.strategySources.indexOf(t);~n&&(e=this.strategySources.splice(n,1),e[0]===this._activeStrategySource.value()&&this.unsetActiveStrategySource(),this.strategySources.length>0&&(i=this.strategySources[this.strategySources.length-1],this.setActiveStrategySource(i)),this.strategySources.change.fire())},c.prototype.setActiveStrategySource=function(t){~this.strategySources.indexOf(t)&&this._activeStrategySource.setValue(t)},c.prototype.unsetActiveStrategySource=function(){this._activeStrategySource.setValue(null)},c.prototype.activeStrategySource=function(){return this._activeStrategySource},c.prototype.insertStudy=function(t,e,i,n,o){var r,s,a,c;return null!==n&&void 0!==n||(n=this.mainSeries()),r=["Study_ESD$TV_SPLITS@tv-scripting","Study_ESD$TV_DIVIDENDS@tv-scripting","Study_ESD$TV_SPLITS@tv-scripting","Volume@tv-basicstudies","Sessions@tv-basicstudies"],-1===r.indexOf(t.id)&&z("studies","Study_"+t.id),s=null,i||t.is_price_study?s=this.paneForSource(n):(s=this.createPane(),e&&e.paneSize&&s.setPaneSize(e.paneSize)),"Compare@tv-basicstudies"===t.id&&(z("compare","symbol:"+e.inputs.symbol),this.m_mainSeries.priceScale().setMode({log:!1,percentage:!0})),a=V(t,e,s,this.studyVersioning(),n),c=D(this,a,n,t),this._recalcVisibleRangeStudy([c],!0),c.start(),c.childStudyByRebind().subscribe(null,function(){z("SOS","Apply SOS","Rebind SOS")}),s.addDataSource(c,l(s,n,c.metaInfo(),i,o)),c.properties().linkedToSeries&&c.properties().linkedToSeries.value()&&c.setOwnerSource(this.mainSeries()),this.recalculatePane(s),this.invalidate(new A(A.FULL_UPDATE)),this._invalidateBarColorerCaches(),this.recalcVisibleRangeStudy(this.dataSources(),!0),this._studyInserted.fire(c),c},c.prototype.studyInserted=function(){return this._studyInserted},c.prototype.replaceStudyStub=function(t,e){var i,n,o,r=this.paneForSource(t);return null!==r&&(i=t.isNoScale()?null:t.priceScale(),n=t.zorder(),o=t.ownerSource(),
r.insertDataSource(e,i,n),e.setOwnerSource(o),this.panes().forEach(function(i){i.dataSources().forEach(function(i){i._ownerSource===t&&i.setOwnerSource(e)})}),this.removeSource(t),e.start(),this.recalculatePane(r),this.invalidate(new A(A.FULL_UPDATE)),!0)},c.prototype.insertStudyStub=function(t){var e=this.mainSeries(),i=this.paneForSource(e),n=new B(this,null,t);return i.addDataSource(n,null),this.recalculatePane(i),this.invalidate(new A(A.FULL_UPDATE)),n},c.prototype.removeStudyStub=function(t){var e=this.dataSourceForId(t);return void 0===e?(Y.logNormal("StudyStub id="+t+" is not found in chart model"),!1):(this.removeSource(e),!0)},c.prototype.detachSource=function(t,e){var i=this.paneForSource(t);if(i)return i.removeDataSource(t),i.isEmpty()?(this._lineBeingCreated&&i===this._paneBeingCreatedLineOn&&this.cancelCreatingLine(),this.removePane(i,e),!0):(this.invalidate(new A(A.FULL_UPDATE)),this._alertsList&&this._alertsList.trigger("reset"),!1)},c.prototype.removeSource=function(t,e){var i,n,o,r;if(t===this.m_selectedSource&&this.setSelectedSource(null),t===this._sourceBeingMoved&&(this._sourceBeingMoved=null,this._linePointBeingMoved=null),t===this._lineBeingEdited&&(this._lineBeingEdited=null),t===this._lineBeingCreated&&(this._lineBeingCreated=null),t.stop&&t.stop(),i=this.detachSource(t,e),t.metaInfo&&t.metaInfo()&&"Compare@tv-basicstudies"===t.metaInfo().id){for(n=this.paneForSource(this.m_mainSeries),o=n.dataSources(),r=0;r<o.length;r++)if(o[r].metaInfo&&"Compare@tv-basicstudies"===o[r].metaInfo().id)return;this.m_mainSeries.priceScale().setMode({percentage:!1})}return this.invalidate(new A(A.FULL_UPDATE)),this._invalidateBarColorerCaches(),t.linkKey&&j.removeLineTool({model:this,linkKey:t.linkKey}),s(t)&&t.isChildStudy()&&t.source().unsetChild(t),t.destroy&&t.destroy(),i},c.prototype._unmergeAvailable=function(t){return TradingView.isInherited(t.constructor,M)&&!TradingView.isInherited(t.constructor,O)||t===this.m_mainSeries},c.prototype.isMergeUpAvailableForSource=function(t){return!!this._unmergeAvailable(t)&&this.paneForSource(t)!==this.panes()[0]},c.prototype.mergeSourceUp=function(t){var e,i,n,o;this.isMergeUpAvailableForSource(t)&&(e=this.paneForSource(t),i=this.panes().indexOf(e),n=this.panes()[i-1],o=n.findSuitableScale(t),this.move(t,n,o))},c.prototype.isMergeDownAvailableForSource=function(t){var e,i;return!!this._unmergeAvailable(t)&&(e=this.paneForSource(t),i=this.panes(),e!==i[i.length-1])},c.prototype.mergeSourceDown=function(t){var e,i,n,o;this.isMergeDownAvailableForSource(t)&&(e=this.paneForSource(t),i=this.panes().indexOf(e),n=this.panes()[i+1],o=n.findSuitableScale(t),this.move(t,n,o))},c.prototype.isUnmergeAvailableForSource=function(t){var e,i;return!!this._unmergeAvailable(t)&&(e=this.paneForSource(t),i=e.dataSources().filter(function(t){return TradingView.isInherited(t.constructor,I)&&t.showInObjectTree()}),i.length>1)},c.prototype.unmergeSourceUp=function(t){var e,i,n,o;this.isUnmergeAvailableForSource(t)&&(e=this.paneForSource(t),i=this.panes().indexOf(e),n=this.createPane(i),
o=n.findSuitableScale(t),this.move(t,n,o))},c.prototype.unmergeSourceDown=function(t){var e,i,n,o;this.isUnmergeAvailableForSource(t)&&(e=this.paneForSource(t),i=this.panes().indexOf(e),n=this.createPane(i+1),o=n.findSuitableScale(t),this.move(t,n,o))},c.prototype.isLeftPriceScaleVisible=function(){return this._properties.scalesProperties.showLeftScale.value()},c.prototype.isRightPriceScaleVisible=function(){return this._properties.scalesProperties.showRightScale.value()},c.prototype.setLeftPriceScaleVisible=function(t){this._properties.scalesProperties.showLeftScale.value()!==t&&this._properties.scalesProperties.showLeftScale.setValue(t)},c.prototype.setRightPriceScaleVisible=function(t){this._properties.scalesProperties.showRightScale.value()!==t&&this._properties.scalesProperties.showRightScale.setValue(t)},c.prototype.setPriceScaleVisibility=function(t,e){"left"===t&&this.setLeftPriceScaleVisible(e),"right"===t&&this.setRightPriceScaleVisible(e)},c.prototype.move=function(t,e,i){var n,o,r,s,a=this.children(t,!0),l=this.paneForSource(t),c=e?e.priceScaleName(i):"right";if(l===e){for(n=e.priceScaleByName(c),o=0;o<a.length;o++)e.move(a[o],n);e.move(t,n)}else{for(r=e||this.createPane(),s=r.priceScaleByName(c),o=0;o<a.length;o++)this.detachSource(a[o]);for(this.detachSource(t),r.addDataSource(t,s),o=0;o<a.length;o++)r.addDataSource(a[o],s)}this._alertsList&&this._alertsList.trigger("reset"),t===this.m_mainSeries&&this.onMainSeriesPriceScaleNameChanged(),this.invalidate(new A(A.FULL_UPDATE))},c.prototype.isSingleInstanceLineTool=function(t){return"LineStudyMtpRiskReward"===t||"LineStudyMtpAnalysis"===t},c.prototype._externalTimeStamp=function(t){var e=this.mainSeries().syncModel();return this.m_timeScale.points().roughTime(t,e&&e.projectTime.bind(e))},c.prototype.createLineTool=function(t,e,i,n,o){var r,s,a,l,c,h,d,p,_,f,y,v;return g(i)?(this.isSingleInstanceLineTool(i)&&this._undoModel.removeAllDrawingTools(i),"LineToolExecution"!==i&&z("drawings","Study_Drawing_"+i),n&&(r=n.state(),s=TradingView.factoryDefaults("linetool"),a=i.toLowerCase(),TradingView.merge(s,TradingView.factoryDefaults(a)),n=TradingView[i].prototype.createPropertiesObject(a,s),n.merge(r)),l=m(i,this,n,null,t.mainDataSource()),n||(n=l.properties()),c=!l.linkKey&&!o,j.drawOnAllCharts().value()?l.linkKey=o||q.randomHash():l.linkKey=o,l.toolname=i,l.setOwnerSource(t.mainDataSource()),h=t.defaultPriceScale(),t.addDataSource(l,h),l.isFixed()?(p=t.mainDataSource().firstValue(),_=this.m_timeScale.indexToCoordinate(e.index),f=h.priceToCoordinate(e.price,p),d=l.addFixedPoint(new u(_,f))):(y=l.constructor,y.skipMagnetting||(e.price=this._magnet.align(e.price,e.index,t)),d=l.addPoint(e)),d||(this._lineBeingCreated=l,this._paneBeingCreatedLineOn=t),c&&l.enableCurrentIntervalVisibility(),this.invalidate(new A(A.FULL_UPDATE)),o||!j.drawOnAllCharts().value()||l.properties().singleChartOnly||(v=this._externalTimeStamp(e.index),j.createLineTool({point:{price:e.price,timeStamp:v},linetool:i,properties:n,symbol:this.mainSeries().symbol(),model:this,linkKey:l.linkKey
})),l):null},c.prototype.lineBeingCreated=function(){return this._lineBeingCreated},c.prototype.paneBeingCreatedLineOn=function(){return this._paneBeingCreatedLineOn},c.prototype.coninueCreatingLine=function(t,e,i,n){var o,r,s,a,l,c=this.paneForSource(this._lineBeingCreated);return t.price=this._magnet.align(t.price,t.index,c),o=this._lineBeingCreated.addPoint(t,e,i),r=this._lineBeingCreated,this._lineBeingCreated.updateAllViews(),s=new A(A.LIGHT_UPDATE),a=null,o&&(a={points:this._lineBeingCreated._timePoint,interval:this.mainSeries().interval()},this._paneBeingCreatedLineOn=null,this._lineBeingCreated=null,s.force=!0),this.invalidate(s),n||!j.drawOnAllCharts().value()||r.properties().singleChartOnly||(l=this._externalTimeStamp(t.index),j.continueLineTool({point:{price:t.price,timeStamp:l},envState:e,finalState:a,model:this})),o},c.prototype.cancelCreatingLine=function(){if(this._lineBeingCreated){var t=this._lineBeingCreated;this.removeSource(this._lineBeingCreated),this._lineBeingCreated=null,this._lineCancelled.fire(),j.drawOnAllCharts().value()&&!t.properties().singleChartOnly&&j.cancelLineTool({model:this})}},c.prototype.startChangingLinetool=function(t,e,i,n){var o,r,s;this._lineBeingEdited=t,this._linePointBeingEdited=i,this._lineBeingEdited.startChanging(i,e),o=this.paneForSource(t),e.price=this._magnet.align(e.price,e.index,o),this._lineBeingEdited.startDragPoint&&this._lineBeingEdited.startDragPoint(i,e),this._lineBeingEdited.setPoint(i,e,n),this._lineBeingEdited.updateAllViews(),r=this._paneInvalidationMask(o,A.LIGHT_UPDATE),r.force=!0,this.invalidate(r),t.linkKey&&!t.properties().singleChartOnly&&(s=this._externalTimeStamp(e.index),j.startChangingLineTool({linkKey:t.linkKey,model:this,symbol:this.mainSeries().symbol(),point:{price:e.price,timeStamp:s},pointIndex:i,envState:n}))},c.prototype.lineBeingEdited=function(){return this._lineBeingEdited},c.prototype.linePointBeingEdited=function(){return this._linePointBeingEdited},c.prototype.changeLinePoint=function(t,e){var i,n,o,r,s,a=this.paneForSource(this._lineBeingEdited);void 0!==t.x&&void 0!==t.y?(o=this._lineBeingEdited.priceScale(),r=a.mainDataSource().firstValue(),i=o.coordinateToPrice(t.y,r),n=Math.round(this.timeScale().coordinateToIndex(t.x)),i=this._magnet.align(i,n,a),this._lineBeingEdited.setPoint(this._linePointBeingEdited,{price:i,index:n},e)):this._lineBeingEdited.setPoint(this._linePointBeingEdited,t,e),this._lineBeingEdited.updateAllViews(),this.invalidate(new A(A.LIGHT_UPDATE)),this._lineBeingEdited.linkKey&&!this._lineBeingEdited.properties().singleChartOnly&&(s=this._externalTimeStamp(n),j.changeLineTool({linkKey:this._lineBeingEdited.linkKey,model:this,symbol:this.mainSeries().symbol(),point:{price:i,timeStamp:s},envState:e}))},c.prototype.endChangingLinetool=function(t){var e,i,n=this._lineBeingEdited;this._lineBeingEdited.endChanging(!1,t),this._lineBeingEdited=null,this._linePointBeingEdited=null,e=new A(A.LIGHT_UPDATE),e.force=!0,this.invalidate(e),i={points:n._timePoint,interval:this.mainSeries().interval()},
n.linkKey&&!n.properties().singleChartOnly&&j.finishChangingLineTool({model:this,linkKey:n.linkKey,symbol:this.mainSeries().symbol(),finalState:i})},c.prototype.startMovingSource=function(t,e,i){var n,o,r;this._sourceBeingMoved=t,this._linePointBeingMoved=i,this._sourceBeingMoved.startMoving(e,i),n=this.paneForSource(this._sourceBeingMoved),o=this._paneInvalidationMask(n,A.LIGHT_UPDATE),o.force=!0,this.invalidate(o),t.linkKey&&!t.properties().singleChartOnly&&(r=this._externalTimeStamp(e.index),j.startMovingLineTool({linkKey:t.linkKey,model:this,symbol:this.mainSeries().symbol(),point:{price:e.price,timeStamp:r}}))},c.prototype.sourceBeingMoved=function(){return this._sourceBeingMoved},c.prototype.moveSource=function(t){if(this._sourceBeingMoved.move(t,this._linePointBeingMoved),this.invalidate(new A(A.LIGHT_UPDATE)),this._sourceBeingMoved.linkKey&&!this._sourceBeingMoved.properties().singleChartOnly){var e=this._externalTimeStamp(t.index);j.moveLineTool({linkKey:this._sourceBeingMoved.linkKey,model:this,point:{price:t.price,timeStamp:e}})}},c.prototype.endMovingSource=function(t){var e,i,n=this._sourceBeingMoved,o=this.paneForSource(this._sourceBeingMoved);this._sourceBeingMoved.endMoving(t),this._sourceBeingMoved=null,this._linePointBeingMoved=null,e=this._paneInvalidationMask(o,A.LIGHT_UPDATE),e.invalidateAll(A.LIGHT_UPDATE),e.force=!0,this.invalidate(e),y(n)&&(i={points:n._timePoint,interval:this.mainSeries().interval()},n.linkKey&&!n.properties().singleChartOnly&&j.finishMovingLineTool({linkKey:n.linkKey,model:this,finalState:i}))},c.prototype.finishLineTool=function(t){var e=this.lineBeingCreated();e&&(e.finish&&e.finish(),!t&&j.drawOnAllCharts().value()&&e.linkKey&&!e.properties().singleChartOnly&&j.finishLineTool({linkKey:e.linkKey,model:this}))},c.prototype.calculateDefaultTags=function(){var t,e,i=[],n=this.dataSources();for(t=0;t<n.length;t++)e=n[t],e.tags&&(i=i.concat(e.tags()));return i},c.prototype.changeZOrder=function(t,e){this.paneForSource(t).changeZOrder(t,e),this.invalidate(new A(A.FULL_UPDATE))},c.prototype.sendToBack=function(t){this.paneForSource(t).sendToBack(t),this.invalidate(new A(A.FULL_UPDATE))},c.prototype.bringToFront=function(t){this.paneForSource(t).bringToFront(t),this.invalidate(new A(A.FULL_UPDATE))},c.prototype.onTagsChanged=function(){return this._tagsChanged},c.prototype.onPaneTagsChanged=function(){this._tagsChanged.fire()},c.prototype.setTimeViewport=function(t,e){this.timeScale().zoomToBarsRange(t,e),this.recalculateAllPanes(),this.invalidate(new A(A.LIGHT_UPDATE))},c.prototype.zoomToViewport=function(t,e,i,n,r){var s,a,l;this.setTimeViewport(t,e),s=Math.min(i,n),a=Math.max(i,n),l=r.defaultPriceScale(),l.isPercentage()||l.setMode({autoScale:!1}),l.isLog()&&(s=l.priceToLogical(s),a=l.priceToLogical(a)),l.setPriceRange(new o(s,a)),this.recalculateAllPanes(),this.invalidate(this._paneInvalidationMask(r,A.LIGHT_UPDATE)),this._setScalesResetAvailable(!0)},c.prototype.clearAllStudies=function(){var t,e=this.dataSources();for(t=0;t<e.length;t++)e[t].clearData&&e[t].clearData()},
c.prototype.allStudies=function(){return this._getAllSources(s)},c.prototype.allLineTools=function(){return this._getAllSources(y)},c.prototype.getStudyById=function(t){var e=this.dataSourceForId(t);return null!==e&&s(e)?e:null},c.prototype.getLineToolById=function(t){var e=this.dataSourceForId(t);return null!==e&&y(e)?e:null},c.prototype._getAllSources=function(t){var e,i,n,o,r,s,a=[],l=this.m_panes,c=l.length;for(e=0;e<c;++e)for(i=l[e],n=i.dataSources(),o=n.length,r=0;r<o;++r)s=n[r],t(s)&&a.push(s);return a},c.prototype.getStudyById=function(t){var e=this.dataSourceForId(t);return e instanceof M?e:null},c.prototype.backgroundColor=function(){return this._properties.paneProperties.background._value},c.prototype.backgroundCounterColor=function(){return"black"===_(p(this.backgroundColor()),150)?"white":"black"},c.prototype.isDark=function(){return"white"===this.backgroundCounterColor()},c.prototype.canZoomIn=function(){return this.m_timeScale.canZoomIn()&&r.enabled("chart_zoom")},c.prototype.canZoomOut=function(){return this.m_timeScale.canZoomOut()&&r.enabled("chart_zoom")},c.prototype.updateAllVolumeStudies=function(){var t,e,i,n,o,r,a=this.m_panes;for(t=a.length;t--;)for(e=!1,i=a[t],n=i.dataSources(),o=n.length;o--;)r=n[o],s(r)&&"Volume"===r.metaInfo().shortId&&(r.updateAllViews(),e||(this.updatePane(i),e=!0))},c.prototype.alertsList=function(){return this._alertsList},c.prototype.setAlertsStudiesList=function(t){this._alertsStudiesList=$.map($.grep(t,function(t){var e,i=t.plots||[];for(e=0;e<i.length;e++)if("line"===i[e].type)return!0;return!1}),function(t){return t.id})},c.prototype.canCreateAlertForDataSource=function(t){if(!r.enabled("alerts"))return!1},c.prototype.setInterval=function(t,e){var i=setInterval(t,e);return this._modelIntervals.push(i),i},c.prototype.clearInterval=function(t){clearInterval(t);var e=this._modelIntervals.indexOf(t);e>-1&&this._modelIntervals.splice(e,1)},c.prototype.clearIntervals=function(){for(var t=0;t<this._modelIntervals.length;t++)clearInterval(this._modelIntervals[t]);this._modelIntervals=[]},c.prototype.destroy=function(){var t;for(t=0;t<this._barsMarksSources.length;t++)this._barsMarksSources[t].destroy();for(this.clearIntervals(),j.hideAllDrawings().unsubscribe(this,this.visibilityChangeHandler),this.resetDeferredStudies(),this._brandingSource&&this._brandingSource.destroy(),t=0;t<this._barsMarksSources.length;t++)this._barsMarksSources[t].destroy();for(t=0;t<this.m_panes.length;t++)this.m_panes[t].destroy();this.m_panes.length=0},c.prototype.countUserStudies=function(t){var e,i,n,o,r,a,l=0;for(t=t||{},e=0;e<this.m_panes.length;e++)for(i=this.m_panes[e].dataSources(),n=0;n<i.length;n++)if(o=i[n],s(o)&&o.showInObjectTree()){if(r=o.metaInfo&&o.metaInfo()){if(a=r.id,t.dontCountVolume&&"Volume@tv-basicstudies"===a)continue;if(t.dontCountCompare&&"Compare@tv-basicstudies"===a)continue;if(t.dontCountOverlay&&"Overlay@tv-basicstudies"===a)continue}l++}return l},c.prototype.isJustClonedChart=function(){return this._undoModel.isJustClonedChart()},c.prototype.undoModel=function(){
return this._undoModel},c.prototype.copyToOtherCharts=function(t){var e,i,n,o;t.linkKey=t.linkKey||q.randomHash(),e=this,i=t.state(),n=this.mainSeries(),(o=n.syncModel())&&(i.points=t._timePoint.map(function(t){var i=e.timeScale().timePointToIndex(t.time_t)+t.offset;return{price:t.price,timeStamp:e._externalTimeStamp(i)}}),i.linetool=t.getType(),i.model=this,i.symbol=this.mainSeries().symbol(),i.finalState={points:t._timePoint,interval:this.mainSeries().interval()},j.copyLineTool(i))},c.prototype.restoreSource=function(t,e,i,n,o){var r,s,a,l,c,h,u,d;return r=t?this.createPane(e):this.panes()[e],a=n.type,s=a.toLowerCase().startsWith("study")?r._restoreStudy(n):r._restoreLineTool(n),l=s.ownerSource()?s.ownerSource().priceScale():r.priceScaleByName(o),l?(s.setPriceScale(l),l.addDataSource(s)):(l=new x(this.properties().scalesProperties),l.setHeight(r.m_height),c=s.metaInfo&&"Volume@tv-basicstudies"===s.metaInfo().id,h=c?.75:r.m_rightPriceScale.topMargin(),u=c?0:r.m_rightPriceScale.bottomMargin(),l.setTopMargin(h),l.setBottomMargin(u),l.addDataSource(s),s.setPriceScale(l),s._isOverlay=!0),d=null,n.ownerSource&&(d=r.dataSourceForId(n.ownerSource)),s.setOwnerSource(d),s.setPriceScale(l),s.start(),s.restore&&s.restore(),t&&r.restoreState(i),this.recalculateAllPanes(),this.mainSeries().invalidateBarColorerCache(),this.invalidate(new A(A.FULL_UPDATE,!0)),s.linkKey&&j.restoreLineTool({model:this,linkKey:s.linkKey,state:{restorePane:t,paneIndex:e,paneState:i,sourceState:n,priceScaleName:o}}),s},c.prototype.restoreLineToolState=function(t,e){t.restorePoints(e.points,e.indexes||[]),t.properties().merge(e.state),t.restoreData&&t.restoreData(e),t.createServerPoints(),this.invalidate(new A(A.FULL_UPDATE)),t.linkKey&&j.restoreLineToolState({model:this,linkKey:t.linkKey,state:e})},c.prototype.createBrandingSource=function(){this._brandingSource=new L(this)},c.prototype.onChartThemeLoaded=function(){return this._chartThemeLoaded},c.prototype.chartThemeLoaded=function(){this._chartThemeLoaded.fire()},c.prototype.selectBarMode=function(){return this.m_crossHairSource.selectBarMode()},c.prototype.toggleSelectBarMode=function(){this.m_crossHairSource.toggleSelectBarMode()},c.prototype.onBarSelected=function(){return this.m_crossHairSource.onBarSelected()},c.prototype.isSeriesStyleSupported=function(t){return this.m_mainSeries.isStyleSupported(t)},c.prototype.getStudyShiftColorStartOffset=function(){return this._studyShiftColorStartOffset},c.prototype.setStudyShiftColorStartOffset=function(t){this._studyShiftColorStartOffset=t},c.prototype.setPriceAutoScaleForAllMainSources=function(){var t,e;for(t=0;t<this.m_panes.length;++t)null===(e=this.m_panes[t].mainDataSource())||e.priceScale().isLockScale()||e.priceScale().setMode({autoScale:!0})},c.prototype.isInReplay=function(){return this.m_mainSeries.isInReplay()},c.prototype.switchToReplay=function(t){},c.prototype.switchToRealtime=function(){},c.prototype.defaultResolutions=function(){return this.chartApi().chartApi().defaultResolutions()},c.prototype._setScalesResetAvailable=function(t){
this._isScalesResetAvailable!==t&&(this._isScalesResetAvailable=t,this._isScalesResetAvailableChanged.fire())},c.prototype.isScalesResetAvailable=function(){return this._isScalesResetAvailable},c.prototype.isScalesResetAvailableChanged=function(){return this._isScalesResetAvailableChanged},t.exports=c}).call(e,i(8),i(15),i(65).PriceRange,i(4))},function(t,e,i){"use strict";function n(t,e){this.array=[];for(var i in t)t[i].key=i,this.array.push(t[i]);this.rearrange(e)}n.prototype.rearrange=function(t){if("function"!=typeof t)throw Error("sort param is not a function");return this.array.sort(t)},n.byValue=function(t){return function(t,e){return t-e}},n.byField=function(t){return function(e,i){return e[t]>i[t]?1:e[t]<i[t]?-1:e[t]===i[t]?0:void 0}},n.byOrder=function(t){return function(e,i){return t.indexOf(e.key)-t.indexOf(i.key)}},t.exports=n},function(t,e,i){"use strict";function n(){s.call(this)}function o(t,e){this._constructor="LineToolFibRetracement";var r=e||this.createPropertiesObject("linetoolfibretracement");a.call(this,t,r),this.version=o.version,this._properties._stateVersion=1,t._fibRetracementLabelsCache||(t._fibRetracementLabelsCache=new n),i.e(0).then(function(t){var e=i(879).FibRetracementPaneView;this._setPaneViews([new e(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var r=i(18),s=i(76),a=i(1).LineDataSource,l=i(2).propertyPages;inherit(n,s),n.prototype.levelsCount=function(){return o.LevelsCount},inherit(o,a),o.version=2,o.LevelsCount=24,o.prototype.levelsCount=function(){return o.LevelsCount},o.prototype.stop=function(){a.prototype.stop.call(this),this._model._fibRetracementLabelsCache.removeSource(this.id())},o.prototype.pointsCount=function(){return 2},o.prototype.title=function(){return"Fib Retracement"},o.prototype.name=function(){return"Fib Retracement"},o.prototype.migrateVersion=function(t,e,i){1===t&&this.properties().extendLines.setValue(!0)},o.prototype.processErase=function(t,e){var i="level"+e,n=this.properties()[i].visible;t.setProperty(n,!1,"Erase level line")},o.prototype.createPropertiesObject=function(t,e,i){return new r(t,e,i,{range:[1,24],names:["coeff","color","visible"]})},o.prototype.getStylesPropertyPage=function(){return l.LineToolFibRetracementStylesPropertyPage},e.LineToolFibRetracement=o},function(t,e,i){"use strict";(function(e){function i(t){e.call(this,""),this.subscribe(this,i.prototype.checkSelfColor),this.reloadProperties(t)}inherit(i,e),i.prototype.reloadProperties=function(t){for(;this._childs.length>0;)this.removeProperty(this._childs[0]);this._initValues=[];for(var e=0;e<t.length;++e)this._initValues.push(t[e].defaultValue),this.addChild(e,t[e].property);this.checkSelfColor()},i.prototype.setValue=function(t,i){if(this._value!==t||i){var n=this;this._childs.forEach(function(e){n[e].setValue(t||n._initValues[e])}),e.prototype.setValue.call(this,t,i)}},i.prototype.checkSelfColor=function(){var t,i=!0;for(t=0;t<this._initValues.length;++t)if(this[t].value()!==this[0].value()){i=!1;break}e.prototype.setValue.call(this,i?this[0].value():"")},t.exports=i
}).call(e,i(16))},function(t,e,i){"use strict";function n(){a.call(this)}function o(t,e){this._constructor="LineToolFibChannel";var s=e||this.createPropertiesObject("linetoolfibchannel");r.call(this,t,s),this.version=o.version,t._fibChannelLabelsCache||(t._fibChannelLabelsCache=new n),i.e(0).then(function(t){var e=i(880).FibChannelPaneView;this._setPaneViews([new e(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var r=i(1).LineDataSource,s=i(18),a=i(76),l=i(2).propertyPages;inherit(n,a),n.prototype.levelsCount=function(){return o.LevelsCount},inherit(o,r),o.LevelsCount=24,o.version=2,o.prototype.levelsCount=function(){return o.LevelsCount},o.prototype.migrateVersion=function(t,e,i){i.properties.removeProperty("reverse")},o.prototype.pointsCount=function(){return 3},o.prototype.title=function(){return"Fib Channel"},o.prototype.name=function(){return"Fib Channel"},o.prototype.processErase=function(t,e){var i="level"+e,n=this.properties()[i].visible;t.setProperty(n,!1,"Erase level line")},o.prototype.createPropertiesObject=function(t,e,i){return new s(t,e,i,{range:[1,24],names:["coeff","color","visible"]})},o.prototype.getStylesPropertyPage=function(){return l.LineToolFibChannelStylesPropertyPage},e.LineToolFibChannel=o},function(t,e,i){"use strict";function n(){a.call(this)}function o(t,e){this._constructor="LineToolFibSpeedResistanceArcs";var o=e||this.createPropertiesObject("linetoolfibspeedresistancearcs");r.call(this,t,o),t._fibSpeedResistanceArcsLabelsCache||(t._fibSpeedResistanceArcsLabelsCache=new n),i.e(0).then(function(t){var e=i(881).FibSpeedResistanceArcsPaneView;this._setPaneViews([new e(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var r=i(1).LineDataSource,s=i(18),a=i(76),l=i(2).propertyPages;inherit(n,a),n.prototype.levelsCount=function(){return o.LevelsCount},inherit(o,r),o.LevelsCount=11,o.prototype.levelsCount=function(){return o.LevelsCount},o.prototype.pointsCount=function(){return 2},o.prototype.title=function(){return"Fib Speed Resistance Arcs"},o.prototype.name=function(){return"Fib Speed Resistance Arcs"},o.prototype.processErase=function(t,e){var i="level"+e,n=this.properties()[i].visible;t.setProperty(n,!1,"Erase level line")},o.prototype.createPropertiesObject=function(t,e,i){return new s(t,e,i,{range:[1,11]})},o.prototype.getStylesPropertyPage=function(){return l.LineToolFibSpeedResistanceArcsStylesPropertyPage},e.LineToolFibSpeedResistanceArcs=o},function(t,e,i){"use strict";function n(){a.call(this)}function o(t,e){this._constructor="LineToolProjection";var n=e||this.createPropertiesObject("linetoolprojection");l.call(this,t,n),i.e(0).then(function(t){var e=i(882).ProjectionLinePaneView;this._setPaneViews([new e(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var r=i(18),s=i(330).LineToolFibWedge,a=i(76),l=i(1).LineDataSource,c=i(2).propertyPages;inherit(n,a),n.prototype.levelsCount=function(){return 1},inherit(o,s),o.prototype.title=function(){return"Projection"},o.prototype.name=function(){return"Projection"},o.prototype.getCache=function(){
return this._model._projectionLabelsCache||(this._model._projectionLabelsCache=new n),this._model._projectionLabelsCache},o.prototype.createPropertiesObject=function(t,e,i){return new r(t,e,i,{range:[1,1]})},o.prototype.getStylesPropertyPage=function(){return c.LineToolProjectionStylesPropertyPage},e.LineToolProjection=o},function(t,e,i){"use strict";function n(){a.call(this)}function o(t,e){this._constructor="LineToolTrendBasedFibExtension";var s=e||new this.createPropertiesObject("linetooltrendbasedfibextension");r.call(this,t,s),this.version=o.version,t._trendBasedFibExtensionLabelsCache||(t._trendBasedFibExtensionLabelsCache=new n),i.e(0).then(function(t){var e=i(883).TrendBasedFibExtensionPaneView;this._setPaneViews([new e(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var r=i(1).LineDataSource,s=i(18),a=i(76),l=i(2).propertyPages;inherit(n,a),n.prototype.levelsCount=function(){return o.LevelsCount},n.prototype.points=function(t){return[t.points()[0],t.points()[1]]},n.prototype.startPoint=function(t,e){return t.points()[2]},n.prototype.priceRange=function(t,e){var i=this.points(t),n=i[0],o=i[1];return e?n.price-o.price:o.price-n.price},n.prototype.sourceIsReady=function(t){return t.points().length>=3},inherit(o,r),o.version=2,o.LevelsCount=24,o.prototype.levelsCount=function(){return o.LevelsCount},o.prototype.stop=function(){r.prototype.stop.call(this),this._model._trendBasedFibExtensionLabelsCache.removeSource(this.id())},o.prototype.pointsCount=function(){return 3},o.prototype.title=function(){return"Trend-Based Fib Extension"},o.prototype.name=function(){return"Trend-Based Fib Extension"},o.prototype.migrateVersion=function(t,e,i){1===t&&this.properties().extendLines.setValue(!0)},o.prototype.processErase=function(t,e){var i="level"+e,n=this.properties()[i].visible;t.setProperty(n,!1,"Erase level line")},o.prototype.createPropertiesObject=function(t,e,i){return new s(t,e,i,{range:[0,8]})},o.prototype.getStylesPropertyPage=function(){return l.LineToolTrendBasedFibExtensionStylesPropertyPage},e.LineToolTrendBasedFibExtension=o},function(t,e,i){"use strict";function n(){a.call(this)}function o(t,e){this._constructor="LineToolFibCircles";var o=e||this.createPropertiesObject("linetoolfibcircles");r.call(this,t,o),t._fibCirclesLabelsCache||(t._fibCirclesLabelsCache=new n),i.e(0).then(function(t){var e=i(884).FibCirclesPaneView;this._setPaneViews([new e(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var r=i(1).LineDataSource,s=i(18),a=i(76),l=i(2).propertyPages;inherit(n,a),n.prototype.levelsCount=function(){return o.LevelsCount},inherit(o,r),o.LevelsCount=11,o.prototype.levelsCount=function(){return o.LevelsCount},o.prototype.pointsCount=function(){return 2},o.prototype.title=function(){return"Fib Circles"},o.prototype.name=function(){return"Fib Circles"},o.prototype.processErase=function(t,e){var i="level"+e,n=this.properties()[i].visible;t.setProperty(n,!1,"Erase level line")},o.prototype.createPropertiesObject=function(t,e,i){return new s(t,e,i,{range:[1,11]})},
o.prototype.getStylesPropertyPage=function(){return l.LineToolFibCirclesStylesPropertyPage},e.LineToolFibCircles=o},function(t,e,i){"use strict";function n(t,e){this._constructor="LineToolVertLine";var n=e||new r("linetoolvertline");this._timeAxisView=new a(this,t),o.call(this,t,n),i.e(0).then(function(t){var e=i(885).VertLinePaneView;this._setPaneViews([new e(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var o=i(1).LineDataSource,r=i(3).DefaultProperty,s=i(2).propertyPages,a=i(331).LineToolVertLineTimeAxisView;inherit(n,o),n.prototype.pointsCount=function(){return 1},n.prototype.title=function(){return"Vertical Line"},n.prototype.name=function(){return"Vertical Line"},n.prototype.timeAxisViews=function(){return this.isSourceHidden()?null:this.properties().showTime.value()?[this._timeAxisView]:null},n.prototype.updateAllViews=function(){o.prototype.updateAllViews.call(this),this._timeAxisView.update()},n.prototype.canHasAlert=function(){return!0},n.prototype._getAlertPlots=function(){var t=this._points[0],e={index:t.index,price:t.price+1};return[this._linePointsToAlertPlot([t,e],null,!0,!0)]},n.prototype.getInputsPropertyPage=function(){return s.LineToolVertLineInputsPropertyPage},n.prototype.getStylesPropertyPage=function(){return s.LineToolVertLineStylesPropertyPage},e.LineToolVertLine=n},function(t,e,i){"use strict";var n,o,r,s,a,l,c;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"LineToolCrossLine",function(){return c}),n=i(0),o=i(3),i.n(o),r=i(207),s=i(331),a=i(1),i.n(a),l=i(2),i.n(l),c=function(t){function e(e,n){var a=t.call(this,e,n||new o.DefaultProperty("linetoolcrossline"))||this;return a._constructor="LineToolCrossLine",a._priceAxisView=new r.LineToolHorzLinePriceAxisView(a),a._timeAxisView=new s.LineToolVertLineTimeAxisView(a,e),i.e(0).then(function(t){var e=i(886).CrossLinePaneView;a._setPaneViews([new e(a,a._model)])}.bind(null,i)).catch(i.oe),a}return n.c(e,t),e.prototype.pointsCount=function(){return 1},e.prototype.title=function(){return"Cross Line"},e.prototype.name=function(){return"Cross Line"},e.prototype.priceAxisViews=function(t,e){return this.isSourceHidden()?null:e===this.priceScale()&&this.properties().showPrice.value()&&this._model.paneForSource(this)===t?[this._priceAxisView]:null},e.prototype.timeAxisViews=function(){return this.isSourceHidden()?null:this.properties().showTime.value()?[this._timeAxisView]:null},e.prototype.updateAllViews=function(){t.prototype.updateAllViews.call(this),this._priceAxisView.update(),this._timeAxisView.update()},e.prototype.canHasAlert=function(){return!1},e.prototype.getInputsPropertyPage=function(){return l.propertyPages.LineToolCrossLineInputsPropertyPage},e.prototype.getStylesPropertyPage=function(){return l.propertyPages.LineToolCrossLineStylesPropertyPage},e.prototype.lineColor=function(){return this.properties().linecolor.value()},e.prototype.lineWidth=function(){return this.properties().linewidth.value()},e.prototype.lineStyle=function(){return this.properties().linestyle.value()},e}(a.LineDataSource),
c.prototype.superclass=a.LineDataSource},function(t,e,i){"use strict";function n(t,e){this._constructor="LineToolBarsPattern";var r=e||new s("linetoolbarspattern");o.call(this,t,r),r.mirrored.listeners().subscribe(this,n.prototype.mirror),r.flipped.listeners().subscribe(this,n.prototype.flip),r.addExclusion("mirrored"),r.addExclusion("flipped"),this._scaleCoeff=1,this.version=n.version,this._pattern=[],this._properties.mode.listeners().subscribe(this,n.prototype.onModeChanged),i.e(0).then(function(t){var e=i(887).BarsPatternPaneView;this._setPaneViews([new e(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var o=i(1).LineDataSource,r=i(30).Action,s=i(3).DefaultProperty,a=i(20).PlotRowSearchMode,l=i(2).propertyPages,c=i(240).LineToolBarsPatternMode;inherit(n,o),n.version=2,n.prototype.onModeChanged=function(){var t=this.patternPriceDiff();t*=this._pressCoeff,this._points[1].price=this._timePoint[1].price=this._points[0].price+t},n.prototype.additionalActions=function(t){var e,i,n=new r({checked:this.properties().mirrored.value(),checkable:!0,text:$.t("Mirrored"),callbackContext:{target:this}}),o=new r({checked:this.properties().flipped.value(),checkable:!0,text:$.t("Flipped"),callbackContext:{target:this}});return n.callbacks().subscribe(null,function(e){var i=e.callbackContext(),n=i.target;t.setProperty(n.properties().mirrored,!n.properties().mirrored.value(),"Bats Pattern Mirroring"),n.updateAllViews(),n._model.updateSource(n)}),o.callbacks().subscribe(null,function(e){var i=e.callbackContext(),n=i.target;t.setProperty(n.properties().flipped,!n.properties().flipped.value(),"Bats Pattern Flipping"),n.updateAllViews(),n._model.updateSource(n)}),e=new r({checkable:!0,text:$.t("Restore Size")}),i=this,e.callbacks().subscribe(null,function(e){var n=i.points()[0],o=i.patternPriceDiff(),r=n.price+o,s=n.index+i._pattern.length-1;t.startChangingLinetool(i,{price:r,index:s},1,{}),t.changeLinePoint({price:r,index:s},{}),t.endChangingLinetool()}),[n,o,e]},n.prototype.pointsCount=function(){return 2},n.prototype.state=function(t){var e=o.prototype.state.call(this,t);return e.pattern=this._pattern,e},n.prototype.restoreData=function(t){t.pattern&&(this._pattern=t.pattern)},n.prototype.title=function(){return"Bars Pattern"},n.prototype.name=function(){return"Bars Pattern"},n.prototype.cloneData=function(t){this._pattern=TradingView.clone(t._pattern)},n.prototype.mirror=function(){var t,e,i,n,o,r=this._pattern,s=r[0][TradingView.HIGH_PLOT],a=Math.min(r[0][TradingView.LOW_PLOT],r[0][TradingView.HIGH_PLOT]),l=Math.max(r[0][TradingView.LOW_PLOT],r[0][TradingView.HIGH_PLOT]);for(t=1;t<r.length;t++)a=Math.min(a,r[t][TradingView.LOW_PLOT]),l=Math.max(l,r[t][TradingView.HIGH_PLOT]);if(a<l)for(e=(a+l)/2,i=function(t){return e-(t-e)},t=0;t<r.length;t++)r[t][TradingView.HIGH_PLOT]=i(r[t][TradingView.HIGH_PLOT]),r[t][TradingView.LOW_PLOT]=i(r[t][TradingView.LOW_PLOT]),r[t][TradingView.OPEN_PLOT]=i(r[t][TradingView.OPEN_PLOT]),r[t][TradingView.CLOSE_PLOT]=i(r[t][TradingView.CLOSE_PLOT]);n=r[0][TradingView.HIGH_PLOT]-s,
o=r[r.length-1][TradingView.LOW_PLOT]-r[0][TradingView.HIGH_PLOT],this._points[0].price+=n,this._points[1].price=this._points[0].price+o,this.updateAllViews()},n.prototype.flip=function(){var t,e,i;for(this._points[0].price=this._points[1].price,t=0;t<this._pattern.length/2;t++)e=this._pattern[t],this._pattern[t]=this._pattern[this._pattern.length-t-1],this._pattern[this._pattern.length-t-1]=e;i=this._pattern[this._pattern.length-1][TradingView.LOW_PLOT]-this._pattern[0][TradingView.HIGH_PLOT],this._points[1].price=this._points[0].price+i,this.updateAllViews()},n.prototype.firstPatternPrice=function(){var t,e,i=parseInt(this.properties().mode.value(),10);return i===c.LineHL2?(this._pattern[0][TradingView.HIGH_PLOT]+this._pattern[0][TradingView.LOW_PLOT])/2:(t={0:TradingView.HIGH_PLOT,1:TradingView.CLOSE_PLOT,2:TradingView.OPEN_PLOT,3:TradingView.OPEN_PLOT,4:TradingView.HIGH_PLOT,5:TradingView.LOW_PLOT},e=t[i],this._pattern[0][e])},n.prototype.lastPatternPrice=function(){var t,e,i=parseInt(this.properties().mode.value(),10);return i===c.LineHL2?(this._pattern[this._pattern.length-1][TradingView.HIGH_PLOT]+this._pattern[this._pattern.length-1][TradingView.LOW_PLOT])/2:(t={0:TradingView.LOW_PLOT,1:TradingView.CLOSE_PLOT,2:TradingView.CLOSE_PLOT,3:TradingView.OPEN_PLOT,4:TradingView.HIGH_PLOT,5:TradingView.LOW_PLOT},e=t[i],this._pattern[this._pattern.length-1][e])},n.prototype.patternPriceDiff=function(){return this.lastPatternPrice()-this.firstPatternPrice()},n.prototype.pressCoeff=function(){var t=this.patternPriceDiff(),e=this.points()[0].price,i=this.points()[1].price,n=i-e,o=n/t;return this._pressCoeff=o,o},n.prototype.addPoint=function(t,e){var i,n,r,s,l,h,u,d,p,_,f,m=this._model.mainSeries(),g=m.nearestIndex(t.index,a.NearestRight);if(this.properties().mode.value()===c.Bars?t.price=m.bars().valueAt(g)[TradingView.HIGH_PLOT]:t.price=m.bars().valueAt(g)[TradingView.CLOSE_PLOT],i=this.priceScale(),n=this.ownerSource().firstValue(),r=.05*i.height(),s=i.priceToCoordinate(t.price,n)-r,t.price=i.coordinateToPrice(s,n),l=o.prototype.addPoint.call(this,t,e,!0)){for(h=Math.min(this.points()[0].index,this.points()[1].index),u=Math.max(this.points()[0].index,this.points()[1].index),g=this._model.mainSeries().nearestIndex(h,a.NearestRight),d=this._model.mainSeries().nearestIndex(u,a.NearestLeft),this.points()[0].index>this.points()[1].index&&(this._points[0].price=this._points[1].price),this._pattern=[],p=g;p<=d;p++)_=this._model.mainSeries().data().valueAt(p),this._pattern.push(TradingView.clone(_));this._pattern.length>0&&(f=this.patternPriceDiff(),this._points[1].price=this._points[0].price+f,this._points[1].index=this._points[0].index+(d-g),this.normalizePoints(),this.createServerPoints())}return l},n.prototype.setPoint=function(t,e,i){1===t&&e.index<=this._points[0].index&&(e.index=this._points[0].index+1),0===t&&e.index>=this._points[1].index&&(e.index=this._points[1].index-1),o.prototype.setPoint.call(this,t,e,i)},n.prototype.migrateVersion=function(t,e,i){if(1===t&&this._pattern.length>0){var n=this.patternPriceDiff()
;2===this._timePoint.length&&(this._timePoint[1].price=this._timePoint[0].price+n),2===this._points.length&&(this._points[1].price=this._points[0].price+n)}},n.prototype.getInputsPropertyPage=function(){return null},n.prototype.getStylesPropertyPage=function(){return l.LineToolBarsPatternStylesPropertyPage},e.LineToolBarsPattern=n},function(t,e,i){"use strict";function n(t,e){this._constructor="LineToolTrendBasedFibTime";var r=e||new this.createPropertiesObject("linetooltrendbasedfibtime");o.call(this,t,r),this.version=n.version,i.e(0).then(function(t){var e=i(888).TrendBasedFibTimePaneView;this._setPaneViews([new e(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var o=i(1).LineDataSource,r=i(18),s=i(2).propertyPages;inherit(n,o),n.version=1,n.prototype.pointsCount=function(){return 3},n.prototype.title=function(){return"Trend-Based Fib Time"},n.prototype.name=function(){return"Trend-Based Fib Time"},n.prototype.migrateVersion=function(t,e,i){},n.prototype.processErase=function(t,e){var i="level"+e,n=this.properties()[i].visible;t.setProperty(n,!1,"Erase level line")},n.prototype.createPropertiesObject=function(t,e,i){return new r(t,e,i,{range:[1,11]})},n.prototype.getStylesPropertyPage=function(){return s.LineToolTrendBasedFibTimeStylesPropertyPage},e.LineToolTrendBasedFibTime=n},function(t,e,i){"use strict";function n(t,e){this._constructor="LineToolFibTimeZone";var r=e||this.createPropertiesObject("linetoolfibtimezone");o.call(this,t,r),this.version=n.version,i.e(0).then(function(t){var e=i(889).FibTimeZonePaneView;this._setPaneViews([new e(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var o=i(1).LineDataSource,r=i(18),s=i(2).propertyPages;inherit(n,o),n.version=2,n.prototype.migrateVersion=function(t,e,i){var n;if(1===t){for(i.properties.level1.color.setValue(i.properties.baselinecolor.value()),n=2;n<=11;n++)i.properties["level"+n].color.setValue(i.properties.linecolor.value());for(n=1;n<=11;n++)i.properties["level"+n].linewidth.setValue(i.properties.linewidth.value()),i.properties["level"+n].linestyle.setValue(i.properties.linestyle.value())}},n.prototype.pointsCount=function(){return 2},n.prototype.title=function(){return"Fib Time Zone"},n.prototype.name=function(){return"Fib Time Zone"},n.prototype.processErase=function(t,e){var i="level"+e,n=this.properties()[i].visible;t.setProperty(n,!1,"Erase level line")},n.prototype.createPropertiesObject=function(t,e,i){return new r(t,e,i,{range:[1,11]})},n.prototype.getStylesPropertyPage=function(){return s.LineToolFibTimeZoneStylesPropertyPage},e.LineToolFibTimeZone=n},function(t,e,i){"use strict";function n(t,e){this._constructor="LineToolCircleLines";var n=e||new r("linetoolcirclelines");o.call(this,t,n),i.e(0).then(function(t){var e=i(890).LineToolCircleLinesPaneView;this._setPaneViews([new e(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var o=i(1).LineDataSource,r=i(3).DefaultProperty,s=i(2).propertyPages;inherit(n,o),n.prototype.pointsCount=function(){return 2},n.prototype.title=function(){return"Cyclic Lines"},
n.prototype.name=function(){return"Cyclic Lines"},n.prototype.getStylesPropertyPage=function(){return s.LineToolCircleLinesStylesPropertyPage},e.LineToolCircleLines=n},function(t,e,i){"use strict";function n(t,e){this._constructor="LineToolDateRange";var n=e||new r("linetooldaterange");o.call(this,t,n),i.e(0).then(function(t){var e=i(891).DateRangePaneView;this._setPaneViews([new e(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var o=i(1).LineDataSource,r=i(3).DefaultProperty,s=i(2).propertyPages;inherit(n,o),n.prototype.pointsCount=function(){return 2},n.prototype.title=function(){return"Date Range"},n.prototype.name=function(){return"Date Range"},n.prototype.getStylesPropertyPage=function(){return s.LineToolDateRangeStylesPropertyPage},e.LineToolDateRange=n},function(t,e,i){"use strict";function n(t,e){this._constructor="LineToolPriceRange";var n=e||new r("linetoolpricerange");o.call(this,t,n),i.e(0).then(function(t){var e=i(892).PriceRangePaneView;this._setPaneViews([new e(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var o=i(1).LineDataSource,r=i(3).DefaultProperty,s=i(2).propertyPages;inherit(n,o),n.prototype.pointsCount=function(){return 2},n.prototype.title=function(){return"Price Range"},n.prototype.name=function(){return"Price Range"},n.prototype.getStylesPropertyPage=function(){return s.LineToolDateRangeStylesPropertyPage},e.LineToolPriceRange=n},function(t,e,i){"use strict";function n(t,e){this._constructor="LineToolDateAndPriceRange";var n=e||new r("linetooldateandpricerange");o.call(this,t,n),i.e(0).then(function(t){var e=i(893).DateAndPriceRangePaneView;this._setPaneViews([new e(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var o=i(1).LineDataSource,r=i(3).DefaultProperty,s=i(2).propertyPages;inherit(n,o),n.prototype.pointsCount=function(){return 2},n.prototype.title=function(){return"Date and Price Range"},n.prototype.name=function(){return"Date and Price Range"},n.prototype.getStylesPropertyPage=function(){return s.LineToolDateAndPriceRangeStylesPropertyPage},e.LineToolDateAndPriceRange=n},function(t,e,i){"use strict";function n(t,e){this._constructor="LineToolParallelChannel";var n=e||new r("linetoolparallelchannel");o.call(this,t,n),i.e(0).then(function(t){var e=i(894).ParallelChannelPaneView;this._setPaneViews([new e(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var o=i(1).LineDataSource,r=i(3).DefaultProperty,s=i(2).propertyPages;inherit(n,o),n.prototype.addPoint=function(t){var e,i=o.prototype.addPoint.call(this,t);return i&&(e=this.points()[0],this._points[2].index=e.index,this._points[2].price=e.price+this._priceOffset),i},n.prototype.calculatePriceDiff=function(){var t,e,i,n,o,r,s,a,l,c,h,u,d,p,_,f,m,g,y,v;if(3===this.points().length){if(t=this.points()[0],e=this.points()[1],i=this.points()[2],t.index===e.index)return;if(null===(n=this.priceScale()))return;if(n.isLog()){if(o=this._model.timeScale(),o.isEmpty())return;r=this.ownerSource().firstValue(),s=o.indexToCoordinate(t.index),a=o.indexToCoordinate(e.index),l=n.priceToCoordinate(t.price,r),
c=n.priceToCoordinate(e.price,r),h=o.indexToCoordinate(i.index),u=(c-l)/(a-s),d=l+u*(h-s),p=n.priceToCoordinate(i.price,r),_=p-d,r=this.ownerSource().firstValue(),f=.5*(l+c),m=n.coordinateToPrice(f,r),g=f+_,y=n.coordinateToPrice(g,r),this._priceOffset=y-m}else u=(e.price-t.price)/(e.index-t.index),v=t.price+u*(i.index-t.index),this._priceOffset=i.price-v}},n.prototype.setLastPoint=function(t,e){e&&e.shift&&2===this.points().length&&this._snapPoint45Degree(t,this.points()[0]),o.prototype.setLastPoint.call(this,t),this.calculatePriceDiff()},n.prototype.restorePoints=function(t,e,i){o.prototype.restorePoints.call(this,t,e,i),t&&t.length>=3&&(this._priceOffset=t[2].price-t[0].price)},n.prototype.setPoint=function(t,e,i){i&&i.shift&&t<2&&this._snapPoint45Degree(e,this.points()[1-t]),o.prototype.setPoint.call(this,t,e,i),2===t&&this.calculatePriceDiff();var n=this.points()[0];this._points[2].index=n.index,this._points[2].price=n.price+this._priceOffset},n.prototype.pointsCount=function(){return 3},n.prototype.title=function(){return"Parallel Channel"},n.prototype.name=function(){return"Parallel Channel"},n.prototype.addPoint=function(t,e){return e&&e.shift&&2===this.points().length&&this._snapPoint45Degree(t,this.points()[0]),o.prototype.addPoint.call(this,t,e)},n.prototype.fixAfterRestorePriceAxis=function(){this.priceScale().isLog()||delete this._priceOffset},n.prototype.cloneData=function(t){this._priceOffset=t._priceOffset},n.prototype.restoreData=function(t){t.priceOffset&&(this._priceOffset=t.priceOffset)},n.prototype.state=function(t){var e=o.prototype.state.call(this,t);return e.priceOffset=this._priceOffset,e},n.prototype.canHasAlert=function(){return!0},n.prototype._getAlertPlots=function(){function t(t,e){return t.index<=e.index?[t,e]:[e,t]}var e,i,n,o,r,s,a,l,c=[].concat(this._points).splice(0,2);return c=c.concat([{price:c[0].price+this._priceOffset,time:c[0].time,index:c[0].index},{price:c[1].price+this._priceOffset,time:c[1].time,index:c[1].index}]),e=t(c[0],c[1]),i=t(c[2],c[3]),this._priceOffset<0?(o=i,n=e):(o=e,n=i),a=this.properties().extendLeft.value(),l=this.properties().extendRight.value(),c[0].index<=c[1].index?(r=a,s=l):(r=l,s=a),[this._linePointsToAlertPlot(n,"Upper",r,s),this._linePointsToAlertPlot(o,"Lower",r,s)]},n.prototype.getInputsPropertyPage=function(){return null},n.prototype.getStylesPropertyPage=function(){return s.LineToolParallelChannelStylesPropertyPage},e.LineToolParallelChannel=n},function(t,e,i){"use strict";(function(t){function n(t,e){this._constructor="LineToolTrendAngleLine";var o=e||new s("linetooltrendangle");r.call(this,t,o),this._properties.addProperty("angle"),this._properties.angle=new n.AngleProperty(this),i.e(0).then(function(t){var e=i(895).TrendAnglePaneView;this._setPaneViews([new e(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var o=i(7).Point,r=i(1).LineDataSource,s=i(3).DefaultProperty,a=i(2).propertyPages;inherit(n,r),n.AngleProperty=function(e){t.call(this),this._lineSource=e},inherit(n.AngleProperty,t),n.AngleProperty.prototype.value=function(){
var t=this._lineSource._angle,e=180*t/Math.PI;return Math.round(e)},n.AngleProperty.prototype.setValue=function(t){var e,i,n,r,s,a,l=t*Math.PI/180;this._lineSource._angle=l,e=this._lineSource.pointToScreenPoint(this._lineSource.points()[0])[0],i=Math.cos(this._lineSource._angle),n=-Math.sin(this._lineSource._angle),r=new o(i,n),s=e.addScaled(r,this._lineSource._distance),a=this._lineSource.screenPointToPoint(s),this._lineSource._points[1]=a,this._lineSource._model.updateSource(this._lineSource),this._lineSource.updateAllViews(),this._lineSource._model.updateSource(this._lineSource)},n.prototype.pointsCount=function(){return 2},n.prototype.title=function(){return"Trend Angle"},n.prototype.name=function(){return"Trend Angle"},n.prototype._calculateAngle=function(){var t,e=this.pointToScreenPoint(this.points()[0])[0],i=this.pointToScreenPoint(this.points()[1])[0],n=i.subtract(e);n.length()>0?(n=n.normalized(),this._angle=Math.acos(n.x),n.y>0&&(this._angle=-this._angle),this._distance=i.subtract(e).length()):delete this._angle,t=this.properties(),t.hasOwnProperty("angle")&&this.properties().angle.listeners().fire(this.properties().angle)},n.prototype.addPoint=function(t,e){var i=r.prototype.addPoint.call(this,t,e);return i&&this._calculateAngle(),i},n.prototype.setLastPoint=function(t,e){r.prototype.setLastPoint.call(this,t,e),this.points().length>1&&this._calculateAngle()},n.prototype.axisPoints=function(){var t,e,i,n,r,s;return this.points().length<2?[]:(t=[this.points()[0]],e=this.pointToScreenPoint(this.points()[0])[1],i=Math.cos(this._angle)*this._distance,n=-Math.sin(this._angle)*this._distance,r=e.add(new o(i,n)),s=this.screenPointToPoint(r),t.push(s),t)},n.prototype.setPoint=function(t,e,i){r.prototype.setPoint.call(this,t,e,i),this.points().length>1&&1===t&&this._calculateAngle()},n.prototype.restoreData=function(t){this._angle=t.angle,this._distance=t.distance},n.prototype.state=function(t){var e=r.prototype.state.call(this,t);return e.angle=this._angle,e.distance=this._distance,e},n.prototype.cloneData=function(t){this._angle=t._angle,this._distance=t._distance},n.prototype.canHasAlert=function(){return!0},n.prototype._getAlertPlots=function(){return[this._linePointsToAlertPlot(this._points,null,this.properties().extendLeft.value(),this.properties().extendRight.value())]},n.prototype.getInputsPropertyPage=function(){return a.LineToolTrendAngleInputsPropertyPage},n.prototype.getStylesPropertyPage=function(){return a.LineToolTrendAngleStylesPropertyPage},e.LineToolTrendAngle=n}).call(e,i(16))},function(t,e,i){"use strict";var n,o,r,s,a;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"LineToolInfoLine",function(){return a}),n=i(0),o=i(3),i.n(o),r=i(113),i.n(r),s=i(2),i.n(s),a=function(t){function e(e,i){var n=t.call(this,e,i||new o.DefaultProperty("linetoolinfoline"))||this;return n._constructor="LineToolInfoLine",n}return n.c(e,t),e.prototype.pointsCount=function(){return 2},e.prototype.title=function(){return"Info Line"},e.prototype.name=function(){return"Info Line"},
e.prototype.getStylesPropertyPage=function(){return s.propertyPages.LineToolInfoLineStylesPropertyPage},e}(r.LineToolTrendLine),a.prototype.superclass=r.LineToolTrendLine},function(t,e,i){"use strict";function n(t,e){this._constructor="LineToolPitchfan";var n=e||this.createPropertiesObject("linetoolpitchfan");o.call(this,t,n),i.e(0).then(function(t){var e=i(898).PitchfanLinePaneView;this._setPaneViews([new e(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var o=i(1).LineDataSource,r=i(18),s=i(2).propertyPages;inherit(n,o),n.prototype.pointsCount=function(){return 3},n.prototype.title=function(){return"Pitchfan"},n.prototype.name=function(){return"Pitchfan"},n.prototype.processErase=function(t,e){var i="level"+e,n=this.properties()[i].visible;t.setProperty(n,!1,"Erase level line")},n.prototype.createPropertiesObject=function(t,e,i){return new r(t,e,i,{range:[0,8]})},n.prototype.getStylesPropertyPage=function(){return s.LineToolPitchfanStylesPropertyPage},e.LineToolPitchfan=n},function(t,e,i){"use strict";function n(t,e){this._constructor="LineToolGannSquare";var n=e||this.createPropertiesObject("linetoolgannsquare");s.call(this,t,n),i.e(0).then(function(t){var e=i(899).GannSquarePaneView;this._setPaneViews([new e(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var o,r,s=i(1).LineDataSource,a=i(18),l=i(2).propertyPages;inherit(n,s),n.prototype.pointsCount=function(){return 2},n.prototype.title=function(){return"Gann Box"},n.prototype.name=function(){return"Gann Box"},o=[4.5,9,11.25,18,22.5,36,45],r=function(){for(var t=[],e=1e10,i=o.length-1,n=1,r=0,s=0;s<e;)s=o[r]*n,t.push(Math.round(s)),t.push(Math.ceil(-s)),r===i-1&&(n*=10),r=(r+1)%i;return t.sort(function(t,e){return t<e?-1:t>e?1:0}),t}(),n.prototype._alignPriceOnPattern=function(t,e){var i,n,r,s,a,l,c=Math.round(1e6*(t.price-e.price))/1e6;if(0===c)return e.price;for(i=o[0],n=o[o.length-1],r=1,s=Math.abs(c);s<i*r||n*r<s;)s<i*r?r*=.1:n*r<s&&(r*=10);for(a=n*r,l=o.length-2;l>=0&&!(o[l]*r<s);--l)a=o[l]*r;return t.price=e.price+(c>=0?a:-a),t},n.prototype._alignTimeOnPattern=function(t,e){var i,n=t.index-e.index;if(0===n)return 0;for(i=r.length-2;i>=0&&!(r[i]<n);--i);return i+=n>0?1:0,t.index=e.index+r[i],t},n.prototype._alignPointsFixedIncrement=function(t,e){return this._alignTimeOnPattern(t,e),this._alignPriceOnPattern(t,e),t},n.prototype._preparePoint=function(t,e){return e&&e.shift&&0!==this._points.length&&this._alignPointsFixedIncrement(t,this._points[0]),s.prototype._preparePoint.call(this,t,e)},n.prototype.setPoint=function(t,e,i){if(i&&i.shift){var n=0===t?this._points[1]:this._points[0];this._alignPointsFixedIncrement(e,n)}s.prototype.setPoint.call(this,t,e,i)},n.prototype.createPropertiesObject=function(t,e,i){return new a(t,e,i,{range:[1,7],prefixes:["h","v"],names:["coeff","color","visible"]})},n.prototype.getStylesPropertyPage=function(){return l.LineToolGannSquareStylesPropertyPage},e.LineToolGannSquare=n},function(t,e,i){"use strict";function n(t,e){this._constructor="LineToolFibSpeedResistanceFan"
;var n=e||this.createPropertiesObject("linetoolfibspeedresistancefan");o.call(this,t,n),i.e(0).then(function(t){var e=i(900).FibSpeedResistanceFanPaneView;this._setPaneViews([new e(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var o=i(1).LineDataSource,r=i(18),s=i(2).propertyPages;inherit(n,o),n.prototype.pointsCount=function(){return 2},n.prototype.title=function(){return"Fib Speed Resistance Fan"},n.prototype.name=function(){return"Fib Speed Resistance Fan"},n.prototype.processErase=function(t,e){var i="h"===e.type?"hlevel"+e.index:"vlevel"+e.index,n=this.properties()[i].visible;t.setProperty(n,!1,"Erase level line")},n.prototype.createPropertiesObject=function(t,e,i){return new r(t,e,i,{range:[1,7],prefixes:["h","v"],names:["coeff","color","visible"]})},n.prototype.getStylesPropertyPage=function(){return s.LineToolFibSpeedResistanceFanStylesPropertyPage},e.LineToolFibSpeedResistanceFan=n},function(t,e,i){"use strict";var n,o,r,s,a,l,c,h,u;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"LineToolGannComplex",function(){return u}),n=i(0),o=i(7),i.n(o),r=i(6),i.n(r),s=i(230),a=i(1),i.n(a),l=i(140),c=i(2),i.n(c),h=i(333),u=function(t){function e(e,n){var o,r=t.call(this,e,null==n?Object(h.a)("linetoolganncomplex"):n)||this;return r.version=2,r._constructor="LineToolGannComplex",r._scaleRatioFormatter=new s.LimitedPrecisionNumericFormatter(7),i.e(0).then(function(t){var e=i(901).GannComplexPaneView;r._setPaneViews([new e(r,r.model())])}.bind(null,i)).catch(i.oe),o=r.properties(),r._adjustScaleRatio(o),o.subscribe(r,r._adjustScaleRatio),o.scaleRatio.subscribe(r,r._correctFirstPoint),r._syncStateExclusions=["scaleRatio"],o.addExclusion("scaleRatio"),r._onRestoringFactoryDefaults.subscribe(r,r._handleRestoringFactoryDefaults),r._onTemplateApplying.subscribe(r,r._handleTemplateApplying),r._onTemplateApplied.subscribe(r,r._correctFirstPoint),r}return n.c(e,t),e.prototype.migrateVersion=function(t,e,i){var n=this;1===t&&(this._points.length>=this.pointsCount()?setTimeout(function(){return n._migratePoint()}):this._timePoint.length>=this.pointsCount()&&this._pointAdded.subscribe(this,this._migratePoint))},e.prototype.destroy=function(){var t=this.properties();t.unsubscribe(this,this._adjustScaleRatio),t.scaleRatio.unsubscribe(this,this._correctFirstPoint),this._onRestoringFactoryDefaults.unsubscribe(this,this._handleRestoringFactoryDefaults),this._onTemplateApplying.unsubscribe(this,this._handleTemplateApplying),this._onTemplateApplied.unsubscribe(this,this._correctFirstPoint)},e.prototype.pointsCount=function(){return 2},e.prototype.title=function(){return"Gann Square"},e.prototype.name=function(){return"Gann Square"},e.prototype.addPoint=function(e,i,n){var o,s,a;return this._points.length>1&&this._points.pop(),o=t.prototype.addPoint.call(this,e,i,n),s=this.priceScale(),a=Object(r.ensureNotNull)(s).isLog(),!a&&o&&this._correctFirstPoint(),o},e.prototype.setPoint=function(e,i,n){t.prototype.setPoint.call(this,e,i,n),void 0!==n&&n.shift?this._correctPoint(e):this._correctScaleRatio()},
e.prototype.setLastPoint=function(e,i){var n=this.priceScale();Object(r.ensureNotNull)(n).isLog()||(this._points[1]=e,this._correctPoint(1)),t.prototype.setLastPoint.call(this,e,i)},e.prototype.createPropertiesObject=function(t,e,i){return Object(h.a)(t,e,i)},e.prototype.getStylesPropertyPage=function(){return c.propertyPages.LineToolGannComplexStylesPropertyPage},e.prototype.isReversed=function(){return this.properties().reverse.value()},e.prototype.levelsCount=function(){return this.properties().levels.childCount()},e.prototype.levels=function(){var t,e,i=[],n=this.properties(),o=n.levels.childCount();for(t=0;t<o;t++)e=n.levels[t],i.push({index:t,visible:e.visible.value(),color:e.color.value(),width:e.width.value()});return i},e.prototype.fanLinesCount=function(){return this.properties().fanlines.childCount()},e.prototype.fanLines=function(){var t,e,i=[],n=this.properties(),o=n.fanlines.childCount();for(t=0;t<o;t++)e=n.fanlines[t],i.push({index:t,visible:e.visible.value(),x:e.x.value(),y:e.y.value(),color:e.color.value(),width:e.width.value()});return i},e.prototype.arcsCount=function(){return this.properties().arcs.childCount()},e.prototype.arcs=function(){var t,e,i=[],n=this.properties(),o=n.arcs.childCount();for(t=0;t<o;t++)e=n.arcs[t],i.push({index:t,visible:e.visible.value(),x:e.x.value(),y:e.y.value(),color:e.color.value(),width:e.width.value()});return i},e.prototype.arcsBackgroundTransparency=function(){return this.properties().arcsBackground.transparency.value()},e.prototype.isArcsBackgroundFilled=function(){return this.properties().arcsBackground.fillBackground.value()},e.prototype.isLabelsVisible=function(){return this.properties().showLabels.value()},e.prototype.getLabelsStyle=function(){var t=this.properties(),e=t.labelsStyle,i=e.font,n=e.fontSize,o=e.bold,r=e.italic,s=t.levels.childCount();return{textColor:t.levels[s-1].color.value(),font:i.value(),fontSize:n.value(),bold:o.value(),italic:r.value()}},e.prototype.getScaleRatioStep=function(){return 1e-7},e.prototype.getScaleRatioFormatter=function(){return this._scaleRatioFormatter},e.prototype.getPriceDiff=function(){var t,e,i=this.points();return i.length<2?null:(t=i[0],e=i[1],e.price-t.price)},e.prototype.getIndexDiff=function(){var t,e,i=this.points();return i.length<2?null:(t=i[0],e=i[1],e.index-t.index)},e.prototype.getScaleRatio=function(){var t=this.getPriceDiff(),e=this.getIndexDiff();return null!==t&&null!==e&&0!==e?Math.abs(t/e):null},e.prototype._correctScaleRatio=function(){var t=this.properties(),e=this.getScaleRatio();t.scaleRatio.setValue(e)},e.prototype._getAdjustedScaleRatio=function(){var t=this.model().mainSeries().priceScale(),e=this.model().timeScale();return Object(l.scaleRatio)(e,t)},e.prototype._adjustScaleRatio=function(t){var e=t.scaleRatio.value();""!==e&&null!==e||t.scaleRatio.setValue(this._getAdjustedScaleRatio())},e.prototype._correctPoint=function(t){var e,i,n,o,r,s,a,l;this._points.length<2||null!==(e=this.getIndexDiff())&&(i=this.properties(),n=i.scaleRatio.value(),null!==n&&(o=this._points[t],
r=0===t?this._points[1]:this._points[0],s=o.price-r.price>0,a=o.index-r.index>0,l=s&&!a||!s&&a?-1:1,0===t&&(l=-l),o.price=r.price+l*e*n,this._pointChanged.fire(t)),this.normalizePoints())},e.prototype._correctFirstPoint=function(){this._correctPoint(this.isReversed()?0:1)},e.prototype._handleRestoringFactoryDefaults=function(){this.properties().scaleRatio.setValue(this._getAdjustedScaleRatio())},e.prototype._handleTemplateApplying=function(t){""===t.scaleRatio&&(t.scaleRatio=this._getAdjustedScaleRatio())},e.prototype._migratePoint=function(){var t,e;this.points().length<this.pointsCount()||null!==(t=this._getScreenPoints())&&(e=this.screenPointToPoint(t[1]),this.setPoint(1,e),this._pointAdded.unsubscribe(this,this._migratePoint))},e.prototype._getScreenPoints=function(){var t,e,i,n,r,s,a,l,c,h,u,d=this._calcAngle();return null===d?null:(e=this.points(),i=e[0],n=e[1],this.isReversed()&&(t=[n,i],i=t[0],n=t[1]),r=this.pointToScreenPoint(i)[0],s=this.pointToScreenPoint(n)[0],a=Math.sqrt(Math.pow(r.x-s.x,2)+Math.pow(r.y-s.y,2)),l=new o.Point(Math.cos(d),-Math.sin(d)),c=l.normalized(),h=c.x<0?-1:1,u=c.y<0?-1:1,[r.addScaled(l,a),r.add(new o.Point(5*a*h,5*a*u))])},e.prototype._calcAngle=function(){var t,e=this.points(),i=e[0],n=e[1],o=this.pointToScreenPoint(i)[0],r=this.pointToScreenPoint(n)[0],s=r.subtract(o);return s.length()>0?(s=s.normalized(),t=Math.acos(s.x),s.y>0&&(t=-t),t):null},e}(a.LineDataSource),u.prototype.superclass=a.LineDataSource},function(t,e,i){"use strict";var n,o,r,s,a,l;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"LineToolGannFixed",function(){return l}),n=i(0),o=i(7),i.n(o),r=i(1),i.n(r),s=i(333),a=i(2),i.n(a),l=function(t){function e(e,n){var o=t.call(this,e,null==n?Object(s.a)("linetoolgannfixed"):n)||this;return o._constructor="LineToolGannFixed",i.e(0).then(function(t){var e=i(902).GannFixedPaneView;o._setPaneViews([new e(o,o.model())])}.bind(null,i)).catch(i.oe),o.properties().reverse.subscribe(o,o._reversePoints),o}return n.c(e,t),e.prototype.pointsCount=function(){return 2},e.prototype.title=function(){return"Gann Square Fixed"},e.prototype.name=function(){return"Gann Square Fixed"},e.prototype.createPropertiesObject=function(t,e,i){return Object(s.a)(t,e,i)},e.prototype.getStylesPropertyPage=function(){return a.propertyPages.LineToolGannFixedStylesPropertyPage},e.prototype.axisPoints=function(){var t=this.points(),e=this.getScreenPoints();return t.length<2||e.length<2?[]:[t[0],this.screenPointToPoint(e[1])]},e.prototype.getScreenPoints=function(){var t,e,i,n,r,s,a,l,c,h,u=this.points();return u.length<2?[]:null===(t=this._calcAngle())?[]:(e=u[0],i=u[1],n=this.pointToScreenPoint(e)[0],r=this.pointToScreenPoint(i)[0],s=Math.sqrt(Math.pow(n.x-r.x,2)+Math.pow(n.y-r.y,2)),a=new o.Point(Math.cos(t),-Math.sin(t)),l=a.normalized(),c=l.x<0?-1:1,h=l.y<0?-1:1,[n.addScaled(a,s),n.add(new o.Point(5*s*c,5*s*h))])},e.prototype.levelsCount=function(){return this.properties().levels.childCount()},e.prototype.levels=function(){var t,e,i=[],n=this.properties(),o=n.levels.childCount()
;for(t=0;t<o;t++)e=n.levels[t],i.push({index:t,visible:e.visible.value(),color:e.color.value(),width:e.width.value()});return i},e.prototype.fanLinesCount=function(){return this.properties().fanlines.childCount()},e.prototype.fanLines=function(){var t,e,i=[],n=this.properties(),o=n.fanlines.childCount();for(t=0;t<o;t++)e=n.fanlines[t],i.push({index:t,visible:e.visible.value(),x:e.x.value(),y:e.y.value(),color:e.color.value(),width:e.width.value()});return i},e.prototype.arcsCount=function(){return this.properties().arcs.childCount()},e.prototype.arcs=function(){var t,e,i=[],n=this.properties(),o=n.arcs.childCount();for(t=0;t<o;t++)e=n.arcs[t],i.push({index:t,visible:e.visible.value(),x:e.x.value(),y:e.y.value(),color:e.color.value(),width:e.width.value()});return i},e.prototype.arcsBackgroundTransparency=function(){return this.properties().arcsBackground.transparency.value()},e.prototype.isArcsBackgroundFilled=function(){return this.properties().arcsBackground.fillBackground.value()},e.prototype._calcAngle=function(){var t,e,i,n,o,r,s=this.points();return s.length<2?null:(t=s[0],e=s[1],i=this.pointToScreenPoint(t)[0],n=this.pointToScreenPoint(e)[0],o=n.subtract(i),o.length()<=0?null:(o=o.normalized(),r=Math.acos(o.x),o.y>0&&(r=-r),r))},e.prototype._reversePoints=function(){var t=this._points,e=t[0],i=t[1];this._points[0]=i,this._points[1]=e,this.normalizePoints(),this.restart()},e}(r.LineDataSource),l.prototype.superclass=r.LineDataSource},function(t,e,i){"use strict";function n(t,e){this._constructor="LineToolGannFan";var n=e||this.createPropertiesObject("linetoolgannfan");o.call(this,t,n),i.e(0).then(function(t){var e=i(903).GannFanPaneView;this._setPaneViews([new e(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var o=i(1).LineDataSource,r=i(18),s=i(2).propertyPages;inherit(n,o),n.prototype.pointsCount=function(){return 2},n.prototype.title=function(){return"Gann Fan"},n.prototype.name=function(){return"Gann Fan"},n.prototype.processErase=function(t,e){var i="level"+e,n=this.properties()[i].visible;t.setProperty(n,!1,"Erase level line")},n.prototype.createPropertiesObject=function(t,e,i){return new r(t,e,i,{range:[1,9]})},n.prototype.getStylesPropertyPage=function(){return s.LineToolGannFanStylesPropertyPage},e.LineToolGannFan=n},function(t,e,i){"use strict";function n(t,e){this._constructor="LineToolDisjointAngle";var s=e||new r("linetooldisjointangle");o.call(this,t,s),this.version=n.version,i.e(0).then(function(t){var e=i(905).DisjointAnglePaneView;this._setPaneViews([new e(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var o=i(1).LineDataSource,r=i(3).DefaultProperty,s=i(2).propertyPages;inherit(n,o),n.version=1,n.prototype.pointsCount=function(){return 3},n.prototype.title=function(){return"Disjoint Angle"},n.prototype.name=function(){return"Disjoint Angle"},n.prototype.addPoint=function(t,e){return e&&e.shift&&2===this.points().length&&this._snapPoint45Degree(t,this.points()[this.points().length-2]),o.prototype.addPoint.call(this,t)},n.prototype.setLastPoint=function(t,e){
return e&&e.shift&&2===this.points().length&&this._snapPoint45Degree(t,this.points()[this.points().length-2]),o.prototype.setLastPoint.call(this,t)},n.prototype.setPoint=function(t,e,i){var n,r,s,a=.5*(this._points[1].price+this._points[2].price);i&&i.shift&&1===t&&(n=0,this._snapPoint45Degree(e,this.points()[n])),t<3&&o.prototype.setPoint.call(this,t,e),0!==t&&2!==t&&(1===t?(r=this._points[1].price-a,this._points[2].price=this._points[1].price-2*r):3===t&&(s=e.price,r=s-this._points[2].price,this._points[0].price=this._points[1].price-r,this._points[0].index=e.index))},n.prototype.canHasAlert=function(){return!0},n.prototype._getAlertPlots=function(){var t,e,i,n,o,r,s,a,l,c=this._points[0],h=this._points[1],u=[];return c.index<=h.index?(u.push(c),u.push(h)):(u.push(h),u.push(c)),t=this._points[2],t.time=h.time,t.index=h.index,e={price:t.price+(h.price-c.price),time:c.time,index:c.index},i=[],t.index<=e.index?(i.push(t),i.push(e)):(i.push(e),i.push(t)),u[0].price>i[0].price?(n=u,o=i):i[0].price>u[0].price?(n=i,o=u):i[1].price>u[1].price?(n=i,o=u):(n=u,o=i),a=this.properties().extendLeft.value(),l=this.properties().extendRight.value(),c.index<=h.index?(r=a,s=l):(r=l,s=a),[this._linePointsToAlertPlot(n,"Upper",r,s),this._linePointsToAlertPlot(o,"Lower",r,s)]},n.prototype.getInputsPropertyPage=function(){return null},n.prototype.getStylesPropertyPage=function(){return s.LineToolDisjointAngleStylesPropertyPage},e.LineToolDisjointAngle=n},function(t,e,i){"use strict";function n(t,e){this._constructor="LineToolFlatBottom";var s=e||new r("linetoolflatbottom");o.call(this,t,s),this.version=n.version,i.e(0).then(function(t){var e=i(906).FlatBottomPaneView;this._setPaneViews([new e(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var o=i(1).LineDataSource,r=i(3).DefaultProperty,s=i(2).propertyPages;inherit(n,o),n.version=1,n.prototype.pointsCount=function(){return 3},n.prototype.title=function(){return"Flat Bottom"},n.prototype.name=function(){return"Flat Bottom"},n.prototype.addPoint=function(t,e){return e&&e.shift&&2===this.points().length&&this._snapPoint45Degree(t,this.points()[this.points().length-2]),o.prototype.addPoint.call(this,t)},n.prototype.setLastPoint=function(t,e){return e&&e.shift&&2===this.points().length&&this._snapPoint45Degree(t,this.points()[this.points().length-2]),o.prototype.setLastPoint.call(this,t)},n.prototype.setPoint=function(t,e,i){if(i&&i.shift&&1===t){this._snapPoint45Degree(e,this.points()[0])}t<3?o.prototype.setPoint.call(this,t,e):this._points[0].index=e.index},n.prototype.canHasAlert=function(){return!0},n.prototype._getAlertPlots=function(){var t,e,i,n,o,r,s,a,l,c=this._points[0],h=this._points[1],u=[];return c.index<=h.index?(u.push(c),u.push(h)):(u.push(h),u.push(c)),t=this._points[2],t.time=h.time,t.index=h.index,e={price:t.price,time:c.time,index:c.index},i=[],t.index<=e.index?(i.push(t),i.push(e)):(i.push(e),i.push(t)),u[0].price>i[0].price?(n=u,o=i):i[0].price>u[0].price?(n=i,o=u):i[1].price>u[1].price?(n=i,o=u):(n=u,o=i),a=this.properties().extendLeft.value(),
l=this.properties().extendRight.value(),c.index<=h.index?(r=a,s=l):(r=l,s=a),[this._linePointsToAlertPlot(n,"Upper",r,s),this._linePointsToAlertPlot(o,"Lower",a,s)]},n.prototype.getInputsPropertyPage=function(){return null},n.prototype.getStylesPropertyPage=function(){return s.LineToolFlatBottomStylesPropertyPage},e.LineToolFlatBottom=n},function(t,e,i){"use strict";function n(t,e){this._constructor="LineToolIcon";var s=e||new r("linetoolicon");s.addExclusion("angle"),s.addExclusion("scale"),o.call(this,t,s),this.version=n.version,i.e(0).then(function(t){var e=i(907).IconPaneView;this._setPaneViews([new e(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var o=i(1).LineDataSource,r=i(3).DefaultProperty,s=i(2).propertyPages;inherit(n,o),n.version=1,n.anchorLimit=80,n.prototype.getAnchorLimit=function(){return n.anchorLimit},n.prototype.pointsCount=function(){return 1},n.prototype.title=function(){return"Icon"},n.prototype.name=function(){return"Icon"},n.prototype.startChanging=function(t,e){var i,r;o.prototype.startChanging.call(this,t,e),i=this.properties(),r=65536*i.icon.value()+i.size.value(),this._startChangeWidth=this._paneViews[0]._cache[r],i.size.value()<n.anchorLimit?this._sizeScale=i.size.value()/n.anchorLimit:this._sizeScale=1,this._origScale=i.scale.value(),this._startChangeWidth*this._origScale<n.anchorLimit?this._resizeRatio=this._startChangeWidth/n.anchorLimit:this._resizeRatio=1},n.prototype.endChanging=function(){o.prototype.endChanging.call(this),delete this._startChangeWidth,delete this._sizeScale,delete this._resizeRatio},n.prototype.setPoint=function(t,e,i){var o,r,s,a,l,c,h,u,d,p=$.extend({},e);i&&i.shift&&this._properties.snapTo45Degrees&&this._snapPoint45Degree(p,this.points()[0]),o=this.pointToScreenPoint(this.points()[0])[1],r=this.pointToScreenPoint(p)[1],0===t||1===t?(s=r.subtract(o).normalized(),a=2*r.subtract(o).length(),a*=this._sizeScale,this._properties.size.setValue(a),l=-s.x,c=Math.acos(l),Math.asin(s.y)>0&&(c=2*Math.PI-c),0===t&&(c+=Math.PI),this._properties.angle.setValue(c)):(h=this._startChangeWidth,u=r.subtract(o).length(),this._origScale*h<n.anchorLimit?(d=n.anchorLimit/2,this._properties.scale.setValue(this._origScale*u/d)):(d=h/2,this._properties.scale.setValue(u/d)))},n.prototype.getInputsPropertyPage=function(){return null},n.prototype.getStylesPropertyPage=function(){return s.LineToolIconStylesPropertyPage},n.prototype.getSourceIcon=function(){return{type:"text",text:String.fromCharCode(this.properties().icon.value())}},e.LineToolIcon=n},function(t,e,i){"use strict";function n(t,e){this._constructor="LineToolRotatedRectangle";var n=e||new a("linetoolrotatedrectangle");s.call(this,t,n),i.e(0).then(function(t){var e=i(908).RotatedRectanglePaneView;this._setPaneViews([new e(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var o=i(7).Point,r=i(37).distanceToLine,s=i(1).LineDataSource,a=i(3).DefaultProperty,l=i(2).propertyPages;inherit(n,s),n.prototype.startChanging=function(t,e){var i,n,o,a;s.prototype.startChanging.call(this,t,e),
0!==t&&1!==t||(i=this._paneViews[0],n=i._points[0],o=i._points[1],a=i._points[2],this._distance=r(n,o,a).distance)},n.prototype.setPoint=function(t,e,i){var n,r,a,l,c,h,u;s.prototype.setPoint.call(this,t,e,i),0!==t&&1!==t||(n=this._paneViews[0],n.update(),r=n._points[0],a=n._points[1],l=a.subtract(r),c=new o(l.y,-l.x).normalized().scaled(this._distance),h=r.add(c),u=this.screenPointToPoint(h),this._points[2]=u)},n.prototype.endChanging=function(){delete this._distance},n.prototype.pointsCount=function(){return 3},n.prototype.title=function(){return"Rotated Rectangle"},n.prototype.name=function(){return"Rotated Rectangle"},n.prototype.getInputsPropertyPage=function(){return null},n.prototype.getStylesPropertyPage=function(){return l.LineToolRectangleStylesPropertyPage},e.LineToolRotatedRectangle=n},function(t,e,i){"use strict";function n(t,e){this._constructor="LineToolFibSpiral";var n=e||new r("linetoolfibspiral");o.call(this,t,n),i.e(0).then(function(t){var e=i(909).FibSpiralPaneView;this._setPaneViews([new e(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var o=i(1).LineDataSource,r=i(3).DefaultProperty,s=i(2).propertyPages;inherit(n,o),n.prototype.pointsCount=function(){return 2},n.prototype.title=function(){return"Fib Spiral"},n.prototype.name=function(){return"Fib Spiral"},n.prototype.getStylesPropertyPage=function(){return s.LineToolFibSpiralStylesPropertyPage},e.LineToolFibSpiral=n},function(t,e,i){"use strict";function n(t,e){this._constructor="LineToolHeadAndShoulders";var n=e||new r("linetoolheadandshoulders");o.call(this,t,n),i.e(0).then(function(t){var e=i(910).LineToolHeadAndShouldersPaneView;this._setPaneViews([new e(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var o=i(1).LineDataSource,r=i(3).DefaultProperty,s=i(2).propertyPages;inherit(n,o),n.prototype.pointsCount=function(){return 7},n.prototype.title=function(){return"Head and Shoulders"},n.prototype.name=function(){return"Head and Shoulders"},n.prototype.getStylesPropertyPage=function(){return s.LineToolLineTool5PointsPatternStylesPropertyPage},e.LineToolHeadAndShoulders=n},function(t,e,i){"use strict";function n(t,e){this._constructor="LineToolTriangle";var n=e||new r("linetooltriangle");o.call(this,t,n),i.e(0).then(function(t){var e=i(911).TrianglePaneView;this._setPaneViews([new e(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var o=i(1).LineDataSource,r=i(3).DefaultProperty,s=i(2).propertyPages;inherit(n,o),n.prototype.pointsCount=function(){return 3},n.prototype.title=function(){return"Triangle"},n.prototype.name=function(){return"Triangle"},n.prototype.getStylesPropertyPage=function(){return s.LineToolTriangleStylesPropertyPage},e.LineToolTriangle=n},function(t,e,i){"use strict";function n(t,e){this._constructor="LineToolTrianglePattern";var n=e||new r("linetooltrianglepattern");o.call(this,t,n),i.e(0).then(function(t){var e=i(912).LineToolTrianglePatternPaneView;this._setPaneViews([new e(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}
var o=i(1).LineDataSource,r=i(3).DefaultProperty,s=i(2).propertyPages;inherit(n,o),n.prototype.pointsCount=function(){return 4},n.prototype.title=function(){return"Triangle Pattern"},n.prototype.name=function(){return"Triangle Pattern"},n.prototype.getStylesPropertyPage=function(){return s.LineToolTrianglePatternStylesPropertyPage},e.LineToolTrianglePattern=n},function(t,e,i){"use strict";function n(t,e){this._constructor="LineToolThreeDrivers";var n=e||new r("linetoolthreedrivers");o.call(this,t,n),i.e(0).then(function(t){var e=i(913).LineToolThreeDrivesPaneView;this._setPaneViews([new e(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var o=i(1).LineDataSource,r=i(3).DefaultProperty,s=i(2).propertyPages;inherit(n,o),n.prototype.pointsCount=function(){return 7},n.prototype.title=function(){return"Three Drives Pattern"},n.prototype.name=function(){return"Three Drives Pattern"},n.prototype.getStylesPropertyPage=function(){return s.LineToolABCDPatternStylesPropertyPage},e.LineToolThreeDrivers=n},function(t,e,i){"use strict";function n(t,e){this._constructor="LineToolABCD";var n=e||new r("linetoolabcd");o.call(this,t,n),i.e(0).then(function(t){var e=i(914).ABCDPaneView;this._setPaneViews([new e(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var o=i(1).LineDataSource,r=i(3).DefaultProperty,s=i(245).DateTimeFormatter,a=i(2).propertyPages;inherit(n,o),n.prototype.pointsCount=function(){return 4},n.prototype.title=function(){return"ABCD Pattern"},n.prototype.name=function(){return"ABCD Pattern"},n.prototype._tooltipFieldsHash={time0:{title:"Date 1",value:null},price0:{title:"Price 1",value:null},time1:{title:"Date 2",value:null},price1:{title:"Price 2",value:null},time2:{title:"Date 3",value:null},price2:{title:"Price 3",value:null},time3:{title:"Date 4",value:null},price3:{title:"Price 4",value:null}},n.prototype._updateTooltip=function(){var t,e,i,n,o=this._tooltipFieldsHash,r=this.points().m_values;r[0]&&(t=this._model.timeScale().indexToUserTime(r[0].index),o.time0.value=t?new s(this._model.mainSeries().isDWM()).format(t):0,o.price0.value=this._model.mainSeries()._formatter.format(r[0].price)),r[1]&&(e=this._model.timeScale().indexToUserTime(r[1].index),o.time1.value=e?new s(this._model.mainSeries().isDWM()).format(e):0,o.price1.value=this._model.mainSeries()._formatter.format(r[1].price)),r[2]&&(i=this._model.timeScale().indexToUserTime(r[2].index),o.time2.value=i?new s(this._model.mainSeries().isDWM()).format(i):0,o.price2.value=this._model.mainSeries()._formatter.format(r[2].price)),r[3]&&(n=this._model.timeScale().indexToUserTime(r[3].index),o.time3.value=n?new s(this._model.mainSeries().isDWM()).format(n):0,o.price3.value=this._model.mainSeries()._formatter.format(r[3].price))},n.prototype.tooltip=function(){return this._updateTooltip(),this._formatTooltip()},n.prototype.getStylesPropertyPage=function(){return a.LineToolABCDPatternStylesPropertyPage},e.LineToolABCD=n},function(t,e,i){"use strict";var n,o,r;Object.defineProperty(e,"__esModule",{value:!0}),
i.d(e,"LineToolRiskRewardPriceAxisView",function(){return r}),n=i(0),o=i(54),r=function(t){function e(e,i){var n=t.call(this)||this;return n._source=e,n._data=i,n}return n.c(e,t),e.prototype._updateRendererData=function(t){var e,i,n,o,r;t.visible=!1,e=this._source.priceScale(),0===this._source.points().length||null===e||e.isEmpty()||(i=this._source.ownerSource(),null!=(n=null!==i?i.firstValue():null)&&(o=this._data.priceProperty.value(),r=this._data.colorProperty.value(),t.background=r,t.color=this.generateTextColor(r),t.coordinate=e.priceToCoordinate(o,n),t.text=e.formatPrice(o,n),t.visible=!0))},e}(o.a)},function(t,e,i){"use strict";function n(t,e){this._constructor="LineToolPolyline";var n;e?n=e:(n=new s("linetoolpolyline"),n.filled.setValue(!1)),r.call(this,t,n),n.addExclusion("filled"),i.e(0).then(function(t){var e=i(916).PolylinePaneView;this._setPaneViews([new e(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var o=i(7).Point,r=i(1).LineDataSource,s=i(3).DefaultProperty,a=i(2).propertyPages;inherit(n,r),n.prototype.pointsCount=function(){return-1},n.prototype.title=function(){return"Polyline"},n.prototype.name=function(){return"Polyline"},n.prototype.addPoint=function(t){var e,i,n,s,a,l,c,h,u=this._model.timeScale().indexToCoordinate(t.index),d=t.price,p=this.ownerSource().firstValue(),_=this.priceScale().priceToCoordinate(d,p),f=5;if(this._points.length>0){if(e=this._points[this._points.length-1],i=this._model.timeScale().indexToCoordinate(e.index),n=e.price,s=this.priceScale().priceToCoordinate(n,p),new o(u,_).subtract(new o(i,s)).length()<f)return this._lastPoint=null,this.normalizePoints(),this.createServerPoints(),!0;if(a=this._points[0],l=this._model.timeScale().indexToCoordinate(a.index),c=a.price,h=this.priceScale().priceToCoordinate(c,p),new o(u,_).subtract(new o(l,h)).length()<f)return this._properties.filled.setValue(!0),this._lastPoint=null,this.normalizePoints(),this.createServerPoints(),!0}return r.prototype.addPoint.call(this,t)},n.prototype.setPoint=function(t,e){var i,n,s,a,l,c,h;r.prototype.setPoint.call(this,t,e),this._model.timeScale().isEmpty()||this.priceScale().isEmpty()||t!==this._points.length-1&&0!==t||(i=5,n=this.ownerSource().firstValue(),s=this._model.timeScale().indexToCoordinate(e.index),a=this.priceScale().priceToCoordinate(e.price,n),l=t===this._points.length-1?this._points[0]:this._points[this._points.length-1],c=this._model.timeScale().indexToCoordinate(l.index),h=this.priceScale().priceToCoordinate(l.price,n),new o(s,a).subtract(new o(c,h)).length()<i&&this._properties.filled.setValue(!0))},n.prototype.getInputsPropertyPage=function(){return null},n.prototype.getStylesPropertyPage=function(){return a.LineToolPolylineStylesPropertyPage},e.LineToolPolyline=n},function(t,e,i){"use strict";function n(t,e){this._constructor="LineToolPrediction";var n=e||new s("linetoolprediction");n.merge({status:l.AlertStatus.Waiting}),r.call(this,t,n),i.e(0).then(function(t){var e=i(917).PredictionPaneView;this._setPaneViews([new e(this,this._model)])
}.bind(this).bind(null,i)).catch(i.oe)}var o=i(6).ensureNotNull,r=i(1).LineDataSource,s=i(3).DefaultProperty,a=i(2).propertyPages,l=i(424);inherit(n,r),n.prototype.status=function(){return this._properties.status.value()},n.prototype.setStatus=function(t){return this._properties.status.setValue(t)},n.prototype.pointsCount=function(){return 2},n.prototype.title=function(){return"Forecast"},n.prototype.name=function(){return"Forecast"},n.prototype.restorePoints=function(t,e,i){r.prototype.restorePoints.call(this,t,e,i),this.checkAlert()},n.prototype.checkAlert=function(){var t,e,i,n;if(!(this._points.length<2||this._model.mainSeries().bars().isEmpty())){if(t=this._points[1],this.status())return void(t.index>this._model.timeScale().baseIndex()&&this.setStatus(l.AlertStatus.Waiting));e=this._model.mainSeries().bars().valueAt(t.index),null!==e&&(i=this.direction(),i===l.Direction.Up&&e[TradingView.HIGH_PLOT]>=t.price?this.setStatus(l.AlertStatus.Success):i===l.Direction.Down&&e[TradingView.LOW_PLOT]<=t.price?this.setStatus(l.AlertStatus.Success):(n=o(this._model.mainSeries().bars().lastIndex()),t.index!==n&&this.setStatus(l.AlertStatus.Failure)))}},n.prototype.addPoint=function(t){var e=r.prototype.addPoint.call(this,t);return e&&this.checkAlert(),e},n.prototype.endChanging=function(){r.prototype.endChanging.call(this),this.setStatus(l.AlertStatus.Waiting),this.checkAlert()},n.prototype.onData=function(t){r.prototype.onData.call(this,t),this.checkAlert()},n.prototype.endMoving=function(){r.prototype.endMoving.call(this),this.setStatus(l.AlertStatus.Waiting),this.checkAlert()},n.prototype.direction=function(){var t,e;return this.points().length<2?l.Direction.Up:(t=this.points()[0],e=this.points()[1],e.price>t.price?l.Direction.Up:l.Direction.Down)},n.prototype.getStylesPropertyPage=function(){return a.LineToolPredictionStylesPropertyPage},e.LineToolPrediction=n},function(t,e,i){"use strict";function n(t,e){this._constructor="LineToolPriceLabel";var n=e||new r("linetoolpricelabel");o.call(this,t,n),i.e(0).then(function(t){var e=i(918).PriceLabelPaneView;this._setPaneViews([new e(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var o=i(1).LineDataSource,r=i(3).DefaultProperty,s=i(2).propertyPages;inherit(n,o),n.prototype.pointsCount=function(){return 1},n.prototype.title=function(){return"Price Label"},n.prototype.name=function(){return"Price Label"},n.prototype.getStylesPropertyPage=function(){return s.LineToolPriceLabelStylesPropertyPage},e.LineToolPriceLabel=n},function(t,e,i){"use strict";function n(t,e){this._constructor="LineToolBrush";var n=e||new r("linetoolbrush");o.call(this,t,n),this._finished=!1,i.e(0).then(function(t){var e=i(920).BrushPaneView;this._setPaneViews([new e(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var o=i(1).LineDataSource,r=i(3).DefaultProperty,s=i(2).propertyPages;inherit(n,o),n.prototype.pointsCount=function(){return-1},n.prototype.finished=function(){return this._finished},n.prototype.finish=function(){this._finished=!0,this._lastPoint=null,this.normalizePoints(),
this.createServerPoints()},n.prototype.title=function(){return"Brush"},n.prototype.name=function(){return"Brush"},n.prototype.percentDistance=function(t,e){return Math.abs((e-t)/t)},n.prototype.addPoint=function(t){var e,i,n;return!!this._finished||(this._lastPoint=null,this._points.length>0&&(e=this._points[this._points.length-1],i=this.pointToScreenPoint(e)[1],n=this.pointToScreenPoint(t)[1],n.subtract(i).length()<2)?this._finished:(o.prototype.addPoint.call(this,t),this._finished))},n.prototype.restorePoints=function(t,e,i){o.prototype.restorePoints.call(this,t,e,i),this._finished=!0},n.prototype.getInputsPropertyPage=function(){return null},n.prototype.getStylesPropertyPage=function(){return s.LineToolBrushStylesPropertyPage},e.LineToolBrush=n},function(t,e,i){"use strict";function n(t,e){this._constructor="LineToolArc";var o=e||new d("linetoolarc");u.call(this,t,o),this.version=n.version,i.e(0).then(function(t){var e=i(921).ArcPaneView;this._setPaneViews([new e(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var o=i(7).Point,r=i(37).distanceToLine,s=i(377),a=s.rotationMatrix,l=s.scalingMatrix,c=s.translationMatrix,h=s.transformPoint,u=i(1).LineDataSource,d=i(3).DefaultProperty,p=i(2).propertyPages;inherit(n,u),n.prototype.startChanging=function(t,e){var i,n,s,a,l,c,h;u.prototype.startChanging.call(this,t,e),0!==t&&1!==t||(i=this.pointToScreenPoint(this._points[0])[0],n=this.pointToScreenPoint(this._points[1])[0],s=this.pointToScreenPoint(this._points[2])[0],this._dist=r(i,n,s).distance,a=n.subtract(i),l=new o(-a.y,a.x),c=i.add(n).scaled(.5),h=s.subtract(c),h.dotProduct(l)<0&&(this._dist=-this._dist))},n.prototype.pointsCount=function(){return 3},n.prototype.title=function(){return"Arc"},n.prototype.name=function(){return"Arc"},n.prototype.setPoint=function(t,e){var i,n,s,u,d,p,_,f,m,g,y,v,b=$.extend({},e),S=this.pointToScreenPoint(this._points[0])[0],w=this.pointToScreenPoint(this._points[1])[0],P=this.pointToScreenPoint(this._points[2])[0];switch(t){case 0:S=this.pointToScreenPoint(b)[0],i=w.subtract(S),n=S.add(w).scaled(.5),s=new o(-i.y,i.x),s=s.normalized(),P=n.add(s.scaled(this._dist)),P=this.screenPointToPoint(P),this._points[0]=b,this._points[2]=P;break;case 1:u=r(S,w,P).distance,w=this.pointToScreenPoint(b)[0],i=w.subtract(S),n=S.add(w).scaled(.5),s=new o(-i.y,i.x),s=s.normalized(),P=n.add(s.scaled(this._dist)),P=this.screenPointToPoint(P),this._points[1]=b,this._points[2]=P;break;case 2:b=this.pointToScreenPoint(b)[0],u=r(S,w,b).distance,i=w.subtract(S),n=S.add(w).scaled(.5),s=new o(-i.y,i.x),s=s.normalized(),P=n.add(s.scaled(u)),d=n.add(s.scaled(-u)),p=i.length(),_=i.x/p,f=i.y/p,m=Math.acos(_),f<0&&(m=-m),g=c(-n.x,-n.y),b=h(g,b),y=h(g,P),g=a(-m),b=h(g,b),y=h(g,y),g=l(1,p/(2*u)),b=h(g,b),y=h(g,y),v=b.y*y.y>=0?new o(P.x,P.y):new o(d.x,d.y),v=this.screenPointToPoint(v),this._points[2]=v}this.normalizePoints()},n.version=2,n.prototype.migrateVersion=function(t,e,i){var n,o;1===t&&2===this._points.length&&(n=(2*this._points[0].price+3*this._points[1].price)/5,this._points.append({price:n,
index:this._points[1].index})),1===t&&2===this._timePoint.length&&(n=(2*this._timePoint[0].price+3*this._timePoint[1].price)/5,o={price:n,offset:this._timePoint[1].offset,time_t:this._timePoint[1].time_t},this._timePoint.append(o))},n.prototype.getInputsPropertyPage=function(){return null},n.prototype.getStylesPropertyPage=function(){return p.LineToolArcStylesPropertyPage},e.LineToolArc=n},function(t,e,i){"use strict";function n(t,e){this._constructor="LineToolCallout";var n=e||new a("linetoolcallout");n.hasChild("text")||n.addChild("text",new s($.t("Text"))),n.addExclusion("text"),o.call(this,t,n),this._barOffset=0,this._timeScale=t.timeScale(),i.e(0).then(function(t){var e=i(922).CalloutPaneView;this._setPaneViews([new e(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var o=i(1).LineDataSource,r=i(34).DataSource,s=i(16),a=i(3).DefaultProperty,l=i(2).propertyPages,c=i(425).CalloutConsts;inherit(n,o),n.prototype.pointsCount=function(){return 2},n.prototype.title=function(){return"Callout"},n.prototype.name=function(){return"Callout"},n.prototype.correctPoints=function(t){var e=this._currentMovingPoint.index-this._startMovingPoint.index,i=this._currentMovingPoint.price-this._startMovingPoint.price,n=t[1];n.index+=e,n.price+=i,t[1]=n},n.prototype.addPoint=function(t){var e=o.prototype.addPoint.call(this,t);return e&&this._calculateBarOffset(),e},n.prototype._calculateBarOffset=function(){this.points().length>1&&(this._barOffset=this.points()[1].index-this.points()[0].index)},n.prototype.setLastPoint=function(t){o.prototype.setLastPoint.call(this,t),2===this.points().length&&this._calculateBarOffset()},n.prototype.setPoint=function(t,e){var i,n,r,s,a;switch(t){case 0:o.prototype.setPoint.call(this,t,e),this._calculateBarOffset();break;case 1:if(i=this.properties(),!i.wordWrapWidth)return;if(n=this._points,r=this._dragStartLeftEdgeIndex,s=Math.round((e.index-r)/2),isFinite(r)&&isFinite(s)){if(n[1]={index:r+s,price:n[1].price},this._calculateBarOffset(),this.normalizePoints(),a=this._timeScale.indexToCoordinate(r+2*s)-this._timeScale.indexToCoordinate(r)-c.RoundRadius-c.TextMargins,!isFinite(a))return;i.wordWrapWidth.setValue(Math.max(c.MinWidth,a));break}n[1]=e,this._calculateBarOffset(),this.normalizePoints()}},n.prototype.startDragPoint=function(t,e){var i=this.properties();1===t&&i.wordWrap&&i.wordWrap.value()&&(this._dragStartLeftEdgeIndex=2*this.points()[1].index-e.index)},n.prototype.move=function(t){o.prototype.move.call(this,t),this._calculateBarOffset()},n.prototype.state=function(t){var e=o.prototype.state.call(this,t);return e.barOffset=this._barOffset,e},n.prototype.restoreData=function(t){t.barOffset?this._barOffset=t.barOffset:this._calculateBarOffset(),this._calculatePoint2()},n.prototype.setPriceScale=function(t){r.prototype.setPriceScale.call(this,t),t&&t.priceRange()&&this._calculatePoint2()},n.prototype._calculatePoint2=function(){var t,e;this._model.lineBeingEdited()!==this&&this._model.sourceBeingMoved()!==this&&(this._points.length<2||(t=this.points()[0],e=this.points()[1],
this._points[1]={price:e.price,index:t.index+this._barOffset}))},n.prototype.getStylesPropertyPage=function(){return l.LineToolCalloutStylesPropertyPage},e.LineToolCallout=n},function(t,e,i){"use strict";function n(t,e){this._constructor="LineToolBalloon";var n=e||new s("linetoolballoon");n.hasChild("text")||n.addChild("text",new r($.t("Comment"))),n.addExclusion("text"),o.call(this,t,n),i.e(0).then(function(t){var e=i(923).BalloonPaneView;this._setPaneViews([new e(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var o=i(1).LineDataSource,r=i(16),s=i(3).DefaultProperty,a=i(2).propertyPages;inherit(n,o),n.prototype.pointsCount=function(){return 1},n.prototype.title=function(){return"Balloon"},n.prototype.name=function(){return"Balloon"},n.prototype.getStylesPropertyPage=function(){return a.LineToolBalloonStylesPropertyPage},e.LineToolBalloon=n},function(t,e,i){"use strict";function n(t,e){this._constructor="LineToolHorzLine";var n=e||new a("linetoolhorzline");n.hasChild("text")||n.addChild("text",new s("")),n.addExclusion("text"),this._priceAxisView=new r(this),o.call(this,t,n),i.e(0).then(function(t){var e=i(924).HorzLinePaneView;this._setPaneViews([new e(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var o=i(1).LineDataSource,r=i(207).LineToolHorzLinePriceAxisView,s=i(16),a=i(3).DefaultProperty,l=i(2).propertyPages;inherit(n,o),n.prototype.state=function(t){var e=o.prototype.state.call(this,t);return e.points&&0!==e.points.length&&(e.points[0].offset=0),e},n.prototype.pointsCount=function(){return 1},n.prototype.title=function(){return"Horizontal Line"},n.prototype.name=function(){return"Horizontal Line"},n.prototype.priceAxisViews=function(t,e){return this.isSourceHidden()?null:e===this.priceScale()&&this.properties().showPrice.value()&&this._model.paneForSource(this)===t?[this._priceAxisView]:null},n.prototype.updateAllViews=function(){o.prototype.updateAllViews.call(this),this._priceAxisView.update()},n.prototype.canHasAlert=function(){return!0},n.prototype._getAlertPlots=function(){return[this.points()[0].price]},n.prototype.getInputsPropertyPage=function(){return l.LineToolHorzLineInputsPropertyPage},n.prototype.getStylesPropertyPage=function(){return l.LineToolHorzLineStylesPropertyPage},e.LineToolHorzLine=n},function(t,e,i){"use strict";function n(t,e){this._constructor="LineToolHorzRay";var n=e||new a("linetoolhorzray");n.hasChild("text")||n.addChild("text",new s("")),n.addExclusion("text"),this._priceAxisView=new r(this),o.call(this,t,n),i.e(0).then(function(t){var e=i(925).HorzRayPaneView;this._setPaneViews([new e(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var o=i(1).LineDataSource,r=i(207).LineToolHorzLinePriceAxisView,s=i(16),a=i(3).DefaultProperty,l=i(2).propertyPages;inherit(n,o),n.prototype.pointsCount=function(){return 1},n.prototype.title=function(){return"Horizontal Ray"},n.prototype.name=function(){return"Horizontal Ray"},n.prototype.priceAxisViews=function(t,e){
return this.isSourceHidden()?null:e===this.priceScale()&&this.properties().showPrice.value()&&this._model.paneForSource(this)===t?[this._priceAxisView]:null},n.prototype.updateAllViews=function(){o.prototype.updateAllViews.call(this),this._priceAxisView.update()},n.prototype.canHasAlert=function(){return!0},n.prototype._getAlertPlots=function(){var t=this._points[0],e={index:t.index+1,price:t.price};return[this._linePointsToAlertPlot([t,e],null,!1,!0)]},n.prototype.getStylesPropertyPage=function(){return l.LineToolHorzLineStylesPropertyPage},e.LineToolHorzRay=n},function(t,e,i){"use strict";function n(t,e){this._constructor="LineToolRectangle";var n=e||new r("linetoolrectangle");o.call(this,t,n),i.e(0).then(function(t){var e=i(926).RectanglePaneView;this._setPaneViews([new e(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var o=i(1).LineDataSource,r=i(3).DefaultProperty,s=i(2).propertyPages;inherit(n,o),n.prototype.pointsCount=function(){return 2},n.prototype.title=function(){return"Rectangle"},n.prototype.name=function(){return"Rectangle"},n.prototype.setPoint=function(t,e,i){var n,r,s;if(t<2)return void o.prototype.setPoint.call(this,t,e,i);i&&i.shift&&this._properties.snapTo45Degrees&&(n=this.points()[0],r=this.points()[1],s={price:2===t?n.price:r.price,index:2===t?r.index:n.index},this._snapPoint45Degree(e,s)),3===t?(this._points[0].price=e.price,this._points[1].index=e.index):(this._points[1].price=e.price,this._points[0].index=e.index),this.normalizePoints()},n.prototype.getStylesPropertyPage=function(){return s.LineToolRectangleStylesPropertyPage},e.LineToolRectangle=n},function(t,e,i){"use strict";function n(t,e){this._constructor="LineToolEllipse";var o=e||new a("linetoolellipse");s.call(this,t,o),this.version=n.version,i.e(0).then(function(t){var e=i(927).EllipsePaneView;this._setPaneViews([new e(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var o=i(7).Point,r=i(37).distanceToLine,s=i(1).LineDataSource,a=i(3).DefaultProperty,l=i(2).propertyPages;inherit(n,s),n.prototype.startChanging=function(t,e){var i,n,o;s.prototype.startChanging.call(this,t,e),0!==t&&1!==t||(i=this.pointToScreenPoint(this._points[0])[0],n=this.pointToScreenPoint(this._points[1])[0],o=this.pointToScreenPoint(this._points[2])[0],this._dist=r(i,n,o).distance||0)},n.prototype._preparePoint=function(t,e){var i=this._preparePointInternal(t,e,!1);return e&&e.shift&&this._points[0].index===this._points[1].index&&this._fixVerticalDiameterPoints(this._points[1],this._points[0],i),i},n.prototype._preparePointInternal=function(t,e,i){var n,r,a,l,c,h,u,d,p,_,f=$.extend({},t);if(e&&e.shift){if(n=this.points().length,!this._fakePointAdded&&3===n&&!i)return f;(this._fakePointAdded||2===n||i)&&(this._snapPoint45Degree(t,this._points[0]),this._fakePointAdded?this._points[1]=t:i||(this._fakePointAdded=!0,s.prototype._addPointIntenal.call(this,t)),r=this.pointToScreenPoint(this._points[0])[0],a=this.pointToScreenPoint(this._points[1])[0],l=a.x-r.x,c=a.y-r.y,h=Math.sqrt(l*l+c*c)/2,u=a.subtract(r),d=r.add(a).scaled(.5),
p=new o(-u.y,u.x),p=p.normalized(),_=d.add(p.scaled(h)),f=this.screenPointToPoint(_),(TradingView.isNaN(f.price)||TradingView.isNaN(f.index))&&(f=this.screenPointToPoint(d)))}else this._fakePointAdded&&(this._points.splice(1,1),this._fakePointAdded=!1);return f},n.prototype._fixVerticalDiameterPoints=function(t,e,i){var n=this.pointToScreenPoint(t)[0],o=this.pointToScreenPoint(e)[0],r=this._model.timeScale(),s=r.indexToCoordinate(t.index),a=r.indexToCoordinate(i.index),l=2*Math.abs(s-a);l*=e.price>t.price?1:-1,t.price=this.screenPointToPoint({x:n.x,y:o.y+l}).price},n.prototype.addPoint=function(t,e,i){var n=s.prototype.addPoint.call(this,t,e,i);return n&&(this._fakePointAdded=!1),n},n.prototype.setPoint=function(t,e,i){var n,s,a,l,c=$.extend({},e),h=this.pointToScreenPoint(this._points[0])[0],u=this.pointToScreenPoint(this._points[1])[0],d=this.pointToScreenPoint(this._points[2])[0];switch(t){case 0:if(i&&i.shift){this._snapPoint45Degree(c,this._points[1]),this._points[0]=c,this._points[2]=this._preparePointInternal(this._points[2],i,!0),this._points[0].index===this._points[1].index&&this._fixVerticalDiameterPoints(this._points[0],this._points[1],this._points[2]);break}h=this.pointToScreenPoint(c)[0],n=u.subtract(h),s=h.add(u).scaled(.5),a=new o(-n.y,n.x),a=a.normalized(),d=s.add(a.scaled(this._dist)),d=this.screenPointToPoint(d),this._points[0]=c,this._points[2]=d;break;case 1:if(i&&i.shift){this._snapPoint45Degree(c,this._points[0]),this._points[1]=c,this._points[2]=this._preparePointInternal(this._points[2],i,!0),this._points[0].index===this._points[1].index&&this._fixVerticalDiameterPoints(this._points[1],this._points[0],this._points[2]);break}u=this.pointToScreenPoint(c)[0],n=u.subtract(h),s=h.add(u).scaled(.5),a=new o(-n.y,n.x),a=a.normalized(),d=s.add(a.scaled(this._dist)),d=this.screenPointToPoint(d),this._points[1]=c,this._points[2]=d;break;case 2:case 3:c=this.pointToScreenPoint(c)[0],l=r(h,u,c).distance,n=u.subtract(h),s=h.add(u).scaled(.5),a=new o(-n.y,n.x),a=a.normalized(),d=s.add(a.scaled(l)),d=this.screenPointToPoint(d),this._points[2]=d}this.normalizePoints()},n.prototype.pointsCount=function(){return 3},n.prototype.title=function(){return"Ellipse"},n.prototype.name=function(){return"Ellipse"},n.version=2,n.prototype.migrateVersion=function(t,e,i){var n,o,r;1===t&&2===this._points.length&&(n=this._points[0].price,o=.5*(this._points[0].price+this._points[1].price),this._points[0]={price:o,index:this._points[0].index},this._points[1]={price:o,index:this._points[1].index},this._points.push({price:n,index:this._points[0].index})),1===t&&2===this._timePoint.length&&(n=this._timePoint[0].price,o=.5*(this._timePoint[0].price+this._timePoint[1].price),this._timePoint[0].price=o,this._timePoint[1].price=o,r={price:n,offset:this._timePoint[0].offset,time_t:this._timePoint[0].time_t},this._timePoint.push(r))},n.prototype.getInputsPropertyPage=function(){return null},n.prototype.getStylesPropertyPage=function(){return l.LineToolEllipseStylesPropertyPage},e.LineToolEllipse=n},function(t,e,i){"use strict"
;function n(t,e){this._constructor="LineToolTimeCycles";var n=e||new r("linetooltimecycles");o.call(this,t,n),i.e(0).then(function(t){var e=i(928).TimeCyclesPaneView;this._setPaneViews([new e(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var o=i(1).LineDataSource,r=i(3).DefaultProperty,s=i(2).propertyPages;inherit(n,o),n.prototype.pointsCount=function(){return 2},n.prototype.title=function(){return"Time Cycles"},n.prototype.name=function(){return"Time Cycles"},n.prototype.setPoint=function(t,e,i){var n=$.extend({},e),o=this._points[0],r=this._points[1];o.price=n.price,r.price=n.price,this._points[t]=n,this.normalizePoints()},n.prototype.addPoint=function(t,e,i){var n,r,s=o.prototype.addPoint.call(this,t,e,!0);return s&&(n=this._points[0],r=this._points[1],r.price=n.price,i||(this.normalizePoints(),this.createServerPoints())),s},n.prototype.getStylesPropertyPage=function(){return s.LineToolTimeCyclesPropertyPage},e.LineToolTimeCycles=n},function(t,e,i){"use strict";function n(t,e){this._constructor="LineToolSineLine";var n=e||new r("linetoolsineline");o.call(this,t,n),i.e(0).then(function(t){var e=i(929).SineLinePaneView;this._setPaneViews([new e(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var o=i(1).LineDataSource,r=i(3).DefaultProperty,s=i(2).propertyPages;inherit(n,o),n.prototype.pointsCount=function(){return 2},n.prototype.title=function(){return"Sine Line"},n.prototype.name=function(){return"Sine Line"},n.prototype.getStylesPropertyPage=function(){return s.LineToolTimeCyclesPropertyPage},e.LineToolSineLine=n},function(t,e,i){"use strict";function n(t,e,i){this._source=t,this._index=e,this._bars=i||[]}function o(t,e,i){this._source=t,l.call(this,"linetoolghostfeed",e,i)}function r(t,e,n){var s,l;this._constructor="LineToolGhostFeed",e?(s=e,s._source=this):s=new o(this),n||(l=Math.round(this.calculateATR(t)),s.averageHL.setValue(l)),a.call(this,t,s),this._segments=[],s.averageHL.listeners().subscribe(this,r.prototype.regenerate),s.variance.listeners().subscribe(this,r.prototype.regenerate),s.points||s.addProperty("points"),this._currentAverageHL=this._properties.averageHL.value(),this._currentVariance=this._properties.variance.value(),this._currentInterval=t.mainSeries().interval(),i.e(0).then(function(t){var e=i(930).GhostFeedPaneView;this._setPaneViews([new e(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var s=i(55).sign,a=i(1).LineDataSource,l=i(3).DefaultProperty,c=i(2).propertyPages;n.prototype.setBars=function(t){this._bars=t||[]},n.prototype.clone=function(t){return new n(t,this._index,TradingView.clone(this._bars))},n.prototype.createBar=function(){var t,e,i,n,o,r=this._source.properties().averageHL.value(),s=this._source.properties().variance.value()/100,a=this._source._model.mainSeries().base(),l=Math.random(),c=r*(1-2*l)*s;return l=Math.random(),t=r*(1+(.5-l)*s),e=c-t/2,i=e+t,n=e+Math.random()*t,o=e+Math.random()*t,{o:n/a,h:i/a,l:e/a,c:o/a}},n.prototype.generate=function(){var t,e,i,n,o,r;if(this._bars=[],t=this._source.points(),e=t[this._index],i=t[this._index+1],
e&&i&&e.index!==i.index)for(this._avgHL=this._source.properties().averageHL.value(),this._variance=this._source.properties().variance.value()/100,n=this._index?e.index+1:e.index,o=s(i.index-e.index),r=n;r!==i.index;r+=o)this._bars.push(this.createBar())},n.prototype.bars=function(){return this._bars},n.prototype.setSize=function(t){if(t<this._bars.length)this._bars.splice(t,this._bars.length-t);else for(;this._bars.length<t;)this._bars.push(this.createBar())},inherit(o,l),o.prototype.restoreFactoryDefaults=function(){l.prototype.restoreFactoryDefaults.call(this);var t=Math.round(this._source.calculateATR());this.averageHL.setValue(t)},inherit(r,a),r.prototype.createPropertiesObject=function(t,e,i){return new o(null,e,i)},r.prototype.regenerate=function(){this._currentAverageHL=this._properties.averageHL.value(),this._currentVariance=this._properties.variance.value(),this._segments.forEach(function(t){t.generate()}),this.updateAllViews(),this._model.updateSource(this)},r.prototype.propertiesChanged=function(){a.prototype.propertiesChanged.call(this),this._currentAverageHL===this._properties.averageHL.value()&&this._currentVariance===this._properties.variance.value()||this.regenerate()},r.prototype.pointsCount=function(){return-1},r.prototype.title=function(){return"Ghost Feed"},r.prototype.name=function(){return"Ghost Feed"},r.prototype.segmentBars=function(t){return this._segments[t].bars()},r.prototype.segments=function(){return this._segments},r.prototype.generateBars=function(t){this._segments.length<=t&&this._segments.push(new n(this,t)),this._segments[t].generate()},r.prototype.addPoint=function(t){var e,i,n;if(this._points.length>0&&(e=this._points[this._points.length-1],e.index===t.index)){for(this._lastPoint=null,this.normalizePoints(),this.createServerPoints(),i=0;i<this._points.length;i++)this._createPointProperty(i);return!0}return n=a.prototype.addPoint.call(this,t),this._finished&&(this._lastPoint=null),this._points.length>1&&this.generateBars(this._points.length-2),n||this._finished},r.prototype.finish=function(){this._finished=!0,this._lastPoint=null,this.normalizePoints(),this.createServerPoints()},r.prototype.setPoint=function(t,e,i){var n,o,r;a.prototype.setPoint.call(this,t,e,i),t>0&&(n=this.points()[t-1],o=e.index-n.index,this._segments[t-1].setSize(Math.abs(o))),t<this.points().length-1&&(r=this.points()[t+1],o=r.index-e.index,this._segments[t].setSize(Math.abs(o)))},r.prototype.state=function(t){var e=a.prototype.state.call(this,t);return e.segments=this._segments.map(function(t){return{bars:t.bars()}}),e},r.prototype.restoreData=function(t){var e=this;t.segments&&(this._segments=t.segments.map(function(t,i){return new n(e,i,[].concat(t.bars))})),this._currentAverageHL=this._properties.averageHL.value(),this._currentVariance=this._properties.variance.value()},r.prototype.onData=function(t){if(a.prototype.onData.call(this,t),0===this.properties().points._childs.length)for(var e=0;e<this._points.length;e++)this._createPointProperty(e)
;this._currentInterval!==this._model.mainSeries().interval()&&(this.regenerate(),this._currentInterval=this._model.mainSeries().interval())},r.prototype.cloneData=function(t){var e=this;this._segments=t._segments.map(function(t){return t.clone(e)})},r.prototype.calculateATR=function(t){var e,i=(void 0!==t?t:this._model).mainSeries(),n=[];return i.bars().each(function(t,e){n.push(e[TradingView.HIGH_PLOT]-e[TradingView.LOW_PLOT])}),e=0===n.length?0:n.reduce(function(t,e){return t+e},0)/n.length,e*=i.base()},r.prototype.getInputsPropertyPage=function(){return c.LineToolGhostFeedInputsPropertyPage},r.prototype.getStylesPropertyPage=function(){return c.LineToolGhostFeedStylesPropertyPage},e.LineToolGhostFeed=r},function(t,e,i){"use strict";function n(t,e){this._constructor="LineToolBezierQuadro";var n=e||new r("linetoolbezierquadro");o.call(this,t,n),i.e(0).then(function(t){var e=i(931).BezierQuadroPaneView;this._setPaneViews([new e(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var o=i(1).LineDataSource,r=i(3).DefaultProperty,s=i(2).propertyPages;inherit(n,o),n.prototype.pointsCount=function(){return 2},n.prototype.title=function(){return"Curve"},n.prototype.name=function(){return"Curve"},n.prototype.controlPoint=function(){var t=this.pointToScreenPoint(this.points()[0])[0],e=this.pointToScreenPoint(this.points()[1])[0],i=e.subtract(t).scaled(.5),n=i.transposed().scaled(.3),o=t.add(e).scaled(.5),r=o.add(n);return this.screenPointToPoint(r)},n.prototype.setLastPoint=function(t,e){o.prototype.setLastPoint.call(this,t,e),this._controlPoint=this.controlPoint()},n.prototype.addPoint=function(t,e,i){var n,r=o.prototype.addPoint.call(this,t,e,!0);return r&&(n=this.controlPoint(),this._points.push(n),delete this._controlPoint,i||(this.normalizePoints(),this.createServerPoints()),this._createPointProperty(2)),r},n.prototype.restorePoints=function(t,e,i){o.prototype.restorePoints.call(this,t,e,i),this._createPointProperty(2)},n.prototype.getStylesPropertyPage=function(){return s.LineToolBezierStylesPropertyPage},e.LineToolBezierQuadro=n},function(t,e,i){"use strict";function n(t,e){this._constructor="LineToolBezierCubic";var n=e||new r("linetoolbeziercubic");o.call(this,t,n),i.e(0).then(function(t){var e=i(932).BezierCubicPaneView;this._setPaneViews([new e(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var o=i(1).LineDataSource,r=i(3).DefaultProperty,s=i(2).propertyPages;inherit(n,o),n.prototype.pointsCount=function(){return 2},n.prototype.title=function(){return"Double Curve"},n.prototype.name=function(){return"Double Curve"},n.prototype.controlPoints=function(){var t=this.pointToScreenPoint(this.points()[0])[0],e=this.pointToScreenPoint(this.points()[1])[0],i=e.subtract(t).scaled(.5),n=i.transposed().scaled(.3),o=t.add(e).scaled(.33),r=t.add(e).scaled(.67),s=o.add(n),a=r.subtract(n);return[this.screenPointToPoint(s),this.screenPointToPoint(a)]},n.prototype.setLastPoint=function(t,e){o.prototype.setLastPoint.call(this,t,e),this._controlPoints=this.controlPoints()},n.prototype.addPoint=function(t,e,i){
var n,r=o.prototype.addPoint.call(this,t,e,!0);return r&&(n=this.controlPoints(),delete this._controlPoints,this._points.push(n[0]),this._points.push(n[1]),i||(this.normalizePoints(),this.createServerPoints()),this._createPointProperty(2),this._createPointProperty(3)),r},n.prototype.restorePoints=function(t,e,i){o.prototype.restorePoints.call(this,t,e,i),this._createPointProperty(2),this._createPointProperty(3)},n.prototype.getStylesPropertyPage=function(){return s.LineToolBezierStylesPropertyPage},e.LineToolBezierCubic=n},function(t,e,i){"use strict";function n(t,e){this._constructor="LineToolArrow";var i=e||new r("linetoolarrow");o.call(this,t,i)}var o=i(113).LineToolTrendLine,r=i(3).DefaultProperty;inherit(n,o),n.prototype.title=function(){return"Arrow"},n.prototype.name=function(){return"Arrow"},e.LineToolArrow=n},function(t,e,i){"use strict";function n(t,e){this._constructor="LineToolRay";var i=e||new r("linetoolray");o.call(this,t,i)}var o=i(113).LineToolTrendLine,r=i(3).DefaultProperty;inherit(n,o),n.prototype.title=function(){return"Ray"},n.prototype.name=function(){return"Ray"},e.LineToolRay=n},function(t,e,i){"use strict";function n(t,e){this._constructor="LineToolExtended";var i=e||new r("linetoolextended");o.call(this,t,i)}var o=i(113).LineToolTrendLine,r=i(3).DefaultProperty;inherit(n,o),n.prototype.title=function(){return"Extended Line"},n.prototype.name=function(){return"Extended Line"},e.LineToolExtended=n},function(t,e,i){"use strict";function n(t,e){var i=e||this.createPropertiesObject("linetoolschiffpitchfork");r.call(this,t,i),this._constructor="LineToolSchiffPitchfork"}var o=i(18),r=i(141).LineToolPitchfork;inherit(n,r),n.prototype.title=function(){return $.t("Modified Schiff Pitchfork")},n.prototype.name=function(){return"Modified Schiff Pitchfork"},n.prototype.createPropertiesObject=function(t,e,i){return new o(t,e,i,{range:[0,8]})},e.LineToolSchiffPitchfork=n},function(t,e,i){"use strict";function n(t,e){var i=e||this.createPropertiesObject("linetoolschiffpitchfork2");r.call(this,t,i),this._constructor="LineToolSchiffPitchfork2"}var o=i(18),r=i(141).LineToolPitchfork;inherit(n,r),n.prototype.title=function(){return $.t("Schiff Pitchfork")},n.prototype.name=function(){return"Schiff Pitchfork"},n.prototype.createPropertiesObject=function(t,e,i){return new o(t,e,i,{range:[0,8]})},e.LineToolSchiffPitchfork2=n},function(t,e,i){"use strict";function n(t,e){var i=e||this.createPropertiesObject("linetoolinsidepitchfork");r.call(this,t,i),this._constructor="LineToolInsidePitchfork"}var o=i(18),r=i(141).LineToolPitchfork;inherit(n,r),n.prototype.title=function(){return $.t("Inside Pitchfork")},n.prototype.name=function(){return"Inside Pitchfork"},n.prototype.createPropertiesObject=function(t,e,i){return new o(t,e,i,{range:[0,8]})},e.LineToolInsidePitchfork=n},function(t,e,i){"use strict";function n(t,e){this._constructor="LineToolFlagMark";var n=e||new s("linetoolflagmark");r.call(this,t,n),i.e(0).then(function(e){var n=i(422).MarkPaneView,r=new n(this,t,this.image,25,25,-8,-21)
;r.setAnchors(new o(0,0)),this._setPaneViews([r])}.bind(this).bind(null,i)).catch(i.oe)}var o=i(7).Point,r=i(1).LineDataSource,s=i(3).DefaultProperty;inherit(n,r),n.prototype.image=new Image,n.prototype.image.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAAAsElEQVR4AWMYWcDExOS/YUd4hWF7+H90bNAePpO2liDwJTxyi2htyVXLvlBOWlry2bAtVIumwWXQERFF4zgJ20iPiP8JDCpLeqSuJ6ZdoRJ0SMIRx7QbQtmItgSXnGFbRCzMEnIzK8ISWgL6WzJqibGxsYaFhYUC7SxBWMQPNMjazMxMjebBZWhoKAq00NHc3FyL5nFiaWkpDTTYz8jISI/mEW9qaqoExGFgS+gFRgEAaE0hWxrw50oAAAAASUVORK5CYII=",n.prototype.pointsCount=function(){return 1},n.prototype.title=function(){return"Flag Mark"},n.prototype.name=function(){return"Flag Mark"},n.prototype.version=2,e.LineToolFlagMark=n},function(t,e,i){"use strict";function n(t,e){this._constructor="LineToolCypherPattern";var n=e||new r("linetoolcypherpattern");o.call(this,t,n),i.e(0).then(function(t){var e=i(933).CypherPaneView;this._setPaneViews([new e(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var o=i(1).LineDataSource,r=i(3).DefaultProperty,s=i(334).LineTool5PointsPattern;inherit(n,s),e.LineToolCypherPattern=n},function(t,e,i){"use strict";(function(t){function n(t){this._line=t,this._data={bodyText:"position",quantityText:"0"},this._closeEnabled=!0}function o(t,e){var o,s,a,l,u,d;this._adapter=new n(this),this._constructor="LineToolPosition",o=e||new c("linetoolposition"),r.call(this,t,o),i.e(0).then(function(t){var e=i(934).PositionPaneView;this._setPaneViews([new e(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe),s=t.mainSeries().symbolInfo(),a=null!==s?s.pricescale:100,l=null!==s&&s.fractional?s.minmov:1,u=null!==s&&s.fractional,d=null!==s?s.minmove2:void 0,this._formatter=new h(a,l,u,d)}var r=i(206),s=i(1).LineDataSource,a=i(717).PositionAveragePriceAxisView,l=i(156),c=i(3).DefaultProperty,h=i(13).PriceFormatter;n.prototype.getPrice=function(){return this._line.points().length>0?this._line.points()[0].price:this._line._timePoint.length>0?this._line._timePoint[0].price:void 0},n.prototype.setPrice=function(t){if(this._line.points().length>0){var e=this._line.points()[0];e.price=t,this._line._points[0]=e,this._line.normalizePoints(),this._line.updateAllViewsAndRedraw()}return this._line._timePoint.length>0&&(this._line._timePoint[0].price=t),this},n.prototype.getText=function(){return this._data.bodyText},n.prototype.setText=function(t){return this._data.bodyText=t||"",this._line.updateAllViewsAndRedraw(),this},n.prototype.setTooltip=function(t){return null==t?t="":t+="",this._line.properties().tooltip.setValue(t),this},n.prototype.getTooltip=function(){return this._line.properties().tooltip.value()},n.prototype.getQuantity=function(){return this._data.quantityText},n.prototype.setQuantity=function(t){return this._data.quantityText=t||"",this._line.updateAllViewsAndRedraw(),this},n.prototype.getExtendLeft=function(){var t=this._line.properties().extendLeft.value();return"inherit"===t?this._line._model.properties().tradingProperties.extendLeft.value():t},n.prototype.setExtendLeft=function(t){
return this._line.properties().extendLeft.setValue(t),this},n.prototype.getLineLength=function(){var t=this._line.properties().lineLength.value();return"inherit"===t?this._line._model.properties().tradingProperties.lineLength.value():t},n.prototype.setLineLength=function(t){return this._line.properties().lineLength.setValue(Math.max(0,Math.min(t,100))),this},n.prototype.getLineColor=function(){return l.getColorFromProperties(this._line.properties().lineColor,this._line.properties().lineTransparency)},n.prototype.setLineColor=function(t){return l.setColorToProperties(t,this._line.properties().lineColor,this._line.properties().lineTransparency),this},n.prototype.getLineStyle=function(){var t=this._line.properties().lineStyle.value();return"inherit"===t?this._line._model.properties().tradingProperties.lineStyle.value():t},n.prototype.setLineStyle=function(t){return this._line.properties().lineStyle.setValue(t),this},n.prototype.getLineWidth=function(){var t=this._line.properties().lineWidth.value();return"inherit"===t?this._line._model.properties().tradingProperties.lineWidth.value():t},n.prototype.setLineWidth=function(t){return this._line.properties().lineWidth.setValue(t),this},n.prototype.getBodyBorderColor=function(){return l.getColorFromProperties(this._line.properties().bodyBorderColor,this._line.properties().bodyBorderTransparency)},n.prototype.setBodyBorderColor=function(t){return l.setColorToProperties(t,this._line.properties().bodyBorderColor,this._line.properties().bodyBorderTransparency),this},n.prototype.getBodyBackgroundColor=function(){return l.getColorFromProperties(this._line.properties().bodyBackgroundColor,this._line.properties().bodyBackgroundTransparency)},n.prototype.setBodyBackgroundColor=function(t){return l.setColorToProperties(t,this._line.properties().bodyBackgroundColor,this._line.properties().bodyBackgroundTransparency),this},n.prototype.getBodyTextColor=function(){return l.getColorFromProperties(this._line.properties().bodyTextColor,this._line.properties().bodyTextTransparency)},n.prototype.setBodyTextColor=function(t){return l.setColorToProperties(t,this._line.properties().bodyTextColor,this._line.properties().bodyTextTransparency),this},n.prototype.getBodyFont=function(){return l.getFontFromProperties(this._line.properties().bodyFontFamily,this._line.properties().bodyFontSize,this._line.properties().bodyFontBold,this._line.properties().bodyFontItalic)},n.prototype.setBodyFont=function(t){return l.setFontToProperties(t,this._line.properties().bodyFontFamily,this._line.properties().bodyFontSize,this._line.properties().bodyFontBold,this._line.properties().bodyFontItalic),this},n.prototype.getQuantityBorderColor=function(){return l.getColorFromProperties(this._line.properties().quantityBorderColor,this._line.properties().quantityBorderTransparency)},n.prototype.setQuantityBorderColor=function(t){return l.setColorToProperties(t,this._line.properties().quantityBorderColor,this._line.properties().quantityBorderTransparency),this},n.prototype.getQuantityBackgroundColor=function(){
return l.getColorFromProperties(this._line.properties().quantityBackgroundColor,this._line.properties().quantityBackgroundTransparency)},n.prototype.setQuantityBackgroundColor=function(t){return l.setColorToProperties(t,this._line.properties().quantityBackgroundColor,this._line.properties().quantityBackgroundTransparency),this},n.prototype.getQuantityTextColor=function(){return l.getColorFromProperties(this._line.properties().quantityTextColor,this._line.properties().quantityTextTransparency)},n.prototype.setQuantityTextColor=function(t){return l.setColorToProperties(t,this._line.properties().quantityTextColor,this._line.properties().quantityTextTransparency),this},n.prototype.getQuantityFont=function(){return l.getFontFromProperties(this._line.properties().quantityFontFamily,this._line.properties().quantityFontSize,this._line.properties().quantityFontBold,this._line.properties().quantityFontItalic)},n.prototype.setQuantityFont=function(t){return l.setFontToProperties(t,this._line.properties().quantityFontFamily,this._line.properties().quantityFontSize,this._line.properties().quantityFontBold,this._line.properties().quantityFontItalic),this},n.prototype.getReverseButtonBorderColor=function(){return l.getColorFromProperties(this._line.properties().reverseButtonBorderColor,this._line.properties().reverseButtonBorderTransparency)},n.prototype.setReverseButtonBorderColor=function(t){return l.setColorToProperties(t,this._line.properties().reverseButtonBorderColor,this._line.properties().reverseButtonBorderTransparency),this},n.prototype.getReverseButtonBackgroundColor=function(){return l.getColorFromProperties(this._line.properties().reverseButtonBackgroundColor,this._line.properties().reverseButtonBackgroundTransparency)},n.prototype.setReverseButtonBackgroundColor=function(t){return l.setColorToProperties(t,this._line.properties().reverseButtonBackgroundColor,this._line.properties().reverseButtonBackgroundTransparency),this},n.prototype.getReverseButtonIconColor=function(){return l.getColorFromProperties(this._line.properties().reverseButtonIconColor,this._line.properties().reverseButtonIconTransparency)},n.prototype.setReverseButtonIconColor=function(t){return l.setColorToProperties(t,this._line.properties().reverseButtonIconColor,this._line.properties().reverseButtonIconTransparency),this},n.prototype.getCloseButtonBorderColor=function(){return l.getColorFromProperties(this._line.properties().closeButtonBorderColor,this._line.properties().closeButtonBorderTransparency)},n.prototype.setCloseButtonBorderColor=function(t){return l.setColorToProperties(t,this._line.properties().closeButtonBorderColor,this._line.properties().closeButtonBorderTransparency),this},n.prototype.getCloseButtonBackgroundColor=function(){return l.getColorFromProperties(this._line.properties().closeButtonBackgroundColor,this._line.properties().closeButtonBackgroundTransparency)},n.prototype.setCloseButtonBackgroundColor=function(t){
return l.setColorToProperties(t,this._line.properties().closeButtonBackgroundColor,this._line.properties().closeButtonBackgroundTransparency),this},n.prototype.getCloseButtonIconColor=function(){return l.getColorFromProperties(this._line.properties().closeButtonIconColor,this._line.properties().closeButtonIconTransparency)},n.prototype.setCloseButtonIconColor=function(t){return l.setColorToProperties(t,this._line.properties().closeButtonIconColor,this._line.properties().closeButtonIconTransparency),this},n.prototype.block=function(){this._blocked=!0,this._line.updateAllViewsAndRedraw()},n.prototype.unblock=function(){this._blocked=!1,this._line.updateAllViewsAndRedraw()},n.prototype.isFunction=function(t){return"function"==typeof t},n.prototype.onReverse=function(t,e){return e?this.isFunction(e)&&(this._onReverseData=t,this._onReverseCallback=e):this.isFunction(t)&&(this._onReverseCallback=t),this},n.prototype.callOnReverse=function(){this.isFunction(this._onReverseCallback)&&this._onReverseCallback.call(this,this._onReverseData)},n.prototype.isOnReverseCallbackPresent=function(){return this.isFunction(this._onReverseCallback)},n.prototype.onClose=function(t,e){return e?this.isFunction(e)&&(this._onCloseData=t,this._onCloseCallback=e):this.isFunction(t)&&(this._onCloseCallback=t),this},n.prototype.setCloseEnabled=function(t){return this._closeEnabled===t?this:(this._closeEnabled=t,this._onCloseCallback&&this._line.updateAllViewsAndRedraw(),this)},n.prototype.isCloseEnabled=function(){return this._closeEnabled},n.prototype.callOnClose=function(){this.isFunction(this._onCloseCallback)&&this._closeEnabled&&this._onCloseCallback.call(this,this._onCloseData)},n.prototype.isOnCloseCallbackPresent=function(){return this._closeEnabled&&this.isFunction(this._onCloseCallback)},n.prototype.onModify=function(t,e){return e?this.isFunction(e)&&(this._onModifyData=t,this._onModifyCallback=e):this.isFunction(t)&&(this._onModifyCallback=t),this},n.prototype.callOnModify=function(){this.isFunction(this._onModifyCallback)&&this._onModifyCallback.call(this,this._onModifyData)},n.prototype.onContextMenu=function(t,e){return e?this.isFunction(e)&&(this._onContextMenuData=t,this._onContextMenuCallback=e):this.isFunction(t)&&(this._onContextMenuCallback=t),this},n.prototype.callOnContextMenu=function(){if(this.isFunction(this._onContextMenuCallback))return this._onContextMenuCallback.call(this,this._onContextMenuData)},n.prototype.remove=function(){this._line._model.removeSource(this._line),delete this._line},inherit(o,r),o.prototype.setPoint=function(t,e,i){this._points[t]=e,this.normalizePoints()},o.prototype.addPoint=function(t,e){return this._points.push(t),this._lastPoint=null,this.normalizePoints(),this.createServerPoints(),!0},o.skipMagnetting=!0,o.prototype.title=function(){return"Position"},o.prototype.name=function(){return"Position"},o.prototype.createPriceAxisView=function(t){return this._priceAxisView=new a(this,{pointIndex:t,backgroundProperty:this.properties().lineColor}),this._priceAxisView},
o.prototype.paneViews=function(e){return TradingView.printing&&!t.enabled("snapshot_trading_drawings")?null:this._model.properties().tradingProperties.showPositions.value()?s.prototype.paneViews.call(this,e):null},o.prototype.priceAxisViews=function(e,i){return TradingView.printing&&!t.enabled("snapshot_trading_drawings")?null:this._model.properties().tradingProperties.showPositions.value()?s.prototype.priceAxisViews.call(this,e,i):null},o.prototype.hasContextMenu=function(){return!0},o.prototype.contextMenuItems=function(){return this._adapter.callOnContextMenu()},o.prototype.formatter=function(){return this._formatter},e.LineToolPosition=o}).call(e,i(4))},function(t,e,i){"use strict";var n,o,r;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"PositionAveragePriceAxisView",function(){return r}),n=i(0),o=i(202),r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.c(e,t),e.prototype._formatPrice=function(t,e){return this._source.formatter().format(t)},e}(o.LineToolPriceAxisView)},function(t,e,i){"use strict";(function(t){function n(t){this._line=t,this._data={bodyText:"order",quantityText:"0"},this._editable=!0}function o(t,e){this._adapter=new n(this),this._constructor="LineToolOrder";var o=e||new c("linetoolorder");r.call(this,t,o),i.e(0).then(function(t){var e=i(935).OrderPaneView;this._setPaneViews([new e(this,this._model)])}.bind(this).bind(null,i)).catch(i.oe)}var r=i(206),s=i(202).LineToolPriceAxisView,a=i(156),l=i(1).LineDataSource,c=i(3).DefaultProperty;n.prototype.setEditable=function(t){return this._editable=t,this},n.prototype.getPrice=function(){return this._line.points().length>0?this._line.points()[0].price:this._line._timePoint.length>0?this._line._timePoint[0].price:void 0},n.prototype.setPrice=function(t){if(this._line.points().length>0){var e=this._line.points()[0];e.price=t,this._line._points[0]=e,this._line.normalizePoints(),this._line.updateAllViewsAndRedraw()}return this._line._timePoint.length>0&&(this._line._timePoint[0].price=t),this},n.prototype.getText=function(){return this._data.bodyText},n.prototype.setText=function(t){return this._data.bodyText=t||"",this._line.updateAllViewsAndRedraw(),this},n.prototype.setTooltip=function(t){return null==t?t="":t+="",this._line.properties().tooltip.setValue(t),this},n.prototype.getTooltip=function(){return this._line.properties().tooltip.value()},n.prototype.getQuantity=function(){return this._data.quantityText},n.prototype.setQuantity=function(t){return this._data.quantityText=t||"",this._line.updateAllViewsAndRedraw(),this},n.prototype.getExtendLeft=function(){var t=this._line.properties().extendLeft.value();return"inherit"===t?this._line._model.properties().tradingProperties.extendLeft.value():t},n.prototype.setExtendLeft=function(t){return this._line.properties().extendLeft.setValue(t),this},n.prototype.getLineLength=function(){var t=this._line.properties().lineLength.value();return"inherit"===t?this._line._model.properties().tradingProperties.lineLength.value():t},n.prototype.setLineLength=function(t){
return this._line.properties().lineLength.setValue(Math.max(0,Math.min(t,100))),this},n.prototype.getLineColor=function(){return a.getColorFromProperties(this._line.properties().lineColor,this._line.properties().lineTransparency)},n.prototype.setLineColor=function(t){return a.setColorToProperties(t,this._line.properties().lineColor,this._line.properties().lineTransparency),this},n.prototype.getLineStyle=function(){var t=this._line.properties().lineStyle.value();return"inherit"===t?this._line._model.properties().tradingProperties.lineStyle.value():t},n.prototype.setLineStyle=function(t){return this._line.properties().lineStyle.setValue(t),this},n.prototype.getLineWidth=function(){var t=this._line.properties().lineWidth.value();return"inherit"===t?this._line._model.properties().tradingProperties.lineWidth.value():t},n.prototype.setLineWidth=function(t){return this._line.properties().lineWidth.setValue(t),this},n.prototype.getBodyBorderColor=function(){return a.getColorFromProperties(this._line.properties().bodyBorderColor,this._line.properties().bodyBorderTransparency)},n.prototype.setBodyBorderColor=function(t){return a.setColorToProperties(t,this._line.properties().bodyBorderColor,this._line.properties().bodyBorderTransparency),this},n.prototype.getBodyBackgroundColor=function(){return a.getColorFromProperties(this._line.properties().bodyBackgroundColor,this._line.properties().bodyBackgroundTransparency)},n.prototype.setBodyBackgroundColor=function(t){return a.setColorToProperties(t,this._line.properties().bodyBackgroundColor,this._line.properties().bodyBackgroundTransparency),this},n.prototype.getBodyTextColor=function(){return a.getColorFromProperties(this._line.properties().bodyTextColor,this._line.properties().bodyTextTransparency)},n.prototype.setBodyTextColor=function(t){return a.setColorToProperties(t,this._line.properties().bodyTextColor,this._line.properties().bodyTextTransparency),this},n.prototype.getBodyFont=function(){return a.getFontFromProperties(this._line.properties().bodyFontFamily,this._line.properties().bodyFontSize,this._line.properties().bodyFontBold,this._line.properties().bodyFontItalic)},n.prototype.setBodyFont=function(t){return a.setFontToProperties(t,this._line.properties().bodyFontFamily,this._line.properties().bodyFontSize,this._line.properties().bodyFontBold,this._line.properties().bodyFontItalic),this},n.prototype.getQuantityBorderColor=function(){return a.getColorFromProperties(this._line.properties().quantityBorderColor,this._line.properties().quantityBorderTransparency)},n.prototype.setQuantityBorderColor=function(t){return a.setColorToProperties(t,this._line.properties().quantityBorderColor,this._line.properties().quantityBorderTransparency),this},n.prototype.getQuantityBackgroundColor=function(){return a.getColorFromProperties(this._line.properties().quantityBackgroundColor,this._line.properties().quantityBackgroundTransparency)},n.prototype.setQuantityBackgroundColor=function(t){
return a.setColorToProperties(t,this._line.properties().quantityBackgroundColor,this._line.properties().quantityBackgroundTransparency),this},n.prototype.getQuantityTextColor=function(){return a.getColorFromProperties(this._line.properties().quantityTextColor,this._line.properties().quantityTextTransparency)},n.prototype.setQuantityTextColor=function(t){return a.setColorToProperties(t,this._line.properties().quantityTextColor,this._line.properties().quantityTextTransparency),this},n.prototype.getQuantityFont=function(){return a.getFontFromProperties(this._line.properties().quantityFontFamily,this._line.properties().quantityFontSize,this._line.properties().quantityFontBold,this._line.properties().quantityFontItalic)},n.prototype.setQuantityFont=function(t){return a.setFontToProperties(t,this._line.properties().quantityFontFamily,this._line.properties().quantityFontSize,this._line.properties().quantityFontBold,this._line.properties().quantityFontItalic),this},n.prototype.getCancelButtonBorderColor=function(){return a.getColorFromProperties(this._line.properties().cancelButtonBorderColor,this._line.properties().cancelButtonBorderTransparency)},n.prototype.setCancelButtonBorderColor=function(t){return a.setColorToProperties(t,this._line.properties().cancelButtonBorderColor,this._line.properties().cancelButtonBorderTransparency),this},n.prototype.getCancelButtonBackgroundColor=function(){return a.getColorFromProperties(this._line.properties().cancelButtonBackgroundColor,this._line.properties().cancelButtonBackgroundTransparency)},n.prototype.setCancelButtonBackgroundColor=function(t){return a.setColorToProperties(t,this._line.properties().cancelButtonBackgroundColor,this._line.properties().cancelButtonBackgroundTransparency),this},n.prototype.getCancelButtonIconColor=function(){return a.getColorFromProperties(this._line.properties().cancelButtonIconColor,this._line.properties().cancelButtonIconTransparency)},n.prototype.setCancelButtonIconColor=function(t){return a.setColorToProperties(t,this._line.properties().cancelButtonIconColor,this._line.properties().cancelButtonIconTransparency),this},n.prototype.block=function(){this._blocked=!0,this._line.updateAllViewsAndRedraw()},n.prototype.unblock=function(){this._blocked=!1,this._line.updateAllViewsAndRedraw()},n.prototype.isFunction=function(t){return"function"==typeof t},n.prototype.onCancel=function(t,e){return e?this.isFunction(e)&&(this._onCancelData=t,this._onCancelCallback=e):this.isFunction(t)&&(this._onCancelCallback=t),this},n.prototype.callOnCancel=function(){this.isFunction(this._onCancelCallback)&&this._onCancelCallback.call(this,this._onCancelData)},n.prototype.isOnCancelCallbackPresent=function(){return this.isFunction(this._onCancelCallback)},n.prototype.onModify=function(t,e){return e?this.isFunction(e)&&(this._onModifyData=t,this._onModifyCallback=e):this.isFunction(t)&&(this._onModifyCallback=t),this},n.prototype.callOnModify=function(){this.isFunction(this._onModifyCallback)&&this._onModifyCallback.call(this,this._onModifyData)},
n.prototype.onMove=function(t,e){return e?this.isFunction(e)&&(this._onMoveData=t,this._onMoveCallback=e):this.isFunction(t)&&(this._onMoveCallback=t),this},n.prototype.callOnMove=function(){this.isFunction(this._onMoveCallback)&&this._onMoveCallback.call(this,this._onMoveData)},n.prototype.onContextMenu=function(t,e){return e?this.isFunction(e)&&(this._onContextMenuData=t,this._onContextMenuCallback=e):this.isFunction(t)&&(this._onContextMenuCallback=t),this},n.prototype.callOnContextMenu=function(){if(this.isFunction(this._onContextMenuCallback))return this._onContextMenuCallback.call(this,this._onContextMenuData)},n.prototype.remove=function(){this._line._model.removeSource(this._line),delete this._line},n.prototype.shouldShowModifyOrder=function(){return!!this._onModifyCallback},inherit(o,r),o.skipMagnetting=!0,o.prototype.setPoint=function(t,e,i){this._points[t]=e,this.normalizePoints()},o.prototype.addPoint=function(t,e){return this._points.push(t),this._lastPoint=null,this.normalizePoints(),this.createServerPoints(),!0},o.prototype.title=function(){return"Order"},o.prototype.name=function(){return"Order"},o.prototype.endMoving=function(t){var e=this._startMovingPoint&&this._currentMovingPoint&&this._startMovingPoint.price!==this._currentMovingPoint.price;r.prototype.endMoving.call(this),!t&&e&&this._adapter.callOnMove()},o.prototype.createPriceAxisView=function(t){return this._priceAxisView=new s(this,{pointIndex:t,backgroundProperty:this.properties().lineColor}),this._priceAxisView},o.prototype.paneViews=function(e){return TradingView.printing&&!t.enabled("snapshot_trading_drawings")?null:this._model.properties().tradingProperties.showOrders.value()?l.prototype.paneViews.call(this,e):null},o.prototype.priceAxisViews=function(e,i){return TradingView.printing&&!t.enabled("snapshot_trading_drawings")?null:this._model.properties().tradingProperties.showOrders.value()?l.prototype.priceAxisViews.call(this,e,i):null},o.prototype.hasContextMenu=function(){return!0},o.prototype.contextMenuItems=function(){return this._adapter.callOnContextMenu()},o.prototype.onlyYMoving=function(){return!0},o.prototype.userEditEnabled=function(){return this._adapter.shouldShowModifyOrder()},e.LineToolOrder=o}).call(e,i(4))},function(t,e,i){"use strict";(function(t){function n(e,i,n){n=n||{},n=Object.assign({},O,n);var o=this;f.call(this),this._properties=i,this._model=e,this._dataWindowView=new h(this,e),this._priceAxisView=new c(this),this._menuView=n.additionalMenuEnabled?new L(this,e):null,this._startMeasurePriceAxisView=new c(this),this._endMeasurePriceAxisView=new c(this),this._timeAxisView=new u(this,e),this._startMeasureTimeAxisView=new u(this,e,"measureStartX"),this._endMeasureTimeAxisView=new u(this,e,"measureEndX"),this.visible=!0,e.readOnly()?this.areLinesVisible=!0:m.cursorTool.subscribe(function(t){o.areLinesVisible="arrow"!==t},{callWithLast:!0}),this._movedDelegate=new t,this._subscribed=!1,this._linesShouldBeHidden=this._model.readOnly(),this._selectBarMode=new I(!1),this._barSelectedDelegate=new t,
this._mouseClickBoundedHandler=this._mouseClickHandler.bind(this),this._isOnHoveredChartWidget=!1}function o(t,e){this._source=t,this._pane=e,this._pipFormatter=null,this._lastSymbolInfo=null,this._horzTrenRenderer=new d,this._vertTrenRenderer=new d,this._bgRenderer=new _,this._labelRenderer=new p({})}function r(t,e,i,n){this.source=t,this.pane=e,this._horzVisible=i,this._mouseClickHandler=n}function s(t,e,i){this.source=t,this.pane=e,this._axis=i||"x"}var a=i(7).Point,l=i(86).isLineToolName,c=i(720).CrossHairPriceAxisView,h=i(721),u=i(722),d=i(217).TrendLineRenderer,p=i(218).TextRenderer,_=i(361).RectangleRenderer,f=i(34).DataSource,m=i(38),g=i(723).PaneRendererCrossHair,y=i(724).PaneRendererCrossHairLock,v=i(66).CompositeRenderer,b=i(17),S=i(58).PercentageFormatter,w=i(375).TimeSpanFormatter,P=i(371).PipFormatter,T=i(35),C=i(116).LineEnd,x=i(83),k=i(12).isNaN,L=i(725),I=i(15),A=i(36),E=A.forceLTRStr,M=A.startWithLTR,O={additionalMenuEnabled:!1};inherit(n,f),n.prototype.index=0,n.prototype.price=NaN,n.prototype.pane=null,n.prototype.color="white",n.prototype.style="",n.prototype.customization={disableSelection:!0},n.prototype.properties=function(){return this._properties},n.prototype.moved=function(){return this._movedDelegate},n.prototype.saveOriginCoord=function(t,e){this._originX=t,this._originY=e},n.prototype.clearOriginCoord=function(){this._originX=NaN,this._originY=NaN},n.prototype.setPosition=function(t,e,i){this._subscribed||(this._model.mainSeries().onRestarted().subscribe(this,n.prototype.clearMeasure),this._subscribed=!0),this.setLockedPosition(i),this.visible=!0,this._tryToUpdateViews(t,e,i)},n.prototype.update=function(){var t,e,i,n,o,r;this.visible&&(t=this._priceScaleByPane(this.pane),e=this._originX||this.x,i=this._originY||this.y,n=this._model.timeScale().coordinateToIndex(e),o=NaN,null!==t&&(r=this.pane.mainDataSource().firstValue(),o=t.coordinateToPrice(i,r)),this._tryToUpdateViews(n,o,this.pane))},n.prototype._priceScaleByPane=function(t){return t&&!t.defaultPriceScale().isEmpty()?t.defaultPriceScale():null},n.prototype._tryToUpdateViews=function(t,e,i){this._tryToUpdateData(t,e,i)&&(this.updateAllViews(),this._movedDelegate.fire({time:this._model.timeScale().points().roughTime(this.index),price:this.price}))},n.prototype._tryToUpdateData=function(t,e,i){var n,o=this.x,r=this.y,s=this.price,a=this.index,l=this.pane,c=this._priceScaleByPane(i);return this.index=t,this.x=k(t)?NaN:this._model.timeScale().indexToCoordinate(t),null!==c?(this.pane=i,this.price=e,n=i.mainDataSource().firstValue(),this.y=c.priceToCoordinate(e,n)):(this.pane=null,this.price=NaN,this.y=NaN),o!==this.x||r!==this.y||a!==this.index||s!==this.price||l!==this.pane},n.prototype.setLockedPosition=function(t){delete this.lockedIndex,delete this.lockedX,t!==this._measurePane&&m.lockTimeAxis().value()&&(this.lockedIndex=this._model.timeScale().points().roughIndex(m.lockTimeAxisTime.value()),this.lockedX=this._model.timeScale().indexToCoordinate(this.lockedIndex))},n.prototype.clearPosition=function(){this.visible=!1
;var t=this._model.mainSeries().bars().lastIndex();this.index=null!==t?t:NaN,this.price=NaN,this.x=NaN,this.y=NaN,this.pane=null,this.clearOriginCoord()},n.prototype.measureStartY=function(){var t=this._startMeasurePoint.price,e=this._measurePane,i=e.mainDataSource().firstValue();return e.defaultPriceScale().priceToCoordinate(t,i)},n.prototype.measureStartX=function(){return this._model.timeScale().indexToCoordinate(this._startMeasurePoint.index)},n.prototype.measureEndY=function(){var t=this._endMeasurePoint.price,e=this._measurePane,i=e.mainDataSource().firstValue();return e.defaultPriceScale().priceToCoordinate(t,i)},n.prototype.measureEndX=function(){return this._model.timeScale().indexToCoordinate(this._endMeasurePoint.index)},n.prototype.paneViews=function(t){var e,i,n=this._selectBarMode.value()&&this._isOnHoveredChartWidget,a=t===this.pane&&!n,l=[new r(this,t,a,this._mouseClickBoundedHandler)];return t===this._measurePane&&(this._measurePaneView||(this._measurePaneView=new o(this,t)),this._measurePaneView.update(),l.push(this._measurePaneView)),e=t===this.pane,i=!TradingView.isMobile.any()||window.screen.width>=500,null!==this._menuView&&e&&this._isOnHoveredChartWidget&&!n&&i&&l.push(this._menuView),m.lockTimeAxis().value()&&l.push(this._timeLockPaneView=this._timeLockPaneView||new s(this,t)),l},n.prototype.dataWindowView=function(){return this._dataWindowView},n.prototype.priceAxisViews=function(t,e){var i,n;return this._linesShouldBeHidden||!this.visible||this.pane!==t||e!==t.defaultPriceScale()?null:(i=[],n=this._selectBarMode.value()&&this._isOnHoveredChartWidget,n||i.push(this._priceAxisView),this._startMeasurePoint&&i.push(this._startMeasurePriceAxisView),this._endMeasurePoint&&i.push(this._endMeasurePriceAxisView),i)},n.prototype.timeAxisView=function(){if(this._linesShouldBeHidden||!this.visible&&!m.lockTimeAxis().value())return null;var t=[this._timeAxisView];return this._startMeasurePoint&&t.push(this._startMeasureTimeAxisView),this._endMeasurePoint&&t.push(this._endMeasureTimeAxisView),t},n.prototype.updateAllViews=function(){this._priceAxisView.update(),this._startMeasurePoint&&(this._startMeasurePriceAxisView.update(),this._startMeasureTimeAxisView.update()),this._endMeasurePoint&&(this._endMeasurePriceAxisView.update(),this._endMeasureTimeAxisView.update()),this._timeAxisView.update()},n.prototype.startMeasurePoint=function(){return this._startMeasurePoint},n.prototype.startMeasuring=function(t,e){this._startMeasurePoint=t,this._measurePane=e},n.prototype.finishMeasure=function(t){this._endMeasurePoint=t},n.prototype.endMeasurePoint=function(){return this._endMeasurePoint},n.prototype.clearMeasure=function(t){delete this._measurePane,delete this._startMeasurePoint,delete this._endMeasurePoint,delete this._lastValidMeasurePoint,this._model.invalidate(new b(b.LIGHT_UPDATE))},n.prototype.measurePoints=function(){this.updateAllViews();var t=[this._startMeasurePoint];return this._endMeasurePoint?t.push(this._endMeasurePoint):(this._measurePane===this.pane&&(this._lastValidMeasurePoint={x:this.x,
y:this.y,rawPrice:this.price,price:this.price,index:this.index}),t.push(this._lastValidMeasurePoint)),t},n.prototype.currentPoint=function(){return new a(this.x,this.y)},n.prototype.appliedIndex=function(){return isFinite(this.lockedIndex)&&this.lockedIndex||this.index},n.prototype.appliedX=function(){return isFinite(this.lockedX)&&this.lockedX||this.x},n.prototype.selectBarMode=function(){return this._selectBarMode},n.prototype.toggleSelectBarMode=function(){this._setSelectBarModeState(!this._selectBarMode.value())},n.prototype.onBarSelected=function(){return this._barSelectedDelegate},n.prototype._setSelectBarModeState=function(t){this._selectBarMode.setValue(t),this._model.invalidate(new b(b.LIGHT_UPDATE))},n.prototype._mouseClickHandler=function(){var t;this._model.mainSeries().bars().contains(this.index)&&null!==(t=this._model.timeScale().indexToTimePoint(this.index))&&(this._setSelectBarModeState(!1),this._barSelectedDelegate.fire(t))},n.prototype.handleContextMenuEvent=function(){this._selectBarMode.value()&&this._setSelectBarModeState(!1)},n.prototype.setOnHoveredChartWidget=function(t){this._isOnHoveredChartWidget=t},n.prototype.isOnHoveredChartWidget=function(){return this._isOnHoveredChartWidget},n.prototype.setLinesShouldBeHidden=function(t){this._linesShouldBeHidden=t},n.prototype.linesShouldBeHidden=function(){return this._linesShouldBeHidden},o.prototype.update=function(){var t,e,i,n,o,r,s,l,c,h,u,d,p,_,f,m,g,y,v,b,T,C,x;if(this._source._endMeasurePoint)t=this._source._endMeasurePoint.price,e=this._source._endMeasurePoint.index;else if(this._source._measurePane===this._source.pane)t=this._source.price,e=this._source.index;else{if(!this._source._lastValidMeasurePoint)return;t=this._source._lastValidMeasurePoint.rawPrice,e=this._source._lastValidMeasurePoint.index}i=t-this._source._startMeasurePoint.price,n=e-this._source._startMeasurePoint.index,o=E(n),r=this._source._startMeasurePoint.price,s=this._source._measurePane.mainDataSource(),l=s.formatter().format(i),this._source._startMeasurePoint.price&&(c=i/this._source._startMeasurePoint.price,l+=" ("+(new S).format(100*c)+")"),h=E(l),this._label=h+"\n"+$.t("{0} bars").format(o),r=this._source._model._magnet.align(r,this._source._startMeasurePoint.index,this._source._measurePane),t=this._source._model._magnet.align(t,e,this._source._measurePane),u=s.firstValue(),d=this._source._model.timeScale().indexToCoordinate(this._source._startMeasurePoint.index),p=this._source._model.timeScale().indexToCoordinate(e),_=this._source._measurePane.defaultPriceScale().priceToCoordinate(r,u),f=this._source._measurePane.defaultPriceScale().priceToCoordinate(t,u),this._p1=new a(d,_),this._p2=new a(p,f),m=this._source._model.timeScale().indexToUserTime(this._source._startMeasurePoint.index),g=this._source._model.timeScale().indexToUserTime(e),y=this._pane.model().mainSeries().symbolInfo(),y&&y!==this._lastSymbolInfo&&(this._pipFormatter=new P(y.pricescale,y.minmov,y.type,y.minmove2),this._lastSymbolInfo=y),m&&g&&(v=(g.valueOf()-m.valueOf())/1e3,
b=this._pipFormatter?this._pipFormatter.format(i):"",T=b?" , "+b:b,C=(new w).format(v),x=M(C),this._label=E(h+T)+"\n"+$.t("{0} bars").format(o)+", "+x)},o.prototype.renderer=function(){var t,e,i,n,o,r,s,l,c,h,u,d,p=new v,_={};return _.points=[this._p1,this._p2],_.width=this._source._model.timeScale().width(),_.height=this._source._measurePane.defaultPriceScale().height(),_.color="#D3E7FF",_.linewidth=0,_.fillBackground=!0,_.transparency=60,_.backcolor="#BADAFF",this._bgRenderer.setData(_),p.append(this._bgRenderer),t=this._p1.add(this._p2).scaled(.5),e=new a(this._p1.x,t.y),i=new a(this._p2.x,t.y),n={points:[e,i],width:_.width,height:_.height,color:"#363c4e",linewidth:1,linestyle:CanvasEx.LINESTYLE_DASHED,extendleft:!1,extendright:!1,leftend:C.Normal,rightend:C.Arrow},this._horzTrenRenderer.setData(n),p.append(this._horzTrenRenderer),e=new a(t.x,this._p1.y),i=new a(t.x,this._p2.y),n={points:[e,i],width:_.width,height:_.height,color:"#363c4e",linewidth:1,linestyle:CanvasEx.LINESTYLE_DASHED,extendleft:!1,extendright:!1,leftend:C.Normal,rightend:C.Arrow},this._vertTrenRenderer.setData(n),p.append(this._vertTrenRenderer),o={x:0,y:10},r=function(t,e){return{points:[e],text:t,color:"#FFFFFF",horzAlign:"left",vertAlign:"middle",font:"Arial",offsetX:o.x,offsetY:o.y,bold:!1,italic:!1,fontsize:12,padding:5,highlightBorder:!1,backgroundColor:T.generateColor("#5b85bf",10),backgroundTransparency:10,backgroundVertInflate:5,backgroundHorzInflate:5,backgroundRoundRect:4}},s=.5*(this._p1.x+this._p2.x),l=this._p2.y,c=new a(s,l),h=r(this._label,c),this._labelRenderer.setData(h),u=this._labelRenderer.measure(),d={x:s+h.backgroundHorzInflate+u.textBgPadding-u.width/u.textBgPadding,y:this._p1.y>this._p2.y?c.y-u.height-2*u.textBgPadding-o.y>0?l-u.height-o.y+u.textBgPadding:o.y-2*u.textBgPadding:c.y+u.height+u.textBgPadding+o.y>_.height?_.height-u.height-o.y:l+u.textBgPadding},this._labelRenderer.setPoints([new a(d.x,d.y)]),p.append(this._labelRenderer),p},r.prototype.update=function(){},r.prototype.renderer=function(){var t,e,i,n,o,r,s={},a=this.source.visible&&this.source.areLinesVisible,c=m.lockTimeAxis().value();return s.horzLinesVisible=a&&this._horzVisible,s.vertLinesVisible=a||c,t=this.pane._model.readOnly(),e=t?defaults("chartproperties.paneProperties.crossHairProperties"):null,i=this.source.selectBarMode().value()&&this.source.isOnHoveredChartWidget(),n=TradingView.isMobile.any()&&l(this.source._model.currentTool())&&!i,o=n?"#a000a0":t?e.color:this.pane._model.properties().paneProperties.crossHairProperties.color.value(),r=t?e.transparency:this.pane._model.properties().paneProperties.crossHairProperties.transparency.value(),!n&&r>0&&(o=T.generateColor(o,r)),s.color=o,s.lineWidth=t?e.width:this.pane._model.properties().paneProperties.crossHairProperties.width.value(),s.lineStyle=t?e.style:this.pane._model.properties().paneProperties.crossHairProperties.style.value(),s.drawCenter=n&&this.pane===this.source.pane,s.w=this.pane.width(),s.h=this.pane.height(),s.x=isFinite(this.source.lockedX)&&this.source.lockedX||this.source.x,
s.y=this.source.y,i&&(s.x=Math.max(0,this.source.x-1),s.vertLinesVisible=!0,s.lineStyle=x.LINESTYLE_SOLID,s.mouseClickHandler=this._mouseClickHandler,s.lineWidth=2,s.color="#ff0000"),new g(s)},s.prototype.update=function(){},s.prototype.renderer=function(){var t,e,i,n,o=this.source.visible&&this.source.areLinesVisible,r=m.lockTimeAxis().value(),s=o&&this._horzVisible,a=o||r;if(("y"!==this._axis||s)&&a)return t=9,e=11,i="y"===this._axis?this.pane.width()-t/2:this.source.lockedX+1,n="y"===this._axis?this.source.y:this.pane.height()-e/2-1,new y({x:i,y:n,width:t,height:e,bodyHeight:7})},e.CrossHair=n}).call(e,i(8))},function(t,e,i){"use strict";var n,o,r;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"CrossHairPriceAxisView",function(){return r}),n=i(0),o=i(54),r=function(t){function e(e){var i=t.call(this)||this;return i._background="#4c525e",i._source=e,i}return n.c(e,t),e.prototype._updateRendererData=function(t){var e,i,n,o;t.visible=!1,null!==(e=this._source.pane)&&(i=e.defaultPriceScale(),n=e.mainDataSource(),o=null!==n?n.firstValue():null,this._source.visible&&!i.isEmpty()&&null!=o&&(t.background=this._background,t.color=this.generateTextColor(this._background),t.coordinate=this._source.y,t.text=i.formatPrice(this._source.price,o),t.visible=!0))},e}(o.a)},function(t,e,i){"use strict";function n(t,e){r.call(this),this._header=null,this._crossHair=t,this._model=e,this._items.push(new s("Date","")),this._items.push(new s("Time","")),this._items.push(new s("Price","")),this._defaultFormatter=new a(100)}var o=i(137),r=o.DataWindowView,s=o.DataWindowItem,a=i(13).PriceFormatter,l=i(238).DateFormatter,c=i(155).TimeFormatter;inherit(n,r),n.prototype.update=function(){var t,e,i,n,o,r,s=this._model.mainSeries().isDWM();this._items[1].setVisible(!s),this._items[0].setValue("n/a"),this._items[1].setValue("n/a"),this._items[2].setValue("n/a"),this._model.timeScale().isEmpty()||(t=this._crossHair.appliedIndex(),e=this._model.timeScale().indexToUserTime(t),null===e?(this._items[0].setValue("n/a"),s||this._items[1].setValue("n/a")):(this._items[0].setValue((new l).format(e)),s||this._items[1].setValue((new c).format(e))),(i=this._crossHair.pane)&&(n=i.defaultPriceScale(),n.isEmpty()||(o=n.mainSource(),r=o?o.formatter():this._defaultFormatter,this._items[2].setValue(r.format(this._crossHair.price)))))},t.exports=n},function(t,e,i){"use strict";function n(t,e){o.call(this),this._invalidated=!0,this._crosshair=t,this._model=e,this._renderer=new r,this._rendererData={visible:!1,background:"#4c525e",color:"white",text:"",width:0}}var o=i(203).TimeAxisView,r=i(204).TimeAxisViewRenderer,s=i(205).AbbreviatedDateTimeFormatter;inherit(n,o),n.prototype.update=function(){this._invalidated=!0},n.prototype._updateImpl=function(){var t,e,i=this._rendererData;i.visible=!1,t=this._model.timeScale(),t.isEmpty()||(i.width=t.width(),i.coordinate=this._crosshair.appliedX(),(e=t.indexToUserTime(this._crosshair.appliedIndex()))&&(i.text=new s(this._model.mainSeries().isDWM()).format(e),i.visible=!0))},n.prototype.renderer=function(){
return this._invalidated&&(this._updateImpl(),this._invalidated=!1),this._renderer.setData(this._rendererData),this._renderer},t.exports=n},function(t,e,i){"use strict";function n(t){this.data=t}var o=i(10).HitTestResult;n.prototype.draw=function(t){var e,i,n,o,r,s,a,l;this.data&&(e=this.data.vertLinesVisible,i=this.data.horzLinesVisible,(e||i)&&(t.lineStyle=this.data.lineStyle,t.lineWidth=this.data.lineWidth,t.strokeStyle=this.data.color,t.fillStyle=this.data.color,n=t.lineStyle===CanvasEx.LINESTYLE_DASHED||t.lineStyle===CanvasEx.LINESTYLE_DOTTED||t.lineStyle===CanvasEx.LINESTYLE_SPARSE_DOTTED,o=this.data.lineWidth%2==0?.5:0,r=this.data.x+1+o,s=this.data.y+o,a=this.data.w,l=this.data.h,e&&r>=0&&(n?CanvasEx.drawDashedLineVertical(t,r,0,l):CanvasEx.drawSolidLine(t,r,0,r,l)),i&&s>=0&&(n?CanvasEx.drawDashedLineHorizontal(t,0,s,a):CanvasEx.drawSolidLine(t,0,s,a,s)),this.data.drawCenter&&(t.beginPath(),t.arc(r,s,3,0,2*Math.PI,!0),t.fillStyle=this.data.color,t.fill())))},n.prototype.hitTest=function(t){return this.data.mouseClickHandler?new o(o.CUSTOM,{mouseClickHandler:this.data.mouseClickHandler}):null},e.PaneRendererCrossHair=TradingView.PaneRendererCrossHair=n},function(t,e,i){"use strict";function n(t){this._data=t}n.prototype._drawShackle=function(t){var e=this._data.width-3,i=e/2,n=this._data.height-this._data.bodyHeight;t.moveTo(1.5,i),t.arc(this._data.width/2,i,i,Math.PI,2*Math.PI),n>i&&(t.moveTo(1.5,i),t.lineTo(1.5,n),t.moveTo(this._data.width-1.5,i),t.lineTo(this._data.width-1.5,n))},n.prototype.draw=function(t){var e,i,n,o;t.translate(this._data.x-this._data.width/2,this._data.y-this._data.height/2),e="rgba(153,153,153,.3)",i="rgba(153,153,153,.7)",n="#777",o="rgba(255,255,255,.7)",t.strokeStyle=e,t.lineWidth=2,t.beginPath(),this._drawShackle(t),t.stroke(),t.closePath(),t.strokeStyle=i,t.lineWidth=1,t.beginPath(),t.rect(0,this._data.height-this._data.bodyHeight+.5,this._data.width,this._data.bodyHeight),t.closePath(),t.stroke(),t.translate(0,-1),t.strokeStyle=n,t.beginPath(),this._drawShackle(t),t.stroke(),t.closePath(),t.fillStyle=o,t.beginPath(),t.rect(1,this._data.height-this._data.bodyHeight+1.5,this._data.width-2,this._data.bodyHeight-2),t.fill(),t.beginPath(),t.rect(.5,this._data.height-this._data.bodyHeight+1,this._data.width-1,this._data.bodyHeight-1),t.stroke(),t.closePath(),t.fillStyle=n,t.fillRect(this._data.width/2-.5,this._data.height-this._data.bodyHeight/2,1,2)},e.PaneRendererCrossHairLock=TradingView.PaneRendererCrossHairLock=n},function(t,e,i){"use strict";(function(n){function o(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s,a,l,c,h,u,d,p,_,f,m,g,y,v;Object.defineProperty(e,"__esModule",{value:!0}),s=Object.assign||function(t){var e,i,n;for(e=1;e<arguments.length;e++){i=arguments[e];for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},a=function(){function t(t,e){var i,n;for(i=0;i<e.length;i++)n=e[i],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),
Object.defineProperty(t,n.key,n)}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=i(7),c=i(57),h=i(10),u=i(82),d=i(337),p=i(84),_=o(p),f=i(28),m=i(80),g=i(36),y=function(){function t(e){r(this,t),Object.assign(this,e)}return a(t,[{key:"hitTest",value:function(t){if(this.left&&(0,c.pointInRectangle)(t,new l.Point(this.xl,this.y),new l.Point(this.xl+this.containerWidth,this.y+this.containerHeight))||this.right&&(0,c.pointInRectangle)(t,new l.Point(this.xr,this.y),new l.Point(this.xr+this.containerWidth,this.y+this.containerHeight)))return new h.HitTestResult(h.HitTestResult.CUSTOM,{mouseDownHandler:this.mouseDownHandler.bind(this,t),tooltip:this.tooltip})}},{key:"drawPlus",value:function(t,e,i){var n,o,r,s,a,l=Math.floor(e)-.5,c=Math.floor(this.y-.5)+.5,h=l+Math.floor(this.containerWidth),u=c+Math.ceil(this.containerHeight+1)-1;(h-l)%2==0&&(i?h-=1:l+=1),t.fillStyle=this.background,t.fillRect(l,c,h-l,u-c),n=Math.floor(l+this.plusPadding),o=Math.ceil(h-this.plusPadding),r=Math.floor((n+o)/2),s=Math.floor(this.y+this.plusPadding),a=Math.ceil(this.y+this.containerHeight-this.plusPadding),t.strokeStyle=this.color,t.beginPath(),t.moveTo(n+.5,Math.floor(this.crossHeirY)),t.lineTo(o-.5,Math.floor(this.crossHeirY)),t.moveTo(r,s+.5),t.lineTo(r,a-.5),t.stroke()}},{key:"draw",value:function(t){this.right&&this.drawPlus(t,this.xr,!1),this.left&&this.drawPlus(t,this.xl,!0)}}]),t}(),v=function(){function t(e,i){r(this,t),this._ch=e,this._model=i,this._data={background:"#4c525e",color:"white"},this._currMainDataSourceId=null,this._hasActions=!1,this._tooltipText=null,this._gaOrigin="CH menu"}return a(t,[{key:"update",value:function(){var t,e,i,n,o=this._ch.y,r=this._model.properties().scalesProperties.fontSize.value(),a=this._model.timeScale().width(),l=Math.ceil(r/5),c=r+2*Math.floor(r/3.5),h=c,u=o-c/2,d=a-h,p=this._ch.pane;p&&p.mainDataSource()&&p.mainDataSource().idForAlert()!==this._currMainDataSourceId&&(this._currMainDataSourceId=p.mainDataSource().idForAlert(),this._hasActions=this._hasAvailableActions(p.mainDataSource()),this._tooltipText=this._getTooltipText(p.mainDataSource())),t=p&&null!==p.m_leftPriceScale.mainSource()&&this._hasActions,e=p&&null!==p.m_rightPriceScale.mainSource()&&this._hasActions,i=a-h/2,n=this._tooltipText?{text:this._tooltipText,rect:{x:i,y:u,w:0,h:0}}:null,this._data=s({},this._data,{left:t,right:e,xl:0,xr:d,y:u,containerWidth:h,containerHeight:c,crossHeirY:o,plusPadding:l,mouseDownHandler:this._handleMouseDown.bind(this),tooltip:n})}},{key:"renderer",value:function(){return this.update(),new y(this._data)}},{key:"_hasAvailableActions",value:function(t){return this._canCreateAlert(t)||this._canTrade(t)}},{key:"_getTooltipText",value:function(t){return this._canCreateAlert(t)&&!this._canTrade(t)?$.t("Add Alert"):null}},{key:"_canCreateAlert",value:function(t){return!1}},{key:"_canTrade",value:function(t){return t===this._model.mainSeries()&&(0,m.tradingService)()}},{key:"_handleMouseDown",value:function(t,e){var i,o,r,s,a,l=this
;if(n.enabled("widget")&&n.enabled("referral_program_for_widget_owners"))return void showGoToTradingViewReferralDialog({feature:"plusMenu"});(0,f.trackEvent)(this._gaOrigin,"click"),i=e.localY,o=this._ch.pane.mainDataSource(),r=(0,m.tradingService)(),s=o===this._model.mainSeries()&&r,a=[],s&&(a.length>0&&a.push({separator:!0}),(0,d.createTradeContext)(o,i).then(function(t){return r.chartContextMenuActions(t,{onlyMainActions:!0,gaOrigin:l._gaOrigin})}).then(function(i){r.trackEvent(l._gaOrigin,"click");var n=(0,u.convertActionDescriptionsToActions)(a);n=n.concat(i),l._showContextMenu(n,t,e)}))}},{key:"_getActionAddAlert",value:function(t,e){var i=this,n=this._getValue(t,e),o=this._formatValue(n,t);return{text:$.t("Add Alert")+" ("+o+")",action:function(){i._addAlert(n,t)}}}},{key:"_getValue",value:function(t,e){var i=t.priceScale(),n=t.firstValue();return null!=n?i.coordinateToPrice(e,n):null}},{key:"_formatValue",value:function(t,e){return e.formatter().format(t)}},{key:"_addAlert",value:function(t,e){var i=this;runOrSignIn(function(){new MakeAlertDialog({series:e,value:t,conditionId:"cross",silent:!0}),(0,f.trackEvent)(i._gaOrigin,"alert")},{source:this._gaOrigin})}},{key:"_showContextMenu",value:function(t,e,i){var n=this;_.default.hideAll(),setTimeout(function(){var o={};g.IS_RTL||(o.reverse=n._data.xr&&Math.abs(e.x-n._data.xr)<n._data.containerWidth),_.default.createMenu(t,o).show(i)})}}]),t}(),e.default=v,t.exports=e.default}).call(e,i(4))},function(t,e,i){"use strict";function n(t,e){o.call(this,e),this._series=t,this._series.onRestarted().subscribe(this,n.prototype.invalidate),this._series.onSymbolResolved().subscribe(this,n.prototype.invalidate),this._series.onCompleted().subscribe(this,n.prototype.invalidate),this._series.onBoxSizeChanged().subscribe(this,n.prototype.invalidate)}var o=i(328),r=i(133).getTranslatedSymbolDescription,s=i(727),a=s.generateTitleForGui,l=s.generateSplitTitleForGui;inherit(n,o),n.prototype.invalidate=function(){delete this._text,this.update()},n.prototype.getSeriesPrecision=function(){var t=4;return this._series._symbolInfo&&this._series._symbolInfo.pricescale&&(t=Math.round(Math.log(this._series._symbolInfo.pricescale)/Math.log(10))),t},n.prototype.round=function(t){var e=this.getSeriesPrecision(),i=Math.round(t*Math.pow(10,e))/Math.pow(10,e);return i||""},n.prototype.update=function(){"_text"in this||(this._bold=!1,this._size=this._props.mainSeriesProperties.statusViewStyle.fontSize.value()+"px",this._text=a(this._getTitleGenerationOptions()))},n.prototype.getSplitTitle=function(){return l(this._getTitleGenerationOptions())},n.prototype._getTitleGenerationOptions=function(){var t=this._series.symbolInfo()||{};return{description:this._props.mainSeriesProperties.statusViewStyle.showSymbolAsDescription.value()?t.name:r({pro_name:t.pro_name,description:t.description,local_description:t.local_description,language:t.language}),exchange:this._props.mainSeriesProperties.statusViewStyle.showExchange.value()?t.exchange:null,symbol:this._series.symbol(),
interval:this._props.mainSeriesProperties.statusViewStyle.showInterval.value()?this._series.interval():null,style:this._series._properties.style.value(),inputs:this._series.getInputsProperties().state(),boxSize:this._series.data().boxSize,reversalAmount:this._series.data().reversalAmount,precision:this.getSeriesPrecision()}},t.exports=n},function(t,e,i){"use strict";function n(t){function e(t,e){return Math.round(t*Math.pow(10,e))/Math.pow(10,e)||""}var i,n,o,r=t||{},s="QUANDL"===r.exchange,c={symbolDescription:"",interval:"",exchange:"",chartStyle:"",extended:""};switch(r.description&&s?2===r.description.split("/").length?c.symbolDescription=r.description.split("/")[1]:(i=r.description.split("'").filter(function(t){return t.length}),i.forEach(function(t){t=t&&("/"===t[0]||/\d+\/\(?/.test(t))?[t]:t.split("/").filter(function(t){return t.length}),c.symbolDescription+=t[2===t.length?1:0]})):r.description?c.symbolDescription=r.description:c.symbolDescription=r.symbol,r.interval&&(c.interval=a(r.interval)),s&&r.description&&(n=/[\w_]+\/[\w_]+/.exec(r.description),n&&n[0]?c.provider=n[0].split("/")[0]:c.provider=r.description.split("/")[0]),r.exchange&&(c.exchange=r.exchange),r.style){case l.STYLE_RENKO:o=r.inputs.style+("ATR"===r.inputs.style?"("+r.inputs.atrLength+")":""),c.chartStyle=$.t("Renko")+" ["+o+", "+e(r.boxSize,4)+"]";break;case l.STYLE_PB:c.chartStyle=$.t("Line Break")+" ["+r.inputs.lb+"]";break;case l.STYLE_KAGI:o=r.inputs.style+("ATR"===r.inputs.style?"("+r.inputs.atrLength+")":""),c.chartStyle=$.t("Kagi")+" ["+o+(void 0!==r.reversalAmount?", "+e(r.reversalAmount,8):"")+"]";break;case l.STYLE_PNF:o=r.inputs.style+("ATR"===r.inputs.style?"("+r.inputs.atrLength+")":""),c.chartStyle=$.t("PnF")+" ["+o+", "+e(r.boxSize,8)+", "+r.inputs.reversalAmount+"]";break;case l.STYLE_HEIKEN_ASHI:c.chartStyle=$.t("Heikin Ashi")}return r.extended&&(c.extended=window.t("ext",{context:"shorthand_for_extended_session"})),c}function o(t){var e=n(t),i=e.symbolDescription+(e.interval?", "+e.interval:"")+s(e);return i=i.replace(/\'/g,"")}function r(t){var e,i=n(t),o=s(i),r=i.symbolDescription.replace(/\'/g,"");return o=o.replace(/\'/g,""),e=i.interval?", "+i.interval:"",[r,e,o]}function s(t){return(t.provider?", "+t.provider:"")+(t.exchange?", "+t.exchange:"")+(t.chartStyle?", "+t.chartStyle:"")+(t.extended?", "+t.extended:"")}var a=i(142).translatedIntervalString,l=i(43);t.exports={generateSplitTitleForGui:r,generateTitleForGui:o}},function(t,e,i){"use strict";var n,o,r;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"PrevCloseSeriesPriceAxisView",function(){return r}),n=i(0),o=i(54),r=function(t){function e(e,i){var n=t.call(this)||this;return n._source=e,n._model=i,n}return n.c(e,t),e.prototype._updateRendererData=function(t){var e,i,n;t.visible=!1,e=this._source,this._model.properties().scalesProperties.showSeriesPrevCloseValue.value()&&(e.isDWM()||null!==(i=e.prevClose())&&(n=this._source.properties().prevClosePriceLineColor.value(),t.background=n,t.color=this.generateTextColor(n),t.coordinate=i.coordinate,
t.text=i.text,t.visible=!0))},e}(o.a)},function(t,e,i){"use strict";var n,o,r,s,a,l;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"ProjectionSeriesPriceAxisView",function(){return l}),n=i(0),o=i(6),i.n(o),r=i(20),s=i(338),a=i(43),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.c(e,t),e.prototype.lastPrice=function(){return this._getSource().data().lastProjectionPrice},e.prototype._updateRendererData=function(t){var e,i,n,s,l,c,h,u,d,p,_,f,m,g,y,v,b,S,w,P,T;t.visible=!1,e=this._getData().model,e.properties().scalesProperties.showSeriesLastValue.value()&&(i=this._getSource(),n=i.priceScale(),s=e.timeScale(),l=this.lastPrice(),s.isEmpty()||n.isEmpty()||void 0===l||null!==(c=s.visibleBars())&&(h=c.firstBar(),u=c.lastBar(),d=i.data(),null!==(p=d.search(u,r.PlotRowSearchMode.NearestLeft))&&void 0!==(_=i.nearestIndex(h,r.PlotRowSearchMode.NearestRight))&&(f=Object(o.ensureNotNull)(d.valueAt(_))[TradingView.CLOSE_PLOT],m=t.background,g="",y=!1,v=i.properties(),b=v.style.value()===a.STYLE_HEIKEN_ASHI,b&&v.haStyle.showRealLastPrice.value()?(this._isCountdownEnabled()&&v.showCountdown.value()&&(g=this._countdownText()),S=i.lastValueData(TradingView.CLOSE_PLOT,!0),S.noData||S.color===t.background||(m=S.color),w=i.lastValueData(TradingView.CLOSE_PLOT,!1),S.noData||w.noData||(y=S.index===w.index)):(P=i.barColorer(),T=P.barStyle(p.index,!0),m=T.barColor,y=!0),t.background=m,t.secondLine=g,t.visible=y,t.color=this.generateTextColor(m),t.coordinate=n.priceToCoordinate(l,f),t.text=n.formatPrice(l,f))))},e}(s.SeriesPriceAxisView)},function(t,e,i){"use strict";var n,o,r;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"SeriesLegendView",function(){return r}),n=i(0),o=i(339),r=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n._showBarChange=i.properties().paneProperties.legendProperties.showBarChange,n._showSeriesOHLC=i.properties().paneProperties.legendProperties.showSeriesOHLC,n._items[0].setTitle(window.t("O",{context:"in_legend"})),n._items[1].setTitle(window.t("H",{context:"in_legend"})),n._items[2].setTitle(window.t("L",{context:"in_legend"})),n._items[3].setTitle(window.t("C",{context:"in_legend"})),n._items[4].setTitle(""),n._showBarChange.subscribe(n,n.update),n._showSeriesOHLC.subscribe(n,n.update),n}return n.c(e,t),e.prototype.isValuesVisible=function(){return this._showSeriesOHLC.value()||this._showBarChange.value()},e.prototype.additional=function(){return null},e.prototype.destroy=function(){this._showBarChange.unsubscribeAll(this),this._showSeriesOHLC.unsubscribeAll(this)},e.prototype._updateImpl=function(){t.prototype._updateImpl.call(this);var e=this._showSeriesOHLC.value();this._items[0].setVisible(e),this._items[1].setVisible(e),this._items[2].setVisible(e),this._items[3].setVisible(e),this._items[4].setVisible(this._showBarChange.value())},e}(o.SeriesDataWindowView)},function(t,e,i){"use strict";function n(t){var e,i;if(0===t.length)return!1;if(-1===(e=t.findIndex(function(t){return Object(l.coordinateIsValid)(t.y)})))return!1
;for(i=t.length-1;i>e&&!Object(l.coordinateIsValid)(t[i].y);)i--;return!(e>=i)}function o(t,e){var i,n,o,a,c,h=[],u=[],d=null;for(i=0;i<t.length;i++){if(n=t[i],o=t[i+1]||{},Object(l.coordinateIsValid)(n.y))n.y<=e&&h.push(n),n.y>=e&&u.push(n),d=n;else{if(null===d)continue;n=d}Object(l.coordinateIsValid)(o.y)&&((n.y>e&&o.y<e||n.y<e&&o.y>e)&&(Math.abs(n.x-o.x)<1?(a=new r.Point(n.x,e),h.push(a),u.push(a)):null!==(c=Object(s.intersectLineSegments)(n,o,new r.Point(n.x,e),new r.Point(o.x,e)))&&(a=n.add(o.subtract(n).scaled(c)),h.push(a),u.push(a))))}return{topItems:h,bottomItems:u}}var r,s,a,l,c,h,u;Object.defineProperty(e,"__esModule",{value:!0}),e.itemsRangeIsValid=n,e.splitItems=o,i.d(e,"PaneRendererBaseline",function(){return u}),r=i(7),i.n(r),s=i(153),i.n(s),a=i(37),i.n(a),l=i(27),c=i(85),h=i(10),u=function(){function t(){this._data=null}return t.prototype.setData=function(t){this._data=t},t.prototype.draw=function(t){var e,i,r,s,a,l,c,h,u,d,p,_,f,m,g;null!==this._data&&(e=this._data,i=e.items,r=e.baseLevelCoordinate,s=e.bottom,a=e.bottomFillColor1,l=e.bottomFillColor2,c=e.topFillColor1,h=e.topFillColor2,u=e.topLineColor,d=e.bottomLineColor,p=e.topLineWidth,_=e.bottomLineWidth,n(i)&&(f=o(i,r),m=f.topItems,g=f.bottomItems,t.lineCap="round",t.lineJoin="round",t.translate(.5,.5),0!==m.length&&(t.beginPath(),t.moveTo(m[0].x,r),this._makeLine(t,m,!0,0),t.closePath(),t.fillStyle=this._makeLinearGradient(t,c,h,r-s,r),t.fill(),t.beginPath(),this._makeLine(t,m,!1,0),t.lineWidth=p,t.strokeStyle=u,t.stroke()),0!==g.length&&(t.beginPath(),t.moveTo(g[0].x,r),this._makeLine(t,g,!0,1),t.closePath(),t.fillStyle=this._makeLinearGradient(t,a,l,r,r+s),t.fill(),t.beginPath(),this._makeLine(t,g,!1,1),t.lineWidth=_,t.strokeStyle=d,t.stroke())))},t.prototype.hitTest=function(t){var e,i,n,o,s,u,d,p,_,f,m;if(null===this._data)return null;for(e=this._data,i=e.items,n=e.topLineWidth,o=e.bottomLineWidth,s=Object(l.selectionTolerance)((n+o)/2),u=Object(c.lowerbound)(i,t,function(t,e){return t.x<=e.x}),d=Math.max(1,u-1),p=Math.min(i.length-1,u+1),_=d;_<=p;++_)if(f=i[_-1],m=i[_],Object(a.distanceToSegment)(new r.Point(f.x,f.y),new r.Point(m.x,m.y),new r.Point(t.x,t.y)).distance<=s)return new h.HitTestResult(h.HitTestResult.REGULAR);return null},t.prototype._makeLine=function(t,e,i,n){var o,r,s,a,c,h,u,d,p,_;if(null!==this._data&&-1!==(o=e.findIndex(function(t){return Object(l.coordinateIsValid)(t.y)})))for(r=this._data,s=r.barSpacing,a=r.baseLevelCoordinate,c=.25*s,u=e.length,d=o;d<u;d++)if(p=e[d],_=e[d+1]||{},Object(l.coordinateIsValid)(p.y)){if(0===n){if(h&&h.y>=a&&p.y>=a){t.moveTo(p.x,p.y);continue}}else if(h&&h.y<=a&&p.y<=a){t.moveTo(p.x,p.y);continue}if(h&&Object(l.coordinateIsValid)(h.y))t.lineTo(p.x,p.y),i&&!Object(l.coordinateIsValid)(_.y)&&t.lineTo(p.x,a);else if(_&&Object(l.coordinateIsValid)(_.y))i?(d!==o&&t.lineTo(p.x,a),t.lineTo(p.x,p.y)):t.moveTo(p.x,p.y);else if(i){if(0===d)continue;d!==o&&t.lineTo(p.x-c,a),t.lineTo(p.x-c,p.y),t.lineTo(p.x+c,p.y),t.lineTo(p.x+c,a)}else t.moveTo(p.x-c,p.y),t.lineTo(p.x+c,p.y);h=p}},
t.prototype._makeLinearGradient=function(t,e,i,n,o){var r=t.createLinearGradient(0,n,0,o);return r.addColorStop(0,e),r.addColorStop(1,i),r},t}()},function(t,e,i){"use strict";function n(t,e){this.m_series=t,this.m_model=e,this.m_bars=[],this._invalidated=!0,this._isMarkersEnabled=T.enabled("source_selection_markers")}function o(t,e){n.call(this,t,e)}function r(t,e){n.call(this,t,e)}function s(t,e){o.call(this,t,e)}function a(t,e){r.call(this,t,e)}function l(t,e){o.call(this,t,e)}function c(t,e){r.call(this,t,e)}function h(t,e){o.call(this,t,e)}function u(t,e){r.call(this,t,e)}function d(t,e){o.call(this,t,e)}function p(t,e){r.call(this,t,e)}var _=i(6).ensureNotNull,f=i(7).Point,m=i(149).SelectionRenderer,g=i(10).HitTestResult,y=i(733).PaneRendererRenkoPB,v=i(734).PaneRendererKagi,b=i(735).PaneRendererPnF,S=(i(199).PaneRendererBars,i(66).CompositeRenderer),w=i(200),P=i(5).getLogger("Chart.JapaneseSeriesPaneView"),T=i(4);n.prototype.bars=function(){throw Error("unimplemented")},n.prototype.isProjection=function(){throw Error("unimplemented")},n.prototype.update=function(){this._invalidated=!0},n.prototype.nearestIndex=function(t,e){if(!TradingView.isInteger(t))return void P.logDebug("incorrect logicalPoint");var i=this.bars().search(t,e);return null!==i?i.index:void 0},n.prototype._updateImpl=function(){var t,e,i,n,o,r,s,a,l,c,h,u,d,p,m,y,v,b,S=this;if(this.m_bars.length=0,(this.m_series.properties().style.value()!==TradingView.Series.STYLE_PNF||this.m_series.data().boxSize)&&!this.m_model.timeScale().isEmpty()&&!this.m_series.priceScale().isEmpty()&&null!==(t=this.m_series.getRealVisibleRange())&&0!==this.bars().size()){for(e=t.firstBar(),i=t.lastBar(),n=this.m_series.data().search(e).value[TradingView.CLOSE_PLOT];e<=i&&null===this.bars().valueAt(e);e++);if(!(e>i)&&(t=this.bars().range(e,i),o=this.m_series.priceScale(),r=this.m_series.barColorer(),s={},a=S.m_series.properties().style.value(),l=a===TradingView.Series.STYLE_KAGI||a===TradingView.Series.STYLE_PNF,c=S.isProjection(),h=_(S.m_series.data().bars().lastIndex()),t.each(function(t,e){var i,n,o;if(void 0!==e[TradingView.OPEN_PLOT]&&void 0!==e[TradingView.HIGH_PLOT]&&void 0!==e[TradingView.LOW_PLOT]&&void 0!==e[TradingView.CLOSE_PLOT]){switch(i={},n={O:e[TradingView.OPEN_PLOT],H:e[TradingView.HIGH_PLOT],L:e[TradingView.LOW_PLOT],C:e[TradingView.CLOSE_PLOT],Adt:l?e[TradingView.ADT_PLOT]:void 0},i.time=Math.round(t),i.open=n.O,i.high=n.H,i.low=n.L,i.close=n.C,s.value=e,o=r.barStyle(t,c,s),s.previousValue=e,i.color=o.barColor,i.borderColor=o.barBorderColor,i.isUp=o.isBarUp,i.wickColor=o.barWickColor,a){case TradingView.Series.STYLE_PNF:i.low-=.5*S.m_series.data().boxSize,i.high+=.5*S.m_series.data().boxSize,i.additionalNum=Math.round(1+(e[TradingView.HIGH_PLOT]-e[TradingView.LOW_PLOT])/S.m_series.data().boxSize);break;case TradingView.Series.STYLE_KAGI:if(i.upColor=o.upColor,i.downColor=o.downColor,i.isTwoColorBar=o.isTwoColorBar,!isNumber(n.Adt))break;i.additionalPrice=n.Adt,c&&i.time===h&&(i.combinedWithProjection=!0)}S.m_bars.push(i)}},this),
a===TradingView.Series.STYLE_PNF&&(this.blockSize=(o.priceToCoordinate(0,n)-o.priceToCoordinate(500,n))/500*this.m_series.data().boxSize),o.barPricesToCoordinates(this.m_bars,n),this.m_model.timeScale().barIndexesToCoordinates(this.m_bars),this.m_series===this.m_model.selectedSource()))for(u=w(e,i),this._selectionData={points:[]},this._selectionData.hittestResult=g.REGULAR,d=0;d<u.length;d++)p=u[d],null!==(m=this.m_series.bars().valueAt(p))&&(y=.5*(m[TradingView.OPEN_PLOT]+m[TradingView.CLOSE_PLOT]),v=this.m_model.timeScale().indexToCoordinate(p),b=this.m_series.priceScale().priceToCoordinate(y,n),this._selectionData.points.push(new f(v,b)))}},n.prototype.items=function(){return this.m_bars},n.prototype.dump=function(){var t={};return t.bars=this.m_bars,t},inherit(o,n),o.prototype.bars=function(){return this.m_series.bars()},o.prototype.isProjection=function(){return!1},inherit(r,n),r.prototype.bars=function(){return this.m_series.nsBars()},r.prototype.isProjection=function(){return!0},inherit(s,o),s.prototype.renderer=function(){var t,e;return this._invalidated&&(this._updateImpl(),this._invalidated=!1),t={},t.bars=this.m_bars,t.barWidth=this.m_model.timeScale().barSpacing(),e=new S,e.append(new y(t)),this.m_series===this.m_model.selectedSource()&&this._isMarkersEnabled&&e.append(new m(this._selectionData)),e},inherit(a,r),a.prototype.renderer=function(){this._invalidated&&(this._updateImpl(),this._invalidated=!1);var t={};return t.bars=this.m_bars,t.barWidth=this.m_model.timeScale().barSpacing(),new y(t)},inherit(l,o),l.prototype.renderer=function(){var t,e;return this._invalidated&&(this._updateImpl(),this._invalidated=!1),t={},t.bars=this.m_bars,t.barWidth=.9*this.m_model.timeScale().barSpacing(),e=new S,e.append(new y(t)),this.m_series===this.m_model.selectedSource()&&this._isMarkersEnabled&&e.append(new m(this._selectionData)),e},inherit(c,r),c.prototype.renderer=function(){this._invalidated&&(this._updateImpl(),this._invalidated=!1);var t={};return t.bars=this.m_bars,t.barWidth=.9*this.m_model.timeScale().barSpacing(),new y(t)},inherit(h,o),h.prototype.renderer=function(){var t,e;return this._invalidated&&(this._updateImpl(),this._invalidated=!1),t={},t.bars=this.m_bars,t.barSpacing=this.m_model.timeScale().barSpacing(),e=new S,e.append(new v(t)),this.m_series===this.m_model.selectedSource()&&this._isMarkersEnabled&&e.append(new m(this._selectionData)),e},inherit(u,r),u.prototype.renderer=function(){this._invalidated&&(this._updateImpl(),this._invalidated=!1);var t={};return t.bars=this.m_bars,t.upColor=this.upColor,t.downColor=this.downColor,t.barSpacing=this.m_model.timeScale().barSpacing(),new v(t)},inherit(d,o),d.prototype.renderer=function(){var t,e;return this._invalidated&&(this._updateImpl(),this._invalidated=!1),t={},t.bars=this.m_bars,t.blockSize=this.blockSize,t.barSpacing=this.m_model.timeScale().barSpacing(),e=new S,e.append(new b(t)),this.m_series===this.m_model.selectedSource()&&this._isMarkersEnabled&&e.append(new m(this._selectionData)),e},inherit(p,r),p.prototype.renderer=function(){
this._invalidated&&(this._updateImpl(),this._invalidated=!1);var t={};return t.bars=this.m_bars,t.blockSize=this.blockSize,t.barSpacing=this.m_model.timeScale().barSpacing(),new b(t)},e.SeriesRenkoPaneView=s,e.SeriesProjectionRenkoPaneView=a,e.SeriesPriceBreakPaneView=l,e.SeriesProjectionPriceBreakPaneView=c,e.SeriesKagiPaneView=h,e.SeriesProjectionKagiPaneView=u,e.SeriesPnFPaneView=d,e.SeriesProjectionPnFPaneView=p},function(t,e,i){"use strict";function n(t){this.bars=t.bars,this.barWidth=t.barWidth,this.barLineWidth=1}var o=i(27).selectionTolerance,r=i(10).HitTestResult;n.prototype.draw=function(t){var e,i,n,o,r,s,a;for(t.save(),t.lineCap="butt",t.translate(.5,.5),t.lineWidth=this.barLineWidth,e=this.barWidth/2,i=0;i<this.bars.length;++i)n=this.bars[i],o=n.exactTime-e,r=n.exactTime+e-o,s=Math.round(Math.min(n.close,n.open)),a=Math.max(1,Math.round(Math.abs(n.close-n.open))),t.fillStyle=n.borderColor,t.fillRect(n.exactTime,Math.round(n.high),this.barLineWidth,Math.round(n.low-n.high)),t.fillRect(o,s,r,a),t.fillStyle=n.color,t.fillRect(o+this.barLineWidth,s+this.barLineWidth,r-2*this.barLineWidth,a-2*this.barLineWidth);t.restore()},n.prototype.hitTest=function(t){var e,i,n,s,a=this.bars,l=.5*this.barWidth;if(0===a.length)return null;if(t.x<a[0].time-l)return null;if(t.x>a[a.length-1].time+l)return null;for(e=null,i=0;i<a.length;++i)if(n=a[i],t.x<=n.time+l){e=n;break}return s=o(this.barLineWidth),e&&e.high-s<=t.y&&t.y<=e.low+s?new r(r.REGULAR):null},e.PaneRendererRenkoPB=TradingView.PaneRendererRenkoPB=n},function(t,e,i){"use strict";function n(t){this.bars=t.bars,this.barSpacing=t.barSpacing,this.barLineWidth=Math.max(1,o.optimalBarWidth(t.barSpacing))}var o=i(27),r=i(10).HitTestResult;n.prototype.draw=function(t){var e,i,n;for(t.save(),t.lineCap="square",t.translate(.5,.5),e=0;e<this.bars.length;++e)i=this.bars[e],n=Math.round(.5*this.barLineWidth),i.isTwoColorBar?(t.fillStyle=i.upColor,t.fillRect(Math.round(i.exactTime-n),Math.round(i.high-n),Math.round(2*n),Math.round(i.additionalPrice-i.high+n)),t.fillStyle=i.downColor,t.fillRect(Math.round(i.exactTime-n),Math.round(i.additionalPrice),Math.round(2*n),Math.round(i.low-i.additionalPrice+n))):(t.fillStyle=i.color,t.fillRect(Math.round(i.exactTime-n),Math.round(i.high-n),Math.round(2*n),Math.round(i.low-i.high)+2*n)),i.combinedWithProjection||(i.isTwoColorBar?t.fillStyle=i.isUp?i.downColor:i.upColor:t.fillStyle=i.color,t.fillRect(Math.round(i.exactTime-this.barSpacing+n),Math.round(i.open-n),Math.round(this.barSpacing-2*n+1),Math.round(2*n)));t.restore()},n.prototype.hitTest=function(t){var e,i,n,s,a=this.bars,l=.5*this.barLineWidth;if(0===a.length)return null;if(t.x<a[0].time-l)return null;if(t.x>a[a.length-1].time+l)return null;for(e=null,i=0;i<a.length;++i)if(n=a[i],t.x<=n.time+l){e=n;break}return s=o.selectionTolerance(.5*this.barLineWidth),e&&e.high-s<=t.y&&t.y<=e.low+s?new r(r.REGULAR):null},e.PaneRendererKagi=TradingView.PaneRendererKagi=n},function(t,e,i){"use strict";function n(t){this.bars=t.bars,this.barSpacing=t.barSpacing,this.blockSize=t.blockSize,
this.barWidth=t.barSpacing}var o=i(27).selectionTolerance,r=i(10).HitTestResult;n.prototype.draw=function(t){var e,i,n,o;for(t.save(),t.lineCap="butt",t.translate(.5,.5),e=0;e<this.bars.length;++e){for(i=this.bars[e],n=(i.low-i.high)/i.additionalNum,t.beginPath(),o=0;o<i.additionalNum;o++)i.isUp?(t.moveTo(Math.round(i.time-.5*this.barWidth)+.5,i.high+o*n),t.lineTo(Math.round(i.time+.5*this.barWidth)-.5,i.high+(o+1)*n),t.moveTo(Math.round(i.time+.5*this.barWidth)-.5,i.high+o*n),t.lineTo(Math.round(i.time-.5*this.barWidth)+.5,i.high+(o+1)*n)):this.drawEllipse(t,i.time-.45*this.barWidth+.5,i.high+o*n,Math.round(.9*this.barWidth),Math.round(n));t.strokeStyle=i.color,t.lineWidth=1,t.stroke()}t.restore()},n.prototype.drawEllipse=function(t,e,i,n,o){t.save(),t.translate(e+n/2,i+o/2),t.scale(n/2,o/2),t.moveTo(1,0),t.arc(0,0,.95,0,2*Math.PI,!1),t.restore()},n.prototype.hitTest=function(t){var e,i,n,s,a=this.bars,l=.5*this.barSpacing;if(0===a.length)return null;if(t.x<a[0].time-l)return null;if(t.x>a[a.length-1].time+l)return null;for(e=null,i=0;i<a.length;++i)if(n=a[i],t.x<=n.time+l){e=n;break}return s=o(this.barWidth),e&&e.high-s<=t.y&&t.y<=e.low+s?new r(r.REGULAR):null},e.PaneRendererPnF=TradingView.PaneRendererPnF=n},function(t,e,i){"use strict";var n,o,r,s;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"SeriesHorizontalBaseLinePaneView",function(){return s}),n=i(0),o=i(7),i.n(o),r=i(143),s=function(t){function e(e){return t.call(this,e)||this}return n.c(e,t),e.prototype._updateImpl=function(){var t,e;this._lineRendererData.visible=!1,t=this._series.priceScale().mode(),(t.percentage||t.indexedTo100)&&null!=(e=this._series.firstValue())&&(this._lineRendererData.visible=!0,this._lineRendererData.points=[new o.Point(0,this._series.priceScale().priceToCoordinate(e,e))],this._lineRendererData.width=this._model.timeScale().width(),this._lineRendererData.height=this._series.priceScale().height(),this._lineRendererData.color=this._series.properties().baseLineColor.value())},e}(r.a)},function(t,e,i){"use strict";var n,o,r,s,a;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"SeriesPriceLinePaneView",function(){return a}),n=i(0),o=i(7),i.n(o),r=i(143),s=i(83),a=function(t){function e(e){var i=t.call(this,e)||this;return i._lineRendererData.linestyle=s.LINESTYLE_DOTTED,i}return n.c(e,t),e.prototype._updateImpl=function(){if(this._lineRendererData.visible=!1,this._series.properties().showPriceLine.value()){var t=this._series.lastValueData(void 0,!0);t.noData||(this._lineRendererData.visible=!0,this._lineRendererData.points=[new o.Point(0,t.coordinate)],this._lineRendererData.color=this._series.priceLineColor(t.color),this._lineRendererData.width=this._model.timeScale().width(),this._lineRendererData.height=this._series.priceScale().height(),this._lineRendererData.linewidth=this._series.properties().priceLineWidth.value())}},e}(r.a)},function(t,e,i){"use strict";var n,o,r,s,a;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"SeriesPrevClosePriceLinePaneView",function(){return a}),n=i(0),o=i(7),i.n(o),r=i(143),
s=i(83),a=function(t){function e(e){var i=t.call(this,e)||this;return i._lineRendererData.linestyle=s.LINESTYLE_DOTTED,i}return n.c(e,t),e.prototype._updateImpl=function(){if(this._lineRendererData.visible=!1,this._series.properties().showPrevClosePriceLine.value()&&!this._series.isDWM()){var t=this._series.prevClose();null!==t&&(this._lineRendererData.visible=!0,this._lineRendererData.points=[new o.Point(0,t.coordinate)],this._lineRendererData.color=this._series.properties().prevClosePriceLineColor.value(),this._lineRendererData.width=this._model.timeScale().width(),this._lineRendererData.height=this._series.priceScale().height(),this._lineRendererData.linewidth=this._series.properties().prevClosePriceLineWidth.value())}},e}(r.a)},function(t,e,i){"use strict";function n(t){function e(t,e){var i=t.font;return a.hasOwnProperty(i)||(a[i]={}),a[i].hasOwnProperty(e)||(a[i][e]=t.measureText(e).width),a[i][e]}function i(){var i=n.width(),a=n.height();return{draw:function(n){var c,h,u,d,p,_,f,m,g,y=t.symbolInfo();if(y){for(n.fillStyle=o.generateColor(l.color.value(),l.transparency.value()),c=y.name,/QUANDL/.test(y.exchange)&&(h=c.split(/\//),h.length&&(c=h[h.length-1])),u={description:y.description,pro_name:y.pro_name,short_name:y.name},d=[{text:c?c+", "+r(t.interval()):"",font:"96px Verdana, Arial, sans-serif",lineHeight:117,vertOffset:0},{text:s(u)||"",font:"48px Verdana, Arial, sans-serif",lineHeight:58,vertOffset:5}],p=0,_=0;_<d.length;_++)f=d[_],f.text&&(n.font=f.font,m=e(n,f.text),f.zoom=m>i?i/m:1,p+=f.lineHeight*f.zoom);for(g=Math.max((a-p)/2,0),_=0;_<d.length;_++)f=d[_],f.text&&(n.save(),n.translate(i/2,g),n.textBaseline="top",n.textAlign="center",n.font=f.font,n.scale(f.zoom,f.zoom),n.fillText(f.text,0,f.vertOffset),n.restore(),g+=f.lineHeight*f.zoom)}}}}var n=null,a={},l=t.model().properties().symbolWatermarkProperties,c={renderer:i,update:function(){}};this.paneViews=function(t){return t.containsMainSeries()?(n=t,[c]):[]}}var o=i(35),r=i(142).translatedIntervalString,s=i(133).getTranslatedSymbolDescription;e.Watermark=n},function(t,e,i){"use strict";function n(){this.visible=!0,this.horzLinesVisible=!0,this.horzLinesColor="white",this.horzLinesStyle="",this.vertLinesVisible=!0,this.vertLinesColor="white",this.vertLinesStyle=""}function o(t,e){this.source=t,this.pane=e,this._renderer=new r}function r(){this.data=null}n.prototype.paneViews=function(t){return[new o(this,t)]},o.prototype.update=function(){},o.prototype.renderer=function(){var t={};return this.pane.defaultPriceScale().isEmpty()||this.pane.timeScale().isEmpty()?null:(t.horzLinesVisible=!0,t.vertLinesVisible=!0,t.horzLinesColor=this.pane._model.properties().paneProperties.horzGridProperties.color.value(),t.vertLinesColor=this.pane._model.properties().paneProperties.vertGridProperties.color.value(),t.horzLineStyle=this.pane._model.properties().paneProperties.horzGridProperties.style.value(),t.vertLineStyle=this.pane._model.properties().paneProperties.vertGridProperties.style.value(),t.priceMarks=this.pane.defaultPriceScale().marks(),
t.timeMarks=this.pane.timeScale().marks(),t.w=this.pane.width(),t.h=this.pane.height(),this._renderer.setData(t),this._renderer)},r.prototype.setData=function(t){this.data=t},r.prototype.draw=function(t){var e;if(null!==this.data){if(t.lineWidth=1,this.data.vertLinesVisible){for(t.strokeStyle=this.data.vertLinesColor,CanvasEx.setLineStyle(t,this.data.vertLineStyle),t.beginPath(),e=0;e<this.data.timeMarks.length;e++)t.moveTo(this.data.timeMarks[e].coord+1,0),t.lineTo(this.data.timeMarks[e].coord+1,this.data.h);t.stroke()}if(this.data.horzLinesVisible){for(t.strokeStyle=this.data.horzLinesColor,CanvasEx.setLineStyle(t,this.data.horzLineStyle),t.beginPath(),e=0;e<this.data.priceMarks.length;e++)t.moveTo(0,this.data.priceMarks[e].coord),t.lineTo(this.data.w,this.data.priceMarks[e].coord);t.stroke()}}},e.Grid=n},function(t,e,i){"use strict";function n(t,e,i){this._magnetProperty=t,this._timeScale=e}var o=i(71).Series;n.prototype.align=function(t,e,i){var n,r,s,a,l,c,h,u,d,p,_=50,f=i.defaultPriceScale(),m=t;if(!this._magnetProperty.value())return m;for(n=f.dataSources(),r=null,s=0;s<n.length;s++)if(n[s]instanceof o){r=n[s];break}if(r&&(a=r.bars(),a.contains(e)&&(l=a.valueAt(e),c=[l[TradingView.OPEN_PLOT],l[TradingView.HIGH_PLOT],l[TradingView.LOW_PLOT],l[TradingView.CLOSE_PLOT]],f=r.priceScale(),!f.isEmpty()))){for(h=[],u=r.firstValue(),s=0;s<c.length;s++)h.push({y:f.priceToCoordinate(c[s],u),price:c[s]});d=f.priceToCoordinate(t,u),h.sort(function(t,e){return Math.abs(t.y-d)-Math.abs(e.y-d)}),p=h[0],Math.abs(p.y-d)<_&&(m=p.price)}return m},t.exports=n},function(t,e,i){"use strict";(function(t){function n(){return[$.t("Jan"),$.t("Feb"),$.t("Mar"),$.t("Apr"),$.t("May"),$.t("Jun"),$.t("Jul"),$.t("Aug"),$.t("Sep"),$.t("Oct"),$.t("Nov"),$.t("Dec")]}function o(e,i){this._options=Object.assign({},P,i),this._model=e,this._scalesProperties=e.properties().scalesProperties,this.m_width=0,this._baseIndex=null,this._defaultRightOffsetProperty=new f(w),this.m_rightOffset=w,this._defaultRightOffsetProperty.listeners().subscribe(this,function(t){this.setRightOffset(t.value())}),this.m_points=new u,this._barSpacingChanged=new t,this.m_barSpacing=S,this._options.preserveBarSpacing&&(this.m_barSpacing=this._scalesProperties.barSpacing.value()||S),this.m_scrollStartPoint=null,this.m_scaleStartPoint=null,this._commonTransitionStartState=null,this.m_tickmarks=new l,this._locked=!1,this._formattedBySpan={},this._onScroll=new t,this._visibleBars=null,this._visibleBarsInvalidated=!0,this._visibleBarsChanged=new t}var r=i(55).clamp,s=i(253).BarsRange,a=i(743),l=i(744),c=i(17),h=i(13).numberToStringWithLeadingZero,u=i(745).TimePoints,d=i(188),p=i(5).getLogger("Chart.TimeScale"),_=i(4),f=i(16),m=i(3).saveDefaultProperties,g=null,y=50,v=_.enabled("high_density_bars")?.025:.5,b=5,S=d.DEFAULT_BAR_SPACING,w=5,P={preserveBarSpacing:!1};o.prototype.tickMarks=function(){return this.m_tickmarks},o.prototype.reset=function(){this._visibleBarsInvalidated=!0,this.m_points=new u,this.m_scrollStartPoint=null,this.m_scaleStartPoint=null,
this._clearCommonTransitionsStartState(),this.m_tickmarks.reset()},o.prototype.restoreDefault=function(){this._visibleBarsInvalidated=!0,this.setBarSpacing(S),this.resetRightOffset()},o.prototype.restoreRightOffsetPropertyToDefault=function(){this._defaultRightOffsetProperty.setValue(w)},o.prototype.baseIndex=function(){return this._baseIndex||0},o.prototype.rightOffset=function(){return this.m_rightOffset},o.prototype.defaultRightOffsetProperty=function(){return this._defaultRightOffsetProperty},o.prototype.rightOffsetForTimePoint=function(t){var e=this.timeToCoordinate(t);return null===e?null:this._rightOffsetForCoordinate(e)},o.prototype._rightOffsetForCoordinate=function(t){return(this.m_width+1-t)/this.m_barSpacing},o.prototype.scrollToRealtime=function(t,e){var i,n,o,r,s=this._defaultRightOffsetProperty.value();if(s<0&&(s=w),t)return i=this,n=this.m_rightOffset,o=this.maxRightOffset(),o>0&&s>o&&(s=o),r=this._model,void $({offset:n}).animate({offset:s},{duration:1e3,easing:"easeInOutQuint",complete:e,step:function(t){i._visibleBarsInvalidated=!0,i.m_rightOffset=t,r.recalculateAllPanes(),r.invalidate(new c(c.LIGHT_UPDATE)),r.recalcVisibleRangeStudy(r.dataSources())}});this._visibleBarsInvalidated=!0,this.m_rightOffset=s,this._correctOffset(),void 0!==e&&e()},o.prototype.points=function(){return this.m_points},o.prototype.width=function(){return this.m_width},o.prototype.setWidth=function(t){if(isFinite(t)&&!(t<=0)&&this.m_width!==t){if(this._visibleBarsInvalidated=!0,this._locked&&this.m_width){var e=this.m_barSpacing*t/this.m_width;this._tryToUpdateBarSpacing(this.m_barSpacing,e)}this.m_width=t,this._correctOffset()}},o.prototype.barSpacing=function(){return this.m_barSpacing},o.prototype.setBarSpacing=function(t){if(void 0===t)return void p.logDebug("setBarSpacing: invalid argument");this._tryToUpdateBarSpacing(this.m_barSpacing,t)&&(this._correctOffset(),this._options.preserveBarSpacing&&(m(!0),this._scalesProperties.barSpacing.setValue(this.m_barSpacing),m(!1)))},o.prototype._tryToUpdateBarSpacing=function(t,e){return t!==e&&(this._visibleBarsInvalidated=!0,this.m_barSpacing=e,this._barSpacingChanged.fire(t,e),!0)},o.prototype.barSpacingChanged=function(){return this._barSpacingChanged},o.prototype.correctBarSpacing=function(){this.isEmpty()||this.points().size()<this.width()/this.barSpacing()&&(this.setRightOffset(w),this.setBarSpacing(Math.min(this.width()/(this.points().size()+this.rightOffset()),y)))},o.prototype.visibleBars=function(){return this._visibleBarsInvalidated&&(this._visibleBarsInvalidated=!1,this._updateVisibleBars()),this._visibleBars},o.prototype._updateVisibleBars=function(){var t,e,i,n,o;if(this.isEmpty())return void(null!==this._visibleBars&&(this._visibleBars=null,this._visibleBarsChanged.fire()));t=this.baseIndex(),e=Math.ceil(this.m_width/this.m_barSpacing)-1,i=Math.round(this.m_rightOffset+t),n=i-e,o=this._visibleBars,this._visibleBars=new s(n,i),null!==o&&this._visibleBars.equals(o)||this._visibleBarsChanged.fire()},o.prototype.isEmpty=function(){
return 0===this.m_width||0===this.m_points.size()},o.prototype.indexToCoordinate=function(t,e){var i,n,o;return this.isEmpty()?0:TradingView.isInteger(t)?(i=this.baseIndex(),n=i+this.m_rightOffset-t,o=this.m_width-(n+.5)*this.m_barSpacing,e?o:Math.round(o)):0},o.prototype.barIndexesToCoordinates=function(t){var e,i,n,o,r=this.baseIndex();for(e=0;e<t.length;e++)i=t[e].time,n=r+this.m_rightOffset-i,o=this.m_width-(n+.5)*this.m_barSpacing,t[e].time=Math.round(o),t[e].exactTime=o},o.prototype.indexesToCoordinates=function(t){var e,i,n,o=this.baseIndex(),r=o+this.m_rightOffset,s=this.m_width-r*this.m_barSpacing-.5*this.m_barSpacing;for(e=0;e<t.length;e++)i=t[e].x,n=s+i*this.m_barSpacing,t[e].x=Math.round(n)},o.prototype.coordinateToIndex=function(t){var e=this._rightOffsetForCoordinate(t),i=this.baseIndex(),n=i+this.m_rightOffset-e,o=Math.round(1e6*n)/1e6;return Math.ceil(o)},o.prototype.timeToCoordinate=function(t){function e(t){return t<=0||t>=l.m_width}var i,n,o,r=this.m_points.closestIndexLeft(t),s=this.m_points.valueAt(r),a=this.indexToCoordinate(r,!0),l=this;return e(a)?null:(i=this.barSpacing(),n=function(){var t=this.baseIndex();return this.m_points.valueAt(t)-this.m_points.valueAt(t-1)}.bind(this)(),o=Math.round(a+(t-s)/n*i)+1,e(o)?null:o)},o.prototype.alignCoordinate=function(t){if(this.isEmpty())return t;var e=this.coordinateToIndex(t);return this.indexToCoordinate(e)},o.prototype.timePointToIndex=function(t){return this.m_points.indexOf(t,!0)},o.prototype.indexToTimePoint=function(t){return this.m_points.valueAt(t)},o.prototype.indexToUserTime=function(t){return this.m_tickmarks.indexToTime(t)},o.prototype.marks=function(){var t,e,i,n,o,r,s,a,l,c,h,u;if(this.isEmpty())return null;for(t=this.m_barSpacing,e=this._scalesProperties.fontSize.value()||0,i=5*(e+4),n=Math.round(i/t),o=this.visibleBars(),r=Math.max(o.firstBar(),o.firstBar()-n),s=Math.max(o.lastBar(),o.lastBar()-n),a=this.m_tickmarks.build(t,i),l=[],c=0;c<a.length;++c)h=a[c],r<=h.index&&h.index<=s&&null!==(u=this.m_tickmarks.indexToTime(h.index))&&l.push({coord:this.indexToCoordinate(h.index),label:this.formatLabel(u,h.span),span:h.span,major:h.label>=d.DAY_SPAN?1:0});return l},o.prototype.state=function(t){var e={};return e.m_barSpacing=this.barSpacing(),e.m_rightOffset=t?this.m_rightOffset:this._defaultRightOffsetProperty.value(),t&&(e.points=this.m_points.state(),e.tickmarks=this.m_tickmarks.state(),e.width=this.m_width),e},o.prototype.restoreState=function(t,e){var i,n,o;return void 0===t.m_barSpacing?void p.logDebug("restoreState: invalid state"):void 0===t.m_rightOffset?void p.logDebug("restoreState: invalid state"):(i=t.m_barSpacing,n=t.m_rightOffset<0&&!e?w:t.m_rightOffset,o=n<0?w:Math.round(n),this._defaultRightOffsetProperty.setValue(o),this.m_rightOffset=n,e&&(this.m_points.restoreState(t.points),this.m_tickmarks.restoreState(t.tickmarks),t.width&&(this._locked=!0,this.m_width>0&&(i*=this.m_width/t.width))),this._tryToUpdateBarSpacing(this.m_barSpacing,i),void this._correctOffset())},o.prototype.setBaseIndex=function(t){
if("number"!=typeof t)return void p.logDebug("setBaseIndex: invalid argument");this._visibleBarsInvalidated=!0,this._baseIndex=t,this._correctOffset()},o.prototype.setRightOffset=function(t){if(void 0===t)return void p.logDebug("setRightOffset: invalid argument");this._visibleBarsInvalidated=!0,this.m_rightOffset=t,this._correctOffset()},o.prototype.resetRightOffset=function(){this.setRightOffset(this._defaultRightOffsetProperty.value())},o.prototype._correctOffset=function(){var t,e=this.maxRightOffset();this.m_rightOffset>e&&(this.m_rightOffset=e,this._visibleBarsInvalidated=!0),null!==(t=this.minRightOffset())&&this.m_rightOffset<t&&(this.m_rightOffset=t,this._visibleBarsInvalidated=!0)},o.prototype.minRightOffset=function(){var t=this.m_points.firstIndex(),e=this._baseIndex;return null===t||null===e?null:t-e-1+b},o.prototype.maxRightOffset=function(){return this.m_width/this.m_barSpacing-b},o.prototype.startScale=function(t){this.m_scrollStartPoint&&this.endScroll(),null===this.m_scaleStartPoint&&null===this._commonTransitionStartState&&(this.isEmpty()||(this.m_scaleStartPoint=t,this._saveCommonTransitionsStartState()))},o.prototype._saveCommonTransitionsStartState=function(){this._commonTransitionStartState={barSpacing:this.barSpacing(),rightOffset:this.rightOffset()}},o.prototype._clearCommonTransitionsStartState=function(){this._commonTransitionStartState=null},o.prototype.scaleTo=function(t){var e,i;null!==this._commonTransitionStartState&&(e=r(this.m_width-t,0,this.m_width),i=r(this.m_width-this.m_scaleStartPoint,0,this.m_width),0!==e&&0!==i&&this.setBarSpacing(this.getValidBarSpacing(this._commonTransitionStartState.barSpacing*e/i)))},o.prototype.getValidBarSpacing=function(t){return void 0===t&&(t=this.barSpacing()),t<v?v:t>y?y:t},o.prototype.isValidBarSpacing=function(t){return t>=v&&t<=y},o.prototype.endScale=function(){null!==this.m_scaleStartPoint&&(this.m_scaleStartPoint=null,this._clearCommonTransitionsStartState())},o.prototype.startScroll=function(t){null===this.m_scrollStartPoint&&null===this._commonTransitionStartState&&(this.isEmpty()||(this.m_scrollStartPoint=t,this._saveCommonTransitionsStartState()))},o.prototype.scrollTo=function(t){if(this._visibleBarsInvalidated=!0,null!==this.m_scrollStartPoint){var e=(this.m_scrollStartPoint-t)/this.barSpacing();this.m_rightOffset=this._commonTransitionStartState.rightOffset+e,this._correctOffset(),this._onScroll.fire()}},o.prototype.scrollToOffsetAnimated=function(t,e){var i,n,o,r;if(!isFinite(t))throw new RangeError("offset is required and must be finite number");if(void 0===e&&(e=400),!isFinite(e)||e<=0)throw new RangeError("animationDuration (optional) must be finite positive number");i=this,n=this.m_rightOffset,o=+new Date,r=this._model,function s(){i._visibleBarsInvalidated=!0;var a=(new Date-o)/e;if(a>=1)return i.m_rightOffset=t,i._visibleBarsInvalidated=!0,r.recalculateAllPanes(),void r.invalidate(new c(c.LIGHT_UPDATE));i.m_rightOffset=n+(t-n)*a,r.recalculateAllPanes(),setTimeout(s,20)}()},o.prototype.endScroll=function(){
null!==this.m_scrollStartPoint&&(this.m_scrollStartPoint=null,this._clearCommonTransitionsStartState())},o.prototype.update=function(t,e,i,n){this._visibleBarsInvalidated=!0,i.length>0&&this.m_points.merge(t,e,i),this.m_tickmarks.merge(n),this._correctOffset()},o.prototype.addTail=function(t,e,i){var n,o,r;for(this.m_tickmarks.removeTail(e),n=t.params,o=this.m_tickmarks.maxIndex+(i?0:1),r=0;r<n.marks.length;r++)n.marks[r].index=o+r;this.m_tickmarks.addTail(n.marks),this.m_points.addTail(n.changes,i),this.m_rightOffset-=n.changes.length},o.prototype.formatLabel=function(t,e){if(this._formattedBySpan[e])return this._formattedBySpan[e].format(t.valueOf());var i=this;return this._formattedBySpan[e]=new a(function(t){return i.formatLabelImpl(new Date(t),e)}),this._formattedBySpan[e].format(t)},o.prototype.formatLabelImpl=function(t,e){if(!(t&&t instanceof Date))return"incorrect time";var i=this._model.mainSeries().isDWM();return e<d.MINUTE_SPAN&&!i?h(t.getUTCHours(),2)+":"+h(t.getUTCMinutes(),2)+":"+h(t.getUTCSeconds(),2):e<d.DAY_SPAN&&!i?h(t.getUTCHours(),2)+":"+h(t.getUTCMinutes(),2):e<d.WEEK_SPAN?t.getUTCDate():e<d.MONTH_SPAN?t.getUTCDate():e<d.YEAR_SPAN?(g||(g=n()),g[t.getUTCMonth()]):t.getUTCFullYear()},o.prototype.normalizeBarIndex=function(t){var e=0,i=0,n=this.baseIndex();return t<this.m_points.firstIndex()?(e=this.m_points.valueAt(this.m_points.firstIndex()),i=t-this.m_points.firstIndex()):t>n?(e=this.m_points.valueAt(n),i=t-n):(e=this.m_points.valueAt(t),i=0),{time_t:e,offset:i}},o.prototype.denormalizeTimePoint=function(t){var e=this.m_points.indexOf(t.time_t);if(null!==e)return e+t.offset},o.prototype.zoomToBarsRange=function(t,e){if(!(e<=t)){var i=this.baseIndex();this.m_rightOffset=e-i,this.setBarSpacing(this.width()/(e-t+1)),this._visibleBarsInvalidated=!0}},o.prototype.canZoomIn=function(){return this.m_barSpacing<y},o.prototype.canZoomOut=function(){return this.m_barSpacing>v},o.prototype.minBarSpacing=function(){return v},o.prototype.maxBarSpacing=function(){return y},o.prototype.onScroll=function(){return this._onScroll},o.prototype.preserveBarSpacing=function(){return this._options.preserveBarSpacing},o.prototype.visibleBarsChanged=function(){return this._visibleBarsChanged},e.TimeScale=o}).call(e,i(8))},function(t,e,i){"use strict";function n(t,e){this._formatter=t,this._maxSize=e||50,this._actualSize=0,this._cache={},this._usageTick=1,this._oldestTick=1,this._tick2Labels={}}n.prototype.format=function(t){var e,i;return this._cache[t]?this._cache[t].string:(this._actualSize===this._maxSize&&(e=this._tick2Labels[this._oldestTick],delete this._tick2Labels[this._oldestTick],delete this._cache[e],this._oldestTick++,this._actualSize--),i=this._formatter(t),this._cache[t]={string:i,tick:this._usageTick},this._tick2Labels[this._usageTick]=t,this._actualSize++,this._usageTick++,i)},t.exports=n},function(t,e,i){"use strict";(function(e){function i(){this._marksByIndex={},this._marksBySpan=[],this.changed=new e}i.prototype.reset=function(){this._marksByIndex={},this._marksBySpan=[],delete this.minIndex,
delete this.maxIndex,delete this._cache,this.changed.fire()},i.prototype.minIndex=void 0,i.prototype.maxIndex=void 0,i.prototype.merge=function(t){var e,i,n,o,r,s=this._marksBySpan,a={};for(e=0;e<t.length;e++){if(i=t[e],n=i.index,o=i.span,r=this._marksByIndex[i.index]){if(r.index===i.index&&r.span===i.span){r.time=i.time;continue}this._removeTickmark(r)}this._marksByIndex[n]=i,this.minIndex<=n||(this.minIndex=n),this.maxIndex>=n||(this.maxIndex=n),s[o]||(s[o]=[]),s[o].push(i),a[o]=!0}for(o=s.length;o--;)s[o]&&(s[o].length||delete s[o],a[o]&&s[o].sort(this._sortByIndexAsc));delete this._cache,this.changed.fire()},i.prototype._removeTickmark=function(t){var e,i,n=t.index;this._marksByIndex[n]===t&&(delete this._marksByIndex[n],n<=this.minIndex&&this.minIndex++,n>=this.maxIndex&&this.maxIndex--,this.maxIndex<this.minIndex&&(delete this.minIndex,delete this.maxIndex),e=this._marksBySpan[t.span],-1!==(i=e.indexOf(t))&&e.splice(i,1))},i.prototype._sortByIndexAsc=function(t,e){return t.index-e.index},i.prototype.removeTail=function(t){var e,i={};this.maxIndex=0;for(e in this._marksByIndex)this._marksByIndex[e].time<t&&(i[e]=this._marksByIndex[e],this.maxIndex=Math.max(this.maxIndex,e));this._marksByIndex=i},i.prototype.addTail=function(t){for(var e=0;e<t.length;e++)t[e].index=this.maxIndex+e+1;this.merge(t)},i.prototype.indexToTime=function(t){var e=this._marksByIndex[t];return e?new Date(1e3*e.time):null},i.prototype.density=function(){var t,e=this.maxIndex-this.minIndex;if(0!==e)return t=this._marksByIndex[this.maxIndex].time-this._marksByIndex[this.minIndex].time,1e3*t/e},i.prototype.estimateLeft=function(t){var e,i=this.density();if(i)return e=1e3*this._marksByIndex[this.minIndex].time-t,e/i},i.prototype.nearestIndex=function(t){for(var e,i=this.minIndex,n=this.maxIndex;n-i>2;){if(1e3*this._marksByIndex[i].time===t)return i;if(1e3*this._marksByIndex[n].time===t)return n;e=Math.round((i+n)/2),1e3*this._marksByIndex[e].time>t?n=e:i=e}return i},i.prototype.build=function(t,e){var i,n,o,r,s,a,l,c,h,u,d,p,_,f,m=Math.ceil(e/t);if(this._maxbar===m&&this._cache)return this._cache;for(this._maxbar=m,i=[],n=this._marksBySpan.length;n--;)if(this._marksBySpan[n]){for(o=i,i=[],r=o.length,s=0,a=this._marksBySpan[n],l=a.length,c=1/0,h=-1/0,u=0;u<l;u++){for(d=a[u],p=d.index;s<r;){if(_=o[s],!((f=_.index)<p)){c=f;break}s++,i.push(_),h=f,c=1/0}c-p>=m&&p-h>=m&&(i.push(d),h=p)}for(;s<r;s++)i.push(o[s])}return this._cache=i,this._cache},i.prototype.state=function(){var t,e=[];for(t=this._marksBySpan.length;t--;)this._marksBySpan[t]&&(e=e.concat(this._marksBySpan[t]));return e=e.map(function(t){return[t.span,t.time,t.index]}),{marks:e,version:2}},i.prototype.restoreState=function(t){if(this._marksByIndex={},this._marksBySpan=[],delete this.maxIndex,delete this.minIndex,t&&t.marks&&t.marks.length)if(2===t.version){var e=t.marks.map(function(t){return{span:t[0],time:t[1],index:t[2]}});this.merge(e)}else this.merge(t.marks)},t.exports=i}).call(e,i(8))},function(t,e,i){"use strict";var n,o,r;Object.defineProperty(e,"__esModule",{value:!0}),
i.d(e,"TimePoints",function(){return r}),n=i(5),o=Object(n.getLogger)("Chart.TimePoints"),r=function(){function t(){this._zoffset=0,this._items=[]}return t.prototype.clear=function(){this._zoffset=0,this._items=[]},t.prototype.size=function(){return this._items.length},t.prototype.firstIndex=function(){return this._offsetToIndex(0)},t.prototype.lastIndex=function(){return this._offsetToIndex(this._items.length-1)},t.prototype.merge=function(t,e,i){var n,r,s,a,l,c,h,u;if(0===i.length)return o.logError("merge: 'values' does not contain any time points"),[];if(e>this._zoffset&&t+e>0)return o.logError("merge: when the first time point index is updated, we should fill the time points starting from the first one"),[];if(0===this._items.length)return this._items=i,this._zoffset=e,[{change:"rebuild",index:this._validOffsetToIndex(0)}];if((n=t+this._zoffset)<0){if(r=Math.abs(n),i.length<r)return o.logError("merge: 'values' does not contain enough time points to fill in the new items. 'index': "+t+", previous 'zoffset': "+this._zoffset+", new 'zoffset': "+e+", 'values.length': "+i.length),[];for(this._items=Array(r).concat(this._items),this._zoffset=e,s=0;s<i.length;++s)this._items[t+s+e]=i[s];return[{change:"rebuild",index:this._validOffsetToIndex(0)}]}for(a=[],l=n;l<this._items.length&&l-n<i.length;++l)this._items[l]=i[l-n],a.push({change:"update",index:this._validOffsetToIndex(l),value:i[l-n]});if((c=n+i.length)>this._items.length)for(r=c-this._items.length,h=l;h<l+r;++h)u=this._items.length,this._items.push(i[h-n]),a.push({change:"append",index:this._validOffsetToIndex(u),value:i[h-n]});return this._zoffset=e,a},t.prototype.addTail=function(t,e){for(var i=e?1:0;i<t.length;i++)this._items.push(t[i])},t.prototype.remove=function(t){var e,i,n,o=this._indexToOffset(t);if(null===o)return[];for(e=this._items.splice(o),i=[],n=0;n<e.length;n++)i.push({change:"remove",index:t+n,value:e[n]});return i},t.prototype.valueAt=function(t){var e=this._indexToOffset(t);return null!==e?this._items[e]:null},t.prototype.indexOf=function(t,e){if(this._items.length<1)return null;if(t>this._items[this._items.length-1])return e?this._validOffsetToIndex(this._items.length-1):null;for(var i=0;i<this._items.length;++i){if(t===this._items[i])return this._validOffsetToIndex(i);if(t<this._items[i])return e?this._validOffsetToIndex(i):null}return null},t.prototype.state=function(){return{items:this._items,zoffset:this._zoffset}},t.prototype.restoreState=function(t){null!==t&&(this._items=t.items,this._zoffset=t.zoffset)},t.prototype.roughTime=function(t,e){var i,n,o,r,s,a,l,c,h,u,d,p;return void 0===e&&(e=null),null!==(i=this.valueAt(t))?i:(n=this._items,!n.length||n.length<2?null:(o=0,r=n.length-1,s=this._validOffsetToIndex(o),a=this._validOffsetToIndex(r),l=n[o],c=n[r],h=(c-l)/(a-s),t<s?(u=s-t,d=u*h,l-d):(p=500,t>a?(u=t-a)<p&&null!=e?e(c,u):(d=u*h,c+d):null)))},t.prototype.roughIndex=function(t,e){var i,n,o,r,s,a,l,c,h,u,d,p;return void 0===e&&(e=null),i=this._items,!i.length||i.length<2?null:(n=0,o=i.length-1,r=this._validOffsetToIndex(n),
s=this._validOffsetToIndex(o),a=i[n],l=i[o],t>=a&&t<=l?this.closestIndexLeft(t):(c=(l-a)/(s-r),t<a?(h=a-t,u=Math.round(h/c),r-u):(d=500,t>l?(h=t-l,u=Math.trunc(h/c),u<d&&null!==e&&(p=e(l,t),p.success&&(u=p.result)),s+u):null)))},t.prototype.closestIndexLeft=function(t){var e,i,n,o,r,s,a=this._items;if(!a.length)return null;if(Number.isNaN(t))return null;if(e=a.length-1,i=a[e],t>=i)return this._validOffsetToIndex(e);if(n=0,o=a[n],t<o)return null;if(t===o)return this._validOffsetToIndex(n);for(;e>n+1;)if(r=n+e>>1,(s=a[r])>t)e=r;else{if(!(s<t))return s===t?this._validOffsetToIndex(r):null;n=r}return this._validOffsetToIndex(n)},t.prototype._validOffsetToIndex=function(t){return t-this._zoffset},t.prototype._offsetToIndex=function(t){return 0<=t&&t<this.size()?this._validOffsetToIndex(t):null},t.prototype._indexToOffset=function(t){var e=t+this._zoffset;return 0<=e&&e<this.size()?e:null},t}()},function(t,e,i){"use strict";function n(t,e){this.tooltips={},this.tooltipFactory=t,this.source=e}function o(t,e){this.renderer=t,this._tooltip=e,this.visible=!1}n.prototype.findOrCreateTooltip=function(t){var e=this.tooltips[t.id];return null==e&&(t.hovered||t.pinned)&&(e=this._createTooltip(),this.tooltips[t.id]=e),e},n.prototype.showPlate=function(t,e){var i=this.findOrCreateTooltip(t);null!=i&&(i._drawPlate(t,e),i.plateData=t)},n.prototype.draw=function(t,e){this.hoveredId=null;for(var i=0;i<t.length;i++)t[i].hovered&&(this.hoveredId=t[i].id);t.forEach(function(t){this.showPlate(t,e)}.bind(this))},n.prototype.endDraw=function(){var t,e,i=this;for(t in this.tooltips)this.tooltips.hasOwnProperty(t)&&(e=this.tooltips[t],e.toggleVisibility(),i.hoveredId&&e.plateData.id!==i.hoveredId&&!e.plateData.pinned&&(e.remove(),delete this.tooltips[t]))},n.prototype.removeAll=function(){var t,e;for(t in this.tooltips)this.tooltips.hasOwnProperty(t)&&(e=this.tooltips[t],e.remove());this.tooltips={}},n.prototype.removeTooltip=function(t){delete this.tooltips[t]},n.prototype._createTooltip=function(){return new o(this,this.tooltipFactory())},o.prototype._drawPlate=function(t,e){var i=this;this.visible=!0,this._tooltip.setSource(this.renderer.source),this._tooltip.showPlate(t,e),t.hovered||t.pinned||this._tooltip.hide(function(){i.renderer.removeTooltip(t.id)})},o.prototype.remove=function(){this._tooltip._removeLayout()},o.prototype.toggleVisibility=function(){this._tooltip._toggleLayout(this.visible),this.visible=!1},e.TooltipRenderer=n},function(t,e,i){"use strict";function n(t){var e,i;if(t&&t.__esModule)return t;if(e={},null!=t)for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e,i){var n,o=2*G,r=document.createElement("canvas");return r.width=e*o,r.height=i*o,r.style.width=e+"px",r.style.height=i+"px",n=r.getContext("2d"),n.setTransform(o,0,0,o,0,0),n.drawImage(t,0,0,e,i),r}function s(t,e){return function(){i.e(9).then(function(){K=i(937),t.call(e)}.bind(null,i)).catch(i.oe)}}function a(t){
return!P||t>T}var l,c,h,u,d,p,_,f,m,g,y,v,b,S,w,P,T,C,x,k,L,I,A,E,M,O,D,V,R,B,F,N,W,j,H,U,z,q,Y,G,K,X,J;Object.defineProperty(e,"__esModule",{value:!0}),e.Branding=void 0,l=function(){function t(t,e){var i,n,o=[],r=!0,s=!1,a=void 0;try{for(i=t[Symbol.iterator]();!(r=(n=i.next()).done)&&(o.push(n.value),!e||o.length!==e);r=!0);}catch(t){s=!0,a=t}finally{try{!r&&i.return&&i.return()}finally{if(s)throw a}}return o}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=function(){function t(t,e){var i,n;for(i=0;i<e.length;i++)n=e[i],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),h=i(7),u=i(57),d=i(4),p=n(d),_=i(10),f=i(77),m=i(35),g=i(227),y=i(49),v=i(29),b=i(123).debounce,S=i(748),w=!1,P=p.enabled("adaptive_logo"),w=p.enabled("38914"),T=500,C="TradingView",x="Ch{0}ar{1}t{2}by{3}{4}".format("",""," "," ",C),k="po{0}wer{1}ed{2}by{3}{4}".format("",""," "," ",C),L="by{3}{4}".format("",""," "," ",C),I=w?L:k,A="site_branding",E="widget_branding",M="widget_referral_branding",O="widget_custom_branding",D="widget_custom_no_powered_branding",V="fundamental_branding",R="fundamental_custom_branding",B="fundamental_custom_no_powered_branding",F="library_branding",N="library_custom_branding",W="library_custom_no_powered_branding",j=.2,H=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,U=H&&navigator.userAgent.toLowerCase().indexOf("windows")>-1,z=navigator.userAgent.toLowerCase().indexOf("chrome")>-1&&-1===navigator.userAgent.toLowerCase().indexOf("edge"),q=function(){var t,e=window.navigator.userAgent,i=e.indexOf("MSIE ");return i>0?parseInt(e.substring(i+5,e.indexOf(".",i)),10):e.indexOf("Trident/")>0&&(t=e.indexOf("rv:"),parseInt(e.substring(t+3,e.indexOf(".",t)),10))}(),Y=window.urlParams||{},window.initData,G=window.hidpiCanvasRatio||1,K=null,X=function(){function t(e){var i=e.layout,n=void 0===i?A:i,r=e.symbol,a=void 0===r?"":r,l=e.model,c=e.onReadyCallback;o(this,t),this._model=l,this._image=null,this._imageReady=!1,this._needDisplay=!1,this._imageWidth=22,this._imageHeight=13,this._layout=n,this._symbol=a,this.showAnimatedBranding=p.enabled("show_animated_logo"),this.show=!0,this.width=100,this.height=14,this._bottomShift=0,this._brandCircleSize=32,this._animatedWidth=this._brandCircleSize,this._animatedOpacity=0,this.width=this.showAnimatedBranding?this._brandCircleSize:100,this.height=14,this._fillColor=f.color.brandNew,this._colorOldBlue=f.color.brandDown,this._colorOldGray=f.color.black30,this._strokeColor=f.color.black255,this._brandCircleShadowColor=f.color.black0,this._strokeWidth=4,this._fontSize=this.showAnimatedBranding?11:14,this._font='px "Trebuchet MS", Tahoma, Arial, sans-serif',this._txt="TradingView",this._onReadyCallback=c,this._upscaleRatio=z?1:2,this._verticalTextShift=H?this.showAnimatedBranding?2:4:0,this._strokeCanv=null,this._fillCanv=null,
q&&(this._init=s(this._init,this)),this._init()}return c(t,[{key:"_init",value:function(){this._checkLayout(),this.show&&(this._updateStrokeColor(),this.showAnimatedBranding?(this._loadImage(S,"tvLogo"),this._createFillText()):this._loadImage(S,"tvLogo"),this._model.properties().paneProperties.background.subscribe(this,this._updateStrokeColor),this._model.onChartThemeLoaded().subscribe(this,this._updateStrokeColor))}},{key:"_updateStrokeColor",value:function(){var t=(0,m.getLuminance)(this._model.properties().paneProperties.background.value());this._strokeCanv=null,this._fillCanv=null,t>j?(this._brandCircleColor=f.color.black255,this._animatedColorBg=f.color.black255,this._brandCircleShadowOpacity=.09,this._strokeOpacity=.8):(this._brandCircleColor=f.color.black27,this._animatedColorBg=f.color.black27,this._brandCircleShadowOpacity=.09,this._strokeOpacity=.1)}},{key:"_loadImage",value:function(t,e){var i,n=this;this._needDisplay&&(this._image=new Image,this.showAnimatedBranding&&(this._imageWhite=new Image),q?(this._image.src=K.fallbackImages[e+"Blue"],this.showAnimatedBranding&&(this._imageWhite.src=K.fallbackImages[e+"White"])):(i=t.replace(/fill="#[\da-f]{6}"/i,'fill="#FFFFFF"'),this._image.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(t),this.showAnimatedBranding&&(this._imageWhite.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(i))),this._image.addEventListener("load",function(){U&&(n._image=r(n._image,n._imageWidth,n._imageHeight)),n._imageReady=!0,"function"==typeof n._onReadyCallback&&n._onReadyCallback()}))}},{key:"_checkLayout",value:function(){switch(this._layout){case E:case M:case O:case V:case R:case N:case F:this.show=!0;break;case A:case D:case B:case W:this.show=!1}switch(this._layout){case F:this._needDisplay=!0,this._txt=$.t(x);break;case N:this._txt=$.t(I)}}},{key:"_drawTextStroke",value:function(t){var e,i;this._strokeCanv||(this._strokeCanv=document.createElement("canvas"),e=this._strokeCanv.getContext("2d"),i=Math.round(this._strokeWidth*this._upscaleRatio),e.font=this._fontSize*this._upscaleRatio+this._font,this._textWidth=e.measureText(this._txt).width,this._strokeCanv.width=(this._textWidth+2*i)*G,this._strokeCanv.height=(this._fontSize+2*i)*this._upscaleRatio*G,this._strokeCanv.width%2==0&&(this._strokeCanv.width+=1,this._strokeCanv.height+=1),e.textBaseline="top",e.textAlign="start",e.font=this._fontSize*this._upscaleRatio+this._font,e.strokeStyle=this._strokeColor,e.lineWidth=this._strokeWidth*this._upscaleRatio*G,e.lineJoin="round",e.strokeText(this._txt,i,this._verticalTextShift)),t.save(),t.globalAlpha=this._strokeOpacity,t.drawImage(this._strokeCanv,0,0,this._strokeCanv.width,this._strokeCanv.height,0,0,this._strokeCanv.width/this._upscaleRatio/G,this._strokeCanv.height/this._upscaleRatio/G),t.restore()}},{key:"_drawTextFill",value:function(t){this._createFillText(),t.save(),t.drawImage(this._fillCanv,0,0,this._fillCanv.width,this._fillCanv.height,0,0,this._fillCanv.width/this._upscaleRatio/G,this._fillCanv.height/this._upscaleRatio/G),t.restore()}},{
key:"_createFillText",value:function(){var t,e;null===this._fillCanv&&(this._fillCanv=document.createElement("canvas"),t=this._fillCanv.getContext("2d"),e=Math.round(this._strokeWidth*this._upscaleRatio),t.font=this._fontSize*this._upscaleRatio+this._font,void 0===this._textWidth&&(this._textWidth=Math.round(t.measureText(this._txt).width)),this._setSizeFillTextCanvas(e),t.textBaseline="top",t.textAlign="start",t.font=this._fontSize*this._upscaleRatio+this._font,t.fillStyle=this._fillColor,t.fillText(this._txt,e,this._verticalTextShift))}},{key:"_updateFillTextWithColor",value:function(t){var e=Math.round(this._strokeWidth*this._upscaleRatio),i=this._fillCanv.getContext("2d");this._setSizeFillTextCanvas(e),i.clearRect(0,0,this._fillCanv.width,this._fillCanv.height),i.textBaseline="top",i.textAlign="start",i.font=this._fontSize*this._upscaleRatio+this._font,i.fillStyle=t,i.fillText(this._txt,e,this._verticalTextShift)}},{key:"_setSizeFillTextCanvas",value:function(t){this._fillCanv.width=(this._textWidth+2*t)*G,this._fillCanv.height=(this._fontSize+2*t)*this._upscaleRatio*G,this._fillCanv.width%2==0&&(this._fillCanv.width+=1,this._fillCanv.height+=1)}},{key:"_drawFillTextCropWidth",value:function(t,e,i){this._fillCanv?this._updateFillTextWithColor(i):this._createFillText(),t.save(),t.drawImage(this._fillCanv,0,0,e*this._upscaleRatio*G,this._fillCanv.height,0,0,e,this._fillCanv.height/this._upscaleRatio/G),t.restore()}},{key:"_drawBgCircle",value:function(t){t.save(),t.beginPath(),t.fillStyle=this._brandCircleShadowColor,t.globalAlpha=this._brandCircleShadowOpacity,t.arc(this._imageWidth/2,this._imageHeight/2,this._brandCircleSize/2+1,0,2*Math.PI),t.fill(),t.closePath(),t.restore(),t.save(),t.beginPath(),t.fillStyle=this._brandCircleColor,t.arc(this._imageWidth/2,this._imageHeight/2,this._brandCircleSize/2,0,2*Math.PI,!1),t.fill(),t.closePath(),t.restore()}},{key:"_drawFillRectWithRoundedCorner",value:function(t,e,i,n,o,r,s){t.save(),(0,y.drawRoundRect)(t,e-1,i-1,n+2,o+2,r),t.globalAlpha=this._brandCircleShadowOpacity,t.fillStyle=this._brandCircleShadowColor,t.fill(),t.closePath(),t.restore(),t.save(),(0,y.drawRoundRect)(t,e,i,n,o,r),t.fillStyle=s,t.fill(),t.closePath(),t.restore()}},{key:"_drawImageWithColor",value:function(t){t.save(),t.globalAlpha=this._animatedOpacity,t.drawImage(this._imageWhite,0,-.5,this._imageWidth,this._imageHeight),t.restore(),t.save(),t.globalAlpha=1-this._animatedOpacity,t.drawImage(this._image,0,-.5,this._imageWidth,this._imageHeight),t.restore()}},{key:"bottomShift",value:function(){return this._bottomShift}},{key:"minimizedAnimationWidth",value:function(){return this._brandCircleSize}},{key:"maximizedAnimationWidth",value:function(){return this._fillCanv.width/this._upscaleRatio/G+this._brandCircleSize-3}},{key:"animatedDrawStep",value:function(t,e){var i,n,o,r,s,a,c,h,u,d,p,_,f,m,g,y;this._animatedWidth=e,i=this._animatedWidth<this._brandCircleSize+20?0:this._animatedWidth/this.maximizedAnimationWidth(),n=(0,v.parseRgb)(this._brandCircleColor),o=l(n,3),r=o[0],s=o[1],a=o[2],c=(0,
v.parseRgb)(this._fillColor),h=l(c,3),u=h[0],d=h[1],p=h[2],_=(0,v.parseRgb)(this._strokeColor),f=l(_,3),m=f[0],g=f[1],y=f[2],this._animatedColorBg=(0,v.rgbaToString)((0,v.blendRgba)([r,s,a,(0,v.normalizeAlphaComponent)(1)],[u,d,p,(0,v.normalizeAlphaComponent)(i)])),this._animatedColorText=(0,v.rgbaToString)((0,v.blendRgba)([u,d,p,(0,v.normalizeAlphaComponent)(1)],[m,g,y,(0,v.normalizeAlphaComponent)(i)])),this._animatedOpacity=i}},{key:"draw",value:function(t,e){var i,n,o,r,s,l,c,h,u,d;this.showAnimatedBranding?this._needDisplay&&this._imageReady&&(t.save(),i=(this._brandCircleSize-this._imageWidth)/2,n=(this._brandCircleSize-this._imageHeight)/2,t.translate(-i,-n),this._drawFillRectWithRoundedCorner(t,0,0,this._animatedWidth,this._brandCircleSize,this._brandCircleSize/2,this._animatedColorBg),t.translate(i,n),this._drawImageWithColor(t),o=12+(z?-.5:0),r=this._imageWidth+o,this._animatedWidth>r&&(t.translate(this._imageWidth/2+o,.5),this._drawFillTextCropWidth(t,this._animatedWidth-r,this._animatedColorText)),t.restore(),this.width=this._animatedWidth,this.height=this._brandCircleSize,this._bottomShift=this._brandCircleSize-this._imageHeight):this._layout===O||this._layout===R?(s='12px "Trebuchet MS", Tahoma, Arial, sans-serif',t.font=s,l=t.measureText(this._txt).width,this.width=l+t.measureText("TradingView").width,t.save(),t.globalAlpha=.7,t.fillStyle=this._colorOldGray,t.fillText(this._txt,0,12),t.fillStyle=this._colorOldBlue,t.fillText("TradingView",l,12),t.restore()):this._needDisplay&&this._imageReady?(t.save(),c=(this._brandCircleSize-this._imageWidth)/2,t.translate(c,0),this._drawBgCircle(t),t.drawImage(this._image,0,-.5,this._imageWidth,this._imageHeight),h=12+(z?-.5:0),t.translate(this._imageWidth+h,-.5),u=a(e),u&&(this._drawTextStroke(t),this._drawTextFill(t)),t.restore(),this.width=this._imageWidth+c,this.width+=u?h+this._strokeCanv.width/this._upscaleRatio/G:c,this.height=this._brandCircleSize,this._bottomShift=this._brandCircleSize-this._imageHeight):(t.save(),t.translate(z?-.5:0,-.5),d=a(e),d&&(this._drawTextStroke(t),this._drawTextFill(t)),t.restore(),d&&(this.width=this._strokeCanv.width/this._upscaleRatio/G))}}]),t}(),J=function(){function t(e){var i=e.layout,n=void 0===i?A:i,r=e.src,a=e.onReadyCallback;o(this,t),this._img=new Image,this._ready=!1,this.show=!1,this.width=0,this.height=0,this._layout=n,this._src=r,this._onReadyCallback=a,q&&(this._init=s(this._init,this)),this._init()}return c(t,[{key:"_init",value:function(){var t,e,i=this;this._checkLayout(),this.show&&(t=this._src.match(/(\w+)\.svg/),q&&t&&2===t.length?(e=t[1],this._img.src=K.fallbackImages[e],this._img.addEventListener("load",function(){var t=K.logoSizes;e in t?(i.width=t[e].width,i.height=t[e].height):(i.width=135,i.height=25),i._ready=!0,"function"==typeof i._onReadyCallback&&i._onReadyCallback()})):(this._img.src=this._src,this._img.addEventListener("load",function(){i.width=Math.round(i._img.width),i.height=Math.round(i._img.height),U&&(i._img=r(i._img,i.width,i.height)),i._ready=!0,
"function"==typeof i._onReadyCallback&&i._onReadyCallback()})))}},{key:"_checkLayout",value:function(){switch(this._layout){case O:case D:case R:case B:case N:case W:this.show=!0;break;case A:case E:case M:case V:case F:this.show=!1}}},{key:"draw",value:function(t){this._ready&&t.drawImage(this._img,0,0,this.width,this.height)}}]),t}(),e.Branding=function(){function t(e){var i,n=this;o(this,t),this._model=e,this._mainSeries=this._model.mainSeries(),this._canvasWidth=0,this._paneHeight=0,this._left=13,this._bottom=24,this._layout=A,this._needToShow=!0,this._customLogoSrc="",this._customLogoLink="",this._checkLayout(),this._layout!==O&&this._layout!==R||(this._left=8,this._bottom=5),i=function(){n._needToShow?n._layout===A?n._showBranding=window.innerWidth>=768:n._showBranding=!0:n._showBranding=!1},this._resizeHandlerDelayed=b(i,200),i(),window.addEventListener("resize",this._resizeHandlerDelayed),this._model.isSnapshot()?this._init():this._mainSeries.onSymbolResolved().subscribe(this,this._init),this._cubicBezier=new f.CubicBezier(.4,.01,.22,1)}return c(t,[{key:"destroy",value:function(){window.removeEventListener("resize",this._resizeHandlerDelayed)}},{key:"_init",value:function(){var t=this,e=this._mainSeries.symbolInfo()||{};this._powBy=new X({layout:this._layout,symbol:e.name,model:this._model,onReadyCallback:function(){return t._model.fullUpdate()}}),this._custom=new J({layout:this._layout,src:this._customLogoSrc,onReadyCallback:function(){return t._model.fullUpdate()}}),this._openAnimation=null,this._closeAnimation=null}},{key:"_checkLayout",value:function(){if(p.enabled("widget"));else if(p.enabled("charting_library")||p.enabled("amp_terminal")||p.enabled("cqg_terminal")||p.enabled("trading_terminal")){var t=JSON.parse(Y.logo)||{};t.image?(this._customLogoSrc=t.image,this._customLogoLink=t.link,this._needToShow=p.enabled("widget_logo"),p.enabled("link_to_tradingview")?this._layout=N:this._layout=W):(this._layout=F,this._needToShow=p.enabled("widget_logo"))}else this._layout=A}},{key:"_startOpenAnimation",value:function(){null===this._openAnimation&&(null!==this._closeAnimation&&(this._closeAnimation.stop(),this._closeAnimation=null),this._openAnimation=(0,g.doAnimate)({from:this._currentStateForAnimation(),to:this._openedStateForAnimation(),duration:200,easing:this._cubicBezier.easingFunc,onStep:this._animatedDrawStep.bind(this)}))}},{key:"_startCloseAnimation",value:function(){null===this._closeAnimation&&(null!==this._openAnimation&&(this._openAnimation.stop(),this._openAnimation=null),this._closeAnimation=(0,g.doAnimate)({from:this._currentStateForAnimation(),to:this._closedStateForAnimation(),duration:200,easing:this._cubicBezier.easingFunc,onStep:this._animatedDrawStep.bind(this)}))}},{key:"_currentStateForAnimation",value:function(){return this._powBy.width}},{key:"_closedStateForAnimation",value:function(){return this._powBy.minimizedAnimationWidth()}},{key:"_openedStateForAnimation",value:function(){return this._powBy.maximizedAnimationWidth()}},{key:"_animatedDrawStep",value:function(t,e){
this._powBy.animatedDrawStep(t,e),this._model.lightUpdate()}},{key:"updateAllViews",value:function(){}},{key:"priceScale",value:function(){}},{key:"priceAxisViews",value:function(){}},{key:"onClickOutside",value:function(){}},{key:"hasContextMenu",value:function(){return!1}},{key:"hitTest",value:function(t){var e=this;return!this._showBranding||p.enabled("logo_without_link")?null:this._powBy&&this._layout!==A&&this._layout!==D&&this._layout!==B&&(0,u.pointInRectangle)(t,new h.Point(this._left,this._paneHeight-this._bottom+this._powBy.bottomShift()/2-Math.max(this._powBy.height,void 0!==this._custom?this._custom.height:0)),new h.Point(this._left+Math.max(this._powBy.width,void 0!==this._custom?this._custom.width:0),this._paneHeight-this._bottom+this._powBy.bottomShift()/2))?new _.HitTestResult(_.HitTestResult.CUSTOM,{mouseUpHandler:function(){window.open(e.tvUrl(),"_blank").opener=null},mouseEnterHandler:function(){e._startOpenAnimation()},mouseLeaveHandler:function(){e._startCloseAnimation()}}):void 0}},{key:"tvUrl",value:function(){var t,e="https://www.tradingview.com/";if(this._customLogoLink)return this._customLogoLink;if(this._layout===F||this._layout===N){switch(t=void 0,!0){case p.enabled("charting_library"):t="library";break;case p.enabled("trading_terminal"):case p.enabled("amp_terminal"):case p.enabled("cqg_terminal"):t="trading-terminal"}return e+="/"===e[e.length-1]?"?":"&",e+="utm_source="+window.location.origin+"&utm_medium=library"+(t?"&utm_campaign="+t:"")}return e}},{key:"draw",value:function(t){if(this._showBranding){var e=0;this._powBy&&this._powBy.show&&(e=this._powBy.height-this._powBy.bottomShift(),t.save(),t.translate(this._left,this._paneHeight-this._bottom-e),this._powBy.draw(t,this._canvasWidth),t.restore()),this._custom&&this._custom.show&&(t.save(),t.translate(this._left,this._paneHeight-this._bottom-e-this._custom.height),this._custom.draw(t),t.restore())}}},{key:"renderer",value:function(t,e){return this._paneHeight=this._pane.height(),this._canvasWidth=e,{draw:this.draw.bind(this),hitTest:this.hitTest.bind(this)}}},{key:"paneViews",value:function(t){var e=p.enabled("move_logo_to_main_pane");return e&&t.isMainPane()||!e&&t.isLast()||t.isMaximized()?(this._pane=t,[{renderer:this.renderer.bind(this)}]):[]}}]),t}()},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 13" width="22" height="13"><path fill="#37A6EF" fill-rule="nonzero" d="M19.354 4.932c.379.55.611 1.207.642 1.918A3.007 3.007 0 0 1 22 9.686a3.003 3.003 0 0 1-3 3.006H4a3.983 3.983 0 0 1-2.814-1.16l6.363-5.048a1.657 1.657 0 0 0 1.495.037l3.034 2.66a1.672 1.672 0 0 0 1.589 2.175 1.668 1.668 0 0 0 1.552-2.28l4.135-4.144zm-.942-.945L14.276 8.13a1.66 1.66 0 0 0-1.32.044l-3.034-2.66A1.672 1.672 0 0 0 8.333 3.34a1.668 1.668 0 0 0-1.611 2.097l-6.316 5.01A3.999 3.999 0 0 1 0 8.683a4.004 4.004 0 0 1 4.041-4.008A5.338 5.338 0 0 1 9.333 0a5.337 5.337 0 0 1 5.124 3.857 3.644 3.644 0 0 1 1.876-.517c.772 0 1.488.239 2.079.647z"/></svg>'},function(t,e,i){"use strict";(function(t){function n(t,e,i,n){this._prices=[],
this._canvas=$("<canvas>"),this._cache=this._canvas.get(0).getContext("2d"),this.reset({font:t,fontSize:e,backColors:i,colors:n}),this._priceAxisFontSize=11}function o(t,e){this._model=t,this._source=e,this._pivots=[],this._textCache={}}function r(t,e){this._source=t,this._model=t._model,this._prices=[],this._invidated=!0,this._cache=e}function s(t,e,i,n){var o,r,s;for(p.call(this,t,e,i,n),o=["P","S1/R1","S2/R2","S3/R3","S4/R4","S5/R5"],r=this.properties().levelsStyle.visibility,s=0;s<o.length;s++)r[o[s]].listeners().subscribe(this,TradingView.Study.prototype.processHibernate)}var a=i(7).Point,l=i(29),c=l.parseRgb,h=l.rgbToBlackWhiteString,u=i(138),d=i(136).StudyDataWindowView,p=i(212).NonSeriesStudy,_=i(750).StandardPivotPointsPriceAxisView,f=i(217).TrendLineRenderer,m=i(112),g=i(369),y=i(10).HitTestResult,v=i(66).CompositeRenderer,b=i(20).PlotRowSearchMode,S=i(2).propertyPages,w=i(116).LineEnd;n.prototype.destroy=function(){this._canvas.remove()},n.prototype.reset=function(t){this._prices=[],this._params=t,this._cache.setFont(t.fontSize+"px "+t.font);var e=this;this._labelWidth=["P","S1","R1","S2","R2","S3","R3","S4","R4","S5","R5","/"].reduce(function(t,i){var n=e._cache.measureText(i).width;return Math.max(n,t)},0)},n.prototype.rowHeight=function(){return this._priceAxisFontSize+4},n.prototype._labelRectByIndex=function(t){return{left:0,top:Math.round(this._topByIndex(t)),width:Math.round(this._labelWidth+4),height:this._params.fontSize+8}},n.prototype.params=function(){return this._params},n.prototype._centerByIndex=function(t){return Math.round((t+.5)*(this._params.fontSize+8))},n.prototype._topByIndex=function(t){return Math.round(t*(this._params.fontSize+8))},n.prototype.setPrices=function(t){var e,i,n,o,r,s,a=8,l=!1,c=function(t,e){return void 0===t&&void 0===e||t.formatted===e.formatted};if(t.length!==this._prices.length)l=!0;else for(e=0;e<this._prices.length;e++)if(!c(this._prices[e],t[e])){l=!0;break}if(l){for(i=this,i._cache.save(),i._cache.font=this._priceAxisFontSize+"px Arial",i._cache.restore(),n=this._labelWidth+6,o=window.hidpiCanvasRatio||1,n*=o,this._canvas.prop("width",n),r=Math.max(t.length,22)*(this._params.fontSize+a),r*=o,this._canvas.prop("height",r),this._canvas.css("width",n).css("height",r),this._prices=t,this._cache.clearRect(0,0,n,r),this._cache.save(),this._cache.translate(.5,.5),this._cache.font=this._params.fontSize+"px "+this._params.font,this._cache.textBaseline="middle",e=0;e<this._prices.length;e++)this._prices[e]&&(s=["P","S1","R1","S2","R2","S3","R3","S4","R4","S5","R5"][e],this._cache.fillStyle=this._params.backColors[e],this._cache.fillText(s,0,this._centerByIndex(e)),this._cache.fillText("/",0,this._centerByIndex(e+11)));this._prices=t,this._cache.restore()}},o.prototype.setCache=function(t){this._cache=t},o.prototype.priceAxisViews=function(t,e){return this._priceAxisViews},o.prototype.mergeLabel=function(t,e,i){var n=""+e;void 0===t[n]?(t[n]={},t[n].text=i,t[n].ids=[this.complete(i)]):(t[n].text+="/"+i,t[n].ids.push(this.complete(i)))},o.prototype.complete=function(t){
return"P"===t?t:"S"+t[1]+"/R"+t[1]},o.prototype.update=function(){this._invalidated=!0},o.prototype._updateImpl=function(){var t,e,i,n,o,r,s,a,l,c,h,u,d,p,_,f,m,g;if(this._source.pricesView().prices(),this._pivots=[],this._source.customData()&&this._source.customData().pivots&&this._source.properties().visible.value()&&(t=this._source.customData().pivots,e=this._source._indexes,i=this._model.timeScale(),(n=this._source.priceScale())&&!n.isEmpty()&&!i.isEmpty()&&t&&(o=i.visibleBars(),r=o.firstBar(),s=o.lastBar(),this._source.ownerSource())))for(a=this._source.ownerSource().firstValue(),l=0;l<t.length;l++)if(t[l]&&(c=e[t[l].startIndex],!((h=e[t[l].endIndex])<r||c>s))){u={},d=this._source.properties().levelsStyle.visibility,d.P.value()&&this.mergeLabel(u,t[l].p,"P"),d["S1/R1"].value()&&(this.mergeLabel(u,t[l].s1,"S1"),this.mergeLabel(u,t[l].r1,"R1")),d["S2/R2"].value()&&(this.mergeLabel(u,t[l].s2,"S2"),this.mergeLabel(u,t[l].r2,"R2")),d["S3/R3"].value()&&(this.mergeLabel(u,t[l].s3,"S3"),this.mergeLabel(u,t[l].r3,"R3")),d["S4/R4"].value()&&(this.mergeLabel(u,t[l].s4,"S4"),this.mergeLabel(u,t[l].r4,"R4")),d["S5/R5"].value()&&(this.mergeLabel(u,t[l].s5,"S5"),this.mergeLabel(u,t[l].r5,"R5")),p=i.indexToCoordinate(c),_=i.indexToCoordinate(h);for(f in u)m=parseFloat(f),g=n.priceToCoordinate(m,a),this._pivots.push({x1:p,x2:_,y:g,label:u[f].text,labelIds:u[f].ids})}},o.prototype.renderer=function(){var t,e,i,n,o,r,s,l,c,h,u,d,p,_,m,b,S;for(this._invalidated&&(this._updateImpl(),this._invalidated=!1),t=new v,e=this._source.properties().levelsStyle.colors,i=this._source.properties().levelsStyle.widths,n=0;n<this._pivots.length;n++)if(o=this._pivots[n],r=new a(o.x1,o.y),s=new a(o.x2,o.y),l={points:[r,s],width:this._model.timeScale().width(),height:this._source.priceScale().height(),color:e[o.labelIds[0]].value(),linewidth:i[o.labelIds[0]].value(),linestyle:CanvasEx.LINESTYLE_SOLID,extendleft:!1,extendright:!1,leftend:w.Normal,rightend:w.Normal},c=new f,c.setData(l),c.setHitTest(new y(y.REGULAR)),t.append(c),this._source.properties().levelsStyle.showLabels.value())for(h=o.label.split("/"),u=0,d=0;d<h.length;d++)p=["P","S1","R1","S2","R2","S3","R3","S4","R4","S5","R5"].indexOf(h[d]),d>0&&(_=this._cache._labelRectByIndex(p+11),m={left:r.x-_.width+u,top:Math.round(r.y-_.height/2),width:_.width,height:_.height},u+=_.width/2,b=this._cache._canvas.get(0),S=new g(b,_,m),t.append(S)),_=this._cache._labelRectByIndex(p),m={left:r.x-_.width+u,top:Math.round(r.y-_.height/2),width:_.width,height:_.height},u+=_.width,b=this._cache._canvas.get(0),S=new g(b,_,m),t.append(S);return t},r.prototype._updateImpl=function(){var t,e,i,n,o,r,s,a,l,c,h,u,d,p,_,f,m,g,y,v;if(!this._model.timeScale().isEmpty()&&!this._source.priceScale().isEmpty()&&null!==(t=this._model.timeScale().visibleBars())&&this._source.customData()&&this._source.customData().pivots&&(e=this._model.mainSeries(),i=this._source.priceScale(),null!==(n=e.bars().search(t.lastBar(),b.NearestLeft)))){for(o=n.index,r=this._source.customData().pivots,s=this._source._indexes,
a=this._source.properties(),l=this._source.firstValue(),c=0;c<r.length;c++)if(r[c]&&(h=s[r[c].startIndex],u=s[r[c].endIndex],d=a.inputs.showHistoricalPivots.value(),u>=o&&h<=o||!d))for(p=["p","s1","r1","s2","r2","s3","r3","s4","r4","s5","r5"],this._prices=[],_=0;_<p.length;_++)f=p[_],void 0!==(m=r[c][f])&&(g=i.priceToCoordinate(m,l),y={P:"P",S1:"S1/R1",S2:"S2/R2",S3:"S3/R3",S4:"S4/R4",S5:"S5/R5",R1:"S1/R1",R2:"S2/R2",R3:"S3/R3",R4:"S4/R4",R5:"S5/R5"},v=a.levelsStyle.colors[y[f.toUpperCase()]].value(),this._prices.push({formatted:i.formatPrice(m,l),price:m,coordinate:g,color:v}));this._cache.setPrices(this._prices)}},r.prototype.update=function(){this._invidated=!0},r.prototype.prices=function(){return this._invidated&&(this._updateImpl(),this._invidated=!1),this._prices},inherit(s,p),s.prototype.lastValueData=function(t,e,i){var n=["P","S1","R1","S2","R2","S3","R3","S4","R4","S5","R5"].indexOf(t.toUpperCase()),o={noData:!0},r=this._pricesView.prices()[n];return null!==r&&void 0!==r?r:o},s.prototype.lastPriceLabelFixedCoordinate=function(t){var e=["P","S1","R1","S2","R2","S3","R3","S4","R4","S5","R5"].indexOf(t.toUpperCase());return this._priceAxisViews[e]._fixedCoordinate},s.prototype.priceLabelText=function(t){return this._metaInfo.shortDescription+":"+t.toUpperCase()},s.prototype.pricesView=function(){return this._pricesView},s.prototype._getActualCacheParams=function(){var t={};return t.font=this.properties().font.value(),t.fontSize=this.properties().fontsize.value(),t.backColors=[this.properties().levelsStyle.colors.P.value(),this.properties().levelsStyle.colors["S1/R1"].value(),this.properties().levelsStyle.colors["S1/R1"].value(),this.properties().levelsStyle.colors["S2/R2"].value(),this.properties().levelsStyle.colors["S2/R2"].value(),this.properties().levelsStyle.colors["S3/R3"].value(),this.properties().levelsStyle.colors["S3/R3"].value(),this.properties().levelsStyle.colors["S4/R4"].value(),this.properties().levelsStyle.colors["S4/R4"].value(),this.properties().levelsStyle.colors["S5/R5"].value(),this.properties().levelsStyle.colors["S5/R5"].value()],t.colors=t.backColors.map(function(t){return"black"===h(c(t),150)?"white":"black"}),t},s.prototype.updateAllViews=function(){p.prototype.updateAllViews.call(this),this._pricesView.update()},s.prototype.createViews=function(){var t,e,i,s,a,l=this._getActualCacheParams();for(this._cache&&this._cache.destroy(),this._cache=new n(l.font,l.fontSize,l.backColors,l.colors),this._priceAxisViews=[],t=["P","S1","R1","S2","R2","S3","R3","S4","R4","S5","R5"],this._paneViews.length=0,e=new o(this._model,this),e.setCache(this._cache),this._paneViews.push(e),i=this.properties().levelsStyle.visibility,s=0;s<t.length;s++)this._priceAxisViews.push(new _(this,{name:t[s],cache:this._cache})),a="P"===t[s].toUpperCase()?"P":"S"+t[s][1]+"/R"+t[s][1],i[a]&&i[a].value()&&this._paneViews.push(new m(this._model,this,t[s],"priceLabelText","showStudyPlotLabels"));this._dataWindowView||(this._dataWindowView=new d(this,this._model)),
this._statusView||(this._statusView=new u(this,this._model.properties())),this._legendView=null,this._pricesView=new r(this,this._cache)},s.prototype._postProcessGraphics=function(){},s.prototype.isVisible=function(){var t,e,i;if(!this.properties().visible.value())return!1;for(t=["P","S1/R1","S2/R2","S3/R3","S4/R4","S5/R5"],e=this.properties().levelsStyle.visibility,i=0;i<t.length;i++)if(e[t[i]].value())return!0;return!1},s.prototype.stop=function(){TradingView.Study.prototype.stop.call(this),this._cache&&(this._cache.destroy(),this._cache=null)},s.prototype.priceRange=function(e,i){var n,o,r,s,a,l,c,h;if(!this.customData()||!this.customData().pivots||!this._indexes)return null;if(!this.priceScale())return null;for(n=this.customData().pivots,o=this._indexes,r=null,s=0;s<n.length;s++)if(n[s]&&(a=o[n[s].startIndex],!(o[n[s].endIndex]<e||a>i)))for(l=[],c=this._properties.levelsStyle.visibility,c.P.value()&&l.push(n[s].p),c["S1/R1"].value()&&l.push(n[s].s1,n[s].r1),c["S2/R2"].value()&&l.push(n[s].s2,n[s].r2),c["S3/R3"].value()&&l.push(n[s].s3,n[s].r3),c["S4/R4"].value()&&l.push(n[s].s4,n[s].r4),c["S5/R5"].value()&&l.push(n[s].s5,n[s].r5),h=0;h<l.length;h++)l[h]&&(null===r?r=new t(l[h],l[h]):r.apply(l[h],l[h]));return this.priceScale().isLog()&&r?new t(this.priceScale().priceToLogical(r.minValue()),this.priceScale().priceToLogical(r.maxValue())):r},s.prototype.getStylesPropertyPage=function(){return S.StudyPivotPointsStandardStylesPropertyPage},e.study_PivotPointsStandard=s}).call(e,i(65).PriceRange)},function(t,e,i){"use strict";var n,o,r,s;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"StandardPivotPointsPriceAxisView",function(){return s}),n=i(0),o=i(54),r=["P","S1","R1","S2","R2","S3","R3","S4","R4","S5","R5"],s=function(t){function e(e,i){var n,o=t.call(this)||this;return o._source=e,o._data=i,n=i.name,o._completeName="P"===n.toUpperCase()?"P":"S"+n[1]+"/R"+n[1],o}return n.c(e,t),e.prototype._updateRendererData=function(t){var e,i,n,o,s,a,l,c,h,u;t.visible=!1,e=this._source.properties(),e.visible.value()&&(i=this._completeName,n=e.levelsStyle.visibility,n[i]&&n[i].value()&&(o=this._source.model(),s=o.timeScale(),a=this._source.priceScale(),s.isEmpty()||null===s.visibleBars()||null!==a&&a.isEmpty()||(l=this._source.customData())&&l.pivots&&(c=this._source.pricesView().prices(),h=r.indexOf(this._data.name.toUpperCase()),(u=c[h])&&(t.background=u.color,t.color=this.generateTextColor(u.color),t.coordinate=u.coordinate,t.floatCoordinate=u.floatCoordinate,t.text=u.formatted,t.visible=!0))))},e}(o.a)},function(t,e,i){"use strict";function n(t,e){this._source=t,this._model=e,this._points=[new r(0,0)],this._lineRenderer=new P}function o(t,e,i,n){this._waterlineView=null,this._symbolLabelView=new T(t,this,void 0,"symbol","showSymbolLabels"),a.call(this,t,e,i,n),this._formatter=null,this._paneView=null;var o=this;this.properties().minTick.listeners().subscribe(null,function(){o._createFormatter(),o.updateAllViews(),o._model.invalidate(new C(C.FULL_UPDATE))}),
this.properties().style.listeners().subscribe(this,this._updateBarFunction),this.properties().lineStyle.priceSource.listeners().subscribe(this,this._updateBarFunction),this.properties().areaStyle.priceSource.listeners().subscribe(this,this._updateBarFunction),this.properties().baselineStyle.priceSource.listeners().subscribe(this,this._updateBarFunction),this._updateBarFunction()}var r=i(7).Point,s=i(71).Series,a=i(39).Study,l=i(51),c=i(20).PlotRowSearchMode,h=i(752).OverlayPriceAxisView,u=i(341),d=u.SeriesAreaPaneView,p=u.SeriesLinePaneView,_=u.SeriesHollowCandlesPaneView,f=u.SeriesCandlesPaneView,m=u.SeriesBarsPaneView,g=u.SeriesBaselinePaneView,y=i(342).SeriesWaterlinePaneView,v=i(138),b=i(346).OverlayDataWindowView,S=i(753).OverlayLegendView,w=i(197).SeriesBarColorer,P=i(124).HorizontalLineRenderer,T=i(112),C=i(17),x=i(13).PriceFormatter,k=i(2).propertyPages,L=i(4),I=!L.enabled("hide_study_overlay_legend_item");n.prototype.update=function(){if(this._visible=!1,this._source.properties().showPriceLine.value()){var t=this._source.lastValueData(void 0,!0);t.noData||(this._visible=!0,this._points=[new r(0,t.coordinate)],this._color=t.color)}},n.prototype.renderer=function(){var t={};return t.width=this._model.timeScale().width(),t.height=this._source.priceScale().height(),t.points=this._points,t.color=this._color,t.linewidth=1,t.linestyle=CanvasEx.LINESTYLE_DOTTED,t.visible=this._visible,this._lineRenderer.setData(t),this._lineRenderer},inherit(o,a),o.prototype.createPlotLabels=function(t){},o.prototype._showLastValueOnPriceScale=function(){return this._model.properties().scalesProperties.showSeriesLastValue.value()},o.prototype.symbol=function(){var t,e=this.properties().inputs.symbol.value(),i=this._resolvedSymbols?this._resolvedSymbols[e]:null;return t=i?i.name:e,t.toUpperCase()},o.prototype.lastValueData=function(t,e,i){var n,o,r,a,l,h,u,d,p,_,f,m,g,y={noData:!0};if(this._model.timeScale().isEmpty()||null==this.priceScale()||this.priceScale().isEmpty()||this.data().isEmpty())return y;if(null===(n=this._model.timeScale().visibleBars()))return y;if(!this.properties().visible.value())return y;if(null==(o=this.nearestIndex(n.lastBar(),c.NearestLeft)))return y;if(r=this._lastNonEmptyPlotRow(TradingView.CLOSE_PLOT),a=null!==r&&n.contains(r.index),l=null!==r?r.value:null,h=e||a?l:this.data().valueAt(o),u=this._barFunction(h),!h||!isNumber(u))return y;if(d={noData:!1},i&&(d.price=u),!(p=this.firstValue(!0)))return y;switch(d.text=this.priceScale().formatPrice(u,p),d.floatCoordinate=this.priceScale().priceToCoordinate(u,p,!0),d.coordinate=Math.round(d.floatCoordinate),d.item=h,_=this.properties(),_.style.value()){case s.STYLE_BARS:d.color=h[TradingView.OPEN_PLOT]<=h[TradingView.CLOSE_PLOT]?_.barStyle.upColor.value():_.barStyle.downColor.value();break;case s.STYLE_CANDLES:case s.STYLE_HOLLOW_CANDLES:d.color=h[TradingView.OPEN_PLOT]<=h[TradingView.CLOSE_PLOT]?_.candleStyle.upColor.value():_.candleStyle.downColor.value();break;case s.STYLE_LINE:d.color=_.lineStyle.color.value();break;case s.STYLE_AREA:
d.color=_.areaStyle.color1.value();break;case s.STYLE_BASELINE:f=_.baselineStyle,m=this.priceScale(),g=Math.round(m.height()*(Math.abs(100-f.baseLevelPercentage.value())/100)),d.color=d.coordinate<g?_.baselineStyle.topLineColor.value():_.baselineStyle.bottomLineColor.value()}return d},o.prototype.firstValue=function(t){var e,i,n=this._model.timeScale().visibleBars();return null===n?null:(e=n.firstBar(),0===this.data().size()?null:(i=this.data().search(e,c.NearestRight),null!==i?this._barFunction(i.value):null))},o.prototype.barFunction=function(){return this._barFunction},o.prototype._updateBarFunction=function(){this._barFunction=l.barFunction(this._currentPriceSource())},o.prototype._currentPriceSource=function(){switch(this._properties.style.value()){case s.STYLE_LINE:return this._properties.lineStyle.priceSource.value();case s.STYLE_AREA:return this._properties.areaStyle.priceSource.value();case s.STYLE_BASELINE:return this._properties.baselineStyle.priceSource.value()}return"close"},o.prototype.createViews=function(){this._priceAxisViews=[],this._priceAxisViewsBase=[new h(this)],this._paneViews=[];var t=null;switch(this._properties.style.value()){case s.STYLE_BARS:t=new m(this,this._model);break;case s.STYLE_CANDLES:t=new f(this,this._model);break;case s.STYLE_HOLLOW_CANDLES:t=new _(this,this._model);break;case s.STYLE_LINE:t=new p(this,this._model);break;case s.STYLE_AREA:t=new d(this,this._model);break;case s.STYLE_BASELINE:t=new g(this,this._model),this._waterlineView=new y(this)}t&&this._paneViews.push(t),null!==this._waterlineView&&this._paneViews.push(this._waterlineView),this._paneViews.push(new n(this,this._model)),this._paneViews.push(this._symbolLabelView),this._dataWindowView||(this._dataWindowView=new b(this,this._model)),this._legendView||(this._legendView=new S(this,this._model)),this._statusView||(this._statusView=new v(this,this._model.properties())),this._priceAxisViews=[].concat(this._priceAxisViewsBase,this._hlinesPriceAsisViews,this._horizlinesPriceAsisViews)},o.prototype.barColorer=function(){return new w(this)},o.prototype.start=function(t){this._formatter=null,a.prototype.start.apply(this,arguments),this.priceScale()&&this.priceScale().updateFormatter()},o.prototype._createFormatter=function(){var t,e,i,n,o,r,s;"default"===this.properties().minTick.value()?(t=this.properties().inputs.symbol.value(),e=this._resolvedSymbols[t],this._formatter=new x(e?e.pricescale:100,e?e.minmov:1,!!e&&e.fractional)):(i=this.properties().minTick.value(),n=isNumber(i)?["100","1","false"]:i.split(","),o=parseInt(n[0]),r=parseInt(n[1]),s="true"===n[2],this._formatter=new x(o,r,s)),this.priceScale()&&this.priceScale().updateFormatter()},o.prototype.formatter=function(){return this._formatter||this._createFormatter(),this._formatter},o.prototype._tryChangeInputs=function(){a.prototype._tryChangeInputs.call(this),this.m_formatter=null,this.priceScale().updateFormatter()},o.prototype.title=function(){var t,e=this.properties().inputs.symbol.value(),i=this._resolvedSymbols[e];return i?(t=i.name,
i.exchange&&0!==i.exchange.length&&(t+=", "+i.exchange)):t=e,t.toUpperCase()},o.prototype.bars=function(){return this.m_data},o.prototype.open=function(t){return this.bars().valueAt(t)[TradingView.OPEN_PLOT]},o.prototype.high=function(t){return this.bars().valueAt(t)[TradingView.HIGH_PLOT]},o.prototype.low=function(t){return this.bars().valueAt(t)[TradingView.LOW_PLOT]},o.prototype.close=function(t){return this.bars().valueAt(t)[TradingView.CLOSE_PLOT]},o.prototype.hl2=function(t){return(this.high(t)+this.low(t))/2},o.prototype.hlc3=function(t){return(this.high(t)+this.low(t)+this.close(t))/3},o.prototype.ohlc4=function(t){return(this.open(t)+this.high(t)+this.low(t)+this.close(t))/4},o.prototype.symbolInfo=function(){if(!this._resolvedSymbols)return null;var t=this._properties.inputs.symbol.value();return t?this._resolvedSymbols[t]:null},o.prototype.lastPriceLabelFixedCoordinate=function(){return this._priceAxisViews[0]._fixedCoordinate},o.prototype.tags=function(){var t=[],e=this.symbolInfo();return e?t.push(e.name):this._properties.inputs.symbol.value()&&t.push(this._properties.inputs.symbol.value()),t},o.prototype.statusView=function(){return I?a.prototype.statusView.call(this):null},o.prototype.getStylesPropertyPage=function(){return k.StudyOverlayStylesPropertyPage},e.study_Overlay=o},function(t,e,i){"use strict";var n,o,r;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"OverlayPriceAxisView",function(){return r}),n=i(0),o=i(54),r=function(t){function e(e){var i=t.call(this)||this;return i._source=e,i}return n.c(e,t),e.prototype._updateRendererData=function(t){t.visible=!1;var e=this._source.lastValueData("close",!1);e.noData||(t.background=e.color,t.color=this.generateTextColor(e.color),t.coordinate=e.coordinate,t.floatCoordinate=e.floatCoordinate,t.text=e.text,t.visible=!0)},e}(o.a)},function(t,e,i){"use strict";var n,o,r;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"OverlayLegendView",function(){return r}),n=i(0),o=i(346),r=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n._additional=null,n._showBarChange=i.properties().paneProperties.legendProperties.showBarChange,n._showSeriesOHLC=i.properties().paneProperties.legendProperties.showSeriesOHLC,n._studyOverlay=e,n._showBarChange.subscribe(n,n.update),n._showSeriesOHLC.subscribe(n,n.update),n}return n.c(e,t),e.prototype.isValuesVisible=function(){return this._showSeriesOHLC.value()||this._showBarChange.value()},e.prototype.additional=function(){return this._additional},e.prototype.destroy=function(){this._showBarChange.unsubscribeAll(this),this._showSeriesOHLC.unsubscribeAll(this)},e.prototype._updateImpl=function(){var e;t.prototype._updateImpl.call(this),e=this._showSeriesOHLC.value(),this._items[0].setVisible(e),this._items[1].setVisible(e),this._items[2].setVisible(e),this._items[3].setVisible(e),this._items[4].setVisible(this._showBarChange.value())},e}(o.OverlayDataWindowView)},function(t,e,i){"use strict";function n(t,e,i,n){this._symbolLabelView=new a(t,this,"compare","symbol","showSymbolLabels"),o.call(this,t,e,i,n)
;var r=this;this._properties.minTick.listeners().subscribe(null,function(){r._createFormatter()}),this.properties().minTick.listeners().subscribe(null,function(){r._model.invalidate(new l(l.FULL_UPDATE))}),this._properties.merge({skipHistogramBaseOnAutoScale:!0})}var o=i(39).Study,r=i(755).CompareLegendView,s=i(347).CompareDataWindowView,a=i(112),l=i(17),c=i(13).PriceFormatter,h=i(2).propertyPages,u=i(4),d=!u.enabled("hide_study_compare_legend_item");inherit(n,o),n.prototype.createPlotLabels=function(t){},n.prototype._showLastValueOnPriceScale=function(){return this._model.properties().scalesProperties.showSeriesLastValue.value()},n.prototype.createViews=function(){this._legendView||(this._legendView=new r(this,this._model)),this._dataWindowView||(this._dataWindowView=new s(this,this._model)),o.prototype.createViews.call(this),this._paneViews.push(this._symbolLabelView)},n.prototype._createFormatter=function(){var t,e,i,n,o,r=this.properties().inputs.symbol.value(),s=this._resolvedSymbols?this._resolvedSymbols[r]:null;"default"===this.properties().minTick.value()?this._formatter=new c(s?s.pricescale:100,s?s.minmov:1,!!s&&s.fractional):(t=this.properties().minTick.value(),e=isNumber(t)?["100","1","false"]:t.split(","),i=parseInt(e[0]),n=parseInt(e[1]),o="true"===e[2],this._formatter=new c(i,n,o)),this.priceScale()&&this.priceScale().updateFormatter()},n.prototype.symbol=function(){var t,e=this.properties().inputs.symbol.value(),i=this._resolvedSymbols?this._resolvedSymbols[e]:null;return t=i?i.name:e,t.toUpperCase()},n.prototype.title=function(t){var e,i=this.properties().inputs.symbol.value(),n=this._resolvedSymbols?this._resolvedSymbols[i]:null;return n?(e=n.name,n.exchange&&0!==n.exchange.length&&(e+=", "+n.exchange)):e=i,e.toUpperCase()},n.prototype.symbolInfo=function(){if(!this._resolvedSymbols)return null;var t=this._properties.inputs.symbol.value();return t?this._resolvedSymbols[t]:null},n.prototype.lastPriceLabelFixedCoordinate=function(){return this._priceAxisViews[0]._fixedCoordinate},n.prototype.tags=function(){var t=this.symbol();return t?[t]:[]},n.prototype.statusView=function(){return d?o.prototype.statusView.call(this):null},n.prototype.getInputsPropertyPage=function(){return h.StudyCompareInputsPropertyPage},n.prototype.guiPlotName=function(t){return this.properties().inputs.symbol.value()},e.study_Compare=n},function(t,e,i){"use strict";var n,o,r;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"CompareLegendView",function(){return r}),n=i(0),o=i(347),r=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n._additional=null,n._showStudyValues=i.properties().paneProperties.legendProperties.showStudyValues,n._showStudyValues.subscribe(n,n.update),n}return n.c(e,t),e.prototype.isValuesVisible=function(){return this._showStudyValues.value()},e.prototype.destroy=function(){this._showStudyValues.unsubscribeAll(this)},e.prototype.additional=function(){return this._additional},e.prototype._updateImpl=function(){t.prototype._updateImpl.call(this)},e}(o.CompareDataWindowView)},function(t,e,i){
"use strict";function n(t,e,i,n){s.call(this,t,e,i,n),this._underlyingData=new a(this._plotFields)}var o=i(6).assert,r=i(12).clone,s=i(39).Study,a=i(20).PlotList;inherit(n,s),n.prototype.clearData=function(){s.prototype.clearData.call(this),this._underlyingData.clear()},n.prototype._mergeData=function(t){var e,i;this._invalidateLastNonEmptyPlotRowCache(),e=this._underlyingData.firstIndex(),this._underlyingData.merge(t),e!==this._underlyingData.firstIndex()&&(this.m_data=new a(this._underlyingData.plotNames())),i=this.m_data.lastIndex(),this._underlyingData.range(i,this._underlyingData.lastIndex()).each(function(t,e){return this.m_data.add(t,r(e)),!1}.bind(this)),this._plotsForStrategyProcessing().forEach(function(t){this._createStrategy(t.strategy,t.strategyIndex,t.targetIndex,i).rebuildData(this.m_data)},this)},n.prototype._plotsForStrategyProcessing=function(){var t=["dataoffset"],e=[];return this._metaInfo.plots.forEach(function(i,n){var r,s;t.indexOf(i.type)>-1&&(r=null,this._metaInfo.plots.forEach(function(t,e){t.id===i.target&&(r=e)}),o(r>=0,"target plot not found for strategy plot "+i.id),s={strategy:i.type,strategyIndex:n,targetIndex:r},e.push(s))},this),e},n.prototype._createStrategy=function(t,e,i,o){return new n["Strategy_"+t](e,i,o)},n.Strategy_dataoffset=function(t,e,i){this._strategyPlotIndex=t,this._targetPlotIndex=e,this._startIndex=i},n.Strategy_dataoffset.prototype.rebuildData=function(t){var e=this._targetPlotIndex+1,i=this._strategyPlotIndex+1,n=null,o=null;t.range(this._startIndex||t.firstIndex(),t.lastIndex()).each(function(r,s){var a,l,c,h=s[e],u=s[i]?Math.round(s[i]):null;return s[e]=null,s[i]=null,!(!u||u>0)&&(a=r+u,l={pointIndex:a,value:h},o?o.pointIndex!==l.pointIndex&&(a>=0&&(t.valueAt(a)[e]=h),c=!1,n&&(c=n.value<=o.value&&o.value<=h||n.value>=o.value&&o.value>=h),c?o.pointIndex>=0&&(t.valueAt(o.pointIndex)[e]=null):n=o,o=l):o=l,!1)})},e.study_ScriptWithDataOffset=n},function(t,e,i){"use strict";var n,o,r;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"MainSeriesScaleRatioProperty",function(){return r}),n=i(8),o=i.n(n),r=function(){function t(t){this._changed=new o.a,this._model=t}return t.prototype.getStepChangeValue=function(){return.1},t.prototype.getMinValue=function(){return 1e-7},t.prototype.getMaxValue=function(){return 9999},t.prototype.value=function(){return this._model.mainSeriesScaleRatio()},t.prototype.setValue=function(t,e){(t!==this.value()||e)&&(this._model.setMainSeriesScaleRatio(t),this._onChanged())},t.prototype.state=function(){return null},t.prototype.clone=function(){return new t(this._model)},t.prototype.listeners=function(){return this._changed},t.prototype.subscribe=function(t,e){this._changed.subscribe(t,e)},t.prototype.unsubscribe=function(t,e){this._changed.unsubscribe(t,e)},t.prototype.unsubscribeAll=function(t){this._changed.unsubscribeAll(t)},t.prototype._onChanged=function(){this._changed.fire(this)},t}()},function(t,e,i){"use strict";var n,o,r;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"MainSeriesPriceScaleNameProperty",function(){
return r}),n=i(8),o=i.n(n),r=function(){function t(t){var e=this;this._changed=new o.a,this._defaultValues=["left","right","none"],this._model=t,this._model.mainSeriesPriceScaleNameChanged().subscribe(null,function(){return e._onChanged()})}return t.prototype.getValues=function(t){var e,i=[],n=this._defaultValues.length-1;for(e=0;e<=n;e++)(e!==n||t)&&i.push(this._defaultValues[e]);return i},t.prototype.value=function(){return this._model.mainSeriesPriceScaleName()},t.prototype.setValue=function(t,e){var i=this.value();(t!==i||e)&&this._model.setMainSeriesPriceScaleName(i,t)},t.prototype.state=function(){return null},t.prototype.clone=function(){return new t(this._model)},t.prototype.listeners=function(){return this._changed},t.prototype.subscribe=function(t,e){this._changed.subscribe(t,e)},t.prototype.unsubscribe=function(t,e){this._changed.unsubscribe(t,e)},t.prototype.unsubscribeAll=function(t){this._changed.unsubscribeAll(t)},t.prototype._onChanged=function(){this._changed.fire(this)},t}()},function(t,e,i){"use strict";function n(t){"LineToolGannComplex"!==t.type||void 0!==t.version&&1!==t.version||(t.type="LineToolGannFixed")}Object.defineProperty(e,"__esModule",{value:!0}),e.migrateState=n},function(t,e){},function(t,e,i){"use strict";(function(e){function n(t,e,i,n){this.reset(t,e,i,n)}var o=i(135).makeFont,r=i(134),s=e.enabled("charting_library_debug_mode");n.prototype.maxCount=200,n.prototype.reset=function(t,e,i,n){this._textWidthCache=new r(this.maxCount),this._fontSize=t,this._color=n,this._font=o(t,e,i),this._keys=[],this._hash={}},n.prototype.paintTo=function(t,e,i,n,o){var r=this.getLabelImage(t,e);"left"!==o&&(i-=r.textWidth),n-=Math.floor(r.height/2),t.drawImage(r.canvas,i,n)},n.prototype.getLabelImage=function(t,e){var i,n,o,r,a;return Object.prototype.hasOwnProperty.call(this._hash,e)?i=this._hash[e]:(this._keys.length>=this.maxCount&&(n=this._keys.shift(),delete this._hash[n]),i={text:e,textWidth:0,width:0,height:0,canvas:document.createElement("canvas")},o=Math.ceil(this._fontSize/4.5),r=Math.round(this._fontSize/10),a=Math.ceil(this._textWidthCache.measureText(t,e)),i.textWidth=Math.round(Math.max(1,a)),i.width=Math.round(a+2*o),i.height=this._fontSize+2*o,0!==a?(this._keys.push(i.text),this._hash[i.text]=i):s&&console.log('Canvas 2d context measureText return zero width for "'+e+'" text'),i.canvas.width=i.width,i.canvas.height=i.height,t=i.canvas.getContext("2d"),t.font=this._font,t.fillStyle=this._color,t.fillText(e,0,i.height-o-r)),i},t.exports=n}).call(e,i(4))},function(t,e,i){"use strict";function n(t,e,i){this.chart=t,this.paneA=t.paneWidgets()[e],this.paneB=t.paneWidgets()[i],this.jqRow=$(document.createElement("tr")),this.jqRow.height(n.HEIGHT),this.jqCell=$(document.createElement("td")),this.jqCell.appendTo(this.jqRow),this.jqCell.addClass("pane-separator"),this.jqCell.attr("colspan","3"),this.jqCell.css("background",this.chart.properties().scalesProperties.lineColor.value()),this.jqCell.click(function(){}),this.handle=$('<div class="handle">').appendTo(this.jqCell),
this._mouseEventHandler=new r(this.handle,this,!0)}var o,r;i(763),o=i(55).clamp,r=i(126).MouseEventHandler,n.prototype.destroy=function(){this._mouseEventHandler.destroy(),this.jqRow.remove()},n.HEIGHT=1,n.prototype.hide=function(){this.jqRow.addClass("js-hidden")},n.prototype.show=function(){this.jqRow.removeClass("js-hidden")},n.prototype.mouseDownEvent=function(t){(0===t.button||Modernizr.touch)&&(this.startY=t.pageY,this.deltaY=0,this.totalHeight=this.paneA.size.h+this.paneB.size.h,this.totalStretch=this.paneA.stretchFactor()+this.paneB.stretchFactor(),this.prevStretchA=this.paneA.stretchFactor(),this.minPaneHeight=30,this.maxPaneHeight=this.totalHeight-this.minPaneHeight,this.pixelStretchFactor=this.totalStretch/this.totalHeight)},n.prototype.pressedMouseMoveEvent=function(t){var e,i,n,r;(0===t.button||Modernizr.touch)&&(t.preventDefault(),this.deltaY=t.pageY-this.startY,e=this.paneA.size.h,i=o(e+this.deltaY,this.minPaneHeight,this.maxPaneHeight),n=i*this.pixelStretchFactor,r=this.totalStretch-n,this.paneA.setStretchFactor(n),this.paneB.setStretchFactor(r),this.chart._adjustSize(),this.paneA.size.h!==e&&(this.startY=t.pageY),this.chart.paint())},n.prototype.mouseUpEvent=function(t){(0===t.button||Modernizr.touch)&&(this.chart._model.addPaneStretchFactorUndoCommand(this.paneA._state,this.paneB._state,this.prevStretchA,this.paneA.stretchFactor()),this.startY=0,this.deltaY=0,this.totalHeight=0,this.totalStretch=0,this.minPaneHeight=0,this.maxPaneHeight=0,this.pixelStretchFactor=0)},n.prototype.update=function(){this.jqCell.css("background",this.chart.properties().scalesProperties.lineColor.value())},n.prototype.paint=function(){},n.prototype.image=function(){var t={},e=n.HEIGHT,i=this.paneA.lhsPriceAxisWidget.size.w,o=this.paneA.size.w,r=this.paneA.rhsPriceAxisWidget.size.w,s=$('<canvas width="'+i+'" height="'+e+'">')[0],a=s.getContext("2d");return a.fillStyle=this.chart.properties().scalesProperties.lineColor.value(),a.fillRect(0,0,i,e),t.leftAxis={content:s.toDataURL(),contentWidth:i,contentHeight:e},s=$('<canvas width="'+o+'" height="'+e+'">')[0],a=s.getContext("2d"),a.fillStyle=this.chart.properties().scalesProperties.lineColor.value(),a.fillRect(0,0,o,e),t.content=s.toDataURL(),t.contentWidth=o,t.contentHeight=e,s=$('<canvas width="'+r+'" height="'+e+'">')[0],a=s.getContext("2d"),a.fillStyle=this.chart.properties().scalesProperties.lineColor.value(),a.fillRect(0,0,r,e),t.rightAxis={content:s.toDataURL(),contentWidth:r,contentHeight:e},t},t.exports=n},function(t,e){},function(t,e,i){"use strict";function n(t,e,n,r,s,a,l,c,h){var u=i(765).ChartUndoModel,d=new u(t,e,n,r,s,a,l,c,h);return d.model().invalidate(new o(o.FULL_UPDATE)),d}var o=i(17),r=i(32);TradingView.MAMetaInfo=function(){return new r({id:"MASimple",inputs:[{id:"length",type:"integer",defval:10},{id:"source",type:"text",defval:"close"}],plots:[{id:"MovAvg",type:"line"}],properties:[{id:"is_price_study",type:"bool",value:"true"}],palettes:{}})},TradingView.VolumeMetaInfo=function(){var t={id:"Volume",inputs:[],plots:[{id:"Volume",type:"histogram"},{
id:"Color",type:"colorer",palette:"volumePalette",target:"Volume"}],properties:[{id:"is_price_study",type:"bool",value:"false"}],palettes:{volumePalette:{colors:{0:{color:"#007F0E",width:1,style:CanvasEx.LINESTYLE_SOLID,name:"Up Volume"},1:{color:"#872323",width:1,style:CanvasEx.LINESTYLE_SOLID,name:"Down Volume"}}}}};return new r(t)},TradingView.DMMetaInfo=function(){return new r({id:"DM",inputs:[{id:"ADX smoothing",max:50,min:1,type:"integer",defval:14},{id:"DI Length",max:500,min:1,type:"integer",defval:14}],plots:[{id:"ADX",type:"line"},{id:"DI_P",type:"line"},{id:"DI_N",type:"line"}],properties:[{id:"is_price_study",type:"bool",value:"false"}],palettes:{}})},TradingView.RSIMetaInfo=function(){return new r({id:"RSI",inputs:[{id:"length",type:"integer",defval:14}],plots:[{id:"RelativeStrengthIndex",type:"line"}],properties:[{id:"is_price_study",type:"bool",value:"false"}],palettes:{}})},t.exports=n},function(t,e,i){"use strict";(function(t){function n(e,i,n,o,r,s,a,l,c){this._chartWidget=s,this.m_model=new q(e,i,n,o,r,this,l,c),this.m_zoomStack=new st,this.undoHistory=a,this._onRearrangePanes=new t,this._onSimpleZoomIn=new t,this._onSimpleZoomOut=new t,this._currentCustomMoveSource=null,this._currentLineMoveCommand=null,this.beginUndoMacro=a.beginUndoMacro.bind(a),this.endUndoMacro=a.endUndoMacro.bind(a),this.createUndoCheckpoint=a.createUndoCheckpoint.bind(a),this.undoToCheckpoint=a.undoToCheckpoint.bind(a)}function o(t,e,i,n){at.call(this,i),this._targetObj=t,this._newValue=e,this._model=n}function r(t,e,i,n){at.call(this,i),this._priceScale=e,this._newMode=t,this._model=n}function s(t,e,i,n){at.call(this,i),this._property=t,this._newValue=e,this._model=n,this._priceScale=this._model.mainSeries().priceScale()}function a(t,e,i,n){at.call(this,"scale price",!1),this.m_model=t,this.m_pane=e,this.m_priceScale=i,this.m_state=n,this.m_newPriceScaleState=null}function l(t,e,i){at.call(this,i,!1),this.setCustomFlag("doesnt_affect_save",!0),this.m_model=t,this.m_state=e,this.m_newTimeScaleState=null}function c(t,e,i,n){this._model=t,this._series=e,this._oldSymbol=e.symbol(),this._oldInterval=e.interval(),this._symbol=i,this._interval=n}function h(t,e,i,n,o){at.call(this,"Insert "+e.id),this._model=t,this._studyMetaInfo=e,this._props=i,this._isOverlay=n,this._parentSource=o,this._oldShowLeftScale=t.isLeftPriceScaleVisible(),this._oldShowRightScale=t.isRightPriceScaleVisible()}function u(t,e){at.call(this,"Remove Source"),this._model=t,this._sourceId=e.id()}function d(t,e){at.call(this,"Remove Drawing(s)"),this._model=t,this._linetools=e,this._statesByPaneIndexes={}}function p(t,e,i,n){this._model=t,this._oldPane=this._model.paneForSource(e),at.call(this,this._oldPane===i?"Change Price Scale":"Move Source"),this._sourceId=e.id(),this._oldPaneIndex=t.panes().indexOf(this._oldPane),this._oldScaleName=this._oldPane.priceScaleName(e.priceScale()),this._oldShowLeftScale=t.isLeftPriceScaleVisible(),this._oldShowRightScale=t.isRightPriceScaleVisible(),this._pane=i,this._paneIndex=t.panes().indexOf(i),
this._pane?this._scaleName=this._pane.priceScaleName(n):this._paneIndex=t.panes().length}function _(t,e,i){this._model=t,this._sourceId=e.id(),this._oldShowLeftScale=t.isLeftPriceScaleVisible(),this._oldShowRightScale=t.isRightPriceScaleVisible(),at.call(this,i)}function f(t,e){_.call(this,t,e,"Merge Up"),this._mergeRedoFn=this._model.mergeSourceUp,this._mergeUndoFn=this._model.unmergeSourceDown}function m(t,e){_.call(this,t,e,"Merge Down"),this._mergeRedoFn=this._model.mergeSourceDown,this._mergeUndoFn=this._model.unmergeSourceUp}function g(t,e){_.call(this,t,e,"Unmerge Up"),this._mergeRedoFn=this._model.unmergeSourceUp,this._mergeUndoFn=this._model.mergeSourceDown}function y(t,e){_.call(this,t,e,"Unmerge Down"),this._mergeRedoFn=this._model.unmergeSourceDown,this._mergeUndoFn=this._model.mergeSourceUp}function v(t,e,i){at.call(this,"Create line "+i,!1),this._model=t,this._paneIndex=t.panes().indexOf(e),this._lineTool=i}function b(t,e,i,n){at.call(this,"Move Drawing",!1),this._model=t,this._sourceId=e.id(),this._origPoint=i instanceof j?i.clone():TradingView.clone(i),this._pointIndex=n}function S(t,e,i){at.call(this,"Change %1 Z order (%2)".format(e.title(),i>0?"Forward":"Backward")),this._model=t,this._sourceId=e.id(),this._shift=i}function w(t,e){at.call(this,"Send "+e.title()+" to back"),this._model=t,this._sourceId=e.id()}function P(t,e){at.call(this,"Bring "+e.title()+" to front"),this._model=t,this._sourceId=e.id()}function T(t,e,i){at.call(this,"Remove pane"),this._model=t,this._index=e,this._pane=this._model.panes()[e],this._chart=i}function C(t,e,i,n){at.call(this,"Rearrange panes"),this._model=t,this._index=e,this._direction=i,this._chart=n}function x(t,e,i,n,o,r){at.call(this,"Zoom"),this._model=t,this._startBar=e,this._endBar=i,this._startPrice=n,this._endPrice=o,this._pane=r}function k(t,e,i){at.call(this,"Zoom"),this._baseCmd=t,this._zoomStack=e,this._inOut=i}function L(t,e,i,n,o){at.call(this,"",!1),this._model=t,this._paneA=e,this._paneB=i,this._prevStretchA=n,this._currStretchA=o}function I(t,e){at.call(this,"Restore Defaults"),this._model=t,this._defaultProperty=e,this._state=e.state(e._exclusions),this._chartWidget=t._undoModel._chartWidget}function A(t,e,i,n){var o,r,s={hollowCandle:{related:"candle"}};["candleStyle","hollowCandleStyle","haStyle"].forEach(function(e){t[e].wickUpColor=t[e].wickUpColor||t[e].wickColor,t[e].wickDownColor=t[e].wickDownColor||t[e].wickColor}),e.vertGridProperties=e.vertGridProperties||e.gridProperties,e.horzGridProperties=e.horzGridProperties||e.gridProperties,i||(i=defaults("chartproperties.symbolWatermarkProperties"),i.color=n.textColor);for(o in s)t[o+"Style"]||(r=t[s[o].related+"Style"],t[o+"Style"]=TradingView.clone(r))}function E(t,e){at.call(this,"Apply All Chart Properties"),this._model=t,this._undoModel=t.undoModel(),this._newProperties=e,A(this._newProperties.mainSeries,this._newProperties.paneProperties,this._newProperties.symbolWatermarkProperties,this._newProperties.scalesProperties),this._oldProperties=gt(t,t.mainSeries())}function M(t,e){
at.call(this,"Apply Chart Theme"),this._model=t,this._newChartProps=TradingView.factoryDefaults("chartproperties"),this._newSeriesProps=TradingView.factoryDefaults("chartproperties.mainSeriesProperties"),["candleStyle","hollowCandleStyle","haStyle"].forEach(function(t){e.mainSourceProperties[t].wickUpColor=e.mainSourceProperties[t].wickUpColor||e.mainSourceProperties[t].wickColor,e.mainSourceProperties[t].wickDownColor=e.mainSourceProperties[t].wickDownColor||e.mainSourceProperties[t].wickColor}),e.chartProperties.paneProperties.vertGridProperties=e.chartProperties.paneProperties.vertGridProperties||e.chartProperties.paneProperties.gridProperties,e.chartProperties.paneProperties.horzGridProperties=e.chartProperties.paneProperties.horzGridProperties||e.chartProperties.paneProperties.gridProperties,e.chartProperties.paneProperties.legendProperties=this._model.properties().state().paneProperties.legendProperties,this._newChartProps=$.extend(!0,{},this._newChartProps,e.chartProperties),delete this._newChartProps.scalesProperties.showLeftScale,delete this._newChartProps.scalesProperties.showRightScale,delete this._newChartProps.scalesProperties.scaleSeriesOnly,delete this._newChartProps.scalesProperties.showSeriesLastValue,delete this._newChartProps.scalesProperties.showStudyLastValue,delete this._newChartProps.scalesProperties.showSymbolLabels,delete this._newChartProps.scalesProperties.showStudyPlotLabels,t.timeScale().preserveBarSpacing()&&delete this._newChartProps.scalesProperties.barSpacing,this._newSeriesProps=$.extend(!0,{},this._newSeriesProps,e.mainSourceProperties),this._newChartProps.symbolWatermarkProperties||(this._newChartProps.symbolWatermarkProperties=defaults("chartproperties.symbolWatermarkProperties"),this._newChartProps.symbolWatermarkProperties.color=this._newChartProps.scalesProperties.textColor),this._oldChartProps=t.properties().state(),delete this._oldChartProps.paneProperties.topMargin,delete this._oldChartProps.paneProperties.bottomMargin,this._oldSeriesProps=t.properties().state().mainSeriesProperties}function O(t,e,i,n){var o;n=n||"",o=n+" Study template",at.call(this,o),this._model=t,this._oldProps=e,this._newProps=i,this._oldShowLeftScale=t.model().isLeftPriceScaleVisible(),this._oldShowRightScale=t.model().isRightPriceScaleVisible(),this._newSourcesPriceScalesNames=[]}function D(t,e,i,n,o){at.call(this,t),this._property=e,this._value=i,this._forceSetProperty=o,this._prevValue=e.value(),this._cw=n}function V(t,e){var i,n,o,r,s=e.priceScale(),a=[],l=e.firstValue();for(i=0;i<t.length;i++)n={offset:t[i].offset,time_t:t[i].time_t},o=t[i].price,r=s.priceToCoordinate(o,l),r-=40,o=s.coordinateToPrice(r,l),n.price=o,a.push(n);return a}function R(t,e,i){at.call(this,"clone "+e.title()),this._model=t,this._originalSource=e,this._withoutShift=i}function B(t,e){at.call(this,"Stop Sincing Drawing"),this._model=t,this._sourceId=e.id(),this._linkKey=e.linkKey}function F(t,e,i){at.call(this,"Paste Drawing"),this._model=t,this._clipboardData=e,
this._paneIndex=this._model.panes().indexOf(i||this._model.paneForSource(this._model.mainSeries()))}function N(t,e){at.call(this,"Paste Indicator"),this._model=t,this._clipboardData=e}function W(t,e){at.call(this,"Move",!1),this._origPoint=t.clone(),this._point=null,this._handler=e}var j=i(7).Point,H=i(86).createLineTool,U=i(1).LineDataSource,z=i(4),q=i(139),Y=i(38),G=i(17),K=i(227).doAnimate,X=i(152),J=i(3),Z=J.saveDefaultProperties,Q=i(214),tt=i(71).Series,et=i(39),it=et.Study,nt=i(144),ot=i(22),rt=i(350).showTooManyStudiesNotice,st=i(351).UndoStack,at=i(45).UndoCommand,lt=i(766).SaveLineToolStateUndoCommand,ct=i(767).ApplyLineToolTemplateUndoCommand,ht=i(768).SetChartStyleCommand,ut=i(769).SetResolutionUndoCommand,dt=i(51).preparePriceAxisProperties,pt=i(352).RestoreFactoryDefaultsUndoCommand,_t=i(352).RestoreUserDefaultsUndoCommand,ft=i(51).getChartStyleByResolution,mt=i(5).getLogger("Chart.ChartUndoModel"),gt=i(348).preferencesByWhiteList;inherit(n,X),n.prototype.version=function(){return this.m_model._version},n.prototype.onData=function(t){switch(t.method){case"timescale_update":var e=t.params;this.m_model.updateTimeScale(e.index,e.zoffset,e.changes,e.index_diff,e.marks,e.clear)}},n.prototype.paneForSource=function(t){return this.m_model.paneForSource(t)},n.prototype.createPane=function(t){return this.m_model.createPane(t)},n.prototype.dumpViews=function(){return this.m_model.dumpViews()},n.prototype.readOnly=function(){return this.m_model.readOnly()},n.prototype.restart=function(){this.m_model.restart()},n.prototype.disconnect=function(){this.m_model.disconnect()},n.prototype.studiesMetaData=function(){return this.m_model.studiesMetaData()},n.prototype.studyVersioning=function(){return this.m_model.studyVersioning()},n.prototype.chartModel=function(){return this.m_model},n.prototype.pushUndoCommand=function(t){this.undoHistory.pushUndoCommand(t)},n.prototype.startScalePrice=function(t,e,i){this.pushUndoCommand(new a(this.m_model,t,e,e.state())),this.chartModel().startScalePrice(t,e,i)},n.prototype.scalePriceTo=function(t,e,i){this.chartModel().scalePriceTo(t,e,i)},n.prototype.endScalePrice=function(t,e){this.chartModel().endScalePrice(t,e)},n.prototype.startScrollPrice=function(t,e,i){e.isAutoScale()||(this._initialPriceScrollState=e.state(),this._initialPriceScrollPos=i,this.chartModel().startScrollPrice(t,e,i))},n.prototype.scrollPriceTo=function(t,e,i){e.isAutoScale()||(this._initialPriceScrollPos&&Math.abs(this._initialPriceScrollPos-i)>20&&(this.pushUndoCommand(new a(this.m_model,t,e,this._initialPriceScrollState)),delete this._initialPriceScrollState,delete this._initialPriceScrollPos),this.chartModel().scrollPriceTo(t,e,i))},n.prototype.endScrollPrice=function(t,e){e.isAutoScale()||(delete this._initialPriceScrollState,delete this._initialPriceScrollPos,this.chartModel().endScrollPrice(t,e))},n.prototype.setPriceAutoScale=function(t,e,i){this.pushUndoCommand(new a(this.m_model,t,e,e.state())),this.chartModel().setPriceAutoScale(t,e,i)},n.prototype.resetPriceScale=function(t,e){
this.pushUndoCommand(new a(this.m_model,t,e,e.state())),this.chartModel().resetPriceScale(t,e)},n.prototype.startScaleTime=function(t){this.pushUndoCommand(new l(this.m_model,this.m_model.timeScale().state(),"scale time")),this.chartModel().startScaleTime(t)},n.prototype.scaleTimeTo=function(t){this.chartModel().scaleTimeTo(t)},n.prototype.endScaleTime=function(){this.chartModel().endScaleTime()},n.prototype.startScrollTime=function(t){this._initialTimeScrollState=this.m_model.timeScale().state(),this._initialTimeScrollPos=t,this.chartModel().startScrollTime(t)},n.prototype.scrollTimeTo=function(t){this._initialTimeScrollPos&&Math.abs(t-this._initialTimeScrollPos)>20&&(this.pushUndoCommand(new l(this.m_model,this._initialTimeScrollState,"scroll time")),delete this._initialTimeScrollPos,delete this._initialTimeScrollState),this.chartModel().scrollTimeTo(t)},n.prototype.gotoTime=function(t,e){var i,n,o=this.timeScale().visibleBars();if(null===o)return $.Deferred().reject().promise();i=o.firstBar(),n=this.m_model.timeScale().state(),this.chartModel().gotoTime(t,e),i!==this.timeScale().visibleBars().firstBar()&&this.pushUndoCommand(new l(this.m_model,n,"scroll time"))},n.prototype.endScrollTime=function(){this.chartModel().endScrollTime(),delete this._initialTimeScrollPos,delete this._initialTimeScrollState},n.prototype.resetTimeScale=function(){this.pushUndoCommand(new l(this.m_model,this.m_model.timeScale().state())),this.chartModel().resetTimeScale()},n.prototype.canZoomIn=function(){return this.chartModel().canZoomIn()},n.prototype.canZoomOut=function(){return this.chartModel().canZoomOut()},n.prototype.setWidth=function(t){this.m_model.setWidth(t)},n.prototype.setPaneHeight=function(t,e){this.m_model.setPaneHeight(t,e)},n.prototype.gridSource=function(){return this.m_model.gridSource()},n.prototype.watermarkSource=function(){return this.m_model.watermarkSource()},n.prototype.brandingSource=function(){return this.m_model.brandingSource()},n.prototype.addAlertsSource=function(t){return this.m_model.addAlertsSource(t)},n.prototype.alertsSources=function(){return this.m_model.alertsSources()},n.prototype.publishedChartsTimelineSource=function(){return this.m_model.publishedChartsTimelineSource()},n.prototype.barsMarksSources=function(){return this.m_model.barsMarksSources()},n.prototype.crossHairSource=function(){return this.m_model.crossHairSource()},n.prototype.model=function(){return this.m_model},n.prototype.chartWidget=function(){return this._chartWidget},n.prototype.mainSeries=function(){return this.m_model.m_mainSeries},n.prototype.mainSeriesScaleRatioProperty=function(){return this.m_model.mainSeriesScaleRatioProperty()},n.prototype.mainSeriesPriceScaleNameProperty=function(){return this.m_model.mainSeriesPriceScaleNameProperty()},n.prototype.panes=function(){return this.m_model.m_panes},n.prototype.timeScale=function(){return this.m_model.timeScale()},n.prototype.setSelectedSource=function(t,e){this.m_model.setSelectedSource(t,e)},n.prototype.setHoveredSource=function(t,e){this.m_model.setHoveredSource(t,e)},
n.prototype.selectedSource=function(){return this.m_model.selectedSource()},n.prototype.onSelectedSourceChanged=function(){return this.m_model.onSelectedSourceChanged()},n.prototype.hoveredSource=function(){return this.m_model.hoveredSource()},n.prototype.activeStrategySource=function(){return this.m_model.activeStrategySource()},n.prototype.invalidate=function(t){this.m_model.invalidate(t)},n.prototype.setCurrentPosition=function(t,e,i,n){this.m_model.setCurrentPosition(t,e,i,n)},n.prototype.setAndSaveCurrentPosition=function(t,e,i,n){this.m_model.setAndSaveCurrentPosition(t,e,i,n)},n.prototype.modifySeries=function(t,e,i){var n=new c(this.m_model,t,e,i);this.pushUndoCommand(n)},n.prototype.canCreateStudy=function(t){return this.model().chartApi().chartApi().isCanCreateStudy(t)},n.prototype.checkIfFeatureAvailable=function(t,e){var i=this.canCreateStudy(),n=e&&e instanceof it;return!this.readOnly()&&n&&(i=this.canCreateStudy(!0)),!!i||void(n||rt())},n.prototype._insertStudy=function(t,e,i,n){var o=new h(this.m_model,t,e,i,n);return this.pushUndoCommand(o),o.insertedStudy()},n.prototype.insertStudyWithoutCheck=function(){return this._insertStudy.apply(this,arguments)},n.prototype.insertStudy=function(t,e,i,n){if(this.checkIfFeatureAvailable(t,n))return this._insertStudy(t,e,i,n)},n.prototype.setProperty=function(t,e,i){if(t&&t.value()!==e){var n=new o(t,e,i,this.m_model);this.pushUndoCommand(n),this.emitEvent("setProperty")}},n.prototype.setPriceScaleMode=function(t,e,i){var n,o,s=Object.keys(t),a=e.mode(),l=!1;for(n=0;n<s.length;n++)if(a[s[n]]!==t[s[n]]){l=!0;break}l&&(o=new r(t,e,i,this.m_model),this.pushUndoCommand(o))},n.prototype.setChartStyleProperty=function(t,e,i){if(t.value()!==e){var n=new ht(t,e,this.mainSeries(),i,this.m_model,this._chartWidget);this.pushUndoCommand(n),this.emitEvent("setChartStyleProperty")}},n.prototype.setScaleRatioProperty=function(t,e,i){if(t.value()!==e){var n=new s(t,e,i,this.m_model);this.pushUndoCommand(n)}},n.prototype.setScreenChartProperty=function(t,e,i,n,o){if(o||t.value()!==e){var r=new D(n,t,e,i,o);this.pushUndoCommand(r)}},n.prototype.setResolutionProperty=function(t,e,i,n){if(t.value()!==e){var o=new ut(t,e,i,n);this.pushUndoCommand(o)}},n.prototype._getSourcesTree=function(t){var e,i=[],n=this.m_model.children(t);for(e=0;e<n.length;e++)i=i.concat(this._getSourcesTree(n[e]));return i.push(t),i},n.prototype.removeSource=function(t,e){var i,n,o;if(t.isUserDeletable()){if(i=this._getSourcesTree(t),this.lineBeingCreated()===t)this.cancelCreatingLine();else{for(this.beginUndoMacro("Remove source"),n=0;n<i.length;++n)o=new u(this.m_model,i[n]),this.pushUndoCommand(o);this.endUndoMacro()}e||(1===i.length?this.emitEvent("removeSource",[i[0]]):this.emitEvent("removeSources",[i]))}},n.prototype.removeSelectedSource=function(){var t,e=this.m_model.selectedSource();e&&e.isUserDeletable()&&(this.setSelectedSource(null),t=new u(this.m_model,e),this.pushUndoCommand(t),this.emitEvent("removeSource",[e]))},n.prototype.removeLineTools=function(t){var e,i,n=this.lineBeingCreated()
;n&&-1!==(e=t.indexOf(n))&&(this.cancelCreatingLine(),t.splice(e,1)),i=new d(this.m_model,t),this.pushUndoCommand(i),this.emitEvent("removeSources",[t])},n.prototype.move=function(t,e,i){var n=new p(this.m_model,t,e,i);this.pushUndoCommand(n),this.emitEvent("moveSource",[t])},n.prototype.mergeSourceUp=function(t){var e=new f(this.m_model,t);this.pushUndoCommand(e),this.emitEvent("mergeSourceUp",[t])},n.prototype.mergeSourceDown=function(t){var e=new m(this.m_model,t);this.pushUndoCommand(e),this.emitEvent("mergeSourceDown",[t])},n.prototype.unmergeSourceUp=function(t){var e=new g(this.m_model,t);this.pushUndoCommand(e),this.emitEvent("unmergeSourceUp",[t])},n.prototype.unmergeSourceDown=function(t){var e=new y(this.m_model,t);this.pushUndoCommand(e),this.emitEvent("unmergeSourceDown",[t])},n.prototype.createLineTool=function(t,e,i,n,o){var r,s;return"LineToolRegressionTrend"!==i||this.canCreateStudy()?(this._createLineCommand=new v(this.m_model,t,i),r=this._createLineCommand.startCreatingLine(e,n,o),s=this._createLineCommand.line(),r&&(this.pushUndoCommand(this._createLineCommand),delete this._createLineCommand),s):void rt()},n.prototype.lineBeingCreated=function(){return this.m_model.lineBeingCreated()},n.prototype.paneBeingCreatedLineOn=function(){return this.m_model.paneBeingCreatedLineOn()},n.prototype.coninueCreatingLine=function(t,e,i){var n=this._createLineCommand.continueCreatingLine(t,e,i);return n&&(this.pushUndoCommand(this._createLineCommand),delete this._createLineCommand),n},n.prototype.finishLineTool=function(t){this.m_model.finishLineTool(t)},n.prototype.cancelCreatingLine=function(){this.m_model.cancelCreatingLine()},n.prototype.lineCancelled=function(){return this.m_model.lineCancelled()},n.prototype.startChangingLinetool=function(t,e,i,n){this._currentLineChangeCommand=new lt(this.m_model,t,"Change "+i+"point",!1),this.m_model.startChangingLinetool(t,e,i,n)},n.prototype.lineBeingEdited=function(){return this.m_model.lineBeingEdited()},n.prototype.changeLinePoint=function(t,e){this.m_model.changeLinePoint(t,e)},n.prototype.endChangingLinetool=function(t){this.m_model.endChangingLinetool(t),this.pushUndoCommand(this._currentLineChangeCommand),this._currentLineChangeCommand=null},n.prototype.startMovingSource=function(t,e,i){t.doesMovingAffectsUndo()&&(this._currentLineMoveCommand=new b(this.m_model,t,e,i)),this.m_model.startMovingSource(t,e,i)},n.prototype.sourceBeingMoved=function(){return this.m_model.sourceBeingMoved()},n.prototype.moveSource=function(t){null!==this._currentLineMoveCommand&&this._currentLineMoveCommand.setPoint(t),this.m_model.moveSource(t)},n.prototype.endMovingSource=function(t){this.m_model.endMovingSource(t),null!==this._currentLineMoveCommand&&this._currentLineMoveCommand._point&&(this.pushUndoCommand(this._currentLineMoveCommand),this._currentLineChangeCommand=null),this._currentLineMoveCommand=null},n.prototype.dataSources=function(){return this.m_model.dataSources()},n.prototype.orderedDataSources=function(t){return this.m_model.orderedDataSources(t)},
n.prototype.dataSourceForId=function(t){return this.m_model.dataSourceForId(t)},n.prototype.state=function(t,e){return this.m_model.state(t,e)},n.prototype.asyncState=function(t){return this.m_model.asyncState(t)},n.prototype.restoreState=function(t,e){return this.m_model.restoreState(t,e)},n.prototype.calculateDefaultTags=function(){return this.m_model.calculateDefaultTags()},n.prototype.onTagsChanged=function(){return this.m_model.onTagsChanged()},n.prototype.changeZOrder=function(t,e){var i=new S(this.m_model,t,e);this.pushUndoCommand(i),this.emitEvent("changeZOrder",[t,e])},n.prototype.sendToBack=function(t){var e=new w(this.m_model,t);this.pushUndoCommand(e),this.emitEvent("changeZOrder",[t])},n.prototype.bringToFront=function(t){var e=new P(this.m_model,t);this.pushUndoCommand(e),this.emitEvent("changeZOrder",[t])},n.prototype.removeAllStudies=function(){var t,e,i;for(this.beginUndoMacro("remove all studies"),t=this.m_model.dataSources(),e=0;e<t.length;e++)i=t[e],(TradingView.isInherited(i.constructor,it)&&!i.isChildStudy()&&i.removeByRemoveAllStudies()||TradingView.isInherited(i.constructor,nt))&&this.removeSource(i);this.endUndoMacro()},n.prototype.removeAllDrawingTools=function(t){var e,i,n;for(this.beginUndoMacro("remove all drawing tools"),this.lineBeingCreated()&&this.cancelCreatingLine(),e=this.m_model.dataSources(),i=0;i<e.length;i++)n=e[i],TradingView.isInherited(n.constructor,U)&&n.isActualSymbol()&&n.isUserDeletable()&&(t&&t!==n._constructor||this.removeSource(n));this.endUndoMacro()},n.prototype.unlinkLine=function(t){var e=new B(this.m_model,t);this.pushUndoCommand(e)},n.prototype.copyToOtherCharts=function(t){this.m_model.copyToOtherCharts(t)},n.prototype.moveLeft=function(){var t,e;try{this.beginUndoMacro("Move Left")}catch(t){return}t=this.m_model.timeScale().width(),e=this,K({to:t/5,onStep:function(t){e.startScrollTime(t),e.scrollTimeTo(0),e.endScrollTime()},onComplete:function(){e.endUndoMacro()}})},n.prototype.moveRight=function(){var t,e;try{this.beginUndoMacro("Move Right")}catch(t){return}t=this.m_model.timeScale().width(),e=this,K({to:t/5,onStep:function(t){e.startScrollTime(0),e.scrollTimeTo(t),e.endScrollTime()},onComplete:function(){e.endUndoMacro()}})},n.prototype.scrollChart=function(t){z.enabled("chart_scroll")&&(this.startScrollTime(0),this.scrollTimeTo(t),this.endScrollTime())},n.prototype.scrollChartByBar=function(t){if(z.enabled("chart_scroll")){var e=t*this.m_model.timeScale().barSpacing();this.startScrollTime(0),this.scrollTimeTo(e),this.endScrollTime()}},n.prototype.zoomIn=function(t,e){var i,n,o=this.m_model.timeScale().width(),r=this;if(e=e||1,this.canZoomIn())if(t)i=e*o/10,n=i*((t+1)/2),this.startScaleTime(i),this.scaleTimeTo(0),this.endScaleTime(),this.startScrollTime(0),this.scrollTimeTo(i-n),this.endScrollTime(),this._onSimpleZoomIn.fire();else{try{this.beginUndoMacro("Zoom In")}catch(t){return}K({to:o/5,onStep:function(t){r.startScaleTime(t),r.scaleTimeTo(0),r.endScaleTime()},onComplete:function(){r.endUndoMacro(),r._onSimpleZoomIn.fire()}})}},
n.prototype.zoomOut=function(t,e){var i=this.m_model.timeScale().width(),n=this;if(e=e||1,this.canZoomOut())if(t)this.startScaleTime(0),this.scaleTimeTo(e*i/10),this.endScaleTime(),this.startScrollTime(e*(i/20-i/20*t)),this.scrollTimeTo(0),this.endScrollTime(),this._onSimpleZoomOut.fire();else{try{this.beginUndoMacro("Zoom Out")}catch(t){return}K({to:i/5,onStep:function(t){n.startScaleTime(0),n.scaleTimeTo(t),n.endScaleTime()},onComplete:function(){n.endUndoMacro(),n._onSimpleZoomOut.fire()}})}},n.prototype.resetScales=function(){var t,e;for(this.beginUndoMacro("Reset scales"),this.resetTimeScale(),t=0;t<this.panes().length;t++)e=this.panes()[t],this.resetPriceScale(e,e.leftPriceScale()),this.resetPriceScale(e,e.rightPriceScale());this.endUndoMacro(),this.m_model.recalculateAllPanes()},n.prototype.zoomToViewport=function(t,e,i,n,o){var r=new x(this.m_model,t,e,i,n,o),s=new k(r,this.m_zoomStack,!0);this.pushUndoCommand(s)},n.prototype.zoomFromViewport=function(){var t=new k(this.m_zoomStack.head(),this.m_zoomStack,!1);this.pushUndoCommand(t)},n.prototype.zoomStack=function(){return this.m_zoomStack},n.prototype.addPaneStretchFactorUndoCommand=function(t,e,i,n){var o=new L(this.m_model,t,e,i,n);this.pushUndoCommand(o)},n.prototype.restoreFactoryDefaults=function(t){var e=new pt(this.m_model,t);this.pushUndoCommand(e)},n.prototype.restoreDefaults=function(t){var e=new _t(this.m_model,t);this.pushUndoCommand(e)},n.prototype.chartLoadTheme=function(t,e){var i=new M(t,e);this.pushUndoCommand(i)},n.prototype.applyPreferences=function(t){var e=new E(this.model(),t);this.pushUndoCommand(e)},n.prototype.applyLineToolTemplate=function(t,e,i){this.beginUndoMacro(i),this.saveLineToolState(t,i);var n=new ct(t,e,i);this.pushUndoCommand(n),this.saveLineToolState(t,i),this.endUndoMacro(),this.model().updateSource(t)},n.prototype.restoreLineToolFactoryDefaults=function(t,e){this.beginUndoMacro(e),this.saveLineToolState(t,e),t.restoreFactoryDefaults(),this.saveLineToolState(t,e),this.endUndoMacro()},n.prototype.studyLoadTemplate=function(t,e,i,n){var o=new O(t,e,i,n);this.pushUndoCommand(o)},n.prototype.onRearrangePanes=function(){return this._onRearrangePanes},n.prototype.onSimpleZoomIn=function(){return this._onSimpleZoomIn},n.prototype.onSimpleZoomOut=function(){return this._onSimpleZoomOut},n.prototype.loadRange=function(t){t.res!==this.m_model.mainSeries().properties().interval.value()?(this.m_model.mainSeries().setDefaultTimeframe(t.val),this.setProperty(this.m_model.mainSeries().properties().interval,t.res,"Change date range")):this.m_model.mainSeries().loadDataTo(t.val)},n.prototype.cloneLineTool=function(t,e){var i=new R(this.m_model,t,e);return this.pushUndoCommand(i),this.emitEvent("cloneLineTool"),i.clonedLineToolId()},n.prototype.alertsList=function(){return this.m_model.alertsList()},n.prototype.alertsListChanged=function(){return this.m_model.alertsListChanged()},n.prototype.insertStudyStub=function(t){return this.m_model.insertStudyStub(t)},n.prototype.removeStudyStub=function(t){return this.m_model.removeStudyStub(t)},
n.prototype.isJustClonedChart=function(){return this._chartWidget.isJustClonedChart()},n.prototype.copySourceToClip=function(t){if(t&&!t.properties().blockCopying){var e={};if(t instanceof U)e.type="drawing",e.geometry=t.geometry();else{if(!(t instanceof it))return!1;e.type="study"}return e.source=t.state&&t.state(),(delete e.source.alertId,delete e.source.linkKey,e.source)?(e.title=t.title&&t.title(),e.modelId=this.m_model._id,Q.set(e),!0):!1}},n.prototype.cutSourceToClip=function(t){if(!this.copySourceToClip(t))return!1;this.removeSource(t)},n.prototype.pasteLineTool=function(t,e){var i=new F(this.m_model,e,t);this.pushUndoCommand(i)},n.prototype.pasteStudy=function(t){var e=new N(this.m_model,t);this.pushUndoCommand(e)},n.prototype.pasteSourceFromClip=function(t,e){var i=Q.get();if(!i)return!1;"drawing"===i.type&&this.pasteLineTool(t,i),"study"===i.type&&this.checkIfFeatureAvailable(i.state)&&this.pasteStudy(i)},n.prototype.trackTime=function(){return this._chartWidget.trackTime()},n.prototype.isInReplay=function(){return this.m_model.isInReplay()},n.prototype.switchToReplay=function(t){},n.prototype.switchToRealtime=function(){},n.prototype.startCustomMoving=function(t,e,i){this._currentCustomMoveCommand=new W(e,i),this._currentCustomMoveSource=t},n.prototype.customMoveBeingProcessed=function(){return null!==this._currentCustomMoveSource},n.prototype.processCustomMove=function(t){this._currentCustomMoveCommand.setPoint(t)},n.prototype.endCustomMoving=function(){null!==this._currentCustomMoveCommand.point()&&(this.pushUndoCommand(this._currentCustomMoveCommand),this._currentCustomMoveCommand=null,this._currentCustomMoveSource=null)},n.prototype.saveLineToolState=function(t,e){this.pushUndoCommand(new lt(this.m_model,t,e))},inherit(o,at),o.prototype.redo=function(){this._oldValue=this._targetObj.value(),Z(!0),this._targetObj.setValue(this._newValue),Z(!1),this._model&&(this._model.recalculateAllPanes(),this._model.invalidate(new G(G.LIGHT_UPDATE)))},o.prototype.undo=function(){Z(!0),this._targetObj.setValue(this._oldValue),Z(!1),this._oldValue=null,this._model&&(this._model.recalculateAllPanes(),this._model.invalidate(new G(G.LIGHT_UPDATE)))},inherit(r,at),r.prototype.redo=function(){this._oldMode=this._priceScale.mode(),Z(!0),this._priceScale.setMode(this._newMode),Z(!1),this._model&&(this._model.recalculateAllPanes(),this._model.invalidate(new G(G.LIGHT_UPDATE)))},r.prototype.undo=function(){Z(!0),this._priceScale.setMode(this._oldMode),Z(!1),this._oldMode=null,this._model&&(this._model.recalculateAllPanes(),this._model.invalidate(new G(G.LIGHT_UPDATE)))},inherit(s,at),s.prototype.redo=function(){this._oldValue=this._property.value(),this._oldMode=this._priceScale.mode(),Z(!0),this._priceScale.setMode({autoScale:!1,percentage:!1,log:!1}),this._property.setValue(this._newValue),Z(!1),this._model&&(this._model.recalculateAllPanes(),this._model.invalidate(new G(G.LIGHT_UPDATE)))},s.prototype.undo=function(){Z(!0),this._property.setValue(this._oldValue),this._priceScale.setMode(this._oldMode),Z(!1),
this._oldMode=null,this._model&&(this._model.recalculateAllPanes(),this._model.invalidate(new G(G.LIGHT_UPDATE)))},inherit(a,at),a.prototype.undo=function(){if(null!==this.m_newPriceScaleState)return void mt.logDebug("PriceScaleChangeUndoCommand.undo: Command is already undone");this.m_newPriceScaleState=this.m_priceScale.state(),this.m_model.restorePriceScaleState(this.m_pane,this.m_priceScale,this.m_state)},a.prototype.redo=function(){if(null===this.m_newPriceScaleState)return void mt.logDebug("PriceScaleChangeUndoCommand.redo: Command is not undone");this.m_model.restorePriceScaleState(this.m_pane,this.m_priceScale,this.m_newPriceScaleState),this.m_newPriceScaleState=null},inherit(l,at),l.prototype.undo=function(){if(null!==this.m_newTimeScaleState)return void mt.logDebug("TimeScaleChangeUndoCommand.undo: Command is already undone");this.m_newTimeScaleState=this.m_model.timeScale().state(),this.m_model.restoreTimeScaleState(this.m_state)},l.prototype.redo=function(){if(null===this.m_newTimeScaleState)return void mt.logDebug("TimeScaleChangeUndoCommand.redo: Command is not undone");this.m_model.restoreTimeScaleState(this.m_newTimeScaleState),this.m_newTimeScaleState=null},inherit(c,at),c.prototype.redo=function(){this._model.modifySeries(this._series,this._symbol,this._interval)},c.prototype.undo=function(){this._model.modifySeries(this._series,this._oldSymbol,this._oldInterval)},inherit(h,at),h.prototype.redo=function(){var t,e,i=null;return this._studyState?(i=this._model.restoreSource(this._restorePane,this._paneIndex,this._paneState,this._studyState,this._priceScaleName),this._studyId!==i.id()&&mt.logError("Study was restored improperly - study ids does not match"),delete this._studyState):(i=this._model.insertStudy(this._studyMetaInfo,this._props,this._isOverlay,this._parentSource),this._studyId=i.id()),t=this._model.paneForSource(i),e=t.priceScaleName(i.priceScale()),this._model.setPriceScaleVisibility(e,!0),i},h.prototype.insertedStudy=function(){return this._model.dataSourceForId(this._studyId)},h.prototype.undo=function(){var t,e=this.insertedStudy();this._studyState=e.state(),t=this._model.paneForSource(e),this._paneIndex=this._model.panes().indexOf(t),this._paneState=t.state(),this._restorePane=this._model.removeSource(e),this._model.setLeftPriceScaleVisible(this._oldShowLeftScale),this._model.setRightPriceScaleVisible(this._oldShowRightScale)},inherit(u,at),u.prototype.redo=function(){var t,e=this._model.dataSourceForId(this._sourceId);this._sourceState=e.state(),t=this._model.paneForSource(e),this._paneIndex=this._model.panes().indexOf(t),this._priceScaleName=t.priceScaleName(e.priceScale()),this._paneState=t.state(),this._restorePane=this._model.removeSource(e)},u.prototype.undo=function(){var t=this._model.restoreSource(this._restorePane,this._paneIndex,this._paneState,this._sourceState,this._priceScaleName);this._sourceId!==t.id()&&mt.logError("Source was restored improperly - source ids does not match")},inherit(d,at),d.prototype.redo=function(){var t,e,i
;for(t=0;t<this._linetools.length;t++)e=this._model.paneForSource(this._linetools[t]),i=this._model.panes().indexOf(e),this._statesByPaneIndexes[i]=this._statesByPaneIndexes[i]||[],this._statesByPaneIndexes[i].push({state:this._linetools[t].state(),owner:this._linetools[t].ownerSource().id()}),e.removeDataSource(this._linetools[t]);delete this._linetools},d.prototype.undo=function(){var t,e,i,n,o,r,s;this._linetools=[];for(t in this._statesByPaneIndexes)for(e=this._model.panes()[t],i=this._statesByPaneIndexes[t],n=0;n<i.length;n++)o=i[n],r=this._model.dataSourceForId(o.owner),s=e._restoreLineTool(o.state),s.setOwnerSource(r),s.updateAllViews(),this._linetools.push(s);this._model.invalidate(new G(G.LIGHT_UPDATE))},inherit(p,at),p.prototype.redo=function(){var t,e;-1===this._model.panes().indexOf(this._pane)&&(this._pane=this._model.createPane(this._paneIndex)),t=this._model.dataSourceForId(this._sourceId),this._model.move(t,this._pane,this._pane.priceScaleByName(this._scaleName)),e=this._pane.priceScaleName(t.priceScale()),this._model.setPriceScaleVisibility(e,!0)},p.prototype.undo=function(){-1===this._model.panes().indexOf(this._oldPane)&&(this._oldPane=this._model.createPane(this._oldPaneIndex)),this._model.move(this._model.dataSourceForId(this._sourceId),this._oldPane,this._oldPane.priceScaleByName(this._oldScaleName)),this._model.setLeftPriceScaleVisible(this._oldShowLeftScale),this._model.setRightPriceScaleVisible(this._oldShowRightScale)},inherit(_,at),_.prototype.redo=function(){var t,e,i=this._model.dataSourceForId(this._sourceId);this._mergeRedoFn.call(this._model,i),t=this._model.paneForSource(i),e=t.priceScaleName(i.priceScale()),this._model.setPriceScaleVisibility(e,!0)},_.prototype.undo=function(){var t=this._model.dataSourceForId(this._sourceId);this._mergeUndoFn.call(this._model,t),this._model.setLeftPriceScaleVisible(this._oldShowLeftScale),this._model.setRightPriceScaleVisible(this._oldShowRightScale)},inherit(f,_),inherit(m,_),inherit(g,_),inherit(y,_),inherit(v,at),v.prototype.startCreatingLine=function(t,e,i){var n,o;return this._points=[{point:t}],n=this._model.panes()[this._paneIndex],o=this._model.createLineTool(n,t,this._lineTool,e,i),this._lineId=o.id(),!this._model.lineBeingCreated()},v.prototype.continueCreatingLine=function(t,e,i){return this._points||mt.logError("continueCreatingLine is called before startCreatingLine"),this._points.push({point:t,envState:e}),this._model.coninueCreatingLine(t,e,i)},v.prototype.line=function(){return this._lineId?this._model.dataSourceForId(this._lineId):null},v.prototype.undo=function(){var t=this.line();t&&(this._lineState=t.state(),this._model.removeSource(t),delete this._lineId)},v.prototype.redo=function(){this._lineState||mt.logError("This command was never undone - nothing to redo");var t=this._model.restoreSource(!1,this._paneIndex,null,this._lineState,null);this._lineId=t.id(),delete this._lineState},inherit(b,at),b.prototype.setPoint=function(t){this._point=t instanceof j?t.clone():TradingView.clone(t)},b.prototype.undo=function(){
var t=this._model.dataSourceForId(this._sourceId);this._model.startMovingSource(t,this._point,this._pointIndex),this._model.moveSource(this._origPoint),this._model.endMovingSource()},b.prototype.redo=function(){var t=this._model.dataSourceForId(this._sourceId);this._model.startMovingSource(t,this._origPoint,this._pointIndex),this._model.moveSource(this._point),this._model.endMovingSource()},inherit(S,at),S.prototype.undo=function(){var t=this._model.dataSourceForId(this._sourceId);this._model.changeZOrder(t,-this._shift)};S.prototype.redo=function(){var t=this._model.dataSourceForId(this._sourceId);this._model.changeZOrder(t,this._shift)},inherit(w,at),w.prototype.undo=function(){var t=this._model.dataSourceForId(this._sourceId);this._model.bringToFront(t)},w.prototype.redo=function(){var t=this._model.dataSourceForId(this._sourceId);this._model.sendToBack(t)},inherit(P,at),P.prototype.undo=function(){var t=this._model.dataSourceForId(this._sourceId);this._model.sendToBack(t)},P.prototype.redo=function(){var t=this._model.dataSourceForId(this._sourceId);this._model.bringToFront(t)},n.prototype.removePane=function(t,e){var i=new T(this,e,t);this.pushUndoCommand(i)},inherit(T,at),T.prototype.redo=function(){this._model.panes().splice(this._index,1),this._chart._updateGui()},T.prototype.undo=function(){this._model.panes().splice(this._index,0,this._pane),this._chart._updateGui()},n.prototype.rearrangePanes=function(t,e,i){var n=new C(this,e,i,t);this.pushUndoCommand(n),this._onRearrangePanes.fire()},inherit(C,at),C.prototype.redo=function(){var t=this._model.panes()[this._index];"up"===this._direction&&this._index>0&&(this._model.panes().splice(this._index,1),this._model.panes().splice(this._index-1,0,t)),"down"===this._direction&&this._index<this._model.panes().length-1&&(this._model.panes().splice(this._index,1),this._model.panes().splice(this._index+1,0,t)),this._model.invalidate(new G(G.FULL_UPDATE))},C.prototype.undo=function(){var t;"up"===this._direction&&(t=this._model.panes()[this._index-1],this._model.panes().splice(this._index-1,1),this._model.panes().splice(this._index,0,t)),"down"===this._direction&&(t=this._model.panes()[this._index+1],this._model.panes().splice(this._index+1,1),this._model.panes().splice(this._index,0,t)),this._model.invalidate(new G(G.FULL_UPDATE))},inherit(x,at),x.prototype.redo=function(){this._timeScaleState=this._model.timeScale().state(),this._priceScaleState=this._pane.defaultPriceScale().state(),this._model.zoomToViewport(this._startBar,this._endBar,this._startPrice,this._endPrice,this._pane)},x.prototype.undo=function(){this._model.timeScale().restoreState(this._timeScaleState),this._pane.defaultPriceScale().restoreState(this._priceScaleState),this._model.recalculateAllPanes(),this._model.invalidate(new G(G.LIGHT_UPDATE))},inherit(k,at),k.prototype.undo=function(){if(this._inOut){if(this._baseCmd!==this._zoomStack.head())return void mt.logDebug("zoom stack inconsistency");this._baseCmd.undo(),this._zoomStack.pop()}else this._baseCmd.redo(),this._zoomStack.push(this._baseCmd)},
k.prototype.redo=function(){if(this._inOut)this._baseCmd.redo(),this._zoomStack.push(this._baseCmd);else{if(this._baseCmd!==this._zoomStack.head())return void mt.logDebug("zoom stack inconsistency");this._baseCmd.undo(),this._zoomStack.pop()}},inherit(L,at),L.prototype.redo=function(){var t=this._paneA._stretchFactor+this._paneB._stretchFactor;this._paneA._stretchFactor=this._currStretchA,this._paneB._stretchFactor=t-this._currStretchA,this._model.invalidate(new G(G.FULL_UPDATE))},L.prototype.undo=function(){var t=this._paneA._stretchFactor+this._paneB._stretchFactor;this._paneA._stretchFactor=this._prevStretchA,this._paneB._stretchFactor=t-this._prevStretchA,this._model.invalidate(new G(G.FULL_UPDATE))},inherit(I,at),I.prototype.redo=function(){this._model.restoreFactoryDefaults(this._defaultProperty)},I.prototype.undo=function(){this._defaultProperty.merge(this._state),this._defaultProperty.listeners().fire(this._defaultProperty),this._model.mainSeries().onChartStyleChanged()},inherit(E,at),E.prototype._merge=function(t){Z(!0),this._model.applyPreferences(t),Z(!1)},E.prototype.redo=function(){this._merge(this._newProperties),this._model.mainSeries().onChartStyleChanged(),this._model.updateScales()},E.prototype.undo=function(){this._merge(this._oldProperties),this._model.mainSeries().onChartStyleChanged(),this._model.updateScales()},inherit(M,at),M.prototype._merge=function(t,e){var i=this._model;Z(!0),t&&(i.properties().paneProperties.mergeAndFire(t.paneProperties),i.properties().scalesProperties.mergeAndFire(t.scalesProperties),i.properties().symbolWatermarkProperties.mergeAndFire(t.symbolWatermarkProperties)),i.mainSeries().priceScale().setMode({autoScale:e.priceAxisProperties.autoScale,percentage:e.priceAxisProperties.percentage,log:e.priceAxisProperties.log,lockScale:e.priceAxisProperties.lockScale}),i.mainSeries().setChartStyleWithIntervalIfNeeded(e.style),delete e.style,delete e.interval,i.mainSeries().properties().mergeAndFire(e),i.mainSeries().properties().saveDefaults(),i.mainSeries().createPaneView(),i.mainSeries().invalidateBarStylesCache(),i._version=e.version,i.recalculateAllPanes(),i.invalidate(new G(G.FULL_UPDATE)),i.properties().saveDefaults(),Z(!1)},M.prototype.undo=function(){this._merge(this._oldChartProps,this._oldSeriesProps),this._model.mainSeries().onChartStyleChanged(),this._model.updateScales(),this._model.chartThemeLoaded()},M.prototype.redo=function(){this._merge(this._newChartProps,this._newSeriesProps),this._model.mainSeries().onChartStyleChanged(),this._model.updateScales(),this._model.chartThemeLoaded()},inherit(O,at),O.prototype._merge=function(t){var e,i,n,o,r,s,a,l,c,h,u,d,p,_=this._model.model(),f=_.mainSeries();for(f.priceScale().properties().lockScale.setValue(!1),t.interval&&(e=ft(t.interval,f.properties().style.value()),f.setChartStyleWithIntervalIfNeeded(e,t.interval)),i=[],n=_.panes(),o=n.length;o--;)for(r=n[o],s=r.containsMainSeries(),a=r.dataSources(),l=a.length;l--;)c=a[l],(!s||c instanceof it)&&(c.isRemovedByStudyTemplates()||i.push(c),_.removeSource(c));for(h=t.panes,
function(t,e){return t.dataSources().some(function(t){return t.alert&&t.alert().id===e.alert.id})},o=0;o<h.length;o++){for(u=!1,d=h[o],l=0;l<d.sources.length;l++)c=d.sources[l],"MainSeries"===c.type&&(delete c.state,u=!0),-1!==d.leftAxisSources.indexOf(c.id)&&-1===this._newSourcesPriceScalesNames.indexOf("left")&&this._newSourcesPriceScalesNames.push("left"),-1!==d.rightAxisSources.indexOf(c.id)&&-1===this._newSourcesPriceScalesNames.indexOf("right")&&this._newSourcesPriceScalesNames.push("right");if(r=null,r=u?n[o]:_.createPane(o),r.restoreState(h[o],!1,t.version),u)for(p=0;p<i.length;p++)i[p].restore&&i[p].restore()}f.priceScale().setMode({autoScale:!0}),_._version=t.version,_.startNotStartedStudies(),_.recalculateAllPanes(),_.invalidate(new G(G.FULL_UPDATE))},O.prototype.redo=function(){var t,e,i;for(this._merge(this._newProps),t=this._model.model(),t.mainSeries().onChartStyleChanged(),e=this._model.model().mainSeries().properties(),dt(e),t._recalcVisibleRangeStudy(t.dataSources(),!0),i=0;i<this._newSourcesPriceScalesNames.length;i++)t.setPriceScaleVisibility(this._newSourcesPriceScalesNames[i],!0)},O.prototype.undo=function(){this._merge(this._oldProps),this._model.model().mainSeries().onChartStyleChanged(),this._model.model().setLeftPriceScaleVisible(this._oldShowLeftScale),this._model.model().setRightPriceScaleVisible(this._oldShowRightScale)},inherit(D,at),D.prototype.redo=function(){this._cw.screen.show(),this._property.setValue(this._value,this._forceSetProperty)},D.prototype.undo=function(){this._cw.screen.show(),this._property.setValue(this._prevValue,this._forceSetProperty)},inherit(R,at),R.prototype.redo=function(){var t,e,i,n,o,r,s,a,l,c,h;if(this._lineState)r=this._model.restoreSource(!1,this._paneIndex,null,this._lineState,null);else{for(t=this._originalSource,e=t.priceScale(),i=this._model.paneForSource(t),n=TradingView.className(t.constructor),o=t.properties().clone(),r=H(n,this._model,o,null,t.ownerSource()),r.setOwnerSource(t.ownerSource()),r.properties().visible._value=!0,r._fixedPoints=r._fixedPoints.concat(t._fixedPoints),s=0;s<r._fixedPoints.length;s++)r._fixedPoints[s]=r._fixedPoints[s].add(new j(20,20));a=t._timePoint,l=this._withoutShift?TradingView.clone(a):V(a,t.ownerSource()),c=t._points,h=c,r.restorePoints(l,h),r.cloneData&&r.cloneData(t),i.addDataSource(r,e),this._model.updateSource(r),r.checkAlert&&r.checkAlert(),this._paneIndex=this._model.panes().indexOf(i),Y.drawOnAllCharts().value()&&this._model.copyToOtherCharts(r),this._lineState=r.state()}},R.prototype.undo=function(){this._lineState||mt.logError("This command was never executed - nothing to undo");var t=this._model.dataSourceForId(this._lineState.id);this._model.removeSource(t)},R.prototype.clonedLineToolId=function(){return this._lineState.id},inherit(B,at),B.prototype.redo=function(){delete this._model.dataSourceForId(this._sourceId).linkKey},B.prototype.undo=function(){this._model.dataSourceForId(this._sourceId).linkKey=this._linkKey},inherit(F,at),F.prototype.redo=function(){
var t,e,i,n,o,r,s,a,l,c,h=this._model.panes()[this._paneIndex],u=h.dataSourceForId(this._clipboardData.source.ownerSource)||h.mainDataSource();this._sourceState||(t=!0,e=this._clipboardData.source.state.symbol,i=h.mainDataSource(),n=i.symbol?i.symbol():"",o=e===n,o&&(u instanceof tt&&(t=!1),u instanceof it&&(t=!u.metaInfo().is_price_study)),r=TradingView.clone(this._clipboardData.source),delete r.state.symbol,t?(s=this._model,a=function(t){var e=t.x*s.timeScale().width(),i=t.y*u.priceScale().height();return new j(e,i)},l=u.firstValue(),r.points=this._clipboardData.geometry.map(function(t){var e=a(t),i=s.timeScale().coordinateToIndex(e.x),n=s.timeScale().normalizeBarIndex(i);return n.price=u.priceScale().coordinateToPrice(e.y,l),n})):this._model._id===this._clipboardData.modelId&&u.id()===this._clipboardData.source.ownerSource&&(r.points=V(this._clipboardData.source.points,u)),r.id=ot.guid(),this._sourceState=r),c=h._restoreLineTool(this._sourceState,null,!1),c.calcIsActualSymbol(),c.setOwnerSource(u),c.setPriceScale(u.priceScale()),u.priceScale().addDataSource(c),c.createServerPoints(),this._model.invalidate(new G(G.LIGHT_UPDATE,!0))},F.prototype.undo=function(){var t,e;this._sourceState||mt.logError("This command was never executed - nothing to undo"),t=this._model.panes()[this._paneIndex],e=t.dataSourceForId(this._sourceState.id),this._model.removeSource(e)},inherit(N,at),N.prototype.redo=function(){var t,e,i,n;this._sourceState||(t=TradingView.clone(this._clipboardData.source),t.id=ot.guid(),this._sourceState=t),e=null,i=null,this._sourceState.metaInfo.is_price_study?(e=this._model.paneForSource(this._model.mainSeries()),i=this._model.mainSeries().priceScale()):(e=this._model.createPane(),i=e.defaultPriceScale()),n=e._restoreStudy(this._sourceState),n.start(),n.setPriceScale(i),e.move(n,i)},N.prototype.undo=function(){this._sourceState||mt.logError("This command was never executed - nothing to undo");var t=this._model.dataSourceForId(this._sourceState.id);this._model.removeSource(t)},inherit(W,at),W.prototype.setPoint=function(t){this._point=t.clone(),this._handler(t)},W.prototype.point=function(){return this._point},W.prototype.undo=function(){this._handler(this._origPoint)},W.prototype.redo=function(){this._handler(this._point)},e.ChartUndoModel=n}).call(e,i(8))},function(t,e,i){"use strict";var n,o,r,s;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"SaveLineToolStateUndoCommand",function(){return s}),n=i(0),o=i(6),i.n(o),r=i(45),s=function(t){function e(e,i,n,o){void 0===o&&(o=!0);var r=t.call(this,n,o)||this;return r._model=e,r._savedState=i.state(!0),r}return n.c(e,t),e.prototype.redo=function(){this._toggleState()},e.prototype.undo=function(){this._toggleState()},e.prototype._getSource=function(){return Object(o.ensureNotNull)(this._model.dataSourceForId(this._savedState.id))},e.prototype._toggleState=function(){var t=this._getSource(),e=this._savedState;this._savedState=t.state(!0),this._model.restoreLineToolState(t,e)},e}(r.UndoCommand)},function(t,e,i){"use strict";var n,o,r
;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"ApplyLineToolTemplateUndoCommand",function(){return r}),n=i(0),o=i(45),r=function(t){function e(e,i,n){var o=t.call(this,n)||this;return o._source=e,o._newState=i,o._oldState=e.properties().state(),o}return n.c(e,t),e.prototype.redo=function(){this._source.applyTemplate(this._newState)},e.prototype.undo=function(){this._source.applyTemplate(this._oldState)},e}(o.UndoCommand)},function(t,e,i){"use strict";var n,o,r,s,a,l,c,h,u;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"SetChartStyleCommand",function(){return u}),n=i(0),o=i(45),r=i(3),i.n(r),s=i(51),a=i(56),l=i(17),c=i.n(l),h=i(69),u=function(t){function e(e,i,n,o,r,s){var a=t.call(this,o)||this;return a._prevPriceAxisProps={},a._property=e,a._mainSeries=n,a._value=i,a._model=r,a._chartWidget=s,a}return n.c(e,t),e.prototype.redo=function(){var t,e,i,n=this._mainSeries,o=n.properties();o.style===this._property&&n.isNeedRestart(this._value)&&this._chartWidget.screen.show(),this._prevResolution=o.interval.value(),this._prevValue=this._property.value(),this._storePriceAxisProps(),Object(r.saveDefaultProperties)(!0),t=o.interval.value(),e=this._model.defaultResolutions(),i=Object(h.getResolutionByChartStyle)(this._value,t,e),a.linking.interval.setValue(i),n.setChartStyleWithIntervalIfNeeded(this._value,i),Object(s.setLastUsedStyle)(this._value),Object(s.preparePriceAxisProperties)(o),Object(r.saveDefaultProperties)(!1),this._invalidateModel()},e.prototype.undo=function(){var t=this._mainSeries;t.properties().style===this._property&&t.isNeedRestart(this._value)&&this._chartWidget.screen.show(),Object(r.saveDefaultProperties)(!0),t.setChartStyleWithIntervalIfNeeded(this._prevValue,this._prevResolution),this._restorePriceAxisProps(),a.linking.interval.setValue(this._prevResolution),Object(r.saveDefaultProperties)(!1),this._invalidateModel()},e.prototype._storePriceAxisProps=function(){var t=this._mainSeries.priceScale();this._prevPriceAxisProps=t.mode()},e.prototype._restorePriceAxisProps=function(){this._mainSeries.priceScale().setMode(this._prevPriceAxisProps)},e.prototype._invalidateModel=function(){this._model&&(this._model.recalculateAllPanes(),this._model.invalidate(new c.a(c.a.LIGHT_UPDATE)))},e}(o.UndoCommand)},function(t,e,i){"use strict";var n,o,r,s,a,l;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"SetResolutionUndoCommand",function(){return l}),n=i(0),o=i(45),r=i(23),s=i(51),a=i(43),l=function(t){function e(e,i,n,o){var r=t.call(this,o)||this;return r._property=e,r._value=i,r._prevValue=e.value(),r._chartWidget=n,r}return n.c(e,t),e.prototype.redo=function(){this._chartWidget.screen.show(),this._property.setValue(this._value),this._handleResolution(this._value)},e.prototype.undo=function(){this._chartWidget.screen.show(),this._property.setValue(this._prevValue),this._handleResolution(this._prevValue)},e.prototype._handleResolution=function(t){var e=this._chartWidget.model().mainSeries().properties(),i=e.style.value(),n=Object(s.isRangeStyle)(i),o=r.Interval.isRange(t)
;!n&&o?e.style.setValue(a.STYLE_RANGE):n&&!o&&e.style.setValue(Object(s.getLastUsedStyle)())},e}(o.UndoCommand)},function(t,e,i){"use strict";(function(t){function n(t,e){this._options=Object.assign({},S,e),this.chart=t,this._properties=t.properties().scalesProperties,this.contextMenu=null,this.jqRow=$(document.createElement("tr")),this.jqLhsTimeAxisStub=$(document.createElement("td")),this.jqLhsTimeAxisStub.addClass("chart-markup-table"),this.jqLhsTimeAxisStub.appendTo(this.jqRow),this.jqLhsStub=$("<div>"),this.jqLhsStub.css("width","100%"),this.jqLhsStub.css("height","100%"),this.jqLhsStub.css("position","relative"),this.jqLhsStub.css("overflow","hidden"),this.jqLhsStub.appendTo(this.jqLhsTimeAxisStub),this.lhsCanvas=f(this.jqLhsStub,new m(16,16)),$(this.lhsCanvas).css("position","absolute"),$(this.lhsCanvas).css("z-order","2"),$(this.lhsCanvas).css("left",0),$(this.lhsCanvas).css("top",0),this.lhsCtx=this.lhsCanvas.getContext("2d"),this.jqCell=$(document.createElement("td")),this.jqCell.appendTo(this.jqRow),this.jqCell.addClass("chart-markup-table"),this.jqCell.addClass("time-axis"),this.jqCell.height(25),this._dv=$("<div>"),this._dv.css("width","100%"),this._dv.css("height","100%"),this._dv.css("position","relative"),this._dv.css("overflow","hidden"),this._dv.appendTo(this.jqCell),this.canvas=f(this._dv,new m(16,16)),$(this.canvas).css("position","absolute"),$(this.canvas).css("z-order","2"),$(this.canvas).css("left",0),$(this.canvas).css("top",0),this.ctx=this.canvas.getContext("2d"),this.top_canvas=f(this._dv,new m(16,16)),$(this.top_canvas).css("position","absolute"),$(this.top_canvas).css("z-order","1"),$(this.top_canvas).css("left",0),$(this.top_canvas).css("top",0),this.top_ctx=this.top_canvas.getContext("2d"),this.jqRhsTimeAxisStub=$(document.createElement("td")),this.jqRhsTimeAxisStub.addClass("chart-markup-table"),this.jqRhsTimeAxisStub.appendTo(this.jqRow),this.jqRhsStub=$("<div>"),this.jqRhsStub.css("width","100%"),this.jqRhsStub.css("height","100%"),this.jqRhsStub.css("position","relative"),this.jqRhsStub.css("overflow","hidden"),this.jqRhsStub.appendTo(this.jqRhsTimeAxisStub),this.rhsCanvas=f(this.jqRhsStub,new m(16,16)),$(this.rhsCanvas).css("position","absolute"),$(this.rhsCanvas).css("z-order","2"),$(this.rhsCanvas).css("left",0),$(this.rhsCanvas).css("top",0),this.rhsCtx=this.rhsCanvas.getContext("2d"),this.restoreDefaultCursor(),this.update(),this._minVisibleSpan=b.MINUTE_SPAN,this._mouseEventHandler=new g(this.jqCell,this,!0),this.updatePriceScalesVisibility()}var o,r,s,a,l,c,h,u,d,p,_,f,m,g,y,v,b,S;i(771),o=i(145).PriceAxisWidget,r=i(1).LineDataSource,s=i(134),a=i(30),l=a.ActionSeparator,c=i(84),h=i(17),u=i(94),d=u.resizeCanvas,p=u.hardResizeCanvas,_=u.clearRect,f=u.addCanvasTo,m=u.Size,g=i(126).MouseEventHandler,y=i(28).trackEvent,v=i(135).makeFont,b=i(188),S={contextMenuEnabled:!0,timezoneMenuEnabled:!0},n.prototype.destroy=function(){this._mouseEventHandler.destroy()},n.prototype._BORDER_SIZE=1,n.prototype._OFFSET_SIZE=1,n.prototype._TICK_LENGTH=3,n.prototype.backgroundColor=function(){
return this.chart.properties().paneProperties.background.value()},n.prototype.lineColor=function(){return this._properties.lineColor.value()},n.prototype.textColor=function(){return this._properties.textColor.value()},n.prototype.fontSize=function(){return this._properties.fontSize.value()},n.prototype.baseFont=function(){return v(this.fontSize(),"Arial","")},n.prototype.baseBoldFont=function(){return v(this.fontSize(),"Arial","bold")},n.prototype.rendererOptions=function(){var t,e;return this._rendererOptions||(this._rendererOptions={borderSize:this._BORDER_SIZE,offsetSize:this._OFFSET_SIZE,tickLength:this._TICK_LENGTH,fontSize:NaN,font:"",widthCache:new s}),t=this._rendererOptions,t.fontSize!==this.fontSize()&&(e=this.fontSize(),t.fontSize=e,t.font=this.baseFont(),t.font=v(this.fontSize(),"'Trebuchet MS', Tahoma, Arial, sans-serif",""),t.paddingTop=Math.ceil(e/2.5),t.paddingBottom=t.paddingTop,t.paddingHorizontal=Math.ceil(e/2),t.baselineOffset=Math.round(this.fontSize()/5),t.widthCache.reset()),this._rendererOptions},n.prototype.updatePriceScalesVisibility=function(){var t=this.chart.properties().scalesProperties;t.showLeftScale.value()?this.jqLhsTimeAxisStub.css("display","table-cell"):this.jqLhsTimeAxisStub.css("display","none"),t.showRightScale.value()?this.jqRhsTimeAxisStub.css("display","table-cell"):this.jqRhsTimeAxisStub.css("display","none")},n.prototype.mouseDownEvent=function(e){if(this._mousedown||!t.enabled("chart_zoom"))return!0;this._mousedown=!0;var i=this.chart.model();i.timeScale().isEmpty()||(this.setCursor("ew-resize"),i.startScaleTime(e.localX))},n.prototype.mouseDownOutsideEvent=function(t){var e=this.chart.model();!e.timeScale().isEmpty()&&this._mousedown&&(this._mousedown=!1,e.endScaleTime(),this.restoreDefaultCursor())},n.prototype.pressedMouseMoveEvent=function(t){var e,i,n=this.chart.model();n.timeScale().isEmpty()||(e=!1,i=(new Date).valueOf(),this._lastScrollScaleTime&&i-this._lastScrollScaleTime<100&&(e=!0),e||(n.scaleTimeTo(t.localX),this._lastScrollScaleTime=i))},n.prototype.mouseUpEvent=function(t){this._mousedown=!1;var e=this.chart.model();e.timeScale().isEmpty()||(e.endScaleTime(),this.restoreDefaultCursor())},n.prototype.contextMenuEvent=function(t,e){this._options.contextMenuEnabled&&this._createContextMenu().show(t)},n.prototype._createContextMenu=function(){return c.createMenu(this.getContextMenuActions(),{statName:"TimeScaleContextMenu"})},n.prototype.getContextMenuActions=function(){var e,i,n=this.chart;return n.model().mainSeries().createSessStudy(),n.updateActions(),e=n.actions(),i=t.enabled("charting_library_base")?[e.timeScaleReset,new l,e.applyTimeZone,e.sessionBreaks]:[e.timeScaleReset,new l,e.applyTimeZone,e.sessionBreaks,e.extendedHours],this._options.timezoneMenuEnabled||i.splice(2,1),t.enabled("show_chart_property_page")&&t.enabled("chart_property_page_timezone_sessions")&&e.tmzProperties&&i.push(new l,e.tmzProperties),i},n.prototype.mouseClickEvent=function(t){},n.prototype.mouseDoubleClickEvent=function(t){y("GUI","Double click time scale"),
this.chart.model().resetTimeScale()},n.prototype.optimalHeight=function(){var t=this.rendererOptions();return Math.ceil(t.offsetSize+t.borderSize+t.tickLength+t.fontSize+t.paddingTop+t.paddingBottom)},n.prototype.setSize=function(t,e,i){this.size&&this.size.equals(t)||(this.lhsStubSize=e,d(this.lhsCanvas,e),this.jqLhsTimeAxisStub.width(e.w),this.jqLhsTimeAxisStub.height(e.h),this.rhsStubSize=i,d(this.rhsCanvas,i),this.jqRhsTimeAxisStub.width(i.w),this.jqRhsTimeAxisStub.height(i.h),this.size=t,d(this.canvas,t),d(this.top_canvas,t),this.lhsCanvas.getContext("2d"),this.rhsCanvas.getContext("2d"),this.canvas.getContext("2d"),this.top_canvas.getContext("2d"),this.jqCell.width(t.w),this.jqCell.height(t.h))},n.prototype._spanIndex=function(t){for(var e=[b.MINUTE_SPAN,b.HOUR_SPAN,b.DAY_SPAN,b.MONTH_SPAN,b.YEAR_SPAN],i=e.length-1;i>0;){if(e[i]<=t)return i;i--}return i},n.prototype._spanOffset=function(t,e){if(e<t)throw Error("actual span cuold not be less then base");return this._spanIndex(e)-this._spanIndex(t)},n.prototype.update=function(){var t,e;this.chart.model()&&(t=this.chart.model().timeScale().marks())&&(e=this,this._minVisibleSpan=b.YEAR_SPAN,$.each(t,function(){e._minVisibleSpan=Math.min(this.span,e._minVisibleSpan)}))},n.prototype._hightlightBackground=function(t,e){var i,n,o,r,s=this.chart.model(),a=s.timeScale(),l=e[0].index,c=e[0].index;for(i=1;i<e.length;i++)l=Math.min(l,e[i].index),c=Math.max(c,e[i].index);n=a.indexToCoordinate(l),o=a.indexToCoordinate(c),r="rgba(109, 158, 235, 0.3)",_(t,n,1,o-n,this.size.h-1,r)},n.prototype.drawBackground=function(t){var e,i,n,o,s;if(_(t,0,0,this.size.w,this.size.h,this.backgroundColor()),e=this.chart.model()){if(i=e.timeScale(),(n=e.model().selectedSource())&&n instanceof r&&!i.isEmpty()){if(o=n.axisPoints(),0===o.length)return;this._hightlightBackground(t,o)}s=e.model().crossHairSource(),s.startMeasurePoint()&&this._hightlightBackground(t,s.measurePoints())}},n.prototype.drawBorder=function(t){t.save(),t.fillStyle=this.lineColor(),t.fillRect(-.5,.5,this.size.w+.5,this._BORDER_SIZE),t.restore()},n.prototype.drawStubs=function(){var t,e=this._BORDER_SIZE,i=2*this._BORDER_SIZE,n=this.lhsCtx;_(n,0,0,this.lhsStubSize.w,this.lhsStubSize.h,this.backgroundColor()),n.fillStyle=this.lineColor(),n.fillRect(this.lhsStubSize.w-i-.5,.5,i,e),n.fillRect(this.lhsStubSize.w-i-.5,-.5,e,e),t=this.rhsCtx,_(t,0,0,this.rhsStubSize.w,this.rhsStubSize.h,this.backgroundColor()),t.fillStyle=this.lineColor(),t.fillRect(-.5,.5,i,e),t.fillRect(.5,-.5,e,e)},n.prototype.drawTickMarks=function(t){var e,i,n,o,r,s,a,l,c,h,u,d=this.chart.model().timeScale().marks();if(d&&0!==d.length){for(e=d.reduce(function(t,e){return t.span>e.span?t:e},d[0]).span,e>30&&e<40&&(e=30),t.save(),t.strokeStyle=this.lineColor(),i=this.rendererOptions(),n=i.borderSize+i.tickLength+i.paddingTop+i.fontSize-i.baselineOffset,t.textAlign="center",t.translate(.5,.5),t.fillStyle=this.lineColor(),t.beginPath(),o=d.length;o--;)t.rect(d[o].coord,i.borderSize,1,i.tickLength);for(t.fill(),t.fillStyle=this.textColor(),r={},s=this.baseFont(),
a=this.baseBoldFont(),o=0;o<d.length;o++)l=d[o].span>=e?a:s,c=r[l]||[],c.push(d[o]),r[l]=c;for(h in r)for(t.setFont(h),u=r[h],o=0;o<u.length;o++)t.fillText(u[o].label,u[o].coord,n);t.restore()}},n.prototype.drawBackLabels=function(t){var e,i,n,o,r,s,a,l;for(t.save(),e=this.chart.model().dataSources(),i=this.chart.model(),n=i.sourceBeingMoved()||i.lineBeingEdited()||i.lineBeingCreated(),o=this.rendererOptions(),r=0;r<e.length;r++)if((s=e[r])!==this.chart.model().crossHairSource()&&s!==n&&s.timeAxisViews&&(a=s.timeAxisViews()))for(l=0;l<a.length;l++)a[l].renderer().draw(t,o);t.restore()},n.prototype.drawCrossHairLabel=function(t){var e,i,n,o,r;if(this.top_ctx.clearRect(-.5,-.5,this.size.w,this.size.h),e=this.chart.model(),i=e.sourceBeingMoved()||e.lineBeingEdited()||e.lineBeingCreated(),n=this.rendererOptions(),i){if(t.save(),i.timeAxisViews&&(o=i.timeAxisViews()))for(r=0;r<o.length;r++)o[r].renderer().draw(t,n);return void t.restore()}if(t.save(),o=this.chart.model().crossHairSource().timeAxisView())for(r=0;r<o.length;r++)o[r].renderer().draw(t,n);t.restore()},o.prototype.hardResetCanvas=function(){this.size&&(p(this.canvas,this.size),p(this.top_canvas,this.size))},n.prototype.paint=function(t){if(0!==t)if(t===h.UPDATE_CURSOR_ONLY)this.drawCrossHairLabel(this.top_ctx);else{var e=this.ctx;this.drawBackground(e),this.drawBorder(e),this.drawStubs(),this.chart.model()&&(this.drawTickMarks(e),this.drawBackLabels(e),this.drawCrossHairLabel(this.top_ctx))}},n.prototype.setStubVisible=function(t,e){var i=o.isLeft(t)?this.jqLhsTimeAxisStub:this.jqRhsTimeAxisStub;e?i.css("display","table-cell"):i.css("display","none")},n.prototype.restoreDefaultCursor=function(){this.setCursor("")},n.prototype.setCursor=function(t){var e="";"grabbing"!==t&&"ew-resize"!==t||(e="time-axis--cursor-"+t),this._currentCursorClassName!==e&&(this._currentCursorClassName&&this.jqCell.removeClass(this._currentCursorClassName),e&&this.jqCell.addClass(e),this._currentCursorClassName=e,this.jqCell.css("cursor"))},n.prototype.image=function(){var t={};return t.content=this.canvas.toDataURL(),t.contentWidth=this.size.w,t.contentHeight=this.size.h,t.lhsStub={},t.lhsStub.content=this.lhsCanvas.toDataURL(),t.lhsStub.contentWidth=this.lhsStubSize.w,t.lhsStub.contentHeight=this.lhsStubSize.h,t.rhsStub={},t.rhsStub.content=this.rhsCanvas.toDataURL(),t.rhsStub.contentWidth=this.rhsStubSize.w,t.rhsStub.contentHeight=this.rhsStubSize.h,t},e.TimeAxisWidget=n}).call(e,i(4))},function(t,e){},function(t,e,i){"use strict";function n(t,e){i.e(18).then(function(n){i(429).showSymbolInfoDialog(t,e)}.bind(null,i)).catch(i.oe)}Object.defineProperty(e,"__esModule",{value:!0}),e.showSymbolInfoDialog=n},function(t,e,i){"use strict";var n,o,r,s,a,l,c,h,u,d,p,_;Object.defineProperty(e,"__esModule",{value:!0}),n=i(0),o=i(8),r=i.n(o),s=i(6),a=i(15),l=i.n(a),c=i(22),h=i(5),u=Object(h.getLogger)("ChartApi.AbstractSession"),d="",p=function(){function t(t,e,i){this._isConnected=new l.a(!1),this._state=0,this._isConnectForbidden=!1,this._sessionId=d,this._sessionIdChanged=new r.a,
this._chartApi=t,this._sessionPrefix=e,this._shouldReconnectAfterCriticalError=i}return t.prototype.destroy=function(){this._logNormal("Destroying session"),this._isConnected.unsubscribe(),this.disconnect(),this._sessionIdChanged.destroy(),delete this._chartApi,this._logNormal("Session has been destroyed")},t.prototype.isConnected=function(){return this._isConnected},t.prototype.sessionId=function(){return this._sessionId},t.prototype.onSessionIdChanged=function(){return this._sessionIdChanged},t.prototype.connect=function(){0===this._state&&(Object(s.assert)(!this._isConnectForbidden,"Cannot call connect because it is forbidden at this moment"),this._setSessionId(this._sessionPrefix+"_"+Object(c.randomHash)()),this._logNormal("Connecting session - wait until transport stay connected"),this._state=1,this._chartApi.createSession(this._sessionId,this))},t.prototype.disconnect=function(){var t=this;0!==this._state&&(Object(s.assert)(this._sessionId!==d,"sessionId must not be invalid"),this._logNormal("Disconnecting session..."),this._forbidConnectWhile(function(){t._chartApi.connected()&&t._sendRemoveSession(),t._processDestroyingOnServer()}))},t.prototype.onMessage=function(t){var e,i;switch(t.method){case"connected":return void this._onChartApiConnected();case"disconnected":return void this._onChartApiDisconnected();case"critical_error":return e=t.params[0]+"",i=t.params[1]+"",void this._onCriticalError(e,i)}this._onMessage(t)},t.prototype._getChartApi=function(){return this._chartApi},t.prototype._generateLogMessage=function(t){return"["+this._sessionId+"] "+t},t.prototype._onCriticalError=function(t,e){var i=this;this._logError("Critical error. Reason="+t+", info="+e+"."),this._forbidConnectWhile(function(){i._processDestroyingOnServer()}),this._shouldReconnectAfterCriticalError?(this._logNormal("Reconnecting after critical error..."),this.connect()):this._logNormal("Reconnecting after critical error skipped")},t.prototype._onChartApiConnected=function(){Object(s.assert)(1===this._state,"Session is not registered"),this._logNormal("Transport is connected. Creating session on the server"),this._sendCreateSession(),this._state=2,this._isConnected.setValue(!0)},t.prototype._onChartApiDisconnected=function(){var t=this;this._logNormal("Transport is disconnected. Reconnecting..."),this._forbidConnectWhile(function(){t._processDestroyingOnServer()}),this.connect()},t.prototype._setSessionId=function(t){var e=this._sessionId;this._logNormal("Changing sessionId: old="+e+", new="+t),this._sessionId=t,this._sessionIdChanged.fire(t,e)},t.prototype._logNormal=function(t){u.logNormal(this._generateLogMessage(t))},t.prototype._logError=function(t){u.logError(this._generateLogMessage(t))},t.prototype._processDestroyingOnServer=function(){this._state=0,this._isConnected.setValue(!1),this._chartApi.removeSession(this._sessionId),this._setSessionId(d)},t.prototype._forbidConnectWhile=function(t){this._isConnectForbidden=!0,t(),this._isConnectForbidden=!1},t}(),i.d(e,"ChartSession",function(){return _}),
Object(h.getLogger)("ChartSession"),_=function(t){function e(e,i){void 0===i&&(i=!1);var n=t.call(this,e,"cs",!1)||this;return n._sessionDisabled=!1,n._handler=null,n._criticalError=new r.a,n._disableStatistics=i,n}return n.c(e,t),e.prototype.destroy=function(){this._criticalError.destroy(),this._handler=null,t.prototype.destroy.call(this)},e.prototype.serverTimeOffset=function(){return this._getChartApi().serverTimeOffset()},e.prototype.switchTimezone=function(t){return this._getChartApi().switchTimezone(this.sessionId(),t)},e.prototype.resolveSymbol=function(t,e,i){return this._getChartApi().resolveSymbol(this.sessionId(),t,e,i)},e.prototype.requestFirstBarTime=function(t,e,i){return this._getChartApi().requestFirstBarTime(this.sessionId(),t,e,i)},e.prototype.createSeries=function(t,e,i,n,o,r){return this._getChartApi().createSeries(this.sessionId(),t,e,i,n,o,r)},e.prototype.modifySeries=function(t,e,i,n,o){return this._getChartApi().modifySeries(this.sessionId(),t,e,i,n,o)},e.prototype.removeSeries=function(t,e){return!!this.isConnected().value()&&this._getChartApi().removeSeries(this.sessionId(),t,e)},e.prototype.requestMoreData=function(t,e,i){return this._getChartApi().requestMoreData(this.sessionId(),t,e,i)},e.prototype.requestMoreTickmarks=function(t,e,i){return this._getChartApi().requestMoreTickmarks(this.sessionId(),t,e,i)},e.prototype.requestMetadata=function(t,e){var i=this,n=function(){return i._getChartApi().requestMetadata(i.sessionId(),t,e)};n()},e.prototype.isCanCreateStudy=function(t){return this._getChartApi().isCanCreateStudy(t)},e.prototype.createStudy=function(t,e,i,n,o,r,s){return this._getChartApi().createStudy(this.sessionId(),t,e,i,n,o,r,s)},e.prototype.rebindStudy=function(t,e,i,n,o,r,s){return this._getChartApi().rebindStudy(this.sessionId(),t,e,i,n,o,r,s)},e.prototype.modifyStudy=function(t,e,i,n){return this._getChartApi().modifyStudy(this.sessionId(),t,e,i,n)},e.prototype.removeStudy=function(t,e,i){return this._getChartApi().removeStudy(this.sessionId(),t,e,i)},e.prototype.createPointset=function(t,e,i,n,o,r){return this._getChartApi().createPointset(this.sessionId(),t,e,i,n,o,r)},e.prototype.modifyPointset=function(t,e,i,n){return this._getChartApi().modifyPointset(this.sessionId(),t,e,i,n)},e.prototype.removePointset=function(t){return this._getChartApi().removePointset(this.sessionId(),t)},e.prototype.setVisibleTimeRange=function(t,e,i,n){this._getChartApi().setVisibleTimeRange(t,this.sessionId(),e,i,n)},e.prototype.criticalError=function(){return this._criticalError},e.prototype.connect=function(e){void 0===e&&(e=null),null!==e&&(this._handler=e),t.prototype.connect.call(this)},e.prototype.setHandler=function(t){this._handler=t},e.prototype.connected=function(){return this.isConnected().value()&&!this._sessionDisabled},e.prototype.disable=function(){this._sessionDisabled=!0},e.prototype.chartApi=function(){return this._getChartApi()},e.prototype._sendCreateSession=function(){var t=this;Object.keys(this).forEach(function(e){/^(s|st|symbol_)\d+$/.test(e)&&delete t[e]}),
this._getChartApi().chartCreateSession(this.sessionId(),this._disableStatistics)},e.prototype._sendRemoveSession=function(){this._getChartApi().chartDeleteSession(this.sessionId())},e.prototype._onMessage=function(t){this._handler&&this._handler(t)},e.prototype._onCriticalError=function(e,i){this._criticalError.fire(e,i),t.prototype._onCriticalError.call(this,e,i)},e}(p)},function(t,e,i){"use strict";var n,o,r,s;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"StudyMetaInfoRepository",function(){return s}),i(9),n=i(32),o=i.n(n),r=i(5),Object(r.getLogger)("Chart.Studies.StudyMetaInfoRepository",{color:"#606"}),s=function(){function t(t){this._nextRequestNumber=1,this._rawStudiesMetaInfo=[],this._metaInfoReceived=!1,this._onRawMetaReceivedDfd=null,this._tvScriptsRequestDfd=null,this._isReady=!1,this._metaInfoQueryQueue=[],this._studiesMetaInfo=[],this._studiesMigrations=[],this._studyScriptingPkgVers=null,this._gateway=t}return t.prototype.getStudyScriptingPkgVers=function(){return this._studyScriptingPkgVers},t.prototype.requestMetaInfo=function(){var t=this;return this._requestStarted(),new Promise(function(e){t._gateway.requestMetadata(t._makeNextRequestId(),function(i){var n=i.params[1].metainfo.slice();t._processLibraryMetaInfo(n),t._requestFinished(),e()})})},t.prototype.requestAlertsMetaInfo=function(){throw Error("not supported")},t.prototype.findById=function(t){if(this._isReady){var e=this._findStudyMetaInfo(t);if(!e)throw new ReferenceError("unexpected study id:"+t);return Promise.resolve(e)}return this._enqueueMetaInfoQuery(t)},t.prototype.isReady=function(){return this._isReady},t.prototype.getInternalMetaInfoArray=function(){return this._studiesMetaInfo},t.prototype.getMigrations=function(){return this._studiesMigrations},t.prototype._processMigrations=function(t){throw Error("not implemented")},t.prototype._addPineMetaInfo=function(t){throw Error("not implemented")},t.prototype._processSiteMetaInfo=function(t,e){throw Error("not implemented")},t.prototype._processLibraryMetaInfo=function(e){for(var i=0;i<e.length;++i)o.a.addOrReplaceStudyMetaInfo(this._studiesMetaInfo,t._applyLocalizationToMetadata(e[i]));this._studiesMetaInfo=this._studiesMetaInfo.sort(function(t,e){var i=t.description_localized||t.description,n=e.description_localized||e.description;return i>n?1:i<n?-1:0}),o.a.overrideDefaults(this._studiesMetaInfo)},t.prototype._requestStarted=function(){this._isReady=!1,this._studiesMetaInfo=[],this._studiesMigrations=[],this._studyScriptingPkgVers=null,this._tvScriptsRequestDfd=null,this._rawStudiesMetaInfo=[],this._metaInfoReceived=!1},t.prototype._requestFinished=function(){this._isReady=!0,this._processPendingMetaInfoQueries()},t.prototype._enqueueMetaInfoQuery=function(t){var e=this;return new Promise(function(i){e._metaInfoQueryQueue.push({studyId:t,resolver:i})})},t.prototype._processPendingMetaInfoQueries=function(){for(var t,e;this._metaInfoQueryQueue.length;){if(t=this._metaInfoQueryQueue.shift(),
null===(e=this._findStudyMetaInfo(t.studyId)))throw new ReferenceError("unexpected study id:"+t.studyId);t.resolver(e)}},t.prototype._findStudyMetaInfo=function(t){for(var e=0;e<this._studiesMetaInfo.length;e+=1)if(this._studiesMetaInfo[e].id===t)return this._studiesMetaInfo[e];return null},t.prototype._makeNextRequestId=function(){return"metadata_"+this._nextRequestNumber++},t._applyLocalizationToMetadata=function(t){return t.description_localized=window.t(t.description,{context:"study"}),t},t}()},function(t,e,i){"use strict";function n(){}function o(t){r(t),s(t)}var r,s;Object.defineProperty(e,"__esModule",{value:!0}),e.addPerfMark=o,r=console.timeStamp?console.timeStamp.bind(console):n,s=window.performance&&performance.mark?performance.mark.bind(performance):n},function(t,e,i){"use strict";function n(){function t(){return S}function e(t){return y&&i(),y=new r.UndoMacroCommand(t)}function i(){if(y){var t=y;y=null,t.isEmpty()||a(t)}}function n(){if(v.isEmpty())return!1;var t=v.pop();return!!t&&(t.undo(),b.push(t),d.logNormal("UNDO: "+t.text()),S.fire(g()),!0)}function s(){if(b.isEmpty())return!1;var t=b.pop();return!!t&&(t.redo(),v.push(t),d.logNormal("REDO: "+t.text()),S.fire(g()),!0)}function a(t){var e,i,n;y?y.addCommand(t):(b.clear(),e=v.head(),i=e&&e.text(),v.push(t),""!==(n=t.text())&&n!==i&&d.logNormal("DO: "+n)),t.executeOnPush()&&t.redo(),y||S.fire(g())}function c(){return{lastActualCommand:v.isEmpty()?null:v.head()}}function h(t){for(;!v.isEmpty()&&t.lastActualCommand!==v.head();)v.pop().undo();b.clear(),S.fire(g())}function p(){return v}function _(){return b}function f(){v.clear(),b.clear(),S.fire(g())}function m(t,e,i){if(t.value()!==e){var n=new l(t,e,i);a(n),n.redo()}}function g(){var t=v.head(),e=b.head();return{enableUndo:!v.isEmpty(),undoText:void 0===t?void 0:t.text(),enableRedo:!b.isEmpty(),redoText:void 0===e?void 0:e.text()}}var y=null,v=new o.UndoStack,b=new o.UndoStack,S=new u.a;return{beginUndoMacro:e,clearStack:f,createUndoCheckpoint:c,endUndoMacro:i,pushUndoCommand:a,redo:s,redoStack:_,setWatchedValue:m,undo:n,undoStack:p,undoToCheckpoint:h,state:g,onChange:t}}var o,r,s,a,l,c,h,u,d;Object.defineProperty(e,"__esModule",{value:!0}),o=i(351),r=i(321),s=i(0),a=i(45),l=function(t){function e(e,i,n){var o=t.call(this,n)||this;return o._wv=e,o._newValue=i,o._oldValue=e.value(),o}return s.c(e,t),e.prototype.redo=function(){this._wv.setValue(this._newValue)},e.prototype.undo=function(){this._wv.setValue(this._oldValue)},e}(a.UndoCommand),c=i(5),h=i(8),u=i.n(h),e.createUndoHistory=n,d=Object(c.getLogger)("Common.UndoHistory")},function(t,e,i){"use strict";function n(t,e,n){void 0===e&&(e={}),i.e(4).then(function(o){i(165).getImageOfChart(t,e,n)}.bind(null,i)).catch(i.oe)}function o(t,e,n){void 0===e&&(e={}),i.e(4).then(function(o){i(165).getImageOfChartSilently(t,e,n)}.bind(null,i)).catch(i.oe)}Object.defineProperty(e,"__esModule",{value:!0}),e.getImageOfChart=n,e.getImageOfChartSilently=o},function(t,e,i){"use strict";var n,o,r,s;Object.defineProperty(e,"__esModule",{value:!0}),
i.d(e,"SetChartLayoutCommand",function(){return s}),n=i(0),o=i(45),r=i(120),s=function(t){function e(e,i){var n=this,o="Change Chart Layout to "+r.layouts[i].title;return n=t.call(this,o)||this,n._chartWidgetCollection=e,n._newLayoutType=i,n._oldLayoutType=e.layout.value(),n}return n.c(e,t),e.prototype.redo=function(){this._chartWidgetCollection.layout.setValue(this._newLayoutType)},e.prototype.undo=function(){this._chartWidgetCollection.layout.setValue(this._oldLayoutType)},e}(o.UndoCommand)},function(t,e,i){"use strict";function n(t){return new Promise(function(e,i){t.subscribe(null,e,!0)})}Object.defineProperty(e,"__esModule",{value:!0}),e.delegateToPromise=n},function(t,e,i){"use strict";function n(t){r.call(this,t);var e=this;a.hideMarksOnBars().subscribe(this,function(){e._properties.visible.setValue(!a.hideMarksOnBars().value())})}function o(t){s.call(this)}var r=i(101).BarsMarksContainer,s=i(211).BarMarkTooltip,a=i(38);inherit(n,r),n.prototype._initialize=function(t){this._properties.visible.setValue(!0)},n.prototype.userEditEnabled=function(){return!1},n.prototype._constructor="UserDefinedBarsMarks",n.prototype._plateViewData=function(t){var e={text:t.text};return"object"==typeof t.color&&(e.theme="user_defined_theme",e.overridedTheme={},e.overridedTheme.border=t.color.border,e.overridedTheme.background=t.color.background),e},n.prototype.onClicked=function(){var t=this._model.lastHittestData().id;this._marks[t].onClicked()},n.prototype.clearMarks=function(){r.prototype.clearMarks.call(this),this.onNeedRepaint.fire()},n.prototype._getData=function(t){var e,i,n,o=this._model.mainSeries().symbolInfo();o&&(e=this.roundRange(this._rangeDifference(t)),i=this,n=this._model.mainSeries().properties().interval.value(),ChartApiInstance.getMarks(o,e.start,e.end,function(e){e.forEach(function(t){i._marks[t.id]=t},i),i._loadedRange=i._rangeUnion(t,i._loadedRange),i.onNeedRepaint.fire()},n))},n.prototype._createTooltip=function(){return new o},n.prototype.updatePlateData=function(t,e){return e.barWidth=this.barWidth(),e.text=t.text,e.tooltipMargin=-1*Math.max(t.minSize/2,.4*this.barWidth()),e},n.prototype.hasContextMenu=function(){return!1},inherit(o,s),o.prototype._createLayout=function(){this._layout=$('<div class="bar-mark-tooltip"></div>'),this._layout_text=$('<div class="text"></div>').appendTo(this._layout)},o.prototype._updatePlate=function(t){this._currentId=t.id,this._layout.css("border-color",t.theme.border),this._layout.css("margin-top",t.tooltipMargin+"px"),this._layout_text.html(t.text),this._layout.append(this._layout_text)},t.exports=n},function(t,e,i){"use strict";function n(t){a.call(this,t);var e=this;l.hideMarksOnBars().subscribe(this,function(){e._properties.visible.setValue(!l.hideMarksOnBars().value())}),this._paneView=new o(this)}function o(t,e){this.source=t,this._rendererFactory=e,this.stylesCache={},this.templatesCache={},this._lollipops={},this._createLollipops()}var r=i(7).Point,s=i(782).ESDPaneView,a=i(101).BarsMarksContainer,l=i(38),c=i(42),h=i(353).Tooltip;inherit(n,a),
n.prototype._initialize=function(t){this._properties.visible.setValue(!0)},n.prototype.userEditEnabled=function(){return!1},n.prototype._constructor="UserDefinedTimescaleMarks",n.prototype._plateViewData=function(t){return{text:t.text}},n.prototype.onClicked=function(){var t=this._model.lastHittestData().id;c.emit("onTimescaleMarkClick",t)},n.prototype.clearMarks=function(){a.prototype.clearMarks.call(this),this._paneView.clearCaches(),this.onNeedRepaint.fire()},n.prototype._getData=function(t){var e,i,n,o=this._model.mainSeries().symbolInfo();o&&(e=this.roundRange(this._rangeDifference(t)),i=this,n=this._model.mainSeries().properties().interval.value(),ChartApiInstance.getTimescaleMarks(o,e.start,e.end,function(e){e.forEach(function(t){i._marks[t.id]=t},i),i._loadedRange=i._rangeUnion(t,i._loadedRange),i.onNeedRepaint.fire()},n))},n.prototype.updatePlateData=function(t,e){return e.barWidth=this.barWidth(),e.text=t.text,e.tooltipMargin=-1*Math.max(t.minSize/2,.4*this.barWidth()),e},n.prototype.hasContextMenu=function(){return!1},n.prototype.paneViews=function(t){return this._properties.visible.value()?[this._paneView]:[]},n.prototype.onClickOutside=function(t){this._paneView.onClickOutside(t)},inherit(o,s),o.prototype._createLollipops=function(){var t=this.source._model.timeScale(),e=s.prototype._getY.call(this.source),i=this.source._model.lastHittestData(),n=this;$.each(this.source._marks,function(o,s){var a=s.id;n._lollipops[a]={id:a,basePoint:new r(t.indexToCoordinate(t.timePointToIndex(s.tickmark))+1,e),hovered:i&&i.id===a||a===n.getLastClickedLollipopId(),barY:null,label:s.label,color:s.color,items:s.tooltip,tooltip:n._lollipops.hasOwnProperty(a)?n._lollipops[a].tooltip:new h,visible:!0}})},o.prototype.clearCaches=function(){this._lollipops={}},o.prototype.update=function(){this._createLollipops()},o.prototype.renderer=function(){return this.update(),s.prototype.renderer.call(this)},o.prototype._generateTemplateStyle=function(t,e,i){var n,o,r=t+e+i;return r in this.stylesCache||(n={strokeStyle:e,lineWidth:1,fillStyle:"white",barLine:{lineStyle:CanvasEx.LINESTYLE_DASHED},lollipop:{width:32,height:96,circleHeight:16,radius:12,lineWidth:1.5,fillStyle:"white",strokeStyle:"#E2745B",text:{label:i,strokeStyle:e,font:"normal 12px Verdana, Arial, sans-serif"}}},o={strokeStyle:e,lollipop:{fillStyle:e,fillCircle:!0,text:{strokeStyle:"white"}}},this.stylesCache[r]="default"===t?n:$.extend(!0,{},n,o)),this.stylesCache[r]},o.prototype.getTemplate=function(t,e){var i=t+e.color+e.label;return i in this.templatesCache||(this.templatesCache[i]=this.createTemplate(this._generateTemplateStyle(t,e.color,e.label))),this.templatesCache[i]},o.prototype.getStyle=function(t,e){return this._generateTemplateStyle(t,e.color,e.label)},o.prototype.createText=function(t,e){"string"==typeof t.items?e.addTextLine(t.items):Array.isArray(t.items)&&t.items.forEach(function(t){e.addTextLine(t)})},o.prototype.hasTooltip=function(t){return!!t.tooltip&&t.tooltip.length},t.exports=n},function(t,e,i){"use strict";function n(t,e){this._lastClickedId=null,
this._model=t,this._study=e,this._metaInfo=e.metaInfo(),this._lollipops={},this._textCache={},this.templatesCache={},this._invalidated=!0,this.templatesCache.hovered=this.createTemplate(this.hoveredStyle),this.templatesCache.default=this.createTemplate(this.defaultStyle),t.properties().paneProperties.background.subscribe(this,this.onPaneBgChange)}function o(t){this.data=t}function r(t){this.data=t,this._hittest=new c(c.CUSTOM,t)}function s(t,e){this._data=t,this._paneView=e,this.textRenderer=new s.TextRenderer(t.style.lollipop.importance)}var a=i(7).Point,l=i(57).pointInCircle,c=i(10).HitTestResult,h=i(66).CompositeRenderer,u=i(353).Tooltip;i(58).PercentageFormatter,i(784).roundToFirstValuable;n.prototype.onPaneBgChange=function(){this.defaultStyle.lollipop.fillStyle=this._model.properties().paneProperties.background.value(),this._stylesCache=null,Object.keys(this.templatesCache).forEach(function(t){0===t.indexOf("default")&&(this.templatesCache[t]=null)},this)},n.prototype.onClickOutside=function(){this._lastClickedId=null},n.prototype.closeTooltips=function(){var t,e;for(t in this._lollipops)this._lollipops.hasOwnProperty(t)&&(e=this._lollipops[t],e.visible&&(e.tooltip.isOpened()&&e.tooltip.hide(),e.visible=!1))},n.prototype.getLastClickedLollipopId=function(){return this._lastClickedId},n.prototype._setStackStudies=function(){this._stackStudies=[]},n.prototype._getY=function(){var t,e,i=0,n=this._model.panes();for(t=n.length;t--;)e=n[t],e.containsMainSeries()&&(i+=e.height());return i},n.prototype.update=function(){this._invalidated=!0},n.prototype.updateImpl=function(){var t,e,i,n,o,r,s,a,l,c,h,u;this._setStackStudies(),t=this,e=this._study.data(),i=this._model.timeScale(),n=i.visibleBars(),o=this._model.mainSeries().bars(),r=this._study.priceScale(),s=this._model.mainSeries(),a=s.firstBar(),r&&!r.isEmpty()&&!i.isEmpty()&&a&&e&&(this.closeTooltips(),l=this._getY(),c=n.firstBar(),h=n.lastBar(),u=e.range(c,h),u.each(function(e,n){var s,a=0;for(s=0;s<t._stackStudies.length;++s)t._stackStudies[s].data().contains(e)&&++a;e>c&&e<h&&t.addLollipop(l,o,i,r,e,n,a)}),this.afterUpdate(l,o,i,r))},n.prototype.addLollipop=function(t,e,i,n,o,r,s){var l,c,h,d,p,_,f,m,g=r[0],y=this._model.mainSeries().symbolInfo();y&&(l=y.name,c=null,h=this._study.metaInfo().id+"_"+g+"_"+l,d=this._model.lastHittestData(),p=d&&d.id===h,p&&null!==(_=e.valueAt(o))&&(f=_[TradingView.LOW_PLOT],m=this._model.mainSeries().firstValue(),c=n.priceToCoordinate(f,m)),this._lollipops[h]=$.extend({id:h,visible:!0,basePoint:new a(i.indexToCoordinate(o)+1,t),hovered:p||h===this.getLastClickedLollipopId(),barY:c,stack:s,tooltip:this._lollipops.hasOwnProperty(h)?this._lollipops[h].tooltip:new u},this.extraData(r)))},n.prototype.afterUpdate=function(t,e,i){},n.prototype.extraData=function(t){throw Error("Not Implemented")},n.prototype.createText=function(t,e){throw Error("Not Implemented")},n.prototype.showBarLine=function(){return!0},n.prototype.getStyle=function(t,e){var i,n=t;return e.stack&&(n+="_stack:"+e.stack),
"hovered"===n?this.hoveredStyle:"default"===n?this.defaultStyle:(this._stylesCache||(this._stylesCache={}),this._stylesCache[n]||(i=TradingView.clone("hovered"===t?this.hoveredStyle:this.defaultStyle),e.stack&&(i.lollipop.incHeight=24*e.stack),this._stylesCache[n]=i),this._stylesCache[n])},n.prototype.hasTooltip=function(t){return!0},n.prototype.renderer=function(){var t,e,i,n,l,c,u,d,p;this._invalidated&&(this.updateImpl(),this._invalidated=!1),t=new h;for(e in this._lollipops)this._lollipops.hasOwnProperty(e)&&(i=this._lollipops[e],n=15,l=this.getStyle(i.hovered?"hovered":"default",i),i.visible&&(c=$.extend({tooltipPoint:new a(i.basePoint.x,i.basePoint.y-l.lollipop.circleHeight-n-(l.lollipop.incHeight||0)),style:l,createText:this.createText.bind(this)},i),u=this.getTemplate(i.hovered?"hovered":"default",i),d={circlePoint:new a(i.basePoint.x,i.basePoint.y-l.lollipop.circleHeight-(l.lollipop.incHeight||0)),style:l,template:u,basePoint:i.basePoint,id:i.id,mouseClickHandler:this._lollipopMouseClickHandler.bind(this,i.id)},t.append(new r(d)),i.hovered&&this.hasTooltip(i)&&i.barY&&this.showBarLine()&&(p={style:{lineStyle:l.barLine.lineStyle,strokeStyle:l.strokeStyle,lineWidth:l.lineWidth},startPoint:new a(i.basePoint.x,i.basePoint.y-l.lollipop.circleHeight),endPoint:new a(i.basePoint.x,i.barY)},t.append(new o(p))),t.append(new s(c,this))));return t},n.prototype.getTemplate=function(t,e){var i=t;return e.stack&&(i+="_stack:"+e.stack),this.templatesCache[i]||(this.templatesCache[i]=this.createTemplate(this.getStyle(t,e))),this.templatesCache[i]},n.prototype.createTemplate=function(t){var e=document.createElement("canvas"),i=e.getContext("2d"),n=new a(t.lollipop.width/2,t.lollipop.height-t.lollipop.circleHeight-(t.lollipop.incHeight||0));return this.drawCircle(i,t,n),this.drawLabel(i,t,n),e},n.prototype.drawCircle=function(t,e,i){t.strokeStyle=e.strokeStyle,t.fillStyle=e.lollipop.fillStyle,t.lineWidth=e.lollipop.lineWidth,CanvasEx.setLineStyle(t,CanvasEx.LINESTYLE_SOLID),t.beginPath(),t.arc(i.x,i.y,e.lollipop.radius,0,2*Math.PI,!1),t.closePath(),t.stroke(),e.lollipop.fillCircle&&t.fill()},n.prototype.drawLabel=function(t,e,i){t.textAlign="center",t.textBaseline="middle",t.fillStyle=e.lollipop.text.strokeStyle,t.font=e.lollipop.text.font,t.fillText(e.lollipop.text.label,i.x,i.y)},n.prototype._lollipopMouseClickHandler=function(t){this._lastClickedId=this._lastClickedId===t?null:t},o.prototype.draw=function(t){t.strokeStyle=this.data.style.strokeStyle,t.lineWidth=this.data.style.lineWidth,CanvasEx.setLineStyle(t,this.data.style.lineStyle),CanvasEx.drawLine(t,this.data.startPoint.x,this.data.startPoint.y,this.data.endPoint.x,this.data.endPoint.y)},o.prototype.hitTest=function(t){return null},r.prototype.hitTest=function(t){return l(t,this.data.circlePoint,this.data.style.lollipop.radius)?this._hittest:null},r.prototype.draw=function(t){var e=this.data.template;t.drawImage(e,this.data.basePoint.x-(.5+this.data.style.lollipop.width/2<<0)+.5,this.data.basePoint.y-this.data.style.lollipop.height+.5)},s.prototype.draw=function(t){
this._data.createText(this._data,this.textRenderer),this._paneView.getLastClickedLollipopId()===this._data.id?this._data.tooltip.show({items:[this.textRenderer],x:this._data.basePoint.x,y:this._data.basePoint.y-this._data.style.lollipop.circleHeight-10-2*this._data.style.lollipop.radius*(this._data.stack?this._data.stack:0),wrapElement:t.canvas.parentNode,leftBorderColor:this._data.color}):this._data.tooltip.hide()},s.prototype.hitTest=function(t){return null},s.TextRenderer=function(t){this.lines=[],this.fontHeight=12,this.font=this.fontHeight+"px Arial, sans-serif",this.lineSpacing=8,this.fillStyle="black",t&&(this.importance=t)},s.TextRenderer.prototype.draw=function(t,e){var i,n,o=e.y;for(i=0;i<this.lines.length;i++)n=this.lines[i],t.font=this.font,n.options.fontWeight&&(t.font=n.options.fontWeight+" "+this.font),t.fillStyle=this.fillStyle,n.renderer(t,n.line,{x:e.x,y:o}),o+=this.lineSpacing+this.fontHeight},s.TextRenderer.prototype.measure=function(){return this.lines.length*(this.fontHeight+this.lineSpacing)-this.lineSpacing},s.TextRenderer.prototype.basicRenderer=function(t,e,i){t.fillText(e,i.x,i.y)},s.TextRenderer.prototype.addMulticolorTextLine=function(t,e){this.addTextLine(t,e,this.multicolorRenderer)},s.TextRenderer.prototype.addTextLine=function(t,e,i){i||(i=this.basicRenderer),e||(e={}),this.lines.push({line:t,renderer:i,options:e})},s.TextRenderer.prototype.multicolorRenderer=function(t,e,i){var n,o,r=i.x;for(n=0;n<e.length;++n)o=e[n],t.fillStyle=o.color,t.fillText(o.text,r,i.y),r+=t.measureText(o.text).width},e.ESDPaneView=n},function(t,e){},function(t,e,i){"use strict";function n(t){var e,i=""+t,n=i.split(".")[1],o=2;return n&&(e=n.match(/^([0]+)/))&&(o=e[1].length+1),parseFloat(i).toFixed(o)}Object.defineProperty(e,"__esModule",{value:!0}),e.roundToFirstValuable=n},function(t,e,i){"use strict";var n=i(229).TimePointIndexSearchMode,o=i(48),r=i(21),s=i(787),a=i(356),l=i(329),c=l.ChartApiInterface,h=l.HandlerInfo,u=i(12).requireFullInterfaceImplementation,d=i(5).getLogger("Chart.ChartApiLocal");TradingView.STUDY_COUNT_LIMIT=210,JSServer.ChartApi=function(t){this._notificationHandlers={},this._sessions={},this.studyCounter=0,this._connected=!1,this._enabled=!1,this._studyEngine=new s(t),this._callbacks={},this._symbolIdCache={},this._seriesIdCache={},this._recentSeriesId={},this._enableLogging=!1,this._enabledMoreBarsRequest=!0,this._serverTimeOffset=0;var e=this;this._studyEngine.on("configuration_received",function(){e._fireEvent("configuration_received")}),this._studyEngine.on("realtime_tick",function(t){var i={time:t.value[0]/1e3,open:t.value[1],high:t.value[2],low:t.value[3],close:t.value[4],volume:t.value[5]};e._fireEvent("realtime_tick",i,!0)})},JSServer.ChartApi.prototype._makeSymbolKey=function(t,e){if(!t||!e)throw Error("incorrect identifiers");return t+"_"+e},JSServer.ChartApi.prototype._makeSeriesKey=function(t,e){if(!t||!e)throw Error("incorrect identifiers");return t+"_"+e},JSServer.ChartApi.prototype.destroy=function(){this._studyEngine.destroy(),this._studyEngine=null},
JSServer.ChartApi.prototype.purgeCache=function(t){this._symbolIdCache={},this._studyEngine.purgeCache(),this._studyEngine.purgeRangeExtensionData(),this._studyEngine.purgeDataCache()},JSServer.ChartApi.prototype.setAdditionalBarsRequestEnabled=function(t){this._enabledMoreBarsRequest=t},JSServer.ChartApi.prototype.defaultWatchlistSymbols=function(){return this._watchlistSettings.default_symbols},JSServer.ChartApi.prototype.defaultResolutions=function(){return this._studyEngine.supportedResolutions()||["1","3","5","15","30","45","60","120","180","240","D","W","M"]},JSServer.ChartApi.prototype.supportedSymbolsTypes=function(){return this._studyEngine.supportedSymbolsTypes()},JSServer.ChartApi.prototype.supportedExchangesList=function(){return this._studyEngine.supportedExchangesList()},JSServer.ChartApi.prototype.futuresRegex=function(){return this._studyEngine.futuresRegex()},JSServer.ChartApi.prototype.start=function(){this._enabled=!0,this._fireEvent("start_enabled")},JSServer.ChartApi.prototype._logMessage=function(t){this._enableLogging&&console.log(t)},JSServer.ChartApi.prototype.unsubscribe=function(t,e){var i=this._callbacks[t];i&&i.splice(i.indexOf(e),1)},JSServer.ChartApi.prototype.on=function(t,e){return this._callbacks.hasOwnProperty(t)||(this._callbacks[t]=[]),this._callbacks[t].push(e),this},JSServer.ChartApi.prototype._fireEvent=function(t,e,i){var n,o;if(this._callbacks.hasOwnProperty(t))for(n=this._callbacks[t].slice(0),i||(this._callbacks[t]=[]),o=0;o<n.length;++o)n[o](e)},JSServer.ChartApi.prototype.chartCreateSession=function(t,e){},JSServer.ChartApi.prototype.chartDeleteSession=function(t){},JSServer.ChartApi.prototype.createSession=function(t,e){TradingView.ChartapiMessagerInstances[t]=new a(this,t),this._sessions[t]=e,this._notificationHandlers[t]={},this.connected()&&e.onMessage({method:"connected",params:[]})},JSServer.ChartApi.prototype.removeSession=function(t){delete this._sessions[t],delete this._notificationHandlers[t],this._studyEngine.stopSources(t)},JSServer.ChartApi.prototype.connected=function(){return this._connected},JSServer.ChartApi.prototype.connect=function(){if(!this._enabled){var t=this;return void this.on("start_enabled",function(){t.connect()})}this.connected()||(this._connected=!0,this.sessionid="dummy session id",this._notifySessions({method:"connected",params:[]}))},JSServer.ChartApi.prototype.disconnect=function(){this._connected=!1,this._notifySessions({method:"disconnected",params:[]})},JSServer.ChartApi.prototype.switchTimezone=function(t,e){if(TradingView.ChartapiMessagerInstances[t].timezone()!==e&&(TradingView.ChartapiMessagerInstances[t].setTimezone(e),this._recentSeriesId[t])){var i=this;this._doWhenSeriesSymbolIdIsReady(t,this._recentSeriesId[t],function(e){var n=i._seriesIdCache[i._makeSeriesKey(t,i._recentSeriesId[t])].resolution;i._studyEngine.recreateSources(e.name,n,t,!0),i._doWhenSeriesDataReceived(t,function(){
var n=i._seriesIdCache[i._makeSeriesKey(t,i._recentSeriesId[t])].resolution,o=TradingView.ChartapiMessagerInstances[t].lastBarTime(i._recentSeriesId[t]);o&&i._studyEngine.rebuildExtrapolatedData(t,e.name,n,e.info,1e3*o)})})}},JSServer.ChartApi.prototype.receiveLocalResponse=function(t){this._logMessage("< "+t.method),this._dispathNotification(t),this._fireEvent("message_"+t.method,void 0,!0)},JSServer.ChartApi.prototype.getMarks=function(t,e,i,n,o){this._studyEngine.getMarks(t,e,i,n,o)},JSServer.ChartApi.prototype.getTimescaleMarks=function(t,e,i,n,o){this._studyEngine.getTimescaleMarks(t,e,i,n,o)},JSServer.ChartApi.prototype.resolveSymbol=function(t,e,i,n,o){function r(e,n){Object.keys(s._seriesIdCache).some(function(t){return s._seriesIdCache[t].symbolId===e})&&TradingView.ChartapiMessagerInstances[t].onSeriesClearData(0,""),TradingView.ChartapiMessagerInstances[t].onSymbolError(e,n),s._symbolIdCache[s._makeSymbolKey(t,e)]={name:i,status:"invalid_symbol"},s._fireEvent("resolve_fail",{session:t,symbolId:e},!0),s._fireEvent(s._makeSymbolKey(t,e)+"_resolve_fail")}this._notificationHandlers[t][e]=new h(n,e),this._symbolIdCache[this._makeSymbolKey(t,e)]=null;var s=this;this._studyEngine.resolveSymbol(i,function(n){if(n.errmsg)return void r(e,n.errmsg);s._symbolIdCache[s._makeSymbolKey(t,e)]={name:i,info:n,status:"ok"},s._fireEvent("symbol_resolved",{symbolInfo:n,symbolId:e,session:t},!0),s._fireEvent(s._makeSymbolKey(t,e)+"_resolved",n),TradingView.ChartapiMessagerInstances[t].onSymbolResolved(e,n)},function(t){r(e,t)})},JSServer.ChartApi.prototype._doWhenSymbolIdIsReady=function(t,e,i){function n(){return{name:r._symbolIdCache[r._makeSymbolKey(t,e)].name,info:r._symbolIdCache[r._makeSymbolKey(t,e)].info}}function o(){s&&(i(n()),s=!1,r.unsubscribe(r._makeSymbolKey(t,e)+"_resolved",o),r.unsubscribe(r._makeSymbolKey(t,e)+"_resolve_fail",o))}var r=this,s=!0;this._symbolIdCache[this._makeSymbolKey(t,e)]?o():(this.on(this._makeSymbolKey(t,e)+"_resolved",o),this.on(this._makeSymbolKey(t,e)+"_resolve_fail",o))},JSServer.ChartApi.prototype._doWhenSeriesDataReceived=function(t,e){TradingView.ChartapiMessagerInstances[t].seriesCompleted.subscribe(null,e,!0)},JSServer.ChartApi.prototype._doWhenSeriesSymbolIdIsReady=function(t,e,i,n){function o(){var e=c._symbolIdCache[c._makeSymbolKey(t,h)];return{name:e.name,info:e.info}}function r(){i(o())}function s(){c.unsubscribe("symbol_resolved",l),c.unsubscribe("resolve_fail",a)}function a(e){e.symbolId===h&&e.session===t&&(s(),n&&n())}function l(e){e.symbolId===h&&e.session===t&&(s(),r())}var c=this,h=this._seriesIdCache[t+"_"+e].symbolId;this._symbolIdCache[this._makeSymbolKey(t,h)]?r():(this.on("symbol_resolved",l),this.on("resolve_fail",a))},JSServer.ChartApi.prototype.createSeries=function(t,e,i,n,o,s,a){i=i||"";var l=this;this._notificationHandlers[t][e]=new h(function(s){if("series_completed"===s.method){var c=r.Symbol.parsePeriod(o);c.range&&l._applyRange(t,n,e,i,c.range)}a(s)},e),this._recentSeriesId[t]=e,
TradingView.ChartapiMessagerInstances[t].setResolution(r.Symbol.parsePeriod(o).pureResolution),this._seriesIdCache[t+"_"+e]={symbolId:n,resolution:o,turnaround:i},this._studyEngine.updateSeriesTurnaround(t,e,i),this._doWhenSeriesSymbolIdIsReady(t,e,function(n){l._studyEngine.seriesTurnaround(t,e)===i&&l._studyEngine.createSeries(n.name,o,t,e,i)})},JSServer.ChartApi.prototype.removeSeries=function(t,e,i){this._notificationHandlers[t][e]=new h(i,e),this._studyEngine.removeSeries(t,e)},JSServer.ChartApi.prototype.setVisibleTimeRange=function(t,e,i,o,r){function s(){var s,l;a=t.data(),s=[a.plotValueToTimePointIndex(i,TradingView.TIME_PLOT,n.FromLeft),a.plotValueToTimePointIndex(o,TradingView.TIME_PLOT,n.FromRight)],a.valueAt(s[1])[0]<o&&t.syncModel()&&(l=t.syncModel().distance(a.valueAt(s[1])[0],o),l.success&&(s[1]+=l.result)),TradingView.ChartapiMessagerInstances[e].onSeriesTimeframeUpdate(c,h._seriesIdCache[e+"_"+c].turnaround,s[0],s[1],!0),t.requestMoreData(),r&&r()}var a=t.data(),l=!!a.plotValueToTimePointIndex(i,TradingView.TIME_PLOT,n.FromLeft),c=this._recentSeriesId[e],h=this;l?s():(this._studyEngine.ensureExtendedTo(c,e,i),this._doWhenSeriesDataReceived(e,s))},JSServer.ChartApi.prototype._exactBarsCountOfTimeFrame=function(t,e){var i,n=chartWidget.model().mainSeries().bars(),r=chartWidget.model().mainSeries().symbolInfo().session,s=n._valueAt(n.size()-1)[0],a=o.alignPeriodsBack(r,t.resolution,t.interval,1,1e3*s),l=n.size();for(a/=1e3,i=0,i=0;i<l&&!(n._valueAt(i)[0]>a);++i);return l-i},JSServer.ChartApi.prototype._applyRange=function(t,e,i,n,o){var r,s,a,l=chartWidget.model().mainSeries().bars().size();0!==l&&(r=this._exactBarsCountOfTimeFrame(o,this._symbolIdCache[this._makeSymbolKey(t,e)].info),s=Math.max(0,l-1-r),a=Math.max(s,l-1),TradingView.ChartapiMessagerInstances[t].onSeriesTimeframeUpdate(i,n,s,a))},JSServer.ChartApi.prototype.modifySeries=function(t,e,i,n,o,s,a){var l,c;i=i||"",l=this._seriesIdCache[t+"_"+e]?this._seriesIdCache[t+"_"+e].resolution:void 0,TradingView.ChartapiMessagerInstances[t].setResolution(r.Symbol.parsePeriod(o).pureResolution),c=this,this._notificationHandlers[t][e]=new h(function(a){var h,u;"series_completed"===a.method&&(h=r.Symbol.parsePeriod(l),u=r.Symbol.parsePeriod(o),u.range&&h.range!==u.range&&c._applyRange(t,n,e,i,u.range)),s(a)},e),this._recentSeriesId[t]=e,this._studyEngine.updateSeriesTurnaround(t,e,i),a&&(this._seriesIdCache[this._makeSeriesKey(t,a)]=null),this._seriesIdCache[this._makeSymbolKey(t,e)]={symbolId:n,resolution:o,turnaround:i},this._doWhenSeriesSymbolIdIsReady(t,e,function(e){c._studyEngine.purgeRangeExtensionData(t),c._studyEngine.recreateSources(e.name,o,t,!0)})},JSServer.ChartApi.prototype.requestMoreData=function(t,e,i,n){if(this._enabledMoreBarsRequest){var o=this;setTimeout(function(){o._notificationHandlers[t][e]=new h(n,e),o._studyEngine.extendSeriesRange(e,t,i)})}},JSServer.ChartApi.prototype.setStudiesAccessController=function(t){this.studiesAccessController=t},JSServer.ChartApi.prototype.setWatchlistSettings=function(t){this._watchlistSettings=t},
JSServer.ChartApi.prototype.allStudiesMetadata=function(){return this._studyEngine.studiesMetadata()},JSServer.ChartApi.prototype.requestMetadata=function(t,e,i){this._notificationHandlers[t][e]=new h(i,e);var n=this.studiesAccessController.getEnabledTools();TradingView.ChartapiMessagerInstances[t].onRequestMetadata(e,n)},JSServer.ChartApi.prototype.isCanCreateStudy=function(){return this.studyCounter<TradingView.STUDY_COUNT_LIMIT},JSServer.ChartApi.prototype.createStudy=function(t,e,i,n,o,r,s){var a,l,c;if(!this.isCanCreateStudy())throw Error("Exceeded the limit of studies");a=this,i=i||"",this._notificationHandlers[t][e]=new h(s,e),l=this._seriesIdCache[this._makeSeriesKey(t,n)].symbolId,c=this._seriesIdCache[this._makeSeriesKey(t,n)].resolution,this._doWhenSymbolIdIsReady(t,l,function(n){a._studyEngine.createStudy(n.name,c,t,e,i,o,r),a.studyCounter++})},JSServer.ChartApi.prototype.rebindStudy=function(t,e,i,n,o,r,s,a){throw Error("Not implemented")},JSServer.ChartApi.prototype.removeStudy=function(t,e){this._notificationHandlers[t][e]=null,this._studyEngine.removeStudy(t,e),this.studyCounter--},JSServer.ChartApi.prototype.modifyStudy=function(t,e,i,n,o){var r=this;setTimeout(function(){i=i||"",r._notificationHandlers[t][e]=new h(o,e),r._studyEngine.recomputeStudy(e,n,t,i)},0)},JSServer.ChartApi.prototype.createPointset=function(t,e,i,n,o,r,s){i=i||"",this._notificationHandlers[t][e]=new h(s,e);var a=this;this._doWhenSymbolIdIsReady(t,n,function(i){a._studyEngine.createPointset(t,e,i.info.full_name,i.info,o,r)})},JSServer.ChartApi.prototype.modifyPointset=function(t,e,i,n,o){throw Error("This call is not implemented")},JSServer.ChartApi.prototype.removePointset=function(t,e,i){this._notificationHandlers[t][e]=null,this._studyEngine.removePointset(e)},JSServer.ChartApi.prototype.requestMoreTickmarks=function(t,e,i,n){this._notificationHandlers[t][e]=new h(n,e);var o=this;this._doWhenSeriesSymbolIdIsReady(t,e,function(n){var r=o._seriesIdCache[o._makeSeriesKey(t,e)].resolution;o._studyEngine.onMoreTickmarksRequested(t,n.name,n.info,r,i)})},JSServer.ChartApi.prototype.requestFirstBarTime=function(t,e,i,n){this._notificationHandlers[t][e]=new h(n,e)},JSServer.ChartApi.prototype._invokeHandler=function(t,e){t&&t(e)},JSServer.ChartApi.prototype._sendRequest=function(t,e){throw Error("This method is not implemented")},JSServer.ChartApi.prototype._onMessage=function(t){throw Error("This method is not implemented")},JSServer.ChartApi.prototype._convertTimescaleResponse=function(t){var e,i=t.marks;for(e=0;e<i.length;++e)i[e]={span:i[e][0],time:i[e][1],index:i[e][2]};return t},JSServer.ChartApi.prototype._dispathNotification=function(t){var e,i,n,o,r,s,a,l,c,h,u=t.params.shift();if(this._notificationHandlers[u])switch(t.method){case"timescale_update":e=t.params[0],i=t.params[1],n=this._convertTimescaleResponse(i),n.clear=0===i.changes.length&&0===i.marks.length,this._sessions[u].onMessage({method:"timescale_update",params:n});for(o in e)r={},r.customId=o,r.plots=e[o].series,e[o].ns&&(r.nonseries=e[o].ns),
r.turnaround=e[o].turnaround,s={method:"data_update",params:r},this._invokeNotificationHandler(u,o,s);break;case"tickmark_update":n=this._convertTimescaleResponse(t.params[0]),n.changes=[],this._sessions[u].onMessage({method:"timescale_update",params:n});break;case"data_update":for(o in t.params[0]){a=t.params[0][o],r={},r.customId=o,r.plots=a.series?a.series:a.plots,r.turnaround=a.turnaround,"s"in a&&"ns"in a&&(r.plots=a.s,r.nonseries=a.ns);for(l=0;l<r.plots.length;l++)for(c in r.plots[l].value)1e100===r.plots[l].value[c]&&(r.plots[l].value[c]=void 0);s={method:"data_update",params:r},this._invokeNotificationHandler(u,o,s)}break;case"index_update":for(o in t.params[0])s={method:"index_update",params:t.params[0][o]},this._invokeNotificationHandler(u,o,s);break;case"critical_error":d.logNormal(new Date+" critical_error session:"+this.sessionid+" reason:"+t.params[0]),this._sessions[u].onMessage({method:"critical_error",params:t.params});break;case"quote_symbol_data":case"quote_list_fields":case"depth_symbol_error":case"depth_symbol_success":case"dd":case"dpu":case"depth_bar_last_value":this._sessions[u].onMessage({method:t.method,params:t.params});break;default:h=t.params[0],this._invokeNotificationHandler(u,h,t)}},JSServer.ChartApi.prototype._invokeNotificationHandler=function(t,e,i){if(void 0!==e){var n=this._notificationHandlers[t][e];void 0!==n&&n&&this._invokeHandler(n.handler,i),"series_deleted"!==i.method&&"study_deleted"!==i.method||delete this._notificationHandlers[t][e]}},JSServer.ChartApi.prototype.searchSymbols=function(t,e,i,n,o,r,s,a,l,c){0===t.length&&0===e.length&&0===i.length&&c([]),this._studyEngine.searchSymbols(t,e,i,c)},JSServer.ChartApi.prototype._notifySessions=function(t){var e,i;for(e in this._sessions){if(!this._sessions.hasOwnProperty(e))return;i=this._sessions[e],"function"==typeof i.onMessage&&i.onMessage(t)}},JSServer.ChartApi.prototype.unpack=function(t){throw Error("This method is not implemented")},JSServer.ChartApi.prototype.quoteCreateSession=function(t){return this._studyEngine.quoteCreateSession(t)},JSServer.ChartApi.prototype.quoteDeleteSession=function(t){return this._studyEngine.quoteDeleteSession(t)},JSServer.ChartApi.prototype.quoteSetFields=function(t,e){return this._studyEngine.quoteSetFields(t,e)},JSServer.ChartApi.prototype.quoteAddSymbols=function(t,e){return-1!==e.indexOf(void 0)&&(console.warn("Got undefined in quoteAddSymbols"),e=e.filter(function(t){return!!t})),this._studyEngine.quoteAddSymbols(t,e)},JSServer.ChartApi.prototype.quoteRemoveSymbols=function(t,e){return this._studyEngine.quoteRemoveSymbols(t,e)},JSServer.ChartApi.prototype.quoteFastSymbols=function(t,e){return this._studyEngine.quoteFastSymbols(t,e)},JSServer.ChartApi.prototype.quoteHibernateAll=function(t){return this._studyEngine.quoteHibernateAll(t)},JSServer.ChartApi.prototype.depthCreateSession=function(t){return this._studyEngine.depthCreateSession(t)},JSServer.ChartApi.prototype.depthDeleteSession=function(t){return this._studyEngine.depthDeleteSession(t)},
JSServer.ChartApi.prototype.depthSetSymbol=function(t,e){return this._studyEngine.depthSetSymbol(t,e)},JSServer.ChartApi.prototype.depthClearSymbol=function(t){},JSServer.ChartApi.prototype.depthSetScale=function(t,e){},JSServer.ChartApi.prototype.createStudiesAccessController=function(t,e,i){return new this.StudiesAccessController(this._studyEngine,t&&JSON.parse(t)||{type:"black",tools:[]})},JSServer.ChartApi.prototype.StudiesAccessController=function(t,e){this._studyEngine=t,this._studiesAccess=e},JSServer.ChartApi.prototype.StudiesAccessController.prototype._findTool=function(t){var e,i,n=null;for(e=0;e<this._studiesAccess.tools.length;++e)if(i=this._studiesAccess.tools[e],i.name===t||i===t){n=i;break}return n},JSServer.ChartApi.prototype.StudiesAccessController.prototype.getEnabledTools=function(){return this._studyEngine.studiesMetadata().filter(function(t){var e=this._findTool(t.description);return"black"===this._studiesAccess.type?!e||e.grayed:!!e},this)},JSServer.ChartApi.prototype.StudiesAccessController.prototype.isToolGrayed=function(t){var e=this._findTool(t);return e&&e.grayed},JSServer.ChartApi.prototype.serverTimeOffset=function(){return this._studyEngine.serverTimeOffset()},JSServer.ChartApi.prototype.alignTimePoint=function(t,e,i){return this._studyEngine.alignTimePoint(t,e,i)},JSServer.ChartApi.prototype.disconnectCount=function(){return 0},u(JSServer.ChartApi,"JSServer.ChartApi",c,"ChartApiInterface"),t.exports=JSServer.ChartApi},function(t,e,i){"use strict";var n,o;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"StudyError",function(){return o}),n=i(0),o=function(t){function e(e){var i=t.call(this,e)||this;return i.studyError=!0,i}return n.c(e,t),e}(Error)},function(t,e,i){"use strict";(function(e,n){function o(t){var e=t.findIndex(function(t){return t.index!==_});return 0===e?t:t.slice(e)}function r(t,i){var n=e.get_timezone(i.timezone),o=new S.Session;return o.init(n,i.session),g.Symbol.newBarBuilder(t,o,o)}function s(t){function e(t){console.warn("SymbolInfo validation: "+t)}var i,n;if((void 0===t.minmov||t.minmov<=0)&&e("minmov must be positive"),(void 0===t.pricescale||t.pricescale<=0)&&e("pricescale must be positive"),void 0!==t.name&&0!==t.name.length||e("name must be non-empty string"),void 0!==t.session&&0!==t.session.length||e("session must be non-empty string"),void 0===t.timezone||0===t.timezone.length?e("timezone must be non-empty string"):"exchange"!==t.timezone&&p(t.timezone)||"UTC"!==t.timezone&&e('unsupported timezone "{0}"'.format(t.timezone)),void 0!==t.intraday_multipliers)if(i=t.intraday_multipliers,Array.isArray(i))for(n=0;n<i.length;++n)"string"!=typeof i[n]&&e('intraday_multipliers[{0}] = "{1}" must be string (now: {2})'.format(n+1,i[n],typeof i[n]));else e("intraday_multipliers must be array");(t.supported_resolutions||[]).filter(function(t){return!w.isValid(t)}).forEach(function(t){e("supported_resolutions field contains invalid value: "+t)})}function a(t){var e,i;if(t.base_name||(t.base_name=[t.name]),t.legs||(t.legs=[t.name]),
t.exchange||(t.exchange=t["exchange-listed"]),t.full_name||(t.full_name=t.symbol||(t.exchange?t.exchange+":"+t.name:t.name)),t.pro_name||(t.pro_name=t.full_name),t.data_status||(t.data_status="streaming"),t.ticker||(t.ticker=t.symbol||t.name),!t.session&&t["session-regular"]&&(t.session=t["session-regular"]),!t.minmov&&t.minmovement&&(t.minmov=t.minmovement),t.supported_resolutions)for(e=0;e<t.supported_resolutions.length;e++)i=w.parse(t.supported_resolutions[e]),i.isValid()&&(t.supported_resolutions[e]=i.value())}function l(t,e){null!=t.graphicsCmds&&null!=t.graphicsCmds.create&&null!=t.graphicsCmds.create.vertlines&&t.graphicsCmds.create.vertlines.forEach(function(t){t.data.forEach(e)})}function c(t,e){var i,n,o=t.length,r=e.length,s=0;for(i=0;i<o;++i){for(n=t[i];s<r&&e[s].value[0]<n;)++s;s>=r?t[i]=e[r-1].index:t[i]=e[s].index}}function h(t,e){var i,n;null!==e&&0!==e.length&&(i={},T(t,function(t){C(t)&&Object.keys(t).forEach(function(e){e.endsWith("__t")&&(i[t[e]]=!0)})},{visitInstances:!0}),n=Object.keys(i).map(Number).sort(function(t,e){return t-e}),n.forEach(function(t,e){i[t]=e}),Object.assign(t,T(t,function(t){return C(t)&&Object.keys(t).forEach(function(e){e.endsWith("__t")&&(t[e.slice(0,-3)]=i[t[e]])}),t},{visitInstances:!0})),c(n,e),t.indexes=n)}function u(t,e){var i,n;null!==e&&0!==e.length&&(i={},l(t.data,function(t){i[t.time]=!0}),n=Object.keys(i).map(Number).sort(function(t,e){return t-e}),n.forEach(function(t,e){i[t]=e}),l(t.data,function(t){t.index=i[t.time]}),c(n,e),t.indexes=n)}var d,p,_,f,m=i(788),g=i(21),y=i(789),v=i(795),b=i(796),S=i(48),w=i(23).Interval,P=i(42),T=i(797).visitObject,C=i(12).isObject;i(216),i(356),d=i(798).DatafeedRequestsCachedProcessor,p=i(239).timezoneIsAvailable,_=-5e6,f=function(t){function e(t,e,i){return function(n){var o,a;n&&n.count()&&(o=r(e,t),a=1e3*s.getCurrentUTCTime(),o.moveTo(a),o.indexOfBar(a)>=0&&n.setLastBarClosed(!1)),i(n)}}function i(t,i,n,o,r){return s._cachedDatafeed.subscribe(t,i,n,e(t,i,o),r)}function n(t){return s._cachedDatafeed.unsubscribe(t)}function o(t,e,i){s.resolveSymbol(t,e,i)}var s=this;this._studiesCache={},this._sessionsLastDataCache={},this._metainfoCache=[],this._barsCoefficientsCache={},this._extrapolationManager=v,this._externalDatafeed=t,this._datafeedConfiguration=null,this._marketStatusWatchers={},this._resolveRequests={},this._callbacks={},this._serverTimeOffset=0,s._logMessage("Datafeed settings received: {0}".format(JSON.stringify(window.configurationData))),s._datafeedConfiguration=s._adoptConfigurationData(window.configurationData),s._fireEvent("configuration_received"),s._externalDatafeed.getServerTime&&s._externalDatafeed.getServerTime(function(t){s._serverTimeOffset=t-(new Date).valueOf()/1e3}),this._pointsetsManager=b,this._rangeExtensionData={},this._quotesInfo=[],this._depthInfo=[],this._fullNameSymbolInfoMap={},this._endOfData={},this._computeStudyCounter=0,this._cachedDatafeed=new d(t,f.createDWMAligner),this._extendedRange=function(t){return s._rangeExtensionData[t]&&s._rangeExtensionData[t].summary},
this._extendedTime=function(t){return s._rangeExtensionData[t]&&s._rangeExtensionData[t].time},y.setupFeed({resolve:o,subscribe:i,unsubscribe:n,calculateHistoryDepth:this._externalDatafeed.calculateHistoryDepth?this._externalDatafeed.calculateHistoryDepth.bind(this._externalDatafeed):void 0})},f.createDWMAligner=function(t,i,o){var r,s,a;return n.enabled("disable_resolution_rebuild")||!w.isDWM(t)?null:(r=new S.Session,r.init("Etc/UTC","0000-0000:1234567"),s=e.get_timezone(i),a=new S.Session,a.init(s,o),g.Symbol.newBarBuilder(t,a,r))},f.prototype._barsCoefficients=function(t,e){if(0!==t.indexOf("="))return{};var i=t+e;return this._barsCoefficientsCache[i]||(this._barsCoefficientsCache[i]={}),this._barsCoefficientsCache[i]},f.prototype.destroy=function(){this._cachedDatafeed.destroy(),this._externalDatafeed=null},f.prototype.purgeCache=function(){this._endOfData={},this._resolveRequests={}},f.prototype.purgeDataCache=function(){this._cachedDatafeed.purgeCache()},f.prototype._logMessage=function(t){n.enabled("charting_library_debug_mode")&&console.log(t)},f.prototype._extendRange=function(t,e){this._rangeExtensionData[t]||(this._rangeExtensionData[t]={}),void 0===this._rangeExtensionData[t].summary&&(this._rangeExtensionData[t].summary=0),this._rangeExtensionData[t].summary+=e},f.prototype.on=function(t,e){return this._callbacks.hasOwnProperty(t)||(this._callbacks[t]=[]),this._callbacks[t].push(e),this},f.prototype._fireEvent=function(t,e,i){var n,o;if(this._callbacks.hasOwnProperty(t)){for(n=this._callbacks[t],o=0;o<n.length;++o)n[o](e);i||(this._callbacks[t]=[])}},f.prototype._adoptConfigurationData=function(t){var e,i,n,o=TradingView.merge({},t),r=o.supported_resolutions;if(!r||0===r.length)return o.supported_resolutions=void 0,o;for(e=[],i=0;i<r.length;i++){if(n=r[i],-1!==e.indexOf(n))throw Error("Duplicating resolution `"+n+"`");e.push(n)}return o.supported_resolutions=e,o},f.prototype.supportedResolutions=function(){return this._datafeedConfiguration.supported_resolutions},f.prototype.supportedSymbolsTypes=function(){return this._datafeedConfiguration.symbols_types||[]},f.prototype.supportedExchangesList=function(){return this._datafeedConfiguration.exchanges||[]},f.prototype.futuresRegex=function(){return this._datafeedConfiguration.futures_regex||/$a/},f.prototype._findStudyObject=function(t){var e=t.split("@")[0],i=JSServer.studyLibrary.filter(function(i){return i.metainfo.id===t||i.metainfo.shortDescription===e});if(0===i.length)throw Error("Study `"+t+"` not found");return i[0]},f.prototype.getMarks=function(t,e,i,n,o){var r,s={red:6,green:5,blue:4,yellow:3};this._externalDatafeed.getMarks&&this._datafeedConfiguration.supports_marks&&(this._logMessage("Requesting bars marks: symbol {0}, resolution {1}, range [{2} ... {3}]".format(t.full_name,o,new Date(1e3*e).toUTCString(),new Date(1e3*i).toUTCString())),r=this,this._externalDatafeed.getMarks(t,e,i,function(e){var i,a,l=e.map(function(t){return t.time=parseInt(t.time),t})
;r._logMessage("Received bars marks: symbol {0}, resolution {1}, marks {2}".format(t.full_name,o,JSON.stringify(l))),i=f.createDWMAligner(o,t.timezone,t.session),a=l.map(function(t){return t.tickmark=null!==i?i.tradingDayToSessionStart(1e3*t.time)/1e3:t.time,t.direction=s[t.color],t.onClicked=function(){P.emit("onMarkClick",t.id)},t.label=!!t.label&&t.label[0],t}),n(a)},o))},f.prototype.getTimescaleMarks=function(t,e,i,n,o){if(this._externalDatafeed.getTimescaleMarks&&this._datafeedConfiguration.supports_timescale_marks){this._logMessage("Requesting timescale marks: symbol {0}, resolution {1}, range [{2} ... {3}]".format(t.full_name,o,new Date(1e3*e).toUTCString(),new Date(1e3*i).toUTCString()));var r=this;this._externalDatafeed.getTimescaleMarks(t,e,i,function(e){var i,s;r._logMessage("Received timescale marks: symbol {0}, resolution {1}, marks {2}".format(t.full_name,o,JSON.stringify(e))),i=f.createDWMAligner(o,t.timezone,t.session),s=e.map(function(t){return t.tickmark=null!==i?i.tradingDayToSessionStart(1e3*t.time)/1e3:t.time,t}),n(s)},o)}},f.prototype._computeStudy=function(t,e,i,n,o,r,s,a,l,c,h){function u(t){var e,i;return t<s()?_:0===(e=m.length)?0:(i=m[e-1].index,i===_?0:i+1)}function d(t,e,i){var n,o,r,s,a=t.time,c="number"==typeof e?[e]:e;for(n=0;n<c.length;++n)o=c[n],o&&"object"==typeof o&&(y["plot_"+n]=o.offset,o=o.value,v++),"number"==typeof o&&isNaN(o)&&(o=void 0),c[n]=o;r=m.length-1,s=r<0||a>m[r].value[0],s?m.push({index:u(a),value:[a].concat(c)}):m[r].value=[a].concat(c),p||l([m[m.length-1]],s,m.length,y,i)}var p=!0,f=this._computeStudyCounter++,m=[],y={},v=0,b=!1,S=!1,w=this,P=function(s){var l;if(g.Symbol.parsePeriod(n).isIntraday&&!s.has_intraday)return void c("Unsupported resolution. Did you forget to set has_intraday to true?");try{if(l=new g.StudyEngine({tickerid:i,symbolInfo:s,period:n,body:e,sessionId:t,onErrorCallback:c,rangeExtension:{getRangeExtensionCount:w._extendedRange.bind(this,t),getRangeExtensionTime:w._extendedTime.bind(this,t)},input:function(t){return r[t]},out:function(t,e){d(t,e,s)},nonseriesOut:function(t,e){S=!0,h(e,s)},setNoMoreData:function(){b=!0},recalc:function(t,i){p=!1,m.endOfData=b,S&&!(m.length>0)||e.error&&null!==e.error()||a(m,v>0?y:void 0,s,i)}}),!w._studiesCache[t]||!w._studiesCache[t][o])throw Error("This should never happen");w._studiesCache[t][o].engine=l}catch(t){if(!t.studyError)throw t;c(t.message)}},T=function(t){c(t)},C=function(){return w._studiesCache[t]&&w._studiesCache[t][o]&&w._studiesCache[t][o].activeResolve===f};w._studiesCache[t][o].activeResolve=f,this.resolveSymbol(i,function(){C()&&P.apply(w,arguments)},function(){C()&&T.apply(w,arguments)})},f.prototype._createStudy=function(t,e,i,n,r,s,a){function l(t){var e,i,o;if(Array.isArray(t))return t;for(e=[],i=p._studiesCache[n][r].metainfo.inputs,o=0;o<i.length;o++)e[o]=t[i[o].id];return e}function c(i,a,l){i=o(i),TradingView.ChartapiMessagerInstances[n].onDataUpdate(r,s,p._convertBarsTimeToUnix(i),a,l,p._extendedRange(t,e)),TradingView.ChartapiMessagerInstances[n].onStudyCompleted(r,s)}var d,p=this
;a=l(a),TradingView.ChartapiMessagerInstances[n].onStudyLoading(r,s),d=null,p._computeStudy(n,i,t,e,r,a,function(){if(null===d){var t=p._sessionsLastDataCache[n][0];if(void 0===t)return 1/0;d=t.value[0]}return d},function(t,e,i){c(t,e?{data:{offsets:e}}:null,i)},function(i,a,l,c,h){i=o(i);var u=c?{data:{offsets:c}}:null;TradingView.ChartapiMessagerInstances[n].onDataUpdate(r,s,p._convertBarsTimeToUnix(i),u,h,p._extendedRange(t,e))},function(t){TradingView.ChartapiMessagerInstances[n].onStudyError(r,s,t)},function(t,e){var i;switch(t.type){case"projection":this._updateProjectionData(n,r,s,t);break;case"study_graphics":i={data:t.data,indexes:[]},u(i,p._sessionsLastDataCache[n]),c([],i,e);break;case"non_series_data":i={data:t.data,indexes:[]},h(i,p._sessionsLastDataCache[n]),c([],i,e);break;default:console.warn("unsupported non-series data type for study "+t.type)}}.bind(this))},f.prototype.stopSources=function(t){var e,i;for(e in this._studiesCache[t])(i=this._studiesCache[t][e])&&(i.engine&&i.engine.stop(),i.activeResolve=-1);y.unsubscribeUnused()},f.prototype.recreateSources=function(t,e,i,n){var o,r;this.stopSources(i);for(o in this._studiesCache[i])(r=this._studiesCache[i][o])&&(r.symbol=t,r.resolution=e,"series"===r.type&&this.createSeries(t,e,i,o,r.turnaround,n));for(o in this._studiesCache[i])(r=this._studiesCache[i][o])&&"study"===r.type&&this._createStudy(t,e,r.studyObject,i,o,r.turnaround,r.inputs)},f.prototype.removeStudy=function(t,e){this._studiesCache[t]&&this._studiesCache[t][e]&&this._studiesCache[t][e].engine&&(this._studiesCache[t][e].engine.stop(),y.unsubscribeUnused()),this._studiesCache[t][e]=null},f.prototype.removeSeries=function(t,e){this.removeStudy(t,e)},f.prototype.recomputeStudy=function(t,e,i,n){var o=this._studiesCache[i][t];if(!o)throw Error("This should never happen");o.inputs=e,o.turnaround=n,o.engine&&o.engine.stop(),this._createStudy(o.symbol,o.resolution,o.studyObject,i,t,n,e)},f.prototype._convertBarsTimeToUnix=function(t){var e,i,n=[];for(e=0;e<t.length;++e)i={index:t[e].index,value:[].concat(t[e].value)},i.value[0]/=1e3,n.push(i);return n.endOfData=t.endOfData,n},f.prototype.createStudy=function(t,e,i,n,o,r,s){var a=this._findStudyObject(r),l=new a.constructor;this._studiesCache[i]=this._studiesCache[i]||{},this._studiesCache[i][n]={studyObject:l,symbol:t,resolution:e,guid:n,type:"study",inputs:s,metainfo:a.metainfo,turnaround:o},this._createStudy(t,e,l,i,n,o,s)},f.prototype.purgeRangeExtensionData=function(t){t?this._rangeExtensionData[t]={summary:0}:this._rangeExtensionData={}},f.prototype.ensureExtendedTo=function(t,e,i){var n,o=this._studiesCache[e][t];if(!o)throw Error("This should never happen");this.purgeRangeExtensionData(e),this._rangeExtensionData[e]||(this._rangeExtensionData[e]={}),this._rangeExtensionData[e].time=i,n=this,setTimeout(function(){n.recreateSources(o.symbol,o.resolution,e,!0)},0)},f.prototype.extendSeriesRange=function(t,e,i){var n,o,r,s,a=this._studiesCache[e][t];if(!a)throw Error("This should never happen")
;if(this._isEndOfData(e,t,a.turnaround))return n=a.engine.runner.host.symbolInfo.data_status,void setTimeout(function(){TradingView.ChartapiMessagerInstances[e].onSeriesCompleted(t,a.turnaround,n)},0);i+=10,o=this._barsCoefficients(a.symbol,a.resolution),r=o.barsCoefficient||1,this._extendRange(e,i*r),o.barsCoefficient||(o.expectedBarsCount=this._extendedRange(e)),s=this,setTimeout(function(){s.recreateSources(a.symbol,a.resolution,e,!0)},0)},f.prototype._updateProjectionData=function(t,e,i,n){var o=n.barsetSize?this._convertBarsTimeToUnix([{index:n.barsetSize-1,exTime:n.lastBar?n.lastBar[0]/1e3:0,value:n.lastBar}]):null;TradingView.ChartapiMessagerInstances[t].onProjectionUpdate(e,i,n,o)},f.prototype.updateSeriesTurnaround=function(t,e,i){this._studiesCache[t]||(this._studiesCache[t]={}),this._studiesCache[t][e]||(this._studiesCache[t][e]={}),this._studiesCache[t][e].type="series",this._studiesCache[t][e].turnaround=i},f.prototype.seriesTurnaround=function(t,e){return this._studiesCache[t]&&this._studiesCache[t][e]&&this._studiesCache[t][e].turnaround},f.prototype.createSeries=function(t,e,i,o,r,s){function a(t,n,o){l._extrapolationManager.storage(i,t.full_name,e).setLastBarTime(n,o)}var l,c=t,h=new g.OHLCV;this._studiesCache[i]=this._studiesCache[i]||{},this._sessionsLastDataCache[i]=null,this._studiesCache[i][o]={symbol:t,resolution:e,studyObject:h,guid:o,type:"series",turnaround:r},TradingView.ChartapiMessagerInstances[i].onSeriesLoading(o,r),l=this,this._computeStudy(i,h,c,e,o,[],function(){return-1/0},function(n,c,h,u){var d,p,_,f,m,g;if(!l._studiesCache[i][o])throw Error("This should never happen");if(l._sessionsLastDataCache[i]=n,d=l._convertBarsTimeToUnix(n),p=d.length>0?1e3*d[0].value[0]:void 0,u.nextTime&&(!p||u.nextTime<p/1e3))return void l.ensureExtendedTo(o,i,u.nextTime);0!==d.length&&(_=l._barsCoefficients(t,e),_.expectedBarsCount&&_.barsCount&&(_.barsCoefficient=Math.min(Math.max(_.barsCoefficient||1,parseInt(_.expectedBarsCount/(d.length-_.barsCount)+.5)),100)),_.barsCount=d.length,f=d[d.length-1],a(h,d.length-1,1e3*f.value[0]),l.rebuildExtrapolatedData(i,t.name,e,h,1e3*f.value[0]),s&&TradingView.ChartapiMessagerInstances[i].onSeriesClearData(o,r),TradingView.ChartapiMessagerInstances[i].onTimescaleUpdate(o,r,d,h,0),m=l._extrapolationManager.storage(i,h.full_name,e),Promise.resolve().then(function(){l._pointsetsManager.broadcastPointsetsUpdates(h.full_name,e,n,m,h,function(t,e){TradingView.ChartapiMessagerInstances[i].onPointsetDataUpdate(t,r,e,h)})})),g=0===d.length||u&&u.endOfData,g&&(l._logMessage("Series has no more data on server: {0}".format(h.full_name)),l._setEndOfData(i,o,r),0===d.length&&TradingView.ChartapiMessagerInstances[i].onSeriesClearData(o,r)),TradingView.ChartapiMessagerInstances[i].onSeriesCompleted(o,r,h.data_status)},function(t,n,s,c,h){var u,d=l._convertBarsTimeToUnix(t),p=d[d.length-1];if(n){if(!l._studiesCache[i][o])throw Error("This should never happen");u=s-1,l._logMessage("New bar arrived: symbol {0}, bar {1}".format(h.full_name,JSON.stringify(p))),
TradingView.ChartapiMessagerInstances[i].onTimescaleUpdate(o,r,[p],h,u),a(h,u,1e3*p.value[0]),l.rebuildExtrapolatedData(i,h.full_name,e,h,1e3*p.value[0])}else l._logMessage("Last bar update: symbol {0}, bar {1}".format(h.full_name,JSON.stringify(p))),TradingView.ChartapiMessagerInstances[i].onDataUpdate(o,r,d,null,h);l._fireEvent("realtime_tick",t[t.length-1],!0)},function(t){l._logMessage("Series error: {0}".format(t)),TradingView.ChartapiMessagerInstances[i].onSeriesError(o,t),n.enabled("clear_bars_on_series_error")&&TradingView.ChartapiMessagerInstances[i].onSeriesClearData(o,r)},function(t,n){var s,c,h,u,d,p,_,f;if("projection"!==t.type)throw Error("unexpected non-series data type for series "+t.type);if(s=t.projectionTime/1e3,c=-1,(t.data||[]).forEach(function(t){c=Math.max(c,t[0]||0)}),c=Math.min(c,100),h=t.barsetSize,s&&c>=0&&h&&t.lastBar){for(u=[],d=0;d<=c;d++)u.push(s+.001*d);p=t.lastBar.slice(0),p[0]=p[0]/1e3,TradingView.ChartapiMessagerInstances[i].onTimescaleUpdate(o,r,[{index:h-1,value:p}],n,h-1,u),_=h+c,f=1e3*Math.trunc(u[c]),a(n,_,f),l.rebuildExtrapolatedData(i,n.full_name,e,n,f)}l._updateProjectionData(i,o,r,t)})},f.prototype.onMoreTickmarksRequested=function(t,e,i,n,o){this._extrapolationManager.storage(t,i.full_name,n).onTickmarksNeeded(i,o)},f.prototype.removePointset=function(t){this._pointsetsManager.removePointset(t)},f.prototype.rebuildExtrapolatedData=function(t,e,i,n,o){this._extrapolationManager.storage(t,n.full_name,i).rebuild(o,n)},f.prototype.createPointset=function(t,e,i,n,o,r){var s=this._extrapolationManager.storage(t,n.full_name,o);this._pointsetsManager.createPointset(e,i,o,r,s,n)},f.prototype.studiesMetadata=function(){return 0===this._metainfoCache.length&&(this._metainfoCache=JSServer.studyLibrary.map(function(t){return t.metainfo}),this._metainfoCache.push({palettes:{},inputs:[{defval:"close",id:"source",name:"Source",options:["open","high","low","close","hl2","hlc3","ohlc4"],type:"text"},{defval:"ATR",id:"style",name:"Style",options:["ATR","Traditional"],type:"text"},{defval:5,id:"boxSize",max:1.7976931348623157e308,min:1e-4,name:"BoxSize",type:"float",visible:"style==Traditional"},{defval:14,id:"atrLength",max:100,min:1,name:"AtrLength",type:"integer",visible:"style==ATR"}],plots:[{id:"open",type:"line"},{id:"high",type:"line"},{id:"low",type:"line"},{id:"close",type:"line"},{id:"volume",type:"line"}],graphics:{},defaults:{inputs:{atrLength:14,boxSize:5,source:"close",style:"ATR"},precision:"4"},_metainfoVersion:28,description:"Unnamed Study",id:"BarSetRenko@tv-prostudies",is_hidden_study:!0,is_price_study:!1,shortDescription:"Unnamed Study",description_localized:"Unnamed Study",shortId:"BarSetRenko",packageId:"tv-prostudies",version:"13",fullId:"BarSetRenko@tv-prostudies-13",productId:"tv-prostudies",name:"BarSetRenko@tv-prostudies"}),this._metainfoCache.push({palettes:{},inputs:[{defval:"close",id:"source",name:"Source",options:["open","high","low","close","hl2","hlc3","ohlc4"],type:"text"},{defval:3,id:"lb",max:100,min:1,name:"Lb",type:"integer"}],plots:[{id:"open",
type:"line"},{id:"high",type:"line"},{id:"low",type:"line"},{id:"close",type:"line"},{id:"volume",type:"line"}],graphics:{},defaults:{inputs:{lb:3,source:"close"},precision:"4"},_metainfoVersion:28,description:"Unnamed Study",id:"BarSetPriceBreak@tv-prostudies",is_hidden_study:!0,is_price_study:!1,shortDescription:"Unnamed Study",description_localized:"Unnamed Study",shortId:"BarSetPriceBreak",packageId:"tv-prostudies",version:"13",fullId:"BarSetPriceBreak@tv-prostudies-13",productId:"tv-prostudies",name:"BarSetPriceBreak@tv-prostudies"}),this._metainfoCache.push({palettes:{},inputs:[{defval:"open",id:"source",name:"Source",options:["open","high","low","close","hl2","hlc3","ohlc4"],type:"text"},{defval:"Traditional",id:"style",name:"Style",options:["ATR","Traditional"],type:"text"},{defval:14,id:"atrLength",max:100,min:1,name:"AtrLength",type:"integer",visible:"style==ATR"},{defval:1,id:"reversalAmount",max:1.7976931348623157e308,min:1e-4,name:"ReversalAmount",type:"float",visible:"style==Traditional"}],plots:[{id:"open",type:"line"},{id:"high",type:"line"},{id:"low",type:"line"},{id:"close",type:"line"},{id:"volume",type:"line"},{id:"change_price",type:"line"}],graphics:{},defaults:{inputs:{atrLength:14,reversalAmount:1,source:"open",style:"Traditional"},precision:"4"},_metainfoVersion:28,description:"Unnamed Study",id:"BarSetKagi@tv-prostudies",is_hidden_study:!0,is_price_study:!1,shortDescription:"Unnamed Study",description_localized:"Unnamed Study",shortId:"BarSetKagi",packageId:"tv-prostudies",version:"13",fullId:"BarSetKagi@tv-prostudies-13",productId:"tv-prostudies",name:"BarSetKagi@tv-prostudies"}),this._metainfoCache.push({palettes:{},inputs:[{defval:"HL",id:"sources",name:"Sources",options:["HL","Open","High","Low","Close"],type:"text"},{defval:"ATR",id:"style",name:"Style",options:["ATR","Traditional"],type:"text"},{defval:1,id:"boxSize",max:1.7976931348623157e308,min:1e-4,name:"BoxSize",type:"float",visible:"style==Traditional"},{defval:14,id:"atrLength",max:100,min:1,name:"AtrLength",type:"integer",visible:"style==ATR"},{defval:3,id:"reversalAmount",max:100,min:1,name:"ReversalAmount",type:"integer"}],plots:[{id:"open",type:"line"},{id:"high",type:"line"},{id:"low",type:"line"},{id:"close",type:"line"},{id:"volume",type:"line"},{id:"factor",type:"line"}],graphics:{},defaults:{inputs:{atrLength:14,boxSize:1,reversalAmount:3,sources:"HL",style:"ATR"},precision:"4"},_metainfoVersion:28,description:"Unnamed Study",id:"BarSetPnF@tv-prostudies",is_hidden_study:!0,is_price_study:!1,shortDescription:"Unnamed Study",description_localized:"Unnamed Study",shortId:"BarSetPnF",packageId:"tv-prostudies",version:"13",fullId:"BarSetPnF@tv-prostudies-13",productId:"tv-prostudies",name:"BarSetPnF@tv-prostudies"})),this._metainfoCache},f.prototype.searchSymbols=function(t,e,i,n){function o(t){r._logMessage("Symbol search response: {0}".format(JSON.stringify(t))),n(t)}this._logMessage("Symbol search requested: search string `{0}`, exchange: `{1}`, type `{2}`".format(t,e,i));var r=this
;this._externalDatafeed.searchSymbols(t,e,i,o)},f.prototype.resolveSymbol=function(t,e,i){var n,o=y.parseSymbol(t).symbol;this._resolveRequests[o]?n=this._resolveRequests[o]:(n=this.resolveSymbolInternal(o),this._resolveRequests[o]=n),n.done(e).fail(i)},f.prototype.resolveSymbolInternal=function(t){var e,i=this,n=$.Deferred();return this._logMessage("Symbol resolve requested: `{0}` ".format(t)),e=!0,this._externalDatafeed.resolveSymbol(t,function(o){e&&console.warn("`resolveSymbol` should return result asynchronously. Use `setTimeout` with 0 interval to execute the callback function."),i._logMessage("Symbol resolved: `{0}`, SymbolInfo in server response {1}".format(t,JSON.stringify(o))),a(o),s(o),i._logMessage("Symbol info after post-processing: `{0}`, SymbolInfo {1}".format(t,JSON.stringify(o))),i._fullNameSymbolInfoMap[o.full_name]=o,n.resolve(o)},function(e){i._logMessage("Symbol resolve failed: `{0}`, reason: `{1}`".format(t,e)),n.reject(e)}),e=!1,n.promise()},f.prototype._createMarketStatusWatchers=function(t,e){void 0===this._marketStatusWatchers[t]&&(this._marketStatusWatchers[t]={});var i=this;e.forEach(function(e){void 0===i._marketStatusWatchers[t][e]&&(i._marketStatusWatchers[t][e]=new m(i,t,e))})},f.prototype._removeMarketStatusWatchers=function(t){var e=this;Object.keys(this._marketStatusWatchers[t]||{}).forEach(function(i){e._marketStatusWatchers[t][i].stop()}),this._marketStatusWatchers[t]={}},f.prototype._stopQuotesSubscription=function(t){this._quotesInfo[t].listenerGUID&&(this._externalDatafeed.unsubscribeQuotes(this._quotesInfo[t].listenerGUID),this._quotesInfo[t].listenerGUID=void 0),this._removeMarketStatusWatchers(t)},f.prototype._startQuotesSubscription=function(t){function e(e,i){var n=r._marketStatusWatchers[t][e.n];e.symbolname=e.n,e.status=e.s,e.values=e.v,e.values.change=e.v.ch,e.values.last_price=e.v.lp,e.values.change_percent=e.v.chp,e.values.current_session=e.v.cs||n&&n.marketStatus(),e.values.pricescale=i.pricescale,e.values.minmov=i.minmov,e.values.minmove2=i.minmove2||0,e.values.fractional=i.fractional||!1,n&&e.v.cs&&n.stop(),TradingView.ChartapiMessagerInstances[t].onQuotesData([t].concat([e]))}function i(t){t.forEach(function(t){void 0!==o[t.n]?null!==o[t.n]&&e(t,o[t.n]):r.resolveSymbol(t.n,function(i){o[t.n]=i,e(t,i)},function(){o[t.n]=null})})}var o={},r=this,s=this._quotesInfo[t].symbols;0!==s.length&&(this._externalDatafeed.getQuotes&&!n.enabled("charting_library")?this._externalDatafeed.getQuotes(s,function(e){r._quotesInfo[t]&&(i(e),r._quotesInfo[t].listenerGUID=t,r._externalDatafeed.subscribeQuotes(s,r._quotesInfo[t].fastSymbols,i,r._quotesInfo[t].listenerGUID))},function(t){}):!this._externalDatafeed.getQuotes&&n.enabled("trading_terminal")&&setTimeout(function(){i(s.map(function(t){return{n:t,s:"ok",v:{}}}))}),this._createMarketStatusWatchers(t,s))},f.prototype._restartQuotesSubscription=function(t){this._stopQuotesSubscription(t),this._startQuotesSubscription(t)},f.prototype.quoteCreateSession=function(t){this._quotesInfo[t]={symbols:[],fastSymbols:[],listenerGUID:void 0}
},f.prototype.quoteDeleteSession=function(t){this._stopQuotesSubscription(t),this._quotesInfo[t]=null},f.prototype.quoteSetFields=function(t,e){},f.prototype.quoteAddSymbols=function(t,e){this._quotesInfo[t].symbols=this._filteredSymbols(this._quotesInfo[t].symbols.concat(e)),this._restartQuotesSubscription(t)},f.prototype.quoteRemoveSymbols=function(t,e){this._quotesInfo[t].symbols=this._quotesInfo[t].symbols.filter(function(t){return e.indexOf(t)<0}),this._restartQuotesSubscription(t)},f.prototype.quoteFastSymbols=function(t,e){this._quotesInfo[t].fastSymbols=this._filteredSymbols(e),this._restartQuotesSubscription(t)},f.prototype.quoteHibernateAll=function(t){},f.prototype._stopDepthSubscription=function(t){this._depthInfo[t].listenerGUID&&(this._externalDatafeed.unsubscribeDepth(this._depthInfo[t].listenerGUID),this._depthInfo[t].listenerGUID=void 0)},f.prototype._startDepthSubscription=function(t){function e(t){return t.map(function(t){return{p:t.price,v:t.volume}})}function i(t){var i={};return i.s=r,i.bids=e(t.bids),i.asks=e(t.asks),i}function n(e){e.snapshot?TradingView.ChartapiMessagerInstances[t].onDepthData([t].concat([i(e)])):TradingView.ChartapiMessagerInstances[t].onDepthUpdate([t].concat([i(e)]))}var o=this,r=this._depthInfo[t].symbol;r&&this._fullNameSymbolInfoMap[r]&&this._externalDatafeed.subscribeDepth&&(o._depthInfo[t].listenerGUID=this._externalDatafeed.subscribeDepth(r,function(e){o._depthInfo[t]&&n(e)}))},f.prototype._restartDepthSubscription=function(t){this._stopDepthSubscription(t),this._startDepthSubscription(t)},f.prototype.depthCreateSession=function(t){this._depthInfo[t]={symbol:null,listenerGUID:void 0}},f.prototype.depthDeleteSession=function(t){this._depthInfo[t].symbol=null,this._stopDepthSubscription(t),delete this._depthInfo[t]},f.prototype.depthSetSymbol=function(t,e){this._depthInfo[t].symbol=e,this._restartDepthSubscription(t)},f.prototype._filteredSymbols=function(t){var e=[];return t.forEach(function(t){t instanceof Object||e.indexOf(t)<0&&e.push(t)}),e},f.prototype._isEndOfData=function(t,e,i){var n=t+"!"+e+"@"+i;return!!this._endOfData[n]},f.prototype._setEndOfData=function(t,e,i){var n=t+"!"+e+"@"+i;this._endOfData[n]=!0},f.prototype.alignTimePoint=function(t,e,i){return n.enabled("disable_resolution_rebuild")?t:r(e,i).alignTimeIfPossible(1e3*t)/1e3},f.prototype.serverTimeOffset=function(){return this._serverTimeOffset},f.prototype.getCurrentUTCTime=function(){return(new Date).valueOf()/1e3+this._serverTimeOffset},t.exports=f}).call(e,i(33),i(4))},function(t,e,i){"use strict";(function(e){var n=i(48),o={},r=function(t,i,r){function s(){var t={};t.symbolname=_,t.status="ok",t.values={},t.values.current_session=d,o[_]=d,TradingView.ChartapiMessagerInstances[f].onQuotesData([f].concat([t]))}function a(t,i,o){var r=e.get_timezone(i);c=(new n.Session).init(r,t),h=o,m=setTimeout(l,6e4),l(),s()}function l(){var t,e;if(c){if(h)return void(d="out_of_session");t=n.isTradingNow(new Date,c),e=t?"market":"out_of_session",e!==d&&(d=e,s())}}
var c,h,u={},d=o[r]||"out_of_session",p=!1,_=r,f=i,m=null;return t.resolveSymbol(r,function(t){p||a(t.session,t.timezone,t.expired)},function(){}),u.stop=function(){p=!0,m&&clearTimeout(m)},u.marketStatus=function(){return d},u};t.exports=r}).call(e,i(33))},function(t,e,i){"use strict";(function(e){var n=i(790).HeikenAshi,o=i(23).Interval,r=i(791).Kagi,s=i(792).Renko,a=i(793).LineBreak,l=i(794).PointAndFigure,c=function(){function t(t){this.host=t,this.cache={}}function c(t){var e=t.indexOf(",");return-1===e?t:t.slice(0,e)}function h(t,e,i,n,o,r,s){return o+t+e+i+(u(n)?"_":"")+r+"_"+s}function u(t){return t.has_empty_bars||t.force_session_rebuild}function d(t){if(0!==t.indexOf("="))return{symbol:t};var e;try{e=JSON.parse(t.slice(1))}catch(e){return{symbol:t}}return e.type&&(0===e.type.indexOf("BarSetHeikenAshi@tv-basicstudies-")?e.builder=new n:0===e.type.indexOf("BarSetRenko@tv-prostudies-")?e.builder=new s(e.inputs):0===e.type.indexOf("BarSetPriceBreak@tv-prostudies-")?e.builder=new a(e.inputs):0===e.type.indexOf("BarSetKagi@tv-prostudies-")?e.builder=new r(e.inputs):0===e.type.indexOf("BarSetPnF@tv-prostudies-")?e.builder=new l(e.inputs):console.error("unknown builder type: "+e.type)),"string"!=typeof e.symbol&&(e.session=e.symbol.session||e.session,e.symbol=e.symbol.symbol),e}function p(e){t.instance=new t(e),g.setupFeed(t.instance)}var _,f,m,g=i(21),y=i(48),v=g.Symbol,b=g.StudyEngine,S=g.BarBuilder,w=g.BarSet;return t.prototype.getCache=function(t){return this.cache[t]},t.prototype.putCache=function(t,e){this.cache[t]=e},t.prototype.subscribe=function(t,e,i,n,o,r,s,a,l,c){var u=h(t,e,i,s,a,n,c),d=this.getCache(u);return d||(d=this.createItem(t,e,i,s,l,a,n,c),this.putCache(u,d)),d.listeners.addListener(o,r),{key:u,listener:o}},t.prototype.unsubscribe=function(t){var e=this.getCache(t.key);e&&e.listeners.removeListener(t.listener)},t.prototype.removeUnused=function(){var t,e,i,n,o,r=[];for(t in this.cache)this.cache[t]&&(e=this.cache[t],0===e.listeners.listenersCount()&&r.push(t));if(0!==r.length){for(i=0;i<r.length;i++)n=r[i],o=this.cache[n],this.cache[n]=null,o.stop();this.removeUnused()}},t.prototype.rebuildFrom=function(t,e,i){var n,o,r,s,a=v.parsePeriod(t),l=v.parsePeriod(e);if(""!==a.resolution&&!a.isSeconds){if(i.has_weekly_and_monthly)return a.resolution;if(void 0===i.has_daily||i.has_daily)return"D";""!==l.resolution&&(l.resolution="",l.interval=i.intraday_multipliers?i.intraday_multipliers[0]:1)}if(a.isIntraday&&void 0!==i.has_intraday&&!i.has_intraday)return"";if(a.isSeconds&&!i.has_seconds)return"";if(n=""!==a.resolution?l.interval:""===l.resolution?Math.min(a.interval,l.interval):a.interval,(o=a.isIntraday?i.intraday_multipliers:i.seconds_multipliers)&&-1===o.indexOf(n)){for(r=o.length-1;r>=0;r--)if(s=+o[r],n%s==0)return s+(a.isSeconds?"S":"");return""}return n+(a.isSeconds?"S":"")},t.prototype.createItem=function(t,e,i,n,r,s,a,l){var h,p,g,y,v,b,w,P=new m,T=d(t);return T.builder?new f(P,T.symbol,e,i,T.builder,n,r,s):(h=c(e),p=this.rebuildFrom(h,c(i),n),g=u(n),!o.isEqual(h,p)||g?(y=n.has_empty_bars,
v=$.extend({},n),g&&(v.has_empty_bars=!1,v.force_session_rebuild=!1),void 0!==l&&(b=o.parse(h).inMilliseconds()/o.parse(p).inMilliseconds(),l*=Math.ceil(b)),new f(P,T.symbol,e,p,new S(e,y),v,r,s,a,l)):(w=T.session&&"extended"!==T.session,new _(P,T.symbol,e,i,w,this.host,n,r,a,l)))},_=function(t,e,i,n,o,r,s,a,l,h){this.listeners=t,this.host=r;var u=this;this.host.resolve(e,function(t){o&&t.regular_session&&(t.session=t.regular_session);var r=u.calculateFromTo(t,l||n||i,e,a,h);u.subs=u.host.subscribe(t,c(i),r,function(t){u.listeners.fire(t)},function(t){u.listeners.onError(t)})},function(t){u.listeners.onError(t)})},_.prototype._createDWMAligner=function(t,i){var n=e.get_timezone(i.timezone),o=new y.Session;return o.init(n,i.session),v.newBarBuilder(t,o,o)},_.prototype.stop=function(){this.subs&&this.host.unsubscribe(this.subs)},_.prototype.calculateFromTo=function(t,i,n,o,r){var s,a,l,c,h,u,d,p,_=v.parsePeriod(i),f=(new Date).valueOf(),m=t.expired?e.cal_to_utc(e.get_timezone(t.timezone),new Date(1e3*t.expiration_date))||f:f;return""===_.resolution?(a=_.interval,l="D"):"S"===_.resolution?(a=10*_.interval,l=""):(c="D"===_.resolution?1:"W"===_.resolution?5:30,a=12*c*_.interval,l="M"),_.range?(a=_.range.interval,l=_.range.resolution):this.host.calculateHistoryDepth&&(h=this.host.calculateHistoryDepth(i,l,a))&&(a=h.intervalBack||a,l=void 0===h.resolutionBack?l:h.resolutionBack),u=t.sessionString||t.session,s=y.alignPeriodsBack(u,l,a,1,m),o&&o.getRangeExtensionTime&&(d=o.getRangeExtensionTime())&&(s=Math.min(1e3*d,s)),p=Math.ceil(1.5*r),o&&o.getRangeExtensionCount&&(p+=o.getRangeExtensionCount()),p>0&&(s=y.alignPeriodsBack(u,_.resolution,_.interval,p,s)),{from:s,to:m+6e4}},f=function(t,e,i,n,o,r,s,a,l,c){if(this.listeners=t,this.isRecalculated=!1,""===n)return console.error("unsupported resolution for rebuild: "+i),void this.listeners.onError("unsupported resolution for rebuild: "+i);this.symbolInfo=r;var h=this;this.engine=new b({tickerid:e,period:n,periodBase:i,body:o,sessionId:a,symbolInfo:r,rangeExtension:s,periodForInitialRange:l,additionalBarsCount:c,recalc:function(t,e){h._recalc(e)},out:function(t,e){h._out(t,e)},nonseriesOut:function(t,e){h._nonseriesOut(t,e)},setNoMoreData:function(){h.barset&&(h.barset.endOfData=!0)},onErrorCallback:function(t){h.listeners.onError(t)}})},f.prototype.stop=function(){this.engine?this.engine.stop():console.error("Internal library error 0x1")},f.prototype._recalc=function(t){this.isRecalculated&&console.error("recalc called twice!"),this.barset||(this.barset=new w(this.symbolInfo)),t&&(this.barset.nextTime=t.nextTime,this.barset.endOfData=t.endOfData),this.listeners.fire(this.barset),this.isRecalculated=!0},f.prototype._nonseriesOut=function(t,e){var i=Object.assign({},e);i.nonseries=!0,i.data=e.bars,delete i.bars,i.barsetSize=this.barset?this.barset.count():0,i.lastBar=this.barset?this.barset.bar(this.barset.count()-1):null,this.listeners.fire(i,!0)},f.prototype._out=function(t,e){var i,n,o,r,s,a,l,c=e[0];if(!isNaN(c)){if(i={time:c,open:e[1],high:e[2],low:e[3],close:e[4],
volume:e[5],updatetime:e[6]},n=e[7],this.barset||(this.barset=new w(t.info)),(o=e[8])instanceof Array)for(r=0;r<o.length;r++)s=e[9],a=o[r],l={time:a,open:s,high:s,low:s,close:s,volume:0,updatetime:a},this.barset.add(l,!0),this.isRecalculated&&this.listeners.fire(this.barset);this.barset.add(i,n),this.barset.isBarClosed=n,this.isRecalculated&&this.listeners.fire(this.barset)}},m=function(){this.listeners=[]},m.prototype.listenersCount=function(){return this.listeners.reduce(function(t,e){return t+(e?1:0)},0)},m.prototype.addListener=function(t,e){this.listeners.push({dataListener:t,onErrorCallback:e}),this.barset&&t(this.barset),this.errorMsg&&e(this.errorMsg)},m.prototype.removeListener=function(t){var e,i=this.listeners.filter(function(e){return e.dataListener===t});0!==i.length&&(e=this.listeners.indexOf(i[0]),delete this.listeners[e])},m.prototype.onError=function(t){var e,i,n,o;for(this.errorMsg=t||"unspecified error",e=this.listeners,i=e.length,n=0;n<i;n++)(o=e[n])&&o.onErrorCallback&&o.onErrorCallback(t)},m.prototype.fire=function(t,e){var i,n,o,r;for(e||(this.barset=t),i=this.listeners,n=i.length,o=0;o<n;o++)(r=i[o])&&r.dataListener(t)},{setupFeed:p,parseSymbol:d,unsubscribeUnused:function(){t.instance.removeUnused()}}}();t.exports=c}).call(e,i(33))},function(t,e,i){"use strict";var n,o;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"HeikenAshi",function(){return o}),n=i(21),i.n(n),o=function(){function t(){}return t.prototype.main=function(t){var e,i,o,r,s=t.new_var(n.Std.open(t)),a=t.new_var(n.Std.close(t)),l=s.get(1),c=a.get(1),h=n.Std.ohlc4(t),u=n.Std.na(s.get(1))?(n.Std.open(t)+n.Std.close(t))/2:(l+c)/2;return s.set(u),a.set(h),e=n.Std.max(n.Std.high(t),n.Std.max(u,h)),i=n.Std.min(n.Std.low(t),n.Std.min(u,h)),o=n.Std.volume(t),r=t.symbol,[r.time,u,e,i,h,o,r.updatetime,r.isBarClosed]},t}()},function(t,e,i){"use strict";var n,o,r,s;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"Kagi",function(){return s}),n=i(21),i.n(n),o=i(354),r=i(215),s=function(){function t(t){this._source="close",this._isCurrentKagiBarIncreases=null,this._bar=new o.a,this._style=t.style,this._atrLength=t.atrLength,this._reversalAmount=t.reversalAmount,this._isATR="ATR"===this._style,this._atrCalculated=!1,this._inited=!1}return t.prototype.init=function(){},t.prototype.main=function(t){var e,i,o,s,a,l,c,h,u,d,p,_;if(this._atr=this._isATR?Object(r.a)("atr"+this._atrLength,t.symbol.tickerid,t.symbol.resolution,t.new_var(n.Std.atr(this._atrLength,t))):null,e=n.Std[this._source](t),i=n.Std.volume(t),o=n.Std.time(t),s=t.symbol,a={bars:[]},this._isATR&&!this._atrCalculated&&this._atr){if(l=this._atr.get(),n.Std.na(l))return a;this._reversalAmount=l}if(!this._inited&&!n.Std.na(o)&&(this._kagiPriceExtremum=e,this._kagiOpenPrice=e,this._prevKagiTime=o,this._kagiVolume=i,this._inited=!0,!this._isATR))return{bars:[],nonseries:!0,price:e,reversalAmount:this._reversalAmount,type:"projection"};if(s.isBarClosed){if(this._kagiVolume+=i,null===this._isCurrentKagiBarIncreases){if(this._kagiPriceExtremum===e)return a
;this._isCurrentKagiBarIncreases=n.Std.greater(e,this._kagiPriceExtremum),this._isKagiLineBold=this._isCurrentKagiBarIncreases,this._isPrevKagiLineBold=this._isKagiLineBold,this._kagiPrevOpenPrice=this._kagiOpenPrice,this._bar.set(a,[this._prevKagiTime,this._kagiOpenPrice,this._isCurrentKagiBarIncreases?this._kagiPriceExtremum:this._kagiOpenPrice,this._isCurrentKagiBarIncreases?this._kagiOpenPrice:this._kagiPriceExtremum,this._kagiPriceExtremum,this._kagiVolume,this._isCurrentKagiBarIncreases?this._kagiPriceExtremum:this._kagiOpenPrice])}c=this._isCurrentKagiBarIncreases?1:-1,n.Std.greater((e-this._kagiPriceExtremum)*c,0)?(this._kagiPriceExtremum=e,h=this._isCurrentKagiBarIncreases?this._kagiPriceExtremum:this._kagiOpenPrice,u=this._isCurrentKagiBarIncreases?this._kagiOpenPrice:this._kagiPriceExtremum,d=0,this._isPrevKagiLineBold!==this._isCurrentKagiBarIncreases&&n.Std.greater(this._kagiPrevOpenPrice,u)&&n.Std.less(this._kagiPrevOpenPrice,h)?(d=this._kagiPrevOpenPrice,this._isKagiLineBold=this._isCurrentKagiBarIncreases):d=this._isKagiLineBold?u:h,this._bar.update([this._kagiOpenPrice,h,u,this._kagiPriceExtremum,this._kagiVolume,d])):n.Std.greaterOrEqual(c*(this._kagiPriceExtremum-e),this._reversalAmount)&&(this._kagiPrevOpenPrice=this._kagiOpenPrice,this._kagiOpenPrice=this._kagiPriceExtremum,this._kagiPriceExtremum=e,this._isCurrentKagiBarIncreases=!this._isCurrentKagiBarIncreases,this._prevKagiTime=o,this._kagiVolume=i,this._isPrevKagiLineBold=this._isKagiLineBold,h=this._isCurrentKagiBarIncreases?this._kagiPriceExtremum:this._kagiOpenPrice,u=this._isCurrentKagiBarIncreases?this._kagiOpenPrice:this._kagiPriceExtremum,d=0,this._isPrevKagiLineBold!==this._isCurrentKagiBarIncreases&&n.Std.greater(this._kagiPrevOpenPrice,u)&&n.Std.less(this._kagiPrevOpenPrice,h)?(d=this._kagiPrevOpenPrice,this._isKagiLineBold=this._isCurrentKagiBarIncreases):d=this._isKagiLineBold?u:h,this._bar.set(a,[this._prevKagiTime,this._kagiOpenPrice,h,u,this._kagiPriceExtremum,this._kagiVolume,d]))}return s.isLastBar?this._bar.commit(a)?a:(p={bars:[],nonseries:!0,price:e,reversalAmount:this._reversalAmount,type:"projection"},null===this._isCurrentKagiBarIncreases?p:(c=this._isCurrentKagiBarIncreases?1:-1,n.Std.greaterOrEqual(c*(this._kagiPriceExtremum-e),this._reversalAmount)?(h=this._isCurrentKagiBarIncreases?this._kagiPriceExtremum:e,u=this._isCurrentKagiBarIncreases?e:this._kagiPriceExtremum,_=0,_=this._isKagiLineBold===this._isCurrentKagiBarIncreases&&n.Std.greater(this._kagiOpenPrice,u)&&n.Std.less(this._kagiOpenPrice,h)?this._kagiOpenPrice:this._isKagiLineBold?u:h,p.bars.push([0,this._kagiPriceExtremum,h,u,e,0,_])):n.Std.greater(c*(e-this._kagiPriceExtremum),0)&&(h=this._isCurrentKagiBarIncreases?e:this._kagiPriceExtremum,u=this._isCurrentKagiBarIncreases?this._kagiPriceExtremum:e,_=0,_=this._isKagiLineBold!==this._isCurrentKagiBarIncreases&&n.Std.greater(this._kagiPrevOpenPrice,u)&&n.Std.less(this._kagiPrevOpenPrice,h)?this._kagiPrevOpenPrice:this._isKagiLineBold?u:h,p.bars.push([-1,this._kagiPriceExtremum,h,u,e,0,_])),p)):a},t}()
},function(t,e,i){"use strict";var n,o,r,s;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"Renko",function(){return s}),n=i(21),i.n(n),o=i(355),r=i(215),s=function(){function t(t){this._source="close",this._prevHighLastRenko=NaN,this._prevLowLastRenko=NaN,this._renkoVolume=0,this._inputs=t}return t.prototype.init=function(){this._style=this._inputs.style,this._boxSize=this._inputs.boxSize,this._atrLength=this._inputs.atrLength,this._isATR="ATR"===this._style.toUpperCase()},t.prototype.main=function(t){var e,i,s,a;return this._atr=this._isATR?Object(r.a)("atr"+this._atrLength,t.symbol.tickerid,t.symbol.resolution,t.new_var(n.Std.atr(this._atrLength,t))):null,this._box||(this._box=new o.a(this._boxSize,this._atr,t.symbol.minTick)),e=n.Std[this._source](t),i=n.Std.volume(t),s=t.symbol,this._box.isInitialized()?s.isBarClosed?this._calcConfirmed(e,i,s.time):this._calcProjection(e,s.time):!isNaN(e)&&this._box.init()?(this._boxSize=this._box.size(),a=Math.floor(e/this._boxSize)*this._boxSize,this._prevHighLastRenko=a,this._prevLowLastRenko=a,this._renkoVolume=a,{bars:[],boxSize:this._boxSize,nonseries:!0,price:e,type:"projection"}):null},t.prototype._calcConfirmed=function(t,e,i){var o,r,s,a,l,c,h,u;if(this._renkoVolume+=e,n.Std.greaterOrEqual(t-this._prevHighLastRenko,this._boxSize)||n.Std.greaterOrEqual(this._prevLowLastRenko-t,this._boxSize)){if(o=0,r=n.Std.greater(t,this._prevHighLastRenko)?1:-1,s=1===r?this._prevHighLastRenko:this._prevLowLastRenko,a={bars:[]},0===(l=Math.round((t-s)*r/this._boxSize))||l!==Math.round((t-s)*r/this._boxSize))throw Error("Wrong count of renko bars");for(c=void 0,c=s;n.Std.greaterOrEqual((t-c)*r,this._boxSize);c+=r*this._boxSize)h=1===r?c+this._boxSize:c,u=1===r?c:c-this._boxSize,a.bars.push([i+o,c,h,u,c+r*this._boxSize,this._renkoVolume/l]),o++;return this._prevHighLastRenko=c+(1===r?0:this._boxSize),this._prevLowLastRenko=c-(1===r?this._boxSize:0),this._renkoVolume=0,a}return null},t.prototype._calcProjection=function(t,e){var i,o,r,s,a,l,c={bars:[],boxSize:this._boxSize,nonseries:!0,price:t,type:"projection"};if(isNaN(this._prevLowLastRenko)||isNaN(this._prevHighLastRenko))return c;if(n.Std.greaterOrEqual(t,this._prevLowLastRenko)&&n.Std.lessOrEqual(t,this._prevHighLastRenko))return c;for(i=0,o=n.Std.greater(t,this._prevHighLastRenko)?1:-1,r=1===o?this._prevHighLastRenko:this._prevLowLastRenko,s=r;n.Std.greaterOrEqual((t-s)*o,this._boxSize);s+=o*this._boxSize)a=1===o?s+this._boxSize:s,l=1===o?s:s-this._boxSize,c.bars.push([i,s,a,l,s+o*this._boxSize,0]),i++;return n.Std.equal(s,t)||(a=1===o?t:s,l=1===o?s:t,c.bars.push([i,s,a,l,t,0])),c},t}()},function(t,e,i){"use strict";var n,o,r,s;Object.defineProperty(e,"__esModule",{value:!0}),n=i(21),o=i(6),r=function(){function t(t){this._data=[],this._counter=-1,this._data.length=t,this._data.fill(0,0,t)}return t.prototype.add=function(t){this._counter++,this._counter===2*this._data.length&&(this._counter=this._data.length),this._data[this._counter%this._data.length]=t},t.prototype.getLast=function(){
return Object(o.assert)(!this.isEmpty(),"Should not be empty"),this._data[this._counter%this._data.length]},t.prototype.isEmpty=function(){return 0===this.size()},t.prototype.size=function(){return Math.min(this._data.length,this._counter+1)},t.prototype.min=function(){var t,e;for(Object(o.assert)(!this.isEmpty(),"Should not be empty"),t=this._data[0],e=1;e<this.size();e++)t=Math.min(t,this._data[e]);return t},t.prototype.max=function(){var t,e,i;for(Object(o.assert)(!this.isEmpty(),"Should not be empty"),t=this._data[0],e=this.size(),i=1;i<e;i++)t=Math.max(t,this._data[i]);return t},t}(),i.d(e,"LineBreak",function(){return s}),s=function(){function t(t){this._source="close",this._volume=0,this._inited=!1,this._inputs=t}return t.prototype.init=function(){this._numberOfLines=this._inputs.lb||3,this._highLastBars=new r(this._numberOfLines),this._lowLastBars=new r(this._numberOfLines)},t.prototype.main=function(t){var e,i,o,r,s,a,l,c,h,u,d=n.Std[this._source](t);return isNaN(d)?null:this._inited||isNaN(d)?(e=t.symbol,e.isBarClosed&&(i={bars:[]},this._volume+=n.Std.volume(t),n.Std.greater(d,this._highLastBars.max())||n.Std.less(d,this._lowLastBars.min()))?(o=n.Std.greater(d,this._highLastBars.max()),r=o?this._highLastBars.getLast():this._lowLastBars.getLast(),s=o?d:r,a=o?r:d,l=this._volume,this._highLastBars.add(s),this._lowLastBars.add(a),this._volume=0,i.bars.push([n.Std.time(t),r,s,a,d,l]),i):e.isLastBar?(i={bars:[],nonseries:!0,price:d,type:"projection"},c=n.Std.greater(d,this._highLastBars.getLast()),h=n.Std.less(d,this._lowLastBars.getLast()),(c||h)&&(u=c?this._highLastBars.getLast():this._lowLastBars.getLast(),i.bars.push([0,u,c?d:u,c?u:d,d,0])),i):null):(this._volume=n.Std.volume(t),this._highLastBars.add(d),this._lowLastBars.add(d),this._inited=!0,null)},t}()},function(t,e,i){"use strict";var n,o,r,s,a;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"PointAndFigure",function(){return a}),n=i(21),i.n(n),o=i(355),r=i(354),s=i(215),a=function(){function t(t){var e,i;switch(this._bar=new r.a,this._isCurrentBarIncreasing=null,this._priceExtremum=NaN,this._pnfOpenPrice=NaN,this._pnfHighPrice=NaN,this._pnfLowPrice=NaN,this._volumePnF=0,this._prevPnFTime=null,e=t.sources,i=t.style,this._boxSize=t.boxSize,this._atrLength=t.atrLength,this._reversalAmount=t.reversalAmount,e){case"HL":this._sourceHigh=n.Std.high,this._sourceLow=n.Std.low;break;case"Close":this._sourceHigh=n.Std.close,this._sourceLow=n.Std.close}this._isATR="ATR"===i}return t.prototype.init=function(){},t.prototype.main=function(t){var e,i,r,a,l,c,h,u,d,p,_,f,m,g,y;if(this._seriesATR=this._isATR?Object(s.a)("atr"+this._atrLength,t.symbol.tickerid,t.symbol.resolution,t.new_var(n.Std.atr(this._atrLength,t))):null,this._box||(this._box=new o.a(this._boxSize,this._seriesATR,t.symbol.minTick)),e=this._sourceHigh,i=this._sourceLow,r=e(t),a=i(t),l=n.Std.open(t),c=n.Std.volume(t),h=t.symbol,u={bars:[]},!this._box.isInitialized())return!isNaN(l)&&this._box.init()?(this._boxSize=this._box.size(),this._prevPnFTime=h.time,this._pnfHighPrice=this._granulate(l),
this._pnfLowPrice=this._granulate(l),this._volumePnF=0,{bars:[],boxSize:this._boxSize,nonseries:!0,price:l,type:"projection"}):null;if(h.isBarClosed){if(this._volumePnF+=c,null===this._isCurrentBarIncreasing)return this._isCurrentBarIncreasing=this._directionFinding(r,a),null!==this._isCurrentBarIncreasing&&(this._priceExtremum=this._isCurrentBarIncreasing?this._pnfHighPrice:this._pnfLowPrice,this._pnfOpenPrice=this._isCurrentBarIncreasing?this._pnfLowPrice:this._pnfHighPrice,this._bar.set(u,[this._prevPnFTime||0,this._pnfOpenPrice,this._pnfHighPrice,this._pnfLowPrice,this._priceExtremum,this._volumePnF,this._isCurrentBarIncreasing?1:-1])),null;d=this._isCurrentBarIncreasing?r:a,p=this._isCurrentBarIncreasing?a:r,_=this._isCurrentBarIncreasing?1:-1,f=(d-this._priceExtremum)*_,n.Std.greaterOrEqual(f,this._boxSize)?(this._priceExtremum+=_*this._granulate(f),m=this._isCurrentBarIncreasing?this._priceExtremum:this._pnfOpenPrice,g=this._isCurrentBarIncreasing?this._pnfOpenPrice:this._priceExtremum,this._bar.update([this._pnfOpenPrice,m,g,this._priceExtremum,this._volumePnF,_])):n.Std.greaterOrEqual((this._priceExtremum-p)*_,this._reversalAmount*this._boxSize)&&(f=(this._priceExtremum-p)*_,this._isCurrentBarIncreasing=!this._isCurrentBarIncreasing,this._pnfOpenPrice=this._priceExtremum-this._boxSize*_,this._priceExtremum-=_*this._granulate(f),this._prevPnFTime=h.time,this._volumePnF=c,m=this._isCurrentBarIncreasing?this._priceExtremum:this._pnfOpenPrice,g=this._isCurrentBarIncreasing?this._pnfOpenPrice:this._priceExtremum,this._bar.set(u,[this._prevPnFTime,this._pnfOpenPrice,m,g,this._priceExtremum,this._volumePnF,-_]))}return h.isLastBar?this._bar.commit(u)?u:null===this._isCurrentBarIncreasing?null:(y={bars:[],boxSize:this._boxSize,nonseries:!0,price:this._isCurrentBarIncreasing?r:a,type:"projection"},h.isBarClosed?y:(d=this._isCurrentBarIncreasing?r:a,p=this._isCurrentBarIncreasing?a:r,_=this._isCurrentBarIncreasing?1:-1,f=(d-this._priceExtremum)*_,n.Std.greaterOrEqual(f,this._boxSize)?y.bars.push([-1,this._priceExtremum+this._boxSize*_,this._isCurrentBarIncreasing?this._priceExtremum+_*this._granulate(f):this._priceExtremum+this._boxSize*_,this._isCurrentBarIncreasing?this._priceExtremum+this._boxSize*_:this._priceExtremum+_*this._granulate(f),this._priceExtremum+_*this._granulate(f),0,_]):n.Std.greaterOrEqual((this._priceExtremum-p)*_,this._reversalAmount*this._boxSize)&&(f=(this._priceExtremum-p)*_,y.bars.push([0,this._priceExtremum-this._boxSize*_,this._isCurrentBarIncreasing?this._priceExtremum-this._boxSize*_:this._priceExtremum-_*this._granulate(f),this._isCurrentBarIncreasing?this._priceExtremum-_*this._granulate(f):this._priceExtremum-this._boxSize*_,this._priceExtremum-_*this._granulate(f),0,-1*_])),y)):u},t.prototype._directionFinding=function(t,e){var i=t-this._pnfHighPrice;return!(!n.Std.greaterOrEqual(i,this._boxSize)||(this._pnfHighPrice+=this._granulate(i),!n.Std.greater(e,this._pnfLowPrice)))||(i=this._pnfLowPrice-e,(!n.Std.greaterOrEqual(i,this._boxSize)||(this._pnfLowPrice-=this._granulate(i),
!n.Std.less(t,this._pnfHighPrice)))&&null)},t.prototype._granulate=function(t){return Math.floor(t/this._boxSize+1e-5)*this._boxSize},t}()},function(t,e,i){"use strict";var n=function(){function t(t,e,i){return t+","+e+","+i}function e(e,i,n){delete o[t(e,i,n)]}function n(e,i,n){function s(t){return"undefined"!=typeof TradingView&&TradingView.ChartapiMessagerInstances?o[t]=new a(TradingView.ChartapiMessagerInstances[e],l.pureResolution):o[t]=new a(null,l.pureResolution),o[t]}var l=r.Symbol.parsePeriod(n),c=t(e,i,l.pureResolution);return o[c]?o[c]:s(c)}var o={},r=i(21),s=i(48),a=function(t,e,i){this._chartApiMessager=t,this._lastRealBarTime=null,this._lastRealBarIndex=null,this._resolution=e,this._extrapolatedBarsCache=[],this._onReadyCallbacks=[],this._requestedAmountOfBars=0,this._maxDepth=i||100};return a.prototype.ready=function(){return null!==this._lastRealBarIndex},a.prototype.rebuild=function(t,e){this._lastRealBarTime=t;var i=Math.max(this._extrapolatedBarsCache.length,this._requestedAmountOfBars);this._extrapolatedBarsCache=[],this.ensureExtrapolatedToBar(e,i)},a.prototype.historyExtrapolator=function(){return void 0===this._historyExtrapolator&&(this._historyExtrapolator=new a(null,this._resolution,Math.max(this._maxDepth,1500))),this._historyExtrapolator},a.prototype.getPointTimeUTC=function(t,e,i){var n,o;return 0===e?t:!this.ready()||t<this._lastRealBarTime/1e3?(this.historyExtrapolator().setLastBarTime(0,1e3*t),this.historyExtrapolator().getPointTimeUTC(t,e,i)):(n=0===this._extrapolatedBarsCache.length||t===this._lastRealBarTime/1e3,o=n?-1:this.indexOfBar(t,i)-this._lastRealBarIndex-1,this.ensureExtrapolatedToBar(i,o+e+1),this._extrapolatedBarsCache[o+e])},a.prototype.findDistanceInBars=function(t,e,i){return t===e?0:(this.historyExtrapolator().setLastBarTime(0,1e3*t),this.historyExtrapolator().indexOfBar(e,i))},a.prototype.indexOfBar=function(t,e){this._ensureExtrapolatedToTime(e,1e3*t);var i=s.lower_bound(this._extrapolatedBarsCache,t,function(t,e){return t>e?1:t<e?-1:0});return-1===i?i:this._lastRealBarIndex+i+1},a.prototype._extrapolateData=function(t,e){var i,n,o;if(!this._lastRealBarTime)throw Error("No real bars known, so cannot extrapolate anything");if(!(i=e(this._lastRealBarTime))||0===i.length)return void(null!==this._lastRealBarIndex&&null!==this._chartApiMessager&&this._chartApiMessager.onTickmarksUpdated(this._lastRealBarIndex+1,this._extrapolatedBarsCache,t,this._resolution));for(n=0;n<i.length;++n)i[n]=i[n]/1e3;for(i[0]===this._lastRealBarTime/1e3&&(i=i.slice(1)),this._extrapolatedBarsCache=i,o=i.slice(0),o.sort(),n=0;n<o.length-1;++n)o[n]===o[n+1]&&console.error("Duplicating extrapolated bars: duplicated "+new Date(1e3*o[n]));null!==this._lastRealBarIndex&&null!==this._chartApiMessager&&this._chartApiMessager.onTickmarksUpdated(this._lastRealBarIndex+1,i,t,this._resolution)},a.prototype.onTickmarksNeeded=function(t,e){if(this.ready())this.ensureExtrapolatedToBar(t,e);else{var i=this;this._onReadyCallbacks.push(function(){i.ensureExtrapolatedToBar(t,e)})}},
a.prototype.ensureExtrapolatedToBar=function(t,e){var i=this;return this._requestedAmountOfBars=e,this._extrapolateData(t,function(n){return i._extrapolatedBarsCache.length>=e||!i._shouldExtrapolateMore()?null:s.extrapolateBarsFrontByCount(i.newBarBuilder(t),n,e)})},a.prototype._ensureExtrapolatedToTime=function(t,e){var i=this;return this._extrapolateData(t,function(n){var o,r;return n>=e||!i._shouldExtrapolateMore()?null:(o=2e3,r=s.extrapolateBarsFrontToTime(i.newBarBuilder(t),n,e,o),r[r.length-1]<e&&console.warn("Extrapolation error: not enough data created"),r)})},a.prototype.newBarBuilder=function(t){var e=r.Symbol.newSession(t.timezone,t.session);return r.Symbol.newBarBuilder(this._resolution,e)},a.prototype._shouldExtrapolateMore=function(){return this._extrapolatedBarsCache.length<this._maxDepth},a.prototype.setLastBarTime=function(t,e){(null===this._lastRealBarIndex||this._lastRealBarIndex===t&&this._lastRealBarTime!==e)&&(this._extrapolatedBarsCache=[]),this._extrapolatedBarsCache&&this._extrapolatedBarsCache.length&&this._lastRealBarIndex!==t&&(this._lastRealBarIndex>t?this._extrapolatedBarsCache=[]:this._lastRealBarTime!==e&&this._extrapolatedBarsCache.shift(t-this._lastRealBarIndex)),this._lastRealBarIndex=t,this._lastRealBarTime=e;for(var i=0;i<this._onReadyCallbacks.length;++i)this._onReadyCallbacks[i]();this._onReadyCallbacks=[]},{remove:e,storage:n}}();t.exports=n},function(t,e,i){"use strict";(function(e){var n=i(48),o=i(23).Interval,r=function(){function t(t,e){return t}function r(t,e){var i=m.get_timezone(t.timezone),o=new n.Session;return o.init(i,t.session),f.Symbol.newBarBuilder(e,o,o)}function s(e,i,n,o,r,s){var a,l,c,h,u=t(i,n);for(p.hasOwnProperty(u)||(p[u]=[]),a=[],l=0;l<o.length;++l)o[l][1]<0&&(o[l][1]=0),0!==o[l][1]?(c=r.getPointTimeUTC(o[l][0],o[l][1],s),a.push(c)):o[l][0]&&a.push(o[l][0]);h={guid:e,points:a},p[u].push(h)}function a(t){var e,i,n;for(e in p)for(i=p[e],n=0;n<i.length;++n)if(i[n].guid===t)return void i.splice(n,1)}function l(t,e,i,n,o){var r,s,a,l=[];for(r=0;r<t.points.length;++r){if(null==(s=t.points[r]))return null;if(null===(a=h(e,s,i,n,o)))return null;l.push({index:r,value:[a,s]})}return l}function c(e,i,n,o,r,s){var a,c,h,u,d=t(e,i);if(p.hasOwnProperty(d))for(a=p[d].length,c=0;c<a;++c)h=p[d][c],null!==(u=l(h,n,o,r,i))&&s(h.guid,u)}function h(t,e,i,o,s){var a,l;return 1e3*(e=r(o,s).alignTimeIfPossible(1e3*e)/1e3)<t[0].value[0]?-d(o,s,e,t[0].value[0]/1e3,i):(a=n.lower_bound(t,1e3*e,function(t,e){return t.value[0]>e?1:t.value[0]<e?-1:0}))>=0&&e<t[t.length-1].value[0]?(t[a].value[0]/1e3!==e&&0!==a&&a--,t[a].index):(l=i.indexOfBar(e,o),-1===l?null:l)}function u(t,e,i,n,o){function r(t,e){var i=new Date(1e3*t),n=new Date(1e3*e),o=12*(n.getFullYear()-i.getFullYear());return o-=i.getMonth()+1,o+=n.getMonth(),o<=0?0:o}var s,a,l,c,h,u,d,p,_,f,g,y,v,b,S;if(e.isMonths())s=r(n,o)/e.multiplier();else if(e.isWeeks())a=Math.ceil((o-n)/604800),s=Math.ceil(a/e.multiplier());else{if(l=m.utc_to_cal(i.timezone,+new Date(1e3*n)),c=m.utc_to_cal(i.timezone,+new Date(1e3*o)),
(h=(o-n)/86400)>4*(7-i.spec.weekEndsCount()))d=h/7,u=d*(7-i.spec.weekEndsCount());else{for(p=0,_={},f=l;f.valueOf()<=c.valueOf();f=m.add_days_considering_dst(i.timezone,f,1))g=m.get_day_of_week(f),void 0===_[g]&&(_[g]=i.spec.isWeekEnd(g)),_[g]&&p++;u=h-p}if(e.isDays())s=Math.ceil(u/e.multiplier());else{if(y=e.isHours()?60*e.multiplier()*60:e.isSeconds()?e.multiplier():60*e.multiplier(),h<1&&(v=i.spec.findSessionEntry(m.get_day_of_week(l),m.get_minutes_from_midnight(l)),b=i.spec.findSessionEntry(m.get_day_of_week(c),m.get_minutes_from_midnight(c)),v===b))return Math.ceil((o-n)/y);g=i.spec.entries()[0].dayOfWeek(),S=60*i.spec.entries().reduce(function(t,e){return t+(e.dayOfWeek()===g?e.length():0)},0),s=Math.ceil(u*S/y)}}return s}function d(t,e,i,s,a){var l,c,h=new o(e),d=m.get_timezone(t.timezone),p=new n.Session;return p.init(d,t.session),l=r(t,e),i=l.alignTimeIfPossible(1e3*i)/1e3,s=l.alignTimeIfPossible(1e3*s)/1e3,i>=s?0:(c=u(t,h,p,i,s),c>=1e3?c:a.findDistanceInBars(i,s,t))}var p={},_="undefined"!=typeof window?window:e,f=i(21),m=_.PineJsCalendar?_.PineJsCalendar:i(33);return{createPointset:s,removePointset:a,broadcastPointsetsUpdates:c,tests:{approxBarsInterval:u,indexOfTime:h}}}();t.exports=r}).call(e,i(98))},function(t,e,i){"use strict";function n(t,e,i){return Object(a.isArray)(t)?o(t,e,i):Object(a.isObject)(t)&&(Object(a.isHashObject)(t)||i&&i.visitInstances)?r(t,e,i):t}function o(t,e,i){return t.map(function(t){var o=n(t,e,i),r=e(o);return void 0!==r?r:o})}function r(t,e,i){var o={};return Object.keys(t).forEach(function(r){var s=n(t[r],e,i),a=e(s);o[r]=void 0!==a?a:s}),o}function s(t,e,i){var o=n(t,e,i),r=e(o);return void 0!==r?r:o}var a;Object.defineProperty(e,"__esModule",{value:!0}),e.visitObject=s,a=i(12),i.n(a)},function(t,e,i){"use strict";function n(t,e){return t.ticker+"_"+e}function o(t){return new Date(t).toISOString()}var r,s,a,l,c,h;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"DatafeedRequestsCachedProcessor",function(){return h}),r=i(23),s=i(85),a=i(21),i.n(a),l=i(4),i.n(l),i(31),c=function(){function t(t,e,i,n){this._cache={bars:[]},this._nextSubscriptionId=0,this._pendingSubscribers=[],this._subscribers=[],this._requesting=!1,this._leftDate=null,this._gaps=[],this._needPurgeCache=!1,this._realtimeOn=!1,this._endOfData=!1,this._resetCacheTimeout=null,this._errorMessage=null,this._datafeed=t,this._symbolInfo=e,this._resolution=i,this._dwmAligner=n}return t.prototype.destroy=function(){0!==this._subscribers.length&&console.warn("Destroying with not-empty state"),this._clearResetCacheTimeout(),this._unsubscribeRealtime(),this._purgeCache(),delete this._datafeed},t.prototype.addSubscription=function(t,e,i){var n=this,o=this._getNextSubscriptionId(),r=Math.floor(t.from/1e3),s=Math.floor(t.to/1e3);return this._pendingSubscribers.push({key:o,range:{from:r,to:s},onHistoryCallback:e,onErrorCallback:i}),this._clearResetCacheTimeout(),setTimeout(function(){return n._processPendingSubscribers()},0),o},t.prototype.removeSubscription=function(t){
var e,i=this,n=this._pendingSubscribers.find(function(e){return e.key===t});return n?void this._pendingSubscribers.splice(this._pendingSubscribers.indexOf(n),1):(e=this._subscribers.find(function(e){return e.key===t}))?(this._subscribers.splice(this._subscribers.indexOf(e),1),void(this._subscribers.length||(this._symbolInfo.expired||this._symbolInfo.expiration_date?this._unsubscribeRealtime():this._resetCacheTimeout=setTimeout(function(){i._purgeCacheDelayed(),i._unsubscribeRealtime()})))):void console.warn("Unknown subscription symbol={0}, resolution={1}, key={2}".format(this._symbolInfo.name,this._resolution,t))},t.prototype._purgeCacheDelayed=function(){this._logMessage("Reset cache"),this._needPurgeCache=!0,this._clearResetCacheTimeout()},t.prototype._logMessage=function(t,e){(l.enabled("charting_library_debug_mode")||e)&&console.log("FEED [{0}|{1}]: {2}".format(this._symbolInfo.name,this._resolution,t))},t.prototype._clearResetCacheTimeout=function(){null!==this._resetCacheTimeout&&(clearTimeout(this._resetCacheTimeout),this._resetCacheTimeout=null)},t.prototype._purgeCache=function(){this._cache={bars:[]},this._gaps=[],this._errorMessage=null,this._needPurgeCache=!1,this._leftDate=null,this._endOfData=!1},t.prototype._processPendingSubscribers=function(){var t,e,i,n,s,a,l=this,c=this._pendingSubscribers;if(c.length){if(this._requesting)return void this._logMessage("Processing is skipped due active request");if(this._logMessage("Processing pending subscribers, count="+c.length),this._needPurgeCache&&this._purgeCache(),this._errorMessage)return t=this._errorMessage,this._logMessage("Return error: "+t),this._pendingSubscribers=[],void c.forEach(function(e){e.onErrorCallback(t)});if(e=c.reduce(function(t,e){return Math.min(e.range.from,t)},1/0),this._logMessage('Leftmost requested "from" is '+o(1e3*e)),(!this._leftDate||e<this._leftDate)&&(i=new r.Interval(this._resolution),n=(i.inMilliseconds(Date.now())||0)/1e3,s=!this._leftDate,a=!s&&!!this._cache.bars.length&&this._cache.bars[0].time/1e3-e<n,(s||!a)&&!this._endOfData))return void this._ensureRequestedTo(e);this._pendingSubscribers=[],c.forEach(function(t){var e=l._moveSubscriberToRealtime(t);l._returnHistoryDataToSubscriber(t,e)}),this._subscribeRealtimeIfNeeded()}},t.prototype._moveSubscriberToRealtime=function(t){var e={key:t.key,onHistoryCallback:t.onHistoryCallback,barset:null};return this._subscribers.push(e),e},t.prototype._subscribeRealtimeIfNeeded=function(){!this._subscribers.length||this._realtimeOn||this._symbolInfo.expired||this._symbolInfo.expiration_date||this._subscribeRealtime()},t.prototype._subscribeRealtime=function(){var t,e,i=this;this._symbolInfo.expired||this._realtimeOn||(t=function(t){i._dwmAligner&&(t.time=i._dwmAligner.tradingDayToSessionStart(t.time)),i._putToCacheNewBar(t),i._subscribers.forEach(function(e){var i=e.barset;if(null===i)throw Error("subscirber.barset is null");i.add(t),e.onHistoryCallback(i)})},e=function(){i._unsubscribeRealtime();var t=i._leftDate;i._purgeCache(),t&&i._ensureRequestedTo(t)},this._realtimeOn=!0,
this._datafeed.subscribeBars(this._symbolInfo,this._resolution,t,n(this._symbolInfo,this._resolution),e),this._logMessage("Subscribed to realtime"))},t.prototype._unsubscribeRealtime=function(){!this._symbolInfo.expired&&this._realtimeOn&&(this._datafeed.unsubscribeBars(n(this._symbolInfo,this._resolution)),this._logMessage("Unsubscribed from realtime"),this._realtimeOn=!1)},t.prototype._returnHistoryDataToSubscriber=function(t,e){var i,n,r=t.range,s=l.enabled("cl_feed_return_all_data")?this._createBarset(this._leftDate||r.from):this._createBarset(r.from);s.count()>0?this._logMessage("Bars to return for request {0}: total {1} bars in [{2} ... {3}] ".format(t.key,s.count(),o(s.bars[0].time),o(s.bars[s.count()-1].time))):this._logMessage("Request {0}. Nothing to return.".format(t.key)),e.barset=s,i=this._inGapNextTime(r.from),i?(this._logMessage("Request {0} is in gap, nextTime = {1}".format(t.key,o(1e3*i))),s.nextTime=i):0===s.count()&&(n=this._cache.bars.length&&this._cache.bars[this._cache.bars.length-1].time/1e3)&&r.from>n&&(this._logMessage("Request {0} is in gap, nextTime = {1}".format(t.key,o(1e3*n))),s.nextTime=n||void 0),this._endOfData&&null!==this._leftDate&&t.range.from<=this._leftDate&&(s.endOfData=!0),t.onHistoryCallback(s)},t.prototype._createBarset=function(t){var e=Object(s.lowerbound)(this._cache.bars,1e3*t,function(t,e){return t.time<e});return new a.BarSet(this._symbolInfo,this._cache.bars.slice(e))},t.prototype._ensureRequestedTo=function(e){var i,n,r,s=this;if(this._leftDate&&this._leftDate<e)return void this._processPendingSubscribers();i=!this._leftDate,this._requesting=!0,n=e,r=this._leftDate?this._leftDate-1:this._symbolInfo.expiration_date||Math.floor(t._now()/1e3),this._leftDate=e,this._logMessage("Requesting data: [{0} ... {1}] ".format(o(1e3*n),o(1e3*r))),this._datafeed.getBars(this._symbolInfo,this._resolution,n,r,function(t,e){s._requesting=!1,s._processBars(t,e)},function(t){s._requesting=!1,s._errorMessage=t||null,s._processPendingSubscribers()},i)},t.prototype._processBars=function(t,e){this._checkBars(t),this._alignBarsTime(t),t.length>0?this._processFullBarset(t,e):this._processEmptyBarset(e),this._processPendingSubscribers()},t.prototype._processEmptyBarset=function(e){this._logMessage("Receiving bars: barset is empty"),e&&e.nextTime?(this._logMessage("Next time received: `{0}`".format(o(1e3*e.nextTime))),this._addGap(e.nextTime),this._leftDate=Math.min(this._leftDate||t._now()/1e3,e.nextTime+1)):e&&e.noData?(this._logMessage("EOD received"),this._endOfData=!0,this._cache.bars.length&&(this._leftDate=this._cache.bars[0].time/1e3)):this._logMessage("nextTime or noData should present in metainfo when empty barset is returned")},t.prototype._processFullBarset=function(t,e){var i=t[0].time,n=t[t.length-1].time;this._logMessage("Receiving bars: total {0} bars in [{1} ... {2}] ".format(t.length,o(i),o(n))),null!==this._leftDate&&i<1e3*this._leftDate&&!l.enabled("cl_feed_return_all_data")&&this._logMessage("Returned more data than needed"),
this._putToCache(t)?null!==this._leftDate&&this._cache.bars.length&&this._leftDate>this._cache.bars[0].time/1e3&&(this._leftDate=this._cache.bars[0].time/1e3):this._logMessage("Incremental update failed. Starting full update. Returned data should be in the requested range.",!0),e&&e.nextTime?console.warn("nextTime should be set when there is no data in the requested period only"):e&&e.noData&&console.warn("noData should be set when there is no data in the requested period and earlier only")},t.prototype._addGap=function(e){var i;this._gaps.find(function(t){return t.from===e})||(i=(this._cache.bars.length?this._cache.bars[0].time:t._now())/1e3,this._gaps.push({from:e,to:i}))},t.prototype._inGapNextTime=function(t){var e=this._gaps.find(function(e){return e.from<t&&e.to>t});return e?e.from:null},t.prototype._getNextSubscriptionId=function(){return this._nextSubscriptionId++},t.prototype._checkBars=function(t,e){var i,n;if(void 0===e&&(e=!1),l.enabled("charting_library_debug_mode"))for(i=1;i<t.length;i++)t[i].time<=t[i-1].time&&(n="Wrong bars time: time {0} of bar {1} should be more than time {2} of bar {3}".format(t[i].time,i,t[i-1].time,i-1),e&&this._dwmAligner&&(n+="\nCheck that you provide DWM bars without time part, i.e. 00:00 GMT"),console.error(n))},t.prototype._putToCache=function(t){if(0===t.length)return!0;if(this._cache.bars.length===t.length&&this._cache.bars[0].time===t[0].time&&this._cache.bars[this._cache.bars.length-1].time===t[t.length-1].time)return this._logMessage("Time range of received data is the same as cached one. Skip the update."),!0;if(0!==this._cache.bars.length&&t[t.length-1].time===this._cache.bars[0].time&&this._cache.bars.splice(0,1),0!==this._cache.bars.length&&t[t.length-1].time>=this._cache.bars[0].time){var e=this._cache.bars[this._cache.bars.length-1].time===t[t.length-1].time;if(this._cache.bars=[],!e)return this._leftDate=null,!1;this._logMessage("Received history up to now instead of incremental update. Return exactly what is requested.")}return this._cache.bars=t.concat(this._cache.bars),this._checkBars(this._cache.bars,!0),!0},t.prototype._putToCacheNewBar=function(t){var e=this._cache.bars.length,i=t.time,n=0===e?NaN:this._cache.bars[e-1].time;0===e||n<i?this._cache.bars.push(t):n===i?this._cache.bars[e-1]=t:console.error("putToCacheNewBar: time violation, previous bar time: "+o(n)+" should be less or equal to new time: "+o(i))},t.prototype._alignBarsTime=function(t){if(this._dwmAligner)for(var e=0;e<t.length;e++)t[e].time=this._dwmAligner.tradingDayToSessionStart(t[e].time)},t._now=function(){return Date.now()+6e4},t}(),h=function(){function t(t,e){this._threads={},this._datafeed=t,this._dwmAlignerCreator=e}return t.prototype.destroy=function(){this._forEachThread(function(t,e){return e.destroy()}),this._threads={},delete this._datafeed},t.prototype.purgeCache=function(){this._forEachThread(function(t,e){return e.destroy()}),this._threads={}},t.prototype.subscribe=function(t,e,i,o,r){var s,a=n(t,e);return this._threads[a]||(this._threads[a]=this._createThread(t,e)),
s=this._threads[a].addSubscription(i,o,r),a+'"'+s},t.prototype.unsubscribe=function(t){var e,i,n=t.split('"');if(2!==n.length)return void console.warn("Wrong guid format");e=n[0],i=parseInt(n[1]),this._threads.hasOwnProperty(e)?this._threads[e].removeSubscription(i):console.warn("Data thread doesnt exist: "+t)},t.prototype._createThread=function(t,e){return new c(this._datafeed,t,e,this._dwmAlignerCreator(e,t.timezone,t.session))},t.prototype._forEachThread=function(t){var e=this;Object.keys(this._threads).forEach(function(i){return t(i,e._threads[i])})},t}()},function(t,e,i){"use strict";(function(e,n){function o(t,i,n,o){this._chartWidgetCollection=t,this._chartApiInstance=i,this._saveChartService=n,this._loadChartService=o,this._proxyWatchListChangedDelegate=null,this._lockDrawingsWatchedValue=null,this._hideDrawingsWatchedValue=null,this._activeChangedChangedDelegate=new e,this._chartWidgetCollection.activeChartWidget.subscribe(function(){this._activeChangedChangedDelegate.fire()}.bind(this)),this._chartWidgets=new WeakMap}var r=i(56).linking,s=i(800),a=i(120).layouts,l=i(42),c=i(84),h=i(38),u=i(69),d=i(75),p=i(5),_=i(237).createNoticeDialog,f=i(70).createConfirmDialog,m=i(357),g=i(805).ThemesApi,y=i(806);o.prototype.subscribe=function(t,e){l.subscribe(t,e)},o.prototype.unsubscribe=function(t,e){l.unsubscribe(t,e)},o.prototype.onContextMenu=function(t){l.subscribe("onContextMenu",function(e){e.callback(t(e.unixtime,e.price))})},o.prototype.onGrayedObjectClicked=function(t){l.subscribe("onGrayedObjectClicked",t)},o.prototype.activeChart=function(){return this._getChartWidgetApi(this._chartWidgetCollection.activeChartWidget.value())},o.prototype._getChartWidgetApi=function(t){var e=this._chartWidgets.get(t);return void 0===e&&(e=new s(t),this._chartWidgets.set(t,e)),e},o.prototype.onActiveChartChanged=function(){return this._activeChangedChangedDelegate},o.prototype.changeSymbol=function(t,e,i){r.interval.setValue(e),r.symbol.setValue(t),i&&this.activeChart().onDataLoaded().subscribe(null,i,!0)},o.prototype.setLayout=function(t){this._chartWidgetCollection.layout.setValue(t)},o.prototype.layout=function(){return this._chartWidgetCollection.layout.value()},o.prototype.layoutName=function(){return this._chartWidgetCollection.metaInfo.name.value()},o.prototype.chartsCount=function(){return a[this.layout()].count},o.prototype.chart=function(t){if(void 0===t&&(t=0),t<0||t>this.chartsCount())throw Error("Incorrect index: "+t);return this._getChartWidgetApi(this._chartWidgetCollection.getAll()[t])},o.prototype.getSymbolInterval=function(t){var e={symbol:r.symbol.value(),interval:r.interval.value()};return t&&t(e),e},o.prototype.saveChart=function(t){var e=this;this._saveChartService.whenReadyToSave(function(){var i=e._saveChartService.saveToJSON();return t&&t(JSON.parse(i.content))})},o.prototype.loadChart=function(t){this._chartApiInstance.purgeCache(),this._chartApiInstance._studyEngine.stopSources(),this._chartWidgetCollection.loadContent(t.json),this._chartWidgetCollection.purgeUnusedWidgets(),
t.extendedData&&(this._chartWidgetCollection.metaInfo.id.setValue(t.extendedData.uid),this._chartWidgetCollection.metaInfo.uid.setValue(t.extendedData.uid),this._chartWidgetCollection.metaInfo.name.setValue(t.extendedData.name)),r.symbol.setValue(this.activeChart().symbol()),l.emit("chart_loaded")},o.prototype.getStudiesList=function(){return this._chartApiInstance.allStudiesMetadata().filter(function(t){return!t.is_hidden_study}).map(function(t){return t.name||t.description})},o.prototype.getSavedCharts=function(t){d.getCharts(t)},o.prototype.loadChartFromServer=function(t){d.loadChart(t)},o.prototype.saveChartToServer=function(t,e,i,n){this._saveChartService.saveChartSilently(t,i,e,n)},o.prototype.removeChartFromServer=function(t,e){d.removeChart(t,e)},o.prototype.getIntervals=function(){var t=[],e=u.getCustomResolutions();return null!==this._chartApiInstance&&(t=this._chartApiInstance.defaultResolutions()),u.mergeResolutions(t,e)},o.prototype.closePopupsAndDialogs=function(){var t,e,n=document.querySelectorAll("._tv-dialog-title-close");for(t=0;t<n.length;t++)n[t].click();e=i.c[221],e&&e.exports.closeAllDialogs(),c.hideAll()},o.prototype.selectLineTool=function(t){m.supportedLineTools[t]&&(t=m.supportedLineTools[t].name,h.tool.value()!==t&&h.tool.setValue(t))},o.prototype.selectedLineTool=function(){var t,e=Object.keys(m.supportedLineTools),i=h.tool.value();for(t=0;t<e.length;++t)if(m.supportedLineTools[e[t]].name===i)return e[t];return""},o.prototype.lockAllDrawingTools=function(){return null===this._lockDrawingsWatchedValue&&(this._lockDrawingsWatchedValue=new n(h.lockDrawings().value()),this._lockDrawingsWatchedValue.subscribe(function(t){h.lockDrawings().setValue(t)}),h.lockDrawings().subscribe(this,function(){this._lockDrawingsWatchedValue.setValue(h.lockDrawings().value())})),this._lockDrawingsWatchedValue},o.prototype.hideAllDrawingTools=function(){return null===this._hideDrawingsWatchedValue&&(this._hideDrawingsWatchedValue=new n(h.hideAllDrawings().value()),this._hideDrawingsWatchedValue.subscribe(function(t){h.hideAllDrawings().setValue(t)}),h.hideAllDrawings().subscribe(this,function(){this._hideDrawingsWatchedValue.setValue(h.hideAllDrawings().value())})),this._hideDrawingsWatchedValue},o.prototype.mainSeriesPriceFormatter=function(){return this._chartWidgetCollection.activeChartWidget.value().model().mainSeries().priceScale().formatter()},o.prototype.showNoticeDialog=function(t){function e(){i&&(i(),i=null)}t=t||{};var i=t.callback;_({title:t.title,content:t.body||""}).then(function(t){t.on("action:ok",e),t.on("afterClose",e),t.open()})},o.prototype.showConfirmDialog=function(t){function e(t){i&&(i(t),i=null)}if(t=t||{},!t.callback)throw Error("callback must be exist");var i=t.callback;f({title:t.title,content:t.body||""}).then(function(t){t.on("action:yes",e.bind(null,!0)),t.on("action:no",e.bind(null,!1)),t.on("afterClose",e.bind(null,!1)),t.open()})},o.prototype.logs=function(){return{getLogHistory:p.getLogHistory,enable:p.loggingOn,disable:p.loggingOff}},o.prototype.watchlist=function(){
return this._watchListApi},o.prototype.setWatchlistManager=function(t){this._chartApiInstance&&(this._watchListApi=new y(t,this._chartApiInstance))},o.prototype.showLoadChartDialog=function(){var t=this._loadChartService;t&&t.showLoadDialog()},o.prototype.showSaveAsChartDialog=function(){var t=this._saveChartService;t&&window.runOrSignIn(function(){t.saveChartAs()})},o.prototype.themes=function(){return new g({chartWidgetCollection:this._chartWidgetCollection})},o.prototype.undoRedoState=function(){return this._chartWidgetCollection.undoHistory.state()},o.prototype.takeScreenshot=function(){this._chartWidgetCollection.takeScreenshot()},t.exports=o}).call(e,i(8),i(15))},function(t,e,i){"use strict";(function(e){function n(t){var e,i,n=Object.keys(g),o=n.length;for(e=0;e<o;++e)if(i=n[e],g[i].name===t)return i;return null}function o(t){return"LineToolRiskRewardLong"===t||"LineToolRiskRewardShort"===t}var r=i(6).ensureNotNull,s=i(801),a=i(189).applyOverridesToStudy,l=i(32),c=i(802).LineDataSourceApi,h=i(803).StudyApi,u=i(804).PaneApi,d=i(3).DefaultProperty,p=i(398).availableIcons,_=i(48),f=i(23).Interval,m=i(33),g=i(357).supportedLineTools,y=i(350).showTooManyStudiesNotice,v=i(12).isNumber,b=function(t){this._chartWidget=t,this._panes=new WeakMap,this._studies=new WeakMap,this._lineDataSources=new WeakMap};b.prototype._getPaneApi=function(t){var e=this._panes.get(t);return void 0===e&&(e=new u(t),this._panes.set(t,e)),e},b.prototype._getStudyApi=function(t){var e=this._studies.get(t);return void 0===e&&(e=new h(t,this._chartWidget.model().model()),this._studies.set(t,e)),e},b.prototype._getLineDataSourceApi=function(t){var e=this._lineDataSources.get(t);return void 0===e&&(e=new c(t,this._chartWidget.model().model(),{apiPointsToDataSource:this._convertUserPointsToDataSource.bind(this),dataSourcePointsToPriced:function(t){var e=this._chartWidget.model().mainSeries().syncModel(),i=this._chartWidget.model().timeScale();return t.map(function(t){var n=i.normalizeBarIndex(t.index);return{price:t.price,time:e.projectTime(n.time_t,n.offset)}})}.bind(this)}),this._lineDataSources.set(t,e)),e},b.prototype._makeSubscriptionFromDelegate=function(t){var e=$.extend({},t);return delete e.fire,e},b.prototype.executeActionById=function(t){this._chartWidget.executeActionById(t)},b.prototype.getCheckableActionState=function(t){return this._chartWidget.getCheckableActionState(t)},b.prototype.refreshMarks=function(){this._chartWidget.refreshMarks()},b.prototype.clearMarks=function(){this._chartWidget.clearMarks()},b.prototype.symbol=function(){return this._chartWidget.getSymbol()},b.prototype.symbolExt=function(){var t=this._chartWidget.model().mainSeries().symbolInfo();return t?{symbol:t.name,full_name:t.full_name,exchange:t.exchange,description:t.description,type:t.type}:null},b.prototype.resolution=function(){return this._chartWidget.model().mainSeries().properties().interval.value()},b.prototype.setSymbol=function(t,i){function n(){o._chartWidget.model().mainSeries().onDataLoaded().unsubscribe(null,n),i&&i()}
if(t!==this.symbol()||e.enabled("same_data_requery")){var o=this;return this._chartWidget.model().mainSeries().onDataLoaded().subscribe(null,n),this._chartWidget.setSymbol(t)}},b.prototype.resetData=function(){this._chartWidget.model().mainSeries().rerequestData()},b.prototype.setResolution=function(t,e){function i(){n._chartWidget.model().mainSeries().onDataLoaded().unsubscribe(null,i),e&&e()}if((t=t.toUpperCase())!==this.resolution()){var n=this;return this._chartWidget.model().mainSeries().onDataLoaded().subscribe(null,i),this._chartWidget.setResolution(t)}},b.prototype.setEntityVisibility=function(t,e){var i,n;console.warn("`setEntityVisibility` is deprecated. Use shape/study API instead"),(i=this._chartWidget.model().model().dataSourceForId(t))&&(n=i.properties())&&n.visible&&n.visible.setValue(e)},b.prototype.getAllStudies=function(){return this._chartWidget.model().model().allStudies().map(function(t){return{id:t.id(),name:t._metaInfo.description}})},b.prototype.getAllShapes=function(){return this._chartWidget.model().model().allLineTools().map(function(t){return{id:t.id(),name:n(t.toolname)}}).filter(function(t){return null!==t.name})},b.prototype.removeAllShapes=function(){this._chartWidget.removeAllDrawingTools()},b.prototype.removeAllStudies=function(){this._chartWidget.removeAllStudies()},b.prototype.removeEntity=function(t){var e=this._chartWidget.model().chartModel().dataSourceForId(t);if(!e)return void console.warn("Can't find a source with id: "+t);this._chartWidget.model().chartModel().removeSource(e,!0)},b.prototype.createStudyTemplate=function(t){return this._chartWidget.model().model().studyTemplate(t.saveInterval)},b.prototype.applyStudyTemplate=function(t){this._chartWidget.model().model().restoreStudyTemplate(t,""+1e3*Math.random())},b.prototype.setVisibleRange=function(t,i){var n,o,r,s;if(void 0===t||!t.from||!t.to||isNaN(t.from)||isNaN(t.to))return void console.warn("Wrong time range: "+JSON.stringify(t)+'. Expected an object with "from" and "to" numeric values.');n=this._chartWidget.model().model(),o=n.mainSeries(),r=[parseInt(t.from),parseInt(t.to)],s=f.isDWM(o.interval())&&!e.enabled("disable_resolution_rebuild")?this._alignPoints(r):r,t.from=s[0],t.to=s[1],this._chartWidget.setVisibleTimeRange(t.from,t.to,i)},b.prototype.getVisibleRange=function(){var t,e=this._chartWidget.model().timeScale(),i=e.visibleBars();return null===i?{from:0,to:0}:(t={from:e.indexToUserTime(i.firstBar()<0?0:i.firstBar()),to:e.indexToUserTime(i.lastBar())},{from:(+t.from||0)/1e3,to:(+t.to||0)/1e3})},b.prototype.getVisiblePriceRange=function(){return this._chartWidget.model().mainSeries()?this._chartWidget.model().mainSeries().priceScale().priceRangeInPrice():null},b.prototype._createTradingPrimitive=function(t,e){function i(){var t=TradingView.CLOSE_PLOT,e=r(n._chartWidget.model().mainSeries().bars().last());return{index:e.index,price:e.value[t]}}var n=this,o=this._chartWidget.model().model(),s=o.paneForSource(o.mainSeries());return(e?o:this._chartWidget.model()).createLineTool(s,i(),t)._adapter},
b.prototype.createOrderLine=function(t){var t=t||{};return this._createTradingPrimitive("LineToolOrder",t.disableUndo)},b.prototype.createPositionLine=function(t){var t=t||{};return this._createTradingPrimitive("LineToolPosition",t.disableUndo)},b.prototype.createExecutionShape=function(t){var t=t||{};return this._createTradingPrimitive("LineToolExecution",t.disableUndo)},b.prototype.createShape=function(t,e){return this.createMultipointShape([t],e)},b.prototype._alignPoints=function(t){var e,i=this._chartWidget.model().model(),n=i.mainSeries(),o=n.symbolInfo(),r=m.get_timezone(o.timezone);return i.timeScale().isEmpty()?t:(e=(new _.Session).init(r,o.session),t.map(function(t){return t?_.alignExchangeTimeToSessionStartAndReturnUTC(e.timezone,e.spec,new Date(1e3*t))/1e3:t}))},b.prototype._convertUserPointsToDataSource=function(t){function i(t,e,i){var n,o,r,s=h.closestIndexLeft(t)||0,a={index:s},l=h.valueAt(s);return t>l&&(n=c.syncModel().distance(l,t),n.success&&(a.index=a.index+n.result)),v(e)?a.price=e:(o=["open","high","low","close"],r=i?o.indexOf(i)+1:1,r<=0&&(r=1),a.price=u.valueAt(s)[r]),a}var n,o,r,s,a,l=this._chartWidget.model().model(),c=l.mainSeries(),h=l.timeScale().points(),u=c.data();if(l.timeScale().isEmpty())return null;for(n=t.map(function(t){return t.time}),o=f.isDWM(c.interval())&&!e.enabled("disable_resolution_rebuild")?this._alignPoints(n):n,r=[],s=0;s<t.length;s++)a=t[s],r.push(i(o[s],a.price,a.channel));return r},b.prototype.createMultipointShape=function(t,e,i){var n,r,s,a,l,c,h,u=e.disableUndo?this._chartWidget.model().model():this._chartWidget.model(),_=this._chartWidget.model().model(),f=_.mainSeries();if(!_.timeScale().isEmpty()){if(n=_.paneForSource(f),r=this._convertUserPointsToDataSource(t),s=g[e.shape]||g.flag,s.onlySelectable)throw Error('Cannot create "'+e.shape+'" shape');if("LineToolPolyline"===s.name)r[0].price===r[r.length-1].price&&r[0].index===r[r.length-1].index||r.push(r[0]);else if("LineToolIcon"===s.name){if(e.icon=e.icon||e.overrides&&e.overrides.icon,!e.hasOwnProperty("icon"))throw Error("icon must be specified in options");if(-1===p.indexOf(e.icon))throw Error("icon value must be valid");e.overrides=e.overrides||{},e.overrides.icon=e.icon}if(a=new d(s.name.toLowerCase()),e.overrides)for(l in e.overrides)a[l]?a[l].setValue(e.overrides[l]):o(s.name)&&-1!==["profitLevel","stopLevel"].indexOf(l)&&a.addProperty(l,e.overrides[l]);if(s.supportsText&&e.text&&a.text.setValue(e.text),c=u.createLineTool(n,r[0],s.name,a),c.pointsCount()!==r.length&&-1!==c.pointsCount())throw Error("Wrong points count for "+e.shape+". Required "+c.pointsCount());for(h=1;h<r.length&&this._chartWidget.model().lineBeingCreated();h++)u.coninueCreatingLine(r[h],{},h<r.length-1);return e.lock&&c.setUserEditEnabled(!1),e.disableSelection&&(c.customization.disableSelection=!0),e.disableSave&&(c.customization.disableSave=!0),e.hasOwnProperty("showInObjectsTree")&&(c.customization.showInObjectsTree=e.showInObjectsTree),e.zOrder&&("top"===e.zOrder?u.bringToFront(c):"bottom"===e.zOrder&&u.sendToBack(c)),c.id()}},
b.prototype.getShapeById=function(t){var e=this._chartWidget.model().model().getLineToolById(t);if(null===e)throw Error("There is no such shape");return this._getLineDataSourceApi(e)},b.prototype.createStudy=function(t,e,i,n,o,c,h){var u,d,p,_,f,m;return h=h||{},h.checkLimit&&!this._chartWidget.model().canCreateStudy()?(y(),null):(t=t.toLowerCase(),u=this._chartWidget.model().chartModel(),d=l.findStudyMetaInfoByDescription(u.studiesMetaData(),t),d=$.extend({},d),delete d.state,d?(p={},n&&(p.inputs=s.getStudyRecordFromArray([t].concat(n),this._chartWidget).inputs),_=u.insertStudy(d,p,e,null,h.priceScale),c&&a(_,c),f=r(u.paneForSource(_)),m=f.priceScaleName(_.priceScale()),u.setPriceScaleVisibility(m,!0),i&&_.setUserEditEnabled(!1),o&&o(_.id()),_.id()):(console.warn("Study `"+t+"` not found."),null))},b.prototype.getStudyById=function(t){var e=this._chartWidget.model().model().getStudyById(t);if(null===e)throw Error("There is no such study");return this._getStudyApi(e)},b.prototype.chartType=function(){return this._chartWidget.model().mainSeries().properties().style.value()},b.prototype.setChartType=function(t){this._chartWidget.model().mainSeries().properties().style.setValue(t)},b.prototype.priceFormatter=function(){return this._chartWidget.model().mainSeries().priceScale().formatter()},b.prototype.onDataLoaded=function(){return this._makeSubscriptionFromDelegate(this._chartWidget.model().mainSeries().onCompleted())},b.prototype.onSymbolChanged=function(){return this._makeSubscriptionFromDelegate(this._chartWidget.model().mainSeries().onSymbolResolved())},b.prototype.onIntervalChanged=function(){return this._makeSubscriptionFromDelegate(this._chartWidget.model().mainSeries().onIntervalChanged())},b.prototype.onVisibleRangeChanged=function(){return this._makeSubscriptionFromDelegate(this._chartWidget.model().timeScale().visibleBarsChanged())},b.prototype.dataReady=function(t){var e=!this._chartWidget.model()||!this._chartWidget.model().mainSeries()||this._chartWidget.model().mainSeries().data().isEmpty();return t&&(e?this.onDataLoaded().subscribe(null,t,!0):t()),!e},b.prototype.crossHairMoved=function(t){this._makeSubscriptionFromDelegate(this._chartWidget.model().chartModel().crossHairMoved()).subscribe(null,t)},b.prototype.setTimezone=function(t){this._chartWidget.setTimezone(t)},b.prototype.getPanes=function(){return this._chartWidget.model().chartModel().panes().map(function(t){return this._getPaneApi(t)},this)},b.prototype.exportData=function(t){var e=this._chartWidget;return new Promise(function(n){i.e(34).then(function(o){var r=i(946).exportData;n(r(e.model().chartModel(),t))}.bind(null,i)).catch(i.oe)})},t.exports=b}).call(e,i(4))},function(t,e,i){"use strict";var n=function(){function t(t){return t.is_price_study}function e(t,e){var i,n=e.slice(0).toLowerCase();if(t){for(i=0;i<t.length;++i)if(t[i].description.toLowerCase()===n||t[i].shortDescription.toLowerCase()===n)return t[i];throw Error("Can't find metainfo for `"+e+"`")}throw Error("There is no studies metainfo at all")}function i(t){
return t.inputs.map(function(t){return{id:t.id,type:t.type,name:t.name}})}function n(n,o){var r,a,l,c,h,u,d,p,_;if(!Array.isArray(n))return r=e(o.model().studiesMetaData(),n),{id:r.id,overlay:t(r)};for(a=n.slice(0),l=a[0],r=e(o.model().studiesMetaData(),l),c=t(r),h=i(r),d=a.splice(1),p=0;p<d.length;++p)u||(u={}),_=s[h[p].type]||s.string,u[h[p].id]=_(d[p]);return{id:r.id,name:l,overlay:c,inputs:u}}function o(t,n,o){function r(t){return t.name.toLowerCase()===a}var s,a,l,c=e(o.model().studiesMetaData(),t),h=i(c),u={};for(s in n)a=s.toLowerCase(),l=h.filter(r),0!==l.length?(l=l[0],u[l.id]=n[s]):console.warn("Uknown input `"+s+"` of `"+t+"`");return{id:c.id,name:t,inputs:u}}var r={},s={bool:function(t){return!!t},integer:function(t){return parseInt(t)},float:function(t){return parseFloat(t)},string:function(t){return t}};return r.getStudyRecordFromArray=function(t,e){return e=e||chartWidget,n(t,e)},r.getStudyRecordFromObject=function(t,e,i){return i=i||chartWidget,o(t,e,i)},r}();t.exports=n},function(t,e,i){"use strict";var n,o,r;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"LineDataSourceApi",function(){return r}),n=i(12),i.n(n),o=["alwaysShowStats","clonable","entryPrice","interval","lastUpdateTime","points","singleChartOnly","snapTo45Degrees","stopPrice","symbol","targetPrice"],r=function(){function t(t,e,i){this._source=t,this._model=e,this._pointsConverter=i}return t.prototype.isSelectionEnabled=function(){return this._source.isSelectionEnabled()},t.prototype.setSelectionEnabled=function(t){this._source.setSelectionEnabled(t)},t.prototype.isSavingEnabled=function(){return this._source.isSavedInChart()},t.prototype.setSavingEnabled=function(t){this._source.setSavingInChartEnabled(t)},t.prototype.isShowInObjectsTreeEnabled=function(){return this._source.showInObjectTree()},t.prototype.setShowInObjectsTreeEnabled=function(t){this._source.setShowInObjectsTreeEnabled(t)},t.prototype.isUserEditEnabled=function(){return this._source.userEditEnabled()},t.prototype.setUserEditEnabled=function(t){this._source.setUserEditEnabled(t)},t.prototype.bringToFront=function(){this._model.bringToFront(this._source)},t.prototype.sendToBack=function(){this._model.sendToBack(this._source)},t.prototype.getProperties=function(){return this._source.properties().state(o,!0)},t.prototype.setProperties=function(t){this._setProps(this._source.properties(),t,"")},t.prototype.getPoints=function(){return this._pointsConverter.dataSourcePointsToPriced(this._source.points())},t.prototype.setPoints=function(t){var e,i,n=this._source.pointsCount(),o=-1===n?this._source.points().length:n;if(o!==t.length)throw Error("Wrong points count. Required="+o);for(e=this._pointsConverter.apiPointsToDataSource(t),i=0;i<e.length;++i)this._source.setPoint(i,e[i])},t.prototype._setProps=function(t,e,i){var o,r,s;for(o in e)e.hasOwnProperty(o)&&(r=0===i.length?o:i+"."+o,t.hasOwnProperty(o)?(s=e[o],Object(n.isHashObject)(s)?this._setProps(t[o],s,r):t[o].setValue(s)):console.warn('Unknown property "'+r+'"'))},t}()},function(t,e,i){"use strict";var n,o,r,s
;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"StudyApi",function(){return s}),n=i(0),i(9),o=i(6),i.n(o),r=i(189),s=function(){function t(t,e){this._study=t,this._model=e}return t.prototype.isUserEditEnabled=function(){return this._study.userEditEnabled()},t.prototype.setUserEditEnabled=function(t){this._study.setUserEditEnabled(t)},t.prototype.getInputsInfo=function(){return this._study.metaInfo().inputs.map(function(t){return n.a({},t,{localizedName:void 0!==t.name?window.t(t.name,{context:"input"}):""})})},t.prototype.getInputValues=function(){var t=this._study.inputs();return Object.keys(t).map(function(e){return{id:e,value:t[e]}})},t.prototype.setInputValues=function(t){var e,i,n,o=this.getInputValues(),r=function(t){void 0!==o.find(function(e){return e.id===t.id})?s._study.properties().inputs[t.id].setValue(t.value):console.warn('There is no such input: "'+t.id+'"')},s=this;for(e=0,i=t;e<i.length;e++)n=i[e],r(n)},t.prototype.mergeUp=function(){this._model.mergeSourceUp(this._study),this._showStudyPriceScale()},t.prototype.mergeDown=function(){this._model.mergeSourceDown(this._study),this._showStudyPriceScale()},t.prototype.unmergeUp=function(){this._model.unmergeSourceUp(this._study),this._showStudyPriceScale()},t.prototype.unmergeDown=function(){this._model.unmergeSourceDown(this._study),this._showStudyPriceScale()},t.prototype.changePriceScale=function(t){var e,i,n,r=Object(o.ensureNotNull)(this._model.paneForSource(this._study)),s=null;switch(t){case"left":s=r.priceScaleByName("left");break;case"right":s=r.priceScaleByName("right");break;case"no-scale":s=r.priceScaleByName("");break;case"as-series":if(e=this._model.mainSeries(),(i=Object(o.ensureNotNull)(this._model.paneForSource(e)))!==r)return void console.warn('BEWARE: Attempt to change price scale to "as-series", but series and study are on different panes');n=i.priceScaleName(i.priceScaleForSource(e)),s=r.priceScaleByName(n);break;default:throw Error("Cannot change study's price scale to unknown price scale (\""+t+'")')}this._model.move(this._study,r,s),this._showStudyPriceScale()},t.prototype.isVisible=function(){return this._study.properties().visible.value()},t.prototype.setVisible=function(t){this._study.properties().visible.setValue(t)},t.prototype.bringToFront=function(){this._model.bringToFront(this._study)},t.prototype.sendToBack=function(){this._model.sendToBack(this._study)},t.prototype.applyOverrides=function(t){Object(r.applyOverridesToStudy)(this._study,t)},t.prototype._showStudyPriceScale=function(){var t=Object(o.ensureNotNull)(this._model.paneForSource(this._study)),e=t.priceScaleName(this._study.priceScale());this._model.setPriceScaleVisibility(e,!0)},t}()},function(t,e,i){"use strict";var n,o;Object.defineProperty(e,"__esModule",{value:!0}),n=function(){function t(t){this._priceScale=t}return t.prototype.getMode=function(){var t=this._priceScale.properties();return t.percentage.value()?2:t.indexedTo100.value()?3:t.log.value()?1:0},t.prototype.setMode=function(t){this._priceScale.setMode({percentage:2===t,log:1===t,
indexedTo100:3===t})},t}(),i.d(e,"PaneApi",function(){return o}),o=function(){function t(t){this._priceScales=new WeakMap,this._pane=t}return t.prototype.hasMainSeries=function(){return this._pane.containsMainSeries()},t.prototype.getLeftPriceScale=function(){return this._getPriceScaleApi(this._pane.leftPriceScale())},t.prototype.getRightPriceScale=function(){return this._getPriceScaleApi(this._pane.rightPriceScale())},t.prototype.getMainSourcePriceScale=function(){var t,e=this._pane.mainDataSource();return null===e?null:(t=this._pane.priceScaleForSource(e),null===t?null:this._getPriceScaleApi(t))},t.prototype._getPriceScaleApi=function(t){var e=this._priceScales.get(t);return void 0===e&&(e=new n(t),this._priceScales.set(t,e)),e},t}()},function(t,e,i){"use strict";var n,o;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"ThemesApi",function(){return o}),n=i(131),o=function(){function t(t){this._opts=t}return t.prototype.isStdTheme=function(){return Object(n.isStdTheme)(Object(n.extractThemeFromModel)(this._getActiveChartModel()))},t.prototype.setStdTheme=function(t){var e=this;return Object(n.getStdTheme)(t).then(function(i){e._opts.chartWidgetCollection.applyTheme(i.content),Object(n.setTheme)(t),Object(n.syncTheme)()})},t.prototype.setStdThemeForLayout=function(t){Object(n.setTheme)(t),Object(n.syncTheme)()},t.prototype.getCurrentThemeName=function(){return Object(n.getCurrentTheme)().name},t.prototype._getActiveChartModel=function(){return this._getActiveChartWidget().model()},t.prototype._getActiveChartWidget=function(){return this._opts.chartWidgetCollection.activeChartWidget.value()},t}()},function(t,e,i){"use strict";(function(e){function n(){var t=window.widgetbar?window.widgetbar.getWidgets("watchlist"):null;return t&&0!==t.length?t[0]:null}function o(){var t=n();return null!=t&&null!=t.widgetObject?t.widgetObject:null}function r(t,i){var r,s,a;this._id=u.guid(),this._delegates={activeListChanged:new e,listAdded:new e,listChanged:new e,listRemoved:new e,listRenamed:new e},r=o(),null===t&&null!==r&&(t=r.getWatchListManager()),this._watchListManager=t,null!==r?this._subscribeFromProxyDelegates():(s=this,a=n(),null!==a?a.widgetStarted().subscribe(null,function(){s._watchListManager=o().getWatchListManager(),s._subscribeFromProxyDelegates()}):this._subscribeFromProxyDelegates()),this._chartApiInstance=i,this._symbolsFormatters={}}function s(t,e,i){null!=e[i]&&(e[i+"_formatted"]=t.format(e[i]))}function a(t,e){s(t,e,"open_price"),s(t,e,"last_price"),s(t,e,"change"),s(t,e,"prev_close_price"),s(t,e,"high_price"),s(t,e,"low_price"),s(t,e,"bid"),s(t,e,"ask")}function l(t){return t&&null!=t.pricescale&&null!=t.minmov&&null!=t.fractional&&null!=t.minmove2}function c(t,e){t.subscribe(e,e.fire)}var h=i(13).PriceFormatter,u=i(22),d=i(5).getLogger("WatchList.Api"),p=i(44),_=p.getQuoteSessionInstance,f=p.getQuoteSessionNoEnsure;r.prototype.getAllLists=function(){return null===this._watchListManager?null:this._watchListManager.getAllLists(!0)},r.prototype.getActiveListId=function(){var t=o()
;return null!==t?t.getActiveListId():null},r.prototype.getList=function(t){return null===this._watchListManager?null:(void 0===t&&(t=this.getActiveListId()),this._watchListManager.getList(t,!0).symbols)},r.prototype.saveList=function(t){return null!==this._watchListManager&&this._watchListManager.saveList(t)},r.prototype.deleteList=function(t){null!==this._watchListManager&&this._watchListManager.deleteList(t)},r.prototype.createList=function(t,e){return null===this._watchListManager?null:this._watchListManager.createList(t,e)},r.prototype.defaultList=function(){return this._chartApiInstance.defaultWatchlistSymbols()},r.prototype.setList=function(t){d.logWarn("`setList` is deprecated. Use `updateList` instead"),this.updateList(null,t)},r.prototype.updateList=function(t,e){null!==this._watchListManager&&(null===t&&(t=this.getActiveListId()),this._watchListManager.updateList(t,e),this._delegates.listChanged.fire())},r.prototype.renameList=function(t,e){null!==this._watchListManager&&this._watchListManager.renameList(t,e)},r.prototype.onListChanged=function(){return this._delegates.listChanged},r.prototype.onActiveListChanged=function(){return this._delegates.activeListChanged},r.prototype.onListAdded=function(){return this._delegates.listAdded},r.prototype.onListRemoved=function(){return this._delegates.listRemoved},r.prototype.onListRenamed=function(){return this._delegates.listRenamed},r.prototype.subscribe=function(t,e){_("full").subscribe(this._id,t,function(i,n){var o,r=i.values;if(!l(r))return void("error"===i.status&&e(i,n));this._symbolsFormatters[t]||(this._symbolsFormatters[t]=new h(r.pricescale,r.minmov,r.fractional,r.minmove2)),o=this._symbolsFormatters[t],a(o,r),a(o,n.values),e(i,n)}.bind(this))},r.prototype.unsubscribe=function(t){var e=f("full");e&&(e.unsubscribe(this._id,t),delete this._symbolsFormatters[t])},r.prototype._subscribeFromProxyDelegates=function(){var t=o();null!==t&&(c(t.onListChanged(),this._delegates.listChanged),c(t.onActiveListChanged(),this._delegates.activeListChanged)),null!==this._watchListManager&&(c(this._watchListManager.onListAdded(),this._delegates.listAdded),c(this._watchListManager.onListRemoved(),this._delegates.listRemoved),c(this._watchListManager.onListRenamed(),this._delegates.listRenamed))},t.exports=r}).call(e,i(8))},function(t,e,i){"use strict";var n,o,r,s=i(21);i(216),n=i(808).pivotPointsStandardStudyItem,o=i(809).spreadStudyItem,r=i(810).ratioStudyItem,JSServer.studyLibrary=JSServer.studyLibrary.concat([{name:"Compare",metainfo:{_metainfoVersion:15,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!0,defaults:{styles:{compare:{linestyle:0,linewidth:2,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#800080"}},precision:4,inputs:{source:"close",symbol:""}},plots:[{id:"compare",type:"line"}],styles:{compare:{title:"Plot",histogramBase:0}},description:"Compare",shortDescription:"Compare",is_price_study:!0,inputs:[{defval:"close",id:"source",name:"Source",options:["open","high","low","close","hl2","hlc3","ohlc4"],type:"text"},{id:"symbol",name:"Symbol",
type:"symbol",isHidden:!0}],id:"Compare@tv-basicstudies-1"},constructor:function(){this.init=function(t,e){this._context=t,this._context.new_sym(e(1),s.Std.period(this._context),s.Std.period(this._context))},this.main=function(t,e){var i,n,o,r,a;return this._context=t,i=this._context.new_unlimited_var(this._context.symbol.time),this._context.select_sym(1),n=this._context.new_unlimited_var(this._context.symbol.time),o=s.Std[e(0)](this._context),r=this._context.new_unlimited_var(o),this._context.select_sym(0),a=r.adopt(n,i,0),[a]}}},{name:"Overlay",metainfo:{_metainfoVersion:15,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!0,defaults:{styles:{},precision:4,inputs:{symbol:""}},plots:[{id:"open",type:"line"},{id:"high",type:"line"},{id:"low",type:"line"},{id:"close",type:"line"}],styles:{open:{title:"Open"},high:{title:"High"},low:{title:"Low"},close:{title:"Close"}},description:"Overlay",shortDescription:"Overlay",is_price_study:!1,inputs:[{id:"symbol",name:"symbol",defval:"",type:"symbol",isHidden:!0}],id:"Overlay@tv-basicstudies-1"},constructor:function(){this.init=function(t,e){this._context=t,this._context.new_sym(e(0),s.Std.period(this._context),s.Std.period(this._context))},this.main=function(t,e){var i,n,o,r,a,l;return this._context=t,i=this._context.new_unlimited_var(this._context.symbol.time),this._context.select_sym(1),n=this._context.new_unlimited_var(this._context.symbol.time),o=this._context.new_unlimited_var(s.Std.open(this._context)),r=this._context.new_unlimited_var(s.Std.high(this._context)),a=this._context.new_unlimited_var(s.Std.low(this._context)),l=this._context.new_unlimited_var(s.Std.close(this._context)),this._context.select_sym(0),[o.adopt(n,i,1),r.adopt(n,i,1),a.adopt(n,i,1),l.adopt(n,i,1)]}}},{name:"Volume",metainfo:{_metainfoVersion:15,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,transparency:65,defaults:{styles:{vol:{linestyle:0,linewidth:1,plottype:5,trackPrice:!1,transparency:65,visible:!0,color:"#000080"},vol_ma:{linestyle:0,linewidth:1,plottype:4,trackPrice:!1,transparency:65,visible:!0,color:"#0496FF"}},precision:0,palettes:{volumePalette:{colors:{0:{color:"#eb4d5c",width:1,style:0},1:{color:"#53b987",width:1,style:0}}}},inputs:{showMA:!1,maLength:20}},plots:[{id:"vol",type:"line"},{id:"volumePalette",palette:"volumePalette",target:"vol",type:"colorer"},{id:"vol_ma",type:"line"}],styles:{vol:{title:"Volume",histogramBase:0},vol_ma:{title:"Volume MA",histogramBase:0}},description:"Volume",shortDescription:"Volume",is_price_study:!1,palettes:{volumePalette:{colors:{0:{name:"Falling"},1:{name:"Growing"}}}},inputs:[{id:"showMA",name:"show MA",defval:!1,type:"bool"},{id:"maLength",name:"MA Length",defval:20,type:"integer",min:1,max:2e3}],id:"Volume@tv-basicstudies-1"},constructor:function(){this.f_0=function(t,e){return s.Std.gt(t,e)?0:1},this.f_1=function(t,e){return t?e:s.Std.na()},this.main=function(t,e){var i,n,o,r,a,l,c;return this._context=t,this._input=e,i=this._input(0),n=s.Std.volume(this._context),o=this.f_0(s.Std.open(this._context),s.Std.close(this._context)),
r=s.Std.volume(this._context),a=this._context.new_var(r),l=s.Std.sma(a,this._input(1),this._context),c=this.f_1(i,l),[n,o,c]}}},{name:"ZigZag",metainfo:{_metainfoVersion:23,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:2,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#008000"}},precision:4,inputs:{in_0:5,in_1:10}},plots:[{id:"plot_0",type:"line"},{id:"plot_1",target:"plot_0",type:"dataoffset"}],styles:{plot_0:{title:"Plot",histogramBase:0,joinPoints:!1}},description:"Zig Zag",shortDescription:"ZigZag",is_price_study:!0,classId:"ScriptWithDataOffset",inputs:[{id:"in_0",name:"deviation",defval:5,type:"integer",min:1,max:100},{id:"in_1",name:"depth",defval:10,type:"integer",min:2,max:1e3}],id:"ZigZag@tv-basicstudies-1"},constructor:function(){this.main=function(t,e){var i,n,o,r,a,l,c,h;return this._context=t,this._input=e,i=this._input(0),n=this._input(1),o=i/100,r=n/2,a=s.Std.zigzag(o,r,this._context),l=s.Std.zigzagbars(o,r,this._context),c=a,h=l,[c,h]}}},{name:"Sessions",metainfo:{_metainfoVersion:44,defaults:{graphics:{vertlines:{sessBreaks:{color:"#4985e7",style:2,visible:!1,width:1}}},linkedToSeries:!0,precision:4},description:"Sessions",graphics:{vertlines:{sessBreaks:{name:"Session Break"}}},id:"Sessions@tv-basicstudies-1",inputs:[],is_hidden_study:!0,is_price_study:!0,name:"Sessions@tv-basicstudies",palettes:{},plots:[],shortDescription:"Sessions"},constructor:function(){function t(t,e){return{id:t,time:t,extendBottom:!0,extendTop:!0}}this.init=function(){this._times=[]},this._getVerticalLineData=function(e){return s.Std.selectSessionBreaks(e,this._times).map(t)},this.main=function(t,e){var i,n,o;return s.Std.isdwm(t)?null:(i=s.Std.time(t),isNaN(i)?null:(n=this._times.length,0!==n&&this._times[n-1]===i||this._times.push(i),t.symbol.isLastBar&&t.symbol.isNewBar?(o=this._getVerticalLineData(t),0===o.length?null:{nonseries:!0,type:"study_graphics",data:{graphicsCmds:{create:{vertlines:[{styleId:"sessBreaks",data:o}]},erase:[{action:"all"}]}}}):null))}}},{name:"SuperTrend",metainfo:{_metainfoVersion:39,isTVScript:!1,isTVScriptStub:!1,is_hidden_study:!1,defaults:{styles:{plot_0:{linestyle:0,linewidth:3,plottype:0,trackPrice:!1,transparency:35,visible:!0,color:"#000080"},plot_2:{linestyle:0,linewidth:3,plottype:"shape_arrow_up",trackPrice:!1,location:"BelowBar",transparency:35,visible:!0,color:"#00FF00"},plot_3:{linestyle:0,linewidth:3,plottype:"shape_arrow_down",trackPrice:!1,location:"AboveBar",transparency:35,visible:!0,color:"#FF0000"}},precision:4,palettes:{palette_0:{colors:{0:{color:"#008000",width:3,style:0},1:{color:"#800000",width:3,style:0}}}},inputs:{in_0:10,in_1:3}},plots:[{id:"plot_0",type:"line"},{id:"plot_1",palette:"palette_0",target:"plot_0",type:"colorer"},{id:"plot_2",type:"shapes"},{id:"plot_3",type:"shapes"}],styles:{plot_0:{title:"SuperTrend",histogramBase:0,joinPoints:!1,isHidden:!1},plot_2:{title:"Up Arrow",histogramBase:0,joinPoints:!1,isHidden:!1},plot_3:{title:"Down Arrow",histogramBase:0,joinPoints:!1,isHidden:!1}},
description:"SuperTrend",shortDescription:"SuperTrend",is_price_study:!0,palettes:{palette_0:{colors:{0:{name:"Color 0"},1:{name:"Color 1"}},valToIndex:{0:0,1:1}}},inputs:[{id:"in_0",name:"Length",defval:10,type:"integer",min:1,max:100},{id:"in_1",name:"Factor",defval:3,type:"float",min:1,max:100}],id:"SuperTrend@tv-basicstudies-1",scriptIdPart:"",name:"SuperTrend",isCustomIndicator:!0},constructor:function(){this.f_0=function(){var t,e,i,n,o,r=this._input(0),a=this._input(1),l=s.Std.atr(r,this._context);return r=s.Std.hl2(this._context)+l*a,l=s.Std.hl2(this._context)-l*a,t=this._context.new_var(s.Std.close(this._context)),a=this._context.new_var(),e=s.Std.max(l,a.get(1)),a.set(s.Std.gt(t.get(1),a.get(1))?e:l),l=this._context.new_var(),e=s.Std.min(r,l.get(1)),l.set(s.Std.lt(t.get(1),l.get(1))?e:r),r=this._context.new_var(),t=s.Std.nz(r.get(1),1),t=s.Std.lt(s.Std.close(this._context),a.get(1))?-1:t,r.set(s.Std.gt(s.Std.close(this._context),l.get(1))?1:t),a=s.Std.eq(r.get(0),1)?a.get(0):l.get(0),i=s.Std.eq(r.get(0),1)?0:1,n=1===r.get(0)&&-1===r.get(1),o=-1===r.get(0)&&1===r.get(1),[a,i,n,o]},this.main=function(t,e){this._context=t,this._input=e;var i=this.f_0();return[i[0],i[1],i[2],i[3]]}}},n,o,r])},function(t,e,i){"use strict";function n(t){switch(t){case"Traditional":return 0;case"Fibonacci":return 1;case"Woodie":return 2;case"Classic":return 3;case"DeMark":return 4;case"Camarilla":return 5;default:throw Error("Unknown kind "+t)}}function o(t,e){t.setUTCMonth(t.getUTCMonth()+e)}function r(t,e){return new Date(e,t,0).getDate()}function s(t,e){var i,n,s;return u.Std.ismonthly(t)?(i=new Date(e),n=i.getUTCDay(),s=r(i.getUTCMonth(),i.getUTCFullYear()),n<s?(o(i,u.Std.interval(t)),i=u.Std.add_days_considering_dst("Etc/UTC",i,1-i.getUTCDay())):(i=u.Std.add_days_considering_dst("Etc/UTC",i,1),o(i,u.Std.interval(t))),i.valueOf()):e+d.Interval.parse(t.symbol.resolution).inMilliseconds(e)}function a(t,e,i,n,o,r,s,a){var l,c=new p,h=NaN,d=i-n;switch(a){case 0:h=(i+n+o)/3,c.p=h,c.r1=2*h-n,c.s1=2*h-i,c.r2=h+(i-n),c.s2=h-(i-n),c.r3=2*h+(i-2*n),c.s3=2*h-(2*i-n),c.r4=3*h+(i-3*n),c.s4=3*h-(3*i-n),c.r5=4*h+(i-4*n),c.s5=4*h-(4*i-n);break;case 1:h=(i+n+o)/3,c.p=h,c.r1=h+.382*d,c.s1=h-.382*d,c.r2=h+.618*d,c.s2=h-.618*d,c.r3=h+d,c.s3=h-d;break;case 2:h=(i+n+2*t)/4,c.p=h,c.r1=2*h-n,c.s1=2*h-i,c.r2=h+d,c.s2=h-d,c.r3=i+2*(h-n),c.s3=n-2*(i-h),c.r4=c.r3+d,c.s4=c.s3-d;break;case 3:h=(i+n+o)/3,c.p=h,c.r1=2*h-n,c.s1=2*h-i,c.r2=h+d,c.s2=h-d,c.r3=h+2*d,c.s3=h-2*d,c.r4=h+3*d,c.s4=h-3*d;break;case 4:l=NaN,l=u.Std.equal(e,o)?i+n+2*o:u.Std.greater(o,e)?2*i+n+o:2*n+i+o,h=l/4,c.p=h,c.r1=l/2-n,c.s1=l/2-i;break;case 5:h=(i+n+o)/3,c.p=h,c.r1=o+1.1*d/12,c.s1=o-1.1*d/12,c.r2=o+1.1*d/6,c.s2=o-1.1*d/6,c.r3=o+1.1*d/4,c.s3=o-1.1*d/4,c.r4=o+1.1*d/2,c.s4=o-1.1*d/2;break;default:throw Error("Unknown kind")}return c.startIndex__t=r,c.endIndex__t=s,c}function l(t,e){return(!u.Std.isdaily(t)||"Daily"!==e)&&((!u.Std.isweekly(t)||"Daily"!==e&&"Weekly"!==e)&&(!u.Std.ismonthly(t)||"Daily"!==e&&"Weekly"!==e&&"Monthly"!==e))}function c(t){
if(u.Std.isweekly(t)||u.Std.ismonthly(t))return"12M";if(u.Std.isdaily(t))return"1M";if(u.Std.isintraday(t)){var e=u.Std.interval(t);return e>=1&&e<=15?"1D":"1W"}throw Error("Unexpected resolution type: "+t.symbol.resolution)}function h(t,e){switch(e){case"Auto":return c(t);case"Daily":return"1D";case"Weekly":return"1W";case"Monthly":return"1M";case"Yearly":return"12M";default:throw Error("No such pivTimeFrame: "+e)}}var u,d,p,_,f,m;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"pivotPointsStandardStudyItem",function(){return m}),u=i(21),i.n(u),d=i(23),p=function(){function t(){this.p=NaN,this.r1=NaN,this.s1=NaN,this.r2=NaN,this.s2=NaN,this.r3=NaN,this.s3=NaN,this.r4=NaN,this.s4=NaN,this.r5=NaN,this.s5=NaN,this.startIndex__t=NaN,this.endIndex__t=NaN}return t}(),_=function(){function t(){this.pivots=[]}return t}(),f=function(){function t(){this._secondaryRes="1D",this._firstMainSeriesBarTime=NaN}return t.prototype.init=function(t,e){var i,o=e(0),r=e(1),s=e(2),a=e(3);this._data=new _,this._firstMainSeriesBarTime=NaN,this._kindPP=n(o),this._showHistoricalPivots=r,this._historicalPivotsToKeep=a,this._pivTimeFrame=s,this._isValidResolution=l(t,this._pivTimeFrame),this._isValidResolution||u.Std.error("You cannot see this pivot timeframe on this resolution"),this._isValidResolution&&(this._secondaryRes=h(t,this._pivTimeFrame)),i=""===t.symbol.resolution?Math.max(30,2*parseInt(t.symbol.interval))+"":t.symbol.period,t.new_sym(t.symbol.tickerid,this._secondaryRes,this._secondaryRes,i)},t.prototype.main=function(t){var e,i,n,o,r,l,c,h,d,p,_,f,m,g,y;return this._isValidResolution?t.symbol.time?(isNaN(this._firstMainSeriesBarTime)&&(this._firstMainSeriesBarTime=t.symbol.time,this._removeUnusedPivots()),t.symbol.isLastBar&&t.symbol.isNewBar?this._createResponse():null):(t.select_sym(1),e=t.new_var(u.Std.open(t)),i=t.new_var(u.Std.high(t)),n=t.new_var(u.Std.low(t)),o=t.new_var(u.Std.close(t)),r=t.new_var(u.Std.time(t)),l=this._data,c=e.get(0),h=r.get(0),d=e.get(1),p=i.get(1),_=n.get(1),f=o.get(1),m=t.symbol.isLastBar,0!==l.pivots.length&&t.symbol.isNewBar&&(g=l.pivots[l.pivots.length-1],g.endIndex__t!==h&&(g.endIndex__t=h)),0!==t.symbol.index&&t.symbol.isNewBar?(y=a(c,d,p,_,f,h,s(t,h),this._kindPP),t.select_sym(0),this._showHistoricalPivots||(l.pivots=[]),l.pivots.push(y),l.pivots.length>this._historicalPivotsToKeep&&l.pivots.shift(),m?this._createResponse():null):(t.select_sym(0),null)):null},t.prototype._createResponse=function(){return 0===this._data.pivots.length?null:{nonseries:!0,type:"non_series_data",data:{data:this._data}}},t.prototype._removeUnusedPivots=function(){var t=this,e=Math.max(this._data.pivots.findIndex(function(e){return e.startIndex__t>t._firstMainSeriesBarTime})-1,0);e>0&&this._data.pivots.splice(0,e)},t}(),m={name:"Pivot Points Standard",metainfo:{_metainfoVersion:44,defaults:{inputs:{kind:"Traditional",lookBack:15,pivTimeFrame:"Auto",showHistoricalPivots:!0},precision:"4"},description:"Pivot Points Standard",id:"PivotPointsStandard@tv-basicstudies-80",inputs:[{defval:"Traditional",id:"kind",
name:"Type",options:["Traditional","Fibonacci","Woodie","Classic","DeMark","Camarilla"],type:"text"},{defval:!0,id:"showHistoricalPivots",name:"Show historical pivots",type:"bool"},{defval:"Auto",id:"pivTimeFrame",name:"Pivots Timeframe",options:["Auto","Daily","Weekly","Monthly","Yearly"],type:"text"},{defval:15,id:"lookBack",max:5e3,min:2,name:"Number of Pivots Back",type:"integer"}],is_price_study:!0,linkedToSeries:!0,shortDescription:"Pivots"},constructor:f}},function(t,e,i){"use strict";var n,o,r,s;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"spreadStudyItem",function(){return s}),n=i(0),o=i(358),r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.c(e,t),e.prototype._doCalculation=function(t,e,i,n){return t*e-i*n},e}(o.a),s={name:"Spread",metainfo:{_metainfoVersion:15,defaults:o.b,plots:o.d,styles:o.e,description:"Spread",shortDescription:"Spread",is_price_study:!1,inputs:o.c,id:"Spread@tv-basicstudies-1"},constructor:r}},function(t,e,i){"use strict";var n,o,r,s;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"ratioStudyItem",function(){return s}),n=i(0),o=i(358),r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.c(e,t),e.prototype._doCalculation=function(t,e,i,n){return t*e/(i*n)},e}(o.a),s={name:"Ratio",metainfo:{_metainfoVersion:15,defaults:o.b,plots:o.d,styles:o.e,description:"Ratio",shortDescription:"Ratio",is_price_study:!1,inputs:o.c,id:"Ratio@tv-basicstudies-1"},constructor:r}}],[533]);