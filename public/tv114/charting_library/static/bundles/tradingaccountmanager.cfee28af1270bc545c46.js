webpackJsonp([40],{1067:function(t,e){},1068:function(t,e,i){"use strict";function n(t,e,i,n){var s={textPrevPrice:i?Object(r.splitThousands)(t.format(i)):"",textPrice:e?Object(r.splitThousands)(t.format(e)):""};return!Object(u.isNumber)(i)&&n&&(i=e),Object(u.isNumber)(e)&&Object(u.isNumber)(i)&&(s.elem=l.PriceColorer.domDifference(s.textPrice,s.textPrevPrice,e-i,"tv-data-table__red-text","tv-data-table__green-text")),s}function s(t,e){var i,n,s;for(void 0===e&&(e=g),i=0,n=y;i<n.length;i++)if(s=n[i],s.name===t)return s;return e}var r,o,a,l,c,u,d,h,p,_,f,b,v,g,y;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"formatters",function(){return y}),e.tableFormatterByName=s,r=i(150),o=i(56),a=i(245),l=i(1135),c=i(82),u=i(12),i.n(u),d=i(58),i(392),h=i(36),p=i(403),f=new a.DateTimeFormatter,b=new d.PercentageFormatter,_={},_[3]="tv-data-table__grey-text",_[6]="tv-data-table__blue-text",_[5]="tv-data-table__red-text",_[2]="tv-data-table__green-text",_[1]="tv-data-table__red-green-text",_[4]=void 0,v=_,g={name:"default",format:function(t){return t.value+""}},y=[{name:"symbol",format:function(t){var e=t.value,i=t.row,n=t.$container;return""!==i.symbol&&n.on("click",function(){return o.linking.symbol.setValue(i.symbol)}),e}},{name:"side",format:function(t){var e=t.value,i=t.$container,n=Object(c.sideToText)(e);return 1===e?i.addClass("tv-data-table__blue-text"):i.addClass("tv-data-table__light-red-text"),n}},{name:"type",format:function(t){var e=t.value;return Object(c.orderTypeToText)(e)}},{name:"formatPrice",format:function(t){var e=t.value,i=t.priceFormatter,s=t.prevValue,r=n(i,e,s);return r.elem||Object(h.forceLTRStr)(r.textPrice)}},{name:"formatPriceForexSup",format:function(t){var e=t.value,i=t.priceFormatter,s=t.prevValue,r=i.hasForexAdditionalPrecision(),o=n(i,e,s,r);return e&&o.elem&&r&&o.elem.last().lastCharSup(),o.elem||Object(h.forceLTRStr)(o.textPrice)}},{name:"status",format:function(t){var e=t.value,i=t.$container,n=Object(c.orderStatusToText)(e),s=v[e];return s&&i.addClass(s),n}},{name:"date",format:function(t){var e=t.value;return e?f.format(new Date(e)):""}},{name:"localDate",format:function(t){var e=t.value;return e?f.formatLocal(new Date(e)):""}},{name:"unixTimeAgo",format:function(t){var e=t.value,i=$(document.createElement("span"));return Object(p.agoDateFormatter)(i,new Date(1e3*e)),i}},{name:"fixed",format:function(t){var e=t.value;return isNaN(e)?"":Object(h.forceLTRStr)(Math.abs(e||0)<.001?"0.00":Object(r.splitThousands)((e||0).toFixed(2)))}},{name:"pips",format:function(t){var e=t.value;return Object(h.forceLTRStr)(Object(u.isNumber)(e)?Math.abs(e)<.01?"0.0":Object(r.splitThousands)(e.toFixed(1)):"")}},{name:"integerSeparated",format:function(t){var e=t.value;return Object(h.forceLTRStr)(Object(u.isNumber)(e)?Object(r.splitThousands)(e.toFixed(0)):"")}},{name:"formatQuantity",format:function(t){var e=t.value;return Object(h.forceLTRStr)(Object(u.isNumber)(e)?Object(r.splitThousands)(e):"")}},{name:"profit",format:function(t){var e,i,n,s=t.value,o=t.$container
;return Object(u.isNumber)(s)?(e=s&&Math.round(100*s)/100,i=e>0?"+":"",n=e<0?"tv-data-table__red-text":e>0?"tv-data-table__green-text":"",o.addClass(n),Object(h.forceLTRStr)(i+Object(r.splitThousands)((e||0).toFixed(2)))):""}},{name:"percentage",format:function(t){var e=t.value;return Object(h.forceLTRStr)(Object(u.isNumber)(e)?b.format(e):"")}}]},1069:function(t,e,i){"use strict";function n(t){var e,i;if(t&&t.__esModule)return t;if(e={},null!=t)for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r,o,a,l,c,u;Object.defineProperty(e,"__esModule",{value:!0}),e.DropdownView=void 0,r=function(){function t(t,e){var i,n;for(i=0;i<e.length;i++)n=e[i],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),i(1070),o=i(225),a=i(147),l=i(151),c=n(l),u=e.DropdownView=function(){function t(e){var i=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};s(this,t),this.$el=e,this.$wrap=n.$wrap||e.find(".tv-dropdown-behavior__button"),this.$body=n.$body||e.find(".tv-dropdown-behavior__body"),this.notCloseWithCtrl=!!n.notCloseWithCtrl&&n.notCloseWithCtrl,this.closeWithEsc=void 0===n.closeWithEsc||n.closeWithEsc,this.closeWithEsc&&this.$el.attr("tabIndex",0),(e.data("scroll")||n.scroll)&&(this.$scroll=this.$body.find(".tv-dropdown-behavior__scroll"),this.$inScroll=this.$scroll.find(".tv-dropdown-behavior__inscroll"),this.scroll=new a.SidebarCustomScroll(this.$scroll,this.$inScroll,{showTopShadow:!1,showBottomShadow:!1}),this.$scrollBar=this.scroll.getScrollBar(),this.$scrollBar&&this.$scrollBar.on("mousedown.tv-dropdown-view-scroll",function(){i.offClickOutside(),$(document).on("mouseup.tv-dropdown-view-scroll",function(){i.onClickOutside(),$(document).off("mouseup.tv-dropdown-view-scroll")})})),(e.data("adaptBody")||n.adaptBody)&&(this._adaptBody=!0),this._fitScreen=e.data("fitScreen")||n.fitScreen,this.$wrap.add(e.find(".js-dropdown-toggle")).on("click",function(t){$(t.currentTarget).hasClass("js-prevent-dropdown")||i.toggle()})}return r(t,[{key:"toggle",value:function(){this.opened?this.close(!0):this.open()}},{key:"open",value:function(){var t=this;this.opened||this.disabled||this.readonly||(this.$el.trigger("beforeOpenMenu"),this.$body.removeClass("i-hidden").addClass("i-opened"),this.$wrap.addClass("i-dropped"),this.$el.addClass("i-opened"),"horz"===this._fitScreen&&this.fitHorizontally(),this._adaptBody&&this.adaptBody(),this.onClickOutside(),this.$el.trigger("updateScroll"),this.$el.trigger("afterOpenMenu"),this.opened=!0,this.closeWithEsc&&this.$el.on("keypress keyup",function(e){e.keyCode===c.ESC&&t.close(!0)}))}},{key:"onClickOutside",value:function(){var t=this;setTimeout(function(){t.$body.on("clickoutside",function(){t.close(!0)})},0)}},{key:"offClickOutside",value:function(){this.$body.off("clickoutside")}},{key:"close",value:function(){
var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];!this.opened||this.disabled||this.readonly||!t&&this.notCloseWithCtrl&&(window.event.ctrlKey||window.event.metaKey)||(this.offClickOutside(),this.$wrap.removeClass("i-dropped"),this.$el.trigger("beforeCloseMenu"),this.$body.removeClass("i-opened").addClass("i-hidden"),this.$el.removeClass("i-opened"),this.closeWithEsc&&this.$el.off("keypress keyup"),this.opened=!1,this.$el.trigger("afterCloseMenu"))}},{key:"isOpened",value:function(){return this.opened}},{key:"updateScroll",value:function(){this.scroll&&(this.scroll.updateScrollBar(),this.scroll.scrollToStart())}},{key:"enable",value:function(){this.$wrap.removeClass("i-disabled"),this.disabled=!1}},{key:"disable",value:function(){this.$wrap.addClass("i-disabled"),this.disabled=!0}},{key:"setReadonly",value:function(t){this.readonly=t}},{key:"adaptBody",value:function(){function t(){o.height("auto")}var e,i,n,s,r=15,o=this.$body,a=this.$wrap.get(0).getBoundingClientRect(),l=window.innerHeight,c=this.$inScroll.outerHeight(!0),u=parseFloat(o.css("padding-top"));c+=u,e=parseFloat(o.css("padding-bottom")),c+=e,i=a.top+c+r<=l,n=c+r<=a.bottom,s=void 0,i?(s=0-u,t()):n?(s=-c+e,t()):(s=-a.top+r,l<=c&&o.height(l-2*r)),o.css("top",s)}},{key:"fitHorizontally",value:function(){var t,e,i,n;this.$body.css("marginLeft",0),t=document.body.getBoundingClientRect(),e=parseFloat($(document.body).css("paddingRight")),i=this.$body.offset(),i.right=i.left+this.$body.outerWidth(),(n=Math.max(Math.min(0,t.right-e-i.right),t.left-i.left))&&this.$body.css("marginLeft",n)}},{key:"destroy",value:function(){this.scroll&&this.scroll.destroy(),this.offClickOutside(),this.$el.find(".js-dropdown-toggle").off("click"),this.$wrap.off("click")}}]),t}(),$.fn.tvDropdown=(0,o.createTvBlockWithInstance)("tv-dropdown",function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new u(t,e)})},1070:function(t,e){},1086:function(t,e,i){"use strict";var n,s,r;Object.defineProperty(e,"__esModule",{value:!0}),n=i(0),s=function(){function t(t,e){this._active=!1,this._$content=t,this._id=e.id,this._name=e.name;var i=e.headerCounter?'<div class="counter"><div class="counter__text">'+e.name+'</div><div class="counter__count">0</div></div>':"<span>"+e.name+"</span>";this._$header=$(i),this._countElement=this._$header.find(".counter__count")[0]}return t.prototype.setActive=function(t){this._active!==t&&(this._active=t,this._onActiveChanged(t))},t.prototype.isActive=function(){return this._active},t.prototype.reset=function(){},t.prototype.destroy=function(){},t.prototype.updateVisibleContent=function(){},t.prototype.header=function(){return this._$header},t.prototype.content=function(){return this._$content},t.prototype.name=function(){return this._name},t.prototype.id=function(){return this._id||this._name},t.prototype.contextItems=function(t){return[]},t.prototype.topline=function(){return null},t.prototype._setCount=function(t){this._countElement&&(this._countElement.innerHTML=t+"")},t.prototype._onActiveChanged=function(t){},t}(),
i.d(e,"TablePage",function(){return r}),r=function(t){function e(e,i,n){var s=t.call(this,e,i)||this;return s._tableControllers=n,s}return n.c(e,t),e.prototype.reset=function(){this._tableControllers.forEach(function(t){return t.reset()}),t.prototype.reset.call(this)},e.prototype.destroy=function(){this._tableControllers.forEach(function(t){return t.destroy()}),t.prototype.destroy.call(this)},e.prototype.updateVisibleContent=function(){this._tableControllers.forEach(function(t){return t.table().updateVisibleContent()}),t.prototype.updateVisibleContent.call(this)},e.prototype._onActiveChanged=function(t){this._tableControllers.forEach(function(e){return e.setActive(t)})},e}(s)},1087:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){function n(t,e){return t-e>D}function s(t,e){return t<e?1:t>e?-1:0}function r(t){return t||""}var o,a,l,c,u,d,h,p,_,f,b,v,g,y,m,w,C,S,T,O,j,P,x,D,k,A;i.d(e,"Table",function(){return A}),o=i(14),i.n(o),a=i(97),i.n(a),l=i(5),c=i(13),u=i(1270),d=i(26),i.n(d),h=i(8),p=i.n(h),_=i(154),i.n(_),f=i(1069),i.n(f),b=i(1272),i.n(b),v=i(224),i.n(v),g=i(6),i.n(g),y=i(36),m=Object(l.getLogger)("Table"),w=5e3,C=20,S='<div class="tv-dropdown tv-dropdown-behavior tv-data-table__dropdown-button-wrap js-init-switcher"><div class="tv-dropdown-behavior__button apply-common-tooltip js-dropdown-toggle" title="'+$.t("Column setup")+'">'+b+"</div></div>",T='<div class="tv-dropdown__body tv-dropdown-behavior__body tv-data-table__dropdown-wrap i-hidden"></div>',O='<div class="tv-dropdown-behavior__scroll"><div class="tv-dropdown-behavior__inscroll">{{#columns}}{{^isAlwaysVisible}}<div class="tv-dropdown-behavior__item js-column-item"><label data-field="{{property}}" class="tv-control-select__option-wrap js-fields-item"><label class="tv-control-checkbox"><input type="checkbox" name="{{property}}" class="js-field-checkbox tv-control-checkbox__input i-inited" {{#isVisible}}checked{{/isVisible}}><span class="tv-control-checkbox__box ">'+v+'</span><span class="tv-control-checkbox__ripple js-ripple"></span></label><span class="tv-control-checkbox__label tv-data-table__dropdown-label--breakable js-checkbox-label">{{label}}</span></label></div>{{/isAlwaysVisible}}{{/columns}}</div></div>',j='<table class="tv-data-table {{className}}"><thead class="tv-data-table__thead"><tr class="tv-data-table__stroke">{{#columns}}<th class="tv-data-table__cell tv-data-table__cell--bold {{className}}"><span class="tv-data-table__cell-text{{^notSortable}} tv-data-table__sortable{{/notSortable}}{{#help}} apply-common-tooltip{{/help}}{{#htmlHelp}} common-tooltip-html{{/htmlHelp}}" {{#help}}title="{{help}}"{{/help}}>{{{label}}}</span></th>{{/columns}}</tr></thead>{{#bodies}}<tbody class="tv-data-table__tbody {{className}}">{{#strokes}}<tr class="tv-data-table__stroke">{{#cells}}<td class="tv-data-table__cell {{className}}"{{#colspan}}colspan="{{colspan}}"{{/colspan}}>{{#contain}}{{{contain}}}{{/contain}}</td>{{/cells}}</tr>{{/strokes}}</tbody>{{/bodies}}</table>',
P='<tr class="tv-data-table__stroke {{rowClassName}}">{{#columns}}<td class="tv-data-table__cell {{className}}">{{#contain}}{{{contain}}}{{/contain}}</td>{{/columns}}</tr>',x='<td class="tv-data-table__cell {{className}}">{{#contain}}{{{contain}}}{{/contain}}</td>',D=7,k=38,A=function(){function e(t,e,i,n){var s,o,a=this;this.visibleRangeChanged=new p.a,this._data=[],this._dataIndicesCache={},this._delayedUpdateInterval=null,this._updateVisibleRowsTimeout=null,this._option=i||{},this._priceFormatterFn=n,this._columns=e,this._visibleColumns=this._createVisibleStore(this._option.id),this._idx=d.getInt(this._option.id+".sort._idx",this._option.idx||0),this._asc=d.getBool(this._option.id+".sort._asc",this._option.asc||!1),this._formatters={},this._group=this._option.group,this._defaultPriceFormatter=new c.PriceFormatter,this._cleanHead(),this._toggleVisibleSwitcher=$('<div><div class="tv-data-table__dropdown-button js-dropdown-button"></div></div>'),this._idProperty=r(this._option.idProperty||e[0].property),s=this._renderTable(j,r(this._option.className)),$(s).appendTo(t),this._head=this._option.className?$(t).find("."+this._option.className+" thead"):$(t).find("thead"),this._body=this._option.className?$(t).find("."+this._option.className+" tbody"):$(t).find("tbody"),this._initSwitcher(),o=this._head.find("tr").children(),this._columns.forEach(function(t,e){var i,n,s,r=o[e];for(a._isCellHidden(e)&&$(r).addClass("i-hidden"),i=r.querySelectorAll(".tv-data-table__sortable"),n=function(t){var n=i[t];n.addEventListener("click",function(t){t.preventDefault(),a._head.find(".tv-data-table__sortable--asc, .tv-data-table__sortable--desc").removeClass("tv-data-table__sortable--asc tv-data-table__sortable--desc"),a._idx===e?a._asc=!a._asc:(a._idx=e,a._asc=!1),n.classList.add(a._asc?"tv-data-table__sortable--asc":"tv-data-table__sortable--desc"),d.setValue(a._option.id+".sort._idx",a._idx),d.setValue(a._option.id+".sort._asc",a._asc),a._sortViewImpl()})},s=0;s<i.length;s++)n(s)}),this._head.find("th:eq("+this._idx+") .tv-data-table__sortable").addClass(this._asc?"tv-data-table__sortable--asc":"tv-data-table__sortable--desc"),this._sortTimeout=null,this._visibleRange=null,this._delayedData={},this._active=!1}return e.prototype.setActive=function(t){this._active!==t&&(this._active=t,this._updateVisibleRows())},e.prototype.destroy=function(){this._sortTimeout&&clearTimeout(this._sortTimeout),this._delayedUpdateInterval&&clearInterval(this._delayedUpdateInterval),this._updateVisibleRowsTimeout&&clearTimeout(this._updateVisibleRowsTimeout)},e.prototype.addRow=function(e,i){var n,s,r,o,a,l,c,u,d=this;if(void 0===i&&(i=!0),n=e[this._idProperty],-1!==(s=this._findIndexById(n)))return void this._scheduleUpdateRow(s,e);if(o=0,i)for(a=this._data.length-1;a>=0;a--)-1===this._compare(e,this._data[a])&&(r=this._data[a],o=a);l=t.render(P,{rowClassName:e.type?"tv-data-table__stroke--hl tv-data-table__stroke--hl-"+e.type:""}),c=Object.assign({$row:$(l)},e),void 0===c.priceFormatter&&this._resolveFormatter(c),
u=c.priceFormatter||this._defaultPriceFormatter,this._columns.forEach(function(e,i){var n,s,r,o=$(t.render(x,{contain:""}));o[0].className+=" "+e.className,n=e.formatter&&d._formatters[e.formatter]?d._formatters[e.formatter]:d._extractValue,s=e.property?c[e.property]:c,r=n({value:s,priceFormatter:u,row:c,$container:o}),e.fixedWidth&&(r=$('<span class="js-fixedwidth inlined">').append(r)),"object"==typeof r?d._append(o,r):o.append(r),d._isCellHidden(i)&&o.addClass("i-hidden"),d._append(c.$row,o)}),r?(this._data.splice(o,0,c),c.$row.insertBefore(r.$row)):(this._data.push(c),c.$row.appendTo(this._body)),this._clearDataIndicesCache(),this.updateVisibleContent()},e.prototype.updateRowById=function(t,e){var i,n=this._findIndexById(t);if(-1===n)return void m.logWarn("Id "+t+" not found");i=this._delayedData[t]||this._data[n],this._scheduleUpdateRow(n,Object.assign({},i,e))},e.prototype.addRows=function(t){var e=this;t.forEach(function(t){return e.addRow(t,!1)}),this._sortViewImpl()},e.prototype.deleteRow=function(t){var e=this._findIndexById(t),i=this._data[e];-1!==e&&(i.$row.remove(),this._data.splice(e,1),this.updateVisibleContent()),delete this._delayedData[t],this._clearDataIndicesCache()},e.prototype.updateVisibleContent=function(){var t,e=this;this._updateVisibleRowsTimeout&&clearTimeout(this._updateVisibleRowsTimeout),t=100,this._updateVisibleRowsTimeout=setTimeout(function(){return e._updateVisibleRows()},t)},e.prototype.deleteRows=function(){this._removeAllChildren(this._body[0]),this._data=[],this._clearDataIndicesCache(),this._delayedData={},this._updateVisibleRows()},e.prototype.highlightRowById=function(t){var e=this._rowElementById(t);e&&e.highlight(2)},e.prototype.setRowActiveById=function(t,e){var i=this.rowById(t);i&&this._setRowActive(i,e)},e.prototype.setRowActiveByFilter=function(t){var e=this;this._data.forEach(function(i){return e._setRowActive(i,t(i))})},e.prototype.addFormatter=function(t,e){this._formatters[t]=e},e.prototype.addFormatters=function(t){var e=this;t.forEach(function(t){return e.addFormatter(t.name,t.format)})},e.prototype.isRowInViewport=function(t){if(!this._active)return!1;if(this._updateVisibleRowsTimeout&&this._updateVisibleRows(),!this._visibleRange)return!0;var e=this._findIndexById(t);return e>=this._visibleRange.from&&e<=this._visibleRange.to},e.prototype.setColumnAvailable=function(t,e){try{this._visibleColumns[this._getColumnIdx(t)].forceInvisible=!e,this._applyColumnVisibility(t)}catch(e){m.logWarn("Column "+t+" not found")}},e.prototype.setRowLinkedByFilter=function(t){var e=this;this._data.forEach(function(i){return e._setRowLinked(i,t(i))})},e.prototype.setRowLinkedById=function(t,e){var i=this.rowById(t);i&&this._setRowLinked(i,e)},e.prototype.rowById=function(t){var e=this._findIndexById(t);if(-1!==e)return this._data[e]},e.prototype.rowIdAtEvent=function(t){var e=$(t.srcElement||t.target).parents().andSelf(),i=this._data.find(function(t){return e.is(t.$row)});if(i)return i[this._idProperty]},e.prototype.rowsCount=function(){return this._data.length},
e.prototype.rowIdByIndex=function(t){if(t<0||t>this.rowsCount()-1)throw Error("No table entry for such index");return this._data[t][this._idProperty]},e.prototype._setRowLinked=function(t,e){t&&t.isRowLinked!==e&&(t.isRowLinked=e,t.$row[0].classList.toggle("tv-data-table__stroke--hl",e),t.$row[0].classList.toggle("tv-data-table__stroke--hl-active",e))},e.prototype._setRowActive=function(t,e){t&&t.isRowActive!==e&&(t.isRowActive=e,this._applyRowActivityToElement(t.$row,!!t.isRowActive))},e.prototype._append=function(t,e){t[0].appendChild(e[0])},e.prototype._resolveFormatter=function(t){var e=this;this._priceFormatterFn&&this._priceFormatterFn(t).then(function(i){var n=e._findIndexById(t[e._idProperty]);-1!==n&&(e._data[n].priceFormatter=i,e._updateRow(Object.assign({},e._data[n]),n,!0))})},e.prototype._updateVisibleRows=function(){this._updateVisibleRowsTimeout&&(clearTimeout(this._updateVisibleRowsTimeout),delete this._updateVisibleRowsTimeout);var t=this._visibleRange;0!==this._data.length&&this._active?this._visibleRange=Object(u.a)(this._visibleRange,this._data):this._visibleRange=null,(!!t!=!!this._visibleRange||this._visibleRange&&(this._visibleRange.from!==Object(g.ensure)(t).from||this._visibleRange.to!==Object(g.ensure)(t).to))&&(m.logDebug(this._option.id+" visible rows changed. Previous: from "+(t&&t.from)+", to "+(t&&t.to)+". New: from "+(this._visibleRange&&this._visibleRange.from)+", to "+(this._visibleRange&&this._visibleRange.to)+"."),this._forceUpdateDelayedData(this._visibleRange),this.visibleRangeChanged.fire(this._visibleRange))},e.prototype._removeAllChildren=function(t){for(;t.firstChild;)t.removeChild(t.firstChild)},e.prototype._scheduleUpdateRow=function(t,e){var i=this;if(this._visibleRange&&t>=this._visibleRange.from-1&&t<=this._visibleRange.to+1)return void this._updateRow(e,t);this._delayedData[e[this._idProperty]]=e,this._delayedUpdateInterval||(this._delayedUpdateInterval=setInterval(function(){return i._forceUpdateDelayedData(null,C)},w))},e.prototype._forceUpdateDelayedData=function(t,e){var i,n,s,r,o,a=0,l=Object.keys(this._delayedData);for(i=0,n=l;i<n.length&&(s=n[i],r=this._delayedData[s],o=this._findIndexById(r[this._idProperty]),-1!==o?(!t||o>=t.from-1&&o<=t.to+1)&&(this._updateRow(r,o),delete this._delayedData[s],a++):m.logWarn("Row has been removed"),!e||a!==e);i++);!this._delayedUpdateInterval||e&&0!==Object.keys(this._delayedData).length||(clearInterval(this._delayedUpdateInterval),delete this._delayedUpdateInterval)},e.prototype._updateRow=function(e,i,n){var s,o,a,l,c=this;if(void 0===n&&(n=!1),void 0===i||-1===i)throw Error("row not exist");s=this._data[i],o=!!this._group&&this._group(s)!==this._group(e),a=s.priceFormatter||this._defaultPriceFormatter,l=$.extend({},s),this._columns.forEach(function(i,u){var d,h,p,_,f,b,v=r(i.modificationProperty||i.property);(n||v&&l[v]!==e[v])&&(u===c._idx&&(o=!0),d=s[v],s[v]=e[v],h=s.$row.find("td:eq("+u+")"),p=c._elementFormatterForColumn(i),_=i.property?s[i.property]:s,f=$(t.render(x,{contain:""})),f[0].className+=" "+i.className,b=p({
value:_,priceFormatter:a,row:e,prevValue:i.highlightDiff?d:null,$container:f}),i.fixedWidth&&(b=$("<span>").addClass("js-fixedwidth tv-data-table__cell--inlined").css("min-width",h.find(".js-fixedwidth").width()).append(b)),c._isCellHidden(u)&&f.addClass("i-hidden"),"object"==typeof b&&1===b.length?c._append(f,b):f.append(b),f.insertBefore(h),h.remove())}),o&&this._sortView(),delete e.$row,Object.assign(s,e)},e.prototype._elementFormatterForColumn=function(t){return t.formatter&&this._formatters[t.formatter]?this._formatters[t.formatter]:this._extractValue},e.prototype._rowElementById=function(t){var e=this.rowById(t);return e&&e.$row},e.prototype._compare=function(t,e){var i,n,o,a=r(this._columns[this._idx].sortProp||this._columns[this._idx].property),l=r(t[a]),c=r(e[a]),u=0;return this._hasGroups()&&(i=this._group(t),n=this._group(e),u=s(i,n)),u||(u=t.isTotalRow?1:e.isTotalRow?-1:0),u||(u=s(l,c),this._asc&&(u=-u)),u||(o=r(this._columns[0].sortProp||this._columns[0].property),l=r(t[o]),c=r(e[o]),u=s(l,c)),u},e.prototype._hasGroups=function(){return"function"==typeof this._group},e.prototype._sortViewImpl=function(){var t,e,i;for(this._data.sort(this._compare.bind(this)),t=null,e=this._data.length-1;e>=0;e--)i=this._data[e].$row[0],t&&t.parentNode&&t.parentNode.insertBefore(i,t),t=i;this._clearDataIndicesCache()},e.prototype._sortView=function(){var t=this;this._sortTimeout||(this._sortTimeout=setTimeout(function(){t._sortViewImpl(),t._sortTimeout=null},1e3))},e.prototype._applyRowActivityToElement=function(t,e){t.toggleClass("tv-data-table__stroke--grayed",e)},e.prototype._cleanHead=function(){var t=this._columns.length-1,e=this._columns[t];-1!==e.label.toLowerCase().indexOf("dropdown")&&(e.label="")},e.prototype._renderTable=function(e,i){var n=this._columns.length-1,s=this._columns[n];return""===s.label?(s.label=this._toggleVisibleSwitcher.html(),this._visibleColumns[n].isAlwaysVisible=!0):(this._columns.push({label:this._toggleVisibleSwitcher.html(),className:"tv-data-table__cell--buttons-cell",notSortable:!0,fixedWidth:!1,property:"dropdown",formatter:""}),this._visibleColumns.push({isVisible:!0,isAlwaysVisible:!0,property:r(s.property),label:""})),t.render(e,{columns:this._columns,className:"tv-data-table--trading-cqg "+i,bodies:[{className:""}]})},e.prototype._initSwitcher=function(){var e,i,s=this,r=$(t.render(O,{columns:this._visibleColumns})),o=$(T),a=$(S),l=null,c=null,u=n(this._visibleColumns.length,this._visibleColumns.filter(function(t){return t.isAlwaysVisible}).length);r.appendTo(o),o.appendTo(a),u&&(e=$('<div class="tv-data-table__dropdown-search-wrap">').prependTo(o),l=$('<input type="text" placeholder='+$.t("Search")+' class="tv-data-table__dropdown-search-input">').appendTo(e),c=$('<div class="tv-control-select__option-wrap tv-data-table__search-no-matches js-hidden">'+$.t("No matches")+"</div>").appendTo(o),this._initSearchInput(o,r,a,l,c,u)),this._initDropdown(r,o,a,l,u),u&&l&&this._handleDropdownClosed(r,o,a,u,l,Object(g.ensure)(c)),a.on("change",".js-fields-item",function(t){
s._handleChecked($(t.currentTarget),r)}),i=this._head.find(".js-dropdown-button"),a.appendTo(i),this._countAndSetPosition(o,a),this._countAndSetHeight(r,o,a,u)},e.prototype._handleChecked=function(t,e){var i=t.data("field"),n=t.find(".js-field-checkbox"),s=!n[0].checked,r=this._getColumnIdx(i);s?this._hideColumn(r):this._showColumn(r),e.find(":checked").prop("disabled",this._isLastColumnVisible())},e.prototype._handleDropdownClosed=function(t,e,i,n,s,r){var o=this;i.on("afterCloseMenu",function(){if(""!==s.val()){var a=t.find(".js-column-item").size()*k;s.val(""),t.find(".js-column-item").toggleClass("js-hidden",!1),r.toggleClass("js-hidden",!0),t.toggleClass("js-hidden",!1),t.css("height",a+"px"),o._countAndSetHeight(t,e,i,n)}})},e.prototype._initDropdown=function(t,e,i,n,s){var r=this;i.tvDropdown(i,{scroll:!0}).on("beforeOpenMenu",function(){r._countAndSetPosition(e,i),r._countAndSetHeight(t,e,i,s),r._isLastColumnVisible()&&t.find(":checked").prop("disabled",!0)}),n&&i.on("afterOpenMenu",function(){n.first().focus()})},e.prototype._initSearchInput=function(t,e,i,n,s,r){var o=this;n.on("change input",function(){var a,l,c,u,d,h,p=n.val().trim().toLowerCase(),_=e.find(".js-column-item");if(0!==p.length)for(a=_.length,l=0;l<a;l++)c=$(_[l]).find(".js-checkbox-label").text().toLowerCase(),u=-1===c.indexOf(p),$(_[l]).toggleClass("js-hidden",u);else _.removeClass("js-hidden");d=e.find(".js-column-item:not(.js-hidden)").size(),h=!!d,s.toggleClass("js-hidden",h),h&&e.css("height",k*d+"px"),o._countAndSetHeight(e,t,i,r)})},e.prototype._countAndSetHeight=function(t,e,i,n){var s=$(document.getElementsByClassName("js-table-container")[0]),r=s.height(),o=s.offset(),a=55,l=this._option.id&&(-1!==this._option.id.indexOf("balance")||-1!==this._option.id.indexOf("collaterals")),c=n?a:0,u=10,d=k*t.find(".js-column-item:not(.js-hidden)").size(),h=parseInt(e.css("top"))-(o?o.top:0);l&&0<h?d>r-h?t.css("height",r-h-c-u+"px"):t.css("height",d+"px"):d>r-c-u?t.css("height",r-c-u+"px"):t.css("height",d+"px"),i.tvDropdown("updateScroll")},e.prototype._countAndSetPosition=function(t,e){var i=e[0].getBoundingClientRect(),n=t.width();t.css({left:y.IS_RTL?i.left:i.left-n+37,right:"auto",top:i.top-25})},e.prototype._createVisibleStore=function(t){var e,i,n,s=[],o=this._columns.filter(function(t){return t.hideByDefault}).map(function(t){return t.property}),a=d.getJSON(t+".invisibleColumns",o),l=this._columns.length;for(e=0;e<l;e++)i=this._columns[e],n=-1!==a.indexOf(i.property),s.push({isVisible:!n,isAlwaysVisible:!0===i.notHideable,property:r(i.property),label:i.label});return s},e.prototype._toggleVisibleState=function(t,e){this._visibleColumns[this._getColumnIdx(t)].isVisible=e;var i=function(t,e){return e.isVisible||t.push(e.property),t};d.setJSON(this._option.id+".invisibleColumns",this._visibleColumns.reduce(i,[]))},e.prototype._showColumn=function(t){this._toggleVisibleState(this._visibleColumns[t].property,!0),this._applyColumnVisibility(this._visibleColumns[t].property)},e.prototype._isLastColumnVisible=function(){
return 1===this._visibleColumns.filter(function(t){return t.isVisible&&t.label&&t.property&&"dropdown"!==t.property}).length},e.prototype._hideColumn=function(t){this._toggleVisibleState(this._visibleColumns[t].property,!1),this._applyColumnVisibility(this._visibleColumns[t].property)},e.prototype._applyColumnVisibility=function(t){var e=this._getColumnIdx(t),i=this._head.find("th:eq("+e+")"),n=$("td:nth-child("+(e+1)+")",this._body),s=this._visibleColumns[e];!s.isVisible&&!s.isAlwaysVisible||s.forceInvisible?(i.addClass("i-hidden"),n.addClass("i-hidden")):(i.removeClass("i-hidden"),n.removeClass("i-hidden"))},e.prototype._isCellHidden=function(t){var e=this._visibleColumns[t];return!e.isVisible||!!e.forceInvisible},e.prototype._getColumnIdx=function(t){var e,i=this._visibleColumns.length;for(e=0;e<i;e++)if(this._visibleColumns[e].property===t)return e;throw Error("Unknown column")},e.prototype._extractValue=function(t){return t.value},e.prototype._findIndexById=function(t){var e,i,n=this._dataIndicesCache[t];return void 0!==n?n:(e=this._idProperty,i=this._data.findIndex(function(i){return i[e]===t}),this._dataIndicesCache[t]=i,i)},e.prototype._clearDataIndicesCache=function(){this._dataIndicesCache={}},e}()}.call(e,i(93))},1134:function(t,e,i){"use strict";function n(t){var e=!1;return{promise:new Promise(function(i,n){t.then(function(t){return e?n({isCanceled:!0}):i(t)}),t.catch(function(t){return n(e?{isCanceled:!0}:t)})}),cancel:function(){e=!0}}}var s,r=i(6);i.d(e,"a",function(){return s}),s=function(){function t(t,e,i,n){this._active=!1,this._created=!1,this._started=!1,this._fullUpdateDelegate=null,this._partialUpdateDelegate=null,this._deleteUpdateDelegate=null,this._noMoreEntries=!1,this._fullUpdateCancel=null,this._table=t,this._source=e,this._subscriptions=i,this._supportPagination=!!n}return t.prototype.start=function(){this._started||(this._subscribeUpdates(),this._started=!0)},t.prototype.stop=function(){this._started&&(this._unsubscribeUpdates(),this.reset(),this._started=!1)},t.prototype.isStarted=function(){return this._started},t.prototype.setActive=function(t){Object(r.assert)(!t||this._started,"Should be started first"),this._active!==t&&(this._active=t,this._active&&!this._created&&this._fullUpdate(),this._table.setActive(t))},t.prototype.isActive=function(){return this._active},t.prototype.reset=function(){this._active?this._fullUpdate():(this._deleteRows(),this._created=!1)},t.prototype.destroy=function(){this._unsubscribeUpdates(),this._table.destroy()},t.prototype.table=function(){return this._table},t.prototype._update=function(t){return!!this._created&&(this._table.addRow(t),!0)},t.prototype._deleteRow=function(t){this._created&&this._table.deleteRow(t)},t.prototype._deleteRows=function(){this._table.deleteRows(),this._created=!1},t.prototype._fullUpdate=function(){var t,e=this;return this._deleteRows(),this._noMoreEntries=!1,this._active?(this._fullUpdateCancel&&this._fullUpdateCancel(),t=n(this._source()),this._fullUpdateCancel=t.cancel,t.promise.then(function(t){e._fullUpdateCancel=null,
e._table.addRows(t),e._created=!0,e._onCreated()}).catch(function(t){if("object"!=typeof t||!0!==t.isCanceled)throw t})):Promise.resolve()},t.prototype._onCreated=function(){},t.prototype._loadMoreIfBottomVisible=function(t){var e,i,n=this;this._noMoreEntries||(e=this._table.rowsCount(),t&&t.to===e-1&&(i=this._table.rowIdByIndex(e-1),this._source(i).then(function(t){if(0===t.length)return void(n._noMoreEntries=!0);n._table.addRows(t)})))},t.prototype._subscribeUpdates=function(){if(this._fullUpdateDelegate)throw Error("should unsubscribe first");this._fullUpdateDelegate=this._subscriptions.fullUpdateDelegate,this._fullUpdateDelegate.subscribe(this,this._fullUpdate),this._partialUpdateDelegate=this._subscriptions.rowUpdateDelegate,this._partialUpdateDelegate.subscribe(this,this._update),this._supportPagination&&this._table.visibleRangeChanged.subscribe(this,this._loadMoreIfBottomVisible),this._subscriptions.rowDeleteDelegate&&(this._deleteUpdateDelegate=this._subscriptions.rowDeleteDelegate,this._deleteUpdateDelegate.subscribe(this,this._deleteRow))},t.prototype._unsubscribeUpdates=function(){this._fullUpdateDelegate&&(this._fullUpdateDelegate.unsubscribe(this,this._fullUpdate),delete this._fullUpdateDelegate),this._partialUpdateDelegate&&(this._partialUpdateDelegate.unsubscribe(this,this._update),delete this._partialUpdateDelegate),this._deleteUpdateDelegate&&(this._deleteUpdateDelegate.unsubscribe(this,this._deleteRow),delete this._deleteUpdateDelegate),this._table.visibleRangeChanged.unsubscribe(this,this._loadMoreIfBottomVisible)},t}()},1135:function(t,e,i){"use strict";var n,s;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"PriceColorer",function(){return s}),n=i(77),function(t){function e(t,e){return 0===t?e&&e.neutral?e.neutral:n.color.black70:t>0?e&&e.up?e.up:n.color.success:e&&e.down?e.down:n.color.danger}function i(t,i){return e(i-t)}function s(t,e,i,n,s){function r(t){var e=document.createElement("span");return e.innerHTML=t,e}var o,a,l,c,u,d;if(void 0===i&&(i=0),void 0===n&&(n=""),void 0===s&&(s=""),!i)return $(r(t));if(o=t+"",a=e+"",l=null,o.length===a.length){for(c=0;c<o.length;c++)if(o.charAt(c)!==a.charAt(c)){l=c;break}}else l=0;return null===l?$(r(o)):(u=r(o.substr(0,l)),d=document.createElement("span"),d.className=i<0?n:s,d.appendChild(r(o.substr(l))),$(u).add(d))}t.formatSign=e,t.formatDiff=i,t.domDifference=s}(s||(s={}))},1165:function(t,e,i){"use strict";function n(t){var e,i;if(t&&t.__esModule)return t;if(e={},null!=t)for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function s(t){return t&&t.__esModule?t:{default:t}}function r(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,i){function n(s,r){var o,a;try{o=e[s](r),a=o.value}catch(t){return void i(t)}if(!o.done)return Promise.resolve(a).then(function(t){n("next",t)},function(t){n("throw",t)});t(a)}return n("next")})}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){var i=t.findIndex(function(t){return t.id===e
});return-1===i&&(i=t.findIndex(function(t){return t.property===e})),i}function l(t,e){if(void 0===e)return{};var i=a(t,e.columnId);return-1!==i?{idx:i,asc:e.asc||!1}:{}}var c,u,d,h,p,_,f,b,v,g,y,m,w,C,S,T,O,j,P,x,D,k,A,E,F,U,R,I,N;Object.defineProperty(e,"__esModule",{value:!0}),c=i(232),u=s(c),d=function(){function t(t,e){var i,n,s=[],r=!0,o=!1,a=void 0;try{for(i=t[Symbol.iterator]();!(r=(n=i.next()).done)&&(s.push(n.value),!e||s.length!==e);r=!0);}catch(t){o=!0,a=t}finally{try{!r&&i.return&&i.return()}finally{if(o)throw a}}return s}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=function(){function t(t,e){var i,n;for(i=0;i<e.length;i++)n=e[i],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),i(1268),p=i(976),_=i(84),f=s(_),b=i(56),v=i(4),g=n(v),y=i(1269),m=i(1273),w=i(1274),C=s(w),S=i(1277),T=i(1278),O=s(T),j=i(148),P=i(82),x=i(118),D=i(1279),k=i(228),A=i(80),E=i(1280),$.t("Username or password is incorrect"),F=[x.ORDERSTATUS.WORKING,x.ORDERSTATUS.INACTIVE,x.ORDERSTATUS.FILLED,x.ORDERSTATUS.CANCELED,x.ORDERSTATUS.REJECTED],U=[x.ORDERSTATUS.FILLED,x.ORDERSTATUS.CANCELED,x.ORDERSTATUS.REJECTED],R=function(t){var e=t.accId,n=void 0===e?"":e,s=(t.brokerName,t.tabsCount),r=void 0===s?0:s;return'\n<div class="tv-account-manager">\n\t<div class="tv-account-manager__top-panel">\n\t\t<div class="tv-tabs tv-tabs--semi-compact tv-tabs--no-margin tv-tabs--no-border">\n\t\t\t'+I(r)('<div class="tv-tabs__tab js-tab"></div>')+'\n\t\t</div>\n\t\t<div class="controls">\n\t\t\t<div class="controls__elem controls__elem--disabled account-selector js-account-dropdown">\n\t\t\t\t<span class="js-account-name">'+n+'</span>\n\t\t\t</div>\n\t\t\t<div class="controls__elem option js-tab-options">'+i(1281)+'</div>\n\t\t</div>\n\t</div>\n\t<div class="tv-account-manager__secondary-panel js-cesondary-panel">\n\t\t<div class="js-secondary-tabs"></div>\n\t\t<div class="tv-account-manager__summary js-summary"></div>\n\t</div>\n\t<div class="tv-account-manager__content js-content js-table-container">\n\t\t'+I(r)('<div class="tv-account-manager__page js-page"></div>')+"\n\t</div>\n</div>"},I=function(t){return function(e){return Array(t).fill(e).join("")}},N=function(){function t(e,i){o(this,t),this._adapter=e,this._bridge=i,this._container=i.$body,this._$spinnerWrapper=null,this._prevConnectionStatus=this._adapter.connectionStatus(),this._pages=[],this._topLines={},this._trading=(0,A.tradingService)(),this._updateAccountIdBinded=this._updateAccountId.bind(this),this._adapter.connectionStatusUpdate.subscribe(this,this._onStatusChange),this._onStatusChange(this._adapter.connectionStatus())}return h(t,[{key:"drawAttention",value:function(){this._loginForm&&this._loginForm.drawAttention&&this._loginForm.drawAttention()}},{key:"_onStatusChange",value:function(t,e){var i,n,s,r=this
;this._container.empty(),this._unsubscribe(),this._spinner&&(this._spinner.stop(),delete this._spinner),null!==this._$spinnerWrapper&&(this._$spinnerWrapper.remove(),this._$spinnerWrapper=null),i=this._adapter.metainfo().configFlags.authorizationType,t===x.CONNECTSTATUSES.ERROR||t===x.CONNECTSTATUSES.DISCONNECTED?(e&&$("<div>").addClass("trading-connection-error-message").text($.t(e)).appendTo(this._container),"undefined"!=typeof LoginForm&&void 0!==i&&(this._loginForm=new LoginForm(this._adapter.metainfo(),this._trading),this._container.append(this._loginForm.content()),this._loginForm.focus(),this._loginForm.getAuthInfo().then(function(t){var e=t.username,i=t.password,n=t.type;r._adapter.signIn(e,i,n)})),this.unbindContexMenu()):this._loginForm&&(this._loginForm.remove(),delete this._loginForm),t===x.CONNECTSTATUSES.CONNECTING&&(this._$spinnerWrapper=$('<div class="tv-account-manager__spinner-wrapper">'),n=$('<div class="tv-account-manager__spinner-container">').appendTo(this._$spinnerWrapper),this._spinner=(new k.Spinner).spin(n.get(0)),"oauth"===i&&this._prevConnectionStatus!==x.CONNECTSTATUSES.CONNECTED&&(s=$('<a class="tv-account-manager__cancel-login-button">').text($.t("Cancel")),s.click(this._disconnectBroker.bind(this)),this._$spinnerWrapper.append(s)),this._$spinnerWrapper.appendTo(this._container)),t===x.CONNECTSTATUSES.CONNECTED&&(this._create(),this._fullupdate()),this._prevConnectionStatus=t}},{key:"priceFormatter",value:function(t){return t.symbol?this._trading.formatter(t.symbol):Promise.resolve(null)}},{key:"_updateAccountId",value:function(t){this._accName.text(t.name)}},{key:"_create",value:function(){var t,e,i,n,s,r,o,a,l,c,u,d,h,_,f,b=this;this._pages=this.pages.map(function(t){return new t.constructor(t.ctorArgument)}),t=this._info=this._adapter.accountManagerInfo(),e=this._info.accountTitle,i=this._pages.length,this._container.append($(R({tabsCount:i,brokerName:e,accId:""}))),n=this._container.find(".js-tab-options"),(0,j.bindPopupMenu)(n,this._adapter.buttonDropdownActions.bind(this._adapter),{reverse:!0}),s=function(t,e){return t&&e&&t.id===e.id},r=this._container.find(".js-account-dropdown"),this._accName=this._container.find(".js-account-name"),this._accountSummaryRow&&this._accountSummaryRow.destroy(),this._info.summary&&(o=this._container.find(".js-summary"),this._accountSummaryRow=new E.AccountSummaryRow(o[0],this._info.summary)),this._info.account?this._info.account.subscribe(this._updateAccountIdBinded,{callWithLast:!0}):r.addClass("js-hidden"),t.accountsList&&(a=function(){return t.accountsList.map(function(e){void 0===e.currency&&(e.currency="USD");var i=e.name;return i.length>14&&(i=i.slice(0,14)+"â€¦"),{html:'<div class="pair apply-common-tooltip" title="'+e.name+'"><div>'+i+"</div><div>"+e.currency+"</div></div>",action:function(){s(e,t.account.value())||t.account.setValue(e)},active:s(e,t.account.value())}})},r.removeClass("controls__elem--disabled").append($('<span class="tv-caret"></span>')),(0,j.bindPopupMenu)(r,a,{direction:"down",notCloseOnButtons:!0,reverse:!0,
activeClass:"i-dropped i-active",addClass:"account-selector"})),this._contentWrapper=this._container.find("div.content-wrapper"),l=this._container.find(".js-page"),c=this._container.find(".js-tab"),this._pages.forEach(function(t,e){l.eq(e).html(t.content()),c.eq(e).html(t.header())}),u=this._container.find(".js-content"),d=this.tabs=new p.Tabs(this._container.find(".tv-tabs").get(0),u.get(0)),d.tabChanged.subscribe(this,this._onPageChanged),this.unbindContexMenu(),this._dispatch=this.bindContextMenu(),this._dispatchHeightHandler&&(this._dispatchHeightHandler(),delete this._dispatchHeightHandler),h=function(){b._pages.forEach(function(t){return t.updateVisibleContent()})},u.on("scroll",h),_=function(t){u.css("height",t-78+"px"),h()},this._bridge.height.subscribe(_,{callWithLast:!0}),this._dispatchHeightHandler=function(){return b._bridge.height.unsubscribe(_)},f=function(t){t?b._updatePagesActiveStatuses():b._pages.forEach(function(t){return t.setActive(!1)})},this._bridge.visible.subscribe(f,{callWithLast:!0}),this._dispatchVisibilityHandler=function(){return b._bridge.visible.unsubscribe(f)},this._attachFilter()}},{key:"_onPageChanged",value:function(t){this._attachFilter(),this._trading.trackEvent("Bottom Panel","Select "+this._pages[t].id()+" page"),this._updatePagesActiveStatuses()}},{key:"_updatePagesActiveStatuses",value:function(){var t,e=this._adapter.connectionStatus()===x.CONNECTSTATUSES.CONNECTED,i=this.tabs.index();for(t=0;t<this._pages.length;t++)this._pages[t].setActive(i===t&&e)}},{key:"_detachFilter",value:function(){this._container.find(".js-secondary-tabs").children().addClass("js-hidden")}},{key:"_attachFilter",value:function(){var t,e;this._detachFilter(),this._topLines[this._currentPageIndex()]?this._topLines[this._currentPageIndex()].removeClass("js-hidden"):this._currentPage().topline()&&(t=this._currentPage().topline(),e=this._container.find(".js-secondary-tabs"),t.appendTo(e),this._topLines[this._currentPageIndex()]=t)}},{key:"_fullupdate",value:function(){this._pages.forEach(function(t){return t.reset()})}},{key:"_unsubscribe",value:function(){this._info&&this._info.account&&this._info.account.unsubscribe(this._updateAccountIdBinded),this.tabs&&(this.tabs.tabChanged.unsubscribe(this,this._onPageChanged),this.tabs.stop()),this._dispatchHeightHandler&&(this._dispatchHeightHandler(),delete this._dispatchHeightHandler),this._dispatchVisibilityHandler&&(this._dispatchVisibilityHandler(),delete this._dispatchVisibilityHandler),this._container.find(".js-secondary-tabs").empty(),this._topLines={}}},{key:"remove",value:function(){this._adapter.connectionStatusUpdate.unsubscribe(this,this._onStatusChange),this._unsubscribe(),this._pages.forEach(function(t){return t.destroy()}),this.unbindContexMenu(),this._container.empty()}},{key:"bindContextMenu",value:function(){var t=this,e=function(e){e.preventDefault(),t._contextItems(e).then(function(t){g.enabled("property_pages")||(t=t.slice(0,-1)),f.default.createMenu((0,P.convertActionDescriptionsToActions)(t)).show(e)})}
;return this._container.on("contextmenu",e),this._container.off.bind(this._container,"contextmenu",e)}},{key:"unbindContexMenu",value:function(){this._dispatch&&(this._dispatch(),delete this._dispatch)}},{key:"_getCurrentPrice",value:function(t){return this._trading.realtimeProvider().quotesSnapshot(t).then(function(t,e){return(e+t)/2})}},{key:"_currentPageIndex",value:function(){return this.tabs.index()}},{key:"_currentPage",value:function(){return this._pages[this._currentPageIndex()]}},{key:"_contextItems",value:function(){function t(t){return e.apply(this,arguments)}var e=r(u.default.mark(function t(e){var i,n,s,r,o,a,l,c,h,p=this;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i="Bottom Panel Context Menu",n=b.linking.proSymbol.value(),t.next=4,Promise.all([this._getCurrentPrice(n),this._trading.suggestedQty().value(n)]);case 4:if(s=t.sent,r=d(s,2),o=r[0],a=r[1],l=this._currentPage().contextItems(e),!this._info||!this._info.contextMenuActions){t.next=13;break}return t.next=12,this._info.contextMenuActions(e,l);case 12:return t.abrupt("return",t.sent);case 13:return c={separator:!0},l.length&&l.push(c),h=[{text:$.t("Create New Order..."),action:function(){p._trading.trackEvent(i,"New Order"),p._adapter.placeOrder({symbol:n,price:o,qty:a})}},c,{text:$.t("Show Buy/Sell Panel"),checkable:!0,checked:this._adapter.host().floatingTradingPanelVisibility().value(),action:function(){var t=p._adapter.host().floatingTradingPanelVisibility().value();p._trading.trackEvent(i,"Show Panel",t?"Uncheck":"Check"),p._adapter.host().floatingTradingPanelVisibility().setValue(!t)}}],g.enabled("property_pages")&&h.push(c,{text:$.t("Trading Properties..."),action:function(){p._trading.trackEvent(i,"Trading Properties"),p._adapter.host().showTradingProperties()}}),this._trading.availableBrokers().length>1&&h.push(c,{text:$.t("Disconnect"),action:function(){p._trading.trackEvent(i,"Disconnect"),p._disconnectBroker()}}),t.abrupt("return",l.concat(h));case 19:case"end":return t.stop()}},t,this)}));return t}()},{key:"_disconnectBroker",value:function(){var t=this._trading.activeBroker();t&&(void 0!==t.metainfo().configFlags.authorizationType?t.disconnect():this._trading.selectBroker(null))}},{key:"pages",get:function(){var t,e=this,i=this._adapter.metainfo().id,n=this._adapter.accountManagerInfo(),s=this._adapter.metainfo().configFlags,r=[];return s.supportPositions&&r.push({constructor:S.PositionPage,ctorArgument:{brokerId:i,formatters:n.customFormatters||[],priceFormatterFn:this.priceFormatter.bind(this),checkSupportTrades:function(){return s.supportTrades},positions:{source:function(){return e._adapter.positions().then(function(t){return t.filter(function(t){return 0!==t.qty})})},closeFn:this._adapter.closePosition.bind(this._adapter),editFn:s.supportPositionBrackets?this._adapter.editPositionBrackets.bind(this._adapter):null,reverseFn:s.supportReversePosition?this._adapter.reversePosition.bind(this._adapter):null,columns:n.positionColumns,subscriptions:{
rowUpdateDelegate:new O.default([this._adapter.positionPartialUpdate,this._adapter.positionUpdate]),countUpdateDelegate:this._adapter.positionUpdate,plSubscription:this._adapter.subscribePL.bind(this._adapter)}},trades:s.supportTrades?{source:function(){return e._adapter.trades().then(function(t){return t.filter(function(t){return 0!==t.qty})})},closeFn:s.supportCloseTrade?this._adapter.closeTrade.bind(this._adapter):null,editFn:s.supportTradeBrackets?this._adapter.editTradeBrackets.bind(this._adapter):null,reverseFn:null,columns:n.tradeColumns||n.positionColumns,subscriptions:{rowUpdateDelegate:new O.default([this._adapter.tradePartialUpdate,this._adapter.tradeUpdate]),countUpdateDelegate:this._adapter.tradeUpdate,plSubscription:this._adapter.subscribePL.bind(this._adapter)}}:null,fullUpdateDelegate:this._adapter.fullUpdate}}),r.push({constructor:C.default,ctorArgument:{id:"Orders",title:$.t("Orders"),source:this._adapter.orders.bind(this._adapter),cancelFn:this._adapter.cancelOrder.bind(this._adapter),modifyFn:this._adapter.metainfo().configFlags.supportModifyOrder?this._adapter.modifyOrder.bind(this._adapter):null,columns:n.orderColumns,headerCounter:!0,tableId:i+".orders",formatters:n.customFormatters||[],priceFormatterFn:this.priceFormatter.bind(this),subscriptions:{fullUpdateDelegate:this._adapter.fullUpdate,rowUpdateDelegate:new O.default([this._adapter.orderPartialUpdate,this._adapter.orderUpdate]),orderUpdateDelegate:this._adapter.orderUpdate},possibleOrderStatuses:F.filter(function(t){return!n.possibleOrderStatuses||-1!==n.possibleOrderStatuses.indexOf(t)}),filter:n.historyColumns&&n.historyColumns.length?function(t){return!!t.updateTime}:function(){return!0},highlightChanges:!0,tableOptions:l(n.orderColumns,n.orderColumnsSorting)}}),n.historyColumns&&n.historyColumns.length&&(t={constructor:C.default,ctorArgument:{id:"History",title:$.t("History"),source:this._adapter.orders.bind(this._adapter),cancelFn:this._adapter.cancelOrder.bind(this._adapter),modifyFn:this._adapter.modifyOrder.bind(this._adapter),columns:n.historyColumns,headerCounter:!1,tableId:i+".history",formatters:n.customFormatters||[],priceFormatterFn:this.priceFormatter.bind(this),subscriptions:{fullUpdateDelegate:this._adapter.fullUpdate,rowUpdateDelegate:new O.default([this._adapter.orderPartialUpdate,this._adapter.orderUpdate]),orderUpdateDelegate:this._adapter.orderUpdate},possibleOrderStatuses:U.filter(function(t){return!n.possibleOrderStatuses||-1!==n.possibleOrderStatuses.indexOf(t)}),filter:function(t){return-1===[x.ORDERSTATUS.INACTIVE,x.ORDERSTATUS.PLACING,x.ORDERSTATUS.WORKING].indexOf(t.status)},highlightChanges:!1,tableOptions:l(n.historyColumns,n.historyColumnsSorting)}},r.push(t)),n.pages&&n.pages.forEach(function(t){var s=t.tables.map(function(s){return{title:s.name||"",columns:s.columns,source:(0,P.wrapDeferredWithPromise)(s.getData),options:Object.assign({id:i+"."+t.id+"."+s.id,className:"balances",idProperty:"id"},l(s.columns,s.initialSorting)),formatters:n.customFormatters||[],priceFormatterFn:e.priceFormatter.bind(e),
subscriptions:{fullUpdateDelegate:e._adapter.fullUpdate,rowUpdateDelegate:s.changeDelegate},flags:s.flags}});r.push({constructor:m.TitledTablesPage,ctorArgument:{id:t.id,title:t.title,tables:s}})}),g.enabled("show_trading_notifications_history")&&r.push({constructor:y.SingleTablePage,ctorArgument:{id:"notifications_log",title:$.t("Notifications log"),source:function(){return Promise.resolve(e._trading.getNotifications())},columns:D.notificationColumns,formatters:[],priceFormatterFn:this.priceFormatter.bind(this),subscriptions:{fullUpdateDelegate:this._trading.onNotificationsChanged,rowUpdateDelegate:this._trading.onNewNotification}}}),r}}]),t}(),e.default=N,t.exports=e.default},1166:function(t,e,i){"use strict";function n(t){var e=document.createElement("div");return e.innerHTML=t.trim(),e.childNodes[0]}function s(t,e){var i='\n\t\t<span class="tv-data-table__button tv-data-table__edit-button" title="'+(e||window.t("Edit"))+'">\n\t\t\t'+a+"\n\t\t</span>",s=n(i);return s.addEventListener("click",function(e){return t()}),s}function r(t,e){var i='\n\t\t<span class="tv-data-table__button tv-data-table__close-button" title="'+(e||window.t("Close",{context:"position"}))+'">\n\t\t\t'+l+"\n\t\t</span>",s=n(i);return s.addEventListener("click",function(e){return t()}),s}function o(t,e,i,n){var o,a,l=document.createElement("span");return i&&(o=s(i,n),l.appendChild(o)),t&&(a=r(t,e),l.appendChild(a)),l}var a,l;Object.defineProperty(e,"__esModule",{value:!0}),e.createEditButton=s,e.createCloseButton=r,e.getSettingsButtons=o,a=i(1275),i.n(a),l=i(367),i.n(l),i(9)},1167:function(t,e,i){"use strict";var n,s,r,o;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"LinkingTableController",function(){return o}),n=i(0),s=i(56),r=i(1134),o=function(t){function e(e,i,n){var r=t.call(this,e,i,n)||this;return r._onLinkingBound=r._onLinking.bind(r),s.linking.proSymbol.subscribe(r._onLinkingBound),r}return n.c(e,t),e.prototype.destroy=function(){s.linking.proSymbol.unsubscribe(this._onLinkingBound),t.prototype.destroy.call(this)},e.prototype._update=function(e){if(!t.prototype._update.call(this,e))return!1;var i=s.linking.proSymbol.value();return this.table().setRowLinkedById(e.id,i===e.symbol),!0},e.prototype._onCreated=function(){this.table().setRowLinkedByFilter(function(t){return t.symbol===s.linking.proSymbol.value()})},e.prototype._onLinking=function(t){this.table().setRowLinkedByFilter(function(e){return e.symbol===t})},e}(r.a)},1268:function(t,e){},1269:function(t,e,i){"use strict";var n,s,r,o,a,l,c;Object.defineProperty(e,"__esModule",{value:!0}),n=i(0),s=i(1134),r=i(1086),o=i(1068),a=function(t){function e(e,i,n){var s=t.call(this,e,i,n)||this;return n.forEach(function(t){return t.table().addFormatters(i.formatters.concat(o.formatters))}),s}return n.c(e,t),e}(r.TablePage),l=i(1087),i.d(e,"SingleTablePage",function(){return c}),c=function(t){function e(e){var i=this,n=$("<div>"),r={id:e.id,idProperty:"id"},o=new l.Table(n,e.columns,r,e.priceFormatterFn),a=new s.a(o,e.source,e.subscriptions),c={id:e.id,name:e.title,headerCounter:!1,
formatters:e.formatters};return i=t.call(this,n,c,[a])||this,a.start(),i}return n.c(e,t),e}(a)},1270:function(t,e,i){"use strict";function n(t,e){return!h(t)}function s(t,e){return!h(e)}function r(t,e,i){var n,s,o,a;return i<e?NaN:(n=i-e+1,s=n>>1,o=e+s,h(t[o])?o:(a=r(t,e,o-1),isNaN(a)?r(t,o+1,i):a))}function o(t,e){if(t){if(h(e[t.from]))return t.from;if(h(e[t.to]))return t.to}return r(e,0,e.length-1)}function a(t,e){var i,r,a=o(t,e);return isNaN(a)?null:(i=Object(c.lowerbound)(e,1,n,0,a+1),r=Object(c.upperbound)(e,1,s,a+1,e.length)-1,isNaN(i)||isNaN(r)?null:{from:Math.max(0,i),to:Math.min(r,e.length-1)})}var l,c,u,d,h;e.a=a,l=i(14),i.n(l),c=i(85),u=i(1271),d=i.n(u),h=function(t){return t&&d.a.isVisible(t.$row)}},1271:function(t,e,i){"use strict";var n=i(244),s={};s.createLabel=function(t,e,i){return n.create("label",$.extend(i,{html:e,for:t}))},s.unbindContextMenu=function(t){t.contextMenu(function(t){return!1})},s.offsetX=function(t,e){return t.width()+e.pageX},s.offsetY=function(t,e){return t.height()+e.pageY},s.isElementInViewport=function(t){"function"==typeof jQuery&&t instanceof jQuery&&(t=t[0]);var e=t.getBoundingClientRect();return e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)},s.isVisible=function(t,e,i){var n,s,r;for("function"==typeof jQuery&&t instanceof jQuery&&(t=t[0]),n=.01,e||(e=1),i||(i=1),s=t.getBoundingClientRect(),r=[];t.parentElement;)r.push(t.parentElement.getBoundingClientRect()),t=t.parentElement;return r.every(function(t){var r=Math.min(s.right,t.right)-Math.max(s.left,t.left),o=Math.min(s.bottom,t.bottom)-Math.max(s.top,t.top),a=r/s.width*100,l=o/s.height*100;return a+n>e&&l+n>i})},s.checkObjIsOutOfWindowX=function(t,e){var i,n=$(window).width()-s.offsetX(t,e);return n<0?(i=e.pageX+n,i>0?i:0):e.pageX},s.checkObjIsOutOfWindowY=function(t,e){var i,n=$(window).height()-s.offsetY(t,e);return n<0?(i=e.pageY+n,i>0?i:0):e.pageY},s.checkObjIsOutOfWindow=function(t,e){return{left:s.checkObjIsOutOfWindowX(t,e),top:s.checkObjIsOutOfWindowY(t,e)}},s.setAttr=function(t,e,i){return t.attr?t.attr(e,i):t[e]=i,t},s.removeAttr=function(t,e){return t.removeAttr?t.removeAttr(e):t.removeAttribute(e),t},s.notNull=function(t){return-1===$.inArray(t,[null,void 0,"false","null","undefined",0])},s.hideControl=function(t){return t.css({position:"absolute",top:-1e3,left:-1e3})},t.exports=s},1272:function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 6 26" width="3" height="13"><circle cx="3" cy="3" r="3"/><circle cx="3" cy="13" r="3"/><circle cx="3" cy="23" r="3"/></svg>'},1273:function(t,e,i){"use strict";var n,s,r,o,a,l;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"TitledTablesPage",function(){return l}),n=i(0),s=i(1086),r=i(1134),o=i(1087),a=i(1068),l=function(t){function e(e){var i,n=$("<div>"),s=[];return e.tables.forEach(function(t){var e,i=$("<div>"),l=new o.Table(i,t.columns,t.options,t.priceFormatterFn)
;t.title&&$('<h3 class="tv-data-table__header">').text(t.title).appendTo(n),i.appendTo(n),e=new r.a(l,t.source,t.subscriptions,t.flags&&t.flags.supportPagination),s.push(e),l.addFormatters(t.formatters.concat(a.formatters)),e.start()}),i={id:e.id,name:e.title,headerCounter:!1},t.call(this,n,i,s)||this}return n.c(e,t),e}(s.TablePage)},1274:function(t,e,i){"use strict";(function(n){function s(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var l,c,u,d,h,p,_,f,b,v,g,y,m,w,C,S,T,O,j,P,x,D,k,A;Object.defineProperty(e,"__esModule",{value:!0}),l=function t(e,i,n){var s,r,o;return null===e&&(e=Function.prototype),void 0===(s=Object.getOwnPropertyDescriptor(e,i))?(r=Object.getPrototypeOf(e),null===r?void 0:t(r,i,n)):"value"in s?s.value:void 0!==(o=s.get)?o.call(n):void 0},c=function(){function t(t,e){var i,n;for(i=0;i<e.length;i++)n=e[i],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),u=i(1068),d=i(1166),h=i(80),p=i(118),_=i(82),f=i(976),b=i(8),v=s(b),g=i(1167),y=i(1086),m=i(1087),w=i(1276),i(9),C=i(123).debounce,S=0,T=-1,O="Orders Page",j=function(){function t(e,i,n,s){a(this,t),this._source=e,this._totalCount=0,this._activeCount=0,this._orderUpdateDelegate=i,this._fullUpdateDelegate=n,this._possibleStatuses=s,this._statusCount=this._emptyStatuses(),this.countChanged=new v.default,this._recalcCountsDelayed=C(this._recalcCounts.bind(this),100)}return c(t,[{key:"_emptyStatuses",value:function(){var t={};return this._possibleStatuses.forEach(function(e){t[e]=0}),t}},{key:"start",value:function(){this._orderUpdateDelegate.subscribe(this,this._recalcCountsDelayed),this._fullUpdateDelegate.subscribe(this,this._recalcCountsDelayed),this._recalcCounts()}},{key:"stop",value:function(){this._statusCount=this._emptyStatuses(),this._orderUpdateDelegate.unsubscribe(this,this._recalcCountsDelayed),this._fullUpdateDelegate.unsubscribe(this,this._recalcCountsDelayed)}},{key:"_recalcCounts",value:function(){var t=this,e=this._emptyStatuses();this._source().then(function(i){var n=0;i.forEach(function(t){e[t.status]++,t.status!==p.ORDERSTATUS.WORKING&&t.status!==p.ORDERSTATUS.INACTIVE||n++}),t._possibleStatuses.forEach(function(i){e[i]!==t._statusCount[i]&&(t._statusCount[i]=e[i],t.countChanged.fire(i,t._statusCount[i]))}),t._totalCount!==i.length&&(t._totalCount=i.length,t.countChanged.fire(S,t._totalCount)),t._activeCount!==n&&(t._activeCount=n,
t.countChanged.fire(T,t._activeCount))})}}]),t}(),P=function(t){function e(t,i,n,s){a(this,e);var o=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i,n,s));return o._filterStatus=null,o}return o(e,t),c(e,[{key:"setFilterStatus",value:function(t){this._filterStatus=t,this.isStarted()&&(this.stop(),this.start())}},{key:"filterStatus",value:function(){return this._filterStatus}},{key:"_satisfy",value:function(t){return!this._filterStatus||t.status===this._filterStatus}}]),e}(w.AbstractObjectsFilter),x=function(t){function e(t,i,n,s,o){a(this,e);var l=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i,n,s));return l._functor=o,l}return o(e,t),c(e,[{key:"_satisfy",value:function(t){return this._functor(t)}}]),e}(w.AbstractObjectsFilter),D=function(){function t(e,i,n){a(this,t),this._source=e,this._rowUpdateDelegate=i,this._fullUpdateDelegate=n,this._orders=[],this.newStatusDelegate=new v.default}return c(t,[{key:"start",value:function(){var t=this;this._source().then(function(e){t._orders=e.slice(0),t._rowUpdateDelegate.subscribe(t,t._onRowUpdated),t._fullUpdateDelegate.subscribe(t,t._onFullUpdate)})}},{key:"stop",value:function(){this._fullUpdateDelegate.unsubscribe(this,this._onFullUpdate),this._rowUpdateDelegate.unsubscribe(this,this._onRowUpdated),this._orders=[]}},{key:"_onFullUpdate",value:function(){this.stop(),this.start()}},{key:"_onRowUpdated",value:function(t){var e=this._orders.find(function(e){return e.id===t.id});e&&e.status===t.status||(this.newStatusDelegate.fire(t),e?e.status=t.status:this._orders.push($.extend({},t)))}}]),t}(),k=function(t){function e(t,i,n,s){a(this,e);var o=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i,n));return o._filterStatusGetter=s,o}return o(e,t),c(e,[{key:"fullUpdate",value:function(){return this._fullUpdate()}},{key:"_onCreated",value:function(){var t=this;l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_onCreated",this).call(this),this.table().setRowActiveByFilter(function(e){return!t._filterStatusGetter()&&!(0,_.isOrderActive)(e.status)})}},{key:"_update",value:function(t){return!!l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_update",this).call(this,t)&&(this.table().setRowActiveById(t.id,!this._filterStatusGetter()&&!(0,_.isOrderActive)(t.status)),!0)}}]),e}(g.LinkingTableController),A=function(t){function e(t){var i,s,o,l,c,p,b,v,g,y,w,C,S,T;return a(this,e),i=t.formatters||[],s=new x(t.source,t.subscriptions.rowUpdateDelegate,null,t.subscriptions.fullUpdateDelegate,t.filter),o=new j(s.filterSource.bind(s),s.filterObjectUpdateDelegate,s.filterFullUpdateDelegate,t.possibleOrderStatuses),l=new P(s.filterSource.bind(s),s.filterObjectUpdateDelegate,s.filterObjectDeleteDelegate,s.filterFullUpdateDelegate),c=t.subscriptions.fullUpdateDelegate,t.source=l.filterSource.bind(l),t.subscriptions.rowUpdateDelegate=l.filterObjectUpdateDelegate,t.subscriptions.rowDeleteDelegate=l.filterObjectDeleteDelegate,t.subscriptions.fullUpdateDelegate=l.filterFullUpdateDelegate,p=$("<div>"),b=Object.assign({id:t.tableId,
className:"orders",group:function(t){return+(0,_.isOrderActive)(t.status)},idProperty:"id"},t.tableOptions),v=new m.Table(p,t.columns,b,t.priceFormatterFn),g={id:t.id,name:t.title,headerCounter:t.headerCounter},y=new k(v,t.source,t.subscriptions,function(){return w._ordersFilter.filterStatus()}),w=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,p,g,[y])),w._ordersTable=y,w._globalFullUpdateDelegate=c,w._statusWatcher=new D(s.filterSource.bind(s),s.filterObjectUpdateDelegate,s.filterFullUpdateDelegate),w._orderPreFilter=s,w._ordersFilter=l,w._statusesCount=o,w._activeCount=0,w._highlightChanges=t.highlightChanges,w._possibleOrderStatuses=t.possibleOrderStatuses,w._columns=t.columns,w._pendingNewOrdersByStatuses={},w._closeFn=function(){return(0,h.tradingService)().trackEvent(O,"Cancel Order"),t.cancelFn.apply(t,arguments)},w._editFn=null!==t.modifyFn?function(){return(0,h.tradingService)().trackEvent(O,"Edit Order"),t.modifyFn.apply(t,arguments)}:null,C={name:"orderSettings",format:function(t){var e,i,n=t.value;return(0,_.isOrderActive)(n.status)?(e=w._closeFn?function(){return w._closeFn(n.id)}:null,i=w._editFn?function(){return w._editFn(n)}:null,$((0,d.getSettingsButtons)(e,$.t("Cancel"),i,$.t("Modify Order...")))):$((0,d.getSettingsButtons)())}},v.addFormatters(u.formatters.concat([C]).concat(i)),S='\n\t\t<div class="tv-tabs tv-tabs--no-border tv-tabs--secondary-active tv-tabs--no-margin tv-tabs--semi-compact">\n\t\t\t{{#filter}}\n\t\t\t\t<div class="tv-tabs__tab {{id}}">\n\t\t\t\t\t<div class="tv-tabs__wrap">\n\t\t\t\t\t\t<div class="counter">\n\t\t\t\t\t\t\t<div class="counter__text">{{name}}</div>\n\t\t\t\t\t\t\t<div class="counter__count counter__count--{{id}}">0</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t{{/filter}}\n\t\t</div>',T=w._possibleOrderStatuses.map(w._translateStatus),w._filter=$(n.render(S,{filter:[{id:"status-all",name:$.t("All")}].concat(T)})),w._filterTabs=new f.Tabs(w._filter.get(0),null,{noSlider:!0}),w._subscribeUpdates(),w}return o(e,t),c(e,[{key:"_subscribeUpdates",value:function(){this._ordersTable.start(),this._orderPreFilter.start(),this._ordersFilter.start(),this._statusesCount.start(),this._statusWatcher.start(),this._statusWatcher.newStatusDelegate.subscribe(this,this._onNewStatus),this._filterTabs.tabChanged.subscribe(this,this._onFilterChanged),this._statusesCount.countChanged.subscribe(this,this._onCountChanged),this._globalFullUpdateDelegate.subscribe(this,this._onGlobalFullUpdate)}},{key:"_unsubscribeUpdates",value:function(){this._statusWatcher.newStatusDelegate.unsubscribe(this,this._onNewStatus),this._statusWatcher.stop(),this._ordersFilter.stop(),this._statusesCount.stop(),this._ordersTable.stop(),this._filterTabs.tabChanged.unsubscribe(this,this._onFilterChanged),this._statusesCount.countChanged.unsubscribe(this,this._onCountChanged),this._globalFullUpdateDelegate.unsubscribe(this,this._onGlobalFullUpdate)}},{key:"destroy",value:function(){this._unsubscribeUpdates(),
l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"_onGlobalFullUpdate",value:function(){this._pendingNewOrdersByStatuses={},this._updateFiltersActiveState()}},{key:"_count",value:function(){this._setCount(this._activeCount)}},{key:"_translateStatus",value:function(t){var e=(0,_.orderStatusToText)(t),i=e[0].toUpperCase()+e.slice(1);return{id:(0,_.orderStatusId)(t),name:i}}},{key:"contextItems",value:function(t){var e,i=this,n=[],s=this._ordersTable.table().rowIdAtEvent(t);return s?(e=this._ordersTable.table().rowById(s),null!==this._editFn&&n.push({text:$.t("Modify Order..."),enabled:(0,_.isOrderActive)(e.status),action:function(){return i._editFn(e)}}),n.push({text:$.t("Cancel Order"),enabled:(0,_.isOrderActive)(e.status),action:function(){return i._closeFn(s)}}),n):n}},{key:"_onFilterChanged",value:function(t){var e=this,i=0===t?null:this._possibleOrderStatuses[t-1];(0,h.tradingService)().trackEvent(O,"Order status filter",(0,_.orderStatusToText)(i)),this._ordersFilter.setFilterStatus(i),this._columns.filter(function(t){return t.hasOwnProperty("supportedStatusFilters")}).forEach(function(t){e._ordersTable.table().setColumnAvailable(t.property,t.supportedStatusFilters.includes(null!==i?i:p.ORDERSTATUSFILTER.ALL))}),this._ordersTable.fullUpdate().then(function(){i&&e._pendingNewOrdersByStatuses[i]&&e._pendingNewOrdersByStatuses[i].forEach(function(t){return e._ordersTable.table().highlightRowById(t)}),e._removeActiveState()})}},{key:"_onCountChanged",value:function(t,e){var i,n=this._filter.find(".counter .counter__count");return t===S?void $(n[0]).text(e):t===T&&this._activeCount!==e?(this._activeCount=e,void this._count()):void(-1!==(i=this._possibleOrderStatuses.indexOf(t))&&$(n[i+1]).text(e))}},{key:"_onNewStatus",value:function(t){var e=this;t.status!==p.ORDERSTATUS.PLACING&&(this._possibleOrderStatuses.forEach(function(i){if(e._pendingNewOrdersByStatuses[i]){var n=e._pendingNewOrdersByStatuses[i].indexOf(t.id);-1!==n&&e._pendingNewOrdersByStatuses[i].splice(n,1)}}),this._pendingNewOrdersByStatuses[t.status]||(this._pendingNewOrdersByStatuses[t.status]=[]),this._pendingNewOrdersByStatuses[t.status].push(t.id),setTimeout(function(){var i=e._ordersFilter.filterStatus(),n=!1;i&&i!==t.status||e._ordersTable.table().isRowInViewport(t.id)&&(e._ordersTable.table().highlightRowById(t.id),n=!0),n||e._pendingNewOrdersByStatuses[t.status]&&-1!==e._pendingNewOrdersByStatuses[t.status].indexOf(t.id)&&e._updateFiltersActiveState(),e._scheduleRemoveActiveState()},0))}},{key:"_scheduleRemoveActiveState",value:function(){var t=this;this._activeStateRemovalScheduled||(this._activeStateRemovalScheduled=!0,setTimeout(function(){return t._removeActiveState()},1e3))}},{key:"_removeActiveState",value:function(){this._activeStateRemovalScheduled=!1;var t=this._ordersFilter.filterStatus();t?this._pendingNewOrdersByStatuses[t]=[]:this._pendingNewOrdersByStatuses={},this._updateFiltersActiveState()}},{key:"_updateFiltersActiveState",value:function(){var t=this
;this._highlightChanges&&this._possibleOrderStatuses.forEach(function(e){var i=t._pendingNewOrdersByStatuses[e]&&t._pendingNewOrdersByStatuses[e].length;t._filter.find("."+(0,_.orderStatusId)(e)+" .counter__count").toggleClass("i-active",!!i)})}},{key:"topline",value:function(){return this._filter}},{key:"filter",get:function(){return this._filter}}]),e}(y.TablePage),e.default=A,t.exports=e.default}).call(e,i(93))},1275:function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 60 60"><path d="M0 46l35-35 14 14-35 35H0zM39 7l6-6c5-5 19 9 14 14l-6 6z"/></svg>'},1276:function(t,e,i){"use strict";var n,s,r;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"AbstractObjectsFilter",function(){return r}),n=i(8),s=i.n(n),r=function(){function t(t,e,i,n){this.filterFullUpdateDelegate=new s.a,this.filterObjectUpdateDelegate=new s.a,this.filterObjectDeleteDelegate=new s.a,this._filteredObjects=[],this._requestsCount=0,this._started=!1,this._objectsRequest=null,this._source=t,this._objectUpdateDelegate=e,this._objectDeleteDelegate=i,this._fullUpdateDelegate=n}return t.prototype.start=function(){var t,e,i=this;this._requestsCount++,t=this._source,e=this._objectsRequest||Promise.resolve([]),this._objectsRequest=e.then(function(){return t()}).then(function(t){var e=t.filter(function(t){return i._satisfy(t)});return i._requestsCount--,i._requestsCount||(i.stop(),i._filteredObjects=e,i._objectsRequest=null,i._objectUpdateDelegate.subscribe(i,i._onObjectUpdated),i._objectDeleteDelegate&&i._objectDeleteDelegate.subscribe(i,i._onObjectDeleted),i._fullUpdateDelegate.subscribe(i,i._onFullUpdate),i._started=!0),e.slice(0)})},t.prototype.stop=function(){this._objectUpdateDelegate.unsubscribe(this,this._onObjectUpdated),this._fullUpdateDelegate.unsubscribe(this,this._onFullUpdate),this._objectDeleteDelegate&&this._objectDeleteDelegate.unsubscribe(this,this._onObjectDeleted),this._filteredObjects=[],this._started=!1},t.prototype.isStarted=function(){return this._started},t.prototype.filterSource=function(){return this._objectsRequest?this._objectsRequest:Promise.resolve(this._filteredObjects.slice(0))},t.prototype._satisfy=function(t){throw Error("should be implemented")},t.prototype._onFullUpdate=function(){this.stop(),this.start(),this.filterFullUpdateDelegate.fire()},t.prototype._onObjectDeleted=function(t){var e=this._filteredObjects.find(function(e){return e.id===t});e&&this.filterObjectDeleteDelegate.fire(e.id)},t.prototype._onObjectUpdated=function(t){var e=this._filteredObjects.find(function(e){return e.id===t.id}),i=e?this._filteredObjects.indexOf(e):-1;this._satisfy(t)?(e?this._filteredObjects[i]=t:this._filteredObjects.push(t),this.filterObjectUpdateDelegate.fire(t)):e&&(this.filterObjectDeleteDelegate.fire(e.id),this._filteredObjects.splice(i,1))},t}()},1277:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){function n(t,e,i,n,s,r){var o={id:t,className:"positions",idProperty:"id"},a=new d.Table(e,s,o,r);return new m(a,i,n)}var s,r,o,a,l,c,u,d,h,p,_,f,b,v,g,y,m,w
;i.d(e,"PositionPage",function(){return w}),s=i(0),r=i(1068),o=i(1166),a=i(80),l=i(976),c=i(8),u=i.n(c),d=i(1087),h=i(6),i.n(h),p=i(1086),_=i(1167),i(9),f=i(26),i.n(f),b=i(123),v="Trading.PositionsTable.Filter",g='\n\t<div>\n\t\t<div class="tv-tabs tv-tabs--no-border tv-tabs--secondary-active tv-tabs--no-margin tv-tabs--semi-compact js-filter-wrapper">\n\t\t\t{{#filter}}\n\t\t\t\t<div class="tv-tabs__tab {{id}}">\n\t\t\t\t\t<div class="tv-tabs__wrap">\n\t\t\t\t\t\t<div class="counter">\n\t\t\t\t\t\t\t<div class="counter__text">{{name}}</div>\n\t\t\t\t\t\t\t<div class="counter__count counter__count--{{id}}">0</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t{{/filter}}\n\t\t</div>\n\t</div>',y=function(){function t(t,e,i){this._totalCount=0,this._recalcCountsDelayed=Object(b.debounce)(this._recalcCounts.bind(this),100),this._source=t,this._rowUpdateDelegate=e,this._fullUpdateDelegate=i,this.countChanged=new u.a}return t.prototype.start=function(){this._rowUpdateDelegate.subscribe(this,this._recalcCountsDelayed),this._fullUpdateDelegate.subscribe(this,this._recalcCountsDelayed),this._recalcCounts()},t.prototype.stop=function(){this._rowUpdateDelegate.unsubscribe(this,this._recalcCountsDelayed),this._fullUpdateDelegate.unsubscribe(this,this._recalcCountsDelayed)},t.prototype._recalcCounts=function(){var t=this;this._source().then(function(e){var i=e.filter(function(t){return 0!==t.qty});t._totalCount!==i.length&&(t._totalCount=i.length,t.countChanged.fire(t._totalCount))})},t}(),m=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s.c(e,t),e.prototype._update=function(e){return!!t.prototype._update.call(this,e)&&(0===e.qty&&this._deleteRow(e.id),!0)},e}(_.LinkingTableController),w=function(e){function i(t){var i,s,a,l,c,u,d,p,_=this,b=$("<div>"),g={id:"positions",name:window.t("Positions"),headerCounter:!0},m=$("<div>"),w=n(t.brokerId+".positions",m,t.positions.source,Object.assign({},t.positions.subscriptions,{fullUpdateDelegate:t.fullUpdateDelegate}),t.positions.columns,t.priceFormatterFn);return b.append(m),i=[w],s=null,a=null,t.trades&&(s=$("<div>"),a=n(t.brokerId+".trades",s,t.trades.source,Object.assign({},t.trades.subscriptions,{fullUpdateDelegate:t.fullUpdateDelegate}),t.trades.columns,t.priceFormatterFn),b.append(s),i.push(a)),_=e.call(this,b,g,i)||this,_._$positionsTableContainer=m,_._$tradesTableContainer=s,_._positionsTable=w,_._tradesTable=a,l=t.formatters||[],_._fullUpdateDelegate=t.fullUpdateDelegate,_._posSubscriptions=t.positions.subscriptions,_._checkSupportTrades=t.checkSupportTrades,_._storeFunctions(t),c={name:"posSettings",format:function(t){var e=_._closePositionFn?_._closePositionFn.bind(null,t.row.id):null,i=_._editPositionFn?_._editPositionFn.bind(null,t.row.id):null;return $(Object(o.getSettingsButtons)(e,window.t("Close",{context:"position"}),i,window.t("Protect Position...")))}},w.table().addFormatters([c].concat(r.formatters).concat(l)),t.trades?(u={name:"tradeSettings",format:function(t){
var e=_._closeTradeFn&&t.row.canBeClosed?_._closeTradeFn.bind(null,t.row.id):null,i=_._editTradeFn?_._editTradeFn.bind(null,t.row.id):null;return $(Object(o.getSettingsButtons)(e,window.t("Close",{context:"position"}),i,window.t("Protect Position...")))}},Object(h.ensure)(a).table().addFormatters([u].concat(r.formatters).concat(l)),_._tradesCounter=new y(t.trades.source,t.trades.subscriptions.countUpdateDelegate,_._fullUpdateDelegate)):_._tradesCounter=null,_._positionsCounter=new y(t.positions.source,_._posSubscriptions.countUpdateDelegate,_._fullUpdateDelegate),_._constructFilter(),_._checkShowFilter(),_._subscribeUpdates(),d=f.getInt(v,0),p=_._checkSupportTrades()?d:1,_._filterTabs.setActivePage(p),_._selectPage(p),_}return s.c(i,e),i.prototype.contextItems=function(t){var e,i,n=this._activeTableController().table(),s=n.rowIdAtEvent(t);return s?(e=Object(h.ensureDefined)(n.rowById(s)),i=[],0===this._filterTabs.index()?(this._editTradeFn&&i.push({text:window.t("Protect Position..."),action:this._editTradeFn.bind(null,s)}),this._closeTradeFn&&e.canBeClosed&&i.push({text:window.t("Close Position"),action:this._closeTradeFn.bind(null,s)})):(this._editPositionFn&&i.push({text:window.t("Protect Position..."),action:this._editPositionFn.bind(null,s)}),this._closePositionFn&&i.push({text:window.t("Close Position"),action:this._closePositionFn.bind(null,s)}),this._reversePositionFn&&i.push({text:window.t("Reverse Position"),action:this._reversePositionFn.bind(null,s)})),i):[]},i.prototype.topline=function(){return this._filter},i.prototype.destroy=function(){this._unsubscribeUpdates(),e.prototype.destroy.call(this)},i.prototype._onActiveChanged=function(t){t?this._activeTableController().setActive(!0):(this._positionsTable.setActive(!1),this._tradesTable&&this._tradesTable.setActive(!1))},i.prototype._onPositionsCountChanged=function(t){this._setCount(t),this._setTabCount(1,t)},i.prototype._onTradesCountChanged=function(t){this._setTabCount(0,t)},i.prototype._setTabCount=function(t,e){this._filter.find(".counter .counter__count")[t].innerHTML=e+""},i.prototype._activeTableController=function(){return this._checkSupportTrades()&&0===this._filterTabs.index()?Object(h.ensure)(this._tradesTable):this._positionsTable},i.prototype._subscribeUpdates=function(){this._positionsCounter.start(),this._positionsCounter.countChanged.subscribe(this,this._onPositionsCountChanged),this._tradesCounter&&(this._tradesCounter.start(),this._tradesCounter.countChanged.subscribe(this,this._onTradesCountChanged)),this._filterTabs.tabChanged.subscribe(this,this._selectPage),this._fullUpdateDelegate.subscribe(this,this._checkShowFilter)},i.prototype._unsubscribeUpdates=function(){this._positionsCounter.stop(),this._positionsCounter.countChanged.unsubscribe(this,this._onPositionsCountChanged),this._tradesCounter&&(this._tradesCounter.stop(),this._tradesCounter.countChanged.unsubscribe(this,this._onTradesCountChanged)),this._filterTabs.tabChanged.unsubscribe(this,this._selectPage),this._fullUpdateDelegate.unsubscribe(this,this._checkShowFilter)},
i.prototype._constructFilter=function(){this._filter=$(t.render(g,{filter:[{id:"type-individual",name:window.t("Individual Positions")},{id:"type-net",name:window.t("Net Positions")}]})),this._filterTabs=new l.Tabs(this._filter.find(".js-filter-wrapper").get(0),void 0,{noSlider:!0})},i.prototype._checkShowFilter=function(){var t=this._filter.find(".js-filter-wrapper");this._checkSupportTrades()?t.removeClass("js-hidden"):(t.addClass("js-hidden"),this._tradesTable&&this._tradesTable.stop())},i.prototype._selectPage=function(t){var e=1===t;e?this._positionsTable.start():this._tradesTable&&this._tradesTable.start(),this._$positionsTableContainer.toggleClass("js-hidden",!e),this._$tradesTableContainer&&this._$tradesTableContainer.toggleClass("js-hidden",e),this._positionsTable.setActive(e),this._tradesTable&&this._tradesTable.setActive(!e),f.setValue(v,t)},i.prototype._storeFunctions=function(t){var e,i,n,s,r,o=Object(h.ensure)(Object(a.tradingService)()),l="Positions Page",c=t.positions.closeFn;this._closePositionFn=c?function(t){return o.trackEvent(l,"Close Position"),c(t)}:null,e=t.positions.editFn,this._editPositionFn=e?function(t){return o.trackEvent(l,"Edit Position"),e(t)}:null,i=t.positions.reverseFn,this._reversePositionFn=i?function(t){return o.trackEvent(l,"Reverse Position"),i(t)}:null,(n=t.trades)&&(s=n.closeFn,this._closeTradeFn=s?function(t){return o.trackEvent(l,"Close Trade"),s(t)}:null,r=n.editFn,this._editTradeFn=r?function(t){return o.trackEvent(l,"Edit Trade"),r(t)}:null)},i}(p.TablePage)}.call(e,i(93))},1278:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a,l,c,u,d;Object.defineProperty(e,"__esModule",{value:!0}),a=function(){function t(t,e){var i,n;for(i=0;i<e.length;i++)n=e[i],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=function t(e,i,n){var s,r,o;return null===e&&(e=Function.prototype),void 0===(s=Object.getOwnPropertyDescriptor(e,i))?(r=Object.getPrototypeOf(e),null===r?void 0:t(r,i,n)):"value"in s?s.value:void 0!==(o=s.get)?o.call(n):void 0},c=i(8),u=n(c),d=function(t){function e(t){s(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return i._delegates=t,i._isSubscribed=!1,i}return o(e,t),a(e,[{key:"subscribe",value:function(t,i,n){var s=this;l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"subscribe",this).call(this,t,i,n),
!this._isSubscribed&&this._listeners.length&&this._delegates.forEach(function(t){return t.subscribe(s,s._onFire)})}},{key:"unsubscribe",value:function(t,i){var n=this;l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"unsubscribe",this).call(this,t,i),this._isSubscribed&&0===this._listeners.length&&this._delegates.forEach(function(t){return t.unsubscribe(n,n._onFire)})}},{key:"_onFire",value:function(){this.fire.apply(this,arguments)}}]),e}(u.default),e.default=d,t.exports=e.default},1279:function(t,e,i){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"notificationColumns",function(){return n}),i(9),n=[{label:$.t("Time"),property:"time",formatter:"localDate",className:"tv-data-table__cell--text tv-data-table__cell--text-nowrap"},{label:$.t("Title"),property:"title",className:"tv-data-table__cell--text tv-data-table__cell--text-nowrap"},{label:$.t("Text"),property:"text",className:"tv-data-table__cell--text"}]},1280:function(t,e,i){"use strict";function n(t,e){var i,n,s;return void 0===e&&(e=""),i=document.createElement("div"),i.className="tv-account-manager__el "+e,n=document.createElement("div"),n.className="tv-account-manager__text",n.textContent=t,s=document.createElement("div"),s.className="tv-account-manager__data js-collateral-value",i.appendChild(n),i.appendChild(s),i}var s,r;Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"AccountSummaryRow",function(){return r}),s=i(1068),r=function(){function t(t,e){this._infoUnsubscribe=[],this._infoUnsubscribe=e.reverse().map(function(e,i){var r,o,a,l="js-"+i,c=n(e.text,l),u=c.getElementsByClassName("js-collateral-value")[0];return t.appendChild(c),r=e.formatter||"fixed",o=Object(s.tableFormatterByName)(r),a=function(t){var e=o.format({value:t,$container:$(u),row:{}});u.textContent=(""+e).replace(/&nbsp;/g," ")},e.wValue.subscribe(a),void 0!==e.wValue.value()&&a(e.wValue.value()),function(){return e.wValue.unsubscribe(a)}})}return t.prototype.destroy=function(){this._infoUnsubscribe.forEach(function(t){return t()})},t}()},1281:function(t,e){
t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16"><path fill-rule="evenodd" d="M14.59 6.857s-.57 0-.723-.533c-.115-.457-.305-.876-.534-1.295-.228-.497.153-.878.153-.878l.57-.57c.23-.23.23-.61 0-.877l-.76-.762c-.23-.23-.61-.23-.877 0l-.572.57s-.38.382-.877.154c-.418-.23-.837-.42-1.294-.534-.533-.152-.533-.723-.533-.723v-.8a.602.602 0 0 0-.61-.61H7.467a.602.602 0 0 0-.61.61v.8s0 .57-.533.723c-.457.115-.876.305-1.295.534-.497.228-.878-.153-.878-.153l-.57-.57c-.23-.23-.61-.23-.877 0l-.762.76c-.23.23-.23.61 0 .877l.57.572s.382.38.154.877c-.23.418-.42.837-.534 1.294-.152.495-.723.533-.723.533h-.8a.602.602 0 0 0-.61.61v1.066c0 .343.267.61.61.61h.8s.57 0 .723.533c.115.457.305.876.534 1.295.228.497-.153.878-.153.878l-.57.57c-.23.23-.23.61 0 .877l.76.762c.23.23.61.23.877 0l.572-.57s.38-.382.877-.154c.418.23.837.42 1.294.534.495.152.533.723.533.723v.8c0 .343.267.61.61.61h1.066c.343 0 .61-.267.61-.61v-.8s0-.57.533-.723c.457-.115.876-.305 1.295-.534.497-.228.878.153.878.153l.57.57c.23.23.61.23.877 0l.762-.76c.23-.23.23-.61 0-.877l-.57-.572s-.382-.38-.154-.877c.23-.418.42-.837.534-1.294.152-.495.723-.533.723-.533h.8c.343 0 .61-.267.61-.61V7.467a.602.602 0 0 0-.61-.61h-.8zM4 8c0-2.222 1.778-4 4-4s4 1.778 4 4-1.812 4-4 4c-2.222 0-4-1.778-4-4z"/></svg>'},967:function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14 14" width="14" height="14"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M8.5 1.5L3.5 7l5 5.5"/></svg>'},976:function(t,e,i){"use strict";function n(t){var e,i=[];for(e=1;e<arguments.length;e++)i[e-1]=arguments[e];return t&&"object"==typeof t?0===i.length?t:(i.forEach(function(e){void 0!==e&&null!==e&&"object"==typeof e&&Object.keys(e).forEach(function(i){var r,o,a=t[i],l=e[i];l===t||(r=Array.isArray(l),l&&(s(l)||r)?(o=void 0,o=r?a&&Array.isArray(a)?a:[]:a&&s(a)?a:{},t[i]=n(o,l)):void 0!==l&&(t[i]=l))})}),t):t}function s(t){var e,i,n;return!(!t||"[object Object]"!==Object.prototype.toString.call(t))&&(!(e=Object.getPrototypeOf(t))||(i=Object.hasOwnProperty.toString,"function"==typeof(n=e.hasOwnProperty("constructor")&&e.constructor)&&i.call(n)===i.call(Object)))}var r,o,a,l,c,u,d,h,p,_,f,b,v,g;Object.defineProperty(e,"__esModule",{value:!0}),r=i(1067),o=i(373),a=i(146),l=i(77),c=i(8),u=i.n(c),d=i(967),h=i(977),p=i(26),_=i(36),i.d(e,"Tabs",function(){return g}),function(t){t[t.Left=0]="Left",t[t.Right=1]="Right"}(f||(f={})),b={saveTab:"",noSlider:!1,onTabClick:!1,loadedClass:"i-loaded",tabsContainerClass:"tv-tabs",tabClass:"tv-tabs__tab",tabDisabledClass:"disabled",activeTabClass:"i-active",activePageClass:"active",sliderClass:"tv-tabs__slider",scrollBoxClass:"tv-tabs__scroll-box",scrollWrapClass:"tv-tabs__scroll-wrap",lArrowClass:"tv-tabs__left-arrow",rArrowClass:"tv-tabs__right-arrow"},v={leftArrow:d,rightArrow:h},g=function(){function t(t,e,i){void 0===i&&(i={}),this._animating=!1,this._prevWidth=-1,this._bindings=[],this._options=n({},b,i),this.tabChanged=new u.a,this._elTabs=t,this._elPages=e,
this._elScrollWrap=this._findOrCreateElement(this._options.scrollWrapClass||"",this._elTabs,"wrapInner"),this._elScrollBox=this._findOrCreateElement(this._options.scrollBoxClass||"",this._elScrollWrap,"wrapInner"),this._elArrowLeft=this._findOrCreateElement(this._options.lArrowClass||"",this._elTabs,"append",'<div class="'+(this._options.lArrowClass||"")+' i-slided">'+v.leftArrow+"</div>"),this._elArrowRight=this._findOrCreateElement(this._options.rArrowClass||"",this._elTabs,"append",'<div class="'+(this._options.rArrowClass||"")+' i-slided">'+v.rightArrow+"</div>"),this._options.noSlider||(this._elSlider=this._findOrCreateElement(this._options.sliderClass||"",this._elScrollBox,"append")),this._addClass(this._elArrowLeft,this._options.addLeftArrowsClass),this._addClass(this._elArrowRight,this._options.addRightArrowsClass),this._addClass(this._elScrollBox,this._options.addScrollBoxClass),this._addClass(this._elSlider,this._options.addSliderClass),this._addClass(this._elTabs,this._options.tabsContainerClass),this._addClass(this.getTabsArray(),this._options.tabClass),this._addClass(this._elTabs,this._options.loadedClass),this.checkScrollArrows(!0),this._initActivePage(),this._bindEvents()}return t.prototype.getTabsArray=function(){var t,e,i,n=this._elScrollBox.children;if(!this._options.sliderClass)return Array.prototype.slice.call(n);for(t=[],e=0;e<n.length;e++)i=n[e],i.classList.contains(this._options.sliderClass)||t.push(i);return t},t.prototype.getPagesArray=function(){return this._elPages?Array.prototype.slice.call(this._elPages.children):[]},t.prototype.getElTabs=function(){return this._elTabs},t.prototype.getElPages=function(){return this._elPages},t.prototype.checkScrollArrows=function(t){function e(t){t.classList.remove("i-slided"),$.Velocity&&$.Velocity.animate(t,{translateX:"0%"},{duration:l.dur/2,easing:"easeOutCubic",queue:!1})}function i(e,i){if(t)return e.classList.add("i-slided"),void e.setAttribute("style","");var n=i===f.Left?"-100%":"100%";Object(o.lazyVelocity)().then(function(){$.Velocity.animate(e,{translateX:n},{complete:function(){return e.classList.add("i-slided")},duration:l.dur/2,easing:"easeOutCubic",queue:!1})})}var n,s,r,a;void 0===t&&(t=!1),n=Math.ceil(this._elScrollWrap.scrollLeft),s=this._getElWidth(this._elScrollWrap),r=10,a=this._elScrollWrap.scrollWidth-s,n>=r?e(this._elArrowLeft):(n<=r||this._elScrollWrap.scrollWidth<=s)&&i(this._elArrowLeft,f.Left),a-n>1?e(this._elArrowRight):(n>=a||this._elScrollWrap.scrollWidth<=s)&&i(this._elArrowRight,f.Right)},t.prototype.index=function(){var t=this.getElActiveTab();return t?this.getTabsArray().indexOf(t):-1},t.prototype.getElActiveTab=function(){return this._getActiveElement(this.getTabsArray(),this._options.activeTabClass||"",this._options.inactiveTabClass)},t.prototype.getElActivePage=function(){return this._getActiveElement(this.getPagesArray(),this._options.activePageClass||"",this._options.inactivePageClass)},t.prototype.setActivePage=function(t,e,i){function n(e,i,n){e.forEach(function(e,s){var r=t===s,o=e.classList;i&&o.toggle(i,r),
n&&o.toggle(n,!r)})}if(-1!==t&&(t!==this.index()||i)){var s=this.index();n(this.getTabsArray(),this._options.activeTabClass,this._options.inactiveTabClass),n(this.getPagesArray(),this._options.activePageClass,this._options.inactivePageClass),this._options.noSlider||this.updateSlider(s,t,e),this._options.saveTab&&p.setValue(this._options.saveTab,t),this.tabChanged.fire(t)}},t.prototype.updateSlider=function(t,e,i){var n,s,r,a,c,u,d=this;this._options.noSlider||(n=this.getTabsArray()[e],0===n.clientWidth||0===n.clientHeight||"none"===window.getComputedStyle(n).getPropertyValue("display")||(s=window.getComputedStyle(n),r=n.offsetLeft+parseInt(s.getPropertyValue("padding-left")),a=this._getElWidth(n),c=n.querySelector(".js-tabs__slider-pos"),c&&(u=window.getComputedStyle(c),r+=parseInt(u.getPropertyValue("padding-left"))+c.offsetLeft,a-=a-this._getElWidth(c)),i=i||-1===t||document.all&&!window.atob,i?(this._elSlider.style.left=r+"px",this._elSlider.style.width=a+"px"):(this._animating=!0,Object(o.lazyVelocity)().then(function(){$.Velocity.animate(d._elSlider,{left:r},{duration:l.dur,easing:"easeOutCubic",queue:!1}),$.Velocity.animate(d._elSlider,{width:a},{complete:function(){d._animating=!1},duration:l.dur,easing:"easeOutCubic",queue:!1})}))))},t.prototype.onTabClick=function(t){var e=t.currentTarget||t.target,i=this.getTabsArray().indexOf(e);-1===i||this._isTabDisabled(e)||this.setActivePage(i),document.activeElement.blur(),t.preventDefault()},t.prototype.resizeSlider=function(){var t,e;this._options.noSlider||(t=this._elTabs.offsetWidth)!==this._prevWidth&&(this._prevWidth=t,e=this.index(),this.updateSlider(e,e,!0))},t.prototype.count=function(){return this.getTabsArray().length},t.prototype.add=function(t,e){this._elScrollBox.appendChild(t),this._elPages&&e&&this._elPages.appendChild(e),this._bindTabEvents(t),this.checkScrollArrows(!0)},t.prototype.remove=function(t){function e(t){t.parentElement&&t.parentElement.removeChild(t)}var i,n,s=this.tabAt(t);s&&(this._unbindTabEvents(s),e(s)),i=this.pageAt(t),i&&e(i),n=t-1>=0?t-1:0,this.setActivePage(n),this.checkScrollArrows(!0)},t.prototype.indexOfTab=function(t){return this.getTabsArray().indexOf(t)},t.prototype.indexOfPage=function(t){return this.getPagesArray().indexOf(t)},t.prototype.pageAt=function(t){return this.getPagesArray()[t]||null},t.prototype.tabAt=function(t){return this.getTabsArray()[t]||null},t.prototype.deselect=function(t){var e,i=this.getElActiveTab();return this._options.activeTabClass&&i&&i.classList.remove(this._options.activeTabClass),e=this.getElActivePage(),this._options.activePageClass&&e&&e.classList.remove(this._options.activePageClass),this._elSlider&&(this._elSlider.style.left="",this._elSlider.style.width=""),this},t.prototype.stop=function(){this._unbindEvents({})},t.prototype._getElWidth=function(t){if(0===t.offsetWidth)return 0;var e=window.getComputedStyle(t)
;return t.offsetWidth-parseFloat(e.getPropertyValue("padding-left"))-parseFloat(e.getPropertyValue("padding-right"))-parseFloat(e.getPropertyValue("border-left-width"))-parseFloat(e.getPropertyValue("border-right-width"))},t.prototype._findOrCreateElement=function(t,e,i,n){var s,r,o,a=e.querySelector("."+t);if(!a)if(s=document.createElement("div"),s.innerHTML=n||'<div class="'+t+'"></div>',a=s.firstElementChild,"append"===i)e.appendChild(a);else{if("wrapInner"!==i)throw Error("Unknown insertMethod");for(r=Array.prototype.slice.call(e.childNodes),o=0;o<r.length;o++)a.appendChild(r[o]);e.appendChild(a)}return a},t.prototype._addClass=function(t,e){if("string"==typeof e){Array.isArray(t)||(t=[t]);var i=e.split(/\s+/);t.forEach(function(t){i.forEach(function(e){t.classList.add(e)})})}},t.prototype._initActivePage=function(){var t,e=0;this._options.saveTab&&(e=p.getInt(this._options.saveTab,0)),t=this.index(),-1!==t&&(e=t),void 0!==this._options.activeTab&&(e=this._options.activeTab),this.setActivePage(e,!0,!0)},t.prototype._bindEvents=function(){var t,e=this;this.getTabsArray().forEach(this._bindTabEvents.bind(this)),this._bindOneEvent({eventName:"scroll",listener:this.checkScrollArrows.bind(this,!1),target:this._elScrollWrap}),this._bindOneEvent({eventName:"click",listener:function(t){var i=e.getTabsArray(),n=0,s=!1,r=e._elScrollWrap.scrollLeft;_.IS_RTL&&i.reverse(),i.forEach(function(t){if(!s){var e=t.offsetLeft+t.offsetWidth;e>r?s=!0:n=e}}),Object(o.lazyVelocity)().then(function(){$.Velocity.animate(e._elScrollWrap,"scroll",{axis:"x",container:$(e._elScrollWrap),duration:l.dur/2,easing:"easeInOutCubic",offset:Math.floor(n-r-e._getElWidth(e._elArrowLeft)),queue:!1})})},target:this._elArrowLeft}),this._bindOneEvent({eventName:"click",listener:function(t){var i=e.getTabsArray(),n=0,s=_.IS_RTL?0:e._elScrollWrap.scrollLeft+e._getElWidth(e._elScrollWrap);_.IS_RTL&&i.reverse(),i.forEach(function(t){if(0===n){var e=t.offsetLeft+t.offsetWidth;e>s&&(n=e)}}),Object(o.lazyVelocity)().then(function(){$.Velocity.animate(e._elScrollWrap,"scroll",{axis:"x",container:$(e._elScrollWrap),duration:l.dur/2,easing:"easeInOutCubic",offset:Math.ceil(n-s+e._getElWidth(e._elArrowRight)),queue:!1})})},target:this._elArrowRight}),t=Array.prototype.slice.call(this._elTabs.querySelectorAll(".js-tabs__slider-hover")||[]),t.length&&t.forEach(function(t){return e._bindOneEvent({eventName:"mouseenter",listener:function(t){if(!e._animating){var i=t.currentTarget;i&&e._options.activeTabClass&&i.classList&&i.classList.contains(e._options.activeTabClass)&&e._hoverSlider(i)}},target:t})}),this._bindOneEvent({eventName:"resize",listener:function(){e.checkScrollArrows(!0),e._options.noSlider||e.resizeSlider()},target:window})},t.prototype._bindTabEvents=function(t){var e=this;this._bindOneEvent({eventName:"click",listener:function(t){"function"==typeof e._options.onTabClick?e._options.onTabClick(t):e.onTabClick(t)},target:t})},t.prototype._unbindTabEvents=function(t){this._unbindEvents({target:t})},t.prototype._bindOneEvent=function(t){
t.target.addEventListener(t.eventName,t.listener),this._bindings.push(t)},t.prototype._unbindEvents=function(t){var e=function(e){return!(void 0!==e.eventName&&e.eventName!==t.eventName||void 0!==e.target&&e.target!==t.target||void 0!==e.listener&&e.listener!==t.listener)};this._bindings.filter(e).forEach(function(t){return t.target.removeEventListener(t.eventName,t.listener)}),this._bindings=this._bindings.filter(function(t){return!e(t)})},t.prototype._getActiveElement=function(t,e,i){var n=function(t,n,s){return e?t.classList.contains(e):!!i&&!t.classList.contains(i)};return t.filter(n)[0]||null},t.prototype._isTabDisabled=function(t){return t.classList.contains("i-disabled")||this._options.tabDisabledClass&&t.classList.contains(this._options.tabDisabledClass)||t.hasAttribute("disabled")},t.prototype._hoverSlider=function(t){var e,i=this,n=this._getElWidth(t),s=window.getComputedStyle(t),r=t.offsetLeft+parseInt(s.getPropertyValue("padding-left"))+parseInt(s.getPropertyValue("margin-left")),a={duration:l.dur/4,easing:"easeOutCubic",queue:!1};Object(o.lazyVelocity)().then(function(){$.Velocity.animate(i._elSlider,{left:r},a),$.Velocity.animate(i._elSlider,{width:n},a)}),e=function(){i.getElActiveTab()===t&&i._unhoverSlider(t),t.removeEventListener("mousleave",e)},t.addEventListener("mouseleave",e)},t.prototype._unhoverSlider=function(t){var e=this,i=window.getComputedStyle(t),n=t.querySelector(".js-tabs__slider-pos"),s=window.getComputedStyle(n),r=t.offsetLeft+parseInt(i.getPropertyValue("padding-left"))+parseInt(i.getPropertyValue("margin-left"))+parseInt(s.getPropertyValue("padding-left"))+n.offsetLeft,a=this._getElWidth(t),c=a-(a-this._getElWidth(n)),u={duration:l.dur/2,easing:"easeInSine",queue:!1};Object(o.lazyVelocity)().then(function(){$.Velocity.animate(e._elSlider,{left:r},u),$.Velocity.animate(e._elSlider,{width:c},u)})},t}()},977:function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14 14" width="14" height="14"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M5.5 1.5l5 5.5-5 5.5"/></svg>'}});